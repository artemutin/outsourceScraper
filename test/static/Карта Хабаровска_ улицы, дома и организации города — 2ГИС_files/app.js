function makeGradienter(){function e(e,t){t=t||{},this._data=e||[],this._grouped=[],this._gradientPercent=t.gradientPercent||30,this._minGradient=t.minGradient||10,this._minColorLength=t.minColorLength||20,this._maxGradient=t.maxGradient||30,this._needRecalc=!0}var t={findPointOnLine:function(e,t,n){if(0===n)return e;var a=e.x,i=e.y,o=t.x,r=t.y,s=[o-a,r-i],l=Math.sqrt(s[0]*s[0]+s[1]*s[1]),c=[s[0]/l,s[1]/l];return{x:a+n*c[0],y:i+n*c[1]}},distanceTo:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}};return e.prototype._groupedByColor=function(){var e,t,n,a,i=[];for(e=0,t=this._data.length;t>e;e++)n=this._data[e],n.z===a?i.push(n):(i.length&&(1===i.length&&i.push(i[0]),this._grouped.push({points:i,color:i[0].z})),i=[n]),a=n.z;return i.length&&this._grouped.push({points:i,color:i[0].z}),this},e.prototype._setGroupsDistance=function(){var e,n,a,i,o,r,s,l=0;for(e=0,a=this._grouped.length;a>e;e++){for(i=this._grouped[e],l=0,n=0,o=i.points.length;o>n;n++)s=i.points[n],r=i.points[n+1],r&&(l+=t.distanceTo(s,r));i.distance=l,i.toDelete=this._minColorLength>i.distance}return this},e.prototype._cleanGrouped=function(){var e,t,n,a=[];for(e=0,t=this._grouped.length;t>e;e++)n=this._grouped[e],n&&n.points&&n.points.length&&a.push(this._grouped[e]);return this._grouped=a,this},e.prototype._setGradientsLength=function(){var e,t,n,a,i;for(e=0,n=this._grouped.length;n>e;e++)i=this._grouped[e-1],t=this._grouped[e],a=this._grouped[e+1],t.startGradient=0,i&&(t.startGradient=Math.floor(Math.min(i.distance,t.distance)*this._gradientPercent/100),t.startGradient=Math.max(Math.min(t.startGradient,this._maxGradient),this._minGradient)),t.endGradient=0,a&&(t.endGradient=Math.floor(Math.min(a.distance,t.distance)*this._gradientPercent/100),t.endGradient=Math.max(Math.min(t.endGradient,this._maxGradient),this._minGradient));return this},e.prototype.changePointsColor=function(e,t){var n,a;for(n=0,a=t.length;a>n;n++)t[n].z=e;return t},e.prototype._calculateGradientPoints=function(){var e,n,a,i,o,r,s,l,c=0;for(e=0,o=this._grouped.length;o>e;e++){if(r=this._grouped[e],r.startGradient){c=0;var u=0;for(n=0,s=r.points.length;s>n;n++){if(a=r.points[n],l=r.points[n+1],l&&(c+=t.distanceTo(a,l)),c>r.startGradient){i=t.findPointOnLine(a,l,r.startGradient-u),i.z=l.z,r.points=r.points.slice(0,n+1).concat([i]).concat(r.points.slice(n+1));break}u=c}}if(r.endGradient){c=0;var d;for(s=r.points.length-1,n=s;n>=0;n--)if(a=r.points[n],d=r.points[n-1],d&&(c+=t.distanceTo(a,d)),c>r.endGradient){i=t.findPointOnLine(d,a,c-r.endGradient),i.z=a.z,r.points=r.points.slice(0,n).concat([i]).concat(r.points.slice(n));break}}r.startGradient&&r.points[0]&&(r.points[0].z=void 0),r.endGradient&&r.points[r.points.length-1]&&(r.points[r.points.length-1].z=void 0)}return this},e.prototype._getPathByGrouped=function(){var e,t,n=[];for(e=0,t=this._grouped.length;t>e;e++){var a=this._grouped[e].points;e!==t-1&&a.pop(),n=n.concat(a)}return n},e.prototype._calculateGradientLength=function(){for(;this._needRecalc;)this._needRecalc=!1,this._setGroupsDistance()._deleteShortGroups();return this._setGradientsLength(),this},e.prototype._deleteShortGroups=function(){var e,t,n,a,i;for(e=0,n=this._grouped.length;n>e;e++)i=this._grouped[e-1],t=this._grouped[e],a=this._grouped[e+1],t.toDelete&&(i||a)&&(i&&(!a||i.distance>a.distance)?(t.points=this.changePointsColor(i.color,t.points),i.points=i.points.concat(t.points)):a&&(t.points=this.changePointsColor(a.color,t.points),a.points=t.points.concat(a.points)),delete this._grouped[e],this._needRecalc=!0);return this._cleanGrouped()},e.prototype.getGradientPath=function(){return this._groupedByColor()._calculateGradientLength()._calculateGradientPoints()._getPathByGrouped()},e}require=function e(t,n,a){function i(r,s){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);var c=Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){var n=t[r][1][e];return i(n?n:e)},u,u.exports,e,t,n,a)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<a.length;r++)i(a[r]);return i}({"/apps/online/clientBootstrap.js":[function(e,t,n){function a(e){"#"==e.charAt(0)&&(e=e.substr(1)),"/"==e.charAt(0)&&(e=e.substr(1));var t=e.indexOf("?");return-1!==t&&(e=e.substr(0,t)),e}function i(){return a(document.location.hash)}function o(e){if(e.isGrym){var t=u();return t.getUrl()}return document.location.pathname+(document.location.search||"")}e("../../env/client")();var r=e("slot/env"),s=e("./app"),l=e("lodash"),c=e("slot/lib/stuff"),u=req("lib/offlineStorage/offlineStorage");e("bluebird").config({warnings:!1}),n.getApp=function(){return s()},n.run=function(e){var t=s(),n=t.requireComponent("syncRegistry"),a=t.requireComponent("defer"),u=t.requireComponent("analytics"),d=t.requireComponent("featureSwitcher");t.wasRendered=isRendered,$(window).on("load",function(){function e(e){return(Math.round(e/100)/10).toFixed(1)+""}if(window.isLoaded=!0,d.get("performance")&&window.performance&&window.performance.timing){var n,a=window.performance.timing,i=a.domLoading-a.fetchStart,o=window.parseEndTime-a.fetchStart,r=a.domContentLoadedEventStart-a.fetchStart,s=a.domComplete-a.fetchStart;t.ua().isPhone?n="Phone":t.ua().isDesktop&&(n="Desktop"),n&&(u.trackEvent("google",["Performance","ParseStart"+n,e(i)]),u.trackEvent("google",["Performance","ParseEnd"+n,e(o)]),u.trackEvent("google",["Performance","DomReady"+n,e(r)]),u.trackEvent("google",["Performance","Onload"+n,e(s)]))}}),$(function(){function s(){m||(document.location.hash="")}var h=t.config,p=document.location.pathname.split("/")[1],f=h.debug&&h.devPages&&h.devPages[p],m=f&&!f.history,g=!1,_=n.get("timestamp");isNaN(_)||(time.userTimeOffset=Math.round((_-time.userTime)/1e3)),m||(g=req("helpers/oldUrl").convertOldUrl(document.location.hash)),g!==!1?(t.stateNotRendered=!0,s()):history.emulate?(g=m?o(h):i(),t.stateNotRendered=!0):(g=o(h),!g&&i()&&(t.stateNotRendered=!0,g=i(),s()));var v=c.uri2state(document.location.search),y={url:g,query:v,city:n.get("cityForInit"),hostname:document.location.hostname,host:document.location.host,protocol:document.location.protocol.slice(0,-1),port:document.location.port?document.location.port:80,ip:r.global.ip,ua:navigator.userAgent||""};m&&(t.historyDisabled=!0),t.prepareInit(y),t.mainModuleReady=a(),t.init(y,function(n,a){var i=t.requireComponent("appState");if(n){var o=g||"/",r={name:n.name,message:n.message,userAgent:navigator.userAgent,displayUrl:o,url:""+document.location};t.mainModuleReady.reject(),t.sendError("app init error - "+n.name,r)}else t.wasRendered||($(".layout__content").html(a.render()),t.isGrym&&$(document.body).removeClass("_hasBackground")),i.on("statechange",function(e){var n=location.search?[location.pathname,location.search].join("/"):location.pathname;u.trackEvent("googlePageParam",[n]),t.processModules(t.mainModule.id,"*",function(n){n.changeState&&n.changeState(e,i),"global"in e&&(e.global?t.tryCallInterfaceMethod(n,"enterGlobal"):t.tryCallInterfaceMethod(n,"exitGlobal"))},!0),t.runTransitions()}),t.bind(),t.stateNotRendered=!1,t.mainModuleReady.resolve();if(e&&e(n),d.get("performance")){var s=i.getActualState(),c=l.last(s.panels),h=c&&c.type,p=t.isInitialState()?"Initial":null,f=h||p||"Other";u.trackEvent("google",["Performance","Landing",f])}"complete"==document.readyState?t.emit("clientReady"):$(window).on("load",function(){t.emit("clientReady")})})})}},{"../../env/client":"/env/client.js","./app":1,bluebird:384,lodash:"lodash","slot/env":"slot/env","slot/lib/stuff":496}],"/components/analytics/analytics.js":[function(e,t,n){var a=e("lodash");e("slot/lib/stuff");t.exports=function(t,n,i,o){function r(e){if(t.isClient){w[e]=w[e]||[];var n="bss_"+e+"_order",i=o.get(n);a.isEmpty(i)||(w[e].unshift(i),o.remove(n))}a.each(w[e],function(t){C.trackEvent(e,t)})}function s(){n.queryString.has("printmode")||i.get("businessLandingDemoMode")||(l(),c())}function l(){b||(t.isGrym?d.on("changeNetwork",function(e){!b&&e&&(p.load(L.google),f.load(L.yandex),b=!0)}):(p.load(L.google),f.load(L.yandex),h.init(k,x,r),t.on("clientReady",function(){m.load(),g.load()}),b=!0))}function c(){t.isGrym||y||(y=_.load(),k.inspectlet=function(e){y&&_.trackEvent(e)},k.inspectletPageview=function(e){y&&_.trackPageview(e)},x.inspectlet=this)}function u(e){return a.includes(["search","apitracker","impression","launch"],e)}var d=t.requireComponent("checkNetwork"),h=e("./trackers/apitracker")(t),p=e("./trackers/google")(t),f=e("./trackers/yandex")(t),m=e("./trackers/tns")(t),g=e("./trackers/liveinternet")(t),_=e("./webvisor")(t),v=e("./globalify")(n),y=!1,b=!1,k={},w={},x={},C={},L={google:a.partial(p.init,k,x,r),yandex:a.partial(f.init,k,x,r)};return C={trackEvent:function(e,a){t.isGrym&&t.registry.get("offline")||n.floors.isActive()&&"googleFloors"!=e&&!u(e)||(a=v(e,a),"function"==typeof k[e]?k[e].apply(x[e],a):(w[e]=w[e]||[],w[e].push(a),t.isServer&&"launch"==e&&o.set("bss_"+e+"_order",a)))},trackPageview:function(){if(!(t.isServer||t.registry.get("isInit")||t.isGrym&&t.registry.get("offline"))){var e=t.location.href(),n=t.location.page(),a=document.title;C.trackEvent("googlePageview",[{location:e,page:n,title:a}]),C.trackEvent("yandexPageview",[e,a])}},getOrderByType:function(e){return w[e]}},a.extend(C,h.analytics),t.isClient&&t.on("bind",s),C},t.exports._args=["app","$appState","$featureSwitcher","$syncRegistry"]},{"./globalify":28,"./trackers/apitracker":29,"./trackers/google":34,"./trackers/liveinternet":35,"./trackers/tns":36,"./trackers/yandex":37,"./webvisor":38,lodash:"lodash","slot/lib/stuff":496}],"/components/apartmentsApi/apartmentsApi.js":[function(e,t,n){var a=e("./utils/request"),i=e("slot/config"),o=e("lodash");t.exports=function(e){function t(t,a){var i=n[t];return o.each(a,function(e,t){i=i.replace(":"+t,e)}),e.config["apartments.url"]+i}var n={checkGeo:"geo/:geoId",checkGeoByOrg:"org/:orgId/geo/:geoId",listInBuildings:"geo/:geoIds/apartments",checkOrg:"org/:orgId",getCoverage:"org/:orgId/apartments/coverage"};return{geoHaveApartments:function(e,n){return a(t("checkGeo",{geoId:e}),"GET",{},n)},geoHaveApartmentsByOrg:function(e,n,i){return a(t("checkGeoByOrg",{geoId:e,orgId:n}),"GET",{},i)},getList:function(e,n,r){e=o.isArray(e)?e.join(","):e;var s=["limit","page","service_type","property_type","org_id"],l={limit:i["apartments.pageSize"],page:1};return o.extend(l,o.pick(n,s)),a(t("listInBuildings",{geoIds:e}),"GET",l,r)},firmHaveAppartments:function(e,n){return a(t("checkOrg",{orgId:e}),"GET",{},n)},getCoverage:function(e,n){return a(t("getCoverage",{orgId:e}),"GET",{},n)}}}},{"./utils/request":39,lodash:"lodash","slot/config":"slot/config"}],"/components/appState/appState.js":[function(e,t,n){function a(t,n){if(!(this instanceof a))return new a(t,n);i.call(this,t,n),this.configure(s),s.app=t,this.setComparator(l.states),this.finalizer=e("./state/finalizer")(t),this.pushFromMapCount=0,this.escButtonApi=new c(this),this.on("beforestatechange",this._onBeforeStateChange),this.on("beforeadd",this._onBeforeAdd);var o=this;this.stateTracker.on("afterAdd",function(e){o.queryString.update(e.url)}),this.stateHandlers=e("./handlers")(t),this.stateHandlers.setup(),this.on("parse",function(e,t){o.stateHandlers.run("appstate.parse",e,t)}),this.on("init",function(e,t){o.stateHandlers.run("appstate.resolve",e,t)})}var i=e("slot/components/appState"),o=e("./state/api"),r=e("inherits"),s=e("./stateConf"),l=e("./state/cmp"),c=e("./state/escButtonApi"),u=req("helpers/panels");i.setStateApi(o),r(a,i),a.prototype._onBeforeStateChange=function(){this.lastAddType||(this.pushFromMapCount=0)},a.prototype._onBeforeAdd=function(e,t){this.applyFinalizer(t),this.escButtonApi.modifyEscList(t)},a.prototype.init=function(e,t){i.prototype.init.call(this,e.url,function(){var n=u.getUniqueType(this.panels.panels);this.panels.assign(n),this.set("panels",n),this.escButtonApi.modifyEscList(this.comparator({},this.actualState)),this.queryString.assign(e.query),t()})},a.prototype.push=function(e,t){this.add("push",e,t)&&(this.pushFromMapCount=0)},a.prototype.replace=function(e,t){this.add("replace",e,t)&&(this.pushFromMapCount=0)},a.prototype.pushFromMap=function(){var e=this.pushFromMapCount>0?"replace":"push";this.add(e)&&this.pushFromMapCount++},a.prototype.newStateApi=function(){var e=new o(this.app);return e.setFinalizer(this.finalizer),e.applyFinalizer()},t.exports=a,t.exports._args=["app","$stateTracker"]},{"./handlers":41,"./state/api":43,"./state/cmp":44,"./state/escButtonApi":46,"./state/finalizer":48,"./stateConf":55,inherits:447,"slot/components/appState":479}],"/components/appState/handlers/booklet/luxuryUrl.js":[function(e,t,n){function a(e,t){var n=t&&1==i.size(e);return n||i.isEmpty(e)&&!i.isEmpty(e.notParsed)}var i=e("lodash");n["appstate.parse"]=function(e,t,n){if(e.isGrym)return n();var o=t.parse(),r=o.notParsed;o=i.reject(o,function(e){return"lang"==e.slug}),o.notParsed=r;var s=i.find(o,function(e){return"booklet"==e.slug});if(!a(o,s))return n();var l,c,u=e.requireComponent("bookletApi");if(s)l=s.params.bookletId,c=!1;else{if(l=r[0].valueOf().split("/"),l=""!==l[0]?l[0]:l[1],0==/^[0-9a-zA-Z]+$/.test(l))return n();c=!0}return u.getBooklet({bookletId:l},function(a,i){if(!a){var o=i&&i.project_id;t.set("city",{id:o}),c&&i.is_active?(t.set("luxuryUrl",!0),t.addUriAlias("booklet/:bookletId",{bookletId:l},l)):c&&e.raise({code:301})}n()}),null}},{lodash:"lodash"}],"/components/appState/handlers/cityAlias/cityAlias.js":[function(e,t,n){var a=e("lodash");n["appstate.parse"]=function(e,t,n){function i(){a.each(s,function(e,n){t.addUriAlias("city/:id",{id:n},e)}),n()}var o=e.requireComponent("syncRegistry"),r=e.requireComponent("regionManager"),s=o.sync("aliases",{});a.size(s)?i():r.loadRegions(function(e){a.each(e,function(e){s[e.id]=e.code}),i()})}},{lodash:"lodash"}],"/components/appState/handlers/filters/filters.js":[function(e,t,n){var a=e("lodash");n["appstate.resolve"]=function(e,t,n){var i=t.panels.get("find"),o=["sort","work_time","work_time_mode","work_day","work_hour","subway","district_id","opened_after_date"];if(a.has(i,"filters")){var r=!1,s={};a.each(i.filters,function(e,t){var n=a.contains(["true","false"],e)||-1!=t.indexOf("key:")||e.match(/\d+\-\d+/);n||a.contains(o,t)?s[t]=e:(a.each(e.split(","),function(e){var n="true";e.indexOf("!")>-1&&(e=e.replace("!",""),n="false"),s[t+"_"+e]=n}),r=!0)}),r&&(i.filters=s,t.panels.replace(i.panelId,i),e.raised={code:301})}n()}},{lodash:"lodash"}],"/components/appState/handlers/grym/prepareState.js":[function(e,t,n){n["appstate.resolve"]=function(e,t,n){if(e.isGrym){var a=req("lib/offlineStorage/offlineStorage")();a.prepareState(t.getState(),function(e){t.assign(e),n()})}else n()}},{}],"/components/appState/handlers/oldLinks/callout.js":[function(e,t,n){var a=e("lodash");n["appstate.resolve"]=function(e,t,n){var i=t.get("callout");if(!a.isEmpty(i)&&i.lon&&i.lat&&i.zoom){var o=e.requireComponent("models"),r=Math.max(Math.min(i.zoom,18),9);o.geoClicker({action:"simple",point:{lon:i.lon,lat:i.lat},zoom:r}).then(function(e){switch(e=e||{},e.type){case"branch":t.panels.show("firm",a.pick(e,"id","is_poi"));break;case"station":"metro"===e.subtype||"light_metro"===e.subtype?t.panels.show("station",a.pick(e,"id")):t.panels.show("stop",a.pick(e,"id"));break;case"station_entrance":t.panels.show("stationEntrance",a.pick(e,"id"));break;case"station_platform":"metro"===e.subtype||"light_metro"===e.subtype?t.panels.show("stationPlatform",{platformId:e.id}):t.panels.show("platform",{platformId:e.id});break;default:t.panels.show("geo",a.pick(e,"id","lon","lat"))}t.del("callout"),n()})["catch"](function(){t.del("callout"),n()})}else n()}},{lodash:"lodash"}],"/components/appState/handlers/photos/photos.js":[function(e,t,n){var a=e("lodash");n["appstate.parse"]=function(e,t,n){var i=e.requireComponent("dgApi"),o=t.parse(),r=(o.notParsed,a.find(o,function(e){return"photos"==e.slug})),s=a.find(o,function(e){return"city"==e.slug});return!r||s?n():(i.firms.profilesAnywhere([r.params.id],function(e,i){if(!e){var o=a.first(i.data);o&&o.region_id&&t.setRegion(o.region_id)}n()}),null)}},{lodash:"lodash"}],"/components/appState/handlers/sync/syncRegion.js":[function(e,t,n){n["appstate.resolve"]=function(e,t,n){var a=e.requireComponent("syncRegistry");if(e.isClient&&!e._syncRegionCalled){var i=t.getState(),o=!!i.city,r=i.city&&i.city.id,s=a.get("region"),l=s&&s.id;if(o&&r!=l){e.wasRendered=!1,e._syncRegionCalled=!0;var c=e.requireComponent("regionManager");c.loadRegion(r).then(n)}else n()}else n()}},{}],"/components/appUpdater/appUpdater.js":[function(e,t,n){var a=DGOfflineAPI.systemContext.resolve("applicationInstaller");t.exports=function(){var e={installApplication:a.installApplication,isApplicationAvailableToInstall:a.isApplicationAvailableToInstall,applicationAvailableToInstall:a.applicationAvailableToInstall};return e}},{}],"/components/authorization/authorization.js":[function(e,t,n){var a=e("lodash"),i=req("lib/eventify"),o=req("lib/request2");t.exports=function(e,t,n,r,s,l,c){function u(t){m=!0,_=t.user,g=t.session_token,e.isClient&&l.setItem(v,"login");var a=new Date(t.expires_at);c.sync(y,g,{expires:a,path:"/"},function(){e.isClient&&f.emit("loginComplete")}),n.trackEvent("googleCustom",["Authorization","auth"])}function d(){c.sync(y,"",{expires:-1,path:"/"},function(){m=!1,_=null,g=null,e.isClient&&(l.setItem(v,"logout"),f.emit("logoutComplete")),n.trackEvent("googleCustom",["Authorization","unauth"])})}function h(){var t=e.registry.get("protocol"),n=e.registry.get("host");return t+"://"+n+"/"}function p(e,n){return e&&s.get("auth")?void t.getSessionInfo(e,function(e,t){return e?void n(!1):(u(t),void n(_))}):void n(!1)}var f,m=!1,g=null,_=null,v="2gisauth",y=e.config["authApi.cookieName"];return f={startup:function(a){e.isClient&&(l.removeItem(v),$(window).on("storage",function(e){var n=e.originalEvent;n.key==v&&c.sync(y,function(e){t.getSessionInfo(e,function(e,t){e||m?m&&"logout"==n.newValue&&(d(),f.emit("loggedOut")):(u(t),f.emit("loggedIn",_))})})})),c.sync(y,function(e){return e?void p(e,a):void a(!1)}),n.trackEvent("googleCustom",["Authorization",this.isAuthorized()?"auth":"unauth"])},socialStartup:function(e){s.get("auth")?t.getSessionInfo(null,function(t,n){t?e(!1):(u(n),e(_))}):e(!1)},trackSocialLogin:function(e,t){var a=(t?"Success":"Fail")+"_"+e;n.trackEvent("google",["Auth","Login",a])},isAuthorized:function(){return m},isSocial:function(){if(!m)return!1;var e=["vkontakte","twitter","facebook"];return a.some(_.identities,function(t){return-1!=e.indexOf(t.provider)})},getAuthorizedUserSync:function(){return{authorizedUser:_,authorizationToken:g}},getAuthorizedUser:function(e,n){return f.isAuthorized()?void(null===_||n===!0?t.getSessionInfo(g,function(t,n){t?e(!1):(_=n.user,e(_,g))}):e(_,g)):void e(!1)},login:function(e,n,a,i){return f.isAuthorized()?void i(!1):void t.login(e,n,a,function(e,t){e?i(!1,e):(u(t),i(t.user))})},logout:function(e){return f.isAuthorized()?void t.logout(g,function(t){t?e(!1,t):(d(),e(!0))}):void e(!1)},register:function(e,t,n){if(f.isAuthorized())return void n(!1);var i=r.getRegion();o("post",h()+"registration").send({email:e,password:t,domain:h(),country:i.country_code,lang:i.currentLanguage}).then(function(e){var t=a.get(e,"body.error");t?n(!1,t):n(!0)})["catch"](function(e){n(!1,e)})},generateRegistrationToken:function(e,t){if(f.isAuthorized())return void t(!1);var n=r.getRegion();o("post",h()+"registrationtoken").send({email:e,domain:h(),country:n.country_code,lang:n.currentLanguage}).then(function(e){var n=a.get(e,"body.error");n?t(!1,n):t(!0)})["catch"](function(e){t(!1,e)})},confirmRegistration:function(e,n,a,i){return f.isAuthorized()?void i(!1):void t.confirmRegistration(e,n,a,function(e,t){t?(u(t),i(t.user)):i(!1,e)})},recovery:function(e,t){if(f.isAuthorized())return void t(!1);var n=r.getRegion();o("post",h()+"recovery").send({login:e,domain:h(),country:n.country_code,lang:n.currentLanguage}).then(function(e){var n=a.get(e,"body.error");n?t(!1,n):t(!0)})["catch"](function(e){t(!1,e)})},recoveryChange:function(e,n,a,i){return f.isAuthorized()?void i(!1):void t.recoveryChange(e,n,a,function(e,t){t===!0?i(!0):i(!1,e)})},changePassword:function(e,n,a,i,o){return f.isAuthorized()?(e===!1&&(e=g),void t.changePassword(e,n,a,!1,i,function(e,t){t===!0?o(!0):o(!1,e)})):void o(!1)},socialLogin:function(e){t.socialLogin(e,h()+"social/"+e+"/")}},i(f)},t.exports._args=["app","$authorizationApi","$analytics","$regionManager","$featureSwitcher","$localStorage","$commonCookie"]},{lodash:"lodash"}],"/components/authorizationApi/authorizationApi.js":[function(e,t,n){var a=e("lodash");t.exports=function(e){var t=e.config["WebApi.sessionKeys"].user.cookieName,n=e.isClient&&e.cookie(t),i=e.registry.get("ip"),o=e.sendError,r=a.partial(req("lib/authorizationApi"),i,o,n,e.config);return r()}},{lodash:"lodash"}],"/components/awardApi/awardApi.js":[function(e,t,n){var a=e("lodash"),i=req("lib/request2"),o=e("url");t.exports=function(e){function t(t,a){var i=e.config["awardApi.url"]+t;return n(i,a)}function n(e,t,n){var i=o.parse(e,!0);return i.query=i.query||{},i.search=null,n?i.query=a.assign(i.query,t):i.query=t,o.format(i)}function r(t,o,r){var s=e.config["awardApi.key"],l=o.method||"get",c=a.omit(o,a.isEmpty),u="get"==l?"query":"send";"post"==l?t=n(t,{key:s},!0):c.key=s,i(l,t)[u](c).then(function(e){var t=a.get(e,"body.result");t?r(null,t):r({error:"No data received"},null)})["catch"](function(){r({error:"No data received"},null)})}if(!e.isGrym&&!e.config.disableStash){var s=req("helpers/requestWrappers/stash")(e);r=s.wrap(r);var l=req("helpers/requestWrappers/cache")(e);r=l.wrap(r)}return{loadData:function(t,n){t=t||{};var a={region_id:t.region_id};t.session_token&&(a.session_token=t.session_token),r(e.config["awardApi.url"],a,n)},registerVote:function(e,n){e=e||{};var a={method:"post"};e.session_token&&(a.session_token=e.session_token),r(t("/votes/register",e),a,n)}}}},{lodash:"lodash",url:419}],"/components/bookletApi/bookletApi.js":[function(e,t,n){var a,i=e("lodash"),o=req("lib/eventify"),r=e("./providersApi"),s=req("lib/request2"),l=req("helpers/requestDispatcher");t.exports=function(e,t){var n=e.config["booklet.url"],c=function(e,t,n,a,o){function r(e){return o?!i.has(e,"body.result")||i.has(e,"body.meta.error")?void o(e.body||e,null):void o(null,e.body.result):void 0}t=t||"GET";var l="GET"==t.toUpperCase()?"query":"send",c=s(t,e+n)[l](a);return"post"==t&&c.type("form"),c.then(r)["catch"](o)},u=i.partial(c,n),d={setAccessToken:function(e){a=e},getBooklet:function(e,t){var n={};return a&&(n.session_token=a),u("get","/booklets/"+e.bookletId,n,t)},update:function(e,t){var n=e.data;return i.each(n,function(e,t){n[t]=JSON.stringify(e)}),a&&(n.session_token=a),u("post","/booklets/update/"+e.id,n,t)},addFile:function(e,t,i){var o=new FormData;o.append("firm_id",t),o.append("allow_wee",1),o.append("files[]",e),a&&o.append("session_token",a);var r=new XMLHttpRequest;r.open("POST",n+"/files/create"),r.send(o),r.onload=function(){var e=JSON.parse(r.responseText);e&&e.meta&&200!=e.meta.code?i(e):i(null,e.result)}},sendClaim:function(e,t){u("post","/claim",e,t)}};return u=l(d,u),d.providers=r(e,i.partial(l,d),c,t),o(d)},t.exports.emitAbortablesBy="request",t.exports._args=["app","$regionManager"]},{"./providersApi":57,lodash:"lodash"}],"/components/bssContext/bssContext.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/analytics"),o=e("./genHash"),r=e("./responseDataStorage"),s=e("./resTypeMap"),l=e("./searchOrdersQueue"),c=e("./searchTracker"),u=req("lib/sendError");t.exports=function(e,t,n){function d(e,t,n,i){return function(o,r,s){var l=a.extend({},r);return a.isEmpty(l.meta)&&(a.isEmpty(s)?o&&!a.isEmpty(o.meta)?l.meta=a.cloneDeep(o.meta):l.meta={}:l.meta=a.cloneDeep(s)),l._requestedParams=a.cloneDeep(n),m.setData(e,t,l),i.apply(this,arguments)}}function h(t){return function(n,a,o,r){return _&&(o.hash=i.searchHashToBaseHash(_),"org"==s[n]&&(o["stat[pr]"]=v),e.isClient&&!o.mutedForBssSearch&&"markers"!=a&&(r=d(_,n,o,r)),delete o.mutedForBssSearch),t(n,a,o,r)}}function p(r){return r=r||{},r.hash||(r.hash=o()),{getHash:function(){return r.hash},setHash:function(e){r.hash=e||r.hash},continueChain:function(){_=r.hash,v=r.pr||v,t.set("bssContext",a.pick(r,f))},startNewChain:function(s){if(s.continueChain||e.registry.get("isInit")?_=r.hash:(_=o(),s.updateContext&&(r.hash=_)),!e.isServer){var l=a.omit(s,["continueChain","updateContext","extendParams"]);if(s.extendParams&&a.merge(l,a.pick(r,a.without(f,"hash"))),l.hash=_,a.isString(l.pr)&&a.has(i,"bss.paramsId["+l.pr+"]"))l.pr=i.bss.paramsId[l.pr];else if(!a.isNumber(l.pr))return void u("bss context error: invalid parameter pr",a.extend({user:n.user,sid:n.session},s));t.set("bssContext",a.pick(l,f)),v=l.pr,g.createNewOrder(l)}}}}var f=["hash","pr","tx","ortx","gs"],m=new r,g=new l(e,m,c),_=void 0,v=i.bss.paramsId.link;return{wrapRequest:h,createInstance:p,processQueue:function(){g.processQueue(),_=null,v=null}}},t.exports._args=["app","$appState","$analytics"]},{"./genHash":58,"./resTypeMap":60,"./responseDataStorage":62,"./searchOrdersQueue":64,"./searchTracker":65,lodash:"lodash"}],"/components/checkNetwork/checkNetwork.js":[function(e,t,n){var a=e("lodash");t.exports=function(t){function n(e){if(e!=c){c=e;u.emit("changeNetwork",c),t.registry.set("offline",!c)}}var i=req("lib/request2"),o=e("slot/lib/defer"),r=t.config["WebApi.catalogUrl"],s=t.config.checkNetworkUpdateTimeout,l=req("lib/eventify"),c=null,u={};return u={check:function(e){var t=new o;return i("head",r).then(function(){n(!0)})["catch"](function(e){n(200==e.status)})["finally"](function(){e&&e(c),t.resolve()}),t},speed:function(e,n){function o(e){if(!e.text)return void n(r);var t=(new Date).getTime(),a=new Blob([e.text],{type:e.headers["content-type"]});if(!a.size)return void n(r);var i=8*a.size/1024,o=(t-s)/1e3;r=i/o,n(r)}if(a.isFunction(n)){var r=0;if(!t.isClient||"undefined"==typeof Blob||!e)return void n(r);var s=(new Date).getTime();i("get",e+"?"+s).timeout(t.config["speed.timeout"]).then(o,o)}},processUpdate:function(){setTimeout(function(){u.check(),u.processUpdate()},s)}},l(u)}},{lodash:"lodash","slot/lib/defer":489}],"/components/collectionsApi/collectionsApi.js":[function(e,t,n){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=e("lodash"),o=e("node-uuid"),r=e("../../lib/request2"),s=e("bluebird"),l=e("../../helpers/linkURL");t.exports=function(e,t,n,c){function u(e,t,n){return{url:e+"main/collection/"+t+"/collection/360x120?ts="+n,url_360x160:e+"main/collection/"+t+"/collection/360x160?ts="+n,url_original:"https:"+e+"main/collection/"+t+"/collection"}}function d(e){if(!e.cover)return e;switch(e.cover.object_type){case"collection":var t=Math.round(new Date(e.updated_at).getTime()/1e3);return e.cover=a({},e.cover,u(E.coverPrefix,e.id,t)),e;default:return e}}function h(e){return i.map(e,d),i.indexBy(e,"id")}function p(e){return(new Date).getTime()-e<E.collectionsCacheTTL}function f(e){return E.url+"collections"+(e?"/"+e:"")}function m(){return i.get(t.getAuthorizedUserSync(),"authorizationToken")}function g(){j=0,P={},A=0,M={},R=0,D={}}function _(e){var t=i.defaults({},e,{id:o.v4(),region_id:n.getRegion().id});return r("post",f()).query({session_token:m()}).send(t).end().then(function(e){var t=i.get(e,"body");return P=a({},P,h([t])),t})}function v(e){return i.get(e,"id")?r("put",f(e.id)).query({session_token:m(),expand:"favoriteIds"}).send(e).end().then(function(t){var n=i.get(t,"body");return P[e.id]=d(n),n}):s.reject("item.id is required")}function y(e){return r("delete",f(e)).query({session_token:m()}).end().then(function(){delete P[e]})}function b(){return p(j)?s.resolve(i.values(P)):r("get",f()).query({session_token:m(),expand:"favoriteIds,user",region_id:n.getRegion().id}).then(function(e){return P=h(i.get(e,"body")),j=(new Date).getTime(),i.values(P)})}function k(e){if(p(j)&&P[e])return s.resolve(P[e]);var n={expand:"favoriteIds,user"};return t.isAuthorized()&&(n.session_token=m()),r("get",f(e)).query(n).then(function(e){return d(i.get(e,"body"))})}function w(){return p(A)?s.resolve(i.values(M)):r("get",f("subscribed")).query({session_token:m(),expand:"favoriteIds",region_id:n.getRegion().id}).then(function(e){return M=h(i.get(e,"body")),A=(new Date).getTime(),i.values(M)})}function x(e){if(p(R))return s.resolve(i.values(D));var a={expand:"favoriteIds",region_id:n.getRegion().id};return e&&(a.theme=e),t.isAuthorized()&&(a.session_token=m()),r("get",f("recommended")).query(a).then(function(e){return D=h(i.get(e,"body")),R=(new Date).getTime(),i.values(D)})}function C(e){return e?r("post",f("subscribed")).query({session_token:m(),expand:"favoriteIds"}).send({id:e}).end().then(function(e){var t=i.get(e,"body");return M=a({},M,h([t])),t}):s.reject("collectionId is required")}function L(e){return e?r("delete",f("subscribed/"+e)).query({session_token:m(),expand:"favoriteIds"}).end().then(function(){return delete M[e],k(e)}):s.reject("collectionId is required")}function I(e){return w().then(function(t){return i.some(t,function(t){return t.id==e})})}function T(e){return e?P[e]?s.reject("Already yours"):r("post",f(e+"/clone")).query({session_token:m(),expand:"favoriteIds"}).end().then(function(e){var t=i.get(e,"body");return P=a({},P,h([t])),t}):s.reject("ItemId is required")}function S(e){return new s(function(t){c.reduceLink(l("favorites",{collectionId:e,city:n.getRegion().code}),t)})}var E=e.config.group("favorites"),P={},j=0,M={},A=0,D={},R=0;return t.on("logoutComplete",i.bind(g,this)),{addItem:_,getItem:k,updateItem:v,deleteItem:y,cloneItem:T,getList:b,getSubscribedList:w,getRecommendedList:x,generateUrl:S,subscribe:C,unSubscribe:L,isSubscribed:I,__testsOnly__:{_processItem:d,_getCache:function(e){return e?M:P},_setCache:function(e,t){return t?(M=i.assign({},e),void(A=(new Date).getTime())):(P=i.assign({},e),void(j=(new Date).getTime()))},_invalidateCache:g}}},t.exports._args=["app","$authorization","$regionManager","$shortonizerApi"]},{"../../helpers/linkURL":"/helpers/linkURL.js","../../lib/request2":"/lib/request2.js",bluebird:384,lodash:"lodash","node-uuid":456}],"/components/commonCookie/commonCookie.js":[function(e,t,n){var a=e("lodash"),i=req("lib/request2"),o=req("helpers/string");t.exports=function(e){function t(t,n,a){var i=o.format(e.config["commonCookie.path"],e.config["commonCookie.mainHost"]),r={name:t};return n&&(r.value=n,r.options=JSON.stringify(a)),i+"?"+o.stringifyParams(r)}function n(n,o,r,s){if(!e.isClient)return s();var l,c=null;return i("get",t(n,o,r)).withCredentials().then(function(e){c=a.get(e,"body.value")})["catch"](function(){c=null,l=!0})["finally"](function(){s(c,l)})}function r(t,n,i,o){"localhost"!=s&&(i=a.extend({},i,{domain:"."+s})),n&&e.cookie(t,n,i),o(e.cookie(t))}var s=(e.config["commonCookie.mainHost"]||"").split(":")[0],l={sync:function(t,i,o,l){a.isFunction(i)?(l=i,i=null,o={}):a.isFunction(o)&&(l=o,o={}),l=a.isFunction(l)&&l||a.noop,s==e.location.hostname()?r(t,i,o,l):n(t,i,o,l)}};return l}},{lodash:"lodash"}],"/components/contextStorage/contextStorage.js":[function(e,t,n){var a=e("lodash");t.exports=function(){function e(){this._contexts={panels:[]},this._ignoreContext=!1}function t(e){return!!this._contexts[e]}return e.prototype.set=function(e,n){t.call(this,n)&&e&&this._contexts[n].push(e)},e.prototype.getLastByType=function(e){return t.call(this,e)?a.last(this._contexts[e]):null},e.prototype.deleteLastByType=function(e){t.call(this,e)&&(this._contexts[e].pop(),"panels"==e&&this.ignoreSearchContext(!1))},e.prototype.ignoreSearchContext=function(e){this._ignoreContext=e},e.prototype.isSearchContextIgnored=function(){return this._ignoreContext},new e}},{lodash:"lodash"}],"/components/countryManager/countryManager.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t,n){
function i(e){var n={},i=t.getRegion();return a.each(e,function(e){var t=e.country_code,o=s[t]||{};n[t]||(n[t]={center:o.center,citiesCount:0,code:e.country_code,disableShowCityName:o.disableShowCityName,name:(l[t]||{}).nominative,nameGenitive:(l[t]||{}).genitive,points:o.points,regions:[],regionsCount:0,selected:+(i.country_code==e.country_code),zoom:o.zoom});var r=!!a.find(n[t].regions,function(t){return t.id==e.id});r||(n[t].regions.push(e),n[t].regionsCount++,n[t].citiesCount+=e.settlements&&e.settlements.length+1)}),a.values(n)}function o(){if(a.isEmpty(r)){var e=t.getRegions();r=i(e)}return r}var r={},s=e.config["globalMap.countryView"]||{},l={ru:{nominative:n._pgg("Название страны. Именительный падеж","Россия"),genitive:n._pgg("Название страны. Родительный падеж","России")},kz:{nominative:n._pgg("Название страны. Именительный падеж","Казахстан"),genitive:n._pgg("Название страны. Родительный падеж","Казахстана")},ua:{nominative:n._pgg("Название страны. Именительный падеж","Украина"),genitive:n._pgg("Название страны. Родительный падеж","Украины")},ae:{nominative:n._pgg("Название страны. Именительный падеж","ОАЭ"),genitive:n._pgg("Название страны. Родительный падеж","ОАЭ")},cy:{nominative:n._pgg("Название страны. Именительный падеж","Республика Кипр"),genitive:n._pgg("Название страны. Родительный падеж","Республики Кипр")},cz:{nominative:n._pgg("Название страны. Именительный падеж","Чехия"),genitive:n._pgg("Название страны. Родительный падеж","Чехии")},it:{nominative:n._pgg("Название страны. Именительный падеж","Италия"),genitive:n._pgg("Название страны. Родительный падеж","Италии")},kg:{nominative:n._pgg("Название страны. Именительный падеж","Кыргызстан"),genitive:n._pgg("Название страны. Родительный падеж","Кыргызстана")},cl:{nominative:n._pgg("Название страны. Именительный падеж","Чили"),genitive:n._pgg("Название страны. Родительный падеж","Чили")}},c={getCountries:function(e){var t=o();return e?a.find(t,function(t){return t.code==e}):t},groupByCountry:i,getCitiesCount:function(){var e=o();return a.reduce(e,function(e,t){return e+t.citiesCount},0)},hasLegalGlobal:function(){var t=c.getCountry();return a.contains(e.config["featuresParams.globalMap.countries"],t.code)},getCountry:function(){var e=t.getRegion();return c.getCountries(e.country_code)}};return c},t.exports._args=["app","$regionManager","$i18n"]},{lodash:"lodash"}],"/components/defer/defer.js":[function(e,t,n){t.exports=function(){return e("slot/lib/defer")}},{"slot/lib/defer":489}],"/components/dgApi/dgApi.js":[function(e,t,n){var a=e("lodash"),i=e("./utils"),o=req("lib/eventify"),r=e("async"),s=e("./formatters/responseFormatter"),l=req("lib/asyncRequest").parallel;t.exports=function(t,n,c,u,d,h,p){function f(e){return i.skipParams(function(t,n,a){return e([t],n,i.useFirst(a))})}function m(e,t,n){var i=t.purpose;delete t.purpose;var o=["catalog/rubric/list","catalog/rubric/get","region/search","region/list"];return[e,i,t,a.contains(o,e)?n:w.items(t,n)]}var g,_,v,y=req("helpers/requestDispatcher"),b=!1;if("function"==typeof n)g=n;else{var k=n||(t.isGrym?"offline":"web");g=e("web"==k?"./online/webApi":"./offline"),b="offline"==k}var w=new s(t,b);v=g(t);var x=d.isEnabled();if(!t.config.disableStash&&!x){var C=req("helpers/requestWrappers/stash")(t);v=C.wrap(v)}return v=p.wrapRequest(v),_={firms:{},transport:{},geo:{},rubrics:{},region:{}},v=y(_,v),function(e){e.search=i.skipParams(function(e,n,i){a.defaults(n,{q:e,type:"filial",page_size:t.config["WebApi.firmsPageSize"],page:1,purpose:"show_in_list"});var o=m("search",n,i);return v.apply(this,o)}),e.searchDym=i.skipParams(function(e,t,n){a.defaults(t,{q:e,type:"filial",page_size:1,page:1,purpose:"get_dym"});var i=m("search",t,n);return v.apply(this,i)}),e.inBuild=i.skipParams(function(e,n,i){a.defaults(n,{building_id:e,type:"filial",page_size:t.config["WebApi.firmsPageSize"],page:1,purpose:"show_in_list"});var o=m("search",n,i);return v.apply(this,o)}),e.servicing=i.skipParams(function(e,t,n){a.defaults(t,{building_id:e,type:"filial",servicing:!0,servicing_group:"default",purpose:"show_in_list"});var i=m("search",t,n);return v.apply(this,i)}),e.byRubric=i.skipParams(function(e,n,i){a.defaults(n,{rubric_id:e,type:"filial",page_size:t.config["WebApi.firmsPageSize"],page:1,purpose:"show_in_list"});var o=m("search",n,i);return v.apply(this,o)}),e.bySuggest=i.skipParams(function(e,n,i){a.defaults(n,{suggest:e,type:"suggest",page_size:t.config["WebApi.firmsPageSize"],page:1,purpose:"show_in_list"});var o=m("search",n,i);return v.apply(this,o)}),e.filials=i.skipParams(function(e,n,i){a.defaults(n,{org_id:e,type:"filial",page_size:t.config["WebApi.firmsPageSize"],page:1,purpose:"show_in_list"});var o=m("search",n,i);return v.apply(this,o)}),e.profiles=i.skipParams(function(e,n,i){a.defaults(n,{type:"filial",id:a.isArray(e)?e.join(","):e,purpose:"show_in_card",see_also_size:t.config["mediaCard.seeAlsoSize"]});var o=m("details",n,i);return v.apply(this,o)}),e.floorsProfiles=i.skipParams(function(e,t,n){var i=h.getRegion();a.defaults(t,{type:"filial",region_id:i.id,id:a.isArray(e)?e.join(","):e,purpose:"firm_info_short"});var o=m("details",t,n);return v.apply(this,o)}),e.profile=f(e.profiles),e.profilesAnywhere=i.skipParams(function(e,t,n){a.defaults(t,{type:"filial",id:e.join(","),purpose:"profilesAnywhere"});var i=m("details",t,n);return v.apply(this,i)}),e.profilesAds=i.skipParams(function(e,t,n){a.defaults(t,{type:"filial",id:a.isArray(e)?e.join(","):e,purpose:"minimal"});var i=m("details",t,n);return v.apply(this,i)}),e.photoInfo=f(i.skipParams(function(e,t,n){a.defaults(t,{type:"filial",id:a.isArray(e)?e.join(","):e,purpose:"photo_info"});var i=m("details",t,n);return v.apply(this,i)})),e.reviewsInfo=f(i.skipParams(function(e,t,n){a.defaults(t,{type:"filial",id:a.isArray(e)?e.join(","):e,purpose:"reviews_info"});var i=m("details",t,n);return v.apply(this,i)})),e.favorites=i.skipParams(function(e,t,n){a.defaults(t,{type:"filial",id:a.isArray(e)?e.join(","):e,purpose:"favorites"});var i=m("details",t,n);return v.apply(this,i)}),e.bare=f(function(e,t,n){a.defaults(t,{type:"filial",page:1,id:a.isArray(e)?e.join(","):e,purpose:"bare"});var i=m("details",t,n);return v.apply(this,i)}),e.markersSearch=function(e,t){a.defaults(e,{page:1,purpose:"markers"});var n=m("search",e,t);return v.apply(this,n)},e.orgReviewsInfo=i.skipParams(function(e,t,n){a.defaults(t,{org_id:e,page:1,page_size:50,purpose:"reviews_info",mutedForBssSearch:!0});var i=m("catalog/branch/list",t,n);return v.apply(this,i)})}(_.firms),function(e){e.stationsByQuery=i.skipParams(function(e,t,n){a.defaults(t,{q:e,purpose:"show_in_list"});var i=m("transport/station/search",t,n);return v.apply(this,i)}),e.routes=i.skipParams(function(e,t,n){a.defaults(t,{q:e,purpose:"show_in_list"});var i=m("transport/route/search",t,n);return v.apply(this,i)}),e.platforms=i.skipParams(function(e,t,n){a.defaults(t,{id:a.isArray(e)?e.join(","):e,purpose:"show_in_card"});var i=m("transport/station_platform/get",t,n);return v.apply(this,i)}),e.platform=f(e.platforms),e.platform.routes=i.skipParams(function(e,t,n){a.defaults(t,{platform_id:e,purpose:"show_in_card"});var i=m("transport/route/list",t,n);return v.apply(this,i)}),e.stationsByType=i.skipParams(function(e,n,i){var o=h.getRegion();a.defaults(n,{region_id:o.id,station_type:e,page_size:t.config["WebApi.stationsPageSize"]});var r=m("transport/station/list",n,i);return v.apply(this,r)}),e.stations=i.skipParams(function(e,t,n){a.defaults(t,{id:a.isArray(e)?e.join(","):e,purpose:"show_in_card"});var i=m("transport/station/get",t,n);return v.apply(this,i)}),e.station=f(e.stations),e.station.byPlatformId=f(i.skipParams(function(e,t,n){a.defaults(t,{platform_id:a.first(e),purpose:"show_in_card"});var i=m("transport/station/get",t,n);return v.apply(this,i)})),e.station.entrances=i.skipParams(function(e,t,n){a.defaults(t,{id:a.isArray(e)?e.join(","):e,purpose:"show_in_card"});var i=m("transport/station_entrance/get",t,n);return v.apply(this,i)}),e.station.entrance=f(e.station.entrances),e.route=i.skipParams(function(e,t,n){a.defaults(t,{id:a.isArray(e)?e.join(","):e,purpose:"show_in_card"});var i=m("transport/route/get",t,n);return v.apply(this,i)})}(_.transport),function(e){e.search=i.skipParams(function(e,t,n){a.defaults(t,{q:e,page_size:100,purpose:"show_in_list"});var i=m("geo/search",t,n);return v.apply(this,i)}),e.profiles=i.skipParams(function(e,t,n){a.defaults(t,{id:e.join(","),purpose:"show_in_card"});var i=m("geo/get",t,n);return v.apply(this,i)}),e.profile=f(e.profiles),e.photoInfo=f(function(t,n,a){return n.purpose="photoInfo",e.profiles(t,n,a)}),e.markers=i.skipParams(function(e,t,n){function i(e,t){var n=[];do n.push(e.splice(0,t));while(e.length);return n}e=a.uniq(e);var o=i(e,100),s=a.map(o,function(e){return function(){var i=a.clone(t);a.defaults(i,{id:e.join(","),purpose:"markers_list"});var o=m("geo/get",i,n);v.apply(this,o)}});r.parallel(s,function(e,t){var i={data:[]};e||(a.each(t,function(e){i.data=i.data.concat(e[0].data)}),i.total=i.data.length),n(e,i)})}),e.byRadius=i.skipParams(function(e,t,n,i){a.defaults(n,{point:e,radius:t,purpose:"geocode"});var o=m("geo/search",n,i);return v.apply(this,o)}),e.inPoint=f(i.skipParams(function(e,t,n){a.defaults(t,{point:e,purpose:"geocode"});var i=m("geo/search",t,n);return v.apply(this,i)})),e.favorites=i.skipParams(function(e,t,n){a.defaults(t,{id:e.join(","),page_size:200,purpose:"favorites"});var i=m("geo/get",t,n);return v.apply(this,i)})}(_.geo),function(e){e.list=i.skipParams(function(e,t,n){a.defaults(t,{parent_id:e||0,purpose:"list"});var i=m("catalog/rubric/list",t,n);return v.apply(this,i)}),e.getById=i.skipParams(function(e,t,n){a.defaults(t,{id:e,purpose:"get"});var i=m("catalog/rubric/get",t,n);return v.apply(this,i)})}(_.rubrics),function(e){e.search=i.skipParams(function(e,t,n){a.defaults(t,{q:e.lon+","+e.lat,purpose:"search"});var i=m("region/search",t,n);return v.apply(this,i)}),e.list=function(e,t){a.defaults(e,{purpose:"loadRegions"});var n=m("region/list",e,t);return v.apply(this,n)}}(_.region),_.searchByType=e("./searchers/searchByType")(t,_),_.searchMarkersByType=e("./searchers/searchMarkersByType")(_,c),_.searchRoutePlace=function(e,t){function n(t){_.firms.searchDym(e,{},function(e,n){!e&&n.dym&&n.dym.api_category&&(s=n.dym.api_category),t()})}function i(t){_.geo.search(e,{type:"building,adm_div.place,attraction"},function(e,n){d.geo=a.first(n&&n.data),t()})}function o(t){_.transport.stationsByQuery(e,{},function(e,n){d.transport=a.first(n&&n.data),t()})}function r(){return s&&d[s]?d[s]:d.transport||d.geo||{}}var s,c=req("helpers/station"),d={};return l([n,o,i],function(){var e,n=r();n.geometry&&n.geometry.centroid?e=u.parseObject(n.geometry.centroid).geometry:"station"==n.type&&(e=c.getCentroid(n,u)),e&&n&&(e.id=n.id),t(e)})},o(_)},t.exports.identity=function(e,t){return"function"==typeof t&&(t=null),a.compact([e,t]).join("_")},t.exports.emitAbortablesBy="request",t.exports._args=["app","searchImpl","$requestGroups","$wkt","$previewBizaccount","$regionManager","$bssContext"]},{"./formatters/responseFormatter":69,"./offline":72,"./online/webApi":80,"./searchers/searchByType":83,"./searchers/searchMarkersByType":84,"./utils":86,async:383,lodash:"lodash"}],"/components/discountsApi/discountsApi.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/discount"),o=req("helpers/firm"),r=req("lib/request2"),s=req("helpers/request");t.exports=function(e,t){function n(e){var t=a.get(e,"body"),n=a.get(t,"result"),i=a.get(t,"error")||a.get(t,"meta.error");if(i||!n){var o=a.get(i,"code")||a.get(t,"meta.code")||500;return Promise.reject(s.emitError(i,o,i.message||"bad error"))}return n}function l(e){var n=t.getRegion(),o=a.get(e,"items"),r=i.filterActiveDiscounts(o,n);return a.isEmpty(r)?Promise.reject(s.emitError(404,"no discounts")):r}function c(e){var t={},i=o.getStaticId(e.branchId),s=h+"/filials/"+i+"/discounts";return a.values(e.rubrics).length&&(t.rubrics=e.rubrics.join(",")),e.sortBy&&(t.sort_by=e.sortBy),r("GET",s).query(t).then(n).then(l)}function u(e){var t=e.buildingIds.join(","),a=h+"/buildings/"+t+"/discounts";return r("GET",a).then(n).then(l)}function d(e,t,a,i){var o=h+"/filials/"+e+"/discounts/"+t+"/"+a,s=r("POST",o);return i&&s.set("x-session-token",i),s.then(n)}var h=e.config["discounts.url"];return{getDiscounts:c,getDiscountsInBuildings:u,vote:d}},t.exports._args=["app","$regionManager"]},{lodash:"lodash"}],"/components/eventuallyApi/eventuallyApi.js":[function(e,t,n){var a=e("lodash"),i=req("lib/request2"),o=req("helpers/string"),r=req("helpers/request");t.exports=function(e,t,n){function s(e){switch(e){case"events":return"/events/%1";default:return""}}function l(t,n){var a=o.format(s(t),n);return e.isClient||(a="http://"+e.registry.get("host")+a),a}var c={get:function(e,t,o){return n.get("moscowCityDay")||n.get("event")?i("get",l(t,e)).then(function(e){var t=a.get(e,"body"),n=a.get(t,"code")||a.get(e,"statusCode")||500;if(a.get(e,"ok")&&200==n)o(null,t.response,200);else{var i=a.get(e,"error")||r.emitError(n,"bad error");o(i,null,n)}})["catch"](function(e){var t=a.get(e,"code")||a.get(e,"statusCode")||500;r.emitError(e,t,o)}):r.emitError(404,"feature is disabled",o)},getNotificationCount:function(){var e={novosibirsk:24,moscow:14,omsk:8,spb:15,voronezh:12,kazan:14,perm:13,n_novgorod:19,volgograd:10,ufa:8,ekaterinburg:16,chelyabinsk:12,krasnoyarsk:12,novorossiysk:5,smolensk:10,tula:7};return e[t.code()]}};return c},t.exports._args=["app","$regionManager","$featureSwitcher"]},{lodash:"lodash"}],"/components/extraLayersApi/extraLayersApi.js":[function(e,t,n){"use strict";function a(){var t="xmldom";return s.isClient?window.DOMParser:e(t).DOMParser}var i=e("lodash"),o=req("helpers/string"),r=req("helpers/extraLayers"),s=e("slot/env"),l=req("lib/request2"),c=e("xml2js").parseString,u=e("togeojson"),d=e("bluebird"),h=e("url");t.exports=function(e){function t(e){var t=["project_id","priority","layer_file","main_file","language","tags","show_till","description"];return i.omit(e,t)}function n(e){var t=0;return e.replace(/<Folder>/g,function(){return t++,'<Folder id="'+t+'">'})}function s(t,n,a){var i=JSON.stringify(t);return i=i.replace(/src=\\"files\//g,'src=\\"'+r.getResourceUrl(n,a,e.config)+"files/"),JSON.parse(i)}function p(t){return e.sendError("ExtralayersApi request error",i.pick(t,"message","status")),null}function f(e,t){var a=e.text||"",i=u.kml((new _).parseFromString(o.clearStyles(n(a)),"text/xml"),{styles:!0});return s(i,t.projectId,t.id)}function m(n){var a=n.text||"",o={trim:!0,normalizeTags:!0,explicitRoot:!1,explicitArray:!1,mergeAttrs:!0,charkey:"src"};return new d(function(n){return c(a,o,function(a,o){if(a)return e.sendError("ExtralayersApi xml2js parse error",i.pick(a,"message")),n([]);i.isArray(o.layer)||(o.layer=[o.layer]);var r=i.map(o.layer,t);return g=r,n(r)})})}var g,_=a(),v={getLayers:function(t){var n={},a=h.parse(e.config["extraLayers.url"]+"/"+t.projectId+"/filter");a.query={},t.lang&&(a.query.language=t.lang);var o=e.config["extraLayers.tags"];o&&(a.query.tag=o),i.isString(t.tag)&&(n.tag=t.tag),i.isString(t.language)&&(n.language=t.language);var r=l("get",h.format(a)).query(n);return e.isServer&&r.buffer(!0),r.then(m)["catch"](p)},getLayer:function(t){var n={},a=e.config["extraLayers.url"]+"/"+t.projectId+"/download/"+t.id+"/doc.kml",o=l("get",a).query(n);return e.isServer&&o.buffer(!0),o.then(i.partialRight(f,t))["catch"](p)},getFeatureById:function(e){return v.getLayer({projectId:e.projectId,id:e.layerId}).then(function(t){if(!t)return null;var n=r.getGeomListByData(t),a=e.featureId;return i.chain(n).map("features").flatten().find(function(e){return e.properties.featureId==a}).value()})},getReadableLayerName:function(e){return i.chain(g).find({layer_id:e}).get("readable_name").value()}};return v}},{bluebird:384,lodash:"lodash","slot/env":"slot/env",togeojson:524,url:419,xml2js:527}],"/components/favorites/favorites.js":[function(e,t,n){"use strict";var a=e("lodash"),i=e("./store"),o=e("./utils").objectMap,r=e("bluebird"),s=a.curry(function(e,t){return o(t,function(t){return a.compose(e,t)})});t.exports=function(t,n,o,l,c){function u(e){if(e)return _.loadListOfFavorites();var t=c.panels.has("collections"),n=t&&"favorites"==h.getState().collections.active;return n?_.loadListOfFavorites():r.resolve()}function d(e){var t=c.panels.has("favorites"),n=t&&h.getState().favorites.id===e;return n?v.getCollection(e).then(function(){return v.getList(e)}):r.resolve()}var h=i(),p=s(h.dispatch),f=a.compose(p,e("./actionCreators/collections")),m=a.compose(p,e("./actionCreators/favorites")),g=a.compose(p,e("./actionCreators/widget")),_=f(n),v=m(o,l,n,t),y=g(t);return{updateTitle:function(e,n){return t.updateTitle(e,n)},get favoritesCache(){return t.getObjectCache()},isFull:function(){return t.isFull()},needsAuth:function(){return t.needsAuth()},afterAuth:function(e){return t.afterAuth(e)},afterAuthReset:function(){return t.afterAuthReset()},changeActiveCollection:_.changeActive,changeAddCollectionMode:_.changeAddMode,changeAddCollectionValue:_.changeAddValue,setCollectionShowedCoverToolsItem:_.setShowedCoverToolsItem,showCollectionCoverUploaderItem:_.showCoverUploaderItem,setCollectionShowedShareToolsItem:_.showShareTools,loadCollectionItemCover:_.loadItemCover,uploadCollectionItemCover:_.uploadItemCover,deleteCollectionItemCover:_.deleteItemCover,setCollectionRenamedItem:_.setRenamedItem,changeCollectionRenamedValue:_.changeRenamedValue,resetCollections:_.reset,loadCollectionListOfFavorites:_.loadListOfFavorites,loadCollectionListOfSubscribed:_.loadListOfSubscribed,loadCollectionListOfIntresting:_.loadListOfIntresting,addCollectionItemToFavorites:_.addItemToFavorites,shareCollectionItem:_.shareItem,deleteCollectionItemFromFavorites:function(e){return _.deleteItemFromFavorites(e).then(function(e){return t.removeAllFromCollection(e)})},restoreCollectionItemFromFavorites:_.restoreItemFromFavorites,updateCollectionItemFromFavorites:_.updateItemFromFavorites,subscribeCollection:_.subscribeItem,unsubscribeCollection:_.unsubscribeItem,removeFromCollection:function(e,t){return v.removeFromCollection(e,t).then(u)},widgetInit:function(e){return t.needsAuth()?r.resolve():r.all([y.showDropDown(!1),y.loadFavorite(e),_.loadListOfFavorites()])},widgetComplicatedAddToCollection:function(e){var t=this.getState().collections.favorites||{},n=t.list,a=void 0===n?[]:n,i=!!this.getState().widget.favorite,o=!!a.length,r=1===a.length;return i?this.widgetShowDropDown(!0):o?r?this.widgetAddToCollection(e,a[0].id):this.widgetShowDropDown(!0):this.widgetAddToCollection(e)},widgetAddToCollection:function(e,t){return y.addToCollection(e,t).then(function(){return r.all([u(!t),d(t)])}).then(function(){return y.showDropDown(!0)})},widgetRemoveFromCollection:function(e,t){return y.removeFromCollection(e,t).then(function(){return r.all([u(),d(t)])})},widgetShowDropDown:y.showDropDown,widgetCreatingMode:y.setCreatingMode,widgetLoadFavorite:y.loadFavorite,widgetReset:y.reset,getFavoritesList:v.getList,cleanFavoritesList:v.cleanList,hideFavoritesMarkers:v.hideMarkers,sortFavoritesList:v.sortList,getFavoritesCollection:v.getCollection,changeFavoritesMediaMode:v.changeMediaMode,changeFavoritesHoverItem:v.changeHoverItem,getFavorites:function(e){return v.getCollection(e).then(function(){return v.getList(e)})},updateFavoriteItemTitle:v.updateTitle,updateFavoriteItemDescription:v.updateDescription,subscribe:h.subscribe,getState:h.getState}},t.exports._args=["$favoritesApi","$collectionsApi","$dgApi","$photoApi","$appState"]},{"./actionCreators/collections":87,"./actionCreators/favorites":88,"./actionCreators/widget":89,"./store":100,"./utils":101,bluebird:384,lodash:"lodash"}],"/components/favoritesApi/favoritesApi.js":[function(e,t,n){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=e("lodash"),o=e("bluebird"),r=e("./formatter"),s=e("../../lib/eventify"),l=e("../../helpers/favorites"),c=e("./storage/local"),u=e("./storage/remote");t.exports=function(e,t,n,d){function h(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return{}}}function p(e){return(new Date).getTime()-e<B.collectionsCacheTTL}function f(){z={},q=0}function m(e){z={},i.forEach(e,function(e){var t=l.rawItemIdent(e.item).id;z[t]=e}),q=(new Date).getTime()}function g(){var e=this,t=i.isEmpty(F._data);t?i.bind(_,e)():O.sync(F._data).then(function(t){var a=i.find(t,{project_id:+n.getRegion().id});a&&m(a.items),e.emit("favoritesDataUpdated",h(z)),F.clear()})}function _(){var e=this,n=t.isAuthorized();q=0,n&&O.getList().then(function(t){m(t),e.emit("favoritesDataUpdated",h(z))})}function v(e,t){var n=i.findWhere(z,{id:e});return n&&!i.isUndefined(t)&&i.assign(n,t),h(n)}function y(e,t){var n=void 0;return n=t?i.pick(e,function(e){return i.some(i.get(e,"collections",[]),function(e){return e.id==t})}):e,h(n)}function b(e,t,a){var o=r[e.type](t,n.getRegion().id);return O.add(i.assign(o,a||{})).then(function(t){return z[e.id]=t,h(t)})}function k(e){var t=i.find(z,{id:e});return t?O.remove(t.id).then(function(){delete z[l.rawItemIdent(t.item).id]}):o.reject("No favorite with ID = "+e)}function w(e,t){var n=l.rawItemIdent(e),a=z[n.id];return a?O.addToCollection(a.id,t).then(function(e){return a.collections.push(e),h(a)}):b(n,e,t?{collections:[{id:t}]}:{})}function x(e,t){if(!e||!t)return o.reject("favoriteId and collectionId required");var n=i.find(z,{id:e});return n?1==n.collections.length?k(e):O.removeFromCollection(e,t).then(function(){return i.remove(n.collections,function(e){return e.id==t}),i.cloneDeep(n)}):o.reject("No favorite with ID = "+e)}function C(e){return p(q)?o.resolve(y(z,e)):O.getList().then(function(t){return m(t),o.resolve(y(z,e))})}function L(e,t){return I({id:e,title:t.substr(0,128)})}function I(e){return e.id?O.updateItem(e).then(function(t){return v(e.id,t)}):o.reject("item.id is required")}function T(){return z}function S(e){return p(q)?o.resolve(h(z[e])):O.getById(e).then(function(e){return h(e)})}function E(e){return e?z[e]?o.resolve(z[e]):O.getByObjectId(e).then(function(e){return h(e)}):o.resolve()}function P(e){var t=l.rawItemIdent(e);return o.resolve(z[t.id])}function j(){var e=i(z).values().reject("isDeleted").value();return e&&i.size(e)>=B.favoritesLimit}function M(){return!t.isAuthorized()}function A(e){$=function(){e(),$=i.noop}}function D(){$=i.noop}function R(e){var t=i.mapValues(z,function(t){return a({},t,{collections:i.filter(t.collections,function(t){return t.id!==e})})}),n=i(t).keys().filter(function(e){return!t[e].collections.length}).value();return z=i.omit(t,n)}function N(e){return e?O.getSharedCollection(e).then(function(e){return i.reduce(e.favorites,function(e,t){var n=l.rawItemIdent(t.item).id;return e[n]=t,e},{})}):o.reject("collectionId required")}var B=e.config.group("favorites"),F=c(e,n,d),O=u(e,n,t),z={},q=0,$=i.noop,U={updateTitle:L,updateItem:I,getList:C,addToCollection:w,removeFromCollection:x,getObjectCache:T,getById:S,getByObjectId:E,getCachedEntity:P,isFull:j,needsAuth:M,afterAuth:A,afterAuthReset:D,removeAllFromCollection:R,getSharedList:N,formatObject:r.noPointObject,__testsOnly__:{_setCache:m,_invalidateCache:f,_cloneDeepObject:h}};return s(U),U.on("favoritesDataUpdated",i.bind(function(){return setTimeout($,0)},U)),t.on("loginComplete",i.bind(g,U)),t.on("logoutComplete",i.bind(i.flow(f,D),U)),n.on("init region",i.bind(_,U)),"undefined"!=typeof window&&(window.TestHandles=window.TestHandles||{},window.TestHandles.clearFavorites=i.bind(f,U)),U},t.exports._args=["app","$authorization","$regionManager","$localStorage"]},{"../../helpers/favorites":"/helpers/favorites.js","../../lib/eventify":"/lib/eventify.js","./formatter":102,"./storage/local":103,"./storage/remote":104,bluebird:384,lodash:"lodash"}],"/components/featureSwitcher/featureSwitcher.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/link"),o=req("helpers/time");t.exports=function(e,t,n,r,s,l){function c(){return e.isClient?window.parent!==window?document.referrer:""+window.location:r.get("X-Real-Referer")}function u(){var e=v,t=n.getRegion();if(v=t.country_code||"",t){var a=t.flags||{},i=a.public_transport||a.metro||a.road_network;_.set("routeSearch",i||k["routeSearch.pedestrian"]),_.set("traffic",!!a.traffic)}e!=v&&h()}function d(e){return a.has(b,e)?b[e]:k[e]}function h(){var e=a.keys(k),t=a.keys(b),n=a.union(e,t);a.each(n,function(e){var t=d(e);a.isArray(t)&&_.emit(e)})}function p(t){var n=s.get("mediaMode"),a=n&&n.switcher;return!("mediaCard"!=t&&"mediaResults"!=t||!e.config["mediaCard.canDisable"]||"off"!=a)}function f(){var e=s.get("iframeMode");return e&&"on"===e.switcher}function m(t,n){if(n===!1)return!0;if(!a.isObject(n))return!1;var o=n.browsers,r=n.https,l=n.phones,u=n.mobile,d=n.desktop,h=n.webgl,p=n.fileApi,m=n.mausoleum,g=n.iframeParentDomains;if(o){var _=e.ua().browser;if(_&&_.name&&_.major<=o[_.name.toLowerCase()])return!0}if(void 0!==l&&e.ua().isPhone!=l)return!0;if(void 0!==u&&e.ua().isMobile!=u)return!0;if(void 0!==d&&e.ua().isDesktop!=d)return!0;if(void 0!==m&&e.isMausoleum&&0==m)return!0;if(void 0!==h&&!w())return!0;if(!a.isUndefined(p)&&!x())return!0;if(void 0!==r&&r===!1&&e.useHttps)return!0;if(g&&g.length){if(!f())return!0;var v=c(),y=i.getDomainFromUrl(v);if(e.config["featureSwitcher.canRewriteReferrer"]){var b=s.get("referrer");b&&b.text&&(y=b.text)}if(y&&!a.contains(g,y))return!0}return!1}function g(e,t){var i,r,s,c;if(a.isArray(t)?i=t:a.isObject(t)&&(i=t.countries,r=t.split,s=t.splittingCountries,c=t.date),r&&!l.getStatusSplit("split."+e))return!0;if(s&&a.contains(s,v)&&!l.getStatusSplit("split."+e))return!0;if(c&&!o.isBetween(c.validFrom,c.validTo,new Date))return!0;if(i){if(!v)return!0;if(a.isArray(i))return!a.contains(i,v);if(!a.has(i,v))return!0;if(a.isBoolean(i[v]))return!i[v];if(a.isObject(i[v])){if(a.has(i[v],"includeCities"))return!a.contains(i[v].includeCities,n.getRegion().code);if(a.has(i[v],"excludeCities"))return a.contains(i[v].excludeCities,n.getRegion().code)}}return!1}t=t||{};var _,v,y=req("lib/eventify"),b={},k=t.config||e.config.group("features"),w=a.memoize(function(){if(!e.isClient)return!0;try{if(window.WebGLRenderingContext){var t=document.createElement("canvas");return!(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}}catch(n){return!1}return!1}),x=function(){return e.isClient?window.File&&window.FileReader&&window.FileList:!0};return e.isGrym&&(k.routeSearch=!1,k.traffic=!1,k.auth=!1,k.plusOne=!1,k.p2d=!1,k.print=!1),_={get:function(e){var t=d(e);return p(e)?!1:t===!0?!0:!m(e,t)&&!g(e,t)},set:function(e,t){var n=_.get(e);m(e,k[e])||(b[e]=t,n!=t&&_.emit(e))},onChange:function(e,t,n){n&&t(e),_.on(e,t)},promo:function(t){var i=e.config["promoTooltip."+t];return i&&(!i.feature||this.get(i.feature))&&(!i.regions||a.contains(i.regions,parseInt(n.get("id"),10)))&&(!i.validFrom||new Date>new Date(i.validFrom))&&(!i.validTo||new Date<new Date(i.validTo))}},_=y(_),n.onInit(function(){u()}),_},t.exports._args=["app","options","$regionManager","$syncRegistry","$appState","$split"]},{lodash:"lodash"}],"/components/feedbackApi/feedbackApi.js":[function(e,t,n){"use strict";var a=req("lib/request2"),i=e("bluebird"),o=e("lodash"),r="/feedback";t.exports=function(e,t){return{send:function(e){var n=t.getAuthorizedUserSync();return e.append("authorizationToken",o.get(n,"authorizationToken")),e.append("useJson",!0),a("post",r).send(e).then(function(e){try{var t=JSON.parse(e.text).result;if("ok"!=t)return i.reject(t)}catch(n){return i.reject(n)}return i.resolve()})["catch"](function(e){return i.reject(e)})}}},t.exports._args=["app","$authorization"]},{bluebird:384,lodash:"lodash"}],"/components/floorsApi/floorsApi.js":[function(e,t,n){var a=e("lodash"),i=req("lib/eventify"),o=req("lib/request2"),r=req("helpers/requestDispatcher");t.exports=function(e){var t=e.requireComponent("regionManager"),n=i({}),s=r(n,function(n,a,i){function r(e){i(null,e)}function s(e){i(e.body||e)}var l,c,u;switch(n){case"getFloorsList":u=101===+a.regionId,c=(u?e.config["floors.data.chile.url"]:e.config["floors.data.url"])+"/complexes",l=o("get",c).query({region_id:a.regionId}).then(function(e){r(e.body)})["catch"](function(){e.sendError("Error during floors list fetching"),r([])});break;case"getComplexData":u="cl"===t.get("country_code"),c=(u?e.config["floors.data.chile.url"]:e.config["floors.data.url"])+"/complexes/"+a.complexId,l=o("get",c).timeout(e.config[e.isClient?"floors.clientNetworkTimeout":"floors.networkTimeout"]).query({fields:a.fields.join(",")}).then(function(e){r(e.body)})["catch"](s)}return l}),l=req("helpers/requestWrappers/cache")(e);return s=l.wrap(s),a.extend(n,{doRequest:s}),n},t.exports.emitAbortablesBy="request"},{lodash:"lodash"}],"/components/floorsManager/floorsManager.js":[function(e,t,n){var a=e("slot/lib/loadScript"),i=e("bluebird"),o=req("helpers/floors"),r=e("lodash"),s=req("helpers/firm");t.exports=function(e,t,n){var l=[],c=n.floors();return{loadList:function(e){return c.list(e).then(function(e){l=e})["catch"](function(){l=[]})},loadLib:function(){var e=o.getLibPath()+"/floors.js";return new i(function(t){a(e,t)})},hasComplex:function(e){return!!r.find(l,{id:e})},hasBuilding:function(e){return!!r.find(l,function(t){return r.includes(t.buildings,e)})},hasBranch:function(e){var t=s.getStaticId(e);return!!r.find(l,{branchId:t})},regionHasFloors:function(e){var t=parseInt(e.id,10);return!!r.find(l,{regionId:t})},getByBuildingId:function(e){return r.find(l,function(t){return r.includes(t.buildings,e)})},getByComplexId:function(e){return r.find(l,{id:e})},getComplexIdByBuildingId:function(e){return r.get(this.getByBuildingId(e),"id")},getByBranchId:function(e){return r.find(l,{branchId:e})},getList:function(){return l},setList:function(e){l=e}}},t.exports._args=["app","$featureSwitcher","$models"]},{bluebird:384,lodash:"lodash","slot/lib/loadScript":"slot/lib/loadScript"}],"/components/frameResizer/frameResizer.js":[function(e,t,n){var a=e("lodash");t.exports=function(){function e(e){var t=e-s.wrapperPaddings,a=Math.floor(t/s.columnWidth);return n(a)}function t(e){return-1===e?s.hideOverlayWidth:s.wrapperPaddings+s.columnWidth*e}function n(e){var t=$(window).width(),n=Math.floor((t-s.viewportBlindSpot)/s.columnWidth);if(e>n&&(e=n),s.maxColumnsNumber&&e>s.maxColumnsNumber)return s.maxColumnsNumber;var a=s.allowHide&&1>e;return a?-1:e<s.minColumnsNumber&&!a?s.minColumnsNumber:e}function i(n,i){n.preventDefault(),s=a.extend(i,{wrapperPaddings:i.wrapperPaddings||0,minColumnsNumber:i.minColumnsNumber||1}),c=e(n.clientX),u=c,l=n.clientX,$(document).on("mousemove",o).one("mouseup mouseleave",r),s.onStart(c,t(c))}function o(e){var a,i=l>e.clientX,o=l<e.clientX;if(i)a=l-e.clientX;else{if(!o)return;a=e.clientX-l}var r,d=s.columnWidth-s.subStepWidth,h=Math.floor((a+d)/s.columnWidth);r=i?c-h:c+h;var p=n(r);p!==u&&(s.onChange(p,t(p)),u=p)}function r(){$(document).off("mousemove",o).off("mouseup mouseleave",r),s.onEnd(u,t(c))}var s,l,c,u;return{resize:i}}},{lodash:"lodash"}],"/components/holidaysApi/holidaysApi.js":[function(e,t,n){"use strict";var a=e("lodash"),i=e("slot/env"),o=e("bluebird"),r=req("lib/request2"),s=req("helpers/time");t.exports=function(e,t,n){function l(s){var l=n.get(s),c=void 0;return new o(function(o,u){if(l)return void o(l);if(e.isServer){try{c=i.requirePrivate("holidays/"+t.getRegion().country_code)}catch(d){return n.set(s,{}),void u()}if(c)return n.set(s,c),void o(c)}var h="/holidays/"+t.getRegion().country_code;r("get",h).then(function(e){if(200==e.statusCode){var t=a.get(e,"body.response",{});n.set(s,t),o(t)}else n.set(s,{}),o(null)})["catch"](u)})}return{getHolidays:function(e){var n="holidaysData_"+t.getRegion().country_code;l(n).then(e)["catch"](function(){e(null)})},getActiveHoliday:function(e,n){if(a.get(e,"data.length")){var i=n||s.getFormattedTime(t.getRegion(),"YYYY-MM-DD");return a.find(e.data,function(e){return s.isBetween(e.dateOfSwitchingOn,e.dateOfSwitchingOff,i);
})}}}},t.exports._args=["app","$regionManager","$syncRegistry"]},{bluebird:384,lodash:"lodash","slot/env":"slot/env"}],"/components/i18n/i18n.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/string").format,o=Array.prototype.slice,r=e("./gettext"),s=e("./gettext.handlebars"),l=e("./load"),c=e("./defaults"),u=req("l10n/variants"),d=e("moment");t.exports=function(t){function n(e){return e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2}function h(e,t){return t=t||0,function(){var n=o.call(arguments,e.length+t),a=o.call(arguments,0,e.length);return i(e.apply(this,a),n)}}function p(e){return g(null,e)}function f(e,t,n,a){return g(null,e,t,n,a)}function m(e,t){return g(e,t)}function g(e,t,a,i,o){var r="";if(a&&i&&void 0!==typeof o){var s=n(o);r=arguments[s+1]}else r=t;return r}function _(e){return b(null,e)}function v(e,t,n,a){return b(null,e,t,n,a)}function y(e,t){return b(e,t)}function b(e,t,n,a,i){var o="";return w&&w.isInited()&&(o=w.npgettext(e,t,a,i)),o||(o=g(e,t,n,a,i)),o}var k,w,x,C="RU",L={},I={},T={},S=t.config,E=!1,P=s(t.handlebars);return T.init=function(e,t,n){0==arguments.length&&(e=t="ru");var i=e+"_"+t;x=u.getSupportedLocale(i),x||(x="ru_ru");var o=x.split("_");k=o[0],C=o[1],l(x,function(e){var t=e||c;I=a.merge({},t[0],S["l10n.settings"]||{},function(e,t){return a.isArray(t)?t:void 0}),L=a.merge({},t[1],S["l10n.formats"]||{}),w=new r({locale_data:t[2]}),d.locale(k),E=!0,n&&n()})},T.inited=function(){return E},T._gg=h(p),T._ngg=h(f,-1),T._pgg=h(m),T._npgg=h(g,-1),T._t=h(_),T._nt=h(v,-1),T._pt=h(y),T._npt=h(b,-1),T._gg=h(p),T._quote=function(e){return e?L.string.quotationStart+(e.fn&&e.fn(this)||e)+L.string.quotationEnd:""},T._htHelper=a.partial(P.htHelper,_,!1),T._hntHelper=a.partial(P.htHelper,v,!0),T._ht=a.partial(P.htRuntime,_,!1),T._hnt=a.partial(P.htRuntime,v,!0),T._hggHelper=a.partial(P.htHelper,p,!1),T._hnggHelper=a.partial(P.htHelper,f,!0),T._hgg=a.partial(P.htRuntime,p,!1),T._hngg=a.partial(P.htRuntime,f,!0),T.getLang=function(){return k},T.getLocale=function(){return x},T.getFormats=function(e){return a.isString(e)?a.get(L,e):L},T.getSettings=function(e){return a.isString(e)?a.get(I,e):I},T.getPublicRubricNames=function(){function t(t){try{return"/"==t[0]?e(t)||{}:req(t)||{}}catch(n){return{}}}return a.extend({},t(S["data.path"]+"/seoSynonyms/"+k+".json"),t(S["data.path"]+"/seoSynonyms/"+x+".json"))},T.getPreferredLang=function(t,n,a){if(!t)return a;var i=e("locale");i.Locale["default"]=a;var o=new i.Locales(t),r=new i.Locales(n);return""+o.best(r)},T.getMessages=function(){return w&&w.locale_data||{}},T._config=function(e,t){function n(e,t){var n=a.find(t,function(t){return!a.isUndefined(e[t])});return e[n]}var i=(t||"").toLowerCase().split("_"),o=i[1]||i[0];return S[e]&&n(S[e],[t,o,x,C,"ru"])||""},T.mock=function(e){e=e||{},x=(e.locale||x||"ru_ru").toLowerCase(),C=(e.countryCode||C||"ru").toLowerCase(),S=e.config||S,w=new r({locale_data:null})},T}},{"./defaults":105,"./gettext":107,"./gettext.handlebars":106,"./load":108,locale:455,lodash:"lodash",moment:"moment"}],"/components/localStorage/localStorage.js":[function(e,t,n){t.exports=function(){return req("lib/storageWrapper/storageWrapper.js").get("localStorage")}},{}],"/components/models/models.js":[function(e,t,n){t.exports=function(t){return{award:function(n){var a=t.invoke(e("./award"),[t]);return new a(n)},geoClicker:function(n){var a=t.invoke(e("./geoClicker"),[t]);return a(n)},results:function(n){var a=t.invoke(e("./results"),[t]);return new a(n)},markers:function(){var n=t.invoke(e("./markers"),[t]);return new n},tooltips:function(){var n=t.invoke(e("./tooltips"),[t]);return new n},firm:function(n,a){var i=t.invoke(e("./firm"),[t]);return new i(n,a)},meta:function(n,a){var i=t.invoke(e("./meta"),[t]);return new i(n,a)},photos:function(n){var a=t.invoke(e("./photos"),[t]);return new a(n)},photo:function(n){var a=t.invoke(e("./photo"),[t]);return new a(n)},weather:function(n){var a=t.invoke(e("./weather"),[t]);return new a(n)},reviews:function(n,a){var i=t.invoke(e("./reviews"),[t]);return new i(n,a)},stations:function(n){var a=t.invoke(e("./stations"),[t]);return new a(n)},presents:function(n){var a=t.invoke(e("./presents"),[t]);return new a(n)},products:function(n){var a=t.invoke(e("./products"),[t]);return new a(n)},product:function(n){var a=t.invoke(e("./product"),[t]);return new a(n)},ppna:function(n){var a=t.invoke(e("./ppna"),[t]);return new a(n)},ppnot:function(n){var a=t.invoke(e("./ppnot"),[t]);return new a(n)},floors:function(n){var a=t.invoke(e("./floors"),[t]);return new a(n)}}}},{"./award":109,"./firm":110,"./floors":111,"./geoClicker":112,"./markers":113,"./meta":114,"./photo":116,"./photos":121,"./ppna":122,"./ppnot":123,"./presents":124,"./product":125,"./products":127,"./results":131,"./reviews":137,"./stations":138,"./tooltips":139,"./weather":141}],"/components/p2d/p2d.js":[function(e,t,n){var a=e("lodash"),i=e("async");t.exports=function(e){function t(){var e=new Date;return e.setYear(e.getFullYear()+1),e}function n(e,n,a){if(m[e]={hash:n,mobileName:a},"browser"==e){var i=p._config("cookieDomain");$.cookie(f,n,{domain:i,expires:t(),path:"/"})}return m[e]}function o(e){if(delete m[e],"browser"==e){var n=p._config("cookieDomain");$.removeCookie(f,{domain:n,expires:t(),path:"/"})}}function r(e){var t;return e?t=m[e]:m.account?t=m.account:m.browser&&(t=m.browser),t}function s(e){return e?!!m[e]:a.some(m,function(e){return!!e})}var l,c,u=e.requireComponent("authorization"),d=e.requireComponent("p2dApi"),h=e.requireComponent("analytics"),p=e.requireComponent("i18n"),f=e.config["p2dApi.cookieName"],m={};return c={bind:{error:function(e){h.trackEvent("google",["P2D","Link","Fail_"+e])},success:function(e){h.trackEvent("google",["P2D","Link","Success_"+e]),h.trackEvent("yandex",["P2D_LINK"])}},unbind:{error:function(e){h.trackEvent("google",["P2D","Unlink","Fail_"+e])},success:function(e){h.trackEvent("google",["P2D","Unlink","Success_"+e]),h.trackEvent("yandex",["P2D_UNLINK"])}},dial:{error:function(e){h.trackEvent("google",["P2D","Call","Fail_"+e])},success:function(e,t){h.trackEvent("google",["P2D","Call","Success_"+e]),h.trackEvent("google",["P2D","Call_Firm",t]),h.trackEvent("yandex",["P2D_CALL"])}}},l={startup:function(e){var t,n,r=$.cookie(f),s=[];return u.isAuthorized()?(t="account",n={session_token:u.getAuthorizedUserSync().authorizationToken},s.push(a.bind(l.getBindingAsync,null,t,n))):o("account"),r&&(t="browser",n={hash:r},s.push(a.bind(l.getBindingAsync,null,t,n))),s.length?void i.parallel(s,function(){"function"==typeof e&&e()}):void("function"==typeof e&&e())},isBound:s,getBinding:r,getBindingAsync:function(e,t,a){return d.getBinding(t,function(t,i){return i?(n(e,i.hash,i.dialer_name),void a(null,m[e])):void a(t)})},bind:function(e,t,a){var i,o={};o.pin=e,u.isAuthorized()?(i="account",o.session_token=u.getAuthorizedUserSync().authorizationToken):(i="browser",o.sender_name="2gis Online"),d.bind(o,function(e,o){if(e)c.bind.error(i),"function"==typeof t&&t(e);else{c.bind.success(i);var r=n(i,o.hash,o.dialer_name);"function"==typeof a&&a(r)}})},unbind:function(e,t){var n=u.isAuthorized()&&m.account?"account":"browser",a={hash:m[n].hash};d.deleteBinding(a,function(a){a?(c.unbind.error(n),e()):(c.unbind.success(n),o(n),t())})},dial:function(e,t,n){n=n||{};var a=s()&&r().hash,i={phone:e,message:t,hash:a},o={phoneNumber:e||"",pushNotificationText:t||"",callbacks:n};d.dial(i,function(e){var a=m.account?"account":"browser";if(e)c.dial.error(a),"function"==typeof n.error&&(e.meta&&"itemNotFound"==e.meta.error.type?n.error("binding",o):n.error("dialing",o));else{var i=t;c.dial.success(a,i),"function"==typeof n.success&&n.success(o)}})}}}},{async:383,lodash:"lodash"}],"/components/p2dApi/p2dApi.js":[function(e,t,n){var a=e("lodash");t.exports=function(e){function t(e,t,n){var r=o+e;return i("get",r).query(t).then(function(e){var t=a.get(e,"body.meta.code");return e.ok&&200==t?void n(null,a.get(e,"body.result"),t):void n(a.get(e,"body","p2dApiError"),null,t)})["catch"](function(e){n(e,null,500)})}var n,i=req("lib/request2"),o=e.config["p2dApi.url"];return n={bind:function(e,n){return t("bind",e,n)},dial:function(e,n){return t("dial",e,n)},getBinding:function(e,n){return t("getbinding",e,n)},deleteBinding:function(e,n){return t("deletebinding",e,n)}}}},{lodash:"lodash"}],"/components/personalApi/personalApi.js":[function(e,t,n){var a=e("lodash"),i=req("lib/eventify"),o=req("lib/request2");t.exports=function(e,t){function n(){return{searches:[],branches:[]}}function r(e){var t={};return e=e||{},t.searches=a.map(e.searches,function(e){return[{type:"text",text:e.text,isPersonal:!0}]}),t.branches=a.map(e.branches,function(e){return[{id:e.id,type:"text",text:e.name,address:e.address,hint_type:"branch",isPersonal:!0}]}),t}function s(a){return o("get",e.config["suggest.personal.apiUrl"]).timeout(e.config["suggest.personal.apiTimeout"]).withCredentials().query({region_id:t.getRegion().id}).then(function(e){return e.body&&(e.body.searches||e.body.branches)?void a(null,r(e.body)):void a(e.statusCode,n())})["catch"](function(e){a(e,n())})}var l=n(),c=i({getData:function(){return l},emptyResult:n,makeRequest:s});return e.isClient&&!e.isGrym&&t.onInit(function(){l=n(),s(function(e,t){l=t,c.emit("dataLoaded",l)})}),c},t.exports._args=["app","$regionManager"]},{lodash:"lodash"}],"/components/photoApi/photoApi.js":[function(e,t,n){var a=e("../../lib/request2"),i=e("lodash"),o=e("../../helpers/firm"),r=e("../../helpers/formData"),s=e("bluebird");t.exports=function(e,t,n){function l(){return i.get(I.getAuthorizedUserSync(),"authorizationToken")}function c(e){var t=i.has(L,"key."+e)?"key."+e:"key.default";return L[t]}function u(e){return i.includes(["collection"],e)}function d(e,t,a){if(a)return s.resolve(a);switch(e){case"branch":return s.promisify(n.firms.photoInfo)(t);case"geo":return s.promisify(n.geo.photoInfo)(t);default:return s.reject({error:"Wrong object type"})}}function h(e,n,o){return i.isArray(n)||(n=[n]),a("get",L.url+"photo/count").set("Auth-Token",l()).query({key:c(e),object_id:n.join(","),object_type:e,locale:t.getRegion().locale,preview_size:L.photoPreviews.join(",")}).then(function(e){var t=i.get(e,"body.meta.code");200!=t?o({error:i.get(e,"body.meta.error.message","No error message")},null):o(null,i.get(e,"body.result"))})["catch"](function(e){o(e,null)})}function p(e,t){return L.disableCounters||i.isUndefined(t)||!t.length?s.resolve({}):s.promisify(h)(e,t)}function f(e,t,n,a,o){return s.props({photos:g(t,n,a,o,i.noop),extraPhotos:m(e,a)}).then(function(e){var t=i.cloneDeep(e.photos),n=i.reduce(e.extraPhotos,function(e,t){var n=i.get(t,"photos.items");return i.size(n)&&(e=e.concat(n)),e},[]);return i.size(n)&&(t.photos.items=(t.photos.items||[]).concat(n)),t})}function m(t,n){return s.map(t,function(e){var t;t="facilities"==n?n:"branch"==e.type?"common":"view";var a="branch"==e.type?"branch":"geo";return g(a,e.id,t,{},i.noop)})["catch"](function(t){return e.sendError("method getExtraPhoto failed in photoApi",i.get(t,"message")),[]})}function g(e,n,o,r){var u=e+"_"+o+"_"+n,d=T[u];if(d){var h=i.assign(d,r||{});return s.resolve(h)}return a("get",L.url+"photo/get").set("Auth-Token",l()).query({status:"active",key:c(e),object_id:n,object_type:e,preview_size:L.photoPreviews.join(","),album_code:o,locale:t.getRegion().locale}).then(function(e){return T[u]=v(e.body,r),T[u]})["catch"](function(e){return T[u]=!1,s.reject(e)})}function _(e,t,n){S[e]?n(null,S[e]):a("get",t).then(function(t){S[e]=t.text,n(null,t.text)})["catch"](function(e){n(e,null)})}function v(e,t){return t||(t={}),e&&200==i.get(e,"meta.code")&&i.get(e,"result[0].items")?i.assign({photos:{items:e.result[0].items,reg_bc_url:t.photos_reg_bc_url}},i.omit(t,"photos_reg_bc_url")):null}function y(e,n,o,s,l,d){var h={key:c(n),object_id:o,object_type:n,album_code:s,locale:t.getRegion().locale,region_id:t.getRegion().id,replace:u(n)};i.forEach(l,function(e,t){h["items["+t+"][uid]"]=e});var p=r.append(h);a("post",L.url+"photo/add").set("Auth-Token",e).send(p).end().then(function(e){200!=i.get(e,"body.meta.code")?d({error:i.get(e,"body.meta.error.message")||"No error message"},null):d(null,i.get(e,"body.result"))})["catch"](function(e){d(e,null)})}function b(e,t,n,o,s,l,u,d){var h=r.append({key:c(t),"items[0][id]":s,"items[0][hash]":l,"items[0][file]":u,preview_size:L.photoPreviews.join(",")});a("post",L.url+"photo/upload").timeout(L.uploadNetworkTimeout).set("Auth-Token",e).send(h).end().then(function(e){if(200!=i.get(e,"body.meta.code"))d({error:i.get(e,"body.meta.error.message")||"No error message"},null);else{var a=i.get(e,"body.result.items[0]");if(!a||a.error)return void d({},null);x(t,n,o,a),d(null,a)}})["catch"](function(e){d(e,null)})}function k(e,t,n,o,s,l){var u={key:c(t),object_id:n,object_type:t,id:o},d=r.append(u);a("post",L.url+"photo/delete").set("Auth-Token",e).send(d).end().then(function(e){200!=i.get(e,"body.meta.code")?l({error:i.get(e,"body.meta.error.message")||"No error message"},null):(w(t,n,s,o),l(null,i.get(e,"body.result")))})["catch"](function(e){l(e,null)})}function w(e,t,n,a){var o=e+"_"+n+"_"+t,r=T[o];r&&(i.remove(r.photos.items,{id:a}),T[o]=r)}function x(e,t,n,a){var i=e+"_"+n+"_"+t,o=T[i];o&&(o.photos.items=[a].concat(o.photos.items||[]),T[i]=o)}function C(e,n,o,s,d,h){var p={key:c(o),photo_id:n,src_object_type:e,object_id:s,object_type:o,album_code:d,replace:u(o),region_id:t.getRegion().id,locale:t.getRegion().locale},f=r.append(p);a("post",L.url+"photo/copy").set("Auth-Token",l()).send(f).end().then(function(e){200!=i.get(e,"body.meta.code")?h({error:i.get(e,"body.meta.error.message")||"No error message"}):h(null,i.get(e,"body.result"))})["catch"](function(e){h(e,null)})}var L=e.config.group("photoApi"),I=e.requireComponent("authorization"),T={},S={},E=function(e,t,n,a,r){!r&&i.isFunction(a)&&(r=a,a=null),t=o.getStaticId(t),s.props({data:d(e,t,a),albums:p(e,t)}).then(function(a){var o,r=a.data;if(L.disableCounters){if(!r.external_content)return s.reject({error:"No external_content"});o=i.findWhere(r.external_content,{type:"photo_album",subtype:n})}else o=i.findWhere(i.get(a,"albums[0].albums"),{type:n});if(!o||!o.count)return s.resolve(i.assign(r,{objectId:t,objectType:e}));var l={};switch(e){case"branch":if(l={id:r.id,mainPhoto:i.get(o,"main_photo_url"),photos_reg_bc_url:i.get(o,"reg_bc_url"),name_ex:r.name_ex||null,name:r.name||null,address_name:r.address_name||null,address_only:r.address_only,adm_div:r.adm_div},"view"==n){if(!r.address||!r.address.building_id)return s.reject({error:"No address or building_id"});t=r.address.building_id,e="geo",l=i.assign(l,{buildingId:r.address.building_id||null})}else l=i.assign(l,{reviews:r.reviews||null});break;case"geo":l={id:r.id,address_name:r.address_name,name:r.name,type:r.type};break;default:return s.reject({error:"No address or building_id"})}return l=i.assign(l,{objectId:t,objectType:e}),"facilities"==n||i.isEmpty(r.group)?g(e,t,n,l,i.noop):f(r.group,e,t,n,l)}).then(function(e){r(null,e)})["catch"](function(e){r(e||{error:"No external_content"},null)})},P=function(e,t,n){return L.disableCounters?(n({},null),null):t.length?h(e,t,n):(n({error:"No objects ids"},null),null)};if(!e.config.disableStash){var j=req("helpers/requestWrappers/stash")(e);g=j.wrap(g)}var M={getByGeo:i.partial(E,"geo"),getFirmPhotos:i.partial(E,"branch"),getCopyrightSvgByUrl:_,getFirmInfo:i.partial(P,"branch"),getGeoInfo:i.partial(P,"geo"),getCollectionInfo:i.partial(P,"collection"),addPhotos:y,uploadPhoto:b,deletePhoto:k,copyPhoto:C,_reformat:v};return M},t.exports._args=["app","$regionManager","$dgApi"]},{"../../helpers/firm":"/helpers/firm.js","../../helpers/formData":"/helpers/formData.js","../../lib/request2":"/lib/request2.js",bluebird:384,lodash:"lodash"}],"/components/plusOne/plusOne.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t){function n(){document.removeEventListener("ticketmanager.events.close",n),s.emit("legacyWidgetClosed",r)}function i(){document.removeEventListener("ticketmanager.events.close",n),ticketManager.closeWidget()}function o(t,a){var i=plusone.widgets[t];i?e.useHttps&&a.url&&!/^https:\/\//.test(a.url)?window.open(a.url):(r=t,a.width=i[0],a.height=i[1],s.emit("plusOneActivated",a)):plusone.legacyWidgets[t]?(r=t,"rambler_kassa"==r&&document.addEventListener("ticketmanager.events.close",n),plusone.legacyWidgets[t].run(a.value),s.emit("legacyPlusOneActivated")):-1!=plusone.windowOpenWidgets.indexOf(t)&&window.open(a.value)}var r,s,l=req("lib/eventify");return s={open:function(e,n,i){i&&i.value?o(e,i):t.firms.profile(n,function(t,n){if(!t){var i=a.find(n.external_content,function(t){return"plus_one"==t.type&&t.provider_tag==e});i&&o(e,i)}})},close:function(){var e=plusone.widgets[r];e?s.emit("plusOneClosed"):"rambler_kassa"==r&&i(),r=null},isExternal:function(e){return-1!==plusone.windowOpenWidgets.indexOf(e)}},l(s)},t.exports._args=["app","$dgApi"]},{lodash:"lodash"}],"/components/presentsApi/presentsApi.js":[function(e,t,n){var a=e("lodash"),i=req("lib/request2"),o=e("url");t.exports=function(e){function t(t,a){var i=e.config["presentsApi.url"]+t;return n(i,a)}function n(e,t,n){var i=o.parse(e,!0);return i.query=i.query||{},i.search=null,n?i.query=a.assign(i.query,t):i.query=t,o.format(i)}function r(t,o,r){var s=e.config["presentsApi.key"],l=o.method||"get",c=a.omit(o,a.isEmpty),u="get"==l?"query":"send";"post"==l?t=n(t,{key:s},!0):c.key=s,i(l,t)[u](c).then(function(e){var t=a.get(e,"body.result");t?r(null,t):r({error:"No data received"},null)})["catch"](function(){r({error:"No data received"},null)})}if(!e.isGrym&&!e.config.disableStash){var s=req("helpers/requestWrappers/stash")(e);r=s.wrap(r)}return{getPresents:function(e,n){e=e||{};var a={region_id:e.regionId,selected_id:e.selectedId};r(t("presents"),a,n)},savePresent:function(e,n){e=e||{};var a={region_id:e.regionId},i={method:"post",name:e.name};r(t("presents",a),i,n)},registerClick:function(e,n){e=e||{};var a={region_id:e.regionId,present_id:e.presentId},i={method:"post",provider:e.provider};r(t("presents/clicks",a),i,n)},registerRepost:function(e,n){e=e||{};var a={region_id:e.regionId,present_id:e.presentId},i={method:"post",provider:e.provider,post_id:e.postId};r(t("presents/reposts",a),i,n)}}}},{lodash:"lodash",url:419}],"/components/previewBizaccount/previewBizaccount.js":[function(e,t,n){var a=e("lodash"),i=e("./queryParser"),o=e("./dataFromAccount");t.exports=function(e){function t(e){n?e(n):o(r,function(t){n=t,e(n)})}var n,r=i(e).previewBizaccountId,s={isEnabled:function(){return!!r},mergeData:function(e,n){t(function(t){e&&e.items&&a.each(e.items,function(e){a.contains(e.id,t.id)&&a.merge(e.ads,t.ads)}),n(e)})}};return s}},{"./dataFromAccount":142,"./queryParser":143,lodash:"lodash"}],"/components/proposalsApi/proposalsApi.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("lib/request2");t.exports=function(e){function t(t,n){var i=o[t];return a.each(n,function(e,t){i=i.replace(":"+t,e)}),e.config["proposals.url"]+i}function n(e,t,n){return i("get",e).query(n||{})}var o={branch:"branch/:branchId",branchCoverage:"branch/:branchId/coverage",branchAds:"branch/:branchId/ads"};return{getBranchInfo:function(e){return n(t("branch",{branchId:e}))},getBranchCoverage:function(e){return n(t("branchCoverage",{branchId:e}))},getBranchProposals:function(e){return n(t("branchAds",{branchId:e}))}}}},{lodash:"lodash"}],"/components/regionManager/regionManager.js":[function(e,t,n){var a=e("bluebird"),i=e("lodash");t.exports=function(t,n,o,r){function s(){return h.getRegionQtContext()}function l(){if(u)return u;var e=n.get("region",{});return t.sendError("Region has not been initialized",{cachedRegionId:e.id}),e}function c(e){if(!t.config["features.languageSwitcher"])return e.currentLanguage;var a=t.cookie(t.config.multilangCookie)||r.getLang();if(n.get("isSearchBot")&&(a=r.getLang()),!a)return e.currentLanguage;var o=e.availableLanguages||[];return i.contains(o,a)?a:e.currentLanguage}var u,d=e(t.isGrym?"./offline":"./online"),h=t.invoke(d,[t]),p=req("lib/eventify"),f={initRegion:function(e,t){function a(){f.emit("init region",u,s()),t(u)}var i=n.get("region",{});t=t||function(){},u&&f.emit("dispose region",u,s()),u=h.initRegion(e),u||i.id!=e||(u=i);var l=r.getPrevState().city;l=l&&h.getRegions()[l.id];var d=c(u);o.inited()&&l&&l.currentLanguage==d&&l.country_code==u.country_code?a():o.init(d,u.country_code,a)},onInit:function(e){u&&e(u,s()),f.on("init region",e)},loadRegions:function(e){h.lazyLoad().then(e)},loadRegion:function(e){return new a(function(a){f.loadRegions(function(o){var r;e in o?r=o[e]:t.config.defaultCity in o?(r=o[t.config.defaultCity],t.sendError("Region id not found in region list",{regionId:e})):(r=o[i.keys(o)[0]],t.sendError("Region id && defaultCity not found in region list",{regionId:e})),n.set("region",r),a(r)})})},getRegion:function(e){return e?f.getRegions()[e]:l()},getRegionByName:function(e){return h.getRegionByName?h.getRegionByName(e):null},getRegionQtContext:s,getRegions:h.getRegions,getRegionsLength:h.getRegionsLength,getNativeRegions:function(){var e=o.getSettings().cityselect.countries,t=h.getRegions();return i.reduce(t,function(t,n,a){return e.length&&!i.contains(e,n.country_code)||(t[a]=n),t},{})},getName:function(e){var t=e&&e["case"]||0,n=this.getRegion(),a=["nominative","genitive","dative","accusative","ablative","prepositional"];return i.isNumber(t)&&(t=a[t]),n.name_grammatical_cases&&n.name_grammatical_cases[t]||n.name},setRegions:function(e){h.setRegions&&h.setRegions(e)},getProjectByProjectName:function(e){return h.getProjectByProjectName?h.getProjectByProjectName(e):null},downloadRegion:function(e){return h.downloadRegion?h.downloadRegion(e):null},deleteRegion:function(e){return h.deleteRegion?h.deleteRegion(e):null},stopDownloadingRegion:function(e){return h.stopDownloadingRegion?h.stopDownloadingRegion(e):null},search:function(n,a,i){var o=[f.getRegion().id,t.config.universeId],r=e("./searcher/prepareData")(f.getNativeRegions(),o),s=e("./searcher")(r);return s(n,!!a,!!i)},count:function(){return i.size(this.getNativeRegions())},getZone:function(e){var t=this.getRegion(e).time_zone;return t?t.offset:0},code:function(){return this.getRegion().code},get:function(e,t){var n=this.getRegion(t);return"zone"==e?n.time_zone:n[e]}};return h.on("updateInfoChanged",function(e,t,n){f.emit("updateInfoChanged",e,t,n)}),h.on("regionInfoChanged",function(e,t,n){f.emit("regionInfoChanged",e,t,n)}),h.on("regionDownloadError",function(e,t){f.emit("regionDownloadError",e,t)}),h.on("newRegionAdded",function(e){f.emit("newRegionAdded",e)}),h.on("changeRegion",function(e){f.emit("changeRegion",e)}),p(f,0)},t.exports._args=["app","$syncRegistry","$i18n","$appState"]},{"./offline":144,"./online":145,"./searcher":146,"./searcher/prepareData":147,bluebird:384,lodash:"lodash"}],"/components/requestGroups/requestGroups.js":[function(e,t,n){var a=e("lodash");t.exports=function(){var e={},t={};return t.add=function(n,a,i){return a?(i&&t.abortGroup(a),n?(e[a]=e[a]||[],e[a].push(n),!0):!1):!1},t.abortGroup=function(n){if(!n)return!1;var i=t.getGroup(n);return i.length&&(a.each(i,function(e){e&&e.cancel&&e.cancel()}),e[n]=[]),!0},t.getGroup=function(t){return e[t]||[]},t}},{lodash:"lodash"}],"/components/requestManager/requestManager.js":[function(e,t,n){var a=req("lib/eventify"),i=e("lodash");t.exports=function(){function e(){a(this),this.childs=[],this.onChildRegBound=i.bind(this.onChildReg,this)}var t=a({});return e.prototype.reg=function(e){return this._cancel=e.cancel,e.cancel=i.bind(this.cancel,this),this.req=e,t.emit("reg",this),e},e.prototype.cancel=function(){this._cancel&&(this._cancel.call(this.req),i.each(this.childs,function(e){e.cancel()}),t.removeListener("reg",this.onChildRegBound),this.gc())},e.prototype.onChildReg=function(e){this.childs.push(e),e.on("gc",i.bind(this.gc,this,e))},e.prototype.sub=function(e,n,a){var i=this.onChildRegBound;t.on("reg",i);var o=e.apply(a,n);return t.removeListener("reg",i),this.gc(),o},e.prototype.gc=function(e){e&&(this.childs=i.without(this.childs,e)),this.childs&&!this.childs.length&&(this.childs=this._cancel=this.req=null,this.emit("gc",this))},n.caller=function(){return new e},n}},{lodash:"lodash"}],"/components/reviewsApi/reviewsApi.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/firm"),o=e("./formatter"),r=req("lib/request2");t.exports=function(e){function t(){return e.config["reviewsApi.url"]+"reviews/get"}function n(e){return JSON.stringify(e||{})}var s=function(t,n,s){n.page_size=n.page_size||e.config["reviewsApi.pageSize"],n.object_id=i.getStaticId(n.object_id),r("get",t).query(n).then(function(e){var t=a.get(e,"body.result");a.isEmpty(t)?s("No data received",null):s(null,o(t))})["catch"](s)};if(!e.isGrym&&!e.config.disableStash){var l=req("helpers/requestWrappers/stash")(e);s=l.wrap(s)}return{getFirmReviews:function(e,i,o){i=i||{};var r=a.defaults({},i,{object_id:e,previous_ids:n(i.offsetIds),object_type:"branch"});s(t(),r,o)},getLastReview:function(e,n){var i={object_id:e,page_size:1,object_type:"branch"};s(t(),i,function(e,t){var i=a.get(t,"reviews[0]");n(e,i)})}}}},{"./formatter":148,lodash:"lodash"}],"/components/routeSearchStore/routeSearchStore.js":[function(e,t,n){var a=e("lodash"),i=e("deep-equal");t.exports=function(e){function t(e,t){if(e&&t){var n={card:"button",move:"mapClick",suggest:"suggest",typeIn:"typeIn",fastSearch:"mapClick"};u[e]=n[t]}}function n(e,n){"move"==s&&(o=-1==n?"Delete_Point":e?"move_"+e:"new_Point"),r=!!e,t(e,s)}var o,r,s,l=e.requireComponent("analytics"),c=e.requireComponent("appState"),u={to:null,from:null},d={commit:function(e,t){if(o){var n="autoResults"==e?"Map_auto":"Map_bus",a=t?"Success_":"Fail_";l.trackEvent("google",["RouteSearch",n,a+o])}t&&u.to&&u.from&&r&&l.trackEvent("google",["RouteSearch","Search_From_To",u.from+"-"+u.to]),o=null},getLastEntry:function(){return s},setFromTo:function(e,t){t&&(s=t.context,n(e,!1)),c.setFromTo(e,t);var a="from"==e?"to":"from",o=c.get(a);i(c.get(e),o)&&c.setFromTo(a,null)},setWaypoints:function(e,t){s="move",n(!1,t),c.setWaypoints(e)},lastActionHasMapContext:function(){return a.contains(["move","fastSearch"],s)},clearStore:function(){s=null,o=null,u={to:null,from:null}}};return d}},{"deep-equal":428,lodash:"lodash"}],"/components/sessionStorage/sessionStorage.js":[function(e,t,n){t.exports=function(){return req("lib/storageWrapper/storageWrapper.js").get("sessionStorage")}},{}],"/components/shortonizerApi/shortonizerApi.js":[function(e,t,n){var a=req("lib/eventify"),i=req("lib/request2"),o=req("helpers/requestDispatcher");t.exports=function(e){var t=function(t,n){return i("get",e.config["shortonizerApi.url"]).timeout(e.config["shortonizerApi.reqTimeout"]).query({mode:"text",url:t}).then(function(e){n(e&&e.text?e.text:t)})["catch"](function(){n(t)})},n={reduceLink:function(e,n){return t(e,n)}};return t=o(n,t),a(n)},t.exports.emitAbortablesBy="request"},{}],"/components/social/social.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t){function n(){var e=document.createElement("script");e.id="facebook-jssdk",e.src="//connect.facebook.net/en/all.js",e.onload=function(){window.FB&&(FB.init({appId:l.fbId,xfbml:!0}),c.resolve())};var t=document.createElement("div");t.id="fb-root",document.body.appendChild(t),document.body.appendChild(e)}function i(){var e=document.createElement("script");e.id="twitter-wjs",e.src="//platform.twitter.com/widgets.js",document.body.appendChild(e)}function o(){var e=document.createElement("script");e.src="//vk.com/js/api/openapi.js?83",e.onload=function(){VK.init({apiId:l.vkId,onlyWidgets:!0}),u.resolve()},document.body.appendChild(e)}function r(){var e=document.createElement("script");e.src="//apis.google.com/js/plusone.js",e.onload=function(){d.resolve()},document.body.appendChild(e)}function s(){e.on("clientReady",function(){n(),i(),o(),r()})}var l=e.config.group("social"),c=t(),u=t(),d=t(),h={addVkLikeButton:function(e,t,n){u.done(function(){VK.Widgets.Like(e,t),a.isFunction(n)&&VK.Observer.subscribe("widgets.like.liked",n)})},addPlusoneButton:function(e,t,n){d.done(function(){a.isFunction(n)&&(t.callback=function(e){"on"==e.state&&n()}),gapi.plusone.render(e,t)})},setFbLikeCallback:function(e){a.isFunction(e)&&c.done(function(){FB.Event.subscribe("edge.create",e)})},shareWithFb:function(e,t,n,i,o){c.done(function(){var r={method:"feed",link:n,picture:i};e&&(r.name=e),t&&(r.description=t),i&&(r.picture=i),FB.ui(r,function(e){if(a.isFunction(o)){var t=!(!e||!e.post_id);o(t,e.post_id)}})})}};return e.isClient&&!e.isGrym&&s(),h},t.exports._args=["app","$defer"]},{lodash:"lodash"}],"/components/split/split.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t){function n(t,n){e.cookie(t,n,{path:"/",expires:367})}function i(n){e.removeCookie(n),e.isClient&&t.removeItem(n)}var o={init:function(e,t){var o="split."+e;if(!t)return void i(o);var r=this.getStatusSplit("split."+e);if(!a.isBoolean(r)){var s=Math.random()<t;n(o,s)}},clearSplitsStorage:function(n){if(n=n||[],e.isClient){var i=Object.keys(t);a.each(i,function(e){e.startsWith("split.")&&!a.contains(n,e)&&t.removeItem(e)});var o=$.cookie();a.each(o,function(e,t){t.startsWith("split.")&&!a.contains(n,t)&&$.removeCookie(t,{path:"/"})})}},getStatusSplit:function(i){var o={"true":!0,"false":!1};return a.isBoolean(o[t.getItem(i)])&&(n(i,o[t.getItem(i)]),t.removeItem(i)),o[e.cookie(i)]}};return o},t.exports._args=["app","$localStorage"]},{lodash:"lodash"}],"/components/stateTracker/stateTracker.js":[function(e,t,n){function a(e){r.call(this,e),this.app=e,this.lastUrl=null,e.isGrym&&this.on("afterAdd",this._syncOffline)}var i=e("inherits"),o=e("slot/env"),r=e("slot/components/stateTracker"),s=req("lib/offlineStorage/offlineStorage");i(a,r),a.prototype._syncOffline=function(e){var t=s();t.setUrl(e.url)},a.prototype.add=function(e,t,n){return this.lastUrl=this.lastUrl||n,o.isServer&&this.lastUrl!=n?(this.app.sendError("Server state 302 redirect",{fromUrl:this.lastUrl,toUrl:n}),void this.app.raise({code:302,redirectTo:n})):(this.lastUrl=n,void r.prototype.add.call(this,e,t,n))},a.prototype.resolveURL=function(e){return this.app.isGrym?null:r.prototype.resolveURL.call(this,e)},t.exports=function(e){return new a(e)}},{inherits:447,"slot/components/stateTracker":487,"slot/env":"slot/env"}],"/components/suggestApi/suggestApi.js":[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(t){var n=t.invoke(e("./surtify"),[t]),i=t.invoke(e("./personal"),[t]),o=t.invoke(e("./suggestWeb"),[t]);return function(e,t,r,s){return a.isFunction(r)&&(s=r,r=null),o(e,t,r,function(a,o,r){a||!o?s(a):(o.kits=n(o.items),"catalog"==t&&(o.kits=i(e).concat(o.kits)),s(null,o,r))})}}},{"./personal":150,"./suggestWeb":151,"./surtify":152,lodash:"lodash"}],"/components/summerApi/summerApi.js":[function(e,t,n){"use strict";var a=e("bluebird"),i=req("lib/request2"),o=e("slot/env"),r=e("lodash");t.exports=function(e,t){return{loadCollections:function(){var n=t.getRegion().code;if(e.isServer){var s=void 0;try{s=o.requirePrivate("/summer/"+n+".json")}catch(l){s={}}return r.size(s)?a.resolve(s):a.resolve(null)}return i("get","/summer/"+n).then(function(e){return r.get(e,"body.response")})["catch"](function(e){return null})}}},t.exports._args=["app","$regionManager"]},{bluebird:384,lodash:"lodash","slot/env":"slot/env"}],"/components/trafficApi/trafficApi.js":[function(e,t,n){t.exports=function(t){function n(e){return i("get",e.url).accept("text/plain").then(function(t){t.text?e.callback(null,t.text):e.callback(t.statusText)})["catch"](function(t){e.callback(t||{reason:"Unknown error"})})}function a(){var e=s.getRegion();return o.format(r,Math.floor(10*Math.random()),e.code)}var i=req("lib/request2"),o=e("slot/lib/stuff"),r=t.config["traffic.url"],s=t.requireComponent("regionManager"),l={getDimension:function(e){return n({url:a(),callback:e})}};return l}},{"slot/lib/stuff":496}],"/components/tyresApi/tyresApi.js":[function(e,t,n){t.exports=function(t){var n=e("./utils/request")(t);
return{status:function(e,t){n("status","GET",e,t)},search:function(e,t){n("search","GET",e,t)},filters:function(e,t){n("filters","GET",e,t)},models:function(e,t){n("models","GET",e,t)},getItem:function(e,a){var i=req("helpers/requestWrappers/stash")(t),o=i.wrap(function(e,t,a){n("get","GET",t,a)});o("tyres/get",e,a)}}}},{"./utils/request":153}],"/components/userActivity/userActivity.js":[function(e,t,n){var a=e("lodash");t.exports=function(t,n){if(!t.isClient)return null;var i=t.invoke(e("./actionsList"),[t]),o=new i;return $(document).on("mousedown",function(e){1==e.which&&o.addWithCheck("click",e)}),"undefined"==typeof DG||"makeup"==a.get(t.mainModule,"type")||t.isLandingPage||DG.DomEvent.on(document.querySelector(".map"),"mousewheel",function(e){o.addWithCheck("mousewheel",e)}),$(window).on("popstate",function(){o.add("popstate")}),n.on("statechange",function(e){o.setLastDiff(e),t.setTimeout(function(){o.addDiff()},0)}),o},t.exports._args=["app","$appState"]},{"./actionsList":157,lodash:"lodash"}],"/components/viewport/viewport.js":[function(e,t,n){var a=e("lodash"),i=req("lib/geo/lonlat");t.exports=function(e){function t(){return{top:0,left:0,width:0,height:0}}function n(e){if(!e)return null;var t=e.block();return"hidden"!=t.css("visibility")&&t.length?"dataViewer"==e.type?a.get(e,"interface.getSize",a.noop)({doNotIncludeFilters:!0})||null:r._getBlockSize(t):null}var o,r,s={},l=e.ua().isPhone?"citySelectPhone":"dashboard",c={},u=10,d=110,h=560;return r={registerWidget:function(e,t){if(!e)return null;var n=e;return t&&(n={type:e.type+"__"+t,block:function(){return e.slot.element(t)}}),s[n.type]=n,n},getWidgets:function(){return s},registerMap:function(e){o=e},getMap:function(){return o},_getBlockSize:function(e){var t=e.offset();return t.height=e.height(),t.width=e.width(),t},_calculateObjectOrientation:function(e){var t,n,a=r._calculateObjectCenter(r._getBlockSize(o.block())),i=r._calculateObjectCenter(e);return t=i.x<a.x?"left":i.x>a.x?"right":"center",n=i.y<a.y?"top":i.y>a.y?"bottom":"middle",{horizontal:t,vertical:n}},_calculateObjectCenter:function(e){return{x:e.left+Math.floor(e.width/2),y:e.top+Math.floor(e.height/2)}},_haveIntersection:function(e,t){return e.left<t.left+t.width&&e.left+e.width>t.left&&e.top<t.top+t.height&&e.top+e.height>t.top},_intersectsWithWidgets:function(e,t){return a.any(t||r.getWidgetSizes(),function(t){return r._haveIntersection(t,e)})},margin:u,defaultDashboardDimensions:{left:64,width:468},getDefaultDashboardDimensions:function(){return this.defaultDashboardDimensions.left+this.defaultDashboardDimensions.width},getPixelBound:function(e){var a,i,c,u=r._getBlockSize(o.block()),p=u.top+u.height,f=n(s[l])||t(),m=n(s.dataViewer)||t(),g=n(s.world)||t();e?(c=u.left+u.width-d,a=45):(c=u.left+u.width,a=15),i=u.width<h?u.left:Math.min(Math.max(m.left+m.width,f.left+f.width,g.left+g.width),c);var _={topLeft:[i,a],bottomRight:[c,p]};return _},getLeftDimension:function(){return[r.getPixelBound().topLeft[0],0]},getRightDimension:function(){return[d,0]},getPixelBoundMargins:function(e){var t=r._getBlockSize(o.block()),n=r.getPixelBound(e);return{top:n.topLeft[1],right:d,bottom:t.height-n.bottomRight[1],left:n.topLeft[0]}},getLonLatBound:function(t){if(e.isServer){var n={},s=e.requireComponent("regionManager"),l=s.getRegion(),c=e.requireComponent("wkt");if(l&&l.bounds&&c){var u=c.parsePolygon(l.bounds);n=a.reduce(a.flatten(u),function(e,t){return a.keys(e).length?(e.left=Math.min(t.lon,e.left),e.right=Math.max(t.lon,e.right),e.top=Math.max(t.lat,e.top),e.bottom=Math.min(t.lat,e.bottom)):(e.left=e.right=t.lon,e.top=e.bottom=t.lat),e},{})}else{var d=e.requireComponent("appState"),h=d.get("mapcenter");h.lat=parseFloat(h.lat),h.lon=parseFloat(h.lon),n={left:h.lon-1,right:h.lon+1,top:h.lat+1,bottom:h.lat-1}}return{topLeft:i(n.left,n.top),bottomRight:i(n.right,n.bottom)}}var p=o["interface"].convertPixelToLonLat,f=r.getPixelBound(t);return{topLeft:p(f.topLeft),bottomRight:p(f.bottomRight)}},getPixelCenter:function(){var e=r.getPixelBound();return{x:Math.round(e.topLeft[0]/2+e.bottomRight[0]/2),y:Math.round(e.topLeft[1]/2+e.bottomRight[1]/2)}},getLatLngBound:function(e){var t=r.getLonLatBound(e);return L.latLngBounds(t.topLeft.toLatLng(),t.bottomRight.toLatLng())},getLatLngCenter:function(){return r.getLatLngBound().getCenter()},contains:function(e,t){return t||(t=o["interface"].getCenter()),t.equals(c.center)||(c={center:t,innerBound:r.getLatLngBound(!0)}),e&&"lat"in e&&(e=L.latLng(e)),(c.innerBound||r.getLatLngBound(!0)).contains(e)},getWidgetSizes:function(){return a.compact(a.map(s,n))},isPixelAreaVisible:function(e,t,n){if(!e)throw Error("No area given");a.isObject(t)&&(n=t,t=!1),n=n||{};var i=n.bound||r.getPixelBound(t),o=i.topLeft[0]<=e.left&&i.bottomRight[0]>=e.left+e.width&&i.topLeft[1]<=e.top&&i.bottomRight[1]>=e.top+e.height;return o&&!r._intersectsWithWidgets(e,n.widgetSizes)}}}},{lodash:"lodash"}],"/components/weatherApi/weatherApi.js":[function(e,t,n){var a=e("lodash"),i=req("lib/eventify"),o=req("lib/request2"),r=req("helpers/requestDispatcher");t.exports=function(e){var t=i({}),n=r(t,function(t,n,i){function r(e){i(null,e.body)}function s(e){i(a.get(e,"response.error",e.message),null)}var l,c;switch(t){case"getForecast":l=e.config["weather.url"]+"/forecast",c={region_id:n.regionId,fields:"now"};break;case"getWeatherNow":l=e.config["weather.url"]+"/now",c={region_ids:n.regionId}}return o("get",l).timeout(e.config[e.isClient?"weather.clientTimeout":"weather.timeout"]).query(c).then(r)["catch"](s)}),s=req("helpers/requestWrappers/cache")(e);n=s.wrap(n);var l=req("helpers/requestWrappers/stash")(e);return n=l.wrap(n),a.extend(t,{doRequest:n}),t},t.exports.emitAbortablesBy="request"},{lodash:"lodash"}],"/components/whatsNewApi/whatsNewApi.js":[function(e,t,n){"use strict";var a=e("bluebird"),i=req("lib/request2"),o=req("lib/whatsNewLoader"),r=e("lodash");t.exports=function(e,t,n){function s(e){var t=r.reduce(e,function(e,t,n){return e[n]=r.reduce(t,function(e,t,n){return e[n]=t.length,e},{}),e},{});return t.formatVersion="1.0",n.setItem("seenWhatsNewItems",JSON.stringify(t)),t}function l(){var e=void 0;try{e=JSON.parse(n.getItem("seenWhatsNewItems"))||{}}catch(t){e={}}return"1.0"!=e.formatVersion?s(e):e}function c(){var e=t.getRegion(),n=l();return{seenRegionNewsCount:r.get(n,[e.country_code,e.code],0),seenGeneralNewsCount:r.get(n,[e.country_code,"general"],0)}}function u(e){var a=t.getRegion(),i=l();i[a.country_code]||(i[a.country_code]={}),i[a.country_code][a.code]=e.totalRegionNewsCount,i[a.country_code].general=e.totalGeneralNewsCount,n.setItem("seenWhatsNewItems",JSON.stringify(i))}var d={};return{loadNewsList:function(n){var s=r.get(n,"pageNumber",1),l=r.get(n,"limit",10),c=t.getRegion(),u={countryCode:c.country_code,language:c.currentLanguage,regionCode:c.code,pageNumber:s,limit:l};if(e.isServer){var h=o(u);return r.isEmpty(h.newsItems)?a.resolve(null):a.resolve(h)}var p="whatsNew_"+c.country_code+"_"+c.code+"_"+s,f=d[p];return f?a.resolve(f):i("get","/whatsNewList/").query(u).then(function(e){var t=e.body;return d[p]=t,t})["catch"](function(e){return null})},storeSeenNewsInLocalStorage:u,getNewNewsItemsCount:function(e){if(!e)return 0;var t=c(),n=r.get(t,"seenGeneralNewsCount",0),a=r.get(t,"seenRegionNewsCount",0),i=r.get(e,"totalGeneralNewsCount",0),o=r.get(e,"totalRegionNewsCount",0),s=i-n,l=o-a;return 0>s&&(s=0,u(e)),0>l&&(l=0,u(e)),s+l}}},t.exports._args=["app","$regionManager","$localStorage"]},{bluebird:384,lodash:"lodash"}],"/components/wkt/wkt.js":[function(e,t,n){var a=e("lodash");t.exports=function(e){var t=req("lib/wkt"),n=a.partial(t,e.sendError);return n()}},{lodash:"lodash"}],"/dist/build/private/revision.js":[function(e,t,n){t.exports="1606171532843e51"},{}],"/dist/build/private/symbols.js":[function(e,t,n){t.exports=[{icon:"action-entrance",w:24,h:24},{icon:"action-favorite",w:24,h:24},{icon:"action-floor",w:16,h:28},{icon:"action-path-from",w:24,h:24},{icon:"action-path-to-rus",w:24,h:24},{icon:"action-path-to",w:24,h:24},{icon:"action-path",w:24,h:24},{icon:"action-phone",w:10,h:24},{icon:"action-website",w:24,h:24},{icon:"advFirmCard_crown",w:20,h:18},{icon:"advFirmCard_download",w:20,h:21},{icon:"advFirmCard_left",w:8,h:16},{icon:"advFirmCard_pause",w:13,h:23},{icon:"advFirmCard_right",w:8,h:16},{icon:"advFirmCard_volume-off",w:20,h:18},{icon:"advFirmCard_volume-on",w:19,h:18},{icon:"awardBadge_flag",w:36,h:36},{icon:"award__like",w:35,h:30},{icon:"award__megafon",w:161,h:29},{icon:"award__uber",w:65,h:9},{icon:"award__vote",w:32,h:28},{icon:"brokenGlasses",w:96,h:34},{icon:"card_connector",w:8,h:25},{icon:"card_discount",w:48,h:20},{icon:"card_fav",w:20,h:18},{icon:"card_meta-atm",w:24,h:16},{icon:"card_meta-cafe",w:15,h:28},{icon:"card_meta-hotel",w:26,h:18},{icon:"card_meta-pharmacy",w:18,h:18},{icon:"card_search",w:16,h:16},{icon:"card_shape",w:12,h:5},{icon:"card_toggle",w:20,h:20},{icon:"cityQuora_icon",w:64,h:64},{icon:"cityQuora_logo",w:64,h:64},{icon:"colorable_apple",w:16,h:20},{icon:"colorable_windows",w:16,h:16},{icon:"contact_fax",w:12,h:12},{icon:"contact_phone",w:5,h:12},{icon:"copyright_2gis_user",w:16,h:16},{icon:"dashboard_2gis-for-chrome",w:174,h:21},{icon:"dashboard_2gis-for-firefox",w:165,h:21},{icon:"dashboard_2gis-for-opera",w:150,h:25},{icon:"dashboard_2gis-for-safari",w:149,h:21},{icon:"dashboard__adBlock",w:90,h:66},{icon:"discountCard_facebook",w:12,h:24},{icon:"discountCard_odnoklassniki",w:14,h:24},{icon:"discountCard_twitter",w:24,h:20},{icon:"discountCard_vkontakte",w:18,h:22},{icon:"discountsCard_minimize",w:12,h:7},{icon:"discountsCard_share",w:11,h:12},{icon:"discountsCard_time",w:12,h:12},{icon:"download_mobile",w:17,h:17},{icon:"eventCard_building",w:31,h:31},{icon:"eventCard_pointer",w:28,h:28},{icon:"event_citydayIcon",w:24,h:23},{icon:"extraLayers_ginzaProject",w:45,h:46},{icon:"extras_award",w:13,h:14},{icon:"extras_floors",w:20,h:19},{icon:"extras_gifts",w:16,h:15},{icon:"extras_summer",w:20,h:20},{icon:"fav_callout",w:16,h:14},{icon:"fav_default",w:10,h:9},{icon:"favoritesWidget_cancel",w:10,h:10},{icon:"favoritesWidget_ok",w:10,h:10},{icon:"favorites_add",w:16,h:13},{icon:"favorites_addCover",w:16,h:16},{icon:"favorites_auth",w:32,h:48},{icon:"favorites_delete",w:16,h:16},{icon:"favorites_edit",w:16,h:16},{icon:"favorites_empty",w:120,h:120},{icon:"favorites_follow",w:16,h:14},{icon:"favorites_gallery",w:24,h:24},{icon:"favorites_heart",w:16,h:16},{icon:"favorites_lock",w:12,h:16},{icon:"favorites_mediaMode",w:14,h:10},{icon:"favorites_note",w:16,h:16},{icon:"favorites_overflow",w:32,h:50},{icon:"favorites_pin",w:9,h:12},{icon:"favorites_restore",w:16,h:16},{icon:"favorites_share",w:16,h:16},{icon:"favorites_simpleMode",w:14,h:10},{icon:"favorites_trash",w:24,h:24},{icon:"favorites_ufo",w:60,h:60},{icon:"favorites_upload",w:24,h:24},{icon:"floors_citySearch",w:20,h:20},{icon:"general-photos-arrow-next",w:22,h:34},{icon:"general-photos-arrow-prev",w:22,h:34},{icon:"general-photos-close",w:16,h:16},{icon:"general-photos-trash-can",w:14,h:18},{icon:"general-photos-warning",w:15,h:13},{icon:"lk_entry_point",w:48,h:45},{icon:"logo_s_abakan",w:20,h:20},{icon:"logo_s_ae",w:20,h:20},{icon:"logo_s_almaty",w:20,h:20},{icon:"logo_s_almetevsk",w:20,h:20},{icon:"logo_s_arkhangelsk",w:20,h:20},{icon:"logo_s_armawir",w:20,h:20},{icon:"logo_s_astana",w:20,h:20},{icon:"logo_s_astrakhan",w:20,h:20},{icon:"logo_s_barnaul",w:20,h:20},{icon:"logo_s_belgorod",w:20,h:20},{icon:"logo_s_bishkek",w:20,h:20},{icon:"logo_s_biysk",w:20,h:20},{icon:"logo_s_blagoveshensk",w:20,h:20},{icon:"logo_s_bratsk",w:20,h:20},{icon:"logo_s_bryansk",w:20,h:20},{icon:"logo_s_cheboksary",w:20,h:20},{icon:"logo_s_chelyabinsk",w:20,h:20},{icon:"logo_s_chita",w:20,h:20},{icon:"logo_s_cl",w:20,h:20},{icon:"logo_s_cy",w:20,h:20},{icon:"logo_s_cz",w:20,h:20},{icon:"logo_s_default",w:20,h:20},{icon:"logo_s_dnepropetrovsk",w:20,h:20},{icon:"logo_s_donetsk",w:20,h:20},{icon:"logo_s_dubai",w:20,h:20},{icon:"logo_s_ekaterinburg",w:20,h:20},{icon:"logo_s_gornoaltaysk",w:20,h:20},{icon:"logo_s_irkutsk",w:20,h:20},{icon:"logo_s_it",w:20,h:20},{icon:"logo_s_ivanovo",w:20,h:20},{icon:"logo_s_izhevsk",w:20,h:20},{icon:"logo_s_k_uralskiy",w:20,h:20},{icon:"logo_s_kaliningrad",w:20,h:20},{icon:"logo_s_kaluga",w:20,h:20},{icon:"logo_s_karaganda",w:20,h:20},{icon:"logo_s_kazan",w:20,h:20},{icon:"logo_s_kemerovo",w:20,h:20},{icon:"logo_s_kg",w:20,h:20},{icon:"logo_s_khabarovsk",w:20,h:20},{icon:"logo_s_kharkov",w:20,h:20},{icon:"logo_s_kiev",w:20,h:20},{icon:"logo_s_kirov",w:20,h:20},{icon:"logo_s_komsomolsk",w:20,h:20},{icon:"logo_s_kostroma",w:20,h:20},{icon:"logo_s_krasnodar",w:20,h:20},{icon:"logo_s_krasnoyarsk",w:20,h:20},{icon:"logo_s_kurgan",w:20,h:20},{icon:"logo_s_kursk",w:20,h:20},{icon:"logo_s_kz",w:20,h:20},{icon:"logo_s_lenkuz",w:20,h:20},{icon:"logo_s_limassol",w:20,h:20},{icon:"logo_s_lipetsk",w:20,h:20},{icon:"logo_s_magnitogorsk",w:20,h:20},{icon:"logo_s_makhachkala",w:20,h:20},{icon:"logo_s_miass",w:20,h:20},{icon:"logo_s_minvody",w:20,h:20},{icon:"logo_s_moscow",w:20,h:20},{icon:"logo_s_murmansk",w:20,h:20},{icon:"logo_s_n_novgorod",w:20,h:20},{icon:"logo_s_nabchelny",w:20,h:20},{icon:"logo_s_nahodka",w:20,h:20},{icon:"logo_s_nicosia",w:20,h:20},{icon:"logo_s_nizhnevartovsk",w:20,h:20},{icon:"logo_s_norilsk",w:20,h:20},{icon:"logo_s_novokuznetsk",w:20,h:20},{icon:"logo_s_novorossiysk",w:20,h:20},{icon:"logo_s_novosibirsk",w:20,h:20},{icon:"logo_s_noyabrsk",w:20,h:20},{icon:"logo_s_ntagil",w:20,h:20},{icon:"logo_s_odessa",w:20,h:20},{icon:"logo_s_omsk",w:20,h:20},{icon:"logo_s_orel",w:20,h:20},{icon:"logo_s_orenburg",w:20,h:20},{icon:"logo_s_p_kamchatskiy",w:20,h:20},{icon:"logo_s_padova",w:20,h:20},{icon:"logo_s_pavlodar",w:20,h:20},{icon:"logo_s_penza",w:20,h:20},{icon:"logo_s_perm",w:20,h:20},{icon:"logo_s_petrozavodsk",w:20,h:20},{icon:"logo_s_praha",w:20,h:20},{icon:"logo_s_pskov",w:20,h:20},{icon:"logo_s_rostov",w:20,h:20},{icon:"logo_s_ru",w:20,h:20},{icon:"logo_s_ryazan",w:20,h:20},{icon:"logo_s_samara",w:20,h:20},{icon:"logo_s_santiago",w:20,h:20},{icon:"logo_s_saransk",w:20,h:20},{icon:"logo_s_saratov",w:20,h:20},{icon:"logo_s_smolensk",w:20,h:20},{icon:"logo_s_sochi",w:20,h:20},{icon:"logo_s_spb",w:20,h:20},{icon:"logo_s_staroskol",w:20,h:20},{icon:"logo_s_stavropol",w:20,h:20},{icon:"logo_s_sterlitamak",w:20,h:20},{icon:"logo_s_surgut",w:20,h:20},{icon:"logo_s_syktyvkar",w:20,h:20},{icon:"logo_s_tambov",w:20,h:20},{icon:"logo_s_tobolsk",w:20,h:20},{icon:"logo_s_togliatti",w:20,h:20},{icon:"logo_s_tomsk",w:20,h:20},{icon:"logo_s_tula",w:20,h:20},{icon:"logo_s_tver",w:20,h:20},{icon:"logo_s_tyumen",w:20,h:20},{icon:"logo_s_ua",w:20,h:20},{icon:"logo_s_ufa",w:20,h:20},{icon:"logo_s_ulanude",w:20,h:20},{icon:"logo_s_ulyanovsk",w:20,h:20},{icon:"logo_s_ussuriysk",w:20,h:20},{icon:"logo_s_ustkam",w:20,h:20},{icon:"logo_s_v_novgorod",w:20,h:20},{icon:"logo_s_vladimir",w:20,h:20},{icon:"logo_s_vladivostok",w:20,h:20},{icon:"logo_s_volgograd",w:20,h:20},{icon:"logo_s_vologda",w:20,h:20},{icon:"logo_s_voronezh",w:20,h:20},{icon:"logo_s_yakutsk",w:20,h:20},{icon:"logo_s_yaroslavl",w:20,h:20},{icon:"logo_s_yoshkarola",w:20,h:20},{icon:"logo_s_yuzhnosakhalinsk",w:20,h:20},{icon:"media-photos-arrow-next",w:24,h:24},{icon:"media-photos-arrow-prev",w:24,h:24},{icon:"media-photos-close",w:16,h:16},{icon:"media-photos-flamp-icon",w:14,h:20},{icon:"media-photos-warning",w:22,h:19},{icon:"mediaActions_birthday",w:25,h:30},{icon:"mediaActions_gift",w:28,h:29},{icon:"mediaActions_lunchtime",w:43,h:28},{icon:"mediaActions_students",w:42,h:26},{icon:"mediaActions_takeaway",w:23,h:38},{icon:"mediaActions_wedding",w:38,h:33},{icon:"mediaBack",w:14,h:14},{icon:"mediaBlocks_actions",w:32,h:32},{icon:"mediaBlocks_address",w:15,h:24},{icon:"mediaBlocks_advInfo",w:14,h:14},{icon:"mediaBlocks_attributes",w:32,h:32},{icon:"mediaBlocks_contacts",w:32,h:32},{icon:"mediaBlocks_owner",w:14,h:14},{icon:"mediaBlocks_reviews",w:11,h:15},{icon:"mediaBlocks_schedule",w:32,h:32},{icon:"mediaBlocks_tips",w:14,h:18},{icon:"mediaCardHeader_addPhoto",w:18,h:16},{icon:"mediaCardHeader_defaultLogo",w:16,h:16},{icon:"mediaCardHeader_entrance",w:16,h:18},{icon:"mediaCardHeader_link",w:10,h:10},{icon:"mediaCardHeader_routeA",w:18,h:18},{icon:"mediaCardHeader_routeB",w:18,h:18},{icon:"mediaCard_arrow-next",w:24,h:24},{icon:"mediaCard_arrow-prev",w:24,h:24},{icon:"mediaCard_crown",w:16,h:16},{icon:"mediaDiscounts_birthday",w:54,h:64},{icon:"mediaDiscounts_gift",w:52,h:54},{icon:"mediaDiscounts_lunchtime",w:89,h:57},{icon:"mediaDiscounts_students",w:91,h:54},{icon:"mediaDiscounts_takeaway",w:38,h:62},{icon:"mediaDiscounts_wedding",w:67,h:58},{icon:"mediaMaximize",w:8,h:14},{icon:"mediaMiniCard_crown",w:14,h:14},{icon:"mediaSchedule_closed",w:10,h:10},{icon:"mediaSchedule_cup",w:17,h:19},{icon:"mediaSchedule_dayOff",w:10,h:10},{icon:"mediaSocial_facebook",w:9,h:18},{icon:"mediaSocial_instagram",w:20,h:20},{icon:"mediaSocial_twitter",w:19,h:15},{icon:"mediaSocial_vkontakte",w:21,h:12},{icon:"media_arrow-left-big",w:22,h:37},{icon:"media_arrow-left-small",w:16,h:24},{icon:"media_arrow-right-big",w:22,h:37},{icon:"media_arrow-right-small",w:16,h:24},{icon:"media_blockIcon-reviews",w:11,h:15},{icon:"media_crown-medium",w:32,h:32},{icon:"media_filters-24x7",w:20,h:20},{icon:"media_filters-clear",w:10,h:10},{icon:"media_filters-close",w:10,h:10},{icon:"media_filters-minified",w:20,h:15},{icon:"media_filters-opened",w:18,h:18},{icon:"media_filters-rating",w:27,h:24},{icon:"media_filters-search",w:14,h:14},{icon:"media_flamp",w:12,h:15},{icon:"media_like-active",w:18,h:15},{icon:"media_like-hover",w:22,h:19},{icon:"media_like",w:22,h:19},{icon:"media_nophoto-bar",w:81,h:66},{icon:"media_nophoto-coffee",w:60,h:71},{icon:"media_nophoto-restaurant",w:96,h:58},{icon:"media_presets-breakfast",w:17,h:19},{icon:"media_presets-children",w:20,h:15},{icon:"media_presets-company",w:22,h:18},{icon:"media_presets-date",w:23,h:13},{icon:"media_presets-finnish",w:20,h:20},{icon:"media_presets-hammam",w:21,h:23},{icon:"media_presets-japanese",w:19,h:15},{icon:"media_presets-lunch",w:23,h:12},{icon:"media_presets-other-active",w:44,h:44},{icon:"media_presets-other",w:44,h:44},{icon:"media_presets-party",w:20,h:26},{icon:"media_presets-pool",w:24,h:20},{icon:"media_presets-russian",w:14,h:22},{icon:"media_presets_group",w:19,h:20},{icon:"media_presets_withSauna",w:20,h:20},{icon:"media_providersPin",w:20,h:32},{icon:"media_review-comment",w:22,h:12},{icon:"media_review-like",w:18,h:16},{icon:"media_thermometer-hot",w:9,h:16},{icon:"media_thermometer-hotter",w:9,h:16},{icon:"media_thermometer-hottest",w:9,h:16},{icon:"media_working-hours-close-soon",w:14,h:14},{icon:"media_working-hours-closed",w:14,h:14},{icon:"media_working-hours-opened",w:14,h:14},{icon:"metaRubrics_accessories",w:28,h:28},{icon:"metaRubrics_all",w:28,h:28},{icon:"metaRubrics_beauty",w:28,h:28},{icon:"metaRubrics_children",w:28,h:28},{icon:"metaRubrics_clothing",w:28,h:28},{icon:"metaRubrics_decor",w:28,h:28},{icon:"metaRubrics_doors",w:28,h:28},{icon:"metaRubrics_entertainment",w:28,h:28},{icon:"metaRubrics_for_home",w:28,h:28},{icon:"metaRubrics_furniture",w:28,h:28},{icon:"metaRubrics_repair",w:28,h:28},{icon:"metaRubrics_shoes",w:28,h:28},{icon:"metaRubrics_sport",w:28,h:28},{icon:"metaRubrics_technique",w:28,h:28},{icon:"metaRubrics_to_eat",w:28,h:28},{icon:"metaRubrics_windows",w:28,h:28},{icon:"metro-coach",w:27,h:12},{icon:"metro-coach_first",w:32,h:12},{icon:"newYearGifts_noResults",w:161,h:43},{icon:"newYearGifts_title",w:278,h:69},{icon:"patchwork_sadSmile",w:48,h:48},{icon:"photosUploaderTooltip_camera",w:38,h:34},{icon:"photosUploader_addPhoto",w:24,h:24},{icon:"photosUploader_smallControl",w:16,h:16},{icon:"photos_arrow-left",w:24,h:19},{icon:"photos_arrow-right",w:24,h:19},{icon:"photos_copyright_2gis",w:14,h:14},{icon:"photos_copyright_facebook",w:8,h:16},{icon:"photos_copyright_flamp",w:12,h:15},{icon:"photos_copyright_foursquare",w:16,h:21},{icon:"photos_copyright_owner",w:13,h:12},{icon:"photos_copyright_panoramio",w:59,h:12},{icon:"photos_copyright_twitter",w:16,h:13},{icon:"photos_copyright_vk",w:17,h:10},{icon:"photos_copyright_vsedoma",w:18,h:17},{icon:"photos_crown",w:16,h:16},{icon:"photos_feedback",w:14,h:12},{icon:"pin",w:9,h:12},{icon:"products-arrow",w:6,h:14},{icon:"products-crown",w:12,h:11},{icon:"products_404",w:80,h:25},{icon:"products_back",w:14,h:14},{icon:"promoEvent_award",w:73,h:74},{icon:"promoEvent_balloons",w:64,h:64},{icon:"promoEvent_megafon",w:103,h:19},{icon:"promoEvent_present",w:82,h:54},{icon:"promoEvent_salut",w:32,h:31},{icon:"promoEvent_summer_ru",w:143,h:24},{icon:"promoMobiles_icon",w:84,h:84},{icon:"promo_artNight",w:90,h:60},{icon:"promo_intrestingIvanovo",w:88,h:55},{icon:"promo_workout",w:91,h:63},{icon:"rating_dislike",w:12,h:12},{icon:"rating_like",w:12,h:12},{icon:"rating_star-small-customizable",w:69,h:12},{icon:"results-firms",w:16,h:14},{icon:"results-geo",w:16,h:16},{icon:"results-transport",w:15,h:16},{icon:"reviewCardPartner_4square",w:12,h:16},{icon:"reviewCardPartner_flag",w:12,h:16},{icon:"reviewCardRating_recommend",w:16,h:16},{icon:"roundButtons-cancel",w:10,h:10},{icon:"roundButtons-ok",w:10,h:8},{icon:"routeNotFound",w:96,h:96},{icon:"schedule_clock",w:12,h:12},{icon:"searchBar_filials",w:15,h:16},{icon:"searchBar_maximize",w:8,h:14},{icon:"searchBar_mediaAddress",w:9,h:13},{icon:"searchBar_mediaBolt",w:10,h:18},{icon:"searchBar_mediaChecked",w:16,h:16},{icon:"searchBar_mediaClose",w:14,h:14},{icon:"searchBar_mediaHideActive",w:11,h:18},{icon:"searchBar_mediaLogo",w:18,h:18},{icon:"searchBar_mediaMinimize",w:14,h:14},{icon:"searchBar_mediaPin",w:11,h:16},{icon:"searchIcon_thin",w:14,h:14},{icon:"select_arrow",w:16,h:8},{icon:"summer2016-crystal",w:33,h:36},{icon:"summer2016-dolphin",w:60,h:40},{icon:"summer2016-leaf",w:34,h:34},{icon:"summer2016-mirror",w:40,h:40},{icon:"summer2016-spa",w:42,h:37},{icon:"summer2016-star",w:42,h:40},{icon:"summer2016-ticket",w:44,h:44},{icon:"summer_mail",w:18,h:13},{icon:"toggle",w:20,h:20},{icon:"tooltip_tail",w:14,h:16},{icon:"tyres-cheap",w:22,h:22},{icon:"tyres-popular",w:22,h:22},{icon:"tyres-runflat",w:20,h:18},{icon:"tyres-summer",w:19,h:20},{icon:"tyres-winter-studded",w:20,h:17},{icon:"tyres-winter-studdless",w:20,h:19},{icon:"tyres_winter-studded",w:20,h:17},{icon:"ui_arrow-right",w:12,h:12},{icon:"ui_close-phone",w:17,h:17},{icon:"ui_close",w:16,h:16},{icon:"ui_control-back",w:13,h:24},{icon:"ui_control-go-to-card",w:22,h:15},{icon:"ui_control-go-to-map",w:22,h:21},{icon:"ui_expand-off",w:12,h:7},{icon:"ui_minimize",w:16,h:16},{icon:"ui_times",w:10,h:10},{icon:"victory_clock",w:11,h:11},{icon:"victory_collapse",w:12,h:7},{icon:"victory_extras",w:22,h:20},{icon:"victory_firework",w:69,h:60},{icon:"victory_headline",w:196,h:36},{icon:"victory_headlineBig",w:352,h:72},{icon:"victory_honor",w:16,h:35},{icon:"victory_monuments",w:18,h:34},{icon:"victory_parade",w:66,h:60},{icon:"victory_photos",w:24,h:26},{icon:"victory_promoEventIcon",w:73,h:69},{icon:"victory_schedule",w:21,h:24},{icon:"victory_shareFb",w:9,h:15},{icon:"victory_shareOk",w:10,h:17},{icon:"victory_shareTw",w:15,h:13},{icon:"victory_shareVk",w:12,h:15},{icon:"victory_smallShareFb",w:7,h:12},{icon:"victory_smallShareOk",w:8,h:12},{icon:"victory_smallShareTw",w:12,h:10},{icon:"victory_smallShareVk",w:9,h:10},{icon:"victory_tooltipIcon",w:30,h:25},{icon:"victory_tooltipTitle",w:195,h:29},{icon:"victory_transport",w:24,h:25},{icon:"weather_blizzard",w:25,h:20},{icon:"weather_clear-day",w:20,h:20},{icon:"weather_clear-night",w:20,h:20},{icon:"weather_cloudy-day",w:32,h:20},{icon:"weather_cloudy-night",w:32,h:20},{icon:"weather_foggy",w:25,h:20},{icon:"weather_heavy-rain",w:25,h:20},{icon:"weather_heavy-snow",w:25,h:20},{icon:"weather_light-rain",w:25,h:20},{icon:"weather_light-snow",w:25,h:20},{icon:"weather_rain",w:25,h:20},{icon:"weather_snow",w:25,h:20},{icon:"weather_storm",w:25,h:20},{icon:"weather_very-cloudy",w:32,h:20},{icon:"weather_wind",w:20,h:20},{icon:"whatsNew_like",w:12,h:12},{icon:"whatsNew_share",w:11,h:12},{icon:"whatsNew_socials_facebook",w:12,h:24},{icon:"whatsNew_socials_instagram",w:22,h:22},{icon:"whatsNew_socials_odnoklassniki",w:14,h:24},{icon:"whatsNew_socials_telegram",w:24,h:21},{icon:"whatsNew_socials_twitter",w:24,h:20},{icon:"whatsNew_socials_vkontakte",w:16,h:20},{icon:"wizard-defaultCity",w:44,h:44},{icon:"wizard-place",w:44,h:44}]},{}],"/env/client.js":[function(e,t,n){var a=e("slot/env");t.exports=function(){var e=window.dg.config,t={};try{t=data&&data.cfg||{}}catch(n){}a.setRootPath("/"),a.setBuildPath("/dist/build/"),a.mergeConfig([e,t]);var i={};try{i=data&&data.cfgJsapi||{}}catch(n){}i.protocol=window.location.protocol,DG.extend(DG.config,i)}},{"slot/env":"slot/env"}],"/helpers/actions.js":[function(e,t,n){"use strict";n.getPathAction=function(e,t,n){return{type:"path",text:n.text,disabled:e,buttons:[{type:"path-from",disabled:e,icon:"action-path-from",onClick:t.from},{type:"path-to",disabled:e,icon:n.pathToIcon,onClick:t.to}]}},n.getPathActionLocaleParams=function(e){return{text:e._t("Путь отсюда / сюда"),pathToIcon:-1!=["ru","uk"].indexOf(e.getLang())?"action-path-to-rus":"action-path-to"}}},{}],"/helpers/analytics.js":[function(e,t,n){function a(){return i.getTimeStamp()}var i=req("helpers/time"),o=e("url"),r=e("lodash");t.exports.ga={DIMENSION:{Authorization:"dimension1",Rubric:"dimension2",Zoom:"dimension4",Project:"dimension5",Payment:"dimension6",DotMarkers:"dimension7"}},t.exports.bss={paramsId:{enter:1,pick:2,rubric:3,dym:4,service:5,building:6,dashboard_metarubric:7,filial:8,allorganisation:9,link:10,provider:11,poi:12,dashboard_promo:13,weather:14,promo:15,media:16,favorite:17,filial_id:18,map:19,object_suggest:20,pick_history:21,ads_search:22,infrastructure:23,dashboard_floors:25,news:28,dym_404:29,back_in_browser:30,special:31},BC:{FIRM_OPEN:1,FIRM_LINK:2,PHONE:3,EMAIL:4,ADDRESS:5,MESSENGER:6,MESSENGER_SKYPE:7,PLUS_ONE:8,REVIEWS:13,BOOKLET:18,PHOTO_GALLERY:19,SOCIAL:20,ADS:21,OWNER_INFO:22,ROUTE:23,ENTRANCE:24,FAVORITE:25,TIME_TABLE:26,FILIALS:27,ALL_CONTACTS:28,DISCOUNTS:29,DISCOUNT_TO_SMS:31,PARKING_FIRM:32,NEARSTOP_FIRM:33,LANDMARK_FIRM:34,SHOW_IN_FLOORS:35,CLICK_EMAIL_TO_FIRM:36,SEND_EMAIL_TO_FIRM:37},PLACES:{CATALOG:1,MAP:2},ILL:{ADS_ON_MAP:1,PRODUCT:2},getTime:a},t.exports.inspectlet={mapWebvizorTags:{226:"DentistClncks",661:"DiagnosticCntr",338:"ExpressMail",269:"Hotels",417:"LongDstncTrnsprt",4521:"MultiMedCntrs",533:"PassengerLgstcs",423:"RailwayLgstcs",946:"Sauna",1156:"Spec.PurposeTrnsprt",721:"TruckLgstcs",427:"Tyres",205:"Vet"}},n.searchHashToBaseHash=function(e){return e.substr(0,4)+e.substr(-12,12)},n.addBssParamsToLink=function(e,t){if(!e)return null;var n=r.pick(t,"place","sid","user","ill");n.ts=a(),n=r.compact(r.map(n,function(e,t){return e?[t,e].join("="):null}));var i=r.omit(o.parse(e),"href","path");return i.pathname?(i.pathname=i.pathname.replace(/^\/1\.1\//,"/1.2/"),i.pathname+="/"+n.join("&"),o.format(i)):e},n.changeTimeParam=function(e){var t=e.attr("href");if(t){var n=a();t=t.replace(/ts=\d+/,"ts="+n),e.attr("href",t)}}},{lodash:"lodash",url:419}],"/helpers/blocks/btn/btn.js":[function(e,t,n){t.exports=function(e,t){e&&e.fn&&(t=e,e=t.fn(this));var n,a=t.hash||{};return a["class"]="btn "+(a["class"]||""),"tag"in a&&a.tag?(n=a.tag,delete a.tag):n=a.href?"a":"div","disabled"in a&&(a.disabled?a.disabled="disabled":delete a.disabled),"input"==n&&(a.value=e,e=""),{text:e,attrs:a,tagName:n}}},{}],"/helpers/blocks/checkbox/checkbox.js":[function(e,t,n){t.exports=function(e){return e}},{}],"/helpers/blocks/customRating/customRating.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t){a.isUndefined(e)||(e=""+ +(0>e||e>5?0:20*e));var n=[],i="#222",o=[],r=5;a.forOwn(t.hash,function(e,t){switch(t){case"color":i=e;break;case"tagName":break;case"class":o.push(e);break;default:n.push({name:t,value:e})}});var s={value:e,ratingValue:e/100*r,tagName:t.hash.tagName||"div",attrs:n,color:i,classNames:o};return s}},{lodash:"lodash"}],"/helpers/blocks/fix/fix.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t){var n=[],i="div",o=[];t||(t=e,e=t.fn&&t.fn(this)),a.forOwn(t.hash,function(e,t){"class"!=t&&"tag"!=t?n.push({name:t,value:e}):"class"==t?o.push(e):"tag"==t&&(i=e)});var r={text:e,classNames:o,attrs:n,tag:i};return r}},{lodash:"lodash"}],"/helpers/blocks/icon/icon.js":[function(e,t,n){var a=e("slot/env"),i=e("./viewModel"),o=a.requirePrivate("symbols.js");t.exports=function(e,t){return i(e,t,o)}},{"./viewModel":"/helpers/blocks/icon/viewModel.js","slot/env":"slot/env"}],"/helpers/blocks/icon/viewModel.js":[function(e,t,n){function a(e,t){return o.findWhere(t,{icon:e})}function i(e){var t="";switch(typeof e){case"string":isNaN(parseInt(e,10))&&(t+=" "+e);break;case"object":o.forOwn(e,function(e,n){e||(e="");var a=e?"_"+n:"";e=e.length?"_"+e:"",t+=(a?" ":"")+a+e})}return t}var o=e("lodash");t.exports=function(e,t,n){if(!o.isString(e))return null;var r,s=t.hash||{};"fallback"in s&&(r=s.fallback,delete s.fallback);var l=a(e,n)||r&&a(r,n);return l||(req("lib/sendError")("Can't find icon \""+e+'"'),l={w:0,h:0}),s["class"]="icon"+("class"in s?" "+s["class"]:""),"mods"in s&&(s["class"]+=i(s.mods),delete s.mods),{icon:l.icon,attrs:s,w:l.w,h:l.h}}},{lodash:"lodash"}],"/helpers/blocks/link/docs/test/main.js":[function(e,t,n){$(function(){function e(){for(var e="",t=0;t<a.length;t++)e+='<li class="link-tools__listItem">'+a[t]+"</li>";$(".link-tools__list._fonts").append(e)}function t(){var e="";for(var t in i)i.hasOwnProperty(t)&&(e+='<li class="link-tools__listItem">'+t+"</li>");$(".link-tools__list._sizes").append(e)}function n(e,t,n,a){var i=e||"Helvetica";return'<div class="block"><a href class="link" style="font-size: '+t+"px; line-height: "+n+'px">'+i+" "+t+"px/"+n+'px.</a> <a href class="link" style="font-size: '+t+"px; line-height: "+n+'px">'+a+"</a></div>"}var a=["SuisseCond","Helvetica","Arial"],i={9:[12],12:[10,11,14,15,16,19,22],14:[15,16,24,34],15:[14,15],16:[15,16,24],19:[19],22:[22,24],23:[24],32:[30]};e(),t();var o,r=$(".content"),s=$("._backgroundSizeValue");$(".link-tools__list._fonts .link-tools__listItem").click(function(){var e="",t=$(".link-tools__testText").val(),a=$(this).text();$(".link-tools__listItem").removeClass("_current"),$(".link-tools__listItem").removeClass("_current"),$(this).addClass("_current"),r.css("font-family",a),r.empty();for(var l in i)if(i.hasOwnProperty(l))for(var c=i[l],u=0;u<c.length;u++)e+=n(a,l,c[u],t);r.html(e),o=$(".link");var d=o.css("background-position").split(" ");s.html(d[1])}),$(".link-tools__list._sizes .link-tools__listItem").click(function(){var e=$(this).text(),t=i[e],a=$(".link-tools__testText").val(),l="",c=$(".link-tools__list._fonts .link-tools__listItem._current").text();$(".link-tools__list._sizes .link-tools__listItem").removeClass("_current"),$(this).addClass("_current"),r.empty();for(var u=0;u<t.length;u++)l+=n(c,e,t[u],a);r.html(l),o=$(".link");var d=o.css("background-position").split(" ");s.html(d[1])}),$(".link-tools__listItemDown").click(function(){var e=o.css("background-position").split(" "),t=parseInt(e[1],10)-1;o.css("background-position","0 "+t+"%"),s.html(t+"%")}),$(".link-tools__listItemUp").click(function(){var e=o.css("background-position").split(" "),t=parseInt(e[1],10)+1;o.css("background-position","0 "+t+"%"),s.html(t+"%")}),$(".link-tools__testText").keyup(function(){o.html($(this).val())})})},{}],"/helpers/blocks/link/link.js":[function(e,t,n){t.exports=function(e,t){e&&e.fn&&(t=e,e=t.fn(this));var n,a=t.hash||{};return a["class"]="link "+("class"in a?a["class"]:""),"href"in a&&!a.href&&delete a.href,"tag"in a&&a.tag?(n=a.tag,delete a.tag):n=a.href?"a":"span",{text:e,attrs:a,tagName:n}}},{}],"/helpers/blocks/preloader/preloader.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t){var n=[],i=[];t||(t=e,e=t.fn?t.fn(this):""),a.forOwn(t.hash,function(e,t){"class"!=t?n.push({name:t,value:e}):i.push(e);
});var o={text:e,attrs:n,classNames:i};return o}},{lodash:"lodash"}],"/helpers/blocks/radiogroup/radiogroup.js":[function(e,t,n){t.exports=function(e){return e}},{}],"/helpers/blocks/rating/rating.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t){a.isUndefined(e)||(e=""+ +(0>e||e>5?0:20*e));var n=[],i=[],o=1,r=5;a.forOwn(t.hash,function(e,t){switch(t){case"style":case"tagName":break;case"class":i.push(e);break;default:n.push({name:t,value:e})}});var s={value:e,worstRating:o,ratingValue:e/100*r,bestRating:r,style:t.hash.style||"mediumYellow",tagName:t.hash.tagName||"div",attrs:n,classNames:i};return s}},{lodash:"lodash"}],"/helpers/blocks/track/track.js":[function(e,t,n){var a=e("lodash");t.exports=function(e){var t=[],n=[],i="div";a.forOwn(e.hash,function(e,a){"class"==a?n.push(e):"tag"==a?i=e:t.push({name:a,value:e})});var o={attrs:t,tagName:i,classNames:n.join(" ")};return o}},{lodash:"lodash"}],"/helpers/blocks/wrap/wrap.js":[function(e,t,n){t.exports=function(e,t){e&&e.fn&&(t=e,e=t.fn(this));var n,a=t.hash||{};return"tag"in a&&a.tag?(n=a.tag,delete a.tag):n="span",{text:e,attrs:a,tagName:n}}},{}],"/helpers/booklet.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/contact"),o=e("moment"),r={buildings:"novostrojjki",saunas:"bani_sauny"},s=["ru"],l={getRubrics:function(e,t){var n=t.i18n,i=[{code:"school",title:n._gg("Школы"),request:"общеобразовательная школа",radius:700,staticMarker:"nmprs"},{code:"school",title:n._gg("Школы"),request:"гимназия",radius:700,staticMarker:"nmprs"},{code:"school",title:n._gg("Школы"),request:"школа искусств",radius:700,staticMarker:"nmprs"},{code:"shop",title:n._gg("Магазины и ТЦ"),request:"магазин",radius:400,staticMarker:"nmdgs"},{code:"shop",title:n._gg("Магазины и ТЦ"),request:"торговый центр",radius:1e3,staticMarker:"nmdgs"},{code:"shop",title:n._gg("Магазины и ТЦ"),request:"супермаркет",radius:1e3,staticMarker:"nmdgs"},{code:"shop",title:n._gg("Магазины и ТЦ"),request:"гипермаркет",radius:1e3,staticMarker:"nmdgs"},{code:"bank",title:n._gg("Банки и банкоматы"),request:"банк",radius:700,staticMarker:"nmgns"},{code:"bank",title:n._gg("Банки и банкоматы"),request:"банкомат",radius:500,staticMarker:"nmgns"},{code:"kindergarten",title:n._gg("Детские сады"),request:"детский сад",radius:400,staticMarker:"nmors"},{code:"post",title:n._gg("Почтовые отделения"),request:"почтовое отделение",radius:1e3,staticMarker:"nmdbs"},{code:"sport",title:n._gg("Спортивные школы/фитнес"),request:"спортивная школа",radius:800,staticMarker:"nmyes"},{code:"sport",title:n._gg("Спортивные школы/фитнес"),request:"фитнес",radius:800,staticMarker:"nmyes"},{code:"sport",title:n._gg("Спортивные школы/фитнес"),request:"бассейн",radius:800,staticMarker:"nmyes"},{code:"sport",title:n._gg("Спортивные школы/фитнес"),request:"танцевальная школа",radius:800,staticMarker:"nmyes"},{code:"sport",title:n._gg("Спортивные школы/фитнес"),request:"спортивная секция",radius:800,staticMarker:"nmyes"},{code:"policlinic",title:n._gg("Поликлиники"),request:"поликлиники",radius:700,staticMarker:"nmpks"},{code:"pharmacy",title:n._gg("Аптеки"),request:"аптека",radius:350,staticMarker:"nmdrs"}];return e?a.map(e,function(e){return i[e]}):i},getAllRubrics:function(e){return l.getRubrics(null,e)},getFilialsPhone:function(e){var t,n=null;return a.find(e,function(e){return t=i.firstByType("phone",e.contact_groups),t&&t.text?void(n=t.text):void 0}),n},getBuildingsMenuItems:function(e){return[{section:"shortInfo",id:"about",title:e._gg("Об объекте")},{section:"apartmentsGroups",id:"apartments",title:e._gg("Квартиры в продаже")},{section:"apartmentLayouts",id:"layouts",title:e._gg("Цены и планировки")},{section:"infrastructure",id:"infrastructure",title:e._gg("Инфраструктура")},{section:"payments",id:"buy",title:e._gg("Способы покупки")},{section:"progress",id:"progress",title:e._gg("Ход стройки")},{section:"docs",id:"docs",title:e._gg("Документация")}]},isBookletRubric:function(e){return e&&e.alias?a.contains(r,(""+e.alias).toLowerCase()):!1},countryAvailable:function(e){return a.contains(s,e)},haveProvidersBooklets:function(e){return a.some(e||[],function(e){return e.external_content&&a.some(e.external_content,function(e){return"booklet"==e.type&&"net"==e.subtype})})},formatSourceData:function(e,t){var n,r,s,l=e.bookletData||{},c=l.last_edit_role;if(a.includes(["manager","scs"],c)){var u=i.firstByType("website",e.contact_groups);n=u?t._t("Данные взяты с"):t._t("Информация получена при звонке в компанию"),r=[u]}else"client"==c&&(n=t._t("Информация предоставлена компанией"));return l.updated_at&&(s=o(1e3*l.updated_at).format("L")),{text:n,links:r,date:s}}};t.exports=l},{lodash:"lodash",moment:"moment"}],"/helpers/camel.js":[function(e,t,n){t.exports=function(e){return"string"==typeof e?(""+e).replace(/([-_][a-zA-Z])/g,function(e){return e[1].toUpperCase()}):null},t.exports._args=["$1"]},{}],"/helpers/contact.js":[function(e,t,n){function a(e){if(!e||!e.text&&!e.value)return e;e.url||(e.url=e.value);var t=/^([^:\/]+:\/\/)?((?:[_\da-zа-яё-]+\.)+[\da-zа-яё-]+)/i.exec(e.text||e.value);if(!t)return e;var n=t[1]||"",a=t[2];return o.include(r,a)||(e.text=n+a),e}function i(e){return e.text||(e.text=e.value),e.text=e.text.replace(/https?:\/\//,""),e}var o=e("lodash"),r={vkontakte:"vk.com",twitter:"twitter.com",instagram:"instagram.com",facebook:"www.facebook.com"},s=/.*\/([^\/]+)/;n.splitPhone=function(e){var t=3,n=15,a=4;o.isString(e)&&(e={value:e});var i=e.text||e.value;if(i.length>t){var r=/(.*)\s+(\([^\(]+\))\s*$/,s=r.exec(i),l="";s&&(i=s[1],l=" "+s[2]);var c=Math.max(Math.min(n,i.length-a),t);a=i.length-c,e.fade=!0,e.parts={visible:i.slice(0,-a),invisible:i.slice(-a)+l}}else e.fade=!1;return e},n.firstByType=function(e,t){var n;return o.find(t,function(t){return n=o.find(t.contacts,function(t){return t.type==e}),!!n}),"website"==e?a(n):n},n.getSite=a,n.isSocial=function(e){return!!r[e.type]},n.isMessenger=function(e){var t=["icq","jabber","skype"];return o.contains(t,e.type)},n.unshiftAdsLinkToContacts=function(e,t){var n=t&&t.link;return!o.isEmpty(n)&&o.isArray(e)&&e.unshift({name:null,contacts:[{type:"website",value:n.value,reg_bc_url:null,comment:null,text:n.text}]}),e},n.fixSiteText=i,n.prepareSocialContact=function(e){e.value.indexOf(".com")>0?e.value.startsWith("http")||(e.value="http://"+e.value):(r[e.type]&&(e.text=r[e.type]+"/"+e.text),e.value.startsWith("http")||(e.value="http://"+e.text));var t=e.value.match(s);return e.text=t?t[1]:e.value.replace(/https?:\/\//,""),e.href=e.value,e},n.isPhone=function(e){return"phone"===e.type||"fax"===e.type},n.replaceDash=function(e,t){e=e||"";var n=["macos","ios"],a={firmcard:"–",minicard:"-"};if(n.indexOf(t.os)>-1)return e;var i=a[t.type];return i?e.replace(/\u2012/g,i):e}},{lodash:"lodash"}],"/helpers/css.js":[function(e,t,n){n.rotate=function(e){return isNaN(e)?"":"-webkit-transform:rotate("+e+"deg);transform:rotate("+e+"deg)"}},{}],"/helpers/desktop/makeWindowTitleForDesktop.js":[function(e,t,n){t.exports=function(e,t){return e._t("%1 — 2ГИС",t.name)},t.exports._args=["$i18n","region"]},{}],"/helpers/device.js":[function(e,t,n){function a(e){function t(t){return e.indexOf(t)>-1}if(!e)return"desktop";e=e.toLowerCase();var n=t("iphone"),a=t("ipod"),i=t("ipad"),o=t("android"),r=o&&t("mobile"),s=o&&!r,l=t("windows"),c=l&&t("phone"),u=l&&!c&&t("touch"),d=t("blackberry")||t("bb10")||t("rim"),h=d&&!t("tablet"),p=d&&!h,f=t("tizen"),m=f&&t("mobile"),g=f&&!m,_=(t("(mobile;")||t("(tablet;"))&&t("; rv:"),v=_&&t("mobile"),y=_&&t("tablet"),b=t("meego");return n||a||r||c||h||m||v||b?"phone":i||s||u||p||g||y?"tablet":"desktop"}n.getPlatform=a},{}],"/helpers/digiRunner.js":[function(e,t,n){"use strict";function a(e,t){return o.reduce(t,function(e,t,n){return e.replace(RegExp("(^|[^a-zA-Z])"+t+"([^a-zA-Z]|$)"),"$1%"+(n+1)+"$2")},e)}function i(e,t,n){return Math.round(n*e/(t-1))}var o=e("lodash"),r=e("./string"),s=10,l=300;t.exports=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?o.noop:arguments[2],c=arguments.length<=3||void 0===arguments[3]?o.noop:arguments[3],u=Math.floor(l/s),d=a(e,t),h=0,p=setInterval(function(){if(h>=s)return clearInterval(p),void c();var e=o.map(t,function(e){return i(h,s,e)}),a=r.format(d,e);h++,n(a)},u);return function(){clearInterval(p)}},t.exports._getTemplate=a,t.exports._getIntermediateValue=i},{"./string":"/helpers/string.js",lodash:"lodash"}],"/helpers/discount.js":[function(e,t,n){function a(e,t){var n={day:"D",dayAndMonth:"D MMMM",full:"D MMMM YYYY"};return e.format(n[t])}function i(e,t,n){var i=e.format("YYYY-MM-DD")==t.format("YYYY-MM-DD");if(i)return a(e,"full");var o={},r=e.year()==t.year(),s=r&&e.month()==t.month();return r&&s?(o.from=a(e,"day"),o.to=a(t,"full")):r?r&&!s&&(o.from=a(e,"dayAndMonth"),o.to=a(t,"full")):(o.from=a(e,"full"),o.to=a(t,"full")),n._t("С %1 до %2",o.from,o.to)}function o(e,t){var n=u().unix();return e>=n?t._t("С %1",a(e,"full")):null}function r(e,t,n){return e&&t?i(e,t,n):e?o(e,n):n._t("До %1",a(t,"full"))}function s(e,t){var n,a=c.get(e,"dates.comment");return n=a?t?t+", "+a:a:t}function l(e){var t=e.getItem("discountsVotes")||"{}";return JSON.parse(t)}var c=e("lodash"),u=e("moment"),d=e("slot/config"),h=req("helpers/time");t.exports.filterActiveDiscounts=function(e,t){var n=u(h.getFormattedTime(t,"")).unix();return c.filter(e,function(e){if(e.dates&&e.dates.to){var t=u(e.dates.to).hours(0).minutes(0).seconds(0).add(1,"day").unix();return t>n}return!0})},t.exports.formatDiscountPeriod=function(e,t,n){u.locale(n.lang);var a,i=c.get(e,"dates.from")&&u(e.dates.from),o=c.get(e,"dates.to")&&u(e.dates.to);return o&&(o=o.subtract(o.utcOffset(),"minutes")),(i||o)&&(a=r(i,o,n)),a=s(e,a),a||(a=n._t("Постоянная акция")),a},t.exports.getDiscountTitleWithPercent=function(e){return e.percent?e.percent+"% "+e.title:e.title},t.exports.getDiscountsMoreText=function(e,t){return 0==e?"":t._nt("Сейчас %1 акция","Сейчас %1 акции","Сейчас %1 акций",e)},t.exports.isInternationalDiscountsRegion=function(e){return c.includes(d["discounts.internationalDiscountsCities"],parseInt(e.id,10))},t.exports.getDiscountUserVote=function(e,t){var n=l(e);return c.get(n,t,null)},t.exports.setDiscountUserVote=function(e,t,n){var a=l(e);a[t]=n;var i=JSON.stringify(a);e.setItem("discountsVotes",i)},t.exports.getDiscountCoverUrl=function(e,t){var n=e.cover,a=e.cover_hash;return a&&(t=t||"",n+=t),n}},{lodash:"lodash",moment:"moment","slot/config":"slot/config"}],"/helpers/discreteFrame.js":[function(e,t,n){function a(e,t){return d[e+".resize"][t]}function i(e,t){return t<a(e,"minColumnsNumber")?a(e,"minColumnsNumber"):t>a(e,"maxColumnsNumber")?a(e,"maxColumnsNumber"):t}function o(e,t){e.setItem("mediaColumnsNumber",t)}function r(e){var t=e.getItem("mediaColumnsNumber");return t&&parseInt(t,10)||null}function s(e,t){var n=a(e,"wrapperPaddings"),o=a(e,"viewportBlindSpot"),r=a(e,"columnWidth"),s=$(t).width()-n-o,l=Math.floor(s/r);return i(e,l)}function l(e,t){var n=a(e,"maxColumnsNumber"),i=a(e,"minWidthFor3Columns");return i&&n>2&&$(t).width()<=i&&(n=2),n}function c(e,t,n,a){var o=r(n),c=o||l(e,a),u=s(e,a),d="iPad"===t.device.model&&1024===$(a).width();return d&&(u=3),c>u&&(c=u),i(e,c)}function u(e,t){var n=a(e,"wrapperPaddings"),i=a(e,"columnWidth");return i*t+n}var d=e("slot/config");n.saveColumnsNumber=o,n.getSavedColumnsNumber=r,n.getViewportColumnsNumber=s,n.getColumnsNumberToShow=c,n.getFrameWidth=u},{"slot/config":"slot/config"}],"/helpers/distributeActions.js":[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e){return function(t){var n={};return a(t).map(function(t){var i=a(t).compact().find(function(t){return e[t]&&!n[t]});return i&&(n[i]=!0),i}).compact().map(function(t){return e[t]}).value()}}},{lodash:"lodash"}],"/helpers/exchange.js":[function(e,t,n){function a(e,t){e.init("feedback",t,function(t,n){e.block().append(n.render()),n.bindEvents()})}var i={resolveFeedbackDiff:function(e,t){t.feedback&&a(e,t.feedback),null===t.feedback&&e.broadcast("feedback:close")}};n.changeState=i,n.initFeedback=a},{}],"/helpers/extension.js":[function(e,t,n){n.isInstalled=function(){return!("undefined"==typeof DGExt||!DGExt._installed)}},{}],"/helpers/extraLayers.js":[function(e,t,n){function a(e,t){return t?e.subfolders[t]?e.subfolders[t]:o.find(e.subfolders,function(e){return!o.isEmpty(a(e,t))}):e}function i(e){var t=[];return"folderNode"!=e.type?o.each(e.subfolders,function(e){t=t.concat(i(e))}):t=t.concat(e.geometries),t}var o=e("lodash"),r=req("helpers/string");n.getGeomListByData=function(e,t){var n=o.clone(e);return"FeatureCollection"==n.type?[n]:(o.isArray(t)&&!o.isEmpty(t)&&(n.subfolders=o.pick(n.subfolders,t)),i(a(n)))},n.getResourceUrl=function(e,t,n){return void 0!==t?n["extraLayers.url"]+"/"+e+"/download/"+t+"/":n["extraLayers.url"]+"/"+e+"/download/"},n.prepareForSeo=function(e,t){var n=r.cutTags(e.description,"");return n.length>165&&(n=n.substr(0,n.lastIndexOf(" ",165))+"..."),n=n.replace(/\n/g," "),{type:"extraLayers",city:t.getRegion().name,name:e.name,content:n,lon:e.lon,lat:e.lat,layerId:e.layerId,featureId:e.featureId}}},{lodash:"lodash"}],"/helpers/favoriteShare.js":[function(e,t,n){"use strict";function a(e,t,n){var a=s.get(n,"title",null)?s.get(n,"title"):t._t("Избранное");return a+" - "+e.getName()+" - "+t._t("2ГИС")}function i(e,t,n){return t._t("Подборка из %1 на карте %2",t._nt("%1 места","%1 мест","%1 мест",n.favorites_count),e.getName({"case":1}))}function o(e,t,n,o,r,s){var l="function"==typeof s?s(t,n):s,c={title:a(t,n,l),desc:i(t,n,l)};l.cover&&(c.image=l.cover.url_original),e.notify("shareClicked",r,l.url,null,o,c)}function r(e,t,n){var o={title:a(e,t,n),description:i(e,t,n)};return n.cover&&(o.ogImage={image:n.cover.url_original}),o}var s=e("lodash"),l="vkontakte",c="twitter",u="facebook",d="odnoklassniki";n.socials={vk:l,tw:c,fb:u,ok:d},n.makeSocialShare=s.curry(o),n.makeCollectionSeoParams=r},{lodash:"lodash"}],"/helpers/favorites.js":[function(e,t,n){"use strict";function a(e){return+parseFloat(""+e).toFixed(6)+""}function i(e){var t=e.object_type||e.data&&e.data.type||e.type;if(!r(t)&&e.id){var n=e.clickPoint||e.point;return!n&&e.lonlat&&(n=e.lonlat),n?{id:c.getStaticId(e.id)+":"+a(n.lon)+"/"+a(n.lat),type:"withPointObject"}:{id:""+c.getStaticId(e.id),type:"noPointObject"}}return e.id?{id:""+c.getStaticId(e.id),type:"noPointObject"}:e.point?{id:a(e.point.lon)+"/"+a(e.point.lat),type:"point"}:{}}function o(e,t,n){if(s.isEmpty(n))return l.resolve(n);var a={},i={};s.forEach(n,function(e){if("object"==e.type)switch(u[s.get(e,"item.object_type")]){case"branch":a.branch=s.union(a.branch||[],[e.item]);break;case"geo":a.geo=s.union(a.geo||[],[e.item]);break;case"route":a.transport=s.union(a.transport||[],[e.item]),i.routes=s.union(i.routes||[],[e.item.id]);break;case"station":a.transport=s.union(a.transport||[],[e.item]),i.stations=s.union(i.stations||[],[e.item.id]);break;case"platform":a.transport=s.union(a.transport||[],[e.item]),i.platforms=s.union(i.platforms||[],[e.item.id]);break;case"entrance":a.transport=s.union(a.transport||[],[e.item]),i.entrances=s.union(i.entrances||[],[e.item.id])}});var o=[];if(a.branch){var r=s(a.branch).map(function(e){return e.id}).uniq().value();o.push(l.props({data:l.promisify(e.firms.favorites)(r),photos:l.promisify(t.getFirmInfo)(r)}).then(function(e){s.forEach(a.branch,function(t){var n=s.find(e.photos,{id:t.id})||{};t.objectData=s.find(e.data.data,{id:t.id}),t.reviews=s.find(e.reviews,{id:t.id}),t.photo=s.get(s.find(n.albums,{type:"common"}),"main_photo_preview")})}))}if(a.geo){var c=s(a.geo).map(function(e){return e.id}).uniq().value();o.push(l.props({data:l.promisify(e.geo.favorites)(c),photos:l.promisify(t.getGeoInfo)(c)}).then(function(e){s.forEach(a.geo,function(t){var n=s.find(e.photos,{id:t.id})||{};t.objectData=s.find(e.data.data,{id:t.id}),t.photo=s.get(s.find(n.albums,{type:"view"}),"main_photo_preview")})}))}if(a.transport){var d=[];i.routes&&d.push(l.promisify(e.transport.route)(i.routes).then(function(e){return e.data})),i.stations&&d.push(l.promisify(e.transport.stations)(i.stations).then(function(e){return e.data})),i.entrances&&d.push(l.promisify(e.transport.station.entrances)(i.entrances).then(function(e){return e.data})),i.platforms&&d.push(l.promisify(e.transport.platforms)(i.platforms).then(function(e){return e.data})),o.push(l.all(d).then(function(e){var t=s.flattenDeep(e);s.forEach(a.transport,function(e){e.objectData=s.find(t,{id:e.id})})}))}return l.all(o).then(function(){var e=s(a).values().flattenDeep().value();return s.forEach(n,function(t){if(t.item){var n=s.find(e,{id:t.item.id});n&&s.assign(t.item,n)}}),n})}function r(e){return s.includes(["branch","building","gate"],e)}var s=e("lodash"),l=e("bluebird"),c=req("helpers/firm"),u={branch:"branch",adm_div:"geo",attraction:"geo",building:"geo",crossroad:"geo",gate:"geo",parking:"geo",poi:"geo",road:"geo",street:"geo",route:"route",station:"station",station_platform:"platform",station_entrance:"entrance"};t.exports={rawItemIdent:i,addFavoritesInfo:o}},{bluebird:384,lodash:"lodash"}],"/helpers/filters.js":[function(e,t,n){var a=e("lodash"),i={};i.splitWorkTime=function(e){var t={};if(e)if("now"==e)t.work_time_mode=e;else{var n=e.split(",");if(n&&2==n.length){var a=n[0],i=n[1];if("alltime"==i)t.work_time_mode="alltime";else{var o=i.split(":")[0];t.work_time_mode="specified",t.work_day=a,t.work_hour=o}}}return t},i.combineWorkTime=function(e){var t,n=e.work_time_mode,o=e.work_day||i.getDefaultValue("work_day");t=a.isUndefined(e.work_hour)?i.getDefaultValue("work_hour"):e.work_hour;var r="";if(n)switch(n){case"now":r=n;break;case"alltime":r="today,alltime";break;case"specified":o&&!a.isUndefined(t)&&(r=o+","+t%24+":00")}return r},i.getDefaultValue=function(e){return"sort"==e?"relevance":void 0},i.getUnusualFilterCount=function(e,t){var n=RegExp(/\d+,\d+/),i=0,o={noncash:"noncash,visa,mastercard,maestrocard,unioncard",cards:"visa,mastercard",cash:"cash"};return n.test(e)||a.contains(["work_time","hotel_smoking","hotel_internet"],t)?i++:"general_payment_type"==t&&a.each(o,function(t){-1!=e.search(t)&&(e=e.replace(t,""),i++)}),i},i.getFiltersCount=function(e){function t(e){return!a.contains(["work_day","work_hour"],e)}e=e||"";var n=0;return a.each(e,function(e,a){t(a)&&n++}),n},t.exports=i},{lodash:"lodash"}],"/helpers/firm.js":[function(e,t,n){function a(e){return e&&e.attributes?!!f.find(e.attributes,function(e){return(e.tag||"").startsWith("general_payment_type")}):!1}function i(e){if(!e||!e.attribute_groups)return null;var t=[],n=[];return f.each(e.attribute_groups,function(e){a(e)?n.push(e):t.push(e)}),{all:f.compact(t),payment:f.compact(n)}}function o(e){return e||0===e?f.isObject(e)?"":(e+"").split("_")[0]:""}function r(e){return!e||f.isEmpty(e.external_content)?null:e.external_content}function s(e){return f.get(e,"photoAlbums")?f.findWhere(e.photoAlbums,{type:"common"}):f.findWhere(r(e),{type:"photo_album",subtype:"common"})}function l(e){if(!e||!e.attribute_groups)return"";var t=(i(e)||{}).all,n=h(e);if(n.length){var a=f.pluck(n,"id"),o=f.filter(t,function(e){return e.rubric_ids&&f.intersection(e.rubric_ids,a).length});o.length&&(t=o)}var r=f.chain(t).pluck("attributes").flatten().pluck("name").value().join(", ");return r}function c(e,t){return e&&e.address?m.getSeparatedAddress(e.address,t).join(" / "):""}function u(e,t){if(!e)return"";t=t||{};var n=t.canUseDrilldown,a=t.regionName,i=t.useDrilldownInAddress,o="";if(n&&i)o=g.getDrilldown(e,{withoutPostalCode:!0});else if(!i){var r=f.find(e.adm_div,function(e){return"city"==e.type})||{};r.name!=a&&(o=r.name)}return o}function d(e){return f.get(e,"address.building_name")}function h(e){var t=[];return e.rubrics&&(t=f.filter(e.rubrics,{kind:"primary"})),t}function p(e,t){if(!e.ads)return null;var n;switch(t){case"text":n="text_warning";break;case"article":n="article_warning"}return n&&e.ads[n]?e.ads[n]:e.name_ex&&e.name_ex.fas_addition}var f=e("lodash"),m=e("./outputify"),g=req("helpers/geo"),_=req("helpers/booklet"),v=req("helpers/model"),y=e("slot/config"),b=req("helpers/string"),k=req("helpers/linkURL"),w=req("helpers/analytics");n.checkAds=function(e){return!f.isEmpty(e.ads)},n.getBlockingAttributes=function(e,t){var n=[];return f.each(e.attribute_groups,function(e){f.each(e.attributes,function(e){f.find(t,function(t){return e.tag&&-1!=e.tag.indexOf(t)?(n.push(e.name),!0):!1})})}),f.compact(n)},n.getArticle=function(e){if(!e||!e.article)return"";var t=e.article;t=(t+"").replace(/<br\s*?\/>/g,"<br>"),y.isGrym&&(t=t.replace(/(<ul>)/g,"<br>").replace(/(<\/ul>)/g,"").replace(/(<li>)/g,"&#149;&nbsp;").replace(/(<\/li>)/g,"<br>"));var n=t.split("<br>");return f.map(n,function(e){return b.cutTags(e)})},n.isPaymentGroup=a,n.separateAttributes=i,n.getBooklet=function(e,t){var n=f.find(e.external_content,function(e){return"booklet"==e.type});return n&&n.value&&(n.label||(n.label=t._t("Посмотреть буклет")),n.seoLinkBooklet=k("booklet",{bookletName:n.value})),n},n.canCreateBooklet=function(e,t){var n=!!f.find(e.rubrics,function(e){return _.isBookletRubric(e)}),a=!!f.find(e.contact_groups,function(e){return f.findWhere(e.contacts,{type:"website"})}),i=_.countryAvailable(t);return n&&!a&&i},n.getPlusOne=function(e){return f.find(e.external_content,function(e){return"plus_one"==e.type})},n.getDiscounts=function(e,t){var n=f.find(e.external_content,function(e){return"discount"==e.type});return n&&(n.seoLink=k(n.rubrics?"discountsForRubrics":"discounts",{branches:[e.staticId||e.id],rubrics:n.rubrics||[],city:t.code})),n},n.getStaticId=o,n.getStaticIds=function(e){return e&&f.isObject(e)?f.map(e,o):[]},n.getExternalContent=r,n.getPhotoAlbumCommon=s,n.isHasPhotos=function(e){var t=s(e);return t&&t.count>0},n.getPhotoAlbum=function(e,t,n){if(!e||!e.external_content&&!e.photoAlbums)return null;var a;return(a=e.photoAlbums?f.findWhere(e.photoAlbums,{type:t}):f.findWhere(e.external_content,{type:"photo_album",subtype:t}))?(n=n?"/"+n:"",{count:a.count,preview:a.main_photo_url+n}):null},n.getLogoUrl=function(t,n){var a=e("url"),i=f.get(t,"ads.options.logo.img_url");if(!i)return"";var o=a.parse(i).pathname,r=o.lastIndexOf("."),s=r>0?o.substring(0,r):o,l=""!==o||r>0?o.substring(r):"";return a.resolve(i,s+"_"+n+l)},n.attributesForSeo=l,n.prepareForSeo=function(e){var t=e.org||{},n={cityName:v.getCityName(e),type:"firm",firmName:e.name,firmAddress:e.address_name,attributes:l(e),id:e.id,hasCoords:!!e.point,hasBranches:t.branch_count>1,lon:e.point&&e.point.lon,lat:e.point&&e.point.lat};return e.floors&&(n.floors=!0,n.complexId=e.complexId,n.mallName=e.mallName),n},n.getSeoUrl=function(e,t,n){var a=o(e.id),i={city:t.code,id:a};return n&&(i.tab=n),e.point?(f.extend(i,{lat:e.point.lat,lon:e.point.lon}),k("firm",i)):k("firmNoCoords",i)},n._getShortAddress=c,n._getAdditionalAddressInfo=u,n.getFirmAddress=function(e,t){if(!e)return"";var n=t.format||{},a=[c(e,n)],i=u(e,t);return i&&("reversed"==n||"cl"==t.infoStrategy?a.push(i):a.unshift(i)),f.uniq(f.compact(a)).join(", ")},n.getAddressParts=function(e,t){var n=f.get(e,"address.components");if(n){var a=f.find(n,{type:"street_number"});if(a){var i=a.street,o=a.number,r=u(e,t);return{city:r,street:i,number:o}}}return null},n.getBuildingName=d,n.getMainRubric=function(e){if(!e.rubrics)return null;var t=f.find(e.rubrics,function(e){return"primary"==e.kind});return t&&t.name},n.getRating=function(e){var t=f.get(e,"reviews",{});if(!f.has(t,"general_review_count"))return null;var n=t.general_rating||0;return n?{value:Math.round(2*n)/2,count:t.general_review_count}:null},n.getReviewsNumber=function(e){return e.reviews&&e.reviews.general_review_count},n.getAdsWarning=p,n.defaultProfileParams=function(e){return e=e||{},f.defaults(e,{purpose:"firm_info_short"})},n.simulateAdvertisement=function(e,t){var n={ads:{text:t._gg("Здесь мог бы быть ваш рекламный комментарий"),article:t._gg("Здесь могла бы быть ваша рекламная статья"),link:{text:t._gg("Узнать больше"),value:"#"}}};return f.merge({},n,e)},n.checkFloors=function(e,t,n){return t.get("floors")&&n.hasBuilding(f.get(e,"address.building_id"))&&!e.floors},n.getAds=function(e,t){if(!e.ads)return null;var n=f.get(e,"ads.text"),a=f.get(e,"ads.article"),i=f.get(e,"ads.link.value");if(!n&&!a&&!i)return null;var o=i&&{value:w.addBssParamsToLink(i,t),text:f.get(e,"ads.link.text")};return{text:n,warning:p(e,n?"text":"article"),link:o}},n.getRubricOriginalName=function(e,t,n){if(!e||!t||!n)return null;var a=f.find(n,function(e){return e.id==t});return f.get(a,"name")!=e?a.name:null}},{"./outputify":"/helpers/outputify.js",lodash:"lodash","slot/config":"slot/config",url:419}],"/helpers/flamp.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/string");n.hint=function(e,t){var n={text:""};return n=100>e?{text:t._pt("Подсказка о длине отзыва на Флампе","Маловато будет!"),color:"red"}:250>e?{text:t._pt("Подсказка о длине отзыва на Флампе","Хорошее начало!"),color:"#D67373"}:5e3>e?{text:t._pt("Подсказка о длине отзыва на Флампе","Становится интересно"),color:"#C47426"}:6e3>e?{text:t._pt("Подсказка о длине отзыва на Флампе","Когда же кульминация?"),color:"#7EC426"}:7e3>e?{text:t._pt("Подсказка о длине отзыва на Флампе","Краткость — не ваш конёк :)"),color:"green"}:1e4>e?{text:t._pt("Подсказка о длине отзыва на Флампе","Горшочек, не вари!"),color:"#B7C426"}:{text:t._pt("Подсказка о длине отзыва на Флампе","И тут читатель уснул"),color:"red"},n.text=t._npt("Подсказка о длине отзыва на Флампе","%1 символ. %2","%1 символа. %2","%1 символов. %2",e,n.text),n},n.makePreview=function(e,t){if("string"!=typeof e)return"";var n=e.lastIndexOf(".");return e.slice(0,n)+"_"+t+e.slice(n)},n.makeTextPreview=function(e,t,n){var o,r;e=e.trim(),o=t||8,r=n||355;for(var s=e,l=0,c=0;o>c;c++)-1!=l&&(l=s.indexOf("\n",l+1));return-1!=l&&(s=s.substring(0,l)),l=Math.max(s.lastIndexOf(" ",r),r),s=s.substring(0,l),s.lastIndexOf("\n")==s.length-1&&(s=s.substring(0,s.length-1)),s!=e&&(s+="..."),s=i.decorateUrls(s),a.compact(s.split("\n"))}},{lodash:"lodash"}],"/helpers/floors.js":[function(e,t,n){"use strict";function a(e){return{1:{title:e._pt("Дашборд","Одежда"),query:e._pt("Запрос к поиску","Одежда"),type:"clothing",icon:"metaRubrics_clothing",threshold:30,priority:1},2:{title:e._pt("Дашборд","Обувь"),query:e._pt("Запрос к поиску","Обувь"),type:"shoes",icon:"metaRubrics_shoes",threshold:10,priority:2},3:{title:e._pt("Дашборд","Детям"),query:e._pt("Запрос к поиску","Детские товары"),type:"children",threshold:15,icon:"metaRubrics_children",priority:3},4:{title:e._pt("Дашборд","Поесть"),query:e._pt("Запрос к поиску","Поесть"),type:"to_eat",icon:"metaRubrics_to_eat",threshold:15,priority:4},5:{title:e._pt("Дашборд","Техника"),query:e._pt("Запрос к поиску","Электроника и техника"),type:"technique",icon:"metaRubrics_technique",threshold:10,priority:5},6:{title:e._pt("Дашборд","Красота"),query:e._pt("Запрос к поиску","Красота"),type:"beauty",icon:"metaRubrics_beauty",threshold:15,priority:6},7:{title:e._pt("Дашборд","Аксессуары"),query:e._pt("Запрос к поиску","Украшения и аксессуары"),type:"accessories",icon:"metaRubrics_accessories",threshold:15,priority:7},8:{title:e._pt("Дашборд","Для дома"),query:e._pt("Запрос к поиску","Товары для дома"),type:"for_home",icon:"metaRubrics_for_home",threshold:10,priority:8},9:{title:e._pt("Дашборд","Спорт"),query:e._pt("Запрос к поиску","Спортивные товары"),type:"sport",icon:"metaRubrics_sport",threshold:10,priority:9},10:{title:e._pt("Дашборд","Мебель"),query:e._pt("Запрос к поиску","Мебель"),type:"furniture",icon:"metaRubrics_furniture",threshold:10,priority:10},11:{title:e._pt("Дашборд","Материалы"),query:e._pt("Запрос к поиску","Строительные материалы"),type:"materials",icon:"metaRubrics_repair",threshold:15,priority:11},12:{title:e._pt("Дашборд","Двери"),query:e._pt("Запрос к поиску","Двери"),type:"doors",icon:"metaRubrics_doors",threshold:10,priority:12},13:{title:e._pt("Дашборд","Окна"),query:e._pt("Запрос к поиску","Окна"),type:"windows",icon:"metaRubrics_windows",threshold:10,priority:13},14:{title:e._pt("Дашборд","Декор"),query:e._pt("Запрос к поиску","Декор интерьера"),type:"decor",icon:"metaRubrics_decor",threshold:10,priority:14},15:{title:e._pt("Дашборд","Развлечения"),query:e._pt("Запрос к поиску","Развлечения"),type:"entertainment",icon:"metaRubrics_entertainment",threshold:7,priority:15}}}var i=e("lodash"),o=e("slot/env");n.getLibPath=function(){var e=null;return e=o.isServer?o.requirePrivate("stamp"):data.stamp,i.compact(["/assets",e,"floorsLib"]).join("/")},n.getMetaRubricsByPriority=function(e,t,n){var o=a(n);return i(e).map(function(e){return i.extend({},e,o[e.id])}).sortByOrder([function(e){return e.orgCount>=e.threshold},"orgCount","priority"],["desc","desc","asc"]).filter(function(e){return e.orgCount>=7}).take(t).value()},n.getEntityLabels=function(e){return{100:e._t("Лифт"),201:e._t("Эскалатор вверх"),202:e._t("Эскалатор вниз"),203:e._t("Эскалаторы вверх и вниз"),300:e._t("Лестница"),400:e._t("Информационная стойка"),500:e._t("Фудкорт"),600:e._t("Фонтан"),700:e._t("Сцена"),800:e._t("Гардероб"),900:e._t("Туалет"),901:e._t("Туалет для инвалидов"),1e3:e._t("Каток"),1100:e._t("Парковка"),1200:e._t("Памятник"),1300:e._t("Терминал оплаты парковки"),1400:e._t("Такси"),1500:e._t("Мечеть"),1600:e._t("Розетка"),1700:e._t("Самостоятельная регистрация"),1800:e._t("Упаковка багажа"),1900:e._t("Камера хранения"),2e3:e._t("Багажные тележки"),2100:e._t("Получение багажа"),2200:e._t("Телефон"),2300:e._t("Аренда авто"),2400:e._t("Обмен валюты"),2500:e._t("Буддийский храм"),2600:e._t("Синагога"),2700:e._t("Православное религиозное сооружение"),2800:e._t("Живой уголок"),2900:e._t("Медпункт"),3e3:e._t("Полиция"),3100:e._t("Комната матери и ребёнка"),3200:e._t("Парковка для тележек"),3300:e._t("Прокат детских колясок"),3400:e._t("Детская площадка"),3600:e._t("Оплата багажа"),3700:e._t("Розыск багажа"),3800:e._t("Таможенный контроль"),3900:e._t("Паспортный контроль"),4e3:e._t("Бизнес-зал"),4100:e._t("VIP-зал"),4200:e._t("Транзитный зал"),4300:e._t("Ветеринарный контроль"),4400:e._t("Выход на посадку")}},t.exports._args=["$i18n"]},{lodash:"lodash","slot/env":"slot/env"}],"/helpers/formData.js":[function(e,t,n){var a=e("lodash");t.exports={append:function(e,t,n){return a.isUndefined(t)&&a.isUndefined(n)&&(t=e,e=new FormData),a.isNull(e)&&(e=new FormData),(a.isString(t)||a.isNumber(t))&&n?(e.append(t,n),e):(a.forEach(t,function(t,n){e.append(n,t)}),e)}}},{lodash:"lodash"}],"/helpers/geo.js":[function(e,t,n){function a(e,t){var n=m(e,t);return"street"==e.type&&(n=t._pt("Геообъект улица","%1, улица",n)),n}function i(e,t){t=t||{};var n=t.withoutPostalCode,a=t.withoutCityName,i=[],o=e.adm_div||[];if(a&&(o=L.filter(o,function(e){return"city"!=e.type})),!o.length)return"";if(i=L.map(o,function(e){return e.name}).reverse(),!n&&e.address){var r=L.compact([e.address.postcode,e.address.building_code]).join("/");r&&i.push(r)}return L.compact(i).join(", ")}function o(e,t){var n=m(e,t);if(!n)switch(e.type){case"building":return t._t("Постройка");case"parking":return t._pt("Территория","Парковка");default:return t._pt("Здание","Без названия")}return n}function r(e,t){var n=o(e,t),a="building"===e.type?j.getAddress(e.address,t.getFormats("address.order")):d(e,t);return-1!=n.toLowerCase().indexOf(a.toLowerCase())&&(a=""),a}function s(e,t,n){var a=A.getClosestStation(L.get(e,"links.nearest_stations",[]),{showDistance:n.getSettings("showNearStationDistance"),point:e.point,numberFormat:n.getFormats("number")}),i=[].concat(l(e,n),c(e,t,n),S.getPasswayAttributes(e,n),[a],u(e));return L.compact(i)}function l(e,t){var n=[],a={},i=e.purpose_name;return"building"!=e.type?null:(i&&o(e,t)!=i&&n.push(i),e.floors&&e.floors.ground_count&&n.push(t._nt("%1 этаж","%1 этажа","%1 этажей",e.floors.ground_count)),n.length&&(a={text:n.join(", "),purpose:"building"}),a)}function c(e,t,n){var a=e.links&&e.links.parking||[],i=e.point;return L.map(a,function(e){var a;return i&&t&&(a=T("geo",{city:t,id:e.id,lon:i.lon,lat:i.lat})),{id:e.id,name:e.name||n._pt("Территория","Парковка"),price:e.comment,capacity:e.capacity,seoLink:a,
purpose:"parking"}})}function u(e){if(!e)return[];var t;return t="attraction"==e.type?[e]:L.get(e,"links.attractions",[]),L.compact(L.map(t,function(e){return e&&(e.name||e.subtype_name)?{name:e.name,subtype_name:e.subtype_name,description:e.description,dates:e.dates,authors:e.authors,id:e.id,purpose:"attraction",caption:e.name||e.subtype_name}:null}))}function d(e,t){var n={street:t._t("Улица"),building:t._pt("Здание","Дом"),settlement:t._t("Населённый пункт"),place:t._pt("Место на географической карте","Место"),living_area:t._t("Микрорайон"),district:t._t("Район"),city:t._t("Город"),attraction:t._t("Достопримечательность"),division:t._t("Округ"),crossroad:t._t("Перекресток"),gate:t._t("Проход/проезд"),station_platform:t._t("Остановочная платформа"),parking:t._pt("Территория","Парковка"),road:t._pt("Геообъект","Дорога")};return"station"==e.type||"station_entrance"==e.type?M.getCaption(e.type,e.subtype,t):"attraction"==e.type&&e.subtype_name?e.full_name!=e.subtype_name?e.subtype_name:"":"settlement"===e.subtype&&e.subtype_specification?e.subtype_specification:n[e.type]||n[e.subtype]||e.subtype_name||""}function h(e){var t=["building","adm_div","attraction","gate","street","road"];return L.contains(t,e)}function p(e,t,n){e=e||{};var a={firms:n._t("Организации в здании"),servicing:n._t("Здание обслуживают"),apartments:n._gg("Недвижимость в продаже"),providers:n._t("Провайдеры")},i={title:a[t]||a.firms,type:t,count:e.count};return i.items=L.map(e.items,function(e,t){var n=L.pick(e,"id","name","nameParts","desc","link");return n.rubric=e.additional_info,n.num=t+1,n}),i.more=i.items.length<e.count,i}function f(e,t,n){var a={};if(e&&(e.branches&&e.branches.count&&(a.firms=p(e.branches,"firms",n)),e.servicing&&e.servicing.count&&(a.servicing=p(e.servicing,"servicing",n)),e.providers&&e.providers.count&&(a.providers=p(e.providers,"providers",n))),t&&t.total_count){t.items=L.take(t.items,3);var i=k(t,n);a.apartments=p(i,"apartments",n)}return a}function m(e,t){switch(e=e||{},e.type){case"gate":return S.getBarrierName(e.barrier,t);case"attraction":return e.name||e.subtype_name;case"parking":return e.name||t._pt("Территория","Парковка")}var n=t.getSettings().geoobjects,a=!(n&&n.avoidAddressInName),i=j.getAddress(e.address,t.getFormats("address.order"));return e.building_name||a&&i||e.purpose_name||!a&&i||e.name}function g(e,t){var n=m(e,t),a=d(e,t);return a==n&&(a=""),-1!=n.toLowerCase().indexOf(a.toLowerCase())&&(a=""),a}function _(e,t){var n={euro:t._gg("Студия"),"1-room":t._gg("1 комната"),"2-room":t._gg("2 комнаты"),"3-room":t._gg("3 комнаты"),"4-room":t._gg("4 комнаты"),"5-room":t._gg("5 комнат")};return n[e]}function v(e,t){var n={office:t._gg("Офис"),warehouse:t._gg("Склад"),industrial:t._gg("Под производство"),commercial:t._gg("Для торговли")};return n[e]}function y(e,t,n){switch(t){case"apartment":return _(e,n);case"business":return v(e,n);default:return null}}function b(e,t,n){if(L.values(e).length<2)return null;var a=L.clone(L.find(e,function(e){return e.id!==t.id}),!0);a.label=n._gg("Также в здании");var i={"apartment.sale":n._ngg("%1 объект жилой недвижимости","%1 объекта жилой недвижимости","%1 объектов жилой недвижимости",a.number),"business.sale":n._ngg("%1 объект коммерческой недвижимости","%1 объекта коммерческой недвижимости","%1 объектов коммерческой недвижимости",a.number)};return a.title=i[a.id],a}function k(e,t){var n=L.map(e.items,function(e){var n,a,i;return n=y(e.apartment_type,e.property_type,t),a=t._gg("%1 м²",e.apartment_size),e.full_cost&&(i=I.currencyString(e.full_cost.value,t)),{nameParts:L.compact([n,a,i]),desc:e.firm&&e.firm.name,link:e.link}});return{type:"apartments",count:e.total_count,items:n,wizard:b(e.available,e.active,t)}}function w(e,t,n){return t.get("floors")&&n.hasBuilding(e.id)}function x(e){return{type:"unknown",name:e._t("Место на карте")}}function C(e,t,n){var a=E.getCityName(e),i=t.getFormats("address.order"),r={id:e.id,fullName:e.full_name,cityName:a,linkType:e.linkType};if(e.geometry){var s=n.parsePoint(e.geometry.centroid);r.lon=s.lon,r.lat=s.lat}switch(e.type){case"building":case"gate":r.gateType=m(e,t)}switch(e.type){case"building":r.geoName=I.replaceAll("&nbsp;"," ",j.getAddress(e.address,i));break;case"crossroad":r.geoName=o(e,t);break;default:r.geoName=e.full_name||o(e,t)}switch(e.type){case"unknown":case"street":case"crossroad":case"attraction":case"parking":case"building":case"gate":r.type=e.type;break;case"adm_div":switch(e.subtype){case"city":case"settlement":r.type="city";break;case"division":case"district":r.type="admDivision";break;default:r.type="simpleGeom"}break;default:r.type="simpleGeom"}switch(e.type){case"adm_div":switch(r.admDivisionName=e.short_name||e.name,e.subtype){case"settlement":r.cityType="citySimple";break;case"division":r.admDivisionType=t._t("округ");break;case"district":r.admDivisionType=t._t("район")}break;case"street":r.streetName=e.short_name||e.name;break;case"attraction":r.sightType=e.subtype_name;break;case"building":r.buildingName=e.building_name;break;case"gate":r.gatePurpose=S.getPurposeText(e.purpose,t),r.gateAccess=S.getAccessText(e.access,t);break;case"parking":var l=j.getAddress(e.address,t.getFormats("address.order"));l=I.replaceAll("&nbsp;"," ",l),l=L.compact([a,l]).join(", "),r.parkingName=I.uncapitalize(e.name)||t._t("парковка"),r.parkingType=P.getParkingType(e,t),r.parkingAccess=P.getAccessType(e,t),r.parkingAccessFull=P.getAccessText(e,t),r.parkingAddress=l}return r}var L=e("lodash"),I=req("helpers/string"),T=req("helpers/linkURL"),S=req("helpers/passway"),E=req("helpers/model"),P=req("helpers/parking"),j=e("./outputify"),M=e("./station"),A=e("./stationsNear");t.exports={getAttractions:u,getBuildingCompositeType:l,getDescTitle:a,getDrilldown:i,getFeatures:s,getFirmLists:f,getGeoTypeHumanReadable:d,getParkings:c,getShortDescription:r,getTitle:o,getSightShortDescription:g,getName:m,getApartments:k,typeIsGeo:h,getRealtyType:y,getApartmentsWizard:b,checkFloors:w,createSomePlace:x,getSeoParams:C},t.exports._args=["$i18n"]},{"./outputify":"/helpers/outputify.js","./station":"/helpers/station.js","./stationsNear":"/helpers/stationsNear.js",lodash:"lodash"}],"/helpers/getInt32.js":[function(e,t,n){t.exports=function(e){if(!e)return 0;if(e.length<16||16==e.length&&"9007199254740991">=e)return(4294967295&e)>>>0;for(var t=0,n=e,a=0;32>a;a++){var i="",o=n,r=o.length;n="";for(var s=0;r>s;s++){var l=i+o[s];n+=""+(l>>1),i=1&l?"1":""}i&&(t+=1<<a)}return t}},{}],"/helpers/i18n.js":[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e){var t={DISTANCE:function(t){return"m"==t.unit?e._pt("метры","%1 м",t.distance):e._pt("километры","%1 км",t.distance)},COLLECTION_TOOL_TITLE:function(t){switch(t){case"gallery":return e._t("Из галереи");case"upload":return e._t("Загрузить");case"delete":return e._t("Удалить");default:return""}}};return function(e,n){var i=a.get(n,"hash.data");return a.isFunction(t[e])?t[e](i):""}},t.exports._args=["$i18n"]},{lodash:"lodash"}],"/helpers/landmarks.js":[function(e,t,n){"use strict";function a(e,t){var n=void 0,a=e.id;switch(e.type){case"station_platform":n="transportPlatform";break;case"station_entrance":n="metro"==e.subtype?"transportStopMetro":"transportStop",a=e.station_id;break;case"adm_div":case"building":n="geo";break;case"branch":n="firm"}if(n){var i={id:a,city:t};return r(n,i)}return null}var i=e("./roundMeters"),o=e("./css"),r=e("./linkURL"),s=e("lodash"),l=["↑","↗","→","↘","↓","↙","←","↖"];n.getLandmarks=function(e,t,n){return e&&t&&n?s.chain(e).map(function(e){if(t==e.id)return null;var r=e.azimuth%360;return 0>r&&(r=360*Math.ceil(-r/360)+r),{id:e.id,type:e.type,subtype:e.subtype,stationId:e.station_id,name:e.name,distance:i.convertMeters(e.distance,n.numberFormat),fallback:l[Math.floor((r+22.5)%360/45)],rotateStyle:o.rotate(r),seoLink:a(e,n.cityCode)}}).compact().value():[]}},{"./css":"/helpers/css.js","./linkURL":"/helpers/linkURL.js","./roundMeters":"/helpers/roundMeters.js",lodash:"lodash"}],"/helpers/link.js":[function(e,t,n){function a(e,t,n){var a={firmCard:"firm_profile",articleCard:"advert_article",discountsCard:"firm_discount",feedback:"feedback",geoCard:"card_geo",metroCard:"card_metro",routeCard:"card_route",stopCard:"card_station",miniCard:"advert_block",auth:"log_reg_form",push2dial:"user_profile"};return n&&"account"==t&&(a.feedback="edit_data"),a[e]||""}function i(){return"undefined"!=typeof window&&window.location&&"https:"==window.location.protocol}var o=e("lodash"),r=req("helpers/string"),s=req("helpers/firm"),l=e("slot/config"),c=req("helpers/linkURL");n.getAdvLink=function(e,t,n,i){var o={region:e.id,lang:i,firmId:n.id,utm:a(t,"adv",n.id)},s={};return"firmCard"==t&&n.id?s.href=r.replaceByName(l["redirect.adv.owner"],o):s.href=r.replaceByName(l["redirect.adv.default"],o),s},n.getAddLink=function(e,t,n){var a={region:e.id,lang:n.getLang(),utm:t};return r.replaceByName(l["redirect.adv.addFirm"],a)},n.getBusinessLink=function(e){return r.replaceByName(l["redirect.businessLink"],{region:e})},n.getFullLink=function(e){return e?l.isGrym?l["gis.url"]+e:e:""},n.getPcLink=function(e){return r.replaceByName(l["redirect.storeLink.windows"],{region:e})},n.getMobileLandingLink=function(e,t){return e="2gis"+e,r.replaceByName(l["redirect.storeLink.mobile"],{domain:e,module:t})},n.getMobileLinks=function(e,t){var n=e.getSettings();t||(t=l.isGrym?"desktopApp":"onlineApp"),t="storeLink."+t+".";var a={android:{type:"android",title:"Google Play",href:e._config(t+"android")},ios:{type:"ios",title:"App Store",href:e._config(t+"ios")},windowsphone:{type:"windowsphone",title:"WP Store",href:e._config(t+"windowsphone")},blackberry:{type:"blackberry",title:"App World",href:e._config(t+"blackberry")}},i=o.transform(n.mobileAppPlatforms,function(e,t){a[t].href&&(e[t]=a[t])},{});return i},n.getPrivateOfficeLink=function(e,t,n,i){var s=l.group("account");if(!e||!o.contains(s.allowCountries,e.country_code))return null;var c={lang:i,region:e.id,firmId:n};return n?(c.utm=a(t,"account",n),r.replaceByName(l["redirect.account.firmUrl"],c)):(c.utm=a(t,"account"),r.replaceByName(l["redirect.account.defaultUrl"],c))},n.getOwnerUrl=function(e,t,n,a){var i=e.id,o=a.getLang(),s=a.getLocale(),c=n?"redirect.account.ownerPromoFirm":"redirect.account.ownerPromoDefault",u={lang:o,region:i,firmId:n,locale:s,utm:t};return r.replaceByName(l[c],u)},n.getApiLink=function(e,t){return e=e||{},o.contains(l["widget.allowCountries"],e.country_code)?r.replaceByName(l["redirect.license.api"],{lang:t.getLang(),region:e.id}):r.replaceByName(l["redirect.infoLink"],{lang:t.getLang(),region:e.id})},n.getExtensionLink=function(e,t){var n=e.ua||{};if(l.isGrym||!n.isDesktop)return!1;var a=t.getSettings().tools,i=a&&a.extension;return i?{href:t._config("extension.url")}:!1},n.getFlampLink=function(e,t){var n=s.getStaticId(e);return r.replaceByName(t._config("Flamp.urlFirm"),{firmId:n})},n.addProtocolToUrl=function(e){if(!e)return e;var t=i()?"https://$2":"http://$2";return e.replace(/^(\/\/)?(.*)/,t)},n.removeDomainFromUrl=function(e){return e?e.replace(/(http[s]?:\/\/)?[^\/]*/,""):e},n.getDomainFromUrl=function(e){if(!o.isString(e))return null;var t=e.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i),n=t&&t[1];return n},n.getFirmInFloorsLink=function(e,t,n){var a=o.get(e,"address.building_id"),i=n.getRegion(),r=c("firmInFloors",{city:i.code,complexId:t.getComplexIdByBuildingId(a),firmId:e.id});return r},n.getFloorsLink=function(e,t,n){var a=o.get(e,"address.building_id"),i=n.getRegion(),r=c("floors",{city:i.code,complexId:t.getComplexIdByBuildingId(a)});return r},t.exports._args=["region","from","$i18n"]},{lodash:"lodash","slot/config":"slot/config"}],"/helpers/linkURL.js":[function(e,t,n){var a=e("../components/appState/stateConf"),i=e("slot/lib/stuff");t.exports=function(e,t,n,o,r){t=t||{},a.app&&t&&void 0===t.locale&&(t.locale=a.app.components.appState.getLang());var s=a.permalink(e,t,n,o);if(a.app&&!r){var l=a.app.location.href();s=i.extendQuery(l,s,a.get("queryParamName"))}return a.app&&a.app.useHttps&&s&&(s=s.replace(/^http:\/\//,"https://")),s}},{"../components/appState/stateConf":55,"slot/lib/stuff":496}],"/helpers/mediaCard.js":[function(e,t,n){function a(e){var t=l.first(e.rubrics);return t?d(t.id):null}function i(e){return e.getRegion().country_code}function o(e,t){var n=i(t),a=l(c["mediaCard.rubrics"]).filter(function(e,t){return t=="providers_"+n||"providers"==t}).values().flattenDeep().union().value(),o=l.map(e.rubrics,function(e){return d(e.id)});return!!l.intersection(o,a).length}function r(e,t){if(!e)return null;var n=i(t),a=l(c["mediaCard.rubrics"]).pick(function(t){return l.includes(t,e)}).keys().filter(function(e){return l.includes(e,"_"+n)||!l.includes(e,"_")}).value();return a=l.first(a),a?a.split("_")[0]:null}function s(e,t){var n=l.findWhere(c["mediaCard.hardcode.currency"],{project:t&&t.code()});return l.get(n,"value")||e.getFormats().currency}var l=e("lodash"),c=e("slot/config"),u=req("helpers/string"),d=req("helpers/getInt32"),h={needToShowMediaResults:function(e,t,n,a){if(!e.get("mediaResults")||e.get("businessLandingDemoMode"))return!1;if(n.is("providersInBuilding")&&"providers"in c["mediaCard.rubrics"])return!0;var i="discovery"==n.get("requestType");if(e.get("ginzaProject")){var o=l.get(n,"fetchParams.query");if(o&&"ginza project"==o.toLocaleLowerCase())return e.get("mediaResults")}var r=n.get("dym"),s="branch"===r;if(i&&(!r||s)){var u=!a||"query/firms"==a;if(!u)return!1;var d=h.getMediaFirmRubric(n.get("contextIds"),t);return d?e.get("mediaCard."+d):!1}return!1},isMediaFirm:function(e,t,n){if(!e.get("mediaCard")||e.get("businessLandingDemoMode"))return!1;if("branch"!=n.type||l.isEmpty(n.rubrics))return!1;if(n.floors||n.isOpenedFromFloors)return!1;if(o(n,t)&&e.get("mediaCard.providers"))return!0;var i=a(n),s=r(i,t);return s?e.get("mediaCard."+s):!1},getMediaFirmRubric:function(e,t,n){var i;return l.isEmpty(e)?l.isEmpty(n)||(i=a(n)):i=l.first(e),r(i,t)},processAttributes:function(e,t,n){var a,i={food_service_avg_price:t._t("Средний чек"),food_service_lunch_price:t._t("Бизнес-ланч")};l.find(e,{tag:"food_service_lunch_price"})&&(e=l.reject(e,function(e){return l.contains(["food_service_business_lunch","food_service_lunch_time"],e.tag)}));var o=s(t,n);return e=l.compact(l.map(e,function(e){return a=i[e.tag],a?{price:!0,label:a,value:e.name.match(/[^\d](\d+)[^\d]/)[1],currency:l.extend(o,{code:o.id.toLowerCase()})}:u.capitalize(e.name)}))}};t.exports=h},{lodash:"lodash","slot/config":"slot/config"}],"/helpers/miniCard.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t,n){function i(e){var t=35,n=e.buildingName,a=e.fullAddress;return n?n.length+a.length>t||n.length>t?n+",<br/>"+a:n+", "+a:a}var o=req("helpers/route"),r=req("helpers/geo"),s=req("helpers/station"),l=req("helpers/outputify"),c=req("helpers/schedule"),u=n.wkt,d=n.i18n,h=d.getSettings(),p=req("helpers/linkURL"),f=req("helpers/firm"),m=req("helpers/camel"),g={geo:{prepareData:function(){t.name=r.getDescTitle(e,d);var n=l.getAddress(e.address,d.getFormats("address.order")),a=h&&h.geoobjects&&h.geoobjects.infoStrategy;switch(a){case"ae":n=n.replace(/(\(.*\))/,""),e.adm_div=e.adm_div||[],e.adm_div.push({name:n});break;default:n&&n!=t.name&&(t.name+=", "+n)}t.desc={text:g.geo.getGeoDesc(t.profile.type)},t.additionalText="","building"==e.type&&e.purpose_name?t.additionalText=e.purpose_name:"crossroad"==e.type&&(t.additionalText=r.getGeoTypeHumanReadable(e,d)),t.seoLinkBlock=g.geo.geoSeoLink(e)},getGeoDesc:function(t){var n,i=r.getDrilldown(e,{withoutPostalCode:!0});return-1==a.indexOf(["street","building"],e.type)&&"place"!=e.subtype&&(n=t),a.compact([n,i]).join(", ")},geoSeoLink:function(e){var a=e.geometry&&u.parsePoint(e.geometry.centroid);return a?n.isMausoleum?p("geo",{city:t.city.code,id:e.id,lon:a.lon,lat:a.lat}):"gate"==e.type?null:p("geo",{city:t.city.code,id:e.id,lon:a.lon,lat:a.lat}):null}},route:{prepareData:function(){var n=o.splitRouteName(t.name);t.desc={text:g.route.getRouteDesc()},t.name=n.name,t.note=g.route.getRouteNote(n),e.color&&(t.transportColor=e.color),t.additionalText=o.getTransportTypeText(e.subtype,d),t.transportType=m(e.subtype),t.seoLinkBlock=p("transportRoute",{city:t.city.code,id:e.id,zoom:11})},getRouteDesc:a.partial(o.getRouteDescription,e,d),getRouteNote:function(t){return"suburban_train"!=e.route_type?t.note:null}},station:{prepareData:function(){t.additionalText=s.getStationDesc(e,d),t.transportType=m(s.getTransportType(e));var n=s.getFirstPlatformCentroid(e,u);n&&("metro"==e.subtype&&a.get(h,"transport.metroShowLineNote")&&(t.note=s.getStationNote(e)),"metro"==e.subtype?t.seoLinkBlock=p("transportStopMetro",{city:t.city.code,id:e.id,lon:n.lon,lat:n.lat}):t.seoLinkBlock=p("transportStop",{city:t.city.code,id:e.id,lon:n.lon,lat:n.lat}))}},branch:{prepareData:function(){var o=n.plusOneFeature,r=n.offlineMode,s=n.regionManager.getRegion();t.brandOptions=g.branch.getBrandOptions(),t.desc=g.branch.getDesc(),t.filials=g.branch.getFilials(),t.filials&&(t.seoLinkFilials=p("firmBranches",{city:t.city.code,firmId:t.filials.id})),"filials"==n.searchType?(t.name=a.get(e,"name_ex.description"),e.schedule&&(t.schedule=g.branch.getSchedule()),t.name||(t.name=i(t.desc.address),delete t.desc.address,delete t.desc.text),t.addressComment=e.address_comment):(t.name=e.fullName||l.getName(a.omit(e.name_ex,"addition"))||e.name,t.description=a.get(e,"name_ex.description"),t.micro=g.branch.getMicro(),t.warning=f.getAdsWarning(e,"text")),"phone"==t.desc.type&&t.desc.text&&(t.phone=g.branch.getPhone(t.desc.text),t.phone.href="tel:"+e.phone.value,n.isMausoleum&&(t.phone.fade=!1));var c=f.getRating(e);c&&(t.reviews=c.count,t.rating=c.value);var u=a.get(e,"query.filters.work_time")||"filials"==n.searchType;if(e.schedule&&u&&(t.schedule=g.branch.getSchedule()),e.context&&e.context.stop_factors&&(t.attrs=g.branch.prepareAttrs(e.context.stop_factors)),!r){var h=f.getBooklet(e,d);h&&("net"!=h.subtype||n.providersFeature)&&(t.booklet=h,t.booklet&&(t.photosPreview=t.booklet.main_photo_url,t.photoType="booklet"));var m=f.getDiscounts(e,s,n.searchContext);m&&(t.discounts=m);var _=f.getPhotoAlbum(e,"common","128x128");!t.photosPreview&&_&&(t.photosPreview=_.preview,t.photoType="album")}var v;o&&!r&&(v=f.getPlusOne(e)),v&&(t.plusOne=v.label);var y;"filials"!=n.searchType&&(y=a.get(t,"brandOptions.logo.img_url"),y&&(t.photosPreview=f.getLogoUrl(e,"128x128"))),t.iconType=g.branch.getIconType(),t.photosIcon=!(!e.flags||!e.flags.photos||t.photosPreview),t.showAsideBlock=t.rating||t.photosIcon||t.photosPreview,s&&(t.seoLinkBlock=f.getSeoUrl(e,s));var b=g.branch.isDisabledPreviewPhoto(e,n);t.photosPreview&&b&&(t.photosPreview=!1,t.photosIcon=!0)},getMicro:function(){return e.ads&&e.ads.text},isDisabledPreviewPhoto:function(e,t){return!a.get(e.ads,"options.logo")||"filials"==t.searchType},getBrandOptions:function(){return a.get(e,"ads.options")},getDesc:function(){var n,i,o,r=g.branch.getTypeDesc();switch(r){case"phone":var s=e.phone;s&&(n=s.text);break;case"website":var l=e.website;l&&(n=l.text,o=l.value);break;default:i={buildingName:f.getBuildingName(e),fullAddress:f.getFirmAddress(e,{format:d.getFormats("address.order"),infoStrategy:d.getSettings("geoobjects.infoStrategy"),canUseDrilldown:!0,useDrilldownInAddress:d.getSettings("firms.useDrilldownInAddress"),regionName:a.get(t,"city.name")})},n=i.fullAddress}return{text:n,address:i,link:o,type:r}},getRubrics:function(){var t=[];return e.query.rubricId&&t.push(e.query.query),0==t.length&&e.rubrics&&(t=a.map(e.rubrics,function(e){return"primary"==e.kind?e.name:null})),t=g.branch.rubricsToLowerCase(t)},getTypeDesc:function(){var t,n={phone:[d._pt("Рубрика","Заказ пассажирского легкового транспорта"),d._pt("Рубрика","Заказ автобусов"),d._pt("Рубрика","Доставка готовых блюд"),d._pt("Рубрика","Аварийные службы"),d._pt("Рубрика","Независимые службы аварийных комиссаров"),d._pt("Рубрика","Пожарная охрана"),d._pt("Рубрика","Скорая медицинская помощь"),d._pt("Рубрика","Службы спасения"),d._pt("Рубрика","Службы экстренного вызова"),d._pt("Рубрика","Справочно-информационные услуги"),d._pt("Рубрика","Телефоны доверия"),d._pt("Рубрика","Эвакуация автомобилей")],website:[d._pt("Рубрика","Интернет-магазины"),d._pt("Рубрика","Услуги фото / видеосъёмки на выезде"),d._pt("Рубрика","Городские информационные сайты"),d._pt("Рубрика","Государственные информационные сайты"),d._pt("Рубрика","Сайты объявлений")]},i=g.branch.getRubrics();return e.query.firmId?t="address":a.each(i,function(e){t||a.each(n,function(n,i){return-1!=a.indexOf(g.branch.rubricsToLowerCase(n),e)?void(t=i):void 0})}),t},getIconType:function(){return f.getBooklet(e,d)?"booklet":e.flags&&e.flags.photos||f.isHasPhotos(e)?"photos":e.ads?"ads":"default"},getFilials:function(){return!e.query.firmId&&e.org&&e.org.branch_count>1?{count:e.org.branch_count,id:e.org.id}:null},getSchedule:function(){var t=e.schedule,a=c.getNow(n.regionManager.getRegion());return{open:c.isOpened(t,a,d),status:c.getShortStatusText(t,a,d)}},getPhone:function(e){var t=req("helpers/contact");return e=t.replaceDash(e,{os:n.os,type:"minicard"}),t.splitPhone(e)},prepareAttrs:function(e){function t(e){return e.replace(/([\wа-я]+(-[\wа-я]+)+)/gi,'<span class="miniCard__attrsItemWord">$1</span>')}return a.map(e,function(e){return t(e.name)})},rubricsToLowerCase:function(e){return a.compact(a.map(e,function(e){return e&&e.toLowerCase()}))}}},_={getHelperByType:function(){return e.type&&g[e.type]?g[e.type]:g.geo}};return e.query=e.query||{},_}},{lodash:"lodash"}],"/helpers/model.js":[function(e,t,n){var a=e("lodash");n.getCityName=function(e){if(!e)return"";if("adm_div"==e.type&&a.contains(["city","settlement"],e.subtype))return e.name||"";var t=a.find(e.adm_div,function(e){return"city"==e.type||"settlement"==e.type});return t&&t.name||""}},{lodash:"lodash"}],"/helpers/oldUrl.js":[function(e,t,n){function a(e){return"widget"==e.state&&e.firms?-1!=(e.firms+"").indexOf(","):!1}var i=e("lodash");n.convertOldUrl=function(e){var t=/^#((!|%21)\/|\/\?history=)/;if(-1==e.search(t))return!1;var n=e.replace(t,""),o=n.match(/\w+/)[0]||"",r="";"project"!=o&&(n="project/"+n);var s={},l=n.split("/"),c=l.length;if(2>c)return r;for(var u=0;c>u;u+=2)l[u]&&(s[l[u]]=decodeURIComponent(l[u+1]).replace(/2FF/gi,"/"));return i.each(s,function(e,t){switch(t){case"project":r+=isNaN(+e)?"/"+e:"/city/"+e;break;case"zoom":case"center":r+="/"+t+"/"+e;break;case"action":switch(e){case"searchInRubrics":"firms"==s.state&&s.srid&&(r+="/search/rubricId/"+s.srid);break;case"firmInBuild":"firms"==s.state&&s.id&&(r+="/inside/"+s.id);break;case"filials":"firms"==s.state&&s.id&&(r+="/branches/"+s.id);break;case"station":s.selectedStation&&(r+="/stop/"+s.selectedStation);break;case"route":s.selectedRoute&&(r+="/route/"+s.selectedRoute);break;case"search":s.what?r+="/search/"+s.what:s.where&&(r+="/search/"+s.where)}break;case"state":switch(e){case"firms":r+="/tab/firms";break;case"places":r+="/tab/geo";break;case"routes":r+="/tab/transport";break;case"widget":a(s)&&(r+="/profiles/"+s.firms)}break;case"modal":"share"==e?r+="/share":"feedback"==e&&(r+="/feedback/app")}}),r}},{lodash:"lodash"}],"/helpers/outputify.js":[function(e,t,n){var a=e("lodash");n.getName=function(e){if(!e)return"";var t=a.compact([e.primary,e.extension,e.addition]).join(", ");return t},n.getNameAddition=function(e){if(!e)return"";var t=a.compact([e.description,e.legal_name]).join(", ");return t},n.getAddress=function(e,t){var a=n.getSeparatedAddress(e,t);return a?a.join(" / "):""},n.getSeparatedAddress=function(e,t){var n=a.get(e,"components");return a.isEmpty(n)?[]:a.map(n,function(e){var n="";switch(e.type){case"number":n=e.number;break;case"location":n=e.comment;break;default:n="reversed"==t?e.number+",&nbsp;"+e.street:e.street+",&nbsp;"+e.number}return n})},n.getAddressOnly=function(e,t){var n=a.find(a.get(e,"components"),{type:"street_number"});return n?"reversed"==t?n.number+",&nbsp;"+n.street:n.street+",&nbsp;"+n.number:""}},{lodash:"lodash"}],"/helpers/panels.js":[function(e,t,n){var a=e("lodash"),i=["routeSearch","route","find","inbuild","filials","rubric","booklet","favorites","eventday","apartmentsMap","proposalsMap","products","floorList"],o=["servicing","article","flamp","reviews","gallery"],r=["apartmentsMap","proposalsMap"];n.isListType=function(e){return a.contains(["find","inbuild","filials","profiles","rubric","rubricsNear","servicing","flFirmList","floorList"],e)},n.isSearchType=function(e){return a.contains(["find","inbuild","filials","profiles","rubric","rubricsNear","filters"],e)},n.getModuleName=function(e){var t={find:"mixedResults",rubric:"mixedResults",inbuild:"mixedResults",servicing:"mixedResults",filials:"mixedResults",profiles:"mixedResults",rubricsNear:"mixedResults",firm:"firmCard",article:"articleCard",flamp:"reviewsCard",reviews:"reviewsCard",geo:"geoCard2",album:"photos",route:"routeCard",stop:"stopCard",platform:"stopCard",station:"metroCard",stationPlatform:"metroCard",stationEntrance:"metroCard",routeSearch:"routeResults",discounts:"discountsCard",rubrics:"rubricsList",award2015:"award",eventday:"eventCard",presents2015:"newYearGifts",summer2016:"summer","9may":"victory",subrubrics:"rubricsList",apartments:"apartmentsList",apartmentsMap:"apartmentsMapList",proposalsMap:"proposalsMapList",collections:"collectionsContainer",favorites:"favoritesContainer",favoritesEmpty:"favoritesEmptyList",ask:"cityQuora",weather:"forecast",flFirmList:"floorsResults"},n={find:"mediaResults",servicing:"mediaResults",firm:"mediaCard",filials:"mediaResults",photos:"mediaPhotos"},i={find:"floorsResults",profiles:"floorsResults"},o=t[e.type]||e.type;return"routeResults"==o&&a.contains(["car","pedestrian"],e.rsType)&&(o="autoResults"),e.floors&&i[e.type]?o=i[e.type]:e.media&&n[e.type]&&(o=n[e.type]),"products"==e.type&&e.id&&(o="productCard"),o},n.isStopTypeForMap=function(e){return 1===n.getPanelLevel(e)},n.getPanelLevel=function(e){return a.contains(i,e)?1:a.contains(o,e)?3:2},n.isStopTypeForDataViewer=function(e){e=e||{};var t=["find","rubric"];return a.contains(t,e.type)&&!e.house},n.isRouteSearchModule=function(e){return a.contains(["routeResults","autoResults"],e)},n.isFullWidthPanel=function(e){return a.contains(["booklet","photos","album","award2015","award","gallery","mediaResults","mediaCard","mediaPhotos","products","productCard","floorList"],e)},n.isPhotosPanel=function(e){return a.contains(["photos","album"],e)},n.isPaginableList=function(e){return a.contains(["find","inbuild","filials"],e)},n.getUniqueType=function(e){var t=[],n={};return a.forEachRight(e,function(e){n[e.type]||(n[e.type]=!0,t.unshift(e))}),t},n.getFrameType=function(e){return a.contains(r,e)?"invisibleFrame":"frame"}},{lodash:"lodash"}],"/helpers/parking.js":[function(e,t,n){"use strict";function a(e,t){if(!e.access||!d.has(e,"is_paid")||!d.includes(p,e.access))return"";var n=[],a={"public":t._pt("Доступность или предназначение парковки","Общедоступная"),customers_only:t._pt("Доступность или предназначение парковки","Для клиентов"),handicapped_only:t._pt("Доступность или предназначение парковки","Для инвалидов")};n.push(a[e.access]),n.push(e.is_paid?t._pt("Тип парковки по стоимости","Платная"):t._pt("Тип парковки по стоимости","Бесплатная"));var i=n.join(", ").toLowerCase();return h.capitalize(i)}function i(e,t){if(!e.access||!d.includes(p,e.access))return"";var n={"public":t._pt("Доступность или предназначение парковки","Общедоступная"),customers_only:t._pt("Доступность или предназначение парковки","Для клиентов"),handicapped_only:t._pt("Доступность или предназначение парковки","Для инвалидов")};return h.capitalize(n[e.access])}function o(e,t){if(!d.has(e,"is_paid")||!d.isBoolean(e.is_paid))return"";var n=e.is_paid?t._pt("Тип парковки по стоимости","Платная"):t._pt("Тип парковки по стоимости","Бесплатная");return h.capitalize(n)}function r(e,t){var n=["ground","underground","multilevel"];if(!d.includes(n,e.subtype))return"";var a=[],i={incentive:t._pt("Тип парковки","Перехватывающая"),ground:t._pt("Тип парковки","Наземная"),underground:t._pt("Тип парковки","Подземная"),multilevel:t._pt("Тип парковки","Многоуровневая")};return e.is_incentive&&a.push(i.incentive),e.subtype&&a.push(i[e.subtype]),a.join(", ").toLowerCase()}function s(e,t){if(!d.has(e,"capacity.total"))return null;var n=e.capacity.total,a=["-","<",">"],i=d.find(a,function(e){return n.indexOf(e)>-1}),o=void 0,r=void 0,s=void 0,l=void 0;switch(i){case"-":return o=n.split("-"),r=d.first(o),s=d.last(o),t._npt("Вместимость парковки","%2-%1 место","%2-%1 места","%2-%1 мест",s,r);case"<":case">":return l=n.match(/\d+/)[0],t._npt("Вместимость парковки","%2%1 места","%2%1 мест","%2%1 мест",l,i);default:return t._npt("Вместимость парковки","%1 место","%1 места","%1 мест",n)}}function l(e,t){var n=[];return n.push(o(e,t)),e.access_comment&&n.push(e.access_comment),n.join(" — ")}function c(e,t){return e.level_count?t._nt("%1 этаж","%1 этажа","%1 этажей",e.level_count):""}function u(e,t){var n=t.i18n,a={subtype:h.capitalize(r(e,n)),accessType:i(e,n),accessPaidType:l(e,n),levelCount:c(e,n),places:s(e,n)};return a}var d=e("lodash"),h=req("helpers/string"),p=["public","customers_only","handicapped_only"];t.exports={getAccessText:a,getAccessType:i,getAccessPaidType:o,getParkingType:r,getParkingData:u,getCapacity:s},t.exports._args=["model","$i18n"]},{lodash:"lodash"}],"/helpers/passway.js":[function(e,t,n){function a(e,t){var n={main:t._pt("Назначение прохода/проезда","Центральный"),additional:t._pt("Назначение прохода/проезда","Дополнительный"),service:t._pt("Назначение прохода/проезда","Служебный")};return r.capitalize(n[e])}function i(e,t){var n={"public":t._pt("Тип доступа для прохода/проезда","Бесплатный"),paid:t._pt("Тип доступа для прохода/проезда","Платный"),restricted:t._pt("Тип доступа для прохода/проезда","По пропускам")};return r.capitalize(n[e])}function o(e,t){var n={gate:t._pt("Название прохода/проезда","Ворота"),gate_barrier:t._pt("Название прохода/проезда","Шлагбаум"),turnstile:t._pt("Название прохода/проезда","Турникет"),wicket:t._pt("Название прохода/проезда","Калитка")};return n[e]||t._t("Проход/проезд")}var r=req("helpers/string");t.exports.getPasswayAttributes=function(e,t){var n=[];if("gate"!=e.type)return n;var o=a(e.purpose,t);o&&n.push({text:o,purpose:"passKind"});var r=i(e.access,t);return r&&n.push({text:r,purpose:"passAccess"}),n},t.exports.getPurposeText=a,t.exports.getAccessText=i,t.exports.getBarrierName=o},{}],"/helpers/photo.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/model.js");n.getCopyright=function(e,t){var n=e.copyright;if(!n||!n.code)return null;var i={flamp:{icon:"photos_copyright_flamp",text:t._gg("Предоставлено Flamp")},foursquare:{icon:"photos_copyright_foursquare",text:t._gg("Powered by Foursquare")},"2gis_owner":{icon:"photos_copyright_owner",text:t._t("Фотография от владельца")},user:{icon:"photos_copyright_2gis",text:t._t("Фотография от пользователя")},vk:{icon:"photos_copyright_vk",text:t._gg("Предоставлено ВКонтакте")},vsedomarossii:{icon:"photos_copyright_vsedoma",text:t._gg("Предоставлено Все дома России")},panoramio:{icon:"photos_copyright_panoramio",template:"panoramio",user:a.get(e,"owner.name"),text:t._t("Права на фотографии принадлежат их владельцам")}};return a.extend(i[n.code],{url:n.url,code:n.code})},n.getSeoParams=function(e,t,n){var a={type:"firmPhoto",cityName:i.getCityName(e),firmName:e.name,geoName:e.address_only||e.name,buildingAddress:e.address_only||e.address_name,firmAddress:e.address_only,id:e.id,photoId:t.photoId,bookletId:e.bookletId,ogImage:e.activePhoto.url,albumName:"common"!=t.albumName?t.albumName:null};switch("geo"==t.photosType?"building"==e.geoType?a.type="buildingPhoto":a.type="geoPhoto":"booklets"==t.photosType?a.type="firmBookletPhoto":"view"==t.albumName?(a.type="buildingPhoto",a.id=e.buildingId):"facilities"==t.albumName&&(a.type="firmPhotoSingle"),n){case"gallery":"geoPhoto"==a.type?a.type="geoPhotoAlbum":"buildingPhoto"==a.type?a.type="buildingPhotoAlbum":a.type="firmPhotoAlbum";break;case"mediaCard":
a.type="firmPhotoSingle"}return a}},{lodash:"lodash"}],"/helpers/request.js":[function(e,t,n){"use strict";function a(e){return e>=400&&500>e}function i(e){return a(e)?404:500}function o(){var e={},t=void 0;return s.each(s.toArray(arguments),function(n){switch(void 0===n?"undefined":r(n)){case"function":t=n;break;case"number":e.code=n;break;case"string":e.message=n;break;case"object":e=s.extend(e,n)}}),t?t(e):e}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=e("lodash");t.exports={isClientErrorCode:a,simplifyCode:i,emitError:o}},{lodash:"lodash"}],"/helpers/requestDispatcher.js":[function(e,t,n){t.exports=function(e,t,n){return function(){var a,i=[].slice.call(arguments),o=i[i.length-1];return i[i.length-1]=function(){e.emit("done",a),o.apply(this,arguments)},a=t.apply(n||e,i),a&&a.cancel&&e.emit("request",a),a}}},{}],"/helpers/requestFields.js":[function(e,t,n){var a=e("lodash"),i={regions:["items.code","items.name_grammatical_cases","items.locale","items.country_code","items.time_zone","items.default_pos","items.zoom_level","items.bounds","items.domain","items.statistics","items.flags","items.settlements","items.seo","items.online_languages"],geo:{geocode:["items.adm_div","items.region_id","items.address","items.links","items.is_paid","items.access","items.access_comment","items.capacity","items.floors","items.level_count"],geocodeLight:["items.region_id","hash"],geometry:["items.geometry.centroid","items.geometry.selection","items.geometry.style","items.floors"],address:["items.address","items.adm_div"],parking:["items.level_count","items.address","items.region_id","items.is_paid","items.access","items.access_comment","items.links","items.capacity","items.schedule"],attraction:["items.region_id","items.adm_div","items.description","items.context","items.links","items.external_content"],markers:["items.address","items.geometry.centroid","items.geometry.selection","items.region_id"],photoInfo:["items.region_id","items.external_content"],favorite:["items.geometry.centroid","items.geometry.selection","items.address","items.adm_div","items.region_id","items.group"],tooltip:["items.region_id","items.external_content","items.links","items.address"],analytics:["hash","search_attributes"],group:["items.group"]},rubric:{list:["items.rubrics"],get:["items.region_id"]},branch:{get:["items.adm_div","items.region_id","items.reviews","items.point","items.links","items.name_ex","items.org","items.group","items.see_also","items.dates","items.external_content","items.flags","items.ads.options","items.email_for_sending.allowed"],getProfiles:["items.adm_div","items.region_id","items.reviews","items.point","items.links","items.name_ex","items.org","items.dates","items.external_content","items.flags"],getShort:["items.adm_div","items.region_id","items.reviews","items.point","items.links","items.name_ex","items.dates","items.external_content"],minimal:["items.name_ex","items.region_id"],bare:["items.region_id"],getPhotoInfo:["items.adm_div","items.name_ex","items.flags","items.region_id","items.external_content","items.reviews","items.group"],getReviewsInfo:["items.adm_div","items.name_ex","items.point","items.region_id","items.reviews","items.org"],getOrgReviewsInfo:["items.point","items.address","items.links"],markers:["markers"],filters:["widgets","filters"],dym:["dym"],search:["request_type","items.adm_div","items.contact_groups","items.flags","items.address","items.rubrics","items.name_ex","items.point","items.external_content","items.org","items.group","items.reg_bc_url","items.schedule","items.ads.options","context_rubrics"],list:["items.region_id","items.adm_div","items.contact_groups","items.flags","items.address","items.rubrics","items.name_ex","items.point","items.external_content","items.schedule","items.org","items.ads.options","items.reg_bc_url"],filter:{schedule:["items.schedule"],noServicing:["items.reviews"],rubric:["context_rubrics"],reqType:["request_type"]},favorite:["items.adm_div","items.point","items.name_ex","items.region_id","items.reviews","items.group"],tooltip:["items.reviews","items.address","items.adm_div","items.name_ex","items.region_id","items.stop_factors","items.external_content"],analytics:["hash","search_attributes"],analyticsExtra:["request_type"]},station:{list:["items.routes"]},route:["items.region_id"]};t.exports=function(e){function t(e){return a.isArray(e)?e:a.isObject(e)?a.map(a.keys(e),function(n){return t(e[n])}):null}e=e||[];var n=[];return n=a.map(e,function(e){var n=e.split("."),o=i;return a.each(n,function(e){o=o[e]}),t(o)}),a.uniq(a.flatten(n,!0)).join(",")}},{lodash:"lodash"}],"/helpers/requestWrappers/cache.js":[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=e("lodash"),o=e("scache"),r={cancel:function(){}};t.exports=function(e){var t={expirationTime:e.config["weather.cacheExpirationTime"],keyParams:["regionId"]},n={expirationTime:e.config["floors.cacheExpirationTime"],keyParams:["regionId"]},s={"region/list":{expirationTime:e.config.projectListTTL},getWeatherNow:t,getForecast:t,getFloorsList:n};return s[e.config["awardApi.url"]]={expirationTime:e.config["awardApi.cacheExpirationTime"],keyParams:["region_id","onlyFirmsIds"]},{wrap:function(e){return function(t,n,l){if(t in s){var c=function(){var a=s[t],c=["request",t];a.keyParams&&(c=c.concat(i.map(a.keyParams,function(e){return n[e]})));var u=c.join(".");return o.exists(u)?(l(null,i.cloneDeep(o.get(u)),200),{v:r}):{v:e(t,n,function(e,t){e||o.set(u,t,a.expirationTime),l.apply(this,arguments)})}}();if("object"===(void 0===c?"undefined":a(c)))return c.v}return e.apply(this,arguments)}}}}},{lodash:"lodash",scache:474}],"/helpers/requestWrappers/stash.js":[function(e,t,n){var a=e("lodash"),i=req("lib/sendError");t.exports=function(e){function t(e){return a.escape(e).replace(/[.&%]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function n(e){var i=[];return a.each(e,function(e,o){if(-1==a.indexOf(["key"],o)){var r=a.isObject(e)?"{"+n(e)+"}":t(e);i.push(t(o)+"="+r)}}),i.join("&")}function o(){var e=a.map(arguments,function(e){if(a.isFunction(e))return null;if(a.isObject(e)){var t=[];return n(a.omit(e,t))}return a.isString(e)?e:""});return a.compact(e).join(".")}function r(t){return!e.ua().isDesktop&&"loadRegions"==t}function s(e,t,n){if(!e)return null;e="object"==typeof e?e:{error:e};try{if(JSON.stringify(e).length<t)return e;throw Error("Error object too big; dropping.")}catch(a){i("[stash::safeDump] "+a.message,n)}return null}function l(e){function t(t,n){for(var a,i=t.split("."),o=i.pop(),r=e;a=i.shift();)r[a]=r[a]||{},r=r[a];n(r,o)}return{setVal:function(e,n){t(e,function(e,t){e[t]=n})},getVal:function(t){for(var n,a=t.split("."),i=e;n=a.shift();){if(!i)return null;i=i[n]}return i},delVal:function(e){t(e,function(e,t){delete e[t]})}}}var c=e.requireComponent("syncRegistry"),u={wrap:function(t){return function(n,i){var u=o.apply(null,arguments),d=c.sync("stash_"+u,{}),h=l(d);if(r(i))return t.apply(this,arguments);var p=arguments.length-1,f=arguments[p],m=[].slice.call(arguments);if(e.isServer)return m[p]=function(e,t,o){e&&e.connection&&(e=a.pick(e,["rawHeaders","statusCode","statusMessage","body"]),e.body=e.body?e.body.substr(0,512):"");var r=a.cloneDeep(t);r&&(r._fromStash=!0);var l=a.cloneDeep(o),c=a.cloneDeep(s(e,2048,{method:n,purpose:i})),d=[c,e?null:r,l];h.setVal(u,d),f.apply(null,arguments)},t.apply(null,m);var g=h.getVal(u);return g?(f.apply(null,g),h.delVal(u),{cancel:a.identity}):t.apply(null,m)}}};return u}},{lodash:"lodash"}],"/helpers/round.js":[function(e,t,n){t.exports=function(e,t){var n,a,i=e[0],o=e[e.length-1],r=[];t=t||5,r[0]=i;for(var s=1;s<e.length-1;s++){var l,c,u,d=e[s];if(n=Math.min(e[s+1]-d,d-e[s-1]),0>=n)throw Error("Bad array sorting");c=n/t,u=1e12;do{var h=parseFloat((Math.round(d/u)*u).toFixed(10));a=Math.abs(h-d),c>=a&&(l=h),u/=10}while(a>c&&u>1e-5);r[s]=l||d}return r.push(o),r}},{}],"/helpers/roundMeters.js":[function(e,t,n){n.convertMeters=function(t,n){if(!t)return null;var a=e("./string"),i=t,o="m";return i>=1e3&&(o="km",i/=1e3,i=Math.floor(i)!=i?i.toFixed(1):i.toFixed(0)),{unit:o,distance:a.numberString(i,n)}}},{"./string":"/helpers/string.js"}],"/helpers/route.js":[function(e,t,n){function a(e,t){var n={bus:t._t("Автобус"),suburban_train:t._t("Электропоезд"),trolleybus:t._t("Троллейбус"),tram:t._t("Трамвай"),shuttle_bus:t._t("Маршрутное такси"),metro:t._t("Метро"),river_transport:t._t("Речной транспорт"),funicular_railway:t._t("Фуникулер"),monorail:t._t("Монорельс"),cable_car:t._t("Канатная дорога"),light_rail:t._t("Скоростной трамвай"),premetro:t._t("Метротрам"),light_metro:t._t("Лёгкое метро"),aeroexpress:t._t("Аэроэкспресс")};return n[e]||""}function i(e){var t,n={bus:"#5d86dd",trolleybus:"#5d86dd",tram:"#5d86dd",shuttle_bus:"#5d86dd",suburban_train:"#3e7c17",aeroexpress:"#ed1c24",funicular_railway:"#5d86dd",monorail:"#5d86dd",river_transport:"#0087fa",cable_car:"#5d86dd",light_rail:"#5d86dd",premetro:"#5d86dd",light_metro:"#5d86dd",_default:"#5d86dd"};return t=e.color?e.color:n[e.subtype]||n._default}var o=e("lodash");n.splitRouteName=function(e){var t={name:e,note:""},n=/^(.*?)\s*(\(.*\))/.exec(e);return null!==n&&(t.name=n[1],t.note=n[2]),t},n.cutRoute=function(e){var t,n,a,i,r=[],s=!0;return o.each(e.directions,function(e){var t=o.map(e.platforms,function(e){return e.id});r.push(t)}),t=["metro","suburban_train","aeroexpress","funicular_railway","cable_car","premetro"],n=-1!=o.indexOf(t,e.subtype),n&&(a=o.intersection.apply(this,r),o.each(r,function(e){a.length!=e.length&&(s=!1)})),i=n&&s,i&&(e.directions=[o.first(e.directions)]),e},n.getTransportTypeText=a,n.getRouteColor=i,n.getRouteDescription=function(e,t){return e.directions&&1==e.directions.length&&"loop"==o.first(e.directions).type?t._t("Кольцевой маршрут"):e.from_name+" → "+e.to_name}},{lodash:"lodash"}],"/helpers/routeSearch.js":[function(e,t,n){function a(e){return c.contains(["walkway","crossing"],e.type)}function i(e,t){var n=e.movements[t];if(a(n)){var i=e.movements[t-1],o=e.movements[t+1];return i&&o&&i.metro&&o.metro?"subwayAfoot":"afoot"}return u.convertUnderScoreToCamel(n.waypoints.start.subtype)||"bus"}function o(e){return!a(e)&&e.outcoming_line&&e.outcoming_line.color}function r(e){return c.first(e.routes)}function s(e,t){var n=e&&e.movements&&e.movements[t];return n&&r(n)}function l(e,t){var n=req("lib/geo/bound"),a=t.getRegions();return c.find(a,function(t){return n.pointInBound(e,t.bounds)})}var c=e("lodash"),u=req("helpers/string"),d=req("lib/wkt")();n.setAdditionalData=function(e,t,n,a){if(!e||!e.movements)return null;var r=n.config.defaultRouteColor;return e.searchType="bus",e.metroEntrances=[],e.waypoints=c.map(e.movements,function(n,s){var l=e.movements[s-1]||{},u=n.waypoint,h=o(n);n.color=h||r,u.color=h||l.color||r;var p=0==s,f=s==e.movements.length-1;u.isKeypoint=p||f;var m;return u.isKeypoint?(m=p?t.from:t.to,u.name=m.text):m=c.first(d.parsePolyline(c.first(n.alternatives[0].geometry).selection)),u.geometry={selection:"POINT("+m.lon+" "+m.lat+")"},n.waypoints={start:u},p||(l.waypoints.end=u),u.nextMovementType=i(e,s),a&&c.get(n,"alternatives[0].entrances")&&c.each(n.alternatives[0].entrances,function(t){t.geometry={selection:t.geometry},e.metroEntrances.push(t)}),u}),e.movements.pop(),e},n.getColorsFromModel=function(e){return e&&e.movements&&e.movements.length?{from:c.first(e.movements).waypoints.start.color,to:c.last(e.movements).waypoints.end.color}:{from:null,to:null}},n.getFirstRouteByMovementKey=s,n.getMovementType=i,n.changePanelType=function(e,t){var n=["bus","subway"],a=["car","pedestrian"],i=[e,t];return c.intersection(n,i).length&&c.intersection(a,i).length},n.getRsRegions=function(e,t,n){var a=req("lib/geo/bound"),i=n.getRegion();return a.pointInBound(e,i.bounds)&&a.pointInBound(t,i.bounds)?null:{current:i,from:l(e,n),to:l(t,n)}},n.checkInitData=function(e){var t=["from.lon","from.lat","to.lon","to.lat"];return c.every(t,function(t){return c.get(e,t)})},t.exports._args=["point","$regionManager"]},{lodash:"lodash"}],"/helpers/schedule.js":[function(e,t,n){"use strict";var a=e("./time").getMoment,i=e("./schedule/core"),o=e("./schedule/localize");n.getNow=function(e){return i.getNowFromMoment(a(e))},n.isOpened=i.isOpened,n.is24x7=i.is24x7,n.isEveryDay=i.isEveryDay,n.getComment=i.getComment,n.getTodayWorktimeText=function(e,t,n){var a=i.getTodayWorktime(e,t);return o.localizeTodayWorktime(a,!1,n)},n.getMediaTodayWorktimeText=function(e,t,n){var a=i.getTodayWorktime(e,t);return o.localizeTodayWorktime(a,!0,n)},n.getTodayBreaktimeText=function(e,t,n){var a=i.getTodayBreakHours(e,t);return o.getTodayBreaktimeText(a,n)},n.getStatusText=function(e,t,n){var a=i.getStatus(e,t);return o.getStatusText(a,n)},n.getShortStatusText=function(e,t,n){var a=i.isOpened(e,t,n),r=i.is24x7(e);return o.getShortStatusText(a,r,n)},n.getWeekTable=function(e,t,n){var a=i.getWeekTable(e,t);return o.localizeWeekTable(a,{firstDayOffset:n.getFormats("time.weekFirstDayOffset"),merge:!n.getSettings("firms.doNotMergeWorkingHours"),format:n.getFormats("time.short")})}},{"./schedule/core":"/helpers/schedule/core.js","./schedule/localize":"/helpers/schedule/localize.js","./time":"/helpers/time.js"}],"/helpers/schedule/constants.js":[function(e,t,n){"use strict";n.DAY_KEYS=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],n.INNER_TIME_FORMAT="HH:mm",n.WORK_TODAY="TODAY",n.WORK_EVERYDAY="EVERYDAY",n.WORK_24x7="24x7",n.WORK_NOT_WORKING="NOT_WORKING",n.BREAK_LUNCH="LUNCH",n.BREAK_REST="REST",n.STATUS_OPENED="OPENED",n.STATUS_WILL_CLOSE_IN_MINUTE_FOR_BREAK="WILL_CLOSE_IN_MINUTE_FOR_BREAK",n.STATUS_WILL_CLOSE_IN_MINUTE="WILL_CLOSE_IN_MINUTE",n.STATUS_WILL_CLOSE_IN_TIME_FOR_BREAK="WILL_CLOSE_IN_TIME_FOR_BREAK",n.STATUS_WILL_CLOSE_IN_TIME="WILL_CLOSE_IN_TIME",n.STATUS_WILL_OPEN_AT_TIME="WILL_OPEN_AT_TIME",n.STATUS_WILL_OPEN_AT_DAY_AT_TIME="WILL_OPEN_AT_DAY_AT_TIME",n.STATUS_WILL_OPEN_TOMORROW_AT_TIME="WILL_OPEN_TOMORROW_AT_TIME",n.STATUS_WILL_OPEN_OVERMORROW_AT_TIME="WILL_OPEN_OVERMORROW_AT_TIME",n.STATUS_WILL_OPEN_IN_MINUTE="WILL_OPEN_IN_MINUTE",n.STATUS_WILL_OPEN_IN_TIME="WILL_OPEN_IN_TIME",n.STATUS_WILL_OPEN_IN_MINUTE_FROM_BREAK="WILL_OPEN_IN_MINUTE_FROM_BREAK",n.STATUS_WILL_OPEN_IN_TIME_FROM_BREAK="WILL_OPEN_IN_TIME_FROM_BREAK",n.STATUS_WILL_OPEN_AT_TIME_FROM_BREAK="WILL_OPEN_AT_TIME_FROM_BREAK",n.EVENT_OPEN="OPEN",n.EVENT_CLOSE="CLOSE"},{}],"/helpers/schedule/core.js":[function(e,t,n){"use strict";function a(e,t){var n=f.getDayFromToday(t,6),a=e[n]&&f.getOverlappingWorkingHours(e[n].working_hours),i=p.get(e[t],"working_hours",[]);return{working_hours:a?[a].concat(i):i}}function i(e,t){if(l(e))return{type:w};var n=e[t.day];return n?{type:o(e)?k:b,intervals:n.working_hours}:{type:x}}function o(e){return!!f.areDaysEqual(v,e)}function r(e,t){return f.getBreakHours(p.get(e[t.day],"working_hours"))}function s(e,t){if(l(e))return{type:C};var n=c(e,t);if(n.length<2)return null;var a=n[0],i=n[1],o=f.timeTo(t.time,a.time,a.dayOffset);if(a.type==O){if(o>=g)return{type:C};var s=f.getBreakTypeBetweenEvents(a,i);return 1>=o?{type:s?L:I,breakType:s}:{type:s?T:S,breakType:s,minutesTo:o}}if(a.type==F){var u=a.dayOffset,d=p.contains(m,t.day);if(0==u){var h=r(e,t),_=f.findInterval(h,t.time),v=_&&f.getBreakType(_);return o>=g?{type:v?B:E,breakType:v,time:a.time}:1>=o?{type:v?R:A,breakType:v}:{type:v?N:D,breakType:v,minutesTo:o}}return 1==u?{type:j,time:a.time}:2!=u||d?{type:P,day:f.getDayFromToday(t.day,a.dayOffset),time:a.time}:{type:M,time:a.time}}return null}function l(e){return e.is_24x7||!p.find(v,function(t){var n=p.get(e[t],["working_hours",0]);return!(n&&"00:00"==n.from&&"24:00"==n.to)})}function c(e,t){var n=v.indexOf(t.day),a=[].concat(v.slice(n),v.slice(0,n+1)),i=f.getDayFromToday(t.day,6),o=p.get(e[i],"working_hours"),r=f.splitIntervalToEvents(f.getOverlappingWorkingHours(o));return p.chain(a).map(function(t){return e[t]}).map(function(e,t){return p.map(p.get(e,"working_hours"),function(e){return p.assign({},e,{dayOffset:t})})}).flatten().reduce(function(e,t){return e.concat(f.splitIntervalToEvents(t))},p.tail(r)).filter(function(e){return e.dayOffset>0||e.time>t.time}).take(2).value()}function u(e,t){var n=p.map(v,function(n,a){var i=e[n];return p.assign({},i,{today:n==t.day,dayoff:!i,index:a})});return n}function d(e,t){return t?p.pick({first:p.head(f.mergeWorkHours(e)),second:p.head(f.getBreakHours(e))},p.identity):p.pick({first:p.head(e),second:p.head(f.mergeWorkHours(e.slice(1)))},p.identity)}function h(e){return e.comment}var p=e("lodash"),f=e("./utils"),m=["Sun","Sat"],g=60,_=e("./constants"),v=_.DAY_KEYS,y=_.INNER_TIME_FORMAT,b=_.WORK_TODAY,k=_.WORK_EVERYDAY,w=_.WORK_24x7,x=_.WORK_NOT_WORKING,C=_.STATUS_OPENED,L=_.STATUS_WILL_CLOSE_IN_MINUTE_FOR_BREAK,I=_.STATUS_WILL_CLOSE_IN_MINUTE,T=_.STATUS_WILL_CLOSE_IN_TIME_FOR_BREAK,S=_.STATUS_WILL_CLOSE_IN_TIME,E=_.STATUS_WILL_OPEN_AT_TIME,P=_.STATUS_WILL_OPEN_AT_DAY_AT_TIME,j=_.STATUS_WILL_OPEN_TOMORROW_AT_TIME,M=_.STATUS_WILL_OPEN_OVERMORROW_AT_TIME,A=_.STATUS_WILL_OPEN_IN_MINUTE,D=_.STATUS_WILL_OPEN_IN_TIME,R=_.STATUS_WILL_OPEN_IN_MINUTE_FROM_BREAK,N=_.STATUS_WILL_OPEN_IN_TIME_FROM_BREAK,B=_.STATUS_WILL_OPEN_AT_TIME_FROM_BREAK,F=_.EVENT_OPEN,O=_.EVENT_CLOSE;n.getDayWithOverlap=a,n.getTodayWorktime=i,n.isEveryDay=o,n.getTodayBreakHours=r,n.isOpened=function(e,t){if(l(e))return!0;var n=a(e,t.day),i=f.findInterval(n.working_hours,t.time);return!!i},n.getStatus=s,n.is24x7=l,n.getNowFromMoment=function(e){return{day:v[e.day()],time:e.format(y)}},n.getNextEvents=c,n.getWeekTable=u,n.getDayTableParts=d,n.getComment=h},{"./constants":"/helpers/schedule/constants.js","./utils":"/helpers/schedule/utils.js",lodash:"lodash"}],"/helpers/schedule/localize.js":[function(e,t,n){"use strict";function a(e,t,n){var a={merge:!n.getSettings("firms.doNotMergeWorkingHours"),format:n.getFormats("time.short"),is12h:n.getFormats("time.is12h")},o=i(e.intervals,a);switch(e.type){case C:return n._t("Сегодня выходной");case x:return t?n._t("Работает круглосуточно"):n._t("Круглосуточно");case k:return t?n._t("Работает сегодня")+" "+o:n._t("Сегодня")+" "+o;case w:return t?n._t("Работает ежедневно")+" "+o:n._t("Ежедневно")+" "+o;default:return""}}function i(e,t){if(!e)return"";var n=t.merge?m.mergeWorkHours(e):e;return h.map(n,h.partial(o,h,t)).join(_)}function o(e,t){var n=t.format,a=t.is12h,i=a?" "+g+" ":g;return""+l(e.from,n)+i+l(e.to,n)}function r(e,t){switch(e){case L:return t._pt("Тип перерыва","обед");case I:default:return t._pt("Тип перерыва","перерыв")}}function s(e,t){var n=parseInt(e/60,10),a=e%60,i=t._nt("%1 минуту","%1 минуты","%1 минут",a);if(!n)return i;var o=t._nt("%1 час","%1 часа","%1 часов",n);return o+" "+i}function l(e,t){return t!=b?p(e,b).format(t):e}function c(e,t){switch(e){case"Mon":return t._t("в понедельник");case"Tue":return t._t("во вторник");case"Wed":return t._t("в среду");case"Thu":return t._t("в четверг");case"Fri":return t._t("в пятницу");case"Sat":return t._t("в субботу");case"Sun":return t._t("в воскресенье");default:return""}}function u(e,t){return h.map(m.reorderDays(e,t.firstDayOffset),function(e){var n=d(e.working_hours,{merge:t.merge,format:t.format}),a=p().isoWeekday(e.index);return{today:e.today,dayoff:e.dayoff,parts:n,key:a.format("dd"),longkey:a.format("dddd")}})}function d(e,t){if(!e)return null;var n=f.getDayTableParts(e,t.merge);return h.mapValues(n,function(e){return h.mapValues(e,h.partial(l,h,t.format))})}var h=e("lodash"),p=e("moment"),f=e("./core"),m=e("./utils"),g="–",_=", ",v=", ",y=e("./constants"),b=y.INNER_TIME_FORMAT,k=y.WORK_TODAY,w=y.WORK_EVERYDAY,x=y.WORK_24x7,C=y.WORK_NOT_WORKING,L=y.BREAK_LUNCH,I=y.BREAK_REST,T=y.STATUS_OPENED,S=y.STATUS_WILL_CLOSE_IN_MINUTE_FOR_BREAK,E=y.STATUS_WILL_CLOSE_IN_MINUTE,P=y.STATUS_WILL_CLOSE_IN_TIME_FOR_BREAK,j=y.STATUS_WILL_CLOSE_IN_TIME,M=y.STATUS_WILL_OPEN_AT_TIME,A=y.STATUS_WILL_OPEN_AT_DAY_AT_TIME,D=y.STATUS_WILL_OPEN_TOMORROW_AT_TIME,R=y.STATUS_WILL_OPEN_OVERMORROW_AT_TIME,N=y.STATUS_WILL_OPEN_IN_MINUTE,B=y.STATUS_WILL_OPEN_IN_TIME,F=y.STATUS_WILL_OPEN_IN_MINUTE_FROM_BREAK,O=y.STATUS_WILL_OPEN_IN_TIME_FROM_BREAK,z=y.STATUS_WILL_OPEN_AT_TIME_FROM_BREAK;n.localizeTodayWorktime=a,n.getIntervalsText=i,n.getReadableInterval=o,n.getTodayBreaktimeText=function(e,t){var n=t.getFormats("time.short"),a=t.getFormats("time.is12h");return h.map(e,function(e){var i=o(e,{format:n,is12h:a}),s=r(m.getBreakType(e),t);return s+" "+i}).join(v)},n.getStatusText=function(e,t){if(!e)return"";var n=t.getFormats("time.short");switch(e.type){case T:return t._t("Открыто");case S:return t._t("Меньше минуты до закрытия на %1",r(e.breakType,t));case E:return t._t("Закроется менее чем через минуту");case P:return t._t("Через %1 закрывается на %2",s(e.minutesTo,t),r(e.breakType,t));case j:return t._t("Закроется через %1",s(e.minutesTo,t));case M:return t._t("Откроется в %1",l(e.time,n));case A:return t._t("Откроется %1 в %2",c(e.day,t),l(e.time,n));case D:return t._t("Откроется завтра в %1",l(e.time,n));case R:return t._t("Откроется послезавтра в %1",l(e.time,n));case N:return t._t("Откроется менее чем через минуту");case B:return t._t("Откроется через %1",s(e.minutesTo,t));case F:return t._t("%1. Откроется менее чем через минуту",r(e.breakType,t));case O:return t._t("%1. Откроется через %2",r(e.breakType,t),s(e.minutesTo,t));case z:return t._t("%1. Откроется в %2",r(e.breakType,t),l(e.time,n));default:return""}},n.formatTime=l,n.localizeWeekTable=u,n.getTableDayLocalizedParts=d,n.getShortStatusText=function(e,t,n){return t?n._t("Круглосуточно"):e?n._t("Открыто"):n._t("Закрыто")}},{"./constants":"/helpers/schedule/constants.js","./core":"/helpers/schedule/core.js","./utils":"/helpers/schedule/utils.js",lodash:"lodash",moment:"moment"}],"/helpers/schedule/utils.js":[function(e,t,n){"use strict";function a(e){var t=_.findLast(e,function(e){return e.from>e.to});return t?{from:v,to:t.to}:null}function i(e){var t=e.to!=v?e.to:u(e.to);return e.from>="12:00"&&"16:00">=t?x:C}function o(e,t){return e.dayOffset!=t.dayOffset?null:i({from:e.time,to:t.time})}function r(e,t){return w[(w.indexOf(e)+t)%7]}function s(e,t,n){var a=l(e),i=l(t);return i.m-a.m+(i.h-a.h)*y+n*b}function l(e){var t=e.split(":");return{h:+t[0],m:+t[1]}}function c(e,t){var n=t.from,a=t.to>t.from?t.to:u(t.to);return e>=n&&a>e}function u(e){var t=e.split(":");return+t[0]+24+":"+t[1]}function d(e,t){return!_.some(e.slice(1),function(n){return!_.isEqual(t[n],t[e[0]])})}function h(e,t){return _.find(e,function(e){return c(t,e)})}function p(e){if(!e)return[];var t=e.to<e.from;return[{type:L,time:e.from,dayOffset:e.dayOffset||0},{type:I,time:e.to,dayOffset:(e.dayOffset||0)+ +t}]}function f(e){return _.isEmpty(e)?null:[{from:_.first(e).from,to:_.last(e).to}]}function m(e){return _.reduce(e,function(e,t){var n=_.last(e);return n&&(n.to=t.from),e.concat({from:t.to})},[]).slice(0,-1)}function g(e,t){return 1==t?[].concat(e.slice(1),e[0]):e}var _=e("lodash"),v="00:00",y=60,b=1440,k=e("./constants"),w=k.DAY_KEYS,x=k.BREAK_LUNCH,C=k.BREAK_REST,L=k.EVENT_OPEN,I=k.EVENT_CLOSE;n.getOverlappingWorkingHours=a,n.getBreakType=i,n.getBreakTypeBetweenEvents=o,n.getDayFromToday=r,n.timeTo=s,n.parseTime=l,n.isTimeInInterval=c,n.add24h=u,n.areDaysEqual=d,n.findInterval=h,n.splitIntervalToEvents=p,n.mergeWorkHours=f,n.getBreakHours=m,n.reorderDays=g},{"./constants":"/helpers/schedule/constants.js",lodash:"lodash"}],"/helpers/seo.js":[function(e,t,n){function a(e,t){return{title:e,description:t}}function i(e){return{global:a(e._gg("Карта городов $countryGenitive: $cities — 2ГИС"),e._gg("Подробная карта городов $countryGenitive: поиск по адресу, телефоны, отзывы, фото, часы работы фирм и удобный поиск проезда.")),cities:a(e._t("Города на карте 2ГИС — улицы, дома, справочник организаций городов $countryNameGenitive"),e._t("Подробная карта городов $countryNameGenitive с детализацией до дома: поиск по адресу + телефоны, отзывы, фото, часы работы фирм + удобный поиск проезда на авто и городском транспорте.")),noCity:a(e._t("Карта c улицами, домами и организациями города — 2ГИС"),e._t("Подробная карта с детализацией до дома: поиск по адресу + телефоны, отзывы, фото, часы работы фирм + удобный поиск проезда на авто и городском транспорте.")),"cityProject.city":a(e._t("Карта $cityNameGenitive: улицы, дома и организации города — 2ГИС"),e._t("Подробная карта $cityNameGenitive с детализацией до дома: поиск по адресу + телефоны, отзывы, фото, часы работы фирм + удобный поиск проезда на авто и городском транспорте.")),"cityProject.customTitleDescription":a(e._t("Карта $seoTitle: улицы, дома и организации города — 2ГИС"),e._t("Подробная карта $seoDescription с детализацией до дома: поиск по адресу + телефоны, отзывы, фото, часы работы фирм + удобный поиск проезда на авто и городском транспорте.")),"cityProject.street":a(e._t("Улица $streetName в $cityNamePrepositional — 2ГИС"),e._t("Улица $streetName на карте $cityNameGenitive с указанием маршрутов, кафе, ресторанов, магазинов и другой полезной информации.")),"cityProject.building.withBuildingName":a(e._t("$buildingName, улица $geoName в $cityNamePrepositional — 2ГИС"),e._t("$buildingName, улица $geoName в $cityNamePrepositional: организации в здании и удобные способы доехать до места.")),"cityProject.building.withoutBuildingName":a(e._t("Улица $geoName в $cityNamePrepositional — 2ГИС"),e._t("Улица $geoName в $cityNamePrepositional: организации в здании и удобные способы доехать до места.")),"cityProject.building.withoutBuildingName.withoutName.withBuildingType":a(e._t("$gateType в $cityNamePrepositional — 2ГИС"),e._t("$gateType в $cityNamePrepositional: подробная карта с детализацией до дома: поиск по адресу + телефоны, отзывы, фото, часы работы фирм + удобный поиск проезда на авто и городском транспорте.")),"cityProject.inbuild":a(e._t("Организации по адресу $geoName в $cityNamePrepositional — 2ГИС"),e._t("Адреса, номера телефонов, время работы, отзывы и фото организаций по адресу $geoName в $cityNamePrepositional.")),"cityProject.booklet.buildings":a(e._gg("Новостройка $bookletName от застройщика $firmName в $cityNamePrepositional — 2ГИС"),e._gg("Квартиры в новостройке $bookletName от застройщика $firmName, $cityName, $address: $attributes.")),"cityProject.bookletPage.buildings":a(e._gg("$pageTitle новостройки $bookletName от застройщика $firmName в $cityNamePrepositional — 2ГИС"),e._gg("$pageTitle новостройки $bookletName от застройщика $firmName, $cityName, $address: $attributes.")),"cityProject.rubricsNear":a(e._gg("Инфраструктура рядом с новостройкой $bookletName ($firmName) в $cityNamePrepositional — 2ГИС"),e._gg("Инфраструктура на карте рядом с новостройкой $bookletName, $cityName, $address: школы, детские сады, магазины, банки, поликлиники.")),"cityProject.booklet.sauna":a(e._gg("Сауна «$firmName» в $cityNamePrepositional — 2ГИС"),e._gg("Цены, фотографии и время работы сауны «$firmName» по адресу $address. От $price рублей в час, до $capacity посетителей, $details.")),"cityProject.booklet.saunaRooms":a(e._gg("Сауна «$firmName» в $cityNamePrepositional — 2ГИС"),e._gg("Цены, фотографии и время работы сауны «$firmName». Вся информация о номерах, типах парных и услугах.")),"cityProject.bookletPage.saunaRoom":a(e._gg("Сауна «$firmName» ($room) в $cityNamePrepositional — 2ГИС"),e._gg("Цены, фотографии и время работы сауны «$firmName» ($room). От $price рублей в час, до $capacity посетителей, $details.")),"cityProject.booklet.provider":a(e._gg("$firmDescription $firmName в $cityNamePrepositional — 2ГИС"),e._gg("Описание всех тарифов интернет-провайдера $firmName: цены, скорость, акции, возможность оставить заявку на подключение.")),"cityProject.bookletProvidersAggregator":a(e._gg("Лучшие тарифы от интернет-провайдеров $cityNameGenitive — 2ГИС"),e._gg("Введите адрес, узнайте тарифы интернет-провайдеров, обслуживающих ваш дом, и оставьте заявку на подключение. $providers.")),"cityProject.firm.withAddress":a(e._t("$firmName в $cityNamePrepositional ($firmAddress) — 2ГИС"),e._t("$firmName в $cityNamePrepositional ($firmAddress): адреса, номера телефонов, время работы и как доехать. $attributes")),"cityProject.firm.withoutAddress":a(e._t("$firmName в $cityNamePrepositional — 2ГИС"),e._t("$firmName в $cityNamePrepositional: адреса, номера телефонов, время работы и как доехать. $attributes")),"cityProject.firmPhoto.withAddress":a(e._t("$firmName в $cityNamePrepositional, $firmAddress: фото — 2ГИС"),e._t("$firmName в $cityNamePrepositional, $firmAddress: большая подборка фотографий от пользователей и владельцев компании.")),"cityProject.firmPhoto.withoutAddress":a(e._t("$firmName в $cityNamePrepositional: фото — 2ГИС"),e._t("$firmName в $cityNamePrepositional: большая подборка фотографий от пользователей и владельцев компании.")),"cityProject.firmPhotoSingle.withAddress":a(e._t("$firmName в $cityNamePrepositional, $firmAddress: фото — 2ГИС"),e._t("$firmName в $cityNamePrepositional, $firmAddress: большая подборка фотографий от пользователей и владельцев компании.")),"cityProject.firmPhotoSingle.withoutAddress":a(e._t("$firmName в $cityNamePrepositional: фото — 2ГИС"),e._t("$firmName в $cityNamePrepositional: большая подборка фотографий от пользователей и владельцев компании.")),"cityProject.firmBookletPhoto.withAddress":a(e._t("$firmName в $cityNamePrepositional, $firmAddress: фото — 2ГИС"),e._t("$firmName в $cityNamePrepositional, $firmAddress: большая подборка фотографий от пользователей и владельцев компании.")),"cityProject.firmBookletPhoto.withoutAddress":a(e._t("$firmName в $cityNamePrepositional: фото — 2ГИС"),e._t("$firmName в $cityNamePrepositional: большая подборка фотографий от пользователей и владельцев компании.")),"cityProject.firmPhotoAlbum.withAddress":a(e._t("$firmName в $cityNamePrepositional, $firmAddress: фото — 2ГИС"),e._t("$firmName в $cityNamePrepositional, $firmAddress: большая подборка фотографий от пользователей и владельцев компании.")),"cityProject.firmPhotoAlbum.withoutAddress":a(e._t("$firmName в $cityNamePrepositional: фото — 2ГИС"),e._t("$firmName в $cityNamePrepositional: большая подборка фотографий от пользователей и владельцев компании.")),"cityProject.buildingPhotoAlbum":a(e._t("Улица $buildingAddress в $cityNamePrepositional: фото — 2ГИС"),e._t("Улица $buildingAddress в $cityNamePrepositional: большая подборка фотографий от пользователей и владельцев компании.")),"cityProject.geoPhoto":a(e._t("$geoName в $cityNamePrepositional: фото — 2ГИС"),e._t("$geoName в $cityNamePrepositional: большая подборка фотографий от пользователей и владельцев компании.")),"cityProject.geoPhotoAlbum":a(e._t("$geoName в $cityNamePrepositional: фото — 2ГИС"),e._t("$geoName в $cityNamePrepositional: большая подборка фотографий от пользователей и владельцев компании.")),"cityProject.reviews":a(e._t("$firmName в $cityNamePrepositional: отзывы — 2ГИС"),e._t("$firmName в $cityNamePrepositional: свежие отзывы и возможность поделиться впечатлениями с другими пользователями.")),"cityProject.buildingPhoto":a(e._t("Улица $buildingAddress в $cityNamePrepositional: фото — 2ГИС"),e._t("Улица $buildingAddress в $cityNamePrepositional: большая подборка фотографий от пользователей и владельцев компании.")),"cityProject.crossroad":a(e._t("Перекрёсток $geoName в $cityNamePrepositional — 2ГИС"),e._t("Все маршруты до перекрёстка $geoName в $cityNamePrepositional.")),"cityProject.admDivision":a(e._t("$admDivisionName, $admDivisionType $cityNameGenitive — 2ГИС"),e._t("$admDivisionName, $admDivisionType $cityNameGenitive: вся необходимая информация на карте — администрация, налоговая, суд, паспортный стол, загс и многое другое.")),"citySimple.city":a(e._t("$cityName: карта с улицами, домами и организациями города — 2ГИС"),e._t("$cityName: подробная карта с детализацией до дома, поиск по адресу + телефоны, отзывы, фото, часы работы фирм + удобный поиск проезда на авто и городском транспорте.")),
"citySimple.street":a(e._t("Улица $streetName, $cityName — 2ГИС"),e._t("Улица $streetName ($cityName) с указанием маршрутов, кафе, ресторанов, магазинов и другой полезной информации.")),"citySimple.building.withBuildingName":a(e._t("$buildingName, улица $geoName, $cityName — 2ГИС"),e._t("$buildingName, улица $geoName, $cityName: организации в здании и удобные способы доехать до места.")),"citySimple.building.withoutBuildingName":a(e._t("Улица $geoName, $cityName — 2ГИС"),e._t("Улица $geoName, $cityName: организации в здании и удобные способы доехать до места.")),"citySimple.building.withoutBuildingName.withoutName.withBuildingType":a(e._t("$gateType, $cityName — 2ГИС"),e._t("$gateType, $cityName: подробная карта с детализацией до дома: поиск по адресу + телефоны, отзывы, фото, часы работы фирм + удобный поиск проезда на авто и городском транспорте.")),"citySimple.inbuild":a(e._t("Организации по адресу $geoName, $cityName — 2ГИС"),e._t("Адреса, номера телефонов, время работы, отзывы и фото организаций по адресу $geoName, $cityName.")),"citySimple.booklet.buildings":a(e._gg("Новостройка $bookletName от застройщика $firmName, $cityName — 2ГИС"),e._gg("Квартиры в новостройке $bookletName от застройщика $firmName, $cityName, $address: $attributes.")),"citySimple.bookletPage.buildings":a(e._gg("$pageTitle новостройки $bookletName от застройщика $firmName, $cityName — 2ГИС"),e._gg("$pageTitle новостройки $bookletName от застройщика $firmName, $cityName, $address: $attributes.")),"citySimple.rubricsNear":a(e._gg("Инфраструктура рядом с новостройкой $bookletName ($firmName), $cityName — 2ГИС"),e._gg("Инфраструктура на карте рядом с новостройкой $bookletName, $cityName, $address: школы, детские сады, магазины, банки, поликлиники.")),"citySimple.booklet.sauna":a(e._gg("Сауна «$firmName», $cityName — 2ГИС"),e._gg("Цены, фотографии и время работы сауны «$firmName» по адресу $address. От $price рублей в час, до $capacity посетителей, $details.")),"citySimple.booklet.saunaRooms":a(e._gg("Сауна «$firmName», $cityName — 2ГИС"),e._gg("Цены, фотографии и время работы сауны «$firmName». Вся информация о номерах, типах парных и услугах.")),"citySimple.bookletPage.saunaRoom":a(e._gg("Сауна «$firmName» ($room), $cityName — 2ГИС"),e._gg("Цены, фотографии и время работы сауны «$firmName» ($room). От $price рублей в час, до $capacity посетителей, $details.")),"citySimple.booklet.provider":a(e._gg("$firmDescription $firmName, $cityName — 2ГИС"),e._gg("Описание всех тарифов интернет-провайдера $firmName: цены, скорость, акции, возможность оставить заявку на подключение.")),"citySimple.bookletProvidersAggregator":a(e._gg("Лучшие тарифы от интернет-провайдеров, $cityName — 2ГИС"),e._gg("Введите адрес, узнайте тарифы интернет-провайдеров, обслуживающих ваш дом, и оставьте заявку на подключение...")),"citySimple.firm.withAddress":a(e._t("$firmName, $cityName, $firmAddress — 2ГИС"),e._t("$firmName, $cityName, $firmAddress: адреса, номера телефонов, время работы и как доехать. $attributes")),"citySimple.firm.withoutAddress":a(e._t("$firmName, $cityName — 2ГИС"),e._t("$firmName, $cityName: адреса, номера телефонов, время работы и как доехать. $attributes")),"citySimple.firmPhoto.withAddress":a(e._t("$firmName, $cityName, $firmAddress: фото — 2ГИС"),e._t("$firmName, $cityName, $firmAddress: большая подборка фотографий от пользователей и владельцев компании.")),"citySimple.firmPhoto.withoutAddress":a(e._t("$firmName, $cityName: фото — 2ГИС"),e._t("$firmName, $cityName: большая подборка фотографий от пользователей и владельцев компании.")),"citySimple.firmPhotoSingle.withAddress":a(e._t("$firmName, $cityName, $firmAddress: фото — 2ГИС"),e._t("$firmName, $cityName, $firmAddress: большая подборка фотографий от пользователей и владельцев компании.")),"citySimple.firmPhotoSingle.withoutAddress":a(e._t("$firmName, $cityName: фото — 2ГИС"),e._t("$firmName, $cityName: большая подборка фотографий от пользователей и владельцев компании.")),"citySimple.firmBookletPhoto.withAddress":a(e._t("$firmName, $cityName, $firmAddress: фото — 2ГИС"),e._t("$firmName, $cityName, $firmAddress: большая подборка фотографий от пользователей и владельцев компании.")),"citySimple.firmBookletPhoto.withoutAddress":a(e._t("$firmName, $cityName: фото — 2ГИС"),e._t("$firmName, $cityName: большая подборка фотографий от пользователей и владельцев компании.")),"citySimple.firmPhotoAlbum.withAddress":a(e._t("$firmName, $cityName, $firmAddress: фото — 2ГИС"),e._t("$firmName, $cityName, $firmAddress: большая подборка фотографий от пользователей и владельцев компании.")),"citySimple.firmPhotoAlbum.withoutAddress":a(e._t("$firmName, $cityName: фото — 2ГИС"),e._t("$firmName, $cityName: большая подборка фотографий от пользователей и владельцев компании.")),"citySimple.geoPhotoAlbum.withAddress":a(e._t("Улица $buildingAddress, $cityName: фото — 2ГИС"),e._t("Улица $buildingAddress, $cityName: большая подборка фотографий от пользователей и владельцев компании.")),"citySimple.geoPhotoAlbum.withoutAddress":a(e._t("Улица $buildingAddress, $cityName: фото — 2ГИС"),e._t("Улица $buildingAddress, $cityName: большая подборка фотографий от пользователей и владельцев компании.")),"citySimple.reviews":a(e._t("$firmName, $cityName: отзывы — 2ГИС"),e._t("$firmName, $cityName: свежие отзывы и возможность поделиться впечатлениями с другими пользователями.")),"citySimple.buildingPhoto":a(e._t("Улица $buildingAddress, $cityName: фото — 2ГИС"),e._t("Улица $buildingAddress, $cityName: большая подборка фотографий от пользователей и владельцев компании.")),"citySimple.geoPhoto":a(e._t("$geoName, $cityName: фото — 2ГИС"),e._t("$geoName, $cityName: большая подборка фотографий от пользователей и владельцев компании.")),"citySimple.geoPhotoAlbum":a(e._t("$geoName, $cityName: фото — 2ГИС"),e._t("$geoName, $cityName: большая подборка фотографий от пользователей и владельцев компании.")),"citySimple.crossroad":a(e._t("Перекрёсток $geoName ($cityName) — 2ГИС"),e._t("Все маршруты до перекрёстка $geoName ($cityName).")),"citySimple.admDivision":a(e._t("$admDivisionName, $admDivisionType, $cityName — 2ГИС"),e._t("$admDivisionName, $admDivisionType, $cityName: вся необходимая информация на карте — администрация, налоговая, суд, паспортный стол, загс и многое другое.")),"attraction.withName":a(e._t("$geoName — 2ГИС"),e._t("$geoName: вся необходимая информация на карте города.")),"attraction.withoutName":a(e._t("$sightType – 2ГИС"),e._t("$sightType: вся необходимая информация на карте города.")),"servicing.withBuildingName":a(e._t("$buildingName, $geoName: обслуживающие организации — 2ГИС"),e._t("$buildingName, $geoName: обслуживающие организации - ЖЭУ, ТСЖ, поликлиники, почтовые отделения, интернет-провайдеры и многое другое.")),"servicing.withoutBuildingName":a(e._t("$geoName: обслуживающие организации — 2ГИС"),e._t("$geoName: обслуживающие организации - ЖЭУ, ТСЖ, поликлиники, почтовые отделения, интернет-провайдеры и многое другое.")),parking:a(e._t("$parkingAccess, $parkingName, $parkingAddress — 2ГИС"),e._t("$parkingAccessFull, $parkingType $parkingName, $parkingAddress: вся информация на карте.")),search:a(e._t("$query в $cityNamePrepositional — 2ГИС"),e._t("$query в $cityNamePrepositional: вся необходимая информация.")),gate:a(e._t("$gateType, $gatePurpose — 2ГИС"),e._t("$gateType, $gatePurpose, $gateAccess.")),"filials.withPhoto":a(e._t("$firmName в $cityNamePrepositional: филиалы — 2ГИС"),e._t("$firmName в $cityNamePrepositional: вся информация о филиалах на одной странице — адреса, телефоны, время работы, фотографии и отзывы. Проложите маршрут до нужного вам филиала.")),"filials.withoutPhoto":a(e._t("$firmName в $cityNamePrepositional: филиалы — 2ГИС"),e._t("$firmName в $cityNamePrepositional: вся информация о филиалах на одной странице — адреса, телефоны, время работы и отзывы. Проложите маршрут до нужного вам филиала.")),"rubric.withPhoto":a(e._t("$query на карте $cityNameGenitive — 2ГИС"),e._t("$query на карте $cityNameGenitive: адреса, номера телефонов и время работы. Свежие отзывы, рейтинги и фото помогут определиться с выбором.")),"rubric.withoutPhoto":a(e._t("$query на карте $cityNameGenitive — 2ГИС"),e._t("$query на карте $cityNameGenitive: адреса, номера телефонов и время работы. Свежие отзывы и рейтинги помогут определиться с выбором.")),discounts:a(e._gg("$firmName ($cityName): скидки и акции — 2ГИС"),e._gg("$firmName: актуальные скидки, акции и специальные предложения.")),discountsForRubrics:a(e._gg("$firmName ($cityName): скидки и акции — 2ГИС"),e._gg("$firmName: актуальные скидки, акции и специальные предложения.")),discount:a("$firmName — $title","$description"),providersInBuilding:a(e._gg("Интернет-провайдеры в $cityNamePrepositional — 2ГИС"),e._gg("Интернет-провайдеры в $cityNamePrepositional: вся необходимая информация.")),station:a(e._t("$stationType $stationName ($cityName) — 2ГИС"),e._t("$stationType $stationName ($cityName): самые удобные способы добраться до нужного вам места.")),stationSurface:a(e._t("Остановка $stationName ($cityName) — 2ГИС"),e._t("Все маршруты остановки $stationName ($cityName).")),metro:a(e._t("Станция метро $stationName в $cityNamePrepositional — 2ГИС"),e._t("Станция метро $stationName на карте $cityNameGenitive и все удобные способы добраться до неё.")),route:a(e._t("$routeName $routeType в $cityNamePrepositional: маршрут и остановки — 2ГИС"),e._t("$routeName $routeType: маршрут и остановки на карте $cityNameGenitive.")),simpleGeom:a(e._t("$geoName — 2ГИС"),e._t("$geoName: вся необходимая информация на карте.")),routeResults:a(e._t("Поиск проезда на карте — 2ГИС"),""),autoResults:a(e._t("Поиск проезда на карте — 2ГИС"),""),"rubricsList.main":a(e._t("Все компании и организации $cityNameGenitive с адресами, телефонами и временем работы — 2ГИС"),e._t("В списке компаний и организаций города $cityNameGenitive вы легко найдёте именно ту, что нужна вам. Все компании отсортированы по виду деятельности и отмечены на карте города.")),"rubricsList.sub":a(e._t("$mainRubric: все компании $cityNameGenitive с адресами, телефонами и временем работы — 2ГИС"),e._t("Все компании в рубрике $mainRubric на карте города $cityNameGenitive: $subRubrics и многое другое.")),extraLayers:a(e._t("$name ($city) — 2ГИС"),"$content"),eventCard:a(e._gg("День города на улицах $cityNameGenitive"),e._gg("Афиша мероприятий на карте города — спортивные праздники, концерты и места фейерверков. Перекрытые улицы и закрытые остановки общественного транспорта. Фотографии $cityNameGenitive.")),eventPhotos:a(e._gg("День города на улицах $cityNameGenitive"),e._gg("Афиша мероприятий на карте города — спортивные праздники, концерты и места фейерверков. Перекрытые улицы и закрытые остановки общественного транспорта. Фотографии $cityNameGenitive.")),forecast:a(e._t("Погода в $cityNamePrepositional на 7 дней, подробный прогноз — 2ГИС"),e._t("Подробный прогноз погоды в $cityNamePrepositional на сегодня, на завтра, на неделю.")),"products.tyres":a(e._gg("Купить шины в $cityNamePrepositional: летняя, зимняя, всесезонная резина на авто — 2ГИС"),e._gg("$total предложений от магазинов $cityNamePrepositional")),"productCard.tyres":a(e._gg("Шины $name $params, купить в $cityNamePrepositional — 2ГИС"),e._gg("Выбрать оптимальное предложение от магазинов в $cityNamePrepositional")),inFloors:a(e._t("$mallName, $cityName: поэтажный план и список магазинов — 2ГИС"),e._t("$mallName, $cityName, $address: поэтажная карта здания с расположением магазинов.")),"inFloors.firm":a(e._t("$firmName, $mallName, $cityName — 2ГИС"),e._t("$firmName, $mallName, $cityName, $firmAddress: расположение на плане здания.")),"inFloors.search":a(e._t("$mallName, $cityName: $query — 2ГИС"),e._t("$mallName, $cityName, $address: $query на поэтажном плане здания.")),"inFloors.profiles":a(e._t("$mallName, $cityName: организации на этаже — 2ГИС"),e._t("$mallName, $cityName, $address: организации на этажах здания.")),"inFloors.firmList":a(e._t("$mallName, $cityName: список всех организаций в здании — 2ГИС"),e._t("$mallName, $cityName, $address: список всех организаций в здании и их контактная информация.")),floorList:a(e._t("Список зданий с поэтажным планом в $cityNamePrepositional — 2ГИС"),e._t("Все здания $cityNameGenitive с планами по этажам, расположением организаций и магазинов."))}}function o(e,t){for(var n="firm"==t.type&&t.hasBranches,a=f.contains(["firmPhoto","firmPhotoSingle","firmBookletPhoto","firmPhotoAlbum","geoPhotoAlbum"],t.type),i=(n||a)&&t.firmAddress,o={address:i?"withAddress":"withoutAddress",photo:t.hasPhoto?"withPhoto":"withoutPhoto",name:t.geoName?"withName":"withoutName",buildingName:t.buildingName?"withBuildingName":"withoutBuildingName",buildingType:t.gateType?"withBuildingType":"withoutBuildingType",rubricType:t.mainRubric?"sub":"main",customTitleDescription:t.cityCustomTitles?"customTitleDescription":null,floors:t.floors?"inFloors":"outOfFloors"},r=f.map([[o.floors,t.type],[o.floors],[t.cityType,o.customTitleDescription],[t.cityType,t.type,o.buildingName,o.name,o.buildingType],[t.cityType,t.type,o.buildingName],[t.cityType,t.type,o.address],[t.cityType,t.type,t.bookletType],[t.cityType,t.type],[t.type,o.buildingName],[t.type,o.name],[t.type,o.photo],[t.type,o.rubricType],[t.type,t.productType],[t.type],[t.moduleType]],function(e){return e.join(".")}),s=0;s<r.length;s++)if(e[r[s]])return e[r[s]];return e.noCity}function r(e,t){var n=t||"";return n.replace?m.replaceByName(n,e):""}function s(e,t){return f.mapValues(e,f.partial(r,t))}function l(e,t){if(e.cityCustomTitles&&(e.cityCustomTitles.title||(e.cityCustomTitles.title=e.cityNameGenitive),e.cityCustomTitles.description||(e.cityCustomTitles.description=e.cityNameGenitive),e.seoTitle=e.cityCustomTitles.title,e.seoDescription=e.cityCustomTitles.description),"rubric"==e.type){var n=TEST?e._mockPublicRubricNames:t.getPublicRubricNames();e.shortId&&n[e.shortId]&&(e.query=n[e.shortId])}return e}function c(e){var t={sushi:"Суши",pizza:"Пицца",rolls:"Роллы",pies:"Пироги",shashlik:"Шашлык"},n=e.filters?e.filters.food_delivery_types:"",i=e.filters&&e.filters.work_time&&-1!==e.filters.work_time.indexOf("alltime");return t[n]?(e.filterName=t[n],i?a("$filterName: круглосуточная доставка в $cityNamePrepositional — 2ГИС","$filterName: вся информация о компаниях, занимающихся круглосуточной доставкой в $cityNamePrepositional — адреса, номера телефонов, время работы и отзывы."):a("$filterName: доставка в $cityNamePrepositional — 2ГИС","$filterName: вся информация о компаниях, занимающихся доставкой в $cityNamePrepositional — адреса, номера телефонов, время работы и отзывы.")):null}function u(e){if(e.linkType)return e.linkType;var t={admDivision:"geoMiddle",attraction:"geoNear",building:"geoNear",districts:"geoMiddle",filials:"firmBranches",gate:"geoNear",inbuild:"geoMoreFirms",metro:"transportStopMetro",parking:"geoNear",reviews:"firmComments",route:"transportRoute",simpleGeom:"geoMiddle",station:"transportStop",station_platforms:"transportPlatform",stationSurface:"transportStop",street:"geoMiddle",crossroad:"geoMiddle",rubricsList:"rubricList",forecast:"weather",firmList:"floorsFirmList",city:"citySimple"==e.cityType?"geo":"city",unknown:"city"};return t[e.type]||e.type}function d(t,n){var a=e("./linkURL"),i=u(t);return"rubricList"==i&&(i+=t.id?"Sub":"Main"),t.filters&&f.isEmpty(t.filters)&&delete t.filters,1==t.page&&delete t.page,t.bookletName=t.bookletId,a(i,t,n,null,!0)}function h(e,t){if(!e.multilangEnabled||f.isEmpty(e.availableLanguages))return null;var n={hreflang:"x-default",href:d(f.extend({},e,{locale:null}),t)},a=f.compact(f.map(e.availableLanguages,function(n){return n==e.currentLanguage||n==e.defaultLanguage&&!e.currentLanguage?null:{hreflang:n,href:d(f.extend({},e,{locale:n==e.defaultLanguage?null:n}),t)}}));return[n].concat(a)}function p(e){switch(e.type){case"attraction":case"building":case"gate":case"parking":case"reviews":case"firm":case"metro":case"stationSurface":case"station":var t=req("helpers/social"),n=e.size||g["share.image.staticMap.size"]||"";return{image:t.getStaticMapForPoint(f.pick(e,"lon","lat"),n),width:n.split(",")[0],height:n.split(",")[1]};default:return{image:e.ogImage||g["share.image."+e.type]}}}var f=e("lodash"),m=req("helpers/string"),g=e("slot/config");n.getCanonicalUrl=d,n.getSeoParams=function(e,t,n){e=l(f.cloneDeep(e),n);var a=i(n),r=o(a,e),u=s(r,e);if(n.getSettings().filtersInTitles){var m=c(e);m&&(u=s(m,e))}var g,_,v=1;if(e.page){v=+(e.page&&e.page.current);var y=+(e.page&&e.page.max);v&&(v>1&&(g=d(f.extend(e,{page:v-1}),t)),y>v&&(_=d(f.extend(e,{page:v+1}),t)))}return{title:u.title,description:u.description,canonicalUrl:d(f.extend(e,{page:v}),t),langAlternates:h(f.extend(e,{page:v}),t),prevPageUrl:g,nextPageUrl:_,ogImage:p(e),twitterImage:p(f.extend(e,{size:"560,392"}))}},n.detectCityType=function(e,t,n){var a=e.getRegion();return n&&"cityProject"!=n||t&&(!a||-1===t.indexOf(a.name))?{type:"citySimple",name:t,code:a.code}:{type:"cityProject",name:a.name,genitive:a.name_grammatical_cases&&a.name_grammatical_cases.genitive||a.name,prepositional:a.name_grammatical_cases&&a.name_grammatical_cases.prepositional||a.name,accusative:a.name_grammatical_cases&&a.name_grammatical_cases.accusative||a.name,code:a.code}}},{"./linkURL":"/helpers/linkURL.js",lodash:"lodash","slot/config":"slot/config"}],"/helpers/social.js":[function(e,t,n){var a=req("helpers/string");n.openSocialPopup=function(e){var t="scrollbars=yes,resizable=yes,toolbar=no,location=yes",n=550,a=420,i=screen.height,o=screen.width,r=Math.round(o/2-n/2),s=0;i>a&&(s=Math.round(i/2-a/2)),window.open(e,"share",t+",width="+n+",height="+a+",left="+r+",top="+s)},n.getTwitterUrl=function(e,t,n){var a="http://twitter.com/intent/tweet?text=",i=t||"#2gis",o=[i,e];return n&&o.push(n),a+encodeURIComponent(o.join(" "))},n.getVkontakteUrl=function(e,t,n,i){var o="http://vkontakte.ru/share.php?",r={url:e};return n&&(r.title=n),t&&(r.image=t),i&&(r.description=i),o+a.stringifyParams(r)},n.getOdnoklassnikiUrl=function(e,t){var n="http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1&",i={"st._surl":e};return t&&(i["st.comments"]=t),n+a.stringifyParams(i)},n.getStaticMapForPoint=function(e,t,n){if(!e||!e.lon||!e.lat)return null;t=t||"500,350",n=n||15;var a=e.lon+","+e.lat,i=req("helpers/string"),o="http://static.maps.2gis.com/1.1/size/%1/zoom/%2/markers/pmblm,%3";return i.format(o,t,n,a)}},{}],"/helpers/station.js":[function(e,t,n){function a(e){return e?e.route_types?i.first(e.route_types):e.subtype:null}var i=e("lodash"),o=function(e){return{station_entrance:{metro:e._t("Вход на станцию метро")},other:{metro:e._t("Станция метро"),metro_entrance:e._t("Вход на станцию метро"),premetro:e._pt("Метротрам","Станция"),light_metro:e._t("Станция легкого метро"),aeroexpress:e._pt("Железная дорога","Станция"),funicular_railway:e._t("Станция фуникулера"),monorail:e._t("Станция монорельсовой дороги"),cable_car:e._t("Станция канатной дороги"),river_transport:e._pt("Остановка речного транспорта","Речной транспорт"),railway:e._pt("Железная дорога","Станция"),stop:e._t("Остановка наземного транспорта"),surface_transport:e._t("Остановка наземного транспорта")}}};n.getCaption=function(e,t,n){var a=o(n),i="stop",r=a[e]||a.other;return r[t]||r[i]},n.isGroundTransport=function(e){var t=["funicular_railway","river_transport","cable_car"];return!i.contains(t,e)},n.getTransportType=function(e,t){return a(t)||a(e)||"stop"},n.getCentroid=function(e,t){function n(e,t){o[e]={min:Math.min(o[e].min||1/0,t[e]),max:Math.max(o[e].max||0,t[e])}}function a(e){return(o[e].min+o[e].max)/2}if(!e||!t)return null;if(e.geometry&&e.geometry.centroid)return t.parsePoint(e.geometry.centroid)||null;var o={lon:{},lat:{}};return i.each(e.platforms,function(e){var a=t.parsePoint(e.geometry.centroid);n("lon",a),n("lat",a)}),{lon:a("lon"),lat:a("lat")}},n.getFirstPlatformCentroid=function(e,t){if(!e||!t)return{};if(e.geometry&&e.geometry.centroid)return t.parsePoint(e.geometry.centroid)||{};var n=e.platforms&&i.first(e.platforms)||{},a=n.geometry&&n.geometry.centroid;return a?t.parsePoint(a)||{}:{}},n.getCrossings=function(e){if(!e||!e.links||!e.links.nearest_stations)return null;var t=i.filter(e.links.nearest_stations,function(e){return e.internal_transition});return t.length?t:null},n.viewForCrossings=function(e,t,a,o,r){var s=n.getCrossings(e);if(s&&s.length){var l={};return l.title=r._t("Переход на станцию"),l.items=[],i.each(s,function(e){var n={id:e.station_id||e.id,name:e.name,line:{color:e.color,name:e.comment}};i.isEmpty(a)||(n.seoLinkStop=o("transportStopMetro",{city:t,id:n.id,lon:a.lon,lat:a.lat})),l.items.push(n)}),l}return null},n.getStationDesc=function(e,t){var a=n.getTransportType(e),i=n.getCaption(e.type,a,t);return i},n.getStationNote=function(e){var t=null;return e&&"metro"==e.subtype&&(t=e.routes&&e.routes.length&&e.routes[0].name),t},t.exports._args=["model","city","point","createLinkURL","$i18n"]},{lodash:"lodash"}],"/helpers/stationsNear.js":[function(e,t,n){"use strict";function a(e){return d[e]||d.def}function i(e,t,n,a){if(!t||!a)return null;var i={city:a,id:e.id,lon:t.lon,lat:t.lat},o="metro"==n?"transportStopMetro":"transportStop";return c(o,i)}function o(e,t){var n=u.getTransportType(e);return{id:e.id,type:n,name:e.name,caption:n,template:"nearStation",distance:l.convertMeters(e.distance,t.numberFormat),purpose:a(n),seoLink:i(e,t.point,n,t.cityCode),showDistance:e.distance&&t.showDistance,color:e.color||null}}function r(e,t){var n=h[u.getTransportType(e)]||1/0,a=h[u.getTransportType(t)]||1/0,i=n-a;return i=i||e.distance-t.distance,i>0?t:e}var s=e("lodash"),l=req("helpers/roundMeters"),c=req("helpers/linkURL"),u=req("helpers/station"),d={metro:"subwayStation",premetro:"subwayStation",light_metro:"subwayStation",bus:"surfaceStation",trolleybus:"surfaceStation",shuttle_bus:"surfaceStation",tram:"tramStation",light_rail:"tramStation",suburban_train:"railwayStation",aeroexpress:"railwayStation",funicular_railway:"funicularStation",monorail:"monorailStation",river_transport:"riverStation",cable_car:"cableStation",def:"surfaceStation"},h={metro:1,premetro:2,light_metro:2,bus:2,trolleybus:2,shuttle_bus:2,tram:2,light_rail:2,suburban_train:2,aeroexpress:2,river_transport:3};t.exports={getClosestStation:function(e,t){var n=this.getRawClosestStation(e);return n&&o(n,t)},getRawClosestStation:function(e){return s.reduce(e,r)},getAllStations:function(e,t){var n=s.partialRight(o,t);return s.chain(e).sortBy("distance").map(function(e){return n(e)}).value()}}},{lodash:"lodash"}],"/helpers/string.js":[function(e,t,n){function a(e,t){var n=Math.abs(e),a="";a=Math.floor(n)==n?t["short"]:t.standard;var o=i.first(a.match(/[^¤]+/g)),r=s(o.trim(),e);return a.replace(o.trim(),r)}var i=e("lodash"),o="`qwertyuiop[]asdfghjkl;'zxcvbn,.m ",r="ёйцукенгшщзхъфывапролджэячсмитбюь ";n.toLocal=function(e){var t="";return i.each(e,function(e){var n=e.toUpperCase(),a=e.toLowerCase(),i=o.indexOf(a);t+=-1!=i&&e==a?r[i]:-1!=i&&e==n?r[i].toUpperCase():e}),t},n.cutTags=function(e,t){if(!i.isString(e)||!e)return"";t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var n=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return e=e.replace("<br>"," "),e=e.replace("<br />"," "),e=e.replace(n,function(e,n){return t.indexOf("<"+n.toLowerCase()+">")>-1?e:""}),e.replace(/<([a-z][a-z0-9]*)\s+>/g,"<$1>").replace(/\s{2,}/g," ")},n.clearStyles=function(e){return e.replace(/<style[^>]*>[^<]*<\/style>/g,"").replace(/style=(|")[^>]+(?=>)/g,"").replace(/align=(|")[^>]+(?=>)/g,"").replace(/<b>|<\/b>/g,"").replace(/<i>|<\/i>/g,"")},n.replaceAll=function(e,t,n){return(n||"").split(e).join(t)},n.setExternalLinkAttributes=function(e,t){var n=/<a[^>]*>/gi,a=/[-a-z_0-9]+\s*=\s*(?:"[^"]*"|'[^']*')/gi,o=/([-a-z_0-9]+)\s*=\s*(?:"([^"]*)"|'([^']*)')/i;return i.each(e.match(n),function(n){var r={};i.each(n.match(a),function(e){var t=e.match(o);t&&(r[t[1]]=t[2]||t[3]||"")}),i.extend(r,t);var s=i.map(r,function(e,t){return t+'="'+e.replace(/"/g,"&quot;")+'"'}).join(" "),l="<a "+s+">";e=e.replace(n,l)}),e},n.capitalize=function(e){return e=e&&e+""||"",e.charAt(0).toUpperCase()+e.substr(1)},n.uncapitalize=function(e){return e=e&&e+""||"",e.charAt(0).toLowerCase()+e.substr(1)},n.format=function(e,t){return i.isArray(t)||(t=[].slice.call(arguments,1)),e.replace(/%(\d+)/g,function(e,n){return n=parseInt(n,10),t[n-1]})},n.replaceByName=function(e,t){return e?(t&&i.isObject(t)||(t={}),e.replace(/\$(\w+)/g,function(e,n){return t[n]||""})):""},n.escapeRegExp=function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},n.convertUnderScoreToCamel=function(e){return i.contains(["string","number"],typeof e)?(""+e).replace(/(_[a-zA-Z0-9])/g,function(e){return e[1].toUpperCase()}):""};var s=function(e,t){if(!e||isNaN(+t))return t;t="-"==e.charAt(0)?-t:+t;var n=0>t?t=-t:0,a=e.match(/[^\d\-\+#]/g),i=a&&a[a.length-1]||".",o=a&&a[1]&&a[0]||",";e=e.split(i),t=t.toFixed(e[1]&&e[1].length),t=+t+"";var r=e[1]&&e[1].lastIndexOf("0"),s=t.split(".");(!s[1]||s[1]&&s[1].length<=r)&&(t=(+t).toFixed(r+1));var l=e[0].split(o);e[0]=l.join("");var c=e[0]&&e[0].indexOf("0");if(c>-1)for(;s[0].length<e[0].length-c;)s[0]="0"+s[0];else 0==+s[0]&&(s[0]="");t=t.split("."),t[0]=s[0];var u=l[1]&&l[l.length-1].length;if(u){for(var d=t[0],h="",p=d.length%u,f=0,m=d.length;m>f;f++)h+=d.charAt(f),(f-p+1)%u==0&&m-u>f&&(h+=o);t[0]=h}return t[1]=e[1]&&t[1]?i+t[1]:"",(n?"-":"")+t[0]+t[1]};n.currencyString=function(e,t){var n=t.getFormats().currency,i=a(e,n);return i.replace("¤",n.symbol)},n.numberString=a,n.stringifyParams=function(e,t){if(!e)return"";var n=function(e,n){var a=t?e:encodeURIComponent(e);return n+"="+a};return i.map(e,n).join("&")},n.threeDots=function(e){if(!e)return"";var t=/([\.…,:;]*)$/;return e.trim().replace(/\n+/g," ").replace(t,"…")},n.processLinks=function(e,t){return t=t||"link",e=e.replace(/\{([^()]+)\} \(([a-z]+)\)/g,"<span data-type='$2' class='"+t+"'>$1</span>"),e.replace(/\{([^()]+)\} \(([\w:;\/.%"$-]+)\)/g,"<a href='$2' class='"+t+"'>$1</a>")},n.tweet=function(e,t){var n=i.compact(e.split(" ")),a="",o=0;t=t||140;do a+=(a?" ":"")+n[o++];while(n[o]&&a.length<t);return a.substr(0,t)},n.getSynopsis=function(e,t){var a=n.cutTags(e);return a.length>t&&(a=n.threeDots(a.substring(0,a.lastIndexOf(" ",t)))),a},n.decorateUrls=function(e){var t=RegExp("(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?","gi");return e.replace(t,'<a href="$&" class="link _undashed" target="_blank">$&</a>')},t.exports._args=["$0","$1"]},{lodash:"lodash"}],"/helpers/suggest/registry.js":[function(e,t,n){function a(){this.kit=[],this.suggest=[]}var i=e("lodash");a.prototype={assign:function(e,t){if(this.suggest=e,this.kit=[],t){var n=e[0];this.kit=i.map(t,function(e,t){var a=n&&n.length&&n[t]&&n[t].text;return e.text&&e.text==a?n[t]:e})}}},t.exports=a},{lodash:"lodash"}],"/helpers/tabs.js":[function(e,t,n){var a=e("lodash");n.getTabTitle=function(e,t){var n={firms:t._pt("Поиск","Организации"),geo:t._pt("Поиск","Места на карте"),transport:t._pt("Поиск","Транспорт")};return n[e]||e},n.getSimpleResultTitle=function(e,t,n){switch(e){case"firms":return n._nt("%1 организация","%1 организации","%1 организаций",t);case"geo":return n._nt("%1 место","%1 места","%1 мест",t);case"transport":return n._nt("%1 маршрут и остановка","%1 маршрута и остановки","%1 маршрутов и остановок",t);case"station":return n._nt("%1 остановка","%1 остановки","%1 остановок",t);case"route":return n._nt("%1 маршрут","%1 маршрута","%1 маршрутов",t);default:return null}},n.getTransportResultTitle=function(e,t){var n={station:t._nt("%1 остановка","%1 остановки","%1 остановок",e.station),route:t._nt("%1 маршрут","%1 маршрута","%1 маршрутов",e.route)},i=a.compact(a.map(e,function(e,t){return e?n[t]:null}));if(1==i.length)return a.first(i);var o=req("helpers/string");return o.replaceByName(t._t("$route и $station"),n)},n.findTextType=function(e,t){if("transport"==t){var n=[];if(a.each((e[t]||{}).detail,function(e,t){e&&n.push(t)}),1==n.length)return a.first(n)}return t},n.findTypeCount=function(e,t){var n=e[t];if(!n){var i;return a.find(e,function(e){return i=e&&e.detail&&e.detail[t],!!i}),i}return n.generalization},t.exports._args=["type","count","$i18n"]},{lodash:"lodash"}],"/helpers/time.js":[function(e,t,n){var a=e("lodash"),i=e("moment");n.convertSeconds=function(e,t){if(!e&&0!==e)return"";if(60>e)return t._pt("минута","%1 мин",1);var n=[{secondCount:3600,pluralString:function(e){return t._pt("час","%1 ч",Math.floor(e))}},{secondCount:60,pluralString:function(e){return t._pt("минута","%1 мин",Math.floor(e))}}];return a.compact(a.map(n,function(t){var n=Math.floor(e/t.secondCount);return n?(e-=n*t.secondCount,t.pluralString(n)):null})).join(" ")},n.getMoment=function(e){var t=i().add(time.userTimeOffset,"seconds"),n=a.get(e,"time_zone.offset",0);return t.utcOffset(n)},n.getFormattedTime=function(e,t){return n.getMoment(e).format(t)},n.getTimeStamp=function(){return Date.now()+time.userTimeOffset},n.getTimeZone=function(t,n){var a=e("moment");return"UTC"+a().utcOffset(t&&t.time_zone?t.time_zone.offset:0).format(n.getFormats().time.zone)},n.isBetween=function(t,n,a){var i=e("moment"),o=i(a);return(o.isSame(n)||o.isBefore(n))&&(o.isSame(t)||o.isAfter(t))},t.exports._args=["region","$i18n"]},{lodash:"lodash",moment:"moment"}],"/helpers/traffic.js":[function(e,t,n){n.getSoHard=function(e){var t="easy";return e>6?t="hard":e>3?t="medium":0==e&&(t="simple"),t}},{}],"/helpers/tyres.js":[function(e,t,n){function a(e,t){var n={1:t._gg("Зимние"),2:t._gg("Зимние шипованные"),3:t._gg("Летние")};return n[e]||""}function i(e,t){return t?e._gg("RunFlat"):e._gg("Технология RunFlat")}function o(e,t){var n=r[e];return n?{id:n,title:a(e,t)}:null}var r={2:"tyres-winter-studded"};t.exports={getTypeString:a,getRunflatString:i,getIconByType:o},t.exports._args=["typeId","$i18n"]},{}],"/helpers/weather.js":[function(e,t,n){var a=e("lodash");n.formatTemperature=function(e,t){if(isNaN(e))return"";var n="&nbsp;";return 0>e?n="-":e>0&&(n="+"),t&&t.withoutGrads?n+Math.abs(e):n+Math.abs(e)+"°"},n.getPartDayMap=function(e){var t={0:e._t("ночь"),1:e._t("утро"),2:e._t("день"),3:e._t("вечер")};return t},n.getPartDayInstrMap=function(e){var t={0:e._t("ночью"),1:e._t("утром"),2:e._t("днём"),3:e._t("вечером")};return t},n.getCloudyStateMap=function(e){var t={0:e._t("ясно"),1:e._t("малооблачно"),2:e._t("облачно"),3:e._t("пасмурно")};return t},n.getWindDirectionMap=function(e){var t={0:{desc:e._t("штиль"),mod:"_N"},1:{desc:e._t("северный"),mod:"_N"},2:{desc:e._t("северо-восточный"),mod:"_NE"},3:{desc:e._t("восточный"),mod:"_E"},4:{desc:e._t("юго-восточный"),mod:"_SE"},5:{desc:e._t("южный"),mod:"_S"},6:{desc:e._t("юго-западный"),mod:"_SW"},7:{desc:e._t("западный"),mod:"_W"},8:{desc:e._t("северо-западный"),mod:"_NW"}};return t},n.getPrecipitationMap=function(e){var t={0:{0:e._t("без&nbsp;осадков")},1:{0:e._t("без&nbsp;осадков"),1:e._t("небольшой&nbsp;дождь"),2:e._t("дождь"),3:e._t("сильный&nbsp;дождь")},2:{0:e._t("без&nbsp;осадков"),1:e._t("небольшой&nbsp;снег"),2:e._t("снег"),3:e._t("сильный&nbsp;снег")}};return t};var i={0:{0:"weather_clear"},1:{0:"weather_clear",1:"weather_light-rain",2:"weather_rain",3:"weather_heavy-rain"},2:{0:"weather_clear",1:"weather_light-snow",2:"weather_snow",3:"weather_heavy-snow"}};n.getWeatherIconData=function(e){var t,n,a={0:"night",1:"day",2:"day",3:"night"},o={0:"weather_clear",1:"weather_cloudy",2:"weather_very-cloudy",3:"weather_very-cloudy"},r=e.cloudy,s=e.precipitation.type,l=e.precipitation.value;return n=0!=e.cloudy&&1!=e.cloudy||0!=e.precipitation.value?"_type_cold":"_type_warm",0==e.precipitation.type?(t=o[e.cloudy],0!=r&&1!=r||(t=t+"-"+a[e.partDay])):t=i[s][l],
e.storm&&(t="weather_storm"),{icon:t,mods:n}},n.findPromoLink=function(e,t,n){var i=a.find(e,function(e){var i=e.temperature||[],o=!a.has(e,"cities");return 2!=i.length||!o&&!a.has(e.cities,n)||a.contains(e.excludeCities,n)?!1:t>=i[0]&&t<=i[1]});if(a.has(i,"cities")){var o=i.cities[n];i=a.extend(a.omit(i,"cities"),o)}return i},n.getForecastLifeTime=function(e){var t,n=+new Date,a=(n-e)/1e3;return t=15>a?"0":30>a?"15":"30"},t.exports._args=["$i18n"]},{lodash:"lodash"}],1:[function(e,t,n){var a=e("slot/app/clientApp"),i=e("slot/app"),o=e("slot/env"),r=e("./mixin");o.setup({handlebars:e("handlebars")}),t.exports=function(){"use strict";var e=o.isServer?i:a,t=new e;return r(t)}},{"./mixin":2,handlebars:446,"slot/app":476,"slot/app/clientApp":475,"slot/env":"slot/env"}],2:[function(e,t,n){var a=e("lodash"),i=e("./plugins/app"),o=e("./plugins/slot"),r=e("./plugins/tmpl"),s=e("slot/lib/registry");t.exports=function(t){"use strict";function n(e){"click"==e.type&&(t.requireComponent("userActivity").addWithCheck("click",e),e.__eventProcessed=!0)}function l(e){var t=e.browser,n=e.os;return"Chrome"==t.name&&t.major<21||"IE"==t.name&&t.major<10||"Firefox"==t.name&&t.major<29||"Mozilla"==t.name||"Windows"==n.name&&"95"==n.version||"Opera"==t.name&&t.major<13||"Opera Mini"==t.name||"Safari"==t.name&&"Android"==n.name||"iOS"==n.name&&t.major<7||"Mac OS X"==n.name&&"Safari"==t.name&&t.major<6||"Windows"==n.name&&"Safari"==t.name}t.isGrym=t.config.isGrym,t.registry=function(e){var t=function(e,t){return void 0===t&&(t={}),this.has(e)||(this.data[e]=t),this.data[e]},n=a.bind(t,e);return a.each(s.prototype,function(t,i){a.isFunction(t)&&(n[i]=a.bind(t,e))}),n}(t.registry),t.isClient&&t.requireComponent("syncRegistry").setup(window.data),t.tryCallInterfaceMethod=function(e,t){if(e["interface"]&&e["interface"][t]){var n=e["interface"][t];n.call(e)}},t.getMainModule=function(){return t.isLandingPage?"landingPage":"online"},t.getMainModuleDevelopment=function(e){var n=e.url,a=n.split("/")[0],i=t.config.devPages&&t.config.devPages[a];return i?i.module:t.isLandingPage?"landingPage":"online"};var c=e("./preInit");c(t);var u=[];a.each(i,function(e){e.slotLinks&&(u=u.concat(e.slotLinks)),t.invoke(e,[t])}),t.enableMarkersInSearch=function(){var e=t.requireComponent("featureSwitcher");return!e.get("markerOnlyClient")},u.push("enableMarkersInSearch"),t.customBindElementEvents=function(e,a,i,o,r,s){r&&(t._bindElementEvents.call(null,e,a,i,o,n,s),t._bindElementEvents.call(null,e,a,i,o,r,s))};var d=t.ua;return t.ua=function(e){var t=d(e);return t.isMuseum=l(t),t},u.push("ua"),t.config.group=function(e){var n={};for(var a in t.config)if(t.config.hasOwnProperty(a)&&a.startsWith(e+".")){var i=a.substr(e.length+1);n[i]=t.config[a]}return n},t.on("slotInit",function(e){return e.isGrym=t.isGrym,e.isMausoleum=t.isMausoleum,e.useHttps=t.useHttps,e.appIsBound=function(){return t.isBound()},e.isStateNotRendered=function(){return t.stateNotRendered},"getParentModuleType"in t&&(e.getParentModuleType=a.partial(t.getParentModuleType,e.moduleId())),a.each(u,function(n){e[n]=t[n]}),a.each(o,function(t){e.invoke(t,[e])}),a.each(r,function(t){t(e)}),e}),t}},{"./plugins/app":5,"./plugins/slot":25,"./plugins/tmpl":26,"./preInit":27,lodash:"lodash","slot/lib/registry":494}],3:[function(e,t,n){t.exports=function(e){var t={};e.action=function(e,n){return n&&(t[e]=n),t[e]}}},{}],4:[function(e,t,n){t.exports=function(t,n){var a=function(){};if(t.isClient){e("fuckadblock");var i=!1;window.fuckAdBlock.onDetected(function(){i=!0,n.trackEvent("google",["DoubleClick","AdBlock_user"])}),window.fuckAdBlock.check(),a=function(e){i?e():window.fuckAdBlock.onDetected(e)}}t.ifAdBlockDetected=a},t.exports.slotLinks=["ifAdBlockDetected"],t.exports._args=["app","$analytics"]},{fuckadblock:431}],5:[function(e,t,n){t.exports=[e("./flags"),e("./is"),e("./cityFrequency"),e("./networkListener"),e("./searchContext"),e("./bssContext"),e("./sendError"),e("./location"),e("./parentModuleType"),e("./adblockDetect")]},{"./adblockDetect":4,"./bssContext":6,"./cityFrequency":7,"./flags":10,"./is":15,"./location":16,"./networkListener":18,"./parentModuleType":19,"./searchContext":21,"./sendError":22}],6:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/panels"),o=req("lib/sendError"),r=req("helpers/analytics").bss;t.exports=function(e,t,n,s){function l(){var i={};e.on("slotInit",function(e){return e.bssContext=t.createInstance(),i[e.moduleId()]=e.bssContext.getHash(),e}),e.on("moduleLoaded",function(e){var t=e.id,n=e.parentId,o=e.moduleConf.inheritBssHash;if(o&&a.has(i,n)){var r=i[n];e.slot.bssContext.setHash(r),i[t]=r}}),e.on("initEnd",function(){var t=a.result(e,"mainModule.interface.getMixedResultsModuleId");if(t){var o=e.registry.get("map");if(o){var r=o.slot.moduleId();i[r]=i[t]||i[r]}}n.set("bssInitHashes",i)})}function c(){var l=n.get("bssInitHashes");if(!a.isObject(l))return void o("bss context error: no bss init hashes");var c=void 0;e.on("slotInit",function(e){if(c)e.bssContext=c;else{var n=l[e.moduleId()];e.bssContext=t.createInstance({hash:n,pr:r.paramsId.link})}return e}),e.on("initEnd",function(){s.on("statechange",function(n){c=t.createInstance(a.cloneDeep(s.get("bssContext")));var o=a.chain(n).get("panels.added").find(function(e){return 3!=i.getPanelLevel(e.type)}).value();if(!a.isEmpty(o)){var r=e.registry.get("map");r&&(r.slot.bssContext=c)}e.onTransitionEnd(t.processQueue)}),t.processQueue()})}e.isClient?c():l()},t.exports._args=["app","$bssContext","$syncRegistry","$appState"]},{lodash:"lodash"}],7:[function(e,t,n){var a=e("lodash");t.exports=function(e,t,n,i){function o(e){var t={};if(!e)return t;var n=e.split(u);return a.each(n,function(e){if(e){var n=e.split(d),a=parseInt(n[1],10);a&&(t[n[0]]=a)}}),t}function r(e){var t=[];return a.each(e,function(e,n){n&&e&&t.push([n,e].join(d))}),t.join(u)}function s(e){t.sync(c,r(e))}function l(e){t.sync(c,function(t,n){var a=o(t);e(a,n)})}var c=e.config["city.frequency.cookieName"],u="!",d="-";e.cityFrequency={increment:function(e){i.get("globalMap")&&l(function(t,n){n||(t[e]=a.parseInt(t[e])||0,t[e]++,s(t))})},get:function(e){return i.get("globalMap")?void l(function(t){var i=n.getRegions(),o=a(t).map(function(e,t){return{frequency:e,id:t,name:(i[t]||{}).name}}).sortByOrder(["frequency","name"],[!1,!0]).value().slice(0,3),r=a.compact(a.map(o,function(e){return a.pick(i[e.id],"id","name","code","settlements","redirectDomain")}));e(r)}):void e([])}}},t.exports.slotLinks=["cityFrequency"],t.exports._args=["app","$commonCookie","$regionManager","$featureSwitcher"]},{lodash:"lodash"}],8:[function(e,t,n){"use strict";"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.exports=function(e){}},{}],9:[function(e,t,n){"use strict";function a(e,t,n,a){var i=n?o.filter(e,{_key:n,_invalidated:!0}):o.filter(e,{_invalidated:!0});return i.length>1?null:i[0]||null}function i(e,t){}var o=e("lodash");t.exports=function(e){e.initDumb=function(t,n,r){var s=e.modules[t];if(s){var l=o.isArray(s)?s:[s],c=a(l,t,r,e.self().type);if(c)return delete c._invalidated,c.slot.updateDumb(n),i(c.slot,n),c}var u=e.init(t,n);return r&&(u._key=r),i(u.slot,n),u},e.updateDumb=function(t){var n=o.chain(e.modules).values().flatten().value();o.forEach(n,function(e){e._invalidated=!0}),e.self().init(t),o.forEach(n,function(e){e._invalidated&&e.dispose({keepDOM:!0})})},e.rerenderDumb=function(t){e.self().unbindEvents(),e.updateDumb(t),e.morph(),e.self().bindEvents()}}},{lodash:"lodash"}],10:[function(e,t,n){var a=e("lodash");t.exports=function(e){function t(){return a.compact((e.cookie(e.config["flags.cookieName"])||"").split(","))}function n(t){e.cookie(e.config["flags.cookieName"],(t||[]).join(","),{expires:365,path:"/"})}e.flags={has:function(e){return a.contains(t(),e)},add:function(e){var i=t();i.push(e),n(a.uniq(i))},"delete":function(e){var i=t();n(a.without(i,e))}}},t.exports.slotLinks=["flags"]},{lodash:"lodash"}],11:[function(e,t,n){t.exports=function(e){e.getLoyaltyState=function(){var t=e.requireComponent("featureSwitcher"),n=e.requireComponent("authorization");if(t.get("loyalty")){var a=n.isAuthorized()||n.isSocial(),i=a&&n.getAuthorizedUserSync().authorizedUser.in_contest;return!i}return!1}}},{}],12:[function(e,t,n){var a=e("lodash");t.exports=function(e){e.googletag=function(e){var t=this,n=t.requireComponent("appState"),i=t.requireComponent("featureSwitcher");if(!(this.isGrym||n.queryString.has("printmode")||i.get("businessLandingDemoMode"))){var o=t.element("googletag");if(e=e||{},a.defaults(e,{minHeight:t.config.googletagMinHeight,renderAnyway:!1}),o&&o.length){var r=e.renderAnyway;if(!r){var s=t.block().height()-o[0].offsetTop-o[0].offsetHeight;r=s>e.minHeight}if(r){var l=t.init("googleTagAds",{type:"free"});o.html(l.render()),l.bindEvents(),l["interface"].onBannerRender(function(e){e||t.notify("updateScroll")})}}}}}},{lodash:"lodash"}],13:[function(e,t,n){"use strict";var a=e("../../../../helpers/i18n");t.exports=function(e){var t=e.requireComponent("i18n"),n={_gg:t._gg,_ngg:t._ngg,_t:t._t,_pt:t._pt,_nt:t._nt,_npt:t._npt,_ht:t._htHelper,_hnt:t._hntHelper,_hgg:t._hggHelper,_hngg:t._hnggHelper,_quote:t._quote,_i18n:a(t)};e.extendTmplHelpers(n)}},{"../../../../helpers/i18n":"/helpers/i18n.js"}],14:[function(e,t,n){var a=e("lodash");t.exports=function(e,t){function n(){return a.compact((e.cookie(r)||"").split(","))}function i(e){return a.compact(a.map(e,function(e){return c[e]}))}function o(e){return a.compact(a.map(e,function(e){return l[e]}))}t=t||e.config;var r=t["interest.cookieName"],s=t["interest.map"]||{},l=s.interest||{},c=s.rubric2interest||{};e.regInterests=function(){if(!e.isGrym){var t=e.searchContext.read("contextRubrics");if(!a.isEmpty(t)){var o=i(t);if(o.length){var s=n();s=s.concat(o),e.cookie(r,(a.uniq(s)||[]).join(","),{expires:365,path:"/"})}}}},e.getInterests=function(){return e.isGrym?[]:o(n())}}},{lodash:"lodash"}],15:[function(e,t,n){var a=e("lodash");t.exports=function(e){e.isInitialState=function(t){var n=e.requireComponent("regionManager"),i=e.requireComponent("appState"),o=n.getRegion(),r=["mapcenter","dashboard","analyticsPlace","isFromHistory"],s=i.newStateApi();return t=t?t.concat(r):r,i.getRegionId()&&s.setRegion(i.getRegionId()),a.contains(t,"zoom")||(o.default_pos&&o.default_pos.zoom&&i.get("zoom")?s.changeZoom(o.default_pos.zoom):t.push("zoom")),i.isEqual(s,t)},e.isCoreLanding=function(){var t=e.requireComponent("appState"),n=req("helpers/panels"),i=t.getState(),o=1==i.panels.length&&i.panels[0]||{},r=n.getModuleName(o),s=e.isInitialState(),l=a.contains(["searchResults","mixedResults"],r),c="firm"==o.type,u="geo"==o.type;return s||l||c||u}},t.exports.slotLinks=["isInitialState"]},{lodash:"lodash"}],16:[function(e,t,n){function a(e){this.app=e,this.appState=e.requireComponent("appState")}var i=e("slot/lib/stuff"),o=e("url"),r=e("lodash");a.prototype.origin=function(){return this.app.config.isGrym?this.app.config["gis.url"]:this.app.registry.get("protocol")&&this.app.registry.get("host")?this.app.registry.get("protocol")+"://"+this.app.registry.get("host"):""},a.prototype.pathname=function(e){var t=o.parse(this.appState.getUri(e),!0);return t.pathname},a.prototype.search=function(e){var t=this.appState.queryString.getAll();e&&(t=r.omit(t,["utm_source","utm_medium","utm_term","utm_campaign","utm_content"]));var n=i.state2uri(t);return n&&"?"+n},a.prototype.href=function(e,t){var n=this.origin(),a=this.pathname(e),i=this.search(t),o=n+a+i;return o&&"/"!=o?o:""},a.prototype.page=function(e){return this.pathname(e)+this.search()},a.prototype.hostname=function(){return(this.app.registry.get("host")||"").split(":")[0]},a.prototype.uri=function(e){if(!this.app.isGrym){var t=this.app.requireComponent("syncRegistry"),n=t.get("stamp");return e.replace(/assets\//,"assets/"+n+"/")}return e},a.prototype.absoluteUri=function(e){return this.join(this.origin()+"/"+this.uri(e))},a.prototype.join=function(){return Array.prototype.join.call(arguments,"/").replace(/([^:])\/\/+/g,"$1/")},t.exports=function(e){e.location=new a(e)},t.exports.slotLinks=["location"]},{lodash:"lodash","slot/lib/stuff":496,url:419}],17:[function(e,t,n){var a=e("lodash");t.exports=function(e){e.mergeActions=function(e,t){if(!e&&!t)return{};if(!e)return t;if(!t)return e;var n=e;return a.each(t,function(e,a){a in n?"function"==typeof n[a]?n[a]=[n[a],t[a]]:n[a].push(t[a]):n[a]=t[a]}),n}}},{lodash:"lodash"}],18:[function(e,t,n){var a=e("lodash");t.exports=function(e){if(e.isGrym){var t=null,n={};e.on("moduleLoaded",function(e){e.instance.networkDepend&&(n[e.id]=e,e.slot.mod({offline:t}))}),e.on("moduleDisposed",function(e){e.instance.networkDepend&&delete n[e.id]});var i=e.requireComponent("checkNetwork");i.on("changeNetwork",function(e){t=!e,a.each(n,function(e){e.slot.mod({offline:t})})})}}},{lodash:"lodash"}],19:[function(e,t,n){t.exports=function(e){e.getParentModuleType=function(t){try{var n=e.getModuleDescriptorById(t),a=e.getModuleDescriptorById(n.parentId);return a.type}catch(i){return""}}}},{}],20:[function(e,t,n){t.exports=function(e){e.rerenderModule=function(t,n){"string"==typeof t&&arguments.length<2&&(n=t);var a="string"==typeof n?e.modules[n]:n;if(!a)throw Error("Unable to rerender module: "+n);var i="string"==typeof t?e.element(t):t;return i.html(a.render()),a.bindEvents(),a},e.rerenderPartial=function(t,n,a){"string"==typeof t&&arguments.length<3&&(a=n,n=t);var i="string"==typeof t?e.element(t):t;i.html(e.renderPartial(n,a))}}},{}],21:[function(e,t,n){var a=e("lodash"),i=req("lib/eventify");t.exports=function(e){function t(e){return r[e]=new o,i(r[e])}function n(){this.context={}}function o(){this.context={}}var r={};n.prototype=a.create(o.prototype),n.prototype.getById=function(e){return r[e]||t(e)},n.prototype.makeCurrent=function(e){return r[e]||t(e),this.context=r[e].context,r[e]},e.searchContext=new n,o.prototype.read=function(e){return this.context[e]},o.prototype.getAllContexts=function(){return r},o.prototype.write=function(e,t){this.context[e]=t},o.prototype.del=function(e){delete this.context[e]},o.prototype.getFilters=function(){return this.context.values||{}},o.prototype.setFilters=function(e){e=e||{},this.context.values=e},o.prototype.setFilterValue=function(e,t){var n=this.getFilters();n[e]=t,this.setFilters(n)},o.prototype.delFilterValue=function(e){var t=this.getFilters();delete t[e],this.setFilters(t)},o.prototype.setBlockDa=function(t){var n=[];t&&t.primary_attributes&&(n=a.map(t.primary_attributes,function(n){return e.isGrym?n:t.group+"_"+n})),this.context.bAttrs=n}},t.exports.slotLinks=["searchContext"]},{lodash:"lodash"}],22:[function(e,t,n){(function(n){var a=e("lodash");t.exports=function(t){function i(){if(!t.isServer){var a=e("slot/env");return Math.round(((new Date).getTime()-a.global.time.userTime)/1e3)}return n.uptime()}function o(){l=!0;var e=s.dequeue();if(e){var n=+new Date-+new Date(e.error.date);if(n>t.config.logStoreDuration)return void o();r(e.message,e.error,function(t){"OK"==t?o():s.enqueue(e)})}else l=!1}var r=req("lib/sendError"),s=req("lib/storage/storage")("log",{size:t.config.logStorageSize,storage:t.requireComponent("localStorage")}),l=!1;t.sendErrorFromStorage=o,t.sendError=function(e,c){function u(t){"OK"!=t?s.enqueue({message:e,error:f}):l||o()}var d=t.requireComponent("appState");c&&(a.isString(c)?c={message:c}:c.userAgentInfo&&(c=a.omit(c,"userAgentInfo")));var h;try{h=i()}catch(p){h="error"}var f={appSide:t.isClient?"client":"server",title:e,userAgent:t.ua().ua,client_ip:t.registry.get("ip"),uptime:h};if(t.isClient){var m,g;try{var _=d.getPrevState(),v=d.getActualState(),y=d.getState();g=d.comparator(_,v),m=d.comparator(v,y)}catch(p){g=m="error"}a.extend(f,{url:""+document.location,prevStateDiff:g,wantedStateDiff:m})}else a.extend(f,{url:t.registry.get("protocol")+"://"+t.registry.get("host")+t.registry.get("url"),memoryUsage:n.memoryUsage(),pid:n.pid});a.extend(f,c),r(e,f,t.isGrym?u:a.noop)}},t.exports.slotLinks=["sendError","sendErrorFromStorage"]}).call(this,e("_process"))},{_process:396,lodash:"lodash","slot/env":"slot/env"}],23:[function(e,t,n){var a=e("lodash"),i=req("helpers/seo");t.exports=function(e){var t=e.requireComponent("i18n"),n=e.requireComponent("regionManager"),o=e.requireComponent("appState"),r=e.requireComponent("featureSwitcher");e.notifySeoParams=function(s){s=s||{};var l=i.detectCityType(n,s.cityName,s.cityType),c=a.merge(s,{moduleType:e.self().type,multilangEnabled:r.get("languageSwitcher"),availableLanguages:n.getRegion().availableLanguages,defaultLanguage:n.getRegion().defaultLanguage,currentLanguage:o.getLang(),cityType:l.type,cityNameGenitive:l.genitive,cityNamePrepositional:l.prepositional,cityNameAccusative:l.accusative,cityName:l.name,city:l.code});e.notify("setSeoParams",i.getSeoParams(c,e.location.origin(),t))}}},{lodash:"lodash"}],24:[function(e,t,n){t.exports=function(e){e.shouldRender=function(){return e.appIsBound()||e.isStateNotRendered()||e.notRender}}},{}],25:[function(e,t,n){t.exports=[e("./action"),e("./dumb"),e("./getLoyaltyState"),e("./googletag"),e("./interest"),e("./mergeActions"),e("./rerenderers"),e("./seo"),e("./shouldRender"),e("./debug")]},{"./action":3,"./debug":8,"./dumb":9,"./getLoyaltyState":11,"./googletag":12,"./interest":14,"./mergeActions":17,"./rerenderers":20,"./seo":23,"./shouldRender":24}],26:[function(e,t,n){t.exports=[e("./i18n")]},{"./i18n":13}],27:[function(e,t,n){function a(t){if(t.config["superagent.mockAvailable"]){var n=t.cookie("_mock_api_response");e("../../../lib/request2").mockSuperagentIfNeed(n)}}var i=e("lodash");t.exports=function(t){function n(e){return function(n){var a=t.requireComponent("appState");a.init(e,function(){u(),s(),l(a),c(),n()})}}function o(){var e=t.requireComponent("appState"),n=t.requireComponent("localStorage"),a=t.config["countryFrom.storageKey"],i=(e.get("city")||{}).countryFrom||n.getItem(a),o=-1!=t.config["featuresParams.globalMap.countries"].indexOf(i);if(o){n.setItem(a,i);var r=t.requireComponent("featureSwitcher");r.set("globalMap",!0)}}function r(e){function n(e){return e.startsWith("//")?(t.useHttps?"https:":"http:")+e:e.startsWith("http:")&&t.useHttps?e.replace(/^http:/,"https:"):e}i.each(e.relativeUrl,function(t){var a=e[t];i.isObject(a)?i.each(a,function(e,t){a[t]=n(e)}):e[t]=n(a)})}function s(){t.config.showMausoleumForMuseumBrowsers&&(t.isMausoleum=t.ua().isMuseum,t.config.canShowStaticByCookie&&t.cookie(t.config["static.cookieName"])&&(t.isMausoleum=!0),t.config["WebApi.canPatchKey"]&&t.isMausoleum&&(t.config["WebApi.key"]=t.config["WebApi.keyStatic"]))}function l(e){"mobile"==e.queryString.get("utm_medium")&&(t.isLandingPage=!(!e.panels.find("booklet")&&!e.get("photos")),"undefined"!=typeof history&&history.emulate&&(t.wasRendered=!1))}function c(){if(!t.isMausoleum){var e=i.reduce(t.config,function(e,t,n){return n.startsWith("split.")&&(e[n]=t),e},{}),n=t.requireComponent("featureSwitcher"),a=t.requireComponent("split"),o=t.requireComponent("regionManager");i.each(e,function(e,t){var n=t.replace("split.","");a.init(n,e)}),o.on("init region",function(){t.config["WebApi.canPatchKey"]&&n.get("dotMarkers3")&&(t.config["WebApi.key"]=t.config["WebApi.keyDotMarkers"])}),a.clearSplitsStorage(i.keys(e))}}function u(){var n,a,o=t.requireComponent("syncRegistry"),r=e("node-uuid"),s=t.config.group("WebApi").sessionKeys,l=t.cookie(s.user.cookieName),c=t.cookie(s.session.cookieName);l||(n=i.pick(s.user,"expires","path"),a=o.get(s.user.cookieName)||r.v4(),t.cookie(s.user.cookieName,a,n),l=a),c||(n=i.pick(s.session,"path"),n.expires=null,a=o.get(s.session.cookieName)||r.v4(),t.cookie(s.session.cookieName,a,n),c=a);var u=t.requireComponent("analytics");u.user=l,u.session=c}t.prepareInit=function(e){t.useHttps="https"==e.protocol,r(t.config),t.on("initStart",function(i){t.registry.set("isInit",!0),i.waitFor(n(e)),i.waitFor(o),a(t)})}}},{"../../../lib/request2":"/lib/request2.js",lodash:"lodash","node-uuid":456}],28:[function(e,t,n){var a=e("lodash"),i=["google"],o=[["Ruler"],["Geolocation"],["Dashboard"],["Sharing","Open"],["Sharing","vkontakte"],["Sharing","facebook"],["Sharing","twitter"],["Sharing","odnoklassniki"],["Sharing","Widget"],["Feedback","Open"],["Feedback","Submit"],["Feedback","Owner"],["Print"],["Extras"],["Copyright"]];t.exports=function(e){function t(t,a){if(e.inGlobal()&&n(t)&&r(a)){var i=a.shift();i="Global_"+i,a.unshift(i)}return a}function n(e){return a.contains(i,e)}function r(e){return!!a.find(o,function(t){var n=a.intersection(t,e);return n.length==t.length})}return t},t.exports._args=["$appState"]},{lodash:"lodash"}],29:[function(e,t,n){var a,i,o,r=e("lodash"),s=e("./bss/tracker"),l=req("lib/hashmultivalue"),c=req("helpers/analytics"),u=e("url"),d=new l,h={PLACE_CATALOG:c.bss.PLACES.CATALOG,PLACE_MAP:c.bss.PLACES.MAP,setPlaceCatalog:function(){i.set("analyticsPlace",c.bss.PLACES.CATALOG)},setPlaceMap:function(){i.set("analyticsPlace",c.bss.PLACES.MAP)},getPlace:function(){return i.get("analyticsPlace")||null},setPlace:function(e){i.set("analyticsPlace",e)},setNewPoiHash:function(e,t){d.add(e,t)},getFromPoiHash:function(e){return d.getLast(e)},writeBssInfoInCookie:function(e,t){if(!a.isServer||a.isMausoleum){var n=e.id&&e.id.split("_"),i=n[0],s=n[1];if(e.reg_bc_url){var l=u.parse(e.reg_bc_url,!0);s=r.get(l,"query.hash",n[1])}var d=o.getRegion().code,h=t||this.getPlace()||c.bss.PLACES.CATALOG;if(s&&i&&h&&d){var p="2gis_bss_"+i,f=s+"|"+h,m={path:"/"+d+"/firm/"+i,expires:new Date(Date.now()+36e5)};a.cookie(p,f,m)}}},user:null,session:null};t.exports=function(e){return a=e,o=a.requireComponent("regionManager"),i=a.requireComponent("appState"),{analytics:h,init:function(e,t,n){var i=new s(a);e.launch=i.launchTracker,t.launch=i,n("launch"),e.search=i.searchTracker,t.search=i,n("search"),e.impression=i.impressionTracker,t.impression=i,n("impression"),e.imp=i.postImpTracker,t.imp=i,n("imp"),e.apitracker=i.bcTracker,t.apitracker=i,n("apitracker"),e.bc=i.postBcTracker,t.bc=i,n("bc")}}}},{"./bss/tracker":31,lodash:"lodash",url:419}],30:[function(e,t,n){"use strict";function a(e){if(!g[e])return null;if(!_[e]){var t=u.cloneDeep(m);u.set(t,"properties.add",g[e]),_[e]=d(t)}return _[e]}function i(e){return"bc"!=e.type?!1:e.url||e.fields.hash?h(e):!1}function o(e){if("1"!=e.type)return!1;var t=a("bcFirm");return t?t(e):!1}function r(e){return"impression"!=e.type?!1:p(e)?"reg_impression"==e.fields.action:!1}function s(e){if("2"!=e.type)return!1;var t=a("impFirm");return t?t(e):!1}function l(e){if("3"!=e.type)return!1;var t=a("search");return t?t(e):!1}function c(e){return"launch"!=e.type?!1:f(e)}var u=e("lodash"),d=e("is-my-json-valid"),h=d({type:"object",additionalProperties:!1,properties:{url:{type:"string"},type:{type:"string"},fields:{type:"object",additionalProperties:!1,properties:{action:{type:"string"},eventid:{type:"number"},place:{type:"number"},ill:{type:"number"},authuser:{type:"number"},hash:{type:"string"},ts:{type:"number"},sid:{type:"string"},user:{type:"string"},utm_source:{type:"string"},utm_medium:{type:"string"},utm_term:{type:"string"},utm_campaign:{type:"string"},utm_content:{type:"string"},indoor:{type:"number"}},required:["action","eventid","ts","place"]}},required:["type"]}),p=d({additionalProperties:!1,type:"object",properties:{type:{type:"string"},fields:{additionalProperties:!1,type:"object",properties:{hash:{type:"string"},action:{type:"string"},branch_id:{type:["string","number"]},place:{type:"number"},ill:{type:"number"},authuser:{type:"number"},ts:{type:"number"},sid:{type:"string"},user:{type:"string"},utm_source:{type:"string"},utm_medium:{type:"string"},utm_term:{type:"string"},utm_campaign:{type:"string"},utm_content:{type:"string"},indoor:{type:"number"}},required:["hash","action","ts","place"]}},required:["type"]}),f=d({additionalProperties:!1,type:"object",properties:{type:{type:"string"},fields:{additionalProperties:!1,type:"object",properties:{api_key:{type:"string"},region_id:{type:["number","string"]},authuser:{type:"number"},ts:{type:"number"},sid:{type:"string"},user:{type:"string"},utm_source:{type:"string"},utm_medium:{type:"string"},utm_term:{type:"string"},utm_campaign:{type:"string"},utm_content:{type:"string"}},required:["api_key","region_id","ts"]}},required:["type"]}),m={additionalProperties:!1,type:"object",properties:{v:{type:"number"},shv:{type:"string",maxLength:16},type:{type:"number"},event:{"type:":"string",pattern:"^[a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}-4[a-zA-Z0-9]{3}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{12}$"},user:{"type:":"string",pattern:"^[a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}-4[a-zA-Z0-9]{3}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{12}$"},authuser:{type:"number"},sid:{"type:":"string",pattern:"^[a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}-4[a-zA-Z0-9]{3}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{12}$"},ts:{type:"number"},isd:{type:"string"},proj:{type:"number"},key:{type:"string",maxLength:10},lang:{type:"string",minLength:5,maxLength:5},utm:{additionalProperties:!1,type:"object",properties:{source:{type:"string"},medium:{type:"string"},term:{type:"string"},campaign:{type:"string"},content:{type:"string"}}}},required:["v","shv","type","event","user","sid","ts","isd","proj","key","lang","add"]},g={search:{additionalProperties:!1,type:"object",properties:{tx:{type:"string"},ortx:{type:"string"},searchtype:{type:"number",minimum:0,maximum:255},res:{additionalProperties:!1,type:"object",properties:{org:{type:"number",minimum:0},geo:{type:"number",minimum:0},transport:{type:"number",minimum:0}}},rubr:{type:"array",items:{type:"string",pattern:"^[0-9]+$"},uniqueItems:!0},advertisers:{type:"array",items:{type:"object",additionalProperties:!1,properties:{org:{type:"string",pattern:"^[0-9]+$"},rubr:{type:"string",pattern:"^[0-9]+$"}},required:["org","rubr"]}},pr:{type:"number",minimum:0,maximum:255},flt:{type:"array",items:{type:"object",additionalProperties:!1,properties:{type:{type:"string"},vl:{type:"string"}},required:["type","vl"]}},txgs:{type:"number",minimum:0,maximum:1},sort:{type:"string",maxLength:50},branch:{type:"string",pattern:"^[0-9]{1,20}$"},gs:{type:"object",additionalProperties:!1,properties:{building:{type:"object",additionalProperties:!1,properties:{id:{type:"string",pattern:"^[0-9]{1,20}$"}},required:["id"]},circle:{type:"object",additionalProperties:!1,properties:{lat:{type:"number"},lon:{type:"number"},radius:{type:"number"}},required:["lat","lon","radius"]},rectangle:{type:"object",additionalProperties:!1,properties:{lat1:{type:"number"},lon1:{type:"number"},lat2:{type:"number"},lon2:{type:"number"}},required:["lat1","lon1","lat2","lon2"]},polygon:{type:"number"}}},lat:{type:"number"},lon:{type:"number"},referer:{type:"string"},indoor:{type:"string",pattern:"^[0-9]{1,20}$"}},required:["pr"]},bcFirm:{additionalProperties:!1,type:"object",properties:{branch:{type:"string",pattern:"^[0-9]{1,20}$"},org:{type:"string",pattern:"^[0-9]{1,20}$"},bc:{type:"number",minimum:0,maximum:255},tys:{type:"number",minimum:0,maximum:255},s:{type:"string",pattern:"^[0-9]{1,20}$"},ill:{type:"number",minimum:0,maximum:255},ads:{type:"number",minimum:0,maximum:1},adst:{type:"number"},pos:{type:"number",minimum:1},rubr:{type:"string",pattern:"^[0-9]{1,20}$"},hash:{type:"string"},place:{type:"number",minimum:1,maximum:2},pl1:{type:"string",minLength:1},pgs:{type:"number",minLength:1},ab:{type:"string",minLength:1},page:{type:"number",minLength:1},indoor:{type:"string",pattern:"^[0-9]{1,20}$"}},required:["branch","org","bc","tys","s","ads","adst"]},bcGeo:{additionalProperties:!1,type:"object",properties:{branch:{type:"string",pattern:"^[0-9]{1,20}$"},org:{type:"string",pattern:"^[0-9]{1,20}$"},bc:{type:"number",minimum:0,maximum:255},tys:{type:"number",minimum:0,maximum:255},s:{type:"string",pattern:"^[0-9]{1,20}$"},ill:{type:"number",minimum:0,maximum:255},ads:{type:"number",minimum:0,maximum:1},adst:{type:"number"},pos:{type:"number",minimum:1},rubr:{type:"string",pattern:"^[0-9]{1,20}$"},hash:{type:"string"},place:{type:"number",minimum:1,maximum:2},pl1:{type:"string",minLength:1},pgs:{type:"number",minLength:1},ab:{type:"string",minLength:1},page:{type:"number",minLength:1},indoor:{type:"string",pattern:"^[0-9]{1,20}$"},geo:{additionalProperties:!1,type:"object",properties:{id:{type:"string",pattern:"^[0-9]{1,20}$"},type:{type:"number"}},required:["type"]},cardview:{type:"number"}},required:["bc","tys","s","ads","adst"]},impFirm:{additionalProperties:!1,type:"object",properties:{branch:{type:"string",pattern:"^[0-9]{1,20}$"},org:{type:"string",pattern:"^[0-9]{1,20}$"},tys:{type:"number",minimum:0,maximum:255},s:{type:"string",pattern:"^[0-9]{1,20}$"},ill:{type:"number",minimum:0,maximum:255},ads:{type:"number",minimum:0,maximum:1},adst:{type:"number"},pos:{type:"number",minimum:1},rubr:{type:"string",pattern:"^[0-9]{1,20}$"},hash:{type:"string"},place:{type:"number",minimum:1,maximum:2},page:{type:"number",minLength:1},indoor:{type:"string",pattern:"^[0-9]{1,20}$"}},required:["branch","org","tys","s","ads"]},impGeo:{additionalProperties:!1,type:"object",properties:{branch:{type:"string",pattern:"^[0-9]{1,20}$"},org:{type:"string",pattern:"^[0-9]{1,20}$"},tys:{type:"number",minimum:0,maximum:255},s:{type:"string",pattern:"^[0-9]{1,20}$"},ill:{type:"number",minimum:0,maximum:255},ads:{type:"number",minimum:0,maximum:1},adst:{type:"number"},pos:{type:"number",minimum:1},rubr:{type:"string",pattern:"^[0-9]{1,20}$"},hash:{type:"string"},place:{type:"number",minimum:1,maximum:2},page:{type:"number",minLength:1},indoor:{type:"string",pattern:"^[0-9]{1,20}$"},geo:{additionalProperties:!1,type:"object",properties:{id:{type:"string",pattern:"^[0-9]{1,20}$"},type:{type:"number"}},required:["type"]}},required:["tys","s","ads","adst"]}},_={};t.exports={checkBcParams:i,checkPostBcParams:o,checkImpressionParams:r,checkPostImpressionParams:s,checkSearchParams:l,checkLaunchParams:c}},{"is-my-json-valid":449,lodash:"lodash"}],31:[function(e,t,n){function a(e){this._app=e,this._analytics=e.requireComponent("analytics"),this._appState=e.requireComponent("appState"),this._authorization=e.requireComponent("authorization"),this._featureSwitcher=e.requireComponent("featureSwitcher"),this._queue=[],this._currentRequestData=null,u.initConfig(e.config),this["debugger"]=u.initDebug(),u.initLogger()}function i(){return this._authorization.isAuthorized()?parseInt(this._authorization.getAuthorizedUserSync().authorizedUser.id,10):!1}function o(e){c("Bss tracker error.",e),this["debugger"](e.type,e)}function r(e,t){"undefined"!=typeof window&&window.TestHandles.apilog.sign("apitracker",{type:e,data:t})}var s=e("lodash"),l=req("lib/request2"),c=req("lib/sendError"),u=e("./utils");req("lib/requestAnalysis"),t.exports=a,a.prototype.startQueue=function(){this._currentRequestData||(this._currentRequestData=this._queue.shift(),this._currentRequestData&&this.request(this._currentRequestData))},a.prototype.bcTracker=function(e){var t=u.prepareBc(e);s.has(t,"fields")&&(t.fields.place=this.getAnalyticsPlace(e.place),t.fields=this.extendBssData(t.fields));var n=u.getUrl(t);n&&this.addToQueue(n,"bcTracker",e)},a.prototype.postBcTracker=function(e){var t=s.get(e,"add.hash"),n=s.pick(e,s.identity);n.add=s.pick(n.add,s.identity);var a=u.getPostRegEventUrl(t,n.type),i=u.validatePostBc(n);i&&a&&this.addToQueue(a,"postBcTracker",n)},a.prototype.impressionTracker=function(e){var t=u.prepareImpression(e);s.has(t,"fields")&&(t.fields.place=this.getAnalyticsPlace(e.place),t.fields=this.extendBssData(t.fields));var n=u.getUrl(t);n&&this.addToQueue(n,"impressionTracker",e)},a.prototype.postImpTracker=function(e){var t=s.get(e,"add.hash"),n=s.pick(e,s.identity);n.add=s.pick(n.add,s.identity);var a=u.getPostRegEventUrl(t,n.type),i=u.validatePostImp(n);i&&a&&this.addToQueue(a,"postImpTracker",n)},a.prototype.searchTracker=function(e){var t=this._app.requireComponent("regionManager").getRegion(),n=s.get(e,"hash"),a=u.prepareSearch(s.defaults({id:s.get(t,"id"),locale:s.get(t,"locale")},e));a=s.pick(this.extendBssData(a,!0),s.identity),
a.add=s.pick(a.add,s.identity);var i=u.getPostRegEventUrl(n,a.type),o=u.validateSearch(a);o&&i&&this.addToQueue(i,"searchTracker",a)},a.prototype.launchTracker=function(e){var t=u.prepareLaunch({region_id:e,api_key:this._app.config["WebApi.key"]});s.has(t,"fields")&&(t.fields=this.extendBssData(t.fields));var n=u.getUrl(t);n&&this.addToQueue(n,"launchTracker",t)},a.prototype.addToQueue=function(e,t,n){this._queue.push({url:e,params:{type:t,data:n}}),this.startQueue()},a.prototype.request=function(e){function t(t){var n=t.text;"1"==n||"2"==n?a.successHandler():a.errorHandler(e,"Api responded: "+n,t.statusCode)}function n(t){a.errorHandler(e,t,t.status)}var a=this;r(e.params.type,e.params.data);var i=["searchTracker","postImpTracker","postBcTracker"];return s.contains(i,e.params.type)?l("post",e.url).send(e.params.data).timeout(this.getConfigParam(this._app.isClient?"clientNetworkTimeout":"networkTimeout")).accept("text/plain").withCredentials().then(t)["catch"](n):l("get",e.url).timeout(this.getConfigParam(this._app.isClient?"clientNetworkTimeout":"networkTimeout")).accept("text/plain").withCredentials().then(t)["catch"](n)},a.prototype.successHandler=function(){this._currentRequestData=this._queue.shift(),this._currentRequestData&&this.delayRequest(this._currentRequestData)},a.prototype.errorHandler=function(e,t,n){var a=this._app.ua(),i={text:t.message||t||"No error text",status:s.isNumber(n)?n:"unknown, possibly request hasn't been transmitted",url:s.get(e,"url"),userAgent:a.browser.name+" "+a.browser.version,isMobile:a.isMobile+""};"0"!=t&&this._featureSwitcher.get("resendBssPackage")?this.delayRequest(e):(o.call(this,{params:e.params,errorMsg:i}),this.successHandler())},a.prototype.delayRequest=function(e){s.delay(this.request.bind(this),this.getConfigParam("sendDelay"),e)},a.prototype.getAnalyticsPlace=function(e){return e||this._analytics.getPlace()},a.prototype.extendBssData=function(e,t){var n=this._appState.queryString,a={authuser:i.call(this),sid:this._analytics.session,user:this._analytics.user};if(t){var o={source:n.get("utm_source"),medium:n.get("utm_medium"),term:n.get("utm_term"),campaign:n.get("utm_campaign"),content:n.get("utm_content")};o=s.pick(o,s.identity),s.isEmpty(o)||(a.utm=o)}else a.utm_source=n.get("utm_source"),a.utm_medium=n.get("utm_medium"),a.utm_term=n.get("utm_term"),a.utm_campaign=n.get("utm_campaign"),a.utm_content=n.get("utm_content");return s.extend(e,a)},a.prototype.getConfigParam=function(e){return e="bss."+e,this._app.config.group("analytics")[e]}},{"./utils":32,lodash:"lodash"}],32:[function(e,t,n){function a(e){var t;return"bc"==e.type&&e.url?t=h.parse(e.url,!0):(t=h.parse(l.group("analytics")["bss.url"],!0),t.query={v:l.group("analytics")["bss.statVersion"]}),t.query=o.merge({},t.query,e.fields),t.search=null,h.format(t)}function i(e){return/[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}/i.test(e)}var o=e("lodash"),r=req("helpers/analytics"),s=o.noop,l={},c=o.noop,u=e("./schema"),d=req("lib/sendError"),h=e("url"),p=e("node-uuid");n.initConfig=function(e){l=e},n.initLogger=function(e){c=o.isFunction(e)?e:d},n.initDebug=function(){return s=function(e,t){}},n.getUrl=function(e){var t=!1;if(!o.has(e,"fields"))return s("Bss empty jsonData.fields",e),c("Bss empty data bss error.",e),"";switch(e.fields=o.pick(e.fields,o.identity),e.type){case"bc":t=u.checkBcParams(e);break;case"impression":t=u.checkImpressionParams(e);break;case"launch":t=u.checkLaunchParams(e)}return t?a(e):(s("BSS validation error",e),c("Bss tracker validation error ("+e.type+")",e),"")},n.getPostRegEventUrl=function(e,t){if(!i(e))return s("Bss search-error","Incorrect hash passed: "+e),c("Bss search-error: incorrect hash passed",e),"";var n=3==t?"search/":"direct/",a=h.parse(l.group("analytics")["bss.url"],!0);return a.pathname=n+r.searchHashToBaseHash(e),h.format(a)},n.prepareBc=function(e){var t=e.url,n=[];o.isString(e.branch_id)&&(n=e.branch_id.split("_"));var a=o.omit(e,"url","branch_id");a.ts=r.bss.getTime();var i={type:"bc",url:t,fields:a};if(i.url)s("bc",i);else{if(!n[1])return s("bc-error","Incomplete data: "+a.branch_id),c("bc-error url and hash are undefined",a),null;i.fields.hash=n[1],s("bc(hash from id)",a)}return i},n.prepareImpression=function(e){var t,n=o.omit(e,!0,"isPoi","url");if(e.url){var a=h.parse(e.url,!0);t=o.get(a,"query.hash")}var i=[];if(o.isString(n.branch_id)&&(i=n.branch_id.split("_")),i[1])n.hash=i[1],s("impression",n);else{if(!t)return s("impression-error","Incomplete data: "+n.branch_id),c("impression-error",n),null;n.hash=t,s("impression(hash from reg_bc_url)",n)}return n.branch_id=n.branch_id&&i[0],n.action="reg_impression",n.ts=r.bss.getTime(),{type:"impression",fields:n}},n.prepareSearch=function(e){var t={};return t.v=parseInt(l["analytics.bss.statVersion"],10),t.type=3,t.shv=e.shv,t.event=p.v4(),t.ts=r.bss.getTime(),t.isd=e.isd,t.proj=parseInt(e.id,10),t.key=l["WebApi.key"],t.lang=e.locale,t.add=o.pick(e,["tx","ortx","searchtype","res","rubr","advertisers","pr","flt","referer","txgs","sort","branch","gs","lat","lon","indoor"]),t},n.validateSearch=function(e){var t=u.checkSearchParams(e);return t||(s("BSS validation error",e),c("Bss tracker validation error (search)",e)),t},n.validatePostBc=function(e){var t=u.checkPostBcParams(e);return t||(s("BSS validation error",e),c("Bss tracker validation error (post BC)",e)),t},n.validatePostImp=function(e){var t=u.checkPostImpressionParams(e);return t||(s("BSS validation error",e),c("Bss tracker validation error (post imp)",e)),t},n.prepareLaunch=function(e){var t={type:"launch",fields:{ts:r.bss.getTime()}};return o.extend(t.fields,e),t}},{"./schema":30,lodash:"lodash","node-uuid":456,url:419}],33:[function(e,t,n){var a=e("lodash"),i=req("helpers/panels"),o={dimension3:{mainRule:function(e){var t=e.requireComponent("appState"),n=t.panels.findLast("find"),a=t.panels.findLast("firm");return n&&n.media||a&&a.media},eventRules:[[RegExp("^Media_Card_event|^Search")],[RegExp("^Cards"),RegExp(".*"),RegExp("^Media")]],result:function(e){return e.searchContext.read("requestType")||"else"}},dimension2:{mainRule:function(e){var t=e.requireComponent("appState"),n=e.requireComponent("contextStorage"),o=t.panels.last()||{},r=e.searchContext.read("contextRubrics"),s=n.getLastByType("panels"),l="firm"==o.type&&!a.isEmpty(s),c=i.isSearchType(o.type)&&!a.isEmpty(r);return l||c},eventRules:[[RegExp("^Firm_Card_event|^Media_Card_event|^Search")],[RegExp("^Cards"),RegExp("^Firm"),RegExp(".*")]],result:function(e){var t,n=e.requireComponent("contextStorage"),i=a.get(e.searchContext.read("contextRubrics"),"[0].name"),o=n.getLastByType("panels");return t=!i||n.isSearchContextIgnored()?o:i}}};t.exports=function(e){return function(t){t=a.toArray(t);var n={};return a.each(o,function(i,o){var r=a.some(i.eventRules,function(e){return a.every(e,function(e,n){return e.test(t[n])})});r&&i.mainRule(e)&&(n[o]=i.result(e))}),a.isEmpty(n)||t.push(n),t}}},{lodash:"lodash"}],34:[function(e,t,n){function a(e,t){!function(e,t,n,a,i,o,r){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,o=t.createElement(n),r=t.getElementsByTagName(n)[0],o.async=1,o.src=a,r.parentNode.insertBefore(o,r)}(window,document,"script",e.config.group("analytics")["google.url"],d);var n=window[d],a=i("analytics.google.keys");n("create",a,{cookieDomain:i("cookieDomain")});var r=e.requireComponent("featureSwitcher");r.get("dotMarkers3")?o("DotMarkers","test"):o("DotMarkers","control");var s=e.requireComponent("appState"),c=s.getZoom();c&&o("Zoom",c.zoomlevel),l.onInit(function(){o("Project",l.code())}),n("create",i("analytics.google.bookletsKey"),{name:"booklets"}),n("create",i("analytics.google.floorsKey"),{name:"floors"}),n("create",i("analytics.google.testsKey"),{name:"tests"}),n("require","displayfeatures"),n("set","checkProtocolTask",null);var h=["send","booklets.send","floors.send","tests.send"],f=u.map(h,function(e){return new p(function(t){n(e,"pageview",{hitCallback:t})})});p.all(f).then(t)}function i(e){return c._config(e,l.getRegion().country_code)}function o(e,t){var n=h.ga.DIMENSION[e];return u.isString(t)||(t=JSON.stringify(t)),window[d]("set",n,t)}function r(e){window[d]("set","page",e)}var s,l,c,u=e("lodash"),d="gaOnlineGlobalTracker",h=req("helpers/analytics"),p=e("bluebird");t.exports=function(t){return c=t.requireComponent("i18n"),l=t.requireComponent("regionManager"),s=e("./dimensionChecker")(t),{load:u.partial(a,t),init:function(e,t,n){e.google=function(){var e=s(arguments);return e.unshift("send","event"),window[d].apply(this,e)},t.google=this,n("google"),e.googleBooklets=u.partial(window[d],"booklets.send","event"),t.googleBooklets=this,n("googleBooklets"),e.googleFloors=u.partial(window[d],"floors.send","event"),t.googleFloors=this,n("googleFloors"),e.googleTests=u.partial(window[d],"tests.send","event"),t.googleTests=this,n("googleTests"),e.googlePageview=u.partial(window[d],"send","pageview"),t.googlePageview=this,n("googlePageview"),e.googleCustom=o,t.googleCustom=this,n("googleCustom"),e.googlePageParam=r,t.googlePageParam=this,n("googlePageParam")}}}},{"./dimensionChecker":33,bluebird:384,lodash:"lodash"}],35:[function(e,t,n){t.exports=function(e){function t(){var t=e.requireComponent("regionManager").getRegion(),n="2gis/online"+(t?"/"+t.country_code+"/"+t.code:"");!function(t){var a,i=escape(document.referrer),o=escape(document.URL),r=Math.random();screen?(a=";s"+screen.width+"*"+screen.height+"*",a+=screen.colorDepth?screen.colorDepth:screen.pixelDepth):a="";var s=t.getElementsByTagName("script")[0],l=t.createElement("script");l.type="text/javascript",l.defer=!0,l.text="var img = new Image();img.src='"+e.config["analytics.liveInternet.src"]+";"+n+"?t38.6;r"+i+a+";u"+o+";"+r+"'",s.parentNode.insertBefore(l,s)}(document,window)}return e.on("clientReady",function(){e.requireComponent("regionManager").on("init region",function(){e.isClient&&t()})}),{load:t}}},{}],36:[function(e,t,n){function a(e){return o._config(e,r.getRegion().country_code)}function i(){var e=a("analytics.tns");e&&s.isObject(e)&&!function(t,n,a){(t[a]=t[a]||[]).push(function(){try{tnsCounter2gis_ru=new TNS.TnsCounter({account:e.account,tmsec:e.tmsec})}catch(t){}});var i=n.createElement("script");i.type="text/javascript",i.async=!0,i.src=("https:"==n.location.protocol?"https:":"http:")+"//www.tns-counter.ru/tcounter.js";var o=n.getElementsByTagName("script")[0];o.parentNode.insertBefore(i,o)}(window,document,"tnscounter_callback")}var o,r,s=e("lodash");t.exports=function(e){return o=e.requireComponent("i18n"),r=e.requireComponent("regionManager"),{load:i}}},{lodash:"lodash"}],37:[function(e,t,n){function a(e){!function(t,n,a){(n[a]=n[a]||[]).push(function(){try{c.each(o(),function(e){n["yaCounter"+e]=new Ya.Metrika({id:e,webvisor:!1,clickmap:!1,trackLinks:!0,accurateTrackBounce:!l.isGrym,trackHash:!0})})}catch(e){}}),n[a].push(e);var i=t.getElementsByTagName("script")[0],r=t.createElement("script"),s=function(){i.parentNode.insertBefore(r,i)};r.type="text/javascript",r.async=!0,r.src=l.config.group("analytics")["yandex.url"],"[object Opera]"==n.opera?t.addEventListener("DOMContentLoaded",s,!1):s()}(document,window,"yandex_metrika_callbacks")}function i(e){return r._config(e,s.getRegion().country_code)}function o(){return{yandex:i("analytics.yandex.keys"),yandexBooklets:i("analytics.yandex.bookletsKey")}}var r,s,l,c=e("lodash");t.exports=function(e){return l=e,r=l.requireComponent("i18n"),s=l.requireComponent("regionManager"),{load:a,init:function(e,t,n){var a=o();c.each(a,function(a,i){e[i]=window["yaCounter"+a].reachGoal,t[i]=this,n(i)}),e.yandexPageview=window["yaCounter"+a.yandex].hit,t.yandexPageview=this,n("yandexPageview")}}}},{lodash:"lodash"}],38:[function(e,t,n){var a=e("lodash");t.exports=function(t){function n(){var n,i,o=t.requireComponent("i18n"),r=t.requireComponent("featureSwitcher"),s=o.getSettings().webvisor,l=!1,c=t.requireComponent("regionManager").getRegion(),u=c&&c.code;return s&&r.get("webvisor")?(s&&0==s.length&&(l=!0,i=1),n=a.find(s,function(e){return e.city===u}),n&&(l=!0,i=n.turnOnProbability),l&&Math.random()<i?(e("slot/lib/loadScript")(t.config.group("webvisor")["inspectlet.url"]),!0):!1):!1}function i(e){window.__insp&&window.__insp.push(["tagSession",e])}function o(e){window.__insp&&(e?window.__insp.push(["virtualPage"],{url:e}):window.__insp.push(["virtualPage"]))}return{load:n,trackEvent:i,trackPageview:o}}},{lodash:"lodash","slot/lib/loadScript":"slot/lib/loadScript"}],39:[function(e,t,n){var a=e("lodash"),i=req("lib/request2");t.exports=function(e,t,n,o){function r(e){return!e||!e.result||e.meta&&e.meta.error?o(e):o(null,e.result)}return o=o||a.noop,i(t,e).query(n).then(function(e){r(e.body)})["catch"](function(e){o(e)})}},{lodash:"lodash"}],40:[function(e,t,n){function a(e,t){return this.inject(e,t)}function i(e,t){return this.injectTrue(e,t)}function o(e){return function(t,n){return this.injectInArray(e,t,n)}}var r=e("./validators");n.onEntryInjected=function(e,t){"panels"==t&&"find"==e.type&&(e.searchId=0)},n.panelsSecondaryParams=["page","filters","text","geoid","apartment","subpageName","tab","mode","section","photoId","discountId","tariffId","layerId","layerIds","awardRubricId","summerRubricName","eventday/mode","eventday/eventId","presents2015/presentId"],n.urls={"search/:text/query/:query/house/:house/[firms/:filters]/[rubricId/:rubricId]/[page/:page]":o("panels"),"search/:query/house/:house/[firms/:filters]/[rubricId/:rubricId]/[page/:page]":o("panels"),"search/:text/query/:query/firms/:filters/[rubricId/:rubricId]/[page/:page]":o("panels"),"search/:text/query/:query/rubricId/:rubricId[page/:page]":o("panels"),"search/:query/firms/:filters/[mode/:mode]/[rubricId/:rubricId]/[page/:page]":o("panels"),"search/[:query]/rubricId/:rubricId/[page/:page]":o("panels"),"search/:query/[mode/:mode]/[page/:page]":o("panels"),"booklet/:bookletId/geoid/:geoid/[apartment/:apartment]":o("panels"),"booklet/:bookletId/[page/:subpageName]":o("panels"),"rubric/:rubric/[firms/:filters]/[page/:page]":o("panels"),"rubricsNear/:rubrics/:lon,:lat":o("panels"),"gallery/[:photosType]/:id/[album/:albumName]":o("panels"),"photos/[:photosType]/:id-:photoId/[album/:albumName]":a,"photos/[:photosType]/:id/[album/:albumName]":a,"photos/:photosType":a,"album/:albumId-:section/photo/:photoId":a,"album/:section/photo/:photoId":a,"album/:albumId":a,"gallery/[:photosType]/:id-:photoId/[bookletId/:bookletId]/[room/:room]":a,"photos/[:photosType]/:id-:photoId/[bookletId/:bookletId]/[room/:room]":a,"article/:id":o("panels"),"discounts/:branchId/[rubricIds/:rubrics]/[discountId/:discountId]":o("panels"),"firm/:id,:lon,:lat/[:entrance]/[mediaTab/:tab]/[tariff/:tariffId]":o("panels"),"firm/:id/[:entrance]/[mediaTab/:tab]/[tariff/:tariffId]":o("panels"),"bindPhone/:pin":a,"service/:house/[group/:group]/[address/:address]/[firms/:filters]":o("panels"),"apartments/:house/[org/:orgId]":o("panels"),"apartmentsMap/:firmId":o("panels"),"inside/:house/[firms/:filters]/[page/:page]":o("panels"),"branches/:firmId/[sample/:filters]/[page/:page]":o("panels"),"proposalsMap/:branchId":o("panels"),"profiles/:profiles":o("panels"),"tab/:activeTab":a,"geo/:id,:lon,:lat":o("panels"),"geo/:lon,:lat":o("panels"),"geo/:id":o("panels"),filters:o("panels"),"flamp/:id":o("panels"),"reviews/:id":o("panels"),"route/:id":o("panels"),"callout/:lon,:lat,:zoom":a,"center/:lon,:lat":a,"zoom/:zoomlevel":a,"stop/:id":o("panels"),"station/:id":o("panels"),"stationPlatform/:platformId":o("panels"),"stationEntrance/:id":o("panels"),"platform/:platformId":o("panels"),"query/:query":a,"plusOne/:typeProvider,:id":a,share:a,"social/:provider":a,"auth/:authType/:email/:authConfirmCode":a,"auth/:authType/:errorType":a,"auth/:authType/[:email]":a,"city/:id/[countryFrom/:countryFrom]":a,traffic:a,"ruler/[points/:points]":a,"angle/:degrees":a,"subrubrics/:id":o("panels"),rubrics:o("panels"),routeTab:a,geolocation:a,cities:i,countries:i,"promoAccount/:firmId":a,promoAccount:a,"award2015/[:awardRubricId]":o("panels"),"ppnotTime/:date,:time[,:useSelected]":a,whatsNew:a,awardPopup:a,"eventday/[mode/:mode]/[eventId/:eventId]":o("panels"),"presents2015/[:presentId]":o("panels"),"9may":o("panels"),"summer2016/[:summerRubricName]":o("panels"),giftPopup:a,"ask/[:rubricShortId]":o("panels"),routeSearch:o("panels"),"from/:lon,:lat╎:text[╎:id]":a,"from/:text":a,"to/:lon,:lat╎:text[╎:id]":a,"to/:text":a,"rsType/:rsType":a,"waypoints/:points":a,"mediaMode/:switcher":a,"iframeMode/:switcher":a,"referrer/:text":a,global:i,"floors/[:modifier]/:complexId":a,"flCenter/:xPos,:yPos":a,"flTab/:floorsDashboardTab":a,"flRotation/:rotation":a,"flNum/:id":a,"flZoom/:floorZoom":a,"flFirmList/[page/:page]":o("panels"),"extraLayers/:layerIds":a,"extraLayersCard/:layerId,:featureId":o("panels"),"lang/:locale":a,"products/:productType/[:id]":o("panels"),weather:o("panels"),"holidaysDate/:date":a,"floorList[page/:page]":o("panels"),"favorites/:collectionID":o("panels")},n.stateRelations={routeSearch:{to:"to",from:"from",rsType:"rsType.rsType",waypoints:"waypoints.points",time:"ppnotTime"}},n.seoDefaults={nearZoom:17,middleZoom:15,farZoom:11},n.seoUrls={"default":"#",countries:"/countries/global",citiesWithCity:"/cities/:city[/lang/:locale]",cities:"/cities[/lang/:locale]",city:"/:city[/lang/:locale]",regionCity:"/:city/[lang/:locale/]/setcity/:id/[countryFrom/:countryFrom]/[zoom/:zoom]",regionCityWithGeolocation:"/:city/[lang/:locale/]/setcity/:id/geolocation/[countryFrom/:countryFrom]/[zoom/:zoom]",rubric:"/:city/[lang/:locale/]/search/:query/[firms/:filters]/rubricId/:id/[page/:page/]tab/firms/zoom/:farZoom",rubricListMain:"/:city/[lang/:locale/]/rubrics/zoom/:farZoom",rubricListSub:"/:city/[lang/:locale/]/subrubrics/:id/zoom/:farZoom",firm:"/:city/[lang/:locale/]/firm/:id/[mediaTab/:tab]/[center/:lon,:lat/zoom/:nearZoom]",firmNoCoords:"/:city/[lang/:locale/]/firm/:id/[mediaTab/:tab]/zoom/:farZoom",firmBranches:"/:city/[lang/:locale/]/branches/:firmId/[sample/:filters]/[page/:page]",firmComments:"/:city/[lang/:locale/]/firm/:id/reviews/:id/center/:lon,:lat/zoom/:nearZoom",firmCommentsNoCoords:"/:city/[lang/:locale/]/reviews/:id/zoom/:farZoom",firmMoreInfo:"/:city/[lang/:locale/]/firm/:id/article/:id/center/:lon,:lat/zoom/:nearZoom",firmPhoto:"/:city/[lang/:locale/]/firm/:id/gallery/firm/:id/[album/:albumName]/photos/firm/:id-:photoId/[album/:albumName]/[center/:lon,:lat]/zoom/:nearZoom",firmPhotoSingle:"/:city/[lang/:locale/]/firm/:id/photos/firm/:id-:photoId/[album/:albumName]/[center/:lon,:lat]/zoom/:nearZoom",firmPhotoAlbum:"/:city/[lang/:locale/]/firm/:id/gallery/firm/:id/[album/:albumName]/[center/:lon,:lat]/zoom/:nearZoom",geoPhoto:"/:city/[lang/:locale/]/geo/:id/gallery/geo/:id/[album/:albumName]/photos/geo/:id-:photoId/[album/:albumName]/[center/:lon,:lat]/zoom/:nearZoom",geoPhotoAlbum:"/:city/[lang/:locale/]/geo/:id/gallery/geo/:id/[album/:albumName]/[center/:lon,:lat]/zoom/:nearZoom",buildingPhoto:"/:city/[lang/:locale/]/geo/:id/gallery/geo/:id/[album/:albumName]/photos/geo/:id-:photoId/[album/:albumName]/[center/:lon,:lat]/zoom/:nearZoom",buildingPhotoAlbum:"/:city/[lang/:locale/]/geo/:id/gallery/geo/:id/[album/:albumName]/[center/:lon,:lat]/zoom/:nearZoom",firmBookletPhoto:"/:city/[lang/:locale/]/firm/:id/photos/booklets/:bookletId-:photoId/[center/:lon,:lat]/zoom/:nearZoom",geo:"/:city/[lang/:locale/]/geo/:id/[center/:lon,:lat]",geoNear:"/:city/[lang/:locale/]/geo/:id/center/:lon,:lat/zoom/:nearZoom",geoMiddle:"/:city/[lang/:locale/]/geo/:id/center/:lon,:lat/zoom/:middleZoom",geoAddress:"/:city/[lang/:locale/]/geo/:id/center/:lon,:lat/zoom/:nearZoom",geoMoreFirms:"/:city/[lang/:locale/]/inside/:id/[firms/:filters]/[page/:page]/center/:lon,:lat/zoom/:nearZoom",geoMoreServicing:"/:city/[lang/:locale/]/geo/:id/service/:id/center/:lon,:lat/zoom/:nearZoom",geoMoreProviders:"/:city/[lang/:locale/]/geo/:id/service/:id/group/internet/center/:lon,:lat/zoom/:nearZoom",geoMoreApartments:"/:city/[lang/:locale/]/geo/:id/apartments/:id/center/:lon,:lat/zoom/:nearZoom",firmMoreServicing:"/:city/[lang/:locale/]/firm/:firmId/service/:id/center/:lon,:lat/zoom/:nearZoom",firmMoreProviders:"/:city/[lang/:locale/]/firm/:firmId/service/:id/group/internet/center/:lon,:lat/zoom/:nearZoom",transportStopMetro:"/:city/[lang/:locale/]/station/:id/[center/:lon,:lat/zoom/:nearZoom]",transportStopMetroEntrance:"/:city/[lang/:locale/]/stationEntrance/:id/[center/:lon,:lat/zoom/:nearZoom]",transportStop:"/:city/[lang/:locale/]/stop/:id/[center/:lon,:lat/zoom/:nearZoom]",transportPlatform:"/:city/[lang/:locale/]/platform/:id/[center/:lon,:lat/zoom/:nearZoom]",transportRoute:"/:city/[lang/:locale/]/route/:id/zoom/:farZoom",booklet:"/[lang/:locale/]:bookletName",bookletPage:"/:city/[lang/:locale/]/booklet/:bookletName/page/:subpageName/zoom/:farZoom",bookletProvidersAggregator:"/:city/[lang/:locale/]/booklet/providers/[geoid/:id]/zoom/:farZoom",rubricsNear:"/:city/[lang/:locale/]/booklet/:bookletName/rubricsNear/:rubrics/:lon,:lat/center/:lon,:lat/zoom/15",search:"/:city/[lang/:locale/]/[floors/:complexId]/search/:query/[firms/:filters]/[page/:page]/[tab/:tab]/zoom/:farZoom",servicing:"/:city/[lang/:locale/]/geo/:id/service/:id/center/:lon,:lat/zoom/:nearZoom",discounts:"/:city/[lang/:locale/]/discounts/:branchId/zoom/:farZoom",discountsForRubrics:"/:city/[lang/:locale/]/discounts/:branchId/rubricIds/:rubrics/zoom/:farZoom",extraLayers:"/:city/[lang/:locale/]/extraLayersCard/:layerId,:featureId/center/:lon,:lat/zoom/:nearZoom",products:"/:city/[lang/:locale/]/products/:productType/[zoom/:nearZoom]",productCard:"/:city/[lang/:locale/]/products/:productType/:id/[zoom/:nearZoom]",global:"/[lang/:locale/]global",floors:"/:city/[lang/:locale/]/floors/:complexId/[flTab/:floorsDashboardTab]",firmInFloors:"/:city/[lang/:locale/]/floors/:complexId/firm/:firmId",floorsFirmList:"/:city/[lang/:locale/]/floors/:complexId/flFirmList/[page/:page]",floorList:"/:city/[lang/:locale/]/floorList/[page/:page]",event:"/:city/[lang/:locale/]/eventday",ask:"/:city/[lang/:locale/]/ask/[:rubricShortId]",weather:"/:city/[lang/:locale/]/weather",firmWithGifts:"/:city/[lang/:locale/]/presents2015/firm/:id/[mediaTab/:tab]/[center/:lon,:lat/zoom/:nearZoom]",favorites:"/:city/[lang/:locale/]/favorites/:collectionId"},n.validatorsMap={id:r.idEnum,rubricId:r.number,buildingId:r.number,orgId:r.number,query:r.any,modifier:r.floorsModifier,text:r.any,city:r.any,floorsDashboardTab:r.any,firmId:r.id,house:r.number,zoom:r.number,zoomlevel:r.number,bookletId:r.any,subpageName:r.any,discountId:r.number,albumId:r.any,section:r.any,platformId:r.number,lon:r.coords,lat:r.coords,xPos:r.floatNumber,yPos:r.floatNumber,rotation:r.floatNumber,floorZoom:r.floatNumber,floorNum:r.number,photoId:r.any,albumName:r.any,rubric:r.any,locale:r.locale,profiles:r.idEnum,activeTab:r.activeTab,requests:r.any,filialId:r.id,filialName:r.any,filialAddress:r.any,placeTitle:r.any,routeNumber:r.any,email:r.any,authType:r.authType,errorType:r.errorType,authConfirmCode:r.any,routeType:r.any,points:r.points,rsType:r.rsType,filters:r.filters,degrees:r.any,rubrics:r.anyEnum,branches:r.anyEnum,page:r.number,eventday:r.eventday,switcher:r.switcher,entrance:r.entrance,photosType:r.photosType,layerIds:r.layerIds,ask:r.ask,date:r.date,rubricShortId:r.rubricShortId},n.slugMapping={center:"mapcenter",search:"find",service:"servicing",inside:"inbuild",branches:"filials",countries:"global/citySelect",cities:"citySelect"},n.priorityList=["global","cities","countries","city","whatsNew","lang","floors","query","panels","gallery","photos","flCenter","flRotation","flNum","flZoom","mapcenter","angle","tab","flTab","zoom","routeTab","rsType","from","to","waypoints","traffic","ruler","geolocation","plusOne","bindPhone","ppnotTime","share","auth","extraLayers","social","promoAccount","mediaMode","holidaysDate"],n.queryParamsList=["zoom","mapcenter","ruler","traffic","auth","routeTab","flCenter","flRotation","flNum","flZoom"],n.queryParamName="queryState",n.queryString={printmode:r.acceptOnly(["on"]),random:r.any,utm_term:r.any,utm_source:r.any,utm_medium:r.any,utm_content:r.any,utm_campaign:r.any},n.queryString[n.queryParamName]=r.any},{"./validators":56}],41:[function(e,t,n){var a=e("lodash"),i=e("async"),o=req("lib/hashmultivalue"),r=["filters/filters","cityAlias/cityAlias","booklet/luxuryUrl","photos/photos","oldLinks/callout","grym/prepareState","sync/syncRegion"];t.exports=function(e){var t={},n=new o;return t.setup=function(){a.each(r,function(e){var t=req("components/appState/handlers/"+e);a.each(t,function(e,t){"function"==typeof e&&n.add(t,e)})})},t.run=function(t,a,o){var r=[];n.each(t,function(t){var n=function(n){t(e,a,function(e){void 0!==e&&(a=e),n()}),t.length<=2&&n()};r.push(n)}),i.series(r,o)},t}},{async:383,lodash:"lodash"}],42:[function(e,t,n){var a=e("lodash"),i=req("lib/geo/lonlat");n=t.exports=e("slot/components/appState/uri/serializer"),n.filters={stringify:function(e){var t=["work_time","work_time_mode","work_hour","work_day"],n=a.map(e,function(e,n){return a.contains(t,n)?"":e+""=="true"?n:n+"="+e}),i=req("helpers/filters"),o=i.combineWorkTime(e);return o&&n.push("work_time="+o),a.compact(n).join(";")},parse:function(e){e=e.split(";");var t={};return a.each(e,function(e){var n=e.split("="),i=n.length>1?n[1]:"true",o=n[0];if("work_time"!=o)t[o]=i;else{var r=req("helpers/filters"),s=r.splitWorkTime(i);a.each(s,function(e,n){t[n]=e})}}),t}},n.lonlatPoints={stringify:function(e){return a.map(e,function(e){return i(e).toFixed().join(" ")}).join(",")},parse:function(t){var n=e("./validators"),i=t.split(",");return a.compact(a.map(i,function(e){var t=e.split(" ");return n.coords(t[0])&&n.coords(t[1])?{lon:t[0],lat:t[1]}:null}))}}},{"./validators":56,lodash:"lodash","slot/components/appState/uri/serializer":485}],43:[function(e,t,n){function a(e){this.app=e,r.call(this),this.state._implicitChanges={},this.state._implicitChangesLocked=!1,this.panels=new u(this),this.extraLayers=new h(this),this.dataViewer=new c(this),this.queryString=new d(this),this.floors=new p(this)}var i=e("lodash"),o=e("inherits"),r=e("slot/components/appState/api"),s=req("helpers/panels"),l=req("lib/geo/lonlat"),c=e("./dataViewer"),u=e("./panels"),d=e("./query"),h=e("./extraLayers"),p=e("./floors");o(a,r),a.prototype.assign=function(e,t){var n=i.defaults(e||{},{_implicitChanges:{},_implicitChangesLocked:!1});r.prototype.assign.call(this,n),this.panels.setState(this.state),this.extraLayers.setState(this.state),this.floors.setState(this.state),t&&this.applyFinalizer()},a.prototype.del=function(e){r.prototype.del.call(this,e),this.state._implicitChangesLocked||delete this.state._implicitChanges[e]},a.prototype.set=function(e,t){r.prototype.set.call(this,e,t),this.state._implicitChangesLocked||delete this.state._implicitChanges[e]},a.prototype.implicitSet=function(e,t){this.state._implicitChanges[e]=this.state[e],this.state._implicitChangesLocked=!0,this.toggle(e,t),this.state._implicitChangesLocked=!1},a.prototype.implicitRestore=function(e){var t=this.state._implicitChanges[e];void 0===t?delete this.state[e]:this.state[e]=this.state._implicitChanges[e],delete this.state._implicitChanges[e]},a.prototype.setFinalizer=function(e){this.finalizer=e},a.prototype.applyFinalizer=function(e){return this.finalizer&&this.finalizer(this,e),this},a.prototype.defaults=function(e){var t=this.state,n=t.panels;delete t.panels;var a=t.extraLayers;delete t.extraLayers;var o=t.floors;return delete t.floors,i.defaults(t,e),this.panels.assign((t.panels||[]).concat(n||[])),this.extraLayers.assign(i.extend({},t.extraLayers,a)),this.floors.assign(i.extend({},t.floors,o)),t},a.prototype.setRegion=function(e,t){this.state.city={id:e,passive:!!t}},a.prototype.getRegionId=function(){return this.state.city&&this.state.city.id},a.prototype.setLang=function(e){e?this.state.lang={locale:e}:delete this.state.lang},a.prototype.getLang=function(){return i.get(this,"state.lang.locale")},a.prototype.search=function(e){var t=this.panels.get("find").searchId;this.panels.clear(),this.del("query"),i.isString(e)&&(e={query:e});var n=null;if(e.query)n={query:e.query};else if(e.rubric&&e.rubric.filters)n={query:e.rubric.name,filters:e.rubric.filters};else if(e.rubric&&e.rubric.id)n={query:e.rubric.text,rubricId:e.rubric.id};else{if(!e.suggest||!e.suggest.context)throw Error("api.search - needed at least query or rubric");n={suggest:e.suggest.context,query:e.text}}e.text&&e.query!=e.text&&(n.text=e.text),e.filters&&i.size(e.filters)&&(n.filters=e.filters),e.media&&(n.media=!0),n.bss={},i.isUndefined(e.ortx)||(n.bss.ortx=e.ortx),n.searchId=void 0!==t&&null!==t?t+1:0,this.floors.isActive()&&(n.floors=!0),this.panels.add("find",n),this.dataViewer.maximize()},a.prototype.getQuery=function(){if(this.floors.isInitialFloorState())return"";var e=this.panels.findFromLast(function(e){return"find"==e.type});return e?e.text||e.query:this.state.query?this.state.query.query:""},a.prototype.applyFilters=function(e){var t=this.panels.findFromLast(function(e){return s.isListType(e.type)});t&&(e&&i.keys(e).length?t.filters=e:delete t.filters)},a.prototype.changePhoto=function(e){this.state.photos.photoId=e},a.prototype.leavePhotoSlider=function(){delete this.state.photos},a.prototype.changePage=function(e){var t=this.panels.findFromLast(function(e){return s.isListType(e.type)});t&&(e>1?t.page=e:delete t.page)},a.prototype.changeBookletPage=function(e){this.panels.findLast("booklet",{}).subpageName=e},a.prototype.removePresentId=function(){var e=this.panels.find("presents2015");e&&delete e.presentId},a.prototype.setPresentId=function(e){var t=this.panels.find("presents2015");t&&(t.presentId=e)},a.prototype.showGiftPopup=function(e){this.set("giftPopup",e)},a.prototype.removeGiftPopup=function(){this.del("giftPopup")},a.prototype.showAwardPopup=function(e){var t;t=e.justSharing?"justSharing":e.isAuthorized?"voted":"login",this.set("awardPopup",{type:t,name:e.name,"final":e["final"]})},a.prototype.removeAwardPopup=function(){this.del("awardPopup")},a.prototype.getShareState=function(){var e=this.state,t=this.panels,n=i.cloneDeep(e),a=i.first(e.panels),o=t.drawInMap(),r=i.takeRight(e.panels,2),l=i.compact([a].concat(o).concat(r)),c={};return n.panels=i.filter(l,function(e){var t=e.panelId in c;return c[e.panelId]=!0,!t}),n.panels.sort(function(e,t){return e.panelId<t.panelId?-1:1}),n.panels=s.getUniqueType(n.panels),n.luxuryUrl&&(delete n.city,delete n.mapcenter,delete n.zoom),delete n.p2d,delete n.share,n},a.prototype.changeCenter=function(e){this.state.mapcenter=l(e).toFixed().toPlainObject()},a.prototype.getCenter=function(){return this.state.mapcenter},a.prototype.getPositionInfo=function(){var e=i.clone(this.state.mapcenter||{});return e.lon=e.lon||0,e.lat=e.lat||0,e.zoom=this.state.zoom&&this.state.zoom.zoomlevel,e.angle=this.getAngle(),e},a.prototype.setAngle=function(e){e?this.state.angle={degrees:e}:this.del("angle")},a.prototype.getAngle=function(){return this.state.angle&&this.state.angle.degrees||0},a.prototype.changeZoom=function(e){this.state.zoom={zoomlevel:e}},a.prototype.getZoom=function(){return this.state.zoom||{}},a.prototype.showPlusOne=function(e,t,n){this.state.plusOne={typeProvider:e,id:t,value:n.value,url:n.url,reg_bc_url:n.reg_bc_url}},a.prototype.closePlusOne=function(){this.del("plusOne")},a.prototype.showFeedback=function(e){this.set("feedback",e)},a.prototype.closeFeedback=function(){this.del("feedback")},a.prototype.showAuth=function(e){this.set("auth",e)},a.prototype.closeAuth=function(){this.del("auth")},a.prototype.showPromoAccount=function(e){this.set("promoAccount",e)},a.prototype.closePromoAccount=function(){this.del("promoAccount")},a.prototype.showShare=function(){this.set("share",!0)},a.prototype.closeShare=function(){this.del("share")},a.prototype.showExtrasMenu=function(e){this.set("extras/menu",{type:e})},a.prototype.closeExtrasMenu=function(){this.del("extras/menu")},a.prototype.removeSocial=function(){this.del("social")},a.prototype.toggleDashboard=function(e){
this.set("dashboard",e)},a.prototype.showDiscount=function(e){this.panels.get("discounts").discountId=e},a.prototype.hideDiscount=function(){delete this.panels.get("discounts").discountId},a.prototype.setActiveTab=function(e){e?(this.panels.removeFrom(1),this.state.tab={activeTab:e}):this.del("tab")},a.prototype.getActiveTab=function(){return(this.state.tab||{}).activeTab},a.prototype.setRouteTab=function(e){e?this.state.routeTab=!0:(delete this.state.routeTab,this.panels.get("find").media&&this.dataViewer.maximize())},a.prototype.setGeolocationState=function(e){this.toggle("geolocation",!!e)},a.prototype.setFromTo=function(e,t){if(!t||!t.text)return void this.del(e);this.state[e]={},t.lon&&t.lat&&(this.state[e]=l(t).toFixed()),this.state[e].text=t.text;var n=req("helpers/firm");this.state[e].id=n.getStaticId(t.id)},a.prototype.setRouteSearchType=function(e){this.state.rsType={rsType:e}},a.prototype.getRouteSearchType=function(){return this.state.rsType&&this.state.rsType.rsType},a.prototype.getFromText=function(){return this.get("from")?this.get("from").text:""},a.prototype.getToText=function(){return this.get("to")?this.get("to").text:""},a.prototype.resetSearchBar=function(){this.del("from"),this.del("to"),this.del("routeTab"),this.del("rsType"),this.del("query")},a.prototype.ruler=function(e){this.toggle("ruler",e?{}:null)},a.prototype.setRulerPoints=function(e){var t=this.state.ruler;t&&e&&(t.points=e)},a.prototype.setTraffic=function(e){this.toggle("traffic",!!e)},a.prototype.setWaypoints=function(e){if(!e||!e.length)return void this.del("waypoints");var t=this.state;t.waypoints||(t.waypoints={}),t.waypoints.points=e},a.prototype.enterGlobal=function(e,t,n){this.state.global=!0,e&&(this.state["global/citySelect"]=!0),t&&this.changeZoom(t),n&&this.changeCenter(n)},a.prototype.exitGlobal=function(){delete this.state.global,delete this.state["global/citySelect"]},a.prototype.inGlobal=function(){return!!this.state.global},a.prototype.getWaypoints=function(){return this.state.waypoints&&this.state.waypoints.points},a.prototype.toggleMediaResults=function(e){e?(delete this.state.routeTab,this.panels.get("find").media=!0,this.panels.remove("filters")):delete this.panels.get("find").media},a.prototype.toggleMediaCard=function(e){var t=this.panels.get("firm");t.media=e,e&&(t.booked=!1)},a.prototype.shouldBeMediaMode=function(){var e=i.last(this.state.panels),t=i.get(e,"media"),n=this.panels.get("find").media||this.panels.get("servicing").media;return!(!t||!n||this.state.routeTab||this.floors.isActive())},a.prototype.shouldBeProductsMode=function(){var e=i.last(this.state.panels);return e&&"products"===e.type&&!this.state.routeTab},a.prototype.closeMediaCard=function(){this.panels.get("firm").media&&this.panels.remove("firm")},a.prototype.getMediaCardTab=function(){var e=this.panels.get("firm");return e&&e.tab},a.prototype.changeMediaCardTab=function(e){var t=this.panels.findLast("firm");t&&(t.tab=e,delete t.tariffId)},a.prototype.showProviderRequestForm=function(e){var t=this.panels.get("firm");t.tab="tariffs",t.tariffId=e},a.prototype.switchToMediaResultsByType=function(e){this.panels.removeAllAfter("find");var t=this.panels.get("find");if(!i.isEmpty(t)){var n={bss:t.bss,media:!0,query:t.query,searchId:t.searchId};"all"===e&&t.filters&&"new"!==t.mode&&(n.filters=t.filters),"new"===e&&(n.mode="new"),this.panels.replace(t.panelId,n)}},a.prototype.switchToNewFirms=function(){this.switchToMediaResultsByType("new")},a.prototype.switchToAllResults=function(){this.switchToMediaResultsByType("all")},a.prototype.showProductCard=function(e){this.panels.get("products").id=e},a.prototype.closeProductCard=function(){var e=this.panels.get("products"),t=i.omit(e,"id");this.panels.replace(e.panelId,t)},a.prototype.setProductsFilters=function(e){var t=this.panels.get("products");t.filters=e},t.exports=a},{"./dataViewer":45,"./extraLayers":47,"./floors":50,"./panels":53,"./query":54,inherits:447,lodash:"lodash","slot/components/appState/api":478}],44:[function(e,t,n){function a(e,t,n,a){return e&&t?("panels"==n&&(e=s.omit(e,"panelId"),t=s.omit(t,"panelId")),d(e,t)?"eq":e.type!=t.type?"neq":"find"==e.type&&e.searchId!=t.searchId?"neq":"find"!=e.type&&"firm"!=e.type||e.floors==t.floors?"panels"==n&&l.matchPrimaryKeys(e,t)?"changed":"panels"!=n||a?"neq":"replaced":"neq"):"neq"}function i(e,t){return t=t||s.identity,e.get=function(n){return t(s.find(e,function(e){return t(e).type==n}))},e.has=function(){return!!e.findByType.apply(this,arguments)},e.findByType=function(n){var a;s.isFunction(n)?a=n:(n=s.isArray(n)?n:[].slice.call(arguments),a=function(e){return s.contains(n,e)});var i=null;return s.every(e,function(e){return a(t(e).type)?(i=t(e),!1):!0}),i},e}function o(e,t,n,o){for(var r={},s=e.length,l=t.length,c=Math.max(s,l),d=[],h=[],p=[],f=[],m=0;c>m;m++){var g=e[m],_=t[m],v=a(g,_,n,o);if("neq"==v)l>m&&d.push(_),s>m&&h.push(g);else if("changed"==v){var y=u.dicts(g,_);y.type=_.type,f.push({diff:y,index:m})}else"replaced"==v&&p.push({panelId:g.panelId,index:m,value:_})}return d.length&&(r.added=i(d)),h.length&&(r.removed=i(h)),f.length&&(r.changed=i(f)),p.length&&(r.replaced=i(p,function(e){return e.value})),r.isEqual=!(d.length||h.length||f.length||p.length),r.value=t,r}function r(e,t){var n=function(e,t,n){return s.isArray(e)&&s.isArray(t)?o(t,e,n).isEqual:d(e,t)},a=u.dicts(e,t,n);return s.each(a,function(t,n,a){if(s.isArray(t)){var i=e[n]||[];a[n]=o(i,t,n),"panels"==n&&(a.mapPanels=c.cmpPanels(i,t,o))}}),a}var s=e("lodash"),l=e("../stateConf"),c=e("./map"),u=e("slot/lib/cmp"),d=e("deep-equal");n.arrays=o,n.dicts=u.dicts,n.states=r,n.isEqual=function(e,t){return!s.size(r(e,t))}},{"../stateConf":55,"./map":51,"deep-equal":428,lodash:"lodash","slot/lib/cmp":488}],45:[function(e,t,n){function a(e){this.api=e}a.prototype.minimize=function(){this.api.set("dataViewer/minimized",!0)},a.prototype.maximize=function(){this.api.del("dataViewer/minimized")},a.prototype.setSize=function(e){this.size=e},a.prototype.getSize=function(){return this.size||"defaultWidth"},t.exports=a},{}],46:[function(e,t,n){function a(e){this.api=e,this.list=[]}function i(e,t){e.push(t)}function o(e,t){var n=s.lastIndexOf(e,t);return-1!==n&&e.splice(n,1),n}function r(e,t){for(var n=0;-1!==o(e,t);)n++;return n}var s=e("lodash"),l=req("helpers/panels");a.prototype.modifyEscList=function(e){var t=["whatsNew","awardPopup","giftPopup","panels","share","download","feedback","p2d","updateApp","photos","gallery","extras/menu","ruler","auth","video","citySelect","plusOne","dataViewer/minimized","floorsDashboard"];s.each(s.intersection(t,s.keys(e)),function(t){switch(t){case"panels":e.panels.removed&&s.times(e.panels.removed.length,function(){o(this.list,"panel"),this.panels_removed--,this.panels_removed<0&&(this.panels_removed=0)},this),e.panels.added&&s.times(e.panels.added.length,function(){i(this.list,"panel")},this),e.panels.replaced&&(s.times(e.panels.replaced.length,function(){o(this.list,"panel")},this),s.times(e.panels.replaced.length,function(){i(this.list,"panel")},this));break;case"dataViewer/minimized":e[t]===!0?this.panels_removed=r(this.list,"panel"):(s.times(this.panels_removed,function(){i(this.list,"panel")},this),delete this.panels_removed);break;default:o(this.list,t),e[t]&&i(this.list,t)}},this)},a.prototype.reactOnEsc=function(){var e=s.last(this.list);if(e)switch(e){case"panel":var t=this.api.panels.last();if("products"===t.type&&t.id)return void delete t.id;l.isListType(t.type)||"routeSearch"===t.type?this.api.dataViewer.minimize():this.api.panels.removeLast();break;case"floorsDashboard":if(!this.api.floors.isActive())break;this.api.set("floorsDashboard/minimized",!0),this.api.push();break;default:this.api.del(e)}},t.exports=a},{lodash:"lodash"}],47:[function(e,t,n){function a(e){this.api=e,this.setState(e.state)}var i=e("lodash");a.prototype.setState=function(e){this.state=e,this.assign(e.extraLayers)},a.prototype.assign=function(e){this.state.extraLayers=e||{}},a.prototype._set=function(e){var t={};i.each(e,function(e,n){e&&(t[n]=e)}),i.isEmpty(e)?delete this.state.extraLayers:(this.state.extraLayers=this.state.extraLayers||{},this.state.extraLayers.layerIds=e)},a.prototype.get=function(){return(this.state.extraLayers||{}).layerIds||{}},a.prototype.del=function(){this._set()},a.prototype.hasSublayer=function(e,t){var n=this.get();return i.contains(n[e],t)},a.prototype.hasLayer=function(e){var t=this.get();return!!t[e]},a.prototype.addSublayer=function(e,t){var n=this.get();i.isArray(t)||(t=[t]),n[e]=i.union(n[e],t),this._set(n)},a.prototype._removeSublayer=function(e,t){var n=this.get();n[e]=i.without(n[e],t),i.isEmpty(n[e])&&delete n[e],this._set(n)},a.prototype.toggleSublayer=function(e,t){this.hasSublayer(e,t)?this._removeSublayer(e,t):this.addSublayer(e,t)},a.prototype.toggleLayer=function(e,t){this.hasLayer(e)?this.removeLayer(e):this.addLayer(e,t)},a.prototype.addLayer=function(e,t){var n=this.get();n[e]=i.isArray(t)?t:[],this._set(n)},a.prototype.removeLayer=function(e){var t=this.get();delete t[e],this._set(t)},a.prototype.mergeLayer=function(e,t){this.addLayer(e),i.each(t,i.bind(function(t){this.addSublayer(e,t)},this))},t.exports=a},{lodash:"lodash"}],48:[function(e,t,n){var a=e("lodash"),i=e("../cmp");t.exports=function(t){function n(e,n){var r=!1;if(void 0===n||null===n){n=i.states({},e.getState());var s=a.findIndex(a.get(n,"panels.added"),{type:"firm"});if(s>-1){var l=n.panels.added[s].id,c=t.cookie("2gis_bss_"+l);c&&(c=c.split("|"),n.panels.added[s].id=l+"_"+c[0],n.panels.added[s].analyticsPlace=+c[1],t.registry.set("bssFromOtherTab",!0))}r=!0}a.each(n,function(t,n){delete e.state._implicitChanges[n]}),o(e,n,r)}var o=e("./places")(t);return n}},{"../cmp":44,"./places":49,lodash:"lodash"}],49:[function(e,t,n){var a=e("lodash");t.exports=function(e){function t(t){return t.city&&t.city.id==e.config.universeId}function n(e){return e.panels&&e.panels.length}function i(e){return n(e)&&!e["dataViewer/minimized"]&&"initial"!=a.get(e.floors,"modifier")||e.citySelect||e["global/citySelect"]||"visible"==e.floorsDashboard&&!e["floorsDashboard/minimized"]}function o(e){return a.has(e,"floors.complexId")}function r(e,t,n){function i(e,n){return!(e in t)&&o[e]!=n}var o=e.getState();s.forEach(function(t){var a=l[t],i=a.stateKey||t;if(!n||!a["default"]||i in o||e.set(i,a["default"]),n&&a.init){var r=a.init(o);void 0!==r&&r!=a["default"]&&e.implicitSet(i,r)}}),s.forEach(function(n){var r=l[n],s=r.stateKey||n,c=r.needChange?r.needChange(o):!0,u=a.isFunction(r.changeTo)?r.changeTo(o):r.changeTo;c&&(r.important||i(s,u))&&(r.explicit?e.toggle(s,u):e.implicitSet(s,u)),!(s in e.state._implicitChanges)||c||s in t||e.implicitRestore(s)})}var s=["routeTab","dashboard"],l={dashboard:{"default":"visible",changeTo:"hidden",init:function(e){return e.citySelect?"visible":this.needChange(e)?"hidden":"visible"},needChange:function(t){var a=!!t.auth||!!t.p2d||!!t.bindPhone||n(t)||!!t.routeTab||o(t)||t.isFloorsWarning,i=e.ua().isMobile&&!!t.whatsNew;return a||i}},floorsDashboard:{"default":"hidden",changeTo:"visible",needChange:function(e){return a.has(e,"floors.complexId")&&!e["floorsDashboard/closed"]&&(!n(e)||"initial"==a.get(e.floors,"modifier"))}},ginzaMarkers:{"default":"visible",changeTo:"hidden",needChange:function(t){return n(t)||e.ua().isPhone}},citySelect:{explicit:!0,changeTo:null,needChange:function(e){return"hidden"==e.dashboard}},citySelectUniverse:{important:!0,stateKey:"citySelect",changeTo:!0,needChange:function(e){return t(e)}},searchBar:{stateKey:"searchBar/cityFilter",changeTo:!0,needChange:function(n){return e.isGrym&&n.citySelect||t(n)}},routeTab:{changeTo:null,needChange:function(e){return o(e)}},query:{changeTo:null,needChange:function(e){return o(e)}},controlsGroup:{stateKey:"controlsGroup/hidden",changeTo:!0,needChange:function(e){return t(e)}},dashboardTime:{stateKey:"dashboardAtUniverse/hidden",changeTo:!0,needChange:function(e){return t(e)}},panels:{stateKey:"dataViewer/minimized",changeTo:!0,init:function(e){return!!e.citySelect},needChange:function(e){return e.panels&&e.panels.length&&"visible"==e.dashboard}},tools:{important:!0,explicit:!0,init:function(e){return this.changeTo(e)},changeTo:function(e){return i(e)?"vertical":"horizontal"}}};return s=a.union(s,Object.keys(l)),r}},{lodash:"lodash"}],50:[function(e,t,n){function a(e){this.api=e,this.setState(e.state)}var i=e("lodash");a.prototype.setState=function(e){this.state=e,this.assign(e.floors)},a.prototype.assign=function(e){this.state.floors=e||{}},a.prototype.isActive=function(){return i.has(this.state,"floors.complexId")},a.prototype.getComplexId=function(){return i.get(this.state,"floors.complexId")},a.prototype.isLoaded=function(){return this.isActive()?1==i.get(this.state.floors,"loaded"):!1},a.prototype.setIsLoaded=function(e){i.get(this.state,"floors")&&(this.state.floors.loaded=e)},a.prototype.removeInitialFloorModifier=function(){this.isInitialFloorState()&&this.api.panels.clear(),delete this.state.floors.modifier},a.prototype.isInitialFloorState=function(){return"initial"===i.get(this.state.floors,"modifier")},a.prototype.enter=function(e,t){t=t||{},this.state.floors={bssHash:t.bssHash,complexId:e,initialBranchId:t.initialBranchId,isOpenedFromPoi:t.isOpenedFromPoi,modifier:"initial"}},a.prototype.exit=function(){if(this.isActive()){var e=i.pick(this.state,["floors","flCenter","flZoom","flNum","floorsDashboard/closed","floorsDashboard/minimized"]);e.panels=i.cloneDeep(this.state.panels),this.isInitialFloorState()||this.api.panels.clear(),delete this.state.floors,delete this.state.flTab,delete this.state.flCenter,delete this.state.flRotation,delete this.state.flZoom,delete this.state.flNum,delete this.state["floorsDashboard/closed"],delete this.state["floorsDashboard/minimized"],this.state.floors={saved:e}}},a.prototype.restore=function(){var e=this.state.floors.saved;Object.assign(this.state,i.pick(e,["floors","flCenter","flZoom","flNum","floorsDashboard/closed","floorsDashboard/minimized"])),this.api.panels.assign(e.panels)},a.prototype.switchToFloorsResults=function(){var e=["find","firm","profiles","flFirmList"];i.forEach(this.state.panels,function(t){i.includes(e,t.type)&&(t.floors=!0)})},a.prototype.setCenter=function(e){this.state.flCenter||(this.state.flCenter={}),this.state.flCenter.xPos=i.round(e.xPos,3),this.state.flCenter.yPos=i.round(e.yPos,3)},a.prototype.getCenter=function(){var e;return i.isObject(this.state.flCenter)&&(e={xPos:this.state.flCenter.xPos,yPos:this.state.flCenter.yPos}),e},a.prototype.setRotation=function(e){this.state.flRotation={rotation:i.round(e,3)}},a.prototype.getRotation=function(){return i.get(this.state.flRotation,"rotation")},a.prototype.setZoom=function(e){this.state.flZoom={floorZoom:i.round(e,3)}},a.prototype.getZoom=function(){return i.get(this.state.flZoom,"floorZoom")},a.prototype.setFloorNum=function(e){this.state.flNum={id:+e}},a.prototype.getFloorNum=function(){return i.get(this.state.flNum,"id")},a.prototype.changeDashboardTab=function(e){this.state.flTab={floorsDashboardTab:e}},a.prototype.getDashboardTab=function(){return i.get(this.state.flTab,"floorsDashboardTab")},t.exports=a},{lodash:"lodash"}],51:[function(e,t,n){function a(e){for(var t=[],n=e.length,a=1/0;e[--n];){var i=e[n],r=o.getPanelLevel(i.type);if(a>r&&(a=r,t.unshift(i)),1==r)break}return t}function i(e,t,n){var i=a(e),o=a(t);return n(i,o,"panels","map")}var o=req("helpers/panels");n.getActiveContext=a,n.cmpPanels=i},{}],52:[function(e,t,n){function a(e,t){if("servicing"==t.type&&"internet"==t.group){var n=e.requireComponent("featureSwitcher"),a=e.requireComponent("regionManager");a.onInit(function(){n.get("mediaResults")&&n.get("mediaCard.providers")&&(t.media=!0)})}}function i(e,t,n){this.type=t,o.assign(this,n),this.bss=this.bss||{},a(e,this)}var o=e("lodash");t.exports=i},{lodash:"lodash"}],53:[function(e,t,n){"use strict";function a(e){this.api=e,this.setState(e.state),this.panelId=0}function i(e,t){return e.type!=t.type?!1:l.matchPrimaryKeys(e,t)}var o=e("lodash"),r=req("helpers/panels"),s=e("./map"),l=e("./../stateConf"),c=e("./panel");a.prototype.setState=function(e){this.state=e,this.assign(e.panels)},a.prototype.assignPanelId=function(){var e=o.pluck(this.panels,"panelId"),t=o.max(e);this.panelId=o.isFinite(t)?t+1:0},a.prototype.assign=function(e){this.panels=this.state.panels=[],o.each(e,function(e){this.add(e)},this),this.assignPanelId()},a.prototype.onPanelRemoved=function(e){if(e&&"find"==e.type){var t=this.find("find");e.house&&t.panelId!=e.panelId||this.api.setActiveTab()}},a.prototype.nextPanelId=function(){return this.panelId++},a.prototype.add=function(e,t){!t&&o.isObject(e)&&(t=e,e=t.type);var n=new c(this.api.app,e,t);o.isNumber(n.panelId)||(n.panelId=this.nextPanelId()),this.panels.push(n)},a.prototype.removeBy=function(e,t){this.assign(o.reject(this.panels,function(n){return n[e]==t}))},a.prototype.remove=function(e){this.removeBy("type",e)},a.prototype.removeLast=function(){this.onPanelRemoved(o.last(this.panels)),this.assign(o.initial(this.panels)),0==this.panels.length&&delete this.state.query},a.prototype.removeAllButFirst=function(){this.panels.length>1&&this.assign([o.first(this.panels)])},a.prototype.findByType=function(e,t){return e(this.panels,function(e){return e.type==t})},a.prototype.find=function(e,t){return this.findByType(o.find,e)||t},a.prototype.findLast=function(e,t){return this.findByType(o.findLast,e)||t},a.prototype.has=function(e){return this.findByType(o.any,e)},a.prototype.get=function(e){return this.find(e)||{}},a.prototype.clear=function(){o.each(this.panels,this.onPanelRemoved,this),this.api.dataViewer.maximize(),this.assign([])},a.prototype.last=function(){return o.last(this.panels)},a.prototype.removeFrom=function(e){this.panels.splice(e)},a.prototype.removeAllAfter=function(e){var t=this.findByType(o.findIndex,e);t>-1&&this.panels.splice(t+1)},a.prototype.replace=function(e,t){o.find(this.panels,function(n,a){return n.panelId==e?(this.panels[a]=new c(this.api.app,n.type,o.assign({},t,{panelId:e})),!0):!1},this)},a.prototype.findLastStoppingMap=function(){return this.findFromLast(function(e){return r.isStopTypeForMap(e.type)})},a.prototype.findFromLast=function(e){return o.findLast(this.panels,e)},a.prototype.alreadyOpen=function(e,t){var n=this.last();return!(!n||!i(n,new c(this.api.app,e,t))||n.filters)},a.prototype.show=function(e,t,n){var a=this.api,i=this.last();return n=n&&n.toLowerCase(),this.alreadyOpen(e,t)?!1:((r.isStopTypeForDataViewer(t)||this.get("find").notFound||"suggest"==n)&&this.clear(),i&&o.contains(["filters",e],i.type)&&this.removeLast(),"filters"==e&&i&&!r.isListType(i.type)&&this.removeLast(),a.dataViewer.maximize(),this.add(e,t),!0)},a.prototype.drawInMap=function(){return s.getActiveContext(this.panels)},t.exports=a},{"./../stateConf":55,"./map":51,"./panel":52,lodash:"lodash"}],54:[function(e,t,n){function a(e){this.api=e,this._config=i.conf.queryString,this._storage={}}var i=e("./../stateConf"),o=e("lodash"),r=e("url");a.prototype.assign=function(e){e=this._parse(e),this._storage={},o.each(e,function(e,t){this._set(t,e)},this)},a.prototype._parse=function(e){return"string"==typeof e&&(e=(r.parse(e,!0)||{}).query),e},a.prototype.update=function(e){e=this._parse(e),this._del(i.get("queryParamName")),o.each(e,function(e,t){this._set(t,e)},this)},a.prototype.validate=function(e,t){return o.isFunction(this._config[e])?this._config[e](t):!1},a.prototype._set=function(e,t){this.validate(e,t)&&(this._storage[e]=t)},a.prototype._del=function(e){this._storage[e]&&delete this._storage[e]},a.prototype.has=function(e){return!!this._storage[e]},a.prototype.get=function(e){return this._storage[e]},a.prototype.getAll=function(){return o.clone(this._storage)},t.exports=a},{"./../stateConf":55,lodash:"lodash",url:419}],55:[function(e,t,n){function a(e){r.call(this,e)}var i=e("lodash"),o=e("inherits"),r=e("slot/components/appState/stateConf"),s=e("deep-equal");o(a,r),a.prototype.getSecondaryKeys=function(e){var t=this.lookupSlug(e),n=i.map(this.conf.panelsSecondaryParams,function(e){var n=e.split("/");return 1==n.length?e:2==n.length&&t&&n[0]==t?n[1]:null});return i.compact(n)},a.prototype.getPrimaryKeys=function(e,t){var n=[],a=this.conf.stateRelations,o=this.resolvePattern(e,t);return o&&(n=n.concat(o.params)),a&&e in a&&(n=n.concat(i.keys(a[e]))),i.difference(n,this.getSecondaryKeys(e))},a.prototype.matchPrimaryKeys=function(e,t,n){function a(e,t){var n=e[t];return t in o&&o[t].toCmp?o[t].toCmp(n):n}var o=this.conf.validatorsMap,r=this.getPrimaryKeys(e.type,e),l=this.getPrimaryKeys(t.type,t),c=i.union(r,l);return c.length?i.every(c,function(n){var i=a(e,n),o=a(t,n);return s(i,o)}):void 0===n||null===n?!0:n};var l=e("./conf");t.exports=new a(l)},{"./conf":40,"deep-equal":428,inherits:447,lodash:"lodash","slot/components/appState/stateConf":480}],56:[function(e,t,n){function a(e){var t=req("helpers/firm");return t.getStaticId(e)}function i(e,t){return l[e]&&void 0!==t&&null!==t?l[e].test(t):!1}function o(e){return e=r.isArray(e)?e:e+"",e="string"==typeof e?e.split(","):e,r.map(e,n.id.toUrl).join(",")}var r=e("lodash"),s=e("./serializer"),l={number:/^\d+$/,floatNumber:/^[+-]?\d*\.?\d+$/,any:/.+/,coords:/^-?1?\d{1,2}(\.\d+)?$/,idEnum:/^[\d,]+$/};n.number=r.partial(i,"number"),n.floatNumber=r.partial(i,"floatNumber"),n.coords=r.partial(i,"coords"),n.entrance=function(e){return"entrance"==e},n.any=r.partial(i,"any"),n.any.fromUrl=function(e){var t=req("helpers/string");return t.cutTags(e)},n.coords.toUrl=function(e){return+parseFloat(e).toFixed(6)+""},n.filters=r.partial(i,"any"),n.filters.toUrl=function(){return s.filters.stringify.apply(this,arguments)},n.filters.fromUrl=function(){return s.filters.parse.apply(this,arguments)},n.points=r.partial(i,"any"),n.points.toUrl=function(){return s.lonlatPoints.stringify.apply(this,arguments)},n.points.fromUrl=function(){return s.lonlatPoints.parse.apply(this,arguments)},n.layerIds=function(e){return!!e},n.layerIds.toUrl=function(e){try{return JSON.stringify(e)}catch(t){return null}},n.layerIds.fromUrl=function(e){try{return JSON.parse(e)}catch(t){return null}},n.anyEnum=r.partial(i,"any"),n.anyEnum.toUrl=function(e){return e="string"==typeof e?e.split(","):e,e.join(",")},n.anyEnum.fromUrl=function(e){return e="string"==typeof e?e:""+e,e.split(",")},n.switcher=function(e){return r.contains(["on","off"],e)},n.eventday=function(e){return"eventday"==e},n.ask=function(e){return"ask"==e},n.rubricShortId=r.partial(i,"number"),n.id=n.number,n.id.toUrl=a,n.id.toCmp=a,n.idEnum=r.partial(i,"idEnum"),n.idEnum.toUrl=o,n.idEnum.toCmp=o,n.activeTab=function(e){return r.contains(["firms","geo","transport"],e)},n.photosType=function(e){return r.contains(["firm","booklets","geo"],e)},n.authType=function(e){return r.contains(["recovery","change","confirm","signup","login","responseConfirm","confirmed","error"],e)},n.errorType=function(e){return r.contains(["AlreadyConfirmed","InvalidToken","ServiceUnavailable"],e)},n.rsType=function(e){return r.contains(["subway","bus","car","pedestrian"],e)},n.acceptOnly=function(e){return function(t){return r.contains(e,t)}},n.floorsModifier=function(e){return"initial"==e},n.locale=function(e){return e&&!!e.match(/^[a-z]{2}$/)},n.date=function(e){return e&&!!e.match(/^\d{4}-\d{2}-\d{2}$/)}},{"./serializer":42,lodash:"lodash"}],57:[function(e,t,n){var a=e("lodash");t.exports=function(e,t,n,i){var o=e.config["booklet.providers.url"],r=t(a.partial(n,o)),s=a.partial(r,"get"),l=a.partial(r,"post"),c={getProvider:function(e,t){s("/provider/get",{firmId:e},t)},getTariff:function(e,t){s("/tariff/get",{id:e},t)},searchTariffs:function(e,t){e.filters||e.providerId||(e.city=i.getRegion().name),e.providerId&&(e.filters=e.filters||{},a.extend(e.filters,{gisFirmId:e.providerId})),e.filters&&(e.filters=JSON.stringify(e.filters)),s("/tariff/search",e,t)},request:function(e,t){e.partnerkey="2gis",l("/request",e,t)}};return c},t.exports._args=["app","requestDispatcher","requestHandler","$regionManager"]},{lodash:"lodash"}],58:[function(e,t,n){"use strict";var a=e("node-uuid");t.exports=function(){return a.v4()}},{"node-uuid":456}],59:[function(e,t,n){"use strict";function a(e,t,n,a){this._dataStore=t,this._app=e,this.actionParams=n,this.extraInfo=a,this._timesCalled=0,this._expirationTimer=null,this.inactive=!1,this.complete=!1}var i=e("lodash"),o=3,r=2.1;t.exports=a,a.prototype.tryInvoke=function(e){return++this._timesCalled,this.inactive?this:this._timesCalled>o?this._destruct():(this._invoke(e),1!=this._timesCalled||this.complete||this._runExpirationTimer(e),this)},a.prototype.getOrdersChainHash=function(){return i.get(this,"actionParams.hash","")},a.prototype._runExpirationTimer=function(e){var t=this,n=this._app.config[this._app.isClient?"WebApi.clientTimeout":"WebApi.timeout"];return this._expirationTimer=setTimeout(function(){t.inactive||t._invoke(e)},r*n),this},a.prototype._destruct=function(){return this.inactive=!0,this._dataStore.removeResponse(this.actionParams.hash),clearTimeout(this._expirationTimer),this},a.prototype._invoke=function(e,t){return t=t||this._dataStore.getData(this.actionParams.hash),i.isEmpty(t)||(this._app.invoke(e,[this._app,this.actionParams,t,this.extraInfo]),this.complete=!0,this._destruct()),this}},{lodash:"lodash"}],60:[function(e,t,n){"use strict";t.exports={search:"org",details:"org","geo/search":"geo","geo/get":"geo","transport/station/search":"transport","transport/route/search":"transport","transport/station_platform/get":"transport","transport/route/list":"transport","transport/station/list":"transport","transport/station/get":"transport","transport/station_entrance/get":"transport","transport/route/get":"transport","transport/calculate_routes":"transport","transport/calculate_directions":"transport"}},{}],61:[function(e,t,n){"use strict";function a(e,t){var n=l.pick(e,function(e){return e.meta&&200==e.meta.code});if(i(n,t))return"without";var a=l.map(n,function(e,t){return u[t]}),c=o(n),d=r(c,a);if("org"==d){var h=l.find(n,function(e,t){return"org"==u[t]});if(s(h._requestedParams,t))return"without";d+="_"+l.get(h,"request_type","recovery")}return d}function i(e,t){var n=[c.paramsId.service,c.paramsId.favorite,c.paramsId.provider,c.paramsId.filial,c.paramsId.allorganisation,c.paramsId.poi,c.paramsId.infrastructure];return l.isEmpty(e)||l.contains(n,t)}function o(e){var t=l.get(e,"search.dym.api_category");return t?t:l.get(e,"search.result.dym.api_category")}function r(e,t){var n={branch:"org",transport:"transport",geo:"geo"};return l.find([n[e],"org","geo","transport"],function(e){return l.contains(t,e)})}function s(e,t){return e&&c.paramsId.link==t?l.has(e,"building_id")||l.has(e,"org_id")?!0:!!(l.has(e,"q")&&l.has(e,"point")&&l.has(e,"radius")):!1}var l=e("lodash"),c=req("helpers/analytics").bss,u=e("./resTypeMap");t.exports=a,t.exports._hasNoSearchType=i,t.exports._getDym=o,t.exports._getRelevantSearchType=r,t.exports._isOrgWithoutSearchType=s},{"./resTypeMap":60,lodash:"lodash"}],62:[function(e,t,n){"use strict";function a(){this._storage={}}var i=e("lodash");t.exports=a,a.prototype.setData=function(e,t,n){return i.set(this,"_storage."+e+"."+t,i.cloneDeep(n)),this},a.prototype.getData=function(e){return i.cloneDeep(i.get(this,"_storage["+e+"]",{}))},a.prototype.removeResponse=function(e){return i.has(this,"_storage["+e+"]")&&delete this._storage[e],this},a.prototype.clear=function(){return this._storage={},this}},{lodash:"lodash"}],63:[function(e,t,n){"use strict";function a(e){var t=l.filter(e,function(e,t){return l.has(p,t)});return l.some(t,function(e){return!l.isEmpty(l.get(e,"_requestedParams._filtersKeys"))})}function i(e){if(l.isEmpty(e))return null;e=l.cloneDeep(e),e.work_time_mode&&(e.work_time=u.combineWorkTime(e),delete e.work_time_mode),delete e.work_day,delete e.work_hour;var t=l(e).map(function(e,t){return"sort"==t||"bound"==t?null:(l.get(e,"range")&&(e=e.range.join("-")),l.isArray(e)&&(e=e.join(",")),l.isString(e)||(e=""+e),{type:t,vl:e})}).compact().value();return l.isEmpty(t)?null:t}function o(e,t){if(e=e||{},e.bound&&t){var n=t.getNorthWest(),a=t.getSouthEast();return{rectangle:{lon1:n.lng,lat1:n.lat,lon2:a.lng,lat2:a.lat}}}return null}function r(e,t){var n=l.filter(t,function(e,t){return l.has(p,t)});if(l.isEmpty(n))return{};var a=l.get(n[0],"_requestedParams.hash");if(!a)return m("bss context error: hash is absent",{}),{};var i=e.searchContext.getAllContexts(),o=l.chain(i).keys().reduce(function(t,n){try{var i=e.getModuleDescriptorById(n).slot.bssContext.getHash();c.searchHashToBaseHash(i)==a&&(t[n]=i)}catch(o){}finally{return t}},{}).keys().value();if(l.isEmpty(o))return{};var r=l.reduce(o,function(e,t){return l.extend(e,i[t].getFilters())},{});return r}function s(e,t){var n=[c.bss.paramsId.poi,c.bss.paramsId.object_suggest],a=l.get(e,"_requestedParams.id",""),i=1==a.split(",").length;return l.includes(n,t)||t==c.bss.paramsId.link&&i?d.getStaticId(a):null}var l=e("lodash"),c=req("helpers/analytics"),u=req("helpers/filters"),d=req("helpers/firm"),h=e("./resolveSearchType"),p=e("./resTypeMap"),f=e("./searchTypesMap"),m=req("lib/sendError"),g=e("url");t.exports=function(e,t,n,u,d,m,_){var v=l.merge({},t),y=n[Object.keys(n)[0]].meta,b=h(n,v.pr);l.extend(v,{shv:y.api_version,isd:y.issue_date,searchtype:f[b],res:{}});var k=a(n);if(k){var w=m.getLatLngBound(!0),x=r(e,n);v.flt=i(x),v.gs=o(x,w)}if(v.pr==c.bss.paramsId.link){var C=_.get("X-Real-Referer");C&&(v.referer=g.parse(C,!0).hostname)}d.floors.isActive()&&(v.indoor=d.floors.getComplexId());var L=l.find(n,function(e,t){return"org"==p[t]});if(L){var I=s(L,v.pr);I&&(v.branch=I);var T=l.get(L,"search_attributes");if(T){l.has(T,"geo_restriction")&&(v.txgs=+T.geo_restriction),l.has(T,"sort")&&(v.sort=T.sort),l.has(T,"advertisers")&&(v.advertisers=l.clone(T.advertisers));var S=T.context_rubrics;l.isEmpty(S)||"org_discovery"!=b||(v.rubr=l.map(S,String))}}var E=l.find(n,function(e,t){return"geo"==p[t]});if(E&&v.pr==c.bss.paramsId.map){var P=l.first(E.items)||l.first(E.data)||{};"building"==P.type&&(v.gs=l.merge({building:{id:P.id}},v.gs),v.pr=c.bss.paramsId.building,delete v.searchtype),"poi"==P.type&&(v.pr=c.bss.paramsId.poi,"branch"==l.get(P,"reference.type")&&(v.branch=P.reference.id),delete v.gs,delete v.searchtype)}return l.each(n,function(e,t){var n=p[t];v.res[n]||(v.res[n]=0),k?v.res[n]+=e.total||0:v.res[n]+=e.total_count||e.total||0}),v},t.exports.isRequestWithFilters=a,t.exports.resolveFiltersValue=i,t.exports.resolveBoundFiltersValue=o,t.exports.getChainFilters=r,t.exports.getBranchValue=s,t.exports._args=["app","actionParams","searchesData","extraInfo","$appState","$viewport","$syncRegistry"]},{"./resTypeMap":60,"./resolveSearchType":61,"./searchTypesMap":66,lodash:"lodash",url:419}],64:[function(e,t,n){"use strict";function a(e,t,n){this._dataStore=t,this._app=e,this._analytics=e.requireComponent("analytics"),this._tracker=n,this._orders=[]}var i=e("lodash"),o=e("./order"),r=req("lib/sendError");t.exports=a,a.prototype.createNewOrder=function(e,t){var n=i.some(this._orders,function(t){return t.getOrdersChainHash()==e.hash});return n||this._orders.push(new o(this._app,this._dataStore,e,t)),this},a.prototype.processQueue=function(){var e=this;return i.each(this._orders,function(t){t.tryInvoke(e._tracker),t.inactive&&!t.complete&&r("bss context error: no searches results data",{actionParams:t.actionParams,extraInfo:t.extraInfo,sessionInfo:{user:e._analytics.user,sid:e._analytics.session}})},this),this._orders=i.filter(this._orders,function(e){return!e.inactive}),this}},{"./order":59,lodash:"lodash"}],65:[function(e,t,n){"use strict";var a=e("lodash"),i=e("./searchDataAggregator");t.exports=function(e,t,n,o,r,s,l,c){var u=a.some(n,function(e){return!e.meta||200!=e.meta.code&&404!=e.meta.code});if(!u){var d=i(e,t,n,o,s,l,c);r.trackEvent("search",[d])}},t.exports._args=["app","actionParams","searchesData","extraInfo","$analytics","$appState","$viewport","$syncRegistry"]},{"./searchDataAggregator":63,lodash:"lodash"}],66:[function(e,t,n){
"use strict";t.exports={org_recovery:1,org_discovery:2,org_extension:9,geo:3,transport:7,without:void 0}},{}],67:[function(e,t,n){var a=e("lodash"),i=req("helpers/analytics");t.exports=function(e){var t=e.requireComponent("analytics");return{wrapper:function(n,o){return e.isMausoleum&&"filial"==n.type?function(e,n,r){!e&&n&&a.each(n.data,function(e){t.writeBssInfoInCookie(e,i.bss.PLACES.CATALOG),e.see_also&&a.each(e.see_also,function(e){t.writeBssInfoInCookie(e,i.bss.PLACES.CATALOG)})}),o(e,n,r)}:o}}}},{lodash:"lodash"}],68:[function(e,t,n){function a(e,t){o=e,this.forGrym=t,i=o&&o.requireComponent("favoritesApi"),this.featureEnabled=!o||!!o.requireComponent("featureSwitcher").get("favorites")}var i,o,r=e("lodash"),s=req("helpers/firm");a.prototype.sign=function(e){return!this.featureEnabled||!o||this.forGrym||o.isServer?e:function(t,n,a){if(!n)return void e(t,n,a);var o=i.getObjectCache();return o?(r.forEach(n.data,function(e){o[s.getStaticId(e.id)]&&(e.isFavorited=!0)}),void e(t,n,a)):void e(t,n,a)}},t.exports=a},{lodash:"lodash"}],69:[function(e,t,n){function a(t,n){this.forGrym=n,i=t,o=new c(i,n);var a=e("./bssStaticCookieSaver")(i);this.bssStaticCookieSaverWrapper=a.wrapper}var i,o,r=e("lodash"),s=req("helpers/outputify"),l=req("lib/markerDataManager"),c=e("./favoriteSigner");a.prototype.items=function(e,t){function n(n,o,l){if(n)return t(n,o,l);if(o&&o.items&&(o.data=o.items,delete o.items),o&&o.hash&&(o.data=r.map(o.data,function(e){return r.set(e,"_hash",o.hash)})),"filial"==e.type||"suggest"==e.type){var c=i.requireComponent("i18n");r.each(o.data,function(e){if(e.address_name)e.address_only=e.address_name;else{var t=c.getFormats("address.order");e.address_name=s.getAddress(e.address,t),e.address_only=s.getAddressOnly(e.address,t)}}),a(n,o,l)}return t(n,o,l)}function a(t,n){if(!t&&n){var a=!(n.markers||e.q||e.page&&1!=e.page),i=(e.house||e.building_id)&&!e.servicing;a&&(i||e.id)&&(n.markers=l.makeByList(n.data))}}return t=o.sign(t),e=r.clone(e),t=this.bssStaticCookieSaverWrapper(e,t),n},t.exports=a},{"./bssStaticCookieSaver":67,"./favoriteSigner":68,lodash:"lodash"}],70:[function(e,t,n){function a(e,t){var n=null,a=null;return i.any(t,function(t,o){return o=o.split(","),i.every(o,function(t){return t in e})?(n=t,a=e[o[0]],!0):!1}),n?{type:n,value:a}:null}var i=e("lodash"),o=e("./dataResolver"),r=req("lib/offlineApi/database"),s={q:"query","building_id,servicing":"servicing",building_id:"inbuild",org_id:"branches",rubric_id:"rubric"},l={what:"query","house,servicing":"servicing",firm:"branches",rubric:"rubric",suggest:"suggest"};l=i.extend(l,s);var c={platform:{resolve:function(e){e.geometry={centroid:r.getObjectMarkerPosition(e,"full")}}},station:{fieldToExtend:"platforms",resolve:function(e){e.geometry={centroid:r.getObjectMarkerPosition(e,"full")}}}},u={"transport/station/get":[c.station],"transport/station_platform/get":[c.platform]},d={details:!0,"geo/get":!0,"transport/station/get":!0,"transport/route/get":!0,"transport/station_platform/get":!0};t.exports=function(e,t){var n;if(d[e]){var r=u[e],s=t.id||t.platform_id;return i.partial(o.details,s.split(","),r)}switch(e){case"search":case"geo/search":case"transport/station/search":var c,h={search:"firms","geo/search":"geo","transport/station/search":"station"},p=a(t,l);if(p&&(c=p.type,n=p.value),"query"!=c&&"suggest"!=c||(c=c+"/"+h[e]),n)return i.partial(o.search,c,n,t)}return i.noop}},{"./dataResolver":71,lodash:"lodash"}],71:[function(e,t,n){function a(e,t){var n={list:[],start:t};return e.subcategories&&e.subcategories.length&&e.subcategories[0].hint?(n.list=d.map(e.subcategories,function(e){return{count:e.items.length,title:e.hint&&e.hint.info&&e.hint.info.title,name:e.hint&&e.hint.tag}}),n):null}function i(e){var t=d.reduce(e.subcategories,function(e,t){return e+t.items.length},0);return t}function o(e,t){var n=d.clone(e),a={};return d.each(p.findAdvertisers(t),function(e){a[e.id]=0}),d.each(n,function(e){e.id in a&&(e.markerTags=["ad"])}),n}function r(e,t,n){return d.extend({markers:t,data:e,geometries:[],ads:[]},n)}function s(e,t,n,a){return function(i){return g.log("offlineData",i,a),0==i.length?e(_.frame404(),{},404):(d.each(n,function(e){d.each(i,function(t){e.fieldToExtend&&d.has(t,e.fieldToExtend)?d.each(t[e.fieldToExtend],function(t){e.resolve(t)}):e.resolve(t)})}),e(null,r(i,t,{contextKey:a}),200))}}function l(e){if(!e.subcategories||!e.subcategories.length)return[];var t,n=[];for(t=0;t<e.subcategories.length;++t)n=n.concat(e.subcategories[t].items);return n}var c,u,d=e("lodash"),h=e("./searchers"),p=req("lib/offlineApi/directoryModule"),f=req("lib/offlineApi/database"),m=e("slot/lib/defer"),g=e("slot/lib/stuff"),_=e("./responsePrefills"),v={},y={};n.search=function(e,t,n,s){function f(t,n,a){return 404==n?void setImmediate(function(){s(_.make404(),null,404)}):n?void s(n):(v[e]=a,c=i(a),void("orgs"==a.hint.tag?(y[e]=a,p.analyze(a,function(e,n){if(!e&&n.widgets)try{u=JSON.parse(n.widgets)}catch(a){u=null}else u=null;t()})):t()))}function b(){function t(e){e&&(o.filter_tags||(o.filter_tags=[]),o.filter_tags.push(e))}function a(e){var t={work_time_now:"runtime_works_now"};return d.has(t,e)?t[e]:-1!=e.indexOf("work_time")?-1!=e.indexOf("alltime")?"work_round_the_clock":!1:e}var i=m(),o={};d.each(I,function(e){switch(e=a(e)){case"sort_bound":o.sort="by_map_visibility";break;case"sort_rating":o.sort="by_rating";break;case"firmIds":o.ids=n.firmIds;break;default:t(e)}}),p.filter(y[e],o,function(t,n){t||(v[e]=n),i.resolve()}),m.when(i).then(k)}function k(){var i=n.page_size*(n.page-1),d=i+n.page_size,h=v[e];if(!h.subcategories.length)return void s(_.make404(),null,404);var f=l(h),m=f.slice(i,d);p.resolveObjectData(m,"full",h.context,function(n){g.log("offlineData",e+":"+t+"->",n);var l={contextKey:h.context,dym:h.dym,total:f.length,total_count:c,groups:a(h,i),markers:o(f,h)},d=r(n,f,l);u&&(d.widgets=u),s(null,d,200)})}d.defaults(n,{page_size:20,page:1});var w,x=h[e],C=d.partial(f,b),L=d.partial(f,k),I=n.getFilterTags&&n.getFilterTags(),T=["query/firms","rubric","inbuild","branches","suggest/firms"];return I&&I.length&&d.contains(T,e)?v[e]?b():w=x(t,C):w=x(t,L),{abort:function(){d.isUndefined(w)||p.cancelSearch(w)}}},n.details=function(e,t,n){var a=d.map(e,function(e){return{id:e}});return f.resolveObjectData(a,"full",s(n,a,t)),{abort:d.noop}}},{"./responsePrefills":73,"./searchers":74,lodash:"lodash","slot/lib/defer":489,"slot/lib/stuff":496}],72:[function(e,t,n){function a(e,t,n,a){var o=i(e,n);return o?o(a):(a(r.make404(),null,404),{abort:function(){}})}var i=e("./adapter"),o=req("lib/offlineApi/integrate"),r=e("./responsePrefills");t.exports=function(e){return o(e),a}},{"./adapter":70,"./responsePrefills":73}],73:[function(e,t,n){n.make404=function(){return{data:[],geometries:[],total:0}},n.frame404=function(){return{frame:{conf:null}}}},{}],74:[function(e,t,n){function a(e,t){}function i(e,t){return p.find(t,function(t){return t.hint.tag==e})}function o(e){return e[0]}function r(e,t,n){return t=t||o,function(a,i){try{if(a)e(a);else{var o=t(i.categories);o?(i&&i.hint&&(o.dym={api_category:i.hint.preferred_category}),e(null,o)):e(404)}}catch(r){}finally{n&&n.cached&&(g=i.categories),n&&n.async&&d&&d.resolve()}}}function s(e,t){var n=i(e,g);n?t(null,n):t(404)}function l(e){var t=e==h;return t||(h=e,d=f()),t}function c(e,t,n){return l(t)?(f.when(d).then(p.partial(s,e,n)),0):m.searchByQuery(t,"search_main",r(n,p.partial(i,e),{async:!0,cached:!0}))}function u(e,t,n){return a("suggest",t),l(t)?(f.when(d).then(p.partial(s,e,n)),0):m.searchBySuggest(t,"search_by_suggest_main",r(n,p.partial(i,e),{async:!0,cached:!0}))}var d,h,p=e("lodash"),f=e("slot/lib/defer"),m=req("lib/offlineApi/directoryModule"),g=null;m.on("detach",function(){h=null}),n["query/firms"]=p.partial(c,"orgs"),n["query/geo"]=p.partial(c,"places"),n["query/station"]=p.partial(c,"transport"),n.inbuild=function(e,t){a("inbuild",e),m.searchByObject(e,"search_in_building",r(t))},n.servicing=function(e,t){a("servicing",e),m.searchByObject(e,"search_servicing",r(t))},n.branches=function(e,t){console.info("branches",e),m.searchByObject(e,"search_main",r(t))},n["suggest/firms"]=p.partial(u,"orgs"),n["suggest/geo"]=p.partial(u,"places"),n["suggest/station"]=p.partial(u,"transport"),n.rubric=function(e,t){a("rubric",e),m.searchByObject(e,"search_main",r(t))}},{lodash:"lodash","slot/lib/defer":489}],75:[function(e,t,n){var a=e("lodash"),i=req("helpers/request");t.exports=function(e){return function(t,n,o){var r=-1!=t.indexOf("/get"),s=n.region_id;return e(t,n,function(e,t,l){if(!e&&t&&t.items&&r){var c=a.first(t.items)||{};if(s&&c.region_id!=s&&"road"!=c.type)return void i.emitError(404,o);if(!n.includeDeleted){var u=a.filter(t.items,function(e){return!a.get(e,"dates.deleted_at")});if(!u.length)return void i.emitError(404,o);t.items=u,t.total=u.length}}o.apply(this,[e,t,l])})}}},{lodash:"lodash"}],76:[function(e,t,n){var a=e("lodash"),i={};i.attributes={check:function(e,t){var i;return a.isEmpty(t.attributes)?i=!0:(e.filters=e.filters||{},e.filters.attributes=n.extendAttrs(e.filters.attributes,t.attributes),e.filters.spatial=t.spatial),i},addToCache:function(e,t){t.attributes=t.attributes||{},e.filters&&e.filters.attributes&&(t.attributes=e.filters.attributes),t.spatial=t.spatial||{},a.has(e,"filters.spatial")&&(t.spatial=e.filters.spatial)},add:function(e,t,o){return o=o||{},o.filters=o.filters||{},o.filters.attributes=n.extendAttrs(o.filters.attributes,e.filters.attributes),a.has(e,"filters.spatial")&&(o.filters.spatial=e.filters.spatial),i.attributes.addToCache(e,t),o}},i.widgets={check:function(e,t){if(e.widgets){if(!t.widgets)return!0;e.widgets=t.widgets}return!1},addToCache:function(e,t){t=t||{},t.widgets=e.widgets},add:function(e,t,n){return n.widgets=e.widgets,i.widgets.addToCache(e,t),n}},i.totalCount={check:function(e,t){return t.total_count?(e.total_count=t.total_count,!1):!0},addToCache:function(e,t){t=t||{},t.total_count=e.total},add:function(e,t,n){return n.total_count=e.total,i.totalCount.addToCache(e,t),n}},n.getAdders=function(e,t){var n=[];return a.each(i,function(a){a.check(e,t)&&n.push(a.add)}),n},n.setCache=function(e,t){a.each(i,function(n){n.addToCache(e,t)})},n.getAllAdders=function(){return a.map(i,function(e){return e.add})},n.extendAttrs=function(e,t){return a.map(t,function(t){return t=a.clone(t),"flag"!=t.type||a.find(e,t)||(t.removed=!0),t})},n.dataConf=i},{lodash:"lodash"}],77:[function(e,t,n){var a=e("lodash"),i=e("slot/lib/stuff"),o=e("./dataConf");t.exports=function(e){function t(e,t){var n=[].slice.call(arguments,2);return t=a.clone(t.withoutFilters()),a.each(s.concat(n),function(e){delete t[e]}),i.state2uri(t)+"_"+e}function n(e){return r[e]=r[e]||{},r[e]}var r={},s="page,page_size,fields,output,callback,key,sort,sort_point,lang,point1,point2,hash".split(",");return function(i,r,s){if(!r.onlyForFilters||"catalog/marker/search"==i)return e.apply(this,arguments);var l=r.hasFilters(),c=r.onlyMarkers();return e(i,r,function(u,d,h){var p=[].slice.call(arguments),f=t(i,r),m=n(f),g=[];if(c||(u||200!=h.code?l&&(g=o.getAllAdders()):l?g=o.getAdders(d,m):o.setCache(d,m)),g.length){var _=r.onlyForFilters();e(i,_,function(e,t,n){p[0]&&(p[1]=p[1]||{}),e||200!=n.code||a.each(g,function(e){p[1]=e(t,m,p[1])}),s.apply(this,p)})}else s.apply(this,p)})}}},{"./dataConf":76,lodash:"lodash","slot/lib/stuff":496}],78:[function(e,t,n){t.exports=function(e,t){var n=t.requireComponent("previewBizaccount");return function(t,a,i){return e(t,a,function(e,t,a){n.mergeData(t,function(t){i(e,t,a)})})}}},{}],79:[function(e,t,n){var a=e("lodash");t.exports=function(t,n){function i(){if(t.config["emergencyProjects.savedList"])try{return e(t.config["emergencyProjects.savedList"])}catch(n){}return null}return function(e,o,r){if(t.isServer&&"region/list"==e){var s=i(),l=a.get(s,"result");if(l)return n(e,o,function(e,t,n){return e?void r(null,l,{code:200}):void r(e,t,n)})}return n(e,o,r)}}},{lodash:"lodash"}],80:[function(e,t,n){var a=e("lodash"),i=req("lib/webApi"),o=req("helpers/requestFields.js"),r=e("./checkDataMiddleware"),s=e("./previewBizacountMiddleware"),l=e("./filters/middleware");t.exports=function(t){function n(e,n,o){var r=!1,s=k.caller(),l=function(){r||s.sub(o,arguments)},c={headers:{}},u=c.headers;if(t.isServer){if(t.cookies){var d=[];a.reduce(t.config["WebApi.sessionKeys"],function(e,n,a){var i=n.cookieName,o=x[a]||t.cookies[i]||null;return o&&e.push(i+"="+o),e},d),d=a.compact(d).join(";"),d&&(u.cookie=a.compact([d,u.cookie]).join("; "));var h=L.get("X-Real-Referer");h&&(u["X-Real-Referer"]=h);var p=t.registry.get("User-Agent");p&&(u["User-Agent"]=p.ua)}t.registry.has("ip")&&(u["X-Real-IP"]=t.registry.get("ip"))}n.key=n.key||t.config["WebApi.key"];var f=t.config["WebApi.catalogUrl"]+e,m=i(f,n,c,l),g=m.cancel;return m.cancel=function(){return r=!0,g.apply(m,arguments)},s.reg(m)}function c(e,n,a){var i=[];if("bare"==n)return["branch.bare"];if("catalog/rubric/list"==e&&(i.push("rubric.list"),a.sort="popularity"),"catalog/rubric/get"==e&&i.push("rubric.get"),"catalog/branch/get"==e)switch(n){case"minimal":i.push("branch.minimal");break;case"photo_info":i.push("branch.getPhotoInfo");break;case"reviews_info":i.push("branch.getReviewsInfo");break;case"firm_info_short":i.push("branch.getShort");break;case"get_profiles":i.push("branch.getProfiles");break;case"tooltip":i.push("branch.tooltip");var o=t.searchContext.getFilters()||{};o.work_time_mode&&i.push("branch.filter.schedule");break;default:i.push("branch.get")}if("catalog/branch/search"==e&&(i.push("branch.dym","branch.analyticsExtra"),"get_dym"!=n&&(i.push("branch.search"),i.push(p(a)),a.enableMarkers&&i.push("branch.markers"))),"catalog/branch/list"==e){switch(n){case"reviews_info":i.push("branch.getOrgReviewsInfo");break;default:i.push("branch.list","branch.analyticsExtra")}i.push(p(a)),a.enableMarkers&&i.push("branch.markers")}if(e.match("catalog/branch")&&i.push("branch.analytics"),"geo/get"==e||"geo/search"==e){i.push("geo.analytics");var r={show_in_list:["geo.address","geo.geometry","geo.group"],markers_list:"geo.markers",show_in_card:["geo.attraction","geo.parking","geo.geometry","geo.group"],photoInfo:"geo.photoInfo",geocode:["geo.geocode","geo.geometry","geo.group"],geocodeLight:["geo.geocodeLight","geo.group"],tooltip:"geo.tooltip",check_group:"geo.group"};r[n]&&(i=i.concat(r[n]))}return"transport/station/list"==e&&i.push("station.list"),"transport/route/get"==e&&i.push("route"),"loadRegions"==n&&i.push("regions"),i}function u(e,t,n){var i=[n.fields],r=c(e,t,n),s=o(a.flatten(r,!0));n=h(n,s,i),delete n.enableMarkers,delete n.full}function d(e,t,n){var i=[n.fields],r=[];"catalog/branch/get"==e&&r.push("branch.favorite","branch.analytics"),"geo/get"==e&&r.push("geo.favorite","geo.analytics");var s=o(a.flatten(r));n=h(n,s,i)}function h(e,t,n){n.push(t);var a=f(n);return a&&(e.fields=a),e}function p(e){var t=[];return e.work_time&&t.push("branch.filter.schedule"),e.full&&t.push("branch.filters"),e.servicing||t.push("branch.filter.noServicing"),e.rubric_id&&t.push("branch.filter.rubric"),e.org_id||e.servicing||t.push("branch.filter.reqType"),t}function f(e){var t="";return e=a.compact(a.flatten(e,!0)),e.length&&(e=a.uniq(e.join(",").split(",")),t=e.join(",")),t}function m(e,t){var n=!e.point&&!e.org_id&&!e.building_id,i="show_in_card"==t,o="markers"==t;if(n&&!i||o){var r=C.getRegion();if(a.isEmpty(r))throw Error("[webApi] Unable to resolve where without region");e.region_id=r.id}}function g(e){if(e.point&&e.point instanceof Array&&(e.point=e.point.join(",")),e.bound||e.sort&&"bound"==e.sort){var n=t.requireComponent("viewport"),i=n.getLonLatBound();e.point1=i.topLeft.join(),e.point2=i.bottomRight.join(),delete e.bound}e.house&&(e.org_id||(e.building_id=e.house),delete e.house),I.isAuthorized()&&(e["stat[authuser]"]=a.get(I.getAuthorizedUserSync(),"authorizedUser.id"))}function _(e,t,n){if(n&&"markers"==n)e="catalog/marker/search";else if("filial"==t.type){switch(e){case"search":e=t.q?"catalog/branch/search":"catalog/branch/list";break;case"details":e="catalog/branch/get"}delete t.type}return e}function v(e){if(!e.locale){var n=t.registry("i18n").locale;n&&(e.locale=n)}}function y(e,n){if(a.contains(["geocode","geocodeLight"],n)){var i=t.config["geocoder.objects2ZoomRestrictions"];t.ua().isPhone&&(i=t.config["geocoder.objects2ZoomRestrictions.phones"]);var o=[];for(var r in i)(e.zoom_level===!0||i[r]<=e.zoom_level)&&o.push(r);e.type=o.join(",")}}function b(e,t,n,i){return e=_(e,n,t),a.contains(["loadRegions","profilesAnywhere","extraDataForCard","check_group"],t)||m(n,t),n.type||y(n,t),g(n),"favorites"==t?d(e,t,n):u(e,t,n),v(n),T(e,n,i)}var k=t.requireComponent("requestManager"),w=t.requireComponent("previewBizaccount"),x=t.requireComponent("analytics"),C=t.requireComponent("regionManager"),L=t.requireComponent("syncRegistry"),I=t.requireComponent("authorization"),T=r(l(n));if(t.isServer){var S=req("helpers/requestWrappers/cache")(t),E=e("./savedProjectListMiddleware"),P=e("./wrongUrlMiddleware");T=E(t,T),T=S.wrap(T),T=P(T,t)}return w.isEnabled()&&(T=s(T,t)),b}},{"./checkDataMiddleware":75,"./filters/middleware":77,"./previewBizacountMiddleware":78,"./savedProjectListMiddleware":79,"./wrongUrlMiddleware":81,lodash:"lodash"}],81:[function(e,t,n){var a=e("lodash"),i=["geo/get","catalog/branch/get","catalog/branch/list","transport/route/get","transport/station/get"];t.exports=function(e,t){var n=t.requireComponent("regionManager"),o=t.requireComponent("appState");return function(r,s,l){return e(r,s,function(e,s,c){if(a.contains(i,r)){var u=n.getRegion().id,d=a.get(s,"items[0].region_id"),h=o.get("city");d&&h&&u!=d&&(h.id=d,o.set("city",h),o.replace(),t.raise({code:301}))}l.apply(this,[e,s,c])})}}},{lodash:"lodash"}],82:[function(e,t,n){var a=e("lodash"),i=e("slot/config"),o=req("helpers/filters");t.exports=function(e,t){function n(e){e=e||{};var t=a.omit(e,["work_time_mode","work_day","work_hour"]),n=o.combineWorkTime(e);return n&&(t.work_time=n),t}function r(e){var t=["sort","work_time","has_site","has_photos","bound","district_id","subway","opened_after_date"],n={};return a.each(e,function(e,o){a.contains(t,o)?n[o]=e:e&&-1!=e.indexOf("-")?n[i.isGrym?o:"attr["+o+"]"]=e.replace("-",","):a.each(e.split(","),function(e){var t=o,a="";"true"==e||"false"==e?a=e:t=e,n[i.isGrym?t:"attr["+t+"]"]=a})}),n}function s(e,t){if(t.subway){var n="метро "+t.subway;e.originalQuery=e.query||e.q,e.q=a.compact([e.originalQuery,n]).join(", ")}return a.omit(t,"subway")}function l(e,t){t=n(t),t=r(t),this._filtersKeys=t?a.without(a.keys(t),"sort"):[],t=s(e,t),a.extend(this,e);for(var i in t)void 0!==t[i]&&null!==t[i]||delete t[i];a.extend(this,t)}return l.prototype.withoutFilters=function(){var e=this._filtersKeys.concat("_filtersKeys");return a.contains(this._filtersKeys,"bound")&&e.push("point1","point2"),a.omit(this.valueOf(),e)},l.prototype.onlyForFilters=function(){var e=this.withoutFilters(),t=[];return e.servicing||(t.push("widgets"),t.push("filters")),e.fields=t.join(","),e.page_size=1,e.originalQuery&&(e.q=e.originalQuery),e},l.prototype.hasFilters=function(){return this._filtersKeys.length>0},l.prototype.onlyMarkers=function(){return"markers"==this.fields},l.prototype.valueOf=function(){var e={};for(var t in this)this.hasOwnProperty(t)&&"_filtersKeys"!=t&&(e[t]=this[t]);return e},l.prototype.getFilterTags=function(){var n=[],i=["firmIds"];return a.each(i,function(t){a.has(e,t)&&n.push(t)}),a.each(t,function(e,t){if(e+""=="true")n.push(t);else{var i=e.split(",");a.each(i,function(e){n.push(t+"_"+e)})}}),n},l.prototype.clone=function(){var e=a.extend(new l,this);return e},new l(e,t)}},{lodash:"lodash","slot/config":"slot/config"}],83:[function(e,t,n){var a=e("lodash"),i=e("../reqParams"),o=req("lib/asyncRequest").parallel,r=req("lib/markerDataManager"),s=e("slot/lib/stuff"),l=e("./simplifyResult");t.exports=function(e,t){function n(e){var t=[].slice.call(arguments,1);t=[e,"filters"].concat(t);var n=a.omit.apply(a,t);return i(n,e.filters)}function c(e,a){var i=n(e,"rubric");return t.firms.byRubric(e.rubric,i,a)}function u(e,a){var i=n(e,"house");return t.firms.servicing(e.house,i,a)}function d(e,a){var i=n(e,"house");return t.firms.inBuild(e.house,i,a)}function h(e,a){var i=n(e,"profiles");return t.firms.profiles(e.profiles,i,a)}function p(e,a){var i=n(e,"firmId");return t.firms.filials(e.firmId,i,a)}function f(e,a){var i=n(e,"text","rubricId","suggest");return e.rubricId?t.firms.byRubric(e.rubricId,i,a):e.suggest?t.firms.bySuggest(e.suggest,i,a):t.firms.search(e.query,i,a)}function m(e,n){var i=a.omit(e,"query");return t.geo.search(e.query,i,n)}function g(e,t){var n={stations:function(t){return _(e,l.wrapper(t,!0))},routes:function(t){return v(e,l.wrapper(t,!0))}};return o(n,function(e,n){var i=n.stations[0],o=n.routes[0],r=n.stations[1]||{},s=n.routes[1];if(!s||404==s.code||404!=r.code&&200!=r.code||(r=s),i.type="station",o.type="route",404==o.code&&200==i.code){var l=a.groupBy(i.data,function(e){return e.type});k(i,l.station&&l.station.length||0),k(o,l.route&&l.route.length||0)}var c=b(i,o);t(c,r)})}function _(e,n){var i=a.omit(e,"query");return t.transport.stationsByQuery(e.query,i,n)}function v(e,n){var i=a.omit(e,"query");return t.transport.routes(e.query,i,n)}function y(e,i){var s=a.map(e.rubrics,function(i){return function(o){var s=n({bss:e.bss,point:e.point,filters:e.filters,radius:i.radius,page_size:e.page_size,full:e.full,fields:"markers"}),c=function(e,t){return function(n,i,o){var s=l(n,i,o);n||(s.markers=r.makeByList(i.data,null,{from_booklet:!0,rubric_code:e.code})),a.each(s.data,function(t){t.rubric_code=e.code}),s.meta=o,t(null,s)}};return t.firms.search(i.request,s,c(i,o))}});return o(s,function(t,n){var o=a.reduce(n,b);o.ads=null,o.rubrics=e.rubrics,i(o)})}function b(e,t){function n(n){var o=a.chain(e).get(n).pluck("static_id").compact().value();return a.reject(a.get(t,n,{}),function(e){return a.contains(o,e.static_id)?(k(i,function(e){return e--}),!0):!1})}var i=a.clone(e);e.type&&t.type&&(i[e.type+"_code"]=e.code,i[t.type+"_code"]=t.code,i[e.type+"_error"]=e.error,i[t.type+"_error"]=t.error,i[e.type+"_count"]=e.total_count,i[t.type+"_count"]=t.total_count),i.code=200==e.code||200==t.code?200:e.code,i.groups=e.groups||t.groups,k(i,function(e){return e+t.total_count});var o=function(n,o){a.set(i,n,a.get(e,n,[]).concat("function"==typeof o?o(n):a.get(t,n,[])))};return 200==i.code&&(o("data",n),o("geometries"),o("markers"),e.items&&t.items&&o("items",n)),i.search_attributes||(i.search_attributes={}),i.search_attributes.geo_restriction=a.get(e,"search_attributes.geo_restriction")||a.get(t,"search_attributes.geo_restriction"),o("search_attributes.context_rubrics"),i}function k(e,t){"function"==typeof t?(e.total_count=t(e.total_count),e.request_count=t(e.request_count)):(e.total_count=t,e.request_count=t)}var w={filials:p,"query/firms":f,"query/geo":m,"query/stations":_,"query/routes":v,profiles:h,inbuild:d,servicing:u,rubric:c},x={"query/transport":g,rubricsNear:y};return function(e,t,n){var a=w[e];if(a?n=l.wrapper(n):a=x[e],!a)throw Error(s.format("Unknown type %1 for search",e));return a(t,n)}}},{"../reqParams":82,"./simplifyResult":85,lodash:"lodash","slot/lib/stuff":496}],84:[function(e,t,n){var a=e("lodash"),i=e("../reqParams"),o=e("./simplifyResult"),r=e("bluebird");t.exports=function(e,t){function n(t,n){var o=["query","building_id","page","page_size","rubricId"],r=i(a.pick(t,o),t.filters);return e.firms.markersSearch(r,n)}function s(t,n){var o=["query","building_id","page_size"],r=i(a.pick(t,o),t.filters);return r.org_id=t.firmId,e.firms.markersSearch(r,n)}function l(t,n){var o=["q","query","building_id","polygon","page","page_size","opened_after_date"],r=i(a.pick(t,o),t.filters);return t.rubricId?(r.rubric_id=t.rubricId,e.firms.markersSearch(r,n)):(r.q=r.q||t.query,e.firms.markersSearch(r,n))}var c={filials:s,"query/firms":l,rubric:n};return function(e,n,a){return n.house&&(n.building_id=n.house,delete n.house),new r(function(i,r){var s=c[e];return s?void t.add(s(n,function(e,t,n){n||(n={}),i(o(e,t,n))}),a):void r("Unknown type "+e+" for search")})}},t.exports._args=["dgApi","$requestGroups"]},{"../reqParams":82,"./simplifyResult":85,bluebird:384,lodash:"lodash"}],85:[function(e,t,n){function a(e,t,n){var a=n.code;e&&!a&&(n.code=a=500);var i=o.cloneDeep(t||{});return i.request_count=200==a?i.total:0,i.total_count=200==a?i.total_count||i.total:0,i.error=e,i.code=a,i}function i(e,t){return function(n,i,o){o||(o={});var r=a(n,i,o);t?e(null,r,o):e(r,o)}}var o=e("lodash");t.exports=a,t.exports.wrapper=i},{lodash:"lodash"}],86:[function(e,t,n){function a(e){return function(){var t=arguments;return function(){var n=t[0];return arguments.length==e+1&&(n=t[1]),n.apply(this,arguments)}}}n.skipParams=function(e,t){function n(){var n=[].slice.call(arguments);return n.splice(t,0,{}),e.apply(this,n)}t=void 0===t||null===t?1:t;var i=a(t);return i(e,n)},n.useFirst=function(e){return function(t,n,a){e(t,t||!n.data?n:n.data[0],a)}}},{}],87:[function(e,t,n){"use strict";var a=function(){function e(e,t){var n=[],a=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(l){i=!0,o=l}finally{try{!a&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=e("lodash"),r=e("bluebird"),s=e("../actions/collections"),l=s.SET_SHOWED_COVER_TOOLS_ITEM,c=s.SHOW_COVER_UPLOADER_ITEM,u=s.SET_RENAMED_ITEM,d=s.CHANGE_RENAMED_VALUE,h=s.SET_SHOWED_SHARE_TOOLS_ITEM,p=s.CHANGE_ACTIVE,f=s.CHANGE_ADD_MODE,m=s.CHANGE_ADD_VALUE,g=s.LOAD_LIST,_=s.LOAD_LIST_SUCCESS,v=s.LOAD_LIST_FAILURE,y=s.ADD_ITEM,b=s.ADD_ITEM_SUCCESS,k=s.ADD_ITEM_FAILURE,w=s.DELETE_ITEM,x=s.DELETE_ITEM_SUCCESS,C=s.DELETE_ITEM_FAILURE,L=s.RESTORE_ITEM,I=s.RESTORE_ITEM_SUCCESS,T=s.RESTORE_ITEM_FAILURE,S=s.UPDATE_ITEM,E=s.UPDATE_ITEM_SUCCESS,P=s.UPDATE_ITEM_FAILURE,j=s.SHARE_ITEM,M=s.SHARE_ITEM_SUCCESS,A=s.SHARE_ITEM_FAILURE,D=s.UPLOAD_ITEM_COVER,R=s.UPLOAD_ITEM_COVER_SUCCESS,N=s.UPLOAD_ITEM_COVER_FAILURE,B=s.RESET,F=s.SUBSCRIBE_ITEM,O=s.SUBSCRIBE_ITEM_SUCCESS,z=s.SUBSCRIBE_ITEM_FAILURE,q="favorites",$="subscribed",U="recommended";t.exports=function(e){function t(e){return{type:c,payload:!!e}}function n(){var e=arguments.length<=0||void 0===arguments[0]?-1:arguments[0];return{type:l,payload:parseInt(e,10)}}function s(){var e=arguments.length<=0||void 0===arguments[0]?-1:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=null===t?"":t;return{type:u,payload:{index:parseInt(e,10),value:""+n}}}function H(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return{type:d,payload:""+e}}function G(t){return function(n){return t?e.generateUrl(t).then(o.compose(n,ge(t))):r.resolve(n(ge("","")))}}function W(e){return{type:p,payload:e}}function V(e){return{type:f,payload:!!e}}function Z(e){return{type:m,payload:""+e}}function Y(e){return{type:g,payload:{name:e}}}function K(){return function(t){return t(Y(q)),e.getList().then(o.compose(t,_e(q)))["catch"](o.compose(t,ve(q)))}}function X(){return function(t){return t(Y($)),e.getSubscribedList().then(o.compose(t,_e($)))["catch"](o.compose(t,ve($)))}}function J(){return function(t){return t(Y(U)),e.getRecommendedList().then(o.compose(t,_e(U)))["catch"](o.compose(t,ve(U)))}}function Q(e){return{type:y,payload:{name:e}}}function ee(t){return function(n){return n(Q(q)),e.addItem({title:t}).then(o.compose(n,ye(q)))["catch"](o.compose(n,be(q)))}}function te(t,n){return function(a,i){var r=o.get(i(),["collections",q,"list",t,"id"]);return a(ke(q,t)),e.deleteItem(r).then(function(){return a(we(q,t,n))}).then(function(){return r})["catch"](o.compose(a,xe(q,t)))}}function ne(t){return function(n,a){var i=o.get(a(),["collections",q,"list",t]);return n(Ce(q,t)),e.addItem(i).then(o.compose(n,Le(q,t)))["catch"](o.compose(n,Ie(q,t)))}}function ae(t,n){return function(a,r){var s=o.get(r(),["collections",q,"list",t]);return a(Te(q,t)),e.updateItem(i({},s,n)).then(o.compose(a,Se(q,t)))["catch"](o.compose(a,Ee(q,t)))}}function ie(e){return{type:j,payload:{id:e}}}function oe(t,n){return function(a){var s=t.id;return a(ie(s)),r.all([e.updateItem(i({},t,{id:s,is_shared:n})),n?e.generateUrl(s):void 0]).then(o.compose(a,Pe(s)))["catch"](o.compose(a,je(s)))}}function re(e,t){return{type:D,payload:{index:e,fileName:t}}}function se(e){return{type:R,payload:{index:e}}}function le(e,t){return{type:N,payload:{index:e},error:t}}function ce(e,t){return function(n){var a=o.get(t,"errorMessages[0]");n(a?le(e,a):re(e,t.fileName))}}function ue(e,t){return function(n){var a=o.get(t,"errorMessages[0]");if(a)return n(le(e,a));var i={object_id:"11111111111111111",object_type:"collection"};return n(ae(e,{cover:i})).then(function(){return n(se(e))})}}function de(e){return function(t){return t(ae(e,{cover:null}))}}function he(){return{type:B}}function pe(e){return{type:F,payload:{id:e}}}function fe(t,n){return function(a){return a(pe(t)),e.subscribe(t).then(o.compose(a,Me(t,n)))["catch"](o.compose(a,Ae(t)))}}function me(t,n){return function(a){return a(pe(t)),e.unSubscribe(t).then(o.compose(a,Me(t,n)))["catch"](o.compose(a,Ae(t)))}}var ge=o.curry(function(e,t){return{type:h,payload:{id:e,shortUrl:t}}}),_e=o.curry(function(e,t){return{type:_,payload:{name:e,list:t}}}),ve=o.curry(function(e,t){return{type:v,payload:{name:e},error:t}}),ye=o.curry(function(e,t){return{type:b,payload:{name:e,item:t}}}),be=o.curry(function(e,t){return{type:k,payload:{name:e},error:t}}),ke=o.curry(function(e,t){return{type:w,payload:{name:e,index:t}}}),we=o.curry(function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return{type:x,payload:{name:e,index:t},meta:{canRestore:n}}}),xe=o.curry(function(e,t,n){return{type:C,payload:{name:e,index:t},error:n}}),Ce=o.curry(function(e,t){return{type:L,payload:{name:e,index:t}}}),Le=o.curry(function(e,t,n){return{type:I,payload:{name:e,index:t,item:n}}}),Ie=o.curry(function(e,t,n){return{type:T,payload:{name:e,index:t},error:n}}),Te=o.curry(function(e,t){return{type:S,payload:{name:e,index:t}}}),Se=o.curry(function(e,t,n){return{type:E,payload:{name:e,index:t,item:n}}}),Ee=o.curry(function(e,t,n){return{type:P,payload:{name:e,index:t},error:n}}),Pe=o.curry(function(e,t){var n=a(t,2),o=n[0],r=n[1];return{type:M,payload:{id:e,item:i({},o,{shortUrl:r})}}}),je=o.curry(function(e,t){return{type:A,payload:{id:e},error:t}}),Me=o.curry(function(e,t,n){return{type:O,payload:{id:e,item:n},meta:{changeableList:t}}}),Ae=o.curry(function(e,t){return{type:z,payload:{id:e},error:t}});return{showCoverUploaderItem:t,setShowedCoverToolsItem:n,setRenamedItem:s,changeRenamedValue:H,changeActive:W,setShowedShareToolsItem:ge,showShareTools:G,changeAddMode:V,changeAddValue:Z,loadListStart:Y,loadListSuccess:_e,loadListFailure:ve,loadListOfFavorites:K,loadListOfSubscribed:X,loadListOfIntresting:J,addItemStart:Q,addItemSuccess:ye,addItemFailure:be,addItemToFavorites:ee,deleteItemStart:ke,deleteItemSuccess:we,deleteItemFailure:xe,deleteItemFromFavorites:te,restoreItemStart:Ce,restoreItemSuccess:Le,restoreItemFailure:Ie,restoreItemFromFavorites:ne,updateItemStart:Te,updateItemSuccess:Se,updateItemFailure:Ee,updateItemFromFavorites:ae,shareItemStart:ie,shareItemSuccess:Pe,shareItemFailure:je,shareItem:oe,uploadItemCoverStart:re,uploadItemCoverSuccess:se,uploadItemCoverFailure:le,loadItemCover:ce,uploadItemCover:ue,deleteItemCover:de,reset:he,subscribeItemStart:pe,subscribeItemSuccess:Me,subscribeItemFailure:Ae,subscribeItem:fe,unsubscribeItem:me}},t.exports._args=["$collectionsApi"]},{"../actions/collections":90,bluebird:384,lodash:"lodash"}],88:[function(e,t,n){"use strict";var a=e("lodash"),i=e("../../../helpers/favorites"),o=e("../actions/collections"),r=o.DECREMENT_FAVORITES_COUNT,s=e("../actions/favorites"),l=s.CHANGE_HOVER_ITEM,c=s.REMOVE,u=s.HIDE_MARKERS,d=s.CLEAN_LIST,h=s.GET_LIST,p=s.GET_LIST_SUCCESS,f=s.GET_LIST_FAILURE,m=s.GET_COLLECTION,g=s.GET_COLLECTION_SUCCESS,_=s.GET_COLLECTION_FAILURE,v=s.CHANGE_MEDIA_MODE,y=s.CHANGE_MEDIA_MODE_SUCCESS,b=s.CHANGE_MEDIA_MODE_FAILURE,k=s.UPDATE_TITLE,w=s.UPDATE_TITLE_SUCCESS,x=s.UPDATE_TITLE_FAILURE,C=s.UPDATE_DESCRIPTION,L=s.UPDATE_DESCRIPTION_SUCCESS,I=s.UPDATE_DESCRIPTION_FAILURE,T=a.curry(function(e,t){
return Object.assign({},t,e)});t.exports=function(e,t,n,o){function s(e,t){return{type:l,payload:{hovered:!!e,index:parseInt(t,10)}}}function S(){return{type:d}}function E(e){return{type:u,payload:e}}function P(){return{type:h}}function j(e){return{type:p,payload:e}}function M(e){return{type:f,error:e}}function A(n){return function(r,s){var l=a.get(s(),"favorites.collection",{}),c=l.is_owned,u=void 0===c?!1:c,d=l.favoriteIds;r(P());var h=u?o.getList:o.getSharedList;return h(n).then(function(n){return i.addFavoritesInfo(e,t,n)}).then(a.compose(r,j,G(d),a.values))["catch"](a.compose(r,M))}}function D(e){return{type:m,payload:e}}function R(e){return{type:g,payload:e}}function N(e){return{type:_,error:e}}function B(e){return function(t){return a.compose(t,D)(e),n.getItem(e).then(a.compose(t,R))["catch"](a.compose(t,N))}}function F(e,t){return{type:v,payload:{enable:e,isOwn:t}}}function O(e){return{type:y,payload:e}}function z(e){return{type:b,error:e}}function q(e,t){return function(i,o){if(i(F(e,t)),!t)return Promise.resolve();var r=a.compose(n.updateItem,T({is_media_mode_enabled:!!e}));return r(o().favorites.collection).then(a.compose(i,O))["catch"](a.compose(i,z))}}function $(e,t){return function(n){return o.removeFromCollection(e,t).then(function(){n({type:c,payload:{favoriteId:e,collectionId:t}}),n({type:r,payload:t})})}}function U(e,t){return function(n,a){n({type:k,payload:{itemIndex:e}});var i=a().favorites.list[e].id;return o.updateTitle(i,t).then(function(t){return n({type:w,payload:{itemIndex:e,title:t.title}})})["catch"](function(e){return n({type:x,error:e})})}}function H(e,t){return function(n,a){return n({type:C,payload:{itemIndex:e}}),o.updateItem({id:a().favorites.list[e].id,description:t}).then(function(t){return n({type:L,payload:{itemIndex:e,description:t.description}})})["catch"](function(e){return n({type:I,error:e})})}}var G=a.curry(function(e,t){return e?a(e).map(function(e){return a.find(t,function(t){return t.id==e})}).compact().value():t});return{removeFromCollection:$,changeHoverItem:s,cleanList:S,hideMarkers:E,getListStart:P,getListSuccess:j,getListFailure:M,getList:A,getCollectionStart:D,getCollectionSuccess:R,getCollectionFailure:N,getCollection:B,changeMediaModeStart:F,changeMediaModeSuccess:O,changeMediaModeFailure:z,changeMediaMode:q,updateTitle:U,updateDescription:H}},t.exports._args=["$dgApi","$photoApi","$collectionsApi","$favoritesApi"]},{"../../../helpers/favorites":"/helpers/favorites.js","../actions/collections":90,"../actions/favorites":91,lodash:"lodash"}],89:[function(e,t,n){"use strict";var a=e("../actions/widget"),i=a.WIDGET_SHOW_DROP_DOWN,o=a.WIDGET_UPDATE_FAVORITE,r=a.WIDGET_SET_CREATING_MODE,s=a.WIDGET_RESET;t.exports=function(e){function t(e){return{type:i,payload:e}}function n(e){return{type:r,payload:e}}function a(t){return function(n){return e.getCachedEntity(t).then(function(e){n({type:o,payload:e})})}}function l(t,n){return function(a){return e.addToCollection(t,n).then(function(e){a({type:o,payload:e})})}}function c(t,n){return function(a){return e.removeFromCollection(t,n).then(function(e){a({type:o,payload:e})})}}function u(){return{type:s}}return{showDropDown:t,setCreatingMode:n,loadFavorite:a,addToCollection:l,removeFromCollection:c,reset:u}},t.exports._args=["$favoritesApi"]},{"../actions/widget":92}],90:[function(e,t,n){"use strict";n.INCREMENT_FAVORITES_COUNT="COLLECTIONS/INCREMENT_FAVORITES_COUNT",n.DECREMENT_FAVORITES_COUNT="COLLECTIONS/DECREMENT_FAVORITES_COUNT",n.SHOW_COVER_UPLOADER_ITEM="COLLECTIONS/SHOW_COVER_UPLOADER_ITEM",n.SET_SHOWED_COVER_TOOLS_ITEM="COLLECTIONS/SET_SHOWED_COVER_TOOLS_ITEM",n.SET_SHOWED_SHARE_TOOLS_ITEM="COLLECTIONS/SET_SHOWED_SHARE_TOOLS_ITEM",n.SET_RENAMED_ITEM="COLLECTIONS/SET_RENAMED_ITEM",n.CHANGE_RENAMED_VALUE="COLLECTIONS/CHANGE_RENAMED_VALUE",n.CHANGE_ACTIVE="COLLECTIONS/CHANGE_ACTIVE",n.CHANGE_ADD_MODE="COLLECTIONS/CHANGE_ADD_MODE",n.CHANGE_ADD_VALUE="COLLECTIONS/CHANGE_ADD_VALUE",n.LOAD_LIST="COLLECTIONS/LOAD_LIST",n.LOAD_LIST_SUCCESS="COLLECTIONS/LOAD_LIST_SUCCESS",n.LOAD_LIST_FAILURE="COLLECTIONS/LOAD_LIST_FAILURE",n.ADD_ITEM="COLLECTIONS/ADD_ITEM",n.ADD_ITEM_SUCCESS="COLLECTIONS/ADD_ITEM_SUCCESS",n.ADD_ITEM_FAILURE="COLLECTIONS/ADD_ITEM_FAILURE",n.DELETE_ITEM="COLLECTIONS/DELETE_ITEM",n.DELETE_ITEM_SUCCESS="COLLECTIONS/DELETE_ITEM_SUCCESS",n.DELETE_ITEM_FAILURE="COLLECTIONS/DELETE_ITEM_FAILURE",n.RESTORE_ITEM="COLLECTIONS/RESTORE_ITEM",n.RESTORE_ITEM_SUCCESS="COLLECTIONS/RESTORE_ITEM_SUCCESS",n.RESTORE_ITEM_FAILURE="COLLECTIONS/RESTORE_ITEM_FAILURE",n.UPDATE_ITEM="COLLECTIONS/UPDATE_ITEM",n.UPDATE_ITEM_SUCCESS="COLLECTIONS/UPDATE_ITEM_SUCCESS",n.UPDATE_ITEM_FAILURE="COLLECTIONS/UPDATE_ITEM_FAILURE",n.SHARE_ITEM="COLLECTIONS/SHARE_ITEM",n.SHARE_ITEM_SUCCESS="COLLECTIONS/SHARE_ITEM_SUCCESS",n.SHARE_ITEM_FAILURE="COLLECTIONS/SHARE_ITEM_FAILURE",n.UPLOAD_ITEM_COVER="COLLECTIONS/UPLOAD_ITEM_COVER",n.UPLOAD_ITEM_COVER_SUCCESS="COLLECTIONS/UPLOAD_ITEM_COVER_SUCCESS",n.UPLOAD_ITEM_COVER_FAILURE="COLLECTIONS/UPLOAD_ITEM_COVER_FAILURE",n.SUBSCRIBE_ITEM="COLLECTIONS/SUBSCRIBE_ITEM",n.SUBSCRIBE_ITEM_SUCCESS="COLLECTIONS/SUBSCRIBE_ITEM_SUCCESS",n.SUBSCRIBE_ITEM_FAILURE="COLLECTIONS/SUBSCRIBE_ITEM_FAILURE",n.RESET="COLLECTIONS/RESET"},{}],91:[function(e,t,n){"use strict";n.CHANGE_HOVER_ITEM="FAVORITES/CHANGE_HOVER_ITEM",n.REMOVE="FAVORITES/REMOVE",n.HIDE_MARKERS="FAVORITES/HIDE_MARKERS",n.CLEAN_LIST="FAVORITES/CLEAN_LIST",n.GET_LIST="FAVORITES/GET_LIST",n.GET_LIST_SUCCESS="FAVORITES/GET_LIST_SUCCESS",n.GET_LIST_FAILURE="FAVORITES/GET_LIST_FAILURE",n.GET_COLLECTION="FAVORITES/GET_COLLECTION",n.GET_COLLECTION_SUCCESS="FAVORITES/GET_COLLECTION_SUCCESS",n.GET_COLLECTION_FAILURE="FAVORITES/GET_COLLECTION_FAILURE",n.CHANGE_MEDIA_MODE="FAVORITES/CHANGE_MEDIA_MODE",n.CHANGE_MEDIA_MODE_SUCCESS="FAVORITES/CHANGE_MEDIA_MODE_SUCCESS",n.CHANGE_MEDIA_MODE_FAILURE="FAVORITES/CHANGE_MEDIA_MODE_FAILURE",n.UPDATE_TITLE="FAVORITES/UPDATE_TITLE",n.UPDATE_TITLE_SUCCESS="FAVORITES/UPDATE_TITLE_SUCCESS",n.UPDATE_TITLE_FAILURE="FAVORITES/UPDATE_TITLE_FAILURE",n.UPDATE_DESCRIPTION="FAVORITES/UPDATE_DESCRIPTION",n.UPDATE_DESCRIPTION_SUCCESS="FAVORITES/UPDATE_DESCRIPTION_SUCCESS",n.UPDATE_DESCRIPTION_FAILURE="FAVORITES/UPDATE_DESCRIPTION_FAILURE"},{}],92:[function(e,t,n){"use strict";n.WIDGET_SHOW_DROP_DOWN="FAVORITES/WIDGET_SHOW_DROP_DOWN",n.WIDGET_UPDATE_FAVORITE="FAVORITES/WIDGET_UPDATE_FAVORITE",n.WIDGET_SET_CREATING_MODE="FAVORITES/WIDGET_SET_CREATING_MODE",n.WIDGET_RESET="FAVORITES/WIDGET_RESET"},{}],93:[function(e,t,n){"use strict";function a(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments[2],a=[].concat(e);return function(){return function(e){var o=i.throttle(e,t,n);return function(t){return-1===a.indexOf(t.type)?e(t):o(t)}}}}var i=e("lodash");t.exports=a},{lodash:"lodash"}],94:[function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){var e=arguments.length<=0||void 0===arguments[0]?U:arguments[0],t=arguments[1],n=t.type,o=t.payload,s=t.meta,h=t.error;switch(n){case f:return r({},e,{showedCoverUploader:o});case p:var H=o>=0?r({},e.favorites,{list:l(e.favorites.list,o,r({},e.favorites.list[o],{uploadedCover:void 0,uploadingCover:void 0}))}):e.favorites;return r({},e,{favorites:H,showedCoveredToolsItem:o,showedCoverUploader:!1});case m:return r({},e,{renamedItem:o.index,renamedValue:o.value});case g:return r({},e,{renamedValue:o});case v:return r({},e,{active:o});case y:return r({},e,{addMode:o});case b:return r({},e,{addValue:o});case k:return r({},e,i({},o.name,r({},e[o.name],{loaded:!1,loading:!0,loadError:void 0})));case w:return r({},e,i({},o.name,r({},e[o.name],{loaded:!0,loading:!1,list:void 0===o.list?[]:o.list})));case x:return r({},e,i({},o.name,r({},e[o.name],{loaded:!1,loading:!1,loadError:h})));case C:return r({},e,i({},o.name,r({},e[o.name],{added:!1,adding:!0,addError:void 0})));case L:return r({},e,i({addValue:""},o.name,r({},e[o.name],{added:!0,adding:!1,list:[o.item].concat(a(e[o.name].list))})));case I:return r({},e,i({},o.name,r({},e[o.name],{added:!1,adding:!1,addError:h})));case T:return r({},e,i({},o.name,r({},e[o.name],{list:l(e[o.name].list,o.index,r({},e[o.name].list[o.index],{deleted:!1,deleting:!0,deleteError:void 0}))})));case S:return r({},e,i({},o.name,r({},e[o.name],{list:s.canRestore?l(e[o.name].list,o.index,r({},e[o.name].list[o.index],{deleted:!0,deleting:!1})):c(e[o.name].list,o.index)})));case E:return r({},e,i({},o.name,r({},e[o.name],{list:l(e[o.name].list,o.index,r({},e[o.name].list[o.index],{deleted:!1,deleting:!1,deleteError:h}))})));case P:return r({},e,i({},o.name,r({},e[o.name],{list:l(e[o.name].list,o.index,r({},e[o.name].list[o.index],{restoring:!0,restoreError:void 0}))})));case j:return r({},e,i({},o.name,r({},e[o.name],{list:l(e[o.name].list,o.index,r({},e[o.name].list[o.index],o.item,{deleted:!1,restoring:!1}))})));case M:return r({},e,i({},o.name,r({},e[o.name],{list:l(e[o.name].list,o.index,r({},e[o.name].list[o.index],{restoring:!1,restoreError:h}))})));case A:return r({},e,i({},o.name,r({},e[o.name],{list:l(e[o.name].list,o.index,r({},e[o.name].list[o.index],{updated:!1,updating:!0,updateError:void 0}))})));case D:return r({},e,i({},o.name,r({},e[o.name],{list:l(e[o.name].list,o.index,r({},e[o.name].list[o.index],o.item,{updated:!0,updating:!1}))})));case R:return r({},e,i({},o.name,r({},e[o.name],{list:l(e[o.name].list,o.index,r({},e[o.name].list[o.index],{updated:!1,updating:!1,updateError:h}))})));case O:return r({},e,{favorites:r({},e.favorites,{list:l(e.favorites.list,o.index,r({},e.favorites.list[o.index],{uploadCoverName:o.fileName,uploadedCover:!1,uploadingCover:!0,uploadCoverError:void 0}))})});case z:return r({},e,{showedCoveredToolsItem:U.showedCoveredToolsItem,favorites:r({},e.favorites,{list:l(e.favorites.list,o.index,r({},e.favorites.list[o.index],{uploadedCover:!0,uploadingCover:!1}))})});case q:return r({},e,{favorites:r({},e.favorites,{list:l(e.favorites.list,o.index,r({},e.favorites.list[o.index],{uploadedCover:!1,uploadingCover:!1,uploadCoverError:h}))})});case $:return r({},U);case _:case N:case B:case F:return r({},e,{favorites:u(e.favorites,t),recommended:u(e.recommended,t),subscribed:u(e.subscribed,t)});default:return r({},e,{subscribed:d(e.subscribed,t,s&&s.changeableList),recommended:d(e.recommended,t)})}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=e("../utils"),l=s.insert,c=s.drop,u=e("./collectionsShare"),d=e("./collectionsSubscribe"),h=e("../actions/collections"),p=h.SET_SHOWED_COVER_TOOLS_ITEM,f=h.SHOW_COVER_UPLOADER_ITEM,m=h.SET_RENAMED_ITEM,g=h.CHANGE_RENAMED_VALUE,_=h.SET_SHOWED_SHARE_TOOLS_ITEM,v=h.CHANGE_ACTIVE,y=h.CHANGE_ADD_MODE,b=h.CHANGE_ADD_VALUE,k=h.LOAD_LIST,w=h.LOAD_LIST_SUCCESS,x=h.LOAD_LIST_FAILURE,C=h.ADD_ITEM,L=h.ADD_ITEM_SUCCESS,I=h.ADD_ITEM_FAILURE,T=h.DELETE_ITEM,S=h.DELETE_ITEM_SUCCESS,E=h.DELETE_ITEM_FAILURE,P=h.RESTORE_ITEM,j=h.RESTORE_ITEM_SUCCESS,M=h.RESTORE_ITEM_FAILURE,A=h.UPDATE_ITEM,D=h.UPDATE_ITEM_SUCCESS,R=h.UPDATE_ITEM_FAILURE,N=h.SHARE_ITEM,B=h.SHARE_ITEM_SUCCESS,F=h.SHARE_ITEM_FAILURE,O=h.UPLOAD_ITEM_COVER,z=h.UPLOAD_ITEM_COVER_SUCCESS,q=h.UPLOAD_ITEM_COVER_FAILURE,$=h.RESET,U={active:"favorites",showedCoveredToolsItem:-1,renamedItem:-1,renamedValue:""};t.exports=o},{"../actions/collections":90,"../utils":101,"./collectionsShare":95,"./collectionsSubscribe":96}],95:[function(e,t,n){"use strict";function a(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1],n=t.type,a=t.payload,r=t.error;switch(n){case s:return i({},e,{list:o.map(e.list,function(e){return e.id==a.id?i({},e,{showShare:!0,shortUrl:a.shortUrl}):e.showShare?i({},e,{showShare:!1}):e})});case l:return i({},e,{list:o.map(e.list,function(e){return e.id==a.id?i({},e,{showShare:!0,shared:!1,sharing:!0,shareError:void 0}):e.showShare?i({},e,{showShare:!1}):e})});case c:return i({},e,{list:o.map(e.list,function(e){return e.id==a.id?i({},e,a.item,{showShare:!0,shared:!0,sharing:!1}):e})});case u:return i({},e,{list:o.map(e.list,function(e){return e.id==a.id?i({},e,{showShare:!0,shared:!1,sharing:!1,shareError:r}):e})});default:return e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=e("lodash"),r=e("../actions/collections"),s=r.SET_SHOWED_SHARE_TOOLS_ITEM,l=r.SHARE_ITEM,c=r.SHARE_ITEM_SUCCESS,u=r.SHARE_ITEM_FAILURE;t.exports=a},{"../actions/collections":90,lodash:"lodash"}],96:[function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(){var e=arguments.length<=0||void 0===arguments[0]?d:arguments[0],t=arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],i=t.type,s=t.payload,h=t.error;switch(i){case l:return o({},e,{list:r.map(e.list,function(e){return e.id==s.id?o({},e,{subscribed:!1,subscribing:!0,subscribeError:void 0}):e})});case c:return n&&s.item.is_subscribed?o({},e,{list:[s.item].concat(a(e.list.filter(function(e){return e.is_subscribed})))}):o({},e,{list:r.reduce(e.list,function(e,t){return t.id==s.id?n&&!s.item.is_subscribed?e:[].concat(a(e),[o({},t,s.item,{subscribed:!0,subscribing:!1})]):[].concat(a(e),[t])},[])});case u:return o({},e,{list:r.map(e.list,function(e){return e.id==s.id?o({},e,{subscribed:!1,subscribing:!1,subscribeError:h}):e})});default:return e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=e("lodash"),s=e("../actions/collections"),l=s.SUBSCRIBE_ITEM,c=s.SUBSCRIBE_ITEM_SUCCESS,u=s.SUBSCRIBE_ITEM_FAILURE,d={};t.exports=i},{"../actions/collections":90,lodash:"lodash"}],97:[function(e,t,n){"use strict";function a(){var e=arguments.length<=0||void 0===arguments[0]?A:arguments[0],t=arguments[1],n=t.type,a=t.payload,r=t.error;switch(n){case p:return i({},e,{list:A.list});case h:return i({},e,{hideMarkers:a});case u:return i({},e,{list:a.hovered?o.map(e.list,function(e,t){return a.index===t?i({},e,{hovered:!0}):e.hovered?i({},e,{hovered:!1}):e}):l(e.list,a.index,i({},e.list[a.index],{hovered:!1}))});case f:return i({},e,{listLoaded:!1,listLoading:!0,listError:void 0});case m:var c=void 0===a?A.list:a;return i({},e,{listLoaded:!0,listLoading:!1,list:c});case g:return i({},e,{listLoaded:!1,listLoading:!1,listError:r});case _:return i({},e,{collectionLoaded:!1,collectionLoading:!0,collectionError:void 0,id:a});case v:return i({},e,{collectionLoaded:!0,collectionLoading:!1,collection:a});case y:return i({},e,{collectionLoaded:!1,collectionLoading:!1,collectionError:r});case b:return a.isOwn?i({},e,{mediaModeChanged:!1,mediaModeChanging:!0,mediaModeError:void 0}):i({},e,{collection:i({},e.collection,{is_media_mode_enabled:a.enable})});case k:var E=void 0===a?e.collection:a;return i({},e,{mediaModeChanged:!0,mediaModeChanging:!1,collection:E});case w:return i({},e,{mediaModeChanged:!1,mediaModeChanging:!1,mediaModeError:r});case d:if(a.collectionId!=e.collection.id)return e;var D=o.findIndex(e.list,function(e){return e.id==a.favoriteId});return i({},e,{list:s(e.list,D)});case x:var R=a.itemIndex;return e.list=l(e.list,R,i({},e.list[R],{titleChanging:!0,titleError:void 0})),e;case C:var N=a.itemIndex,B=a.title;return e.list=l(e.list,N,i({},e.list[N],{titleChanging:!1,title:B})),e;case L:var F=a.itemIndex;return e.list=l(e.list,F,i({},e.list[F],{titleChanging:!1,titleError:r})),e;case I:var O=a.itemIndex;return e.list=l(e.list,O,i({},e.list[O],{descriptionChanging:!0,descriptionError:void 0})),e;case T:var z=a.itemIndex,q=a.description;return e.list=l(e.list,z,i({},e.list[z],{descriptionChanging:!1,description:q})),e;case S:var $=a.itemIndex;return e.list=l(e.list,$,i({},e.list[$],{descriptionChanging:!1,descriptionError:r})),e;case P:return i({},e,{collection:i({},e.collection,{subscribed:!1,subscribing:!0,subscribeError:void 0})});case j:return i({},e,{collection:i({},e.collection,a.item,{subscribed:!0,subscribing:!1})});case M:return i({},e,{collection:i({},e.collection,{subscribed:!1,subscribing:!1,subscribeError:r})});default:return e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=e("lodash"),r=e("../utils"),s=r.drop,l=r.insert,c=e("../actions/favorites"),u=c.CHANGE_HOVER_ITEM,d=c.REMOVE,h=c.HIDE_MARKERS,p=c.CLEAN_LIST,f=c.GET_LIST,m=c.GET_LIST_SUCCESS,g=c.GET_LIST_FAILURE,_=c.GET_COLLECTION,v=c.GET_COLLECTION_SUCCESS,y=c.GET_COLLECTION_FAILURE,b=c.CHANGE_MEDIA_MODE,k=c.CHANGE_MEDIA_MODE_SUCCESS,w=c.CHANGE_MEDIA_MODE_FAILURE,x=c.UPDATE_TITLE,C=c.UPDATE_TITLE_SUCCESS,L=c.UPDATE_TITLE_FAILURE,I=c.UPDATE_DESCRIPTION,T=c.UPDATE_DESCRIPTION_SUCCESS,S=c.UPDATE_DESCRIPTION_FAILURE,E=e("../actions/collections"),P=E.SUBSCRIBE_ITEM,j=E.SUBSCRIBE_ITEM_SUCCESS,M=E.SUBSCRIBE_ITEM_FAILURE,A={list:[],collection:{}};t.exports={"default":a,defaultState:A}},{"../actions/collections":90,"../actions/favorites":91,"../utils":101,lodash:"lodash"}],98:[function(e,t,n){"use strict";var a=e("redux"),i=e("./favorites")["default"],o=e("./collections"),r=e("./widget"),s=a.combineReducers({collections:o,favorites:i,widget:r});t.exports=s},{"./collections":94,"./favorites":97,"./widget":99,redux:465}],99:[function(e,t,n){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=e("../actions/widget"),o=i.WIDGET_SHOW_DROP_DOWN,r=i.WIDGET_UPDATE_FAVORITE,s=i.WIDGET_SET_CREATING_MODE,l=i.WIDGET_RESET;t.exports=function(e,t){var n=t.type,i=t.payload,c=a({showDropDown:!1,creatingMode:!1},e);switch(n){case o:return a({},c,{showDropDown:i});case s:return a({},c,{creatingMode:i});case r:return a({},c,{favorite:Array.isArray(i)?i[0]:i});case l:return{showDropDown:!1,creatingMode:!1};default:return c}}},{"../actions/widget":92}],100:[function(e,t,n){"use strict";function a(e){var t=u([r,s([c],100)]);return i.applyMiddleware.apply(void 0,t)(i.createStore)(o,e)}var i=e("redux"),o=e("./reducers"),r=e("redux-thunk")["default"],s=e("./middlewares/throttle-actions"),l=e("./actions/favorites"),c=l.CHANGE_HOVER_ITEM,u=i.compose(function(e){return e});t.exports=a},{"./actions/favorites":91,"./middlewares/throttle-actions":93,"./reducers":98,redux:465,"redux-logger":458,"redux-thunk":459}],101:[function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t,n){return Object.keys(e).reduce(function(n,a,i){return t(n,e[a],a,i)},n)}function o(e,t){return i(e,function(e,n,i,o){return Object.assign({},e,a({},i,t(n,i,o)))},{})}function r(e,t){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return[].concat(e.slice(0,t),e.slice(t+n))}function s(e,t,n){var a=e.slice(0,t),i=e.slice(t+1);return[].concat(a,n,i)}var l=e("lodash"),c=l.curry,u=l.map;n.objectReduce=i,n.objectMap=o,n.drop=r,n.insert=s;var d=c(function(e,t){return u(t,e)});n.map=d;var h=c(function(e,t){return e.test(t)});n.test=h,n.isUUID=h(/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/i)},{lodash:"lodash"}],102:[function(e,t,n){"use strict";var a=e("lodash"),i=e("node-uuid"),o=e("moment"),r=e("../../helpers/firm"),s=["adm_div","name","type","subtype","routes","links","address","address_name","contact_groups","name_ex","rubrics","building_name","purpose_name","group","floors"];t.exports={withPointObject:function(e,t,n){return{id:i.v4(),type:"object",created_at:o().format(),updated_at:o().format(),project_id:parseInt(t,10),title:n?""+n:"",item:{id:r.getStaticId(e.id),object_type:e.type,point:e.clickPoint||e.point,sourceData:a.pick(e,s)}}},noPointObject:function(e,t,n){return{id:i.v4(),type:"object",created_at:o().format(),updated_at:o().format(),project_id:parseInt(t,10),title:n?""+n:"",item:{id:r.getStaticId(e.id),object_type:e.type,sourceData:a.pick(e,s)}}},point:function(e,t,n){return{id:i.v4(),type:"point",created_at:o().format(),updated_at:o().format(),project_id:parseInt(t,10),title:n?""+n:"",item:{point:e.clickPoint||e.point,sourceData:a.pick(e,["point"])}}}}},{"../../helpers/firm":"/helpers/firm.js",lodash:"lodash",moment:"moment","node-uuid":456}],103:[function(e,t,n){"use strict";var a=e("lodash"),i="favorites",o=void 0;t.exports=function(e,t,n){function r(){o=e.config.defaultCity,this._data=[];var t=n.getItem(i);t&&this._warmup(t)}var s=r.prototype;return s._add=function(e,t){var n=this._getProject(e.project_id);n.items.push(e),t(null,e)},s._addProject=function(e){var t=a.findWhere(this._data,{project_id:e.project_id});return t?this:(this._data.push({project_id:e.project_id,items:[]}),this)},s._getProject=function(e){var n=parseInt(e||t.getRegion().id,10)||o;if(!n)return null;var i=a.findWhere(this._data,{project_id:n});return i||(this._addProject({project_id:n,items:[]}),i=a.findWhere(this._data,{project_id:n})),i},s._warmup=function(e){var t;try{t=JSON.parse(e)}catch(o){n.removeItem(i),t=[]}a.forEach(t,function(e){this._addProject(e);var t=[];if(a.forEach(e.items,function(e,n){this._add(e,function(e){e&&422==e.status&&t.push(+n)})},this),t.length)for(var n=t.length-1;n>=0;n--)e.items.splice(n,1)},this)},s.clear=function(){this._data=[],n.removeItem(i)},new r},t.exports._args=["app","$regionManager","$localStorage"]},{lodash:"lodash"}],104:[function(e,t,n){"use strict";var a=e("lodash"),i=e("../../../lib/request2");t.exports=function(e,t,n){function o(e){return _.url+"favorites"+(e?"/"+e:"")}function r(){return a.get(n.getAuthorizedUserSync(),"authorizationToken")}function s(e){return e.project_id||(e.project_id=t.getRegion().id),i("post",o()).query({session_token:r(),expand:"collections"}).send(e).end().then(function(e){return a.get(e,"body")})}function l(e){return i("delete",o(e)).query({session_token:r()}).end().then(function(e){return a.get(e,"body")})}function c(e){return i("put",o(e.id)).query({session_token:r(),expand:"collections"}).send(e).end().then(function(e){return a.get(e,"body")})}function u(){return i("get",o()).query({session_token:r(),expand:"collections",project_id:t.getRegion().id}).then(function(e){return a.get(e,"body")})}function d(e){return i("get",o(e)).query({session_token:r(),expand:"collections"}).then(function(e){return a.get(e,"body")})}function h(e){return i("get",o()).query({session_token:r(),object_id:e,expand:"collections"}).then(function(e){return a.get(e,"body")})}function p(e){return i("post",o("sync")).query({session_token:r(),expand:"collections"}).send(e).end().then(function(e){return a.get(e,"body")})}function f(e,t){return i("post",o(e+"/collections")).query({session_token:r()}).send({id:t}).end().then(function(e){return a.get(e,"body")})}function m(e,t){return i("delete",o(e+"/collections/"+t)).query({session_token:r()}).end().then(function(){return!0})}function g(e){var t={expand:"favorites"};return n.isAuthorized()&&(t.session_token=r()),i("get",_.url+"/collections/"+e).query(t).then(function(e){return a.get(e,"body")})}var _=e.config.group("favorites");return{add:s,remove:l,updateItem:c,getList:u,getById:d,getByObjectId:h,sync:p,addToCollection:f,removeFromCollection:m,getSharedCollection:g}},t.exports._args=["app","$regionManager","$authorization"]},{"../../../lib/request2":"/lib/request2.js",lodash:"lodash"}],105:[function(e,t,n){t.exports=[{cityselect:{regions:["ru","ua","kz"]},geoobjects:{},traffic:{}},{time:{weekFirstDayOffset:1,"short":"HH:mm",is12h:!1,dashboard:"HH:mm, D MMMM, dddd"},currency:{id:"RUB",symbol:"руб.",standard:"# ##0,00 ¤","short":"# ##0,## ¤"},number:{standard:"# ##0,###","short":"# ##0,###"},address:{order:"straight"},string:{quotationStart:"«",quotationEnd:"»"}},{}]},{}],106:[function(e,t,n){function a(e){return e.charAt(0).toUpperCase()==e.charAt(0)}var i=e("lodash"),o=req("lib/partialString"),r=req("helpers/string");t.exports=function(e){function t(t,n){var a=e.helpers[t.name];return a(t.value,{hash:n})}function n(e,n){var s=o(e);return i.each(s.partials,function(e){var i=e.prefix||e.name,o=r.uncapitalize(i),l=n[o];if(a(e.name))s.replace(e,t(e,l));else{if("function"!=typeof l)throw Error("Invalid resolver for i18n partial "+i);s.replace(e,l(e.value))}}),""+s}function s(e,t,a,i){var o=a.slice(0,e.length),s=e.apply(null,o),l=e.length-(t?1:0);return a.length>l&&(s=r.format(s,a.slice(l))),n(s,i)}function l(e,t){var n=[].slice.call(arguments,2),a=n.pop(),o={};return i.each(a.hash,function(e,t){if(/\w+__/.test(t)){var n=t.split("__"),a=o[n[0]]=o[n[0]]||{};a[n[1]]=e}else o[t]=e}),s(e,t,n,o)}function c(e,t){var n=[].slice.call(arguments,2),a=n.pop();return s(e,t,n,a)}return{htRuntime:c,htHelper:l}}},{lodash:"lodash"}],107:[function(e,t,n){function a(e){return!!e}function i(e){e=e||{};var t=e.locale_data;return a(t)&&(a(t.head)&&a(t.msgs)?this.locale_data=t:this.parse_locale_data(t)),this}var o=e("lodash");i.prototype.isInited=function(){return a(this.locale_data)&&this.locale_data.msgs&&o.keys(this.locale_data.msgs).length},i.context_glue="",i.prototype.npgettext=function(e,t,n,o){if(!t)return"";var r=a(n),s=a(e)?e+i.context_glue+t:t,l=this.locale_data.msgs[s];l&&(l=l.slice(1)),l&&0!=l.length||(l=[t,n]);var c=l[0],u=this.locale_data.head;if(r){var d;if(u.plural_func){var h=u.plural_func(o);h.plural||(h.plural=0),h.nplural||(h.nplural=0),h.nplural<=h.plural&&(h.plural=0),d=h.plural}else d=1!=o?1:0;a(l[d])&&(c=l[d])}return c},i.prototype.parse_locale_data=function(e){var t={head:{},msgs:{}};o.each(e,function(e,n){""==n?o.each(e,function(e,n){var a=n.toLowerCase();t.head[a]=e}):t.msgs[n]=e});var n=t.head;if(a(n["plural-forms"])&&void 0===n.plural_func){var i=n["plural-forms"],r=/^(\s*nplurals\s*=\s*[0-9]+\s*;\s*plural\s*=\s*(?:\s|[-\?\|&=!<>+*\/%:;a-zA-Z0-9_()])+)/m;if(!r.test(i))throw Error("Syntax error in language file. Plural-Forms header is invalid ["+i+"]");var s=n["plural-forms"];/;\s*$/.test(s)||(s=s.concat(";"));var l="var plural; var nplurals; "+s+' return { "nplural" : nplurals, "plural" : (plural === true ? 1 : plural ? plural : 0) };';n.plural_func=Function("n",l)}else void 0===n.plural_func&&(n.plural_func=function(e){var t=1!=e?1:0;return{nplural:2,plural:t}});this.locale_data=t},t.exports=i},{lodash:"lodash"}],108:[function(e,t,n){function a(e){var t=null;return t=d?u.requirePrivate("stamp"):data.stamp,c.compact(["assets",t,"l10n",e+".js"]).join("/")}function i(e,t){var n=a(e);h("/"+n,function(){var n=window.localeData;t(n&&n[e])})}function o(e,t){var n=window.localeData;n&&n[e]?t(n[e]):i(e,t)}function r(e,t){var n=a(e),i=u.requirePublic(n).localeData;t(i&&i[e])}function s(e,t){if(e=e.toLowerCase(),TEST)return l(t);var n=d?r:o;return n(e,t),null}function l(t){var n=req("l10n/country/settings.js"),a=e("./defaults.js");return t([c.merge({},a[0],n),a[1]])}var c=e("lodash"),u=e("slot/env"),d=u.isServer,h=e("slot/lib/loadScript");t.exports=s},{"./defaults.js":105,lodash:"lodash","slot/env":"slot/env","slot/lib/loadScript":"slot/lib/loadScript"}],109:[function(e,t,n){var a=e("bluebird"),i=e("lodash");t.exports=function(e,t,n){function o(e){e=e||{},this.regionId=e.regionId}function r(e,t){var n=[];return i.each(i.get(e,"data.items"),function(e){i.each(i.get(e,"children.items"),function(e){var a=i.get(e,"orgs.items");t&&a&&(a=i.filter(a,"is_winner")),n=n.concat(i.map(a,function(e){return e.filial_id}))})}),n}function s(e,t,o){return new a(function(a,r){n.firms.profiles(i.uniq(t),function(t,n){return n&&n.data?(i.each(i.get(e,"data.items"),function(e){i.each(i.get(e,"children.items"),function(e){var t=i.get(e,"orgs.items");i.remove(t,function(e){return o&&!e.is_winner}),i.each(t,function(t){t.profile=i.find(n.data,"id",t.filial_id),t.nomination=e.code})})}),a(e)):r(t)})})}function l(e,n){return new a(function(a,o){t[e](n,function(t,l){if(l||(t={error:"No reviews data received"}),t)o(t);else if("loadData"==e){var c=l.is_final,u=[];if(c&&i.remove(i.get(l,"data.items"),"code","all"),u=r(l,c),n.onlyFirmsIds)return void a(u);a(s(l,u,c))}else a(l)})})}var c={};return o.prototype.loadData=function(e){var t={region_id:this.regionId};return e&&(t.session_token=e),l("loadData",t)},o.prototype.getWinnersIds=function(){return c[this.regionId]||(c[this.regionId]=l("loadData",{region_id:this.regionId,onlyFirmsIds:!0})),c[this.regionId]},o.prototype.registerVote=function(e,t){var n={region_id:this.regionId,item_id:e,session_token:t};return l("registerVote",n)},o},t.exports._args=["app","$awardApi","$dgApi"]},{bluebird:384,lodash:"lodash"}],110:[function(e,t,n){var a=e("lodash"),i=req("helpers/firm"),o=req("helpers/stationsNear"),r=req("helpers/station"),s=req("helpers/getInt32"),l=e("bluebird");t.exports=function(e,t,n,c,u,d){function h(e,t){t=t||{},this.id=e,this.bss=t.bss||{},this.is_poi=t.is_poi,this.includeDeleted=t.includeDeleted||!1}return h.prototype.get=function(e){switch(e){case"data":return this._data;case"rubrics":return this.get("data").rubrics;case"mainRubricName":return i.getMainRubric(this._data);case"stopType":return this._getStopType();default:return null}},h.prototype._getStopType=function(){var e=this._data&&this._data.links&&this._data.links.nearest_stations,t=o.getRawClosestStation(e);return t?r.getTransportType(t):null},h.prototype.hasRubric=function(e){return a.any(this.get("rubrics"),function(t){return s(t.id)==e})},h.prototype.hasRubricsFromList=function(e){var t=a.map(this.get("rubrics"),function(e){return s(e.id)});return a.intersection(t,e).length>=1},h.prototype.promise=function(){var e=this,o=new l(function(n,i){var o=a.cloneDeep({includeDeleted:e.includeDeleted});e.is_poi&&(o.is_poi=e.is_poi,e.bss.poiHash&&(o.hash=e.bss.poiHash)),e._request=t.firms.profile(e.id,o,function(e,t){e=e||t&&t.error||!t&&{error:"Empty API data"},e?i(e):n(t)})}),r=new l(function(t){var o=i.getStaticId(e.id);e._photoRequest=n.getFirmInfo(o,function(e,n){var i=a.get(n,"[0].albums");return e||!i?t():t(i)})});return l.props({firm:o,photo:r}).then(function(t){var n=t.firm;return t.photo&&(n.photoAlbums=t.photo),c.get("businessLandingDemoMode")?e._data=i.simulateAdvertisement(n,u):e._data=n,n})},h.prototype.dispose=function(){this._request&&this._request.cancel(),this._apartmentsRequest&&this._apartmentsRequest.cancel(),this._photoRequest&&this._photoRequest.cancel()},h.prototype.loadApartments=function(){var e=this;return new l(function(t){e._apartmentsRequest=d.firmHaveAppartments(e._data.org.id,function(n,a){a&&a.apartments_count>0&&(e._data.hasApartments=!0),t(e._data.hasApartments)})})},h},t.exports._args=["app","$dgApi","$photoApi","$featureSwitcher","$i18n","$apartmentsApi"]},{bluebird:384,lodash:"lodash"}],111:[function(e,t,n){"use strict";var a=e("lodash"),i=e("bluebird"),o={},r={};t.exports=function(e,t){function n(e){this._complexId=e,this._data={},this._firms={}}function s(e,n){return new i(function(a,i){var o={regionId:n._regionId,complexId:n._complexId,fields:n._fields};n._request=t.doRequest(e,o,function(e,t){e||t||(e={error:"Empty API data"}),e?i(e):t.error?i(t):(n._data=t,a(t))})})}return n.prototype.list=function(e){return this._regionId=e,s("getFloorsList",this)},n.prototype.loadComplex=function(){var t=this,n=this._complexId;return o[n]||(this._fields=e.isClient?["floorGeometries","outdoors"]:[],o[n]=s("getComplexData",this)),o[n].then(function(e){return t._setData(e)})},n.prototype.getLibModel=function(){var e=this._complexId;return r[e]||(r[e]=new floors.Model(this._data)),r[e]},n.prototype.getFloorName=function(e){return a.get(this._firms[e],"floorName")},n.prototype.getMetaRubrics=function(){return this._data.metaRubrics},n.prototype._setData=function(e){this._data=e,this._firms=e.entities.reduce(function(e,t){
return t.firmId&&(e[t.firmId]=t),e},{})},n.prototype.dispose=function(){this._request&&this._request.cancel()},n},t.exports._args=["app","$floorsApi"]},{bluebird:384,lodash:"lodash"}],112:[function(e,t,n){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=e("lodash"),o=req("lib/geo/lonlat"),r=e("bluebird");t.exports=function(e,t,n){function s(t,n){var a=e.config["geocoder.objects2ZoomRestrictions"];return n&&(a=e.config["geocoder.objects2ZoomRestrictions.phones"]),i.compact(i.map(a,function(e,n){return t>=e?n:null})).join(",")}function l(e,a,o){return new r(function(r,l){var c=s(a,o);if(!c)return void l({});var u={zoom_level:a,purpose:"geocodeLight",type:c},d=t.geo.inPoint(e.join(","),u,function(t,n,a){var s=i.pick(e,"lon","lat");return 404!=a.code||o?t||200!=a.code||i.isEmpty(n)?l(t):("poi"==n.type?(s.type=i.get(n,"reference.type"),s.subtype=i.get(n,"reference.subtype"),s.id=i.get(n,"reference.id")):(s.type=n.type,s.id=n.id),s.group=i.get(n,"group"),r(s)):r(s)});n.add(d,"geocoding",!0)})}function c(e,o){return new r(function(r,s){if(!o||!o.type||!o.id)return void s({});var l={lon:e.lon,lat:e.lat,type:o.type,id:o.id,is_poi:"true",subtype:o.subtype,group:i.get(o,"group")};if("branch"!=o&&i.isEmpty(l.group)){var c={mutedForBssSearch:!0,purpose:"check_group"},u=t.geo.profile(l.id,c,function(e,t){var n=i.get(t,"group");return i.isEmpty(n)?void r(l):void r(a({},l,{group:n}))});return void n.add(u,"geocoding",!0)}r(l)})}return function(e){var t=e.action,n=o(e.point),a=e.data,s=e.zoom,u=e.isPhone;switch(t){case"poi":return c(n,a);case"simple":return l(n,s,u);default:return new r(i.noop)}}},t.exports._args=["app","$dgApi","$requestGroups"]},{bluebird:384,lodash:"lodash"}],113:[function(e,t,n){var a=e("lodash"),i=req("helpers/string"),o=e("node-uuid"),r=e("bluebird");t.exports=function(e,t,n,s){function l(){return this._reset()}return l.prototype._reset=function(){return this._markers={},this._markers.recovery=[],this._markers.regular=[],this._loading=!1,this._requestId="search_markers_"+o.v4(),this},l.prototype._setByType=function(e,t){if(!e)return this;if(!this._markers[t])throw Error(i.format('Unknown type "%1" of markers data',t));if(!a.isArray(e))throw Error("Data for markers must be array");return this._markers[t]=e,this},l.prototype.setRecovery=function(e){return this._setByType(e,"recovery")},l.prototype.setRegular=function(e){return this._setByType(e,"regular")},l.prototype._hasByType=function(e){if(!this._markers[e])throw Error(i.format('Unknown type "%1" of markers data',e));return!a.isEmpty(this._markers[e])},l.prototype.hasRecovery=function(){return this._hasByType("recovery")},l.prototype.hasRegular=function(){return this._hasByType("regular")},l.prototype.get=function(){return a.union(this._markers.recovery,this._markers.regular)},l.prototype.getRegular=function(){return this._markers.regular},l.prototype.dispose=function(){this._loading&&s.abortGroup(this._requestId),this._reset()},l.prototype.load=function(i,o){function s(){return d.page=1,t.searchMarkersByType(i,d,h._requestId)}function l(e){var a=n.get("markerAllPages"),o=d.page*d.page_size,r=e.total<=o||d.page>15;return a&&e.data&&!r?(d.page++,t.searchMarkersByType(i,d,h._requestId).then(l).then(function(t){return[e].concat(t)})):[e]}function c(e){return a.reduce(e,function(e,t){return t.code>200&&(e.code=t.code),t.data&&(e.data=e.data.concat(t.data)),e},{code:200,data:[]})}function u(e){return h._loading=!1,e&&200==e.code&&h.setRegular(e.data),r.resolve()}var d=a.clone(o);if(this._loading)return this._loader;var h=this;return d.page_size=1e4,this._loading=!0,this._loader=s().then(l).then(c).then(u).then(null,function(t){e.sendError("Failed to get markers. Received data:",JSON.stringify(t))}),this._loader},l},t.exports._args=["app","$dgApi","$featureSwitcher","$requestGroups"]},{bluebird:384,lodash:"lodash","node-uuid":456}],114:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=e("lodash"),r=e("../../../helpers/firm"),s=e("../../../helpers/getInt32"),l=e("bluebird"),c=e("./utils");t.exports=function(e,t,n,u,d,h){function p(e){return new l(function(t){var a="branch"==e.type?n.getFirmInfo:n.getGeoInfo;a(e.id,function(e,n){return t(o.get(n,"[0].albums"))})})}var f=function(){function n(e,t){a(this,n),this.is_poi=t.is_poi,this.bss=t.bss,this.group=t.group,this._photoAlbums=e.photoAlbums,this._allData=[e]}return i(n,[{key:"get",value:function(e){switch(e){case"data":return this._data;case"mainRubricName":return r.getMainRubric(this._data);case"stopType":return c.getStopType(this._data);default:return o.get(this._data,e)}}},{key:"hasRubric",value:function(e){return o.some(this.get("rubrics"),function(t){return s(t.id)==e})}},{key:"hasRubricsFromList",value:function(e){return o.some(this.get("rubrics"),function(t){return o.includes(e,s(t.id))})}},{key:"promise",value:function(){var e=this,t=c.groupObjectForRequest(this.group);return l.props({profiles:this._getProfiles(t),photoAlbums:this._getGroupsPhotoAlbums(this.group)}).then(function(t){var n=t.profiles,a=t.photoAlbums;return e._photoAlbums=o.chain(e._photoAlbums).concat(a).compact().uniq("main_photo_url").value(),o.get(n,"data")&&(e._allData=e._allData.concat(n.data)),e._formatData()})}},{key:"_getGroupsPhotoAlbums",value:function(t){return l.map(t,function(e){return p(e)}).then(function(e){return o.flatten(e)})["catch"](function(t){return e.sendError("method _getGroupsPhotoAlbums failed in models/meta",o.get(t,"message")),[]})}},{key:"_getProfiles",value:function(n){var a=this,i=n.fields,r=n.ids;return new l(function(n){var s={fields:i,purpose:"extraDataForCard"};a._geoRequest=t.geo.profiles(r,s,function(t,a){t&&e.sendError("model meta. method get/geo failed",o.get(t,"message")),n(a)})})}},{key:"dispose",value:function(){this._geoRequest&&this._geoRequest.cancel(),this._apartmentsRequest&&this._apartmentsRequest.cancel()}},{key:"_formatData",value:function(){return this._data=c.formatData(this._allData,this._photoAlbums),this._data}},{key:"loadApartments",value:function(){var e=this;return new l(function(t){e._apartmentsRequest=h.firmHaveAppartments(e._data.org.id,function(n,a){a&&a.apartments_count>0&&(e._data.hasApartments=!0),t(e._data.hasApartments)})})}}]),n}();return f},t.exports._args=["app","$dgApi","$photoApi","$featureSwitcher","$i18n","$apartmentsApi"]},{"../../../helpers/firm":"/helpers/firm.js","../../../helpers/getInt32":"/helpers/getInt32.js","./utils":115,bluebird:384,lodash:"lodash"}],115:[function(e,t,n){"use strict";function a(e){return x.reduce(e,function(e,t){var n=x.get(S,t.type);return n?{ids:[t.id].concat(x.get(e,"ids",[])),fields:x.chain(n.fields).concat(x.get(e,"fields",[])).union().value()}:e},{})}function i(e,t){var n={branch:1,building:2,adm_div:3,attraction:4},a=x.sortBy(e,function(e){return n[e.type]}),i=x.first(a).type,c=l(a,i);return x.isEmpty(c)?null:w({},c,{point:c.point?c.point:o(a),geometry:r(a),links:_(a),external_content:m(a),floors_data:c.floors,floors:null,photoAlbums:s(t)})}function o(e){var t=x.find(e,function(e){return x.get(e,"geometry.centroid")});return x.isEmpty(t)?null:T.parsePoint(t.geometry.centroid)}function r(e){var t=x.find(e,{type:"adm_div"}),n=x.first(e);return{selection:x.get(t,"geometry.selection"),centroid:x.get(n,"geometry.centroid")}}function s(e){var t=x.chain(e).filter(function(e){return x.includes(["common","view"],e.type)}).reduce(function(e,t){return e.main_photo_url&&"common"!=t.type||(e=w({},t,{count:e.count})),e.count+=t.count,e},{count:0}).value(),n=x.find(e,{type:"facilities"});return[t,n]}function l(e,t){switch(t){case"branch":return p(e);case"building":return d(e);case"adm_div":return u(e);default:return null}}function c(e){var t=x.get(e,"links.nearest_stations"),n=C.getRawClosestStation(t);return n?L.getTransportType(n):null}function u(e){var t=x.find(e,{type:"adm_div"});return t.geo_type=t.type,t.geo_id=t.id,w({},t,f(e))}function d(e){var t=x.reduceRight(e,function(e,t){return x.includes(["building","adm_div"],t.type)?w({},e,x.omit(t,"links","external_content","geometry")):e},{});return t.geo_type=t.type,t.geo_id=t.id,t.building_name||(t.building_name=x.chain(e).find(function(e){return e.name!=t.address_name}).get("name").value()),t}function h(e){return x.pick(e,function(t,n){return t&&x.includes(E[e.type],n)})}function p(e){var t=x.reduceRight(e,function(e,t){switch(t.type){case"branch":return w({},e,x.omit(t,"links","address","external_content","geometry"));case"building":case"adm_div":return w({},e,h(t));default:return e}},{}),n=e[1]||{};t.geo_type=n.type,t.geo_id=n.id;var a=x.find(e[0].adm_div,function(e){return"city"==e.type});return a&&(t.cityName=a.name),w({},t,f(e))}function f(e){var t={building:1,branch:2,adm_div:3,attraction:4};return x.chain(e).sortByOrder(function(e){return t[e.type]},"desc").reduce(function(e,t){return x.isEmpty(t.address)||(e.address=t.address),x.isEmpty(t.adm_div)||"branch"==t.type||(e.adm_div=t.adm_div),e},{}).value()}function m(e){return x.chain(e).reduce(function(e,t){return e.concat(t.external_content)},[]).compact().uniq(function(e){switch(e.type){case"photo_album":return e.main_photo_url;default:return e.url}}).value()}function g(e){return x.chain(e).compact().filter(function(e){return e.description||e.authors||e.dates}).value()}function _(e){var t=x.chain(e).find({type:"attraction"}).omit("links").value(),n=x.chain(e).reduce(function(e,t){return b(e,t.links)},{}).thru(function(e){var n=g([t].concat(e.attractions));return w({},e,{attractions:n})}).mapValues(function(e){return x.isArray(e)?k(e):e}).value(),a=x.find(e,{type:"branch"});return x.get(n,"branches.items")&&a&&(n.branches=v(n.branches,a.id)),n}function v(e,t){return 1==e.count&&y(e.items,t)?null:e}function y(e,t){return x.some(e,function(e){return I.getStaticId(e.id)==t})}function b(e,t){var n=x.reduce(t,function(t,n,a){return t[a]=x.isArray(n)?n.concat(e[a]):n,t},{});return w({},e,n)}function k(e){return x.chain(e).compact().uniq("id").value()}var w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x=e("lodash"),C=e("../../../helpers/stationsNear"),L=e("../../../helpers/station"),I=e("../../../helpers/firm"),T=e("../../../lib/wkt")(),S={building:{fields:["items.context","items.links","items.external_content","items.floors","items.address","items.adm_div","items.geometry.centroid"]},attraction:{fields:["items.region_id","items.adm_div","items.description","items.context","items.links","items.external_content","items.geometry.centroid"]},adm_div:{fields:["items.geometry.centroid","items.geometry.selection","items.links","items.external_content","items.floors","items.context","items.adm_div"]}},E={building:["purpose_name","building_name","full_name","floors","context","subtype"],adm_div:["context","purpose_name","floors","subtype_name","subtype"]};t.exports={groupObjectForRequest:a,getStopType:c,formatData:i,getLinks:_,getExternalContent:m}},{"../../../helpers/firm":"/helpers/firm.js","../../../helpers/station":"/helpers/station.js","../../../helpers/stationsNear":"/helpers/stationsNear.js","../../../lib/wkt":"/lib/wkt.js",lodash:"lodash"}],116:[function(e,t,n){function a(e){return e.urls&&!o.isEmpty(e.urls)?{original:e.urls.original,previews:o.omit(e.urls,"original")}:{original:e.url,previews:e.preview_urls}}function i(e){return e.description||e.title}var o=e("lodash");t.exports=function(){function e(e){this.id=e.id,this.urls=a(e),this.description=i(e),this.copyright=e.copyright,this.status=e.status,this.position=e.position,this.width=e.width,this.height=e.height,this.isSauna=e.isSauna,this.previewUrl=this.getPreview(),this.previews=this.urls&&this.urls.previews,this.url=this.urls&&this.urls.original,this.isUploadInProgress=e.isUploadInProgress||!1,this.isUploadFailed=e.isUploadFailed||!1,this.errorMessages=e.errorMessages,this.fileName=e.fileName,this.disable=e.details&&e.details.onSale===!1,this.ownerId=o.get(e,"owner.id")}return e.prototype.getPreview=function(e){e=e||"100x100";var t=this.urls.previews||{};return t[e]||this.urls.original},e.prototype.isValid=function(){return this.url&&!this.disable},e}},{lodash:"lodash"}],117:[function(e,t,n){var a=e("lodash"),i=req("helpers/request");t.exports=function(e,t,n){var o={buildings:function(e,t){var n,i;if(t.section&&e.modules&&e.modules[t.section]){var o=e.modules[t.section];if(a.isArray(o)){var r=a.findWhere(o,{id:t.albumId});n=r.photos,i=r&&r.title}else o.photos&&(n=o.photos)}return{title:e.properties&&e.properties.title,subtitle:i||"",id:e.id,name:e.name,address_name:e.address_name,address_only:e.address_only,adm_div:e.adm_div,photos:{items:n}}},saunas:function(e,t){var n=[],i=a.get(e,"modules.rooms",[]);if(t.room){var o=a.find(i,{id:t.room});o&&(n=o.photos)}else n=a.chain(i).pluck("photos").flatten().each(function(e){e.isSauna=!0}).value();return{id:e.id,name:e.name,address_name:e.address_name,address_only:e.address_only,adm_div:e.adm_div,photos:{items:n}}},saunaRoom:function(e){return{id:e.id,name:e.name,address_name:e.address_name,address_only:e.address_only,adm_div:e.adm_div,photos:{items:e.photos||[]}}}};return function(e,a){if(e.saunaRoomData){var r=o.saunaRoom(e.saunaRoomData);return void a(null,r)}var s=e.id;if(!s){var l=n.panels.get("booklet");if(!l||!e.section)return void i.emitError(400,"bad params",a);s=l.bookletId}t.getBooklet({bookletId:s},function(t,n){if(t)return void a(t,null);var i,r=n.template_name;o[r]&&(i=o[r](n,e)),a(null,i)})}},t.exports._args=["app","$bookletApi","$appState"]},{lodash:"lodash"}],118:[function(e,t,n){var a=e("lodash"),i=req("helpers/outputify"),o=req("helpers/firm");t.exports=function(e,t){return function(e,n){t.getFirmPhotos(e.id,e.albumName||"common",e.firmData,function(t,r){if(t)return void n(t,null);var s={id:r.id,name:r.name,address_name:r.address_name,address_only:r.address_only,adm_div:r.adm_div,photos:{items:a.get(r,"photos.items",[]),reg_bc_url:a.get(r,"photos.reg_bc_url","")}};"view"==e.albumName?(s.subtitle="",s.title=a.get(r,"address_name"),s.buildingId=a.get(r,"buildingId")):(s.subtitle=a.get(r,"address_name"),s.title=i.getName(r.name_ex)||r.name,s.rating=a.get(o.getRating(r),"value")),s.objectId=r.objectId,s.objectType=r.objectType,n(null,s)})}},t.exports._args=["app","$photoApi"]},{lodash:"lodash"}],119:[function(e,t,n){var a=e("async");t.exports=function(t){var n=t.invoke(e("./firm"),[t]),i=t.invoke(e("./booklet"),[t]);return function(e,t){var o={firm:function(t){n(e,function(e,n){t(null,n)})},booklet:function(t){i({id:e.bookletId},function(e,n){t(null,n)})}};a.parallel(o,function(e,n){var a;a=n.firm?n.firm:{id:n.id,name:n.name,address_name:n.address_name,address_only:n.address_only,adm_div:n.adm_div,photos:{items:[]}},n.booklet&&(a.photos.items=a.photos.items.concat(n.booklet.photos.items)),t(null,a)})}}},{"./booklet":117,"./firm":118,async:383}],120:[function(e,t,n){var a=e("lodash");t.exports=function(e,t){return function(e,n){t.getByGeo(e.id,e.albumName||"view",function(e,t){return e?void n(e,null):void n(null,{subtitle:"",title:t.address_name||t.name,geoType:t.type,id:t.id,name:t.name,address_name:t.address_name,address_only:t.address_only,adm_div:t.adm_div,photos:{items:a.get(t,"photos.items",[]),reg_bc_url:a.get(t,"photos.reg_bc_url","")},objectId:t.objectId,objectType:t.objectType})})}},t.exports._args=["app","$photoApi"]},{lodash:"lodash"}],121:[function(e,t,n){var a=e("lodash");t.exports=function(t,n,i){function o(e){e=e||{},this.dataProvider=e.dataProvider,this.photos={items:[],reg_bc_url:""},this.title="",this.subtitle="",this.buildingId="",this.rating="",this.activePhoto={}}var r={firm:t.invoke(e("./firm"),[t]),geo:t.invoke(e("./geo"),[t]),booklet:t.invoke(e("./booklet"),[t]),firmAndBooklet:t.invoke(e("./firmAndBooklet"),[t])};return o.prototype.request=function(e){e=e||{};var t=i();return a.isFunction(r[this.dataProvider])?r[this.dataProvider](e,a.bind(function(e,n){return e?"noSuchAlbum"==e.error?void t.resolve():void t.reject(e):(n&&this.set(n),void t.resolve())},this)):t.reject({error:"No such provider"}),t.promise()},o.prototype.set=function(e){this.photos.items=a.compact(a.map(e.photos.items,function(e){var t=n.photo(e);return t.isValid()?t:null})),this.photos.reg_bc_url=e.photos.reg_bc_url||"",this.title=e.title||"",this.subtitle=e.subtitle||"",this.buildingId=e.buildingId||"",this.rating=e.rating||"",this.copyright=e.copyright||{},this.id=e.id,this.name=e.name,this.address_name=e.address_name,this.address_only=e.address_only,this.adm_div=e.adm_div,this.geoType=e.geoType||"",this.objectId=e.objectId,this.objectType=e.objectType},o.prototype.getActivePhoto=function(){return this.activePhoto},o.prototype.activatePhotoById=function(e){this.activePhoto=a.findWhere(this.photos.items,{id:e})||{}},o.prototype._isValid=function(){return!a.isEmpty(this.photos.items)},o.prototype.getBuildingId=function(){return this.buildingId},o},t.exports._args=["app","$models","$defer"]},{"./booklet":117,"./firm":118,"./firmAndBooklet":119,"./geo":120,lodash:"lodash"}],122:[function(e,t,n){"use strict";function a(e){if(!e.outcoming_path&&"end"!=e.type)return null;var t=s.extend({},e,{legId:0});return t.icon=u.convertUnderScoreToCamel(t.icon),t}function i(e,t,n){var a=[],i="pedo";if(e){var o={type:i,x:+e.lon,y:+e.lat};e.id&&(o.object_id=e.id),a.push(o)}if(n&&s.each(n,function(e){a.push({type:"pref",x:+e.lon,y:+e.lat})}),t){var r={type:i,x:+t.lon,y:+t.lat};t.id&&(r.object_id=t.id),a.push(r)}return a}function o(e){e||(e=[]);var t=e.map(a);return[s.compact(t)]}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=e("lodash"),l=req("helpers/routeSearch"),c=req("lib/wkt.js")(),u=req("helpers/string"),d=e("bluebird"),h=req("lib/request2"),p=req("helpers/request"),f=e("moment");t.exports=function(e,t,n,a,u){function m(){this._result=null,this._waypoints=null}function g(){var e=t.get("ppnotTime");if(e&&e.useSelected&&e.date&&e.time){var n=e.date+" "+e.time;return f(n,"YYYY-MM-DD HH:mm:ss").unix()}var a=f(),i=a.format("YYYY-MM-DD"),o=a.format("HH:mm:ss");return t.set("ppnotTime",{date:i,time:o}),t.push(),a.unix()}return m.prototype.getGeometryForFocusByIndexes=function(e,t,n){var a=s.get(this,["_result",e,"maneuvers",t,n],{}),i=s.get(a,"outcoming_path.geometry");if(i){var o=function(){var e=void 0;return s.some(i,function(t){return t&&t.selection?(e=s.get(c.parseObject(t.selection),"geometry[0]"),!!e):null}),{v:e}}();if("object"===(void 0===o?"undefined":r(o)))return o.v}else if("end"==a.type)return s.last(this._waypoints);return null},m.prototype.findRoutes=function(r,c,f,m){function _(e){return s.get(e,"body.items")&&(e.body.items=s.filter(e.body.items,function(e){return!!e.legs&&!s.isEmpty(e.legs)&&!s.isEmpty(s.flatten(s.pluck(e.legs,"steps"),!0))})),e}var v=this,y=n.getRegion().currentLanguage;u.get("languageSwitcher")&&t.getLang()&&(y=t.getLang());var b=u.get("ppnotTime")&&{epoch:g()},k=s.merge({locale:y,point_a_name:r.text,point_b_name:c.text},b);"pedestrian"==m&&(k.type="pedestrian"),s.defaults(k,{points:i(r,c,f),purpose:"autoSearch",type:"online"});var w=e.config["WebApi.mosesProxyUrl"]+"/carrouting/4.0.0/"+n.getRegion().code,x=h("post",w).query({key:e.config["WebApi.key"]}).send(k).then(_).then(function(e){var t=s.get(e,"error");if(t)return d.reject(t);var n=s.get(e,"body.result");return s.isEmpty(n)?d.reject(p.emitError(404,"empty api response")):(s.each(n,function(e){e.maneuvers=o(e.maneuvers),e.projectedPoints=s.filter(e.waypoints,{transit:!0})}),v._result=n,v._waypoints=s.compact([r].concat(f).concat([c])),{paths:v._result,waypoints:v._waypoints})})["catch"](function(e){return d.reject(s.extend(e,{params:{from:r,to:c,waypoints:f,rsType:m,regions:l.getRsRegions(r,c,n)}}))});return a.add(x,"routeSearch",!0),x},m},t.exports._test={parseSingleManeuver:a,getRoutePoints:i},t.exports._args=["app","$appState","$regionManager","$requestGroups","$featureSwitcher"]},{bluebird:384,lodash:"lodash",moment:"moment"}],123:[function(e,t,n){"use strict";var a=e("lodash"),i=e("bluebird"),o=req("lib/request2"),r=e("moment"),s=req("helpers/routeSearch"),l=req("helpers/request");t.exports=function(e,t,n,c,u){function d(){var e=t.get("ppnotTime");if(e&&e.useSelected&&e.date&&e.time)return e.date+" "+e.time;var n=r(),a=n.format("YYYY-MM-DD"),i=n.format("HH:mm:ss");return t.set("ppnotTime",{date:a,time:i}),t.push(),a+" "+i}function h(){}return h.prototype.findRoutes=function(r,h,p){var f=n.getRegion().currentLanguage;u.get("languageSwitcher")&&t.getLang()&&(f=t.getLang());var m=u.get("ppnotTime")&&{start_time:d()},g=a.merge({locale:f,source:{name:r.text,point:{lat:parseFloat(r.lat),lon:parseFloat(r.lon)}},target:{name:h.text,point:{lat:parseFloat(h.lat),lon:parseFloat(h.lon)}},purpose:"routeSearch"},m);r.id&&(g.source.object_id=r.id),h.id&&(g.target.object_id=h.id),"subway"==p?g.transport=["metro","light_metro"]:g.transport=["pedestrian","bus","trolleybus","tram","shuttle_bus","metro","suburban_train","funicular_railway","monorail","river_transport","cable_car","light_rail","premetro","light_metro","aeroexpress"];var _=e.config["WebApi.mosesProxyUrl"]+"/ctx/1.0/"+n.getRegion().code,v=o("post",_).query({key:e.config["WebApi.key"]}).send(g).then(function(e){var t=a.get(e,"error");if(t)return i.reject(t);var n=a.get(e,"body");return a.isEmpty(n)?i.reject(l.emitError(404,"empty api response")):n})["catch"](function(e){return i.reject(a.extend(e,{params:{from:r,to:h,rsType:p,regions:s.getRsRegions(r,h,n)}}))});return c.add(v,"routeSearch",!0),v},h},t.exports._args=["app","$appState","$regionManager","$requestGroups","$featureSwitcher"]},{bluebird:384,lodash:"lodash",moment:"moment"}],124:[function(e,t,n){var a=e("bluebird");t.exports=function(e,t){function n(e){e=e||{},this.regionId=e.regionId,this.selectedId=e.selectedId}function i(e,n){return new a(function(a,i){t[e](n,function(e,t){t||(e={error:"No reviews data received"}),e?i(e):a(t)})})}return n.prototype.loadData=function(){var e={regionId:this.regionId,selectedId:this.selectedId};return i("getPresents",e)},n.prototype.save=function(e){var t={regionId:this.regionId,name:e};return i("savePresent",t)},n.prototype.registerClick=function(e,t){var n={regionId:this.regionId,presentId:t,provider:e};return i("registerClick",n)},n.prototype.registerRepost=function(e,t,n){var a={regionId:this.regionId,presentId:t,provider:e,postId:n};return i("registerRepost",a)},n},t.exports._args=["app","$presentsApi"]},{bluebird:384}],125:[function(e,t,n){var a=e("lodash");t.exports=function(t,n){function i(e){this.type=e.type,this.id=e.id}var o={tyres:t.invoke(e("./tyres"),[t])};return i.prototype.request=function(){var e=this,t=o[e.type];return t({id:e.id}).then(function(t){e.data=t})},i.prototype.getData=function(){return this.data},i.prototype.getMarkers=function(){var e=a.get(this,"data.proposals.items",[]);return a.map(e,function(e){var t=e.branch;return a(t).pick("id","lat","lon").extend({is_advertising:!!t.ads,price:e.price,currency:n.getFormats().currency}).value()})},i.prototype.getProposals=function(){return a.get(this,"data.proposals.items",[])},i.prototype.getProductType=function(){return this.type},i},t.exports._args=["app","$i18n"]},{"./tyres":126,lodash:"lodash"}],126:[function(e,t,n){var a=e("lodash"),i=e("bluebird"),o=req("helpers/tyres");t.exports=function(e,t,n,r){function s(e){var t=[];return e.size&&t.push(e.size),e.speed_index&&t.push(r._gg("Индекс скорости %1",e.speed_index)),e.max_load&&t.push(r._gg("Индекс нагрузки %1",e.max_load)),t.push(o.getTypeString(e.type,r)),e.runflat&&t.push(o.getRunflatString(r)),a.compact(t)}function l(e){var t=[];if(e.size){var n=e.size;e.max_load&&e.speed_index&&(n+=" "+e.max_load.split(" ")[0]+e.speed_index.split(" ")[0]),t.push(n)}return t.push(o.getTypeString(e.type,r).toLowerCase()),e.runflat&&t.push(o.getRunflatString(r,!0)),a.compact(t)}function c(e){var t=o.getIconByType(e.type,r);return a.compact([t])}function u(e){return e.parameters=s(e),e.seoParameters=l(e),e.attributesIcons=c(e),e}return function(e){return new i(function(i,o){e=a.pick(e||{},"id"),e.project=n.getRegion().id,t.getItem(e,function(e,t){e?o(e):(u(t),i(t))})})}},t.exports._args=["app","$tyresApi","$regionManager","$i18n"]},{bluebird:384,lodash:"lodash"}],127:[function(e,t,n){function a(e){return o.each(e.groups,function(e){e.type||(e.type=o.first(e.filters).type),"selectbox"==e.type&&3==e.filters.length&&(e.mod="small"),o.each(e.filters,function(e){"selectbox"==e.type&&(e.values=o.map(e.values,function(e){return o.isObject(e)||(e={value:e,label:""+e}),e}))})}),e}var i=e("bluebird"),o=e("lodash");t.exports=function(t){function n(e){this.type=e,this.dataProvider=r[this.type],this.sortBy=s}var r={tyres:t.invoke(e("./tyres"),[t])},s="popularity";return n.prototype.loadData=function(e){e=e||{};var n=this;n.page=1,n.pageSize=t.config["products.pageSize"];var r=[n.dataProvider.search(n)];return e.requestFilters&&r.push(n.dataProvider.filters()),new i(function(e,t){i.all(r).then(function(t){n.items=t[0].items,n.total=t[0].total,t[1]&&(n.filters=a(t[1])),e(o.pick(n,"items","filters"))},function(e){t(e)})})},n.prototype.loadNextPage=function(){var e=this;return e.page++,new i(function(t,n){e.dataProvider.search(e).then(function(n){var a=n.items;e.items=e.items.concat(a),t({items:a})},function(e){n(e)})})},n.prototype.setFiltersValues=function(e){this.filtersValues=e},n.prototype.getDefaultFilters=function(){return this.dataProvider.getDefaultFilters(this)},n.prototype.hasNextPage=function(){return o.size(this.items)<this.total},n.prototype.getItems=function(){return this.items},n.prototype.getFilters=function(){return this.filters},n.prototype.getFiltersValues=function(){return this.filtersValues},n.prototype.getTotal=function(){return this.total},n.prototype.getProductType=function(){return this.type},n.prototype.updateTyresModels=function(e){return this.dataProvider.getModels(e)},n}},{"./tyres":128,bluebird:384,lodash:"lodash"}],128:[function(e,t,n){var a=e("bluebird"),i=e("lodash"),o=req("helpers/tyres");t.exports=function(e,t,n,r){function s(e){var t=[];return e.type&&t.push(o.getTypeString(e.type,r)),e.runflat&&t.push(o.getRunflatString(r)),t}function l(e){var t=o.getIconByType(e.type,r);return i.compact([t])}function c(e){return i.each(e.items,function(e){e.attributes=s(e),e.attributesIcons=l(e)}),e}function u(e){var t;return t=i.isArray(e)?e.join(","):i.isObject(e)&&e.range?e.range.join("-"):e}return{search:function(e){var o={project:n.getRegion().id,limit:e.pageSize,page:e.page};return i.extend(o,this.getDefaultFilters(e)),e.filtersValues&&i.each(e.filtersValues,function(e,t){o[t]=u(e)}),new a(function(e,n){t.search(o,function(t,a){t?n(t):(c(a),e(a))})})},filters:function(){return new a(function(e,a){var i={project:n.getRegion().id};t.filters(i,function(t,n){t?a(t):e(n)})})},getModels:function(e){return new a(function(a,i){var o={project:n.getRegion().id,vendor:e};t.models(o,function(e,t){e?i(e):a(t)})})},getDefaultFilters:function(e){return{sort_by:e.sortBy}}}},t.exports._args=["app","$tyresApi","$regionManager","$i18n"]},{bluebird:384,lodash:"lodash"}],129:[function(e,t,n){function a(e,t){if(o.contains(i,e.name))return!1;var n={visible:t._t("Видимые на карте"),invisible:t._pt("Невидимые на карте","Остальные"),routes:t._t("Маршруты"),stations:t._pt("Остановка общественного транспорта","Остановки"),"default":t._t("Результаты поиска")};return i.push(e.name),{title:e.title||n[e.name]||n["default"],count:e.count,header:!0}}var i,o=e("lodash"),r={};r.common=function(e){function t(t,n){var i=[];if(!t.groups)return i;var r=t.groups.start,s=o.clone(t.data);return o.each(e.list,function(e){if(!s.length||e.count<r)return void(r-=e.count);var t=a(e,n);t&&i.push(t);var l=s.splice(0,e.count-r);r=0,i=o.union(i,l)}),i}return t},r.common.canApply=function(e){return e.groups&&e.groups.list},n.getGrouper=function(e){var t=null;return i=[],e.groups&&e.groups.list&&(t=r.common(e.groups)),t}},{lodash:"lodash"}],130:[function(e,t,n){function a(e,t){var n=[];return o.each(e,function(e,a){n=n.concat(t(e,a))}),n}function i(e,t,n,a){return e in a?t:(a[e]=!0,[n].concat(t))}var o=e("lodash"),r={};r.byViewport=function(){function e(e,n){var r=e.total_in_bound||0,s=o.groupBy(e.data,function(e){return e.context.is_in_bound?"inbound":"others"});s.inbound||(s={inbound:[],others:s.others});var l={inbound:n._t("Видимые на карте"),others:n._pt("Невидимые на карте","Остальные")};return a(s,function(n,a){var o="others"==a?e.request_count-r:r,s={header:!0,title:l[a],count:o};return i(a,n,s,t)})}var t={};return e},r.byViewport.canApply=function(e){var t=o.get(e,"data[0].context.is_in_bound");return void 0!==t&&null!==t},r.byServicing=function(){function e(e){var t={};o.each(e.servicing_groups,function(e){t[e.type]=e.name});var n=o.groupBy(e.data,function(e){return e.context.servicing_group});return a(n,function(e,n){var a={header:!0,group:n,title:t[n],count:e.length};return[a].concat(e)})}return e},r.byServicing.canApply=function(e){return!!e.servicing_groups},r.byRubric=function(){function e(e){var t={};o.each(e.rubrics,function(e){t[e.code]=e.title});var n=o.groupBy(e.data,function(e){return e.rubric_code}),i=a(n,function(e,n){var a={header:!0,title:t[n],count:e.length};return[a].concat(e)});return i}return e},r.byRubric.canApply=function(e){return e.data&&e.data[0]&&e.data[0].rubric_code},n.getGrouper=function(e,t){var n=null;return o.some(r,function(a){return a.canApply(e,t)?(n=a(),!0):!1}),n}},{lodash:"lodash"}],131:[function(e,t,n){"use strict";var a=e("lodash"),i=e("./utils"),o=e("./pageImitation"),r=req("lib/geo/lonlat"),s=req("helpers/filters"),l=req("helpers/firm"),c=req("helpers/linkURL"),u=req("helpers/booklet"),d=e("bluebird");t.exports=function(t,n,h,p,f,m,g,_,v,y){function b(e){e=e||{},this._type=e.type,this._params=a.clone(e.params)||{},this._dataItemsCount=0,this._dataAdsItemsCount=0,this._fullIdsHash=i.makeFullIdsHash(this._params.profiles||""),this.setFilters(e.filters),this._markers=n.markers(),"profiles"==this._type&&(this.pageImitation=new o({items:this._params.profiles.split(","),pageSize:this.get("pageSize"),type:"profiles"}))}return b.prototype.get=function(e){if(a.isArray(e))return a.reduce(e,function(e,t){return e[t]=this.get(t),e},{},this);switch(e){case"rubricId":return this._params.rubricId||this._params.rubric;case"buildingId":return this._params.house;case"pageSize":switch(this._type){case"query/transport":case"query/geo":return 2e3;case"servicing":return t.config["WebApi.servicingPageSize"];case"rubricsNear":return 50;default:return t.config["WebApi.firmsPageSize"]}case"code":return this.has("data")&&+this._currentData.code;case"error":return!this._currentData||200!=this.get("code")&&this._currentData.error;case"unexpectedError":return!a.contains([200,404],this.get("code"));case"filters":return this._params.filters||{};case"filtersData":return a.get(this,"_currentData.filters",{});case"page":return a.get(this._params,"page",1);case"widgetsData":return a.pick(this._currentData.widgets,"main","actions");case"forcedValues":return a.get(this._currentData,"widgets.current_values");case"advFiltersAllowed":return"firms"==this.get("mode")&&!a.contains(["servicing","rubricsNear","profiles"],this._type);case"length":return this._currentData&&this._currentData.data&&this._currentData.data.length;case"count":return this._currentData?"rubricsNear"==this._type&&this._currentData.request_count>50?50:+this._currentData.request_count:0;case"counts":return{station:a.get(this,"_currentData.station_count",0),
route:a.get(this,"_currentData.route_count",0)};case"itemsCount":return this._dataItemsCount;case"total":return a.get(this,"_currentData.total_count",0);case"adsLength":return a.get(this,"_currentData.ads.length",0);case"requestType":return this._currentData&&this._currentData.request_type;case"contextRubrics":return this._currentData&&this._currentData.context_rubrics||[];case"contextRubricShortIds":return a.pluck(this.get("contextRubrics"),"short_id");case"firstContextRubricName":return(a.first(this.get("contextRubrics"))||{}).name;case"contextRubricShortIdFromResults":var n=a.chain(this._currentData).get("data").pluck("rubrics").first().pluck("short_id").value();return n||[];case"firstContextRubricNameFromResults":var i=this._currentData&&this._currentData.data,o=a.chain(i).map(function(e){return a.find(e.rubrics,{kind:"primary"})}).compact().first().value();return(o||{}).name;case"rubricOriginalName":return this._currentData&&this._currentData.originalRubricName;case"buildingAddress":return"inbuild"==this._type&&this.get("firstItem").address_name;case"contextIds":return a.pluck(this.get("contextRubrics"),"short_id");case"attributes":return this._currentData&&this._currentData.widgets&&this._currentData.widgets.attributes;case"pagesCount":return Math.ceil((this.get("count")||0)/this.get("pageSize"));case"headerInfo":return{success:this.get("count")>0,title:this.get("title"),count:this.get("count"),counts:this.get("counts")};case"contextKey":return this._currentData.contextKey;case"markers":return{markers:this._markers.get()};case"markersRegular":return this._markers.getRegular();case"type":return this._type;case"seoData":return this._currentData.seoData||{};case"firstItem":return this._currentData.data&&this._currentData.data[0];case"providerSeoLink":return this.has("providersButton")&&c("bookletProvidersAggregator",{city:m.getRegion().code});case"providersInBuildingSeoLink":return c("bookletProvidersAggregator",{city:m.getRegion().code,id:this.get("buildingId")});case"tyresSeoLink":return this.has("tyresButton")&&c("products",{city:m.getRegion().code,productType:"tyres"});case"servicingGroupsCount":return a.get(this,"_currentData.servicing_groups.length",0);case"filialsData":return a.get(this._currentData,"filialsData");case"rubricsDym":return a.get(this._currentData,"error.result.dym.rubrics");case"dym":return this._getDym();case"currentData":return this._getCurrentData();case"mapData":return this._getMapData();case"mode":return this._getMode();case"title":return this._getTitle();default:return}},b.prototype.is=function(e){switch(e){case"discovery":return this._currentData&&"discovery"==this._currentData.request_type;case"recovery":return this._currentData&&"recovery"==this._currentData.request_type;case"affectsMap":return"servicing"!=this._type;case"notFound":return 404==this.get("code");case"boundSorted":return!(!this.get("filters").bound&&"bound"!=this.get("filters").sort);case"seoScrollable":return!this.get("filters").work_time&&!this.get("filters").sort;case"boundSortAllowed":return!this.fetchParams.firmId;case"tyresSearch":return f.get("tyres")&&this._isTyresSearch();case"servicingInternet":return a.some(this._currentData.servicing_groups,function(e){return"internet"==e.type});case"branchSearch":return this._isBranchSearch();case"advertisingFilials":return this._isAdvertisingFilials();case"providersSearch":return this._isProvidersSearch();case"providersInBuilding":return this._isProvidersInBuilding();default:return}},b.prototype.has=function(e){switch(e){case"data":return!!this._currentData;case"ads":return!!this.get("adsLength");case"filters":return a.size(this.get("filters"))>0;case"recoveryAds":return this.has("ads")&&a.any(this._currentData.ads,function(e){return e.recoveryAd});case"photo":return!!a.some(this._currentData.data,function(e){return e.has_photo});case"providersButton":return f.get("bookletProviders")&&!this.get("buildingId")&&this._isProvidersSearch();case"providersBooklet":return f.get("bookletProviders")&&this.get("buildingId")&&a.some(this._currentData.data||[],function(e){return e.external_content&&a.some(e.external_content,function(e){return"booklet"==e.type&&"net"==e.subtype})});case"stopFactors":return this._hasStopFactors;case"tyresButton":return!!this._hasTyresButton;case"markers":return this._hasMarkers();default:return}},b.prototype.getItems=function(){return a.map(this._groupItems(),function(e){return e.header||(e.id=this._fullIdsHash[e.id]||e.id,e.query=this.fetchParams,e.isDiscovery=this.is("discovery"),e.hasStopFactors=this.has("stopFactors"),e.recoveryAd?(e.adsTotal=this.get("adsLength")||0,e.adsIndex=this._dataAdsItemsCount++):this._dataItemsCount++),e},this)},b.prototype.setFilters=function(e){e=e||{};var t=a.omit(e,["work_time_mode","work_day","work_hour"]),n=s.combineWorkTime(e);return n&&(t.work_time=n),this._params.filters=a.mapValues(t,function(e){return a.uniq((e+"").split(",")).join(",")}),this._params.filters},b.prototype.dispose=function(){this.disposed=!0,this._currentData=this._params=null,p.abortGroup("search"+this._type),this._markers.dispose()},b.prototype._getDym=function(){if(!this.is("branchSearch"))return null;var e=this.get("error"),t=e&&e.result||this._currentData||{};return(t.dym||{}).api_category},b.prototype._getCurrentData=function(){return this._currentData},b.prototype._getMapData=function(){return this.has("markers")?this.get("markers"):(this.pageImitation&&this.pageImitation.substituteProfileMarkers(this._currentData),this._currentData)},b.prototype._hasMarkers=function(){var e=["filials","query/firms","rubric"];return a.contains(e,this._type)},b.prototype._isBranchSearch=function(){var e=["filials","query/firms","profiles","inbuild","servicing","rubric","rubricsNear"];return a.contains(e,this._type)},b.prototype._isAdvertisingFilials=function(){var e=a.first(this._currentData&&this._currentData.data);return"filials"===this._type&&a.has(e,"ads")},b.prototype._getMode=function(){switch(this._type){case"query/transport":return"transport";case"query/geo":return"geo";default:return"firms"}},b.prototype._getTitle=function(){var e=this.get("mode"),t={firms:g._pt("Поиск","Организации"),geo:g._pt("Поиск","Места на карте"),transport:g._pt("Поиск","Транспорт")};return t[e]||e},b.prototype._isProvidersSearch=function(){var e=a.first(this.get("contextRubrics")),t=176;if(e&&e.short_id==t){var n=m.getRegion();return n.flags&&n.flags.has_net_booklet}return!1},b.prototype._isProvidersInBuilding=function(){var e=a.get(this,"_currentData.servicing_groups");return e&&a.find(e,{type:"internet"})},b.prototype._isTyresSearch=function(){var e=427,t=a.first(this.get("contextRubrics"));return!(!t||t.short_id!=e)},b.prototype._groupItems=function(){var n;n=this._grouper?this._grouper(this._currentData,g):this._currentData.data;var a=e("./injectors")(t,this);return a&&(n=a(n)),n},b.prototype._setGrouperOnce=function(){if(!this._grouper){var n=e(t.isGrym?"./groupers/offline":"./groupers/online");this._grouper=n.getGrouper(this._currentData,this._type)}},b.prototype.reset=function(e){return this._currentData=null,this._grouper=null,this._dataItemsCount=0,this._dataAdsItemsCount=0,e&&(this._markers=n.markers()),this},b.prototype._setFetchParams=function(){var e=a.clone(this._params);if(e.page_size=this.get("pageSize"),"query/transport"!=this._type&&1!=this._params.page&&(e.page=this._params.page),"rubricsNear"==this._type&&(e.point=r(e).toFixed().join()),"servicing"==this._type&&e.group&&(e.servicing_group=e.group,delete e.group),"profiles"==this._type&&(e.purpose="get_profiles"),e.filters=a.cloneDeep(this.get("filters")),t.isServer&&e.filters&&("bound"==e.filters.sort&&(delete e.filters.sort,e.page_size=1),e.filters.bound&&(delete e.filters.bound,e.page_size=1)),"rubricsNear"==this._type){var n=e.rubrics;e.rubrics=u.getRubrics(n,{i18n:g})}var i=!this._currentData;(i||e.filters&&e.filters.bound)&&(e.full=!0),this._hasMarkers()&&(e.enableMarkers=t.enableMarkersInSearch()),this.pageImitation&&this.pageImitation.substitute(e),this.fetchParams=e},b.prototype.loadMarkers=function(){return t.enableMarkersInSearch()?d.resolve():this.has("markers")&&!this._markers.hasRegular()?(this._setFetchParams(),this._markers.load(this._type,a.omit(this.fetchParams,"page"))):d.resolve()},b.prototype.loadPage=function(e,t){function n(e,t){"Value of parameter 'page' is incorrect"==a.get(e,"error.meta.error.message","")&&400==e.code&&(e.code=404),s._currentData=e,s.pageImitation&&(s._currentData.total=s.pageImitation.total,s._currentData.total_count=s.pageImitation.total,s._currentData.request_count=s.pageImitation.total),void 0===s._hasStopFactors&&(s._hasStopFactors=!!a.find(s._currentData.data,function(e){return e.context&&e.context.stop_factors&&e.context.stop_factors.length})),s._setGrouperOnce(),t()}function o(t,n){1==e&&"query/firms"===s._type&&f.get("businessLandingDemoMode")?i.addBusinessLandingDemoResult(t,n,h,_,g):"filials"===s._type&&c?i.addFilialsMainInfo(t,s.fetchParams.firmId,n,h):n(t)}function r(e,t){s._isBranchSearch()?i.getObjectsPhotos(y,e,"branch",t):t(e)}var s=this,c=!this._currentData;t=a.defaults(t||{},{abort:!0}),this._params.page=e,this._setFetchParams();var u={},m=new d(function(e){u=h.searchByType(s._type,a.clone(s.fetchParams),function(t){t.originalRubricName=l.getRubricOriginalName(s._params.query,s._params.rubricId,a.get(t,"context_rubrics")),t.markers&&t.markers.length&&s._markers.setRegular(t.markers),r(t,function(t){if(c){var r=a.extend(s.fetchParams,{mutedForBssSearch:!0});i.addSeoAndAds(h,t,s._type,r,function(i,r,l){t.ads=i,t.seoData=l,s._markers.setRecovery(r),o(t,a.partialRight(n,e))})}else t.ads=void 0,i.extend(t,s._currentData),o(t,a.partialRight(n,e))})}),p.add(u,"search"+s._type,t.abort)}),v=u.cancel||a.noop;return u.cancel=function(){m.isPending()&&(s._currentData={},m._reject(Error("Request was aborted"))),v.apply(u,arguments)},m},b.prototype.checkForTyres=function(e){var t=this;return t.is("tyresSearch")?void v.status({project:m.getRegion().id},function(n,a){var i=!(!a||!a.status);t._hasTyresButton=i,e(i)}):void e(!1)},b},t.exports._args=["app","$models","$dgApi","$requestGroups","$featureSwitcher","$regionManager","$i18n","$appState","$tyresApi","$photoApi"]},{"./groupers/offline":129,"./groupers/online":130,"./injectors":133,"./pageImitation":135,"./utils":136,bluebird:384,lodash:"lodash"}],132:[function(e,t,n){var a=e("lodash");t.exports=function(e,t,n,i){function o(n){var i=t.get("contextRubrics");return a.find(i,function(t){return a.includes(e.config["contextPromo.rubrics"][n],t.short_id)})}function r(t){var n={type:"contextPromo",subType:s},a=e.config["contextPromo.miniCardPosition"];return t.length>a?t.splice(a,0,n):t.push(n),t}var s;return r.canApply=function(){var t=a.find(e.config["contextPromo.priority"],function(t){var r=e.config["contextPromo.cities"][t];return r&&a.includes(r,n.getRegion().code)&&o(t)&&i.get(t)?(s=t,!0):!1});return!!t},r},t.exports._args=["app","result","$regionManager","$featureSwitcher"]},{lodash:"lodash"}],133:[function(e,t,n){var a=e("lodash");t.exports=function(t,n){if(1!=n._params.page)return null;var i=[t.invoke(e("./recovery"),[t,n]),t.invoke(e("./contextPromo"),[t,n])];return a.find(i,function(e){return e.canApply()})}},{"./contextPromo":132,"./recovery":134,lodash:"lodash"}],134:[function(e,t,n){var a=e("lodash");t.exports=function(e,t){function n(e){var n=t._currentData.ads,i=[],o=0;a.each(e,function(t,n){t.header&&0!=n&&(i.push(e.slice(o,n)),o=n)}),i.push(e.slice(o));var r={};a.find(i,function(e,t){return e.length>1||t==i.length-1?(r={index:t,group:e,hasHeader:a.find(e,function(e){return!!e.header})},!0):!1});var s=r.hasHeader?3:2,l=a.union(a.take(r.group,s),n,a.drop(r.group,s));return i[r.index]=l,a.union.apply(this,i)}return n.canApply=function(){return t.has("ads")},n}},{lodash:"lodash"}],135:[function(e,t,n){function a(e){this._items=e.items,this.total=this._items.length,this.type=e.type,this._pages=i.chunk(this._items,e.pageSize)}var i=e("lodash"),o=req("helpers/firm");a.prototype.substitute=function(e){if(e.hasOwnProperty(this.type)){var t=e.page||1;e[this.type]=this.getPageItems(t).join(",")}},a.prototype.getPageItems=function(e){return this._pages[e-1]},a.prototype.substituteProfileMarkers=function(e){if(e.markers.length!==this._items.length){var t=i.omit(e.markers[0],["branch_id","name_ex"]);i.each(this._items,function(n){var a=o.getStaticId(n);if(!i.find(e.markers,{branch_id:a})){var r=i.extend({branch_id:a},t);e.markers.push(r)}})}},t.exports=a},{lodash:"lodash"}],136:[function(e,t,n){var a=e("lodash"),i=e("async"),o=req("helpers/firm"),r=req("lib/markerDataManager");n.addBusinessLandingDemoResult=function(e,t,n,i,r){function s(){var e=i.getState().panels;if(e){var t=a.last(e);if(t&&"firm"===t.type)return t.id}return null}function l(e,t){return a.remove(e.data,function(e){return e.org.id===t.org.id}),e.data.unshift(t),e}var c=s();c?n.firms.profile(c,function(n,a){n||(e=l(e,o.simulateAdvertisement(a,r))),t(e)}):t(e)},n.addFilialsMainInfo=function(e,t,n,i){function o(t){e.filialsData=a.first(t.data),e.filialsData.total=t.total}if(a.get(e,"data.length"))o(e),n(e);else{var r={page_size:1};i.firms.filials(t,r,function(t,i){a.get(i,"data.length")&&o(i),n(e)})}},n.addSeoAndAds=function(e,t,n,s,l){function c(t,n,i){var s=a.compact(t),l=a.map(s,o.getStaticId),c=a.zipObject(l,s);e.firms.profiles(s,n,function(e,t){return e?void i():(d=a.cloneDeep(t.data),d=a.map(d,function(e){return e.id=c[e.id],e}),p=r.makeByList(d,"recovery"),a.each(d,function(e){e.recoveryAd=!0}),void i())})}function u(t,n,a){e.geo.profile(t,n,function(e,t){e||(h={adm_div:t.adm_div,geoName:t.address_name,buildingName:t.address_name!=t.name?t.name:""}),a()})}var d,h,p=[],f=a.map(a.compact(t.ads),function(e){return e.branch_id||e.firm_id}),m=[];if(a.size(f)&&e.firms&&m.push(function(e){c(f,{mutedForBssSearch:s.mutedForBssSearch},e)}),"servicing"==n)m.push(function(e){u(s.house,{mutedForBssSearch:s.mutedForBssSearch},e)});else{var g=t.data&&t.data[0]||{};h={adm_div:g.adm_div,geoName:g.address_name}}i.parallel(m,function(){l(d,p,h)})},n.extend=function(e,t){return t&&(200==e.code&&(t.markers&&(e.markers=(e.markers||[]).concat(t.markers)),e.totalCount=e.total_count||t.total_count),e.filters=t.filters||{},e.widgets=t.widgets||{}),e},n.makeFullIdsHash=function(e){if(!e)return{};var t=e.split(",");return a.reduce(t,function(e,t){var n=t.split("_")[0];return e[n]=t,e},{})},n.getObjectsPhotos=function(e,t,n,i){var r=a.map(t.data,function(e){return o.getStaticId(e.id)});switch(n){case"branch":e.getFirmInfo(r,function(e,n){if(!e){var r;a.forEach(t.data,function(e){r=a.findWhere(n,{id:o.getStaticId(e.id)}),a.get(r,"albums")&&(e.photoAlbums=r.albums)})}i(t)});break;default:i(t)}},t.exports._args=["mainResult","callback","$dgApi","$appState","$i18n"]},{async:383,lodash:"lodash"}],137:[function(e,t,n){var a=e("lodash"),i=e("bluebird"),o=req("helpers/outputify"),r=req("helpers/firm"),s=req("helpers/model");t.exports=function(e,t,n,l,c){function u(e,t){this.id=e,t&&(this._firm=t,this._isOrgReviews=!!t.reviews.is_org_reviews)}return u.prototype.getFirmName=function(){return o.getName(this._firm.name_ex)||this._firm.name},u.prototype.getFirmAddress=function(){return r.getFirmAddress(this._firm,{useDrilldownInAddress:l.getSettings("firms.useDrilldownInAddress"),format:l.getFormats("address.order"),infoStrategy:l.getSettings("geoobjects.infoStrategy"),regionName:c.getRegion().name})},u.prototype.getFirmReviewsData=function(){return a.assign({},this._firm.reviews,{isOrgReviews:this._isOrgReviews})},u.prototype.getLat=function(){return a.get(this._firm,"point.lat")},u.prototype.getLon=function(){return a.get(this._firm,"point.lon")},u.prototype.getContacts=function(){return a.get(this._firm,"contact_groups")},u.prototype.setIsOrgReviews=function(e){this._isOrgReviews=!!e},u.prototype.getIsOrgReviews=function(){return this._isOrgReviews},u.prototype.getFirmData=function(){return this._firm?{id:this.id,name:this.getFirmName(),address:this.getFirmAddress(),reviews:this.getFirmReviewsData(),lat:this.getLat(),lon:this.getLon(),contact_groups:this.getContacts(),branch_count:a.get(this._firm,"org.branch_count",1),reviews_count:a.get(this,"_reviewsCount",a.get(this,"_firm.reviews.general_review_count",0))}:null},u.prototype.getReviews=function(){return this._reviews},u.prototype.getReviewById=function(e){return a.find(this._reviews,{id:+e})},u.prototype.getCityName=function(){return s.getCityName(this._firm)||c.getRegion().name},u.prototype.hasNextPage=function(){return!!this._nextPage},u.prototype._loadFirmData=function(){var e=this;return e._firm?i.resolve():i.promisify(n.firms.reviewsInfo)(e.id,{}).then(function(t){return t?(e._firm=t,e._isOrgReviews=a.get(t,"reviews.is_org_reviews",!1),i.resolve()):i.reject({error:"No firm data received"})})},u.prototype._loadBranchesData=function(){var e=this;return e._branches?i.resolve():i.promisify(n.firms.orgReviewsInfo)(a.get(e._firm,"org.id"),{}).then(function(t){return t?(e._branches=t.data,i.resolve()):i.reject({error:"No branches data received"})})["catch"](function(e){return i.reject(e)})},u.prototype._getFilialData=function(e){var t=this,n=a.find(t._branches,function(t){return r.getStaticId(t.id)==e.branch_id});return{filialData:a.pick(n,["point","links","address"])}},u.prototype.loadData=function(){var e=this;return e._loadFirmData().then(function(){return e.getIsOrgReviews()?e._loadBranchesData():i.resolve()}).then(function(){var n=e.getIsOrgReviews()?a.get(e._firm,"org.id"):e.id,o={object_type:e.getIsOrgReviews()?"org":"branch"};return i.promisify(t.getFirmReviews)(n,o).then(function(t){return t?(t.reviews=e._processReviews(t.reviews),e._processData(t,!0),{firm:e.getFirmData(),reviews:e.getReviews()}):i.reject({error:"No reviews data received"})})})},u.prototype._processData=function(e,t){this._reviews=(!this._reviews||t?[]:this._reviews).concat(e.reviews),this._reviewsCount=a.get(e,"object.reviews_count");var n=a.findKey(e.offset_ids,function(e){return-1!=e});this._nextPage=n?e.offset_ids:null},u.prototype._processReviews=function(e){var t=this;return t.getIsOrgReviews()?a.map(e,function(e){return a.assign({},e,t._getFilialData(e))}):e},u.prototype.loadNextPage=function(){var e=this,n=e.getIsOrgReviews()?a.get(e._firm,"org.id"):e.id,o={offsetIds:e._nextPage,object_type:e.getIsOrgReviews()?"org":"branch"};return i.promisify(t.getFirmReviews)(n,o).then(function(t){return t?(t.reviews=e._processReviews(t.reviews),e._processData(t),t.reviews):i.reject({error:"No reviews data received"})})},u},t.exports._args=["app","$reviewsApi","$dgApi","$i18n","$regionManager"]},{bluebird:384,lodash:"lodash"}],138:[function(e,t,n){var a=e("lodash"),i=e("moment"),o=10;t.exports=function(e,t,n,r){function s(e,n){t.transport.stationsByType(e,{mutedForBssSearch:!0},function(e,t){return e?n(e):n(null,t)})}function l(e){var t=r.getItem(e);if(!t)return null;try{var n=JSON.parse(t),a=i().diff(i.unix(n.timestamp),"days");return a>o?(r.removeItem(e),null):n.data}catch(s){return r.removeItem(e),null}}function c(e,t){try{r.setItem(e,JSON.stringify({data:t,timestamp:i().unix()}))}catch(n){}}function u(){}return u.prototype.get=s,u.prototype.getSubwayStations=function(e){var t="metro",i=n.getRegion(),o="stations-"+t+"-"+i.id,r=l(o);return r?void e(r):void s(t,function(t,n){if(t)return void e();var i=a(a.get(n,"data",[])).map(function(e){return{name:e.name,color:a.get(e,"routes[0].color")}}).sortBy("name").value();c(o,i),e(i)})},u},t.exports._args=["app","$dgApi","$regionManager","$localStorage"]},{lodash:"lodash",moment:"moment"}],139:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=e("lodash"),o=e("node-uuid"),r=e("bluebird"),s=e("./utils"),l=200,c=req("helpers/firm");t.exports=function(e,t,n){function u(){return this._reset()}return u.prototype._reset=function(){return this._debouncedLoader={cancel:i.noop},this._tooltipData={},this._requestId="tooltips_"+o.v4(),this},u.prototype._runDebounced=function(e){this._debouncedLoader=i.debounce(e,l),this._debouncedLoader()},u.prototype.get=function(e){var t=this;if(this.stop(),!s.isAvailableType(e.type))return new r(i.noop);if(s.needGetData(e)){var n=function(){var n=s.genKey(e);return t._tooltipData[n]?{v:new r(function(a){t._runDebounced(function(){this._tooltipData[n].pixel=e.pixel,a(this._tooltipData[n])})})}:{v:new r(function(n,a){t._runDebounced(function(){t._load(e,function(i,o,r){if(200==r.code){var l=s.genKey(e);t._tooltipData[l]=t._reformat(e,o),n(t._tooltipData[l])}else a(i)})})})}}();if("object"===(void 0===n?"undefined":a(n)))return n.v}return new r(function(n){t._runDebounced(function(){n(this._reformat(e,e.data))})})},u.prototype.stop=function(){n.abortGroup(this._requestId),this._debouncedLoader.cancel()},u.prototype.dispose=function(){this.stop(),this._reset()},u.prototype._reformat=function(t,n){return s.reformat(t,n,e.searchContext.getFilters(),c.getRating(n))},u.prototype._load=function(e,a){var o=void 0,r=void 0;switch(e.type){case"geo":o=t.geo.profile(i.first(e.ids),{purpose:"tooltip"},a);break;case"poi":r={purpose:"tooltip",is_poi:"true"},e.poiHash&&(r.hash=e.poiHash),o=t.firms.profile(i.first(e.ids),r,a);break;case"firms":o=t.firms.profile(i.first(e.ids),{purpose:"tooltip"},a)}n.add(o,this._requestId)},u},t.exports._args=["app","$dgApi","$requestGroups"]},{"./utils":140,bluebird:384,lodash:"lodash","node-uuid":456}],140:[function(e,t,n){"use strict";var a=e("lodash");t.exports.isAvailableType=function(e){var t=["firms","geo","transport","station_platform","station","station_entrance","extraLayers","geolocation","traffic","globalCity","globalCountry","apartment","poi","parking","floors","waypoint","leg","ppnotEntrance"];return a.contains(t,e)},t.exports.genKey=function(e){return e.type+"-"+e.ids[0]},t.exports.needGetData=function(e){if("poi"==e.type&&"branch"==e.data.type)return!0;if(a.isEmpty(a.compact(e.ids)))return!1;switch(e.type){case"geo":return"unknown"!=a.get(e,"data.type");case"firms":return!0}return null},t.exports.reformat=function(e,t,n,i){var o=req("helpers/firm");t=t||{},e=e||{};var r=e.data||{};return{type:e.type,pixel:e.pixel,count:e.count,data:{type:t.type,subtype:r.subtype,name:r.name,description:r.description,adm_div:t.adm_div,address:t.address,purpose_name:t.purpose_name,branchesCount:a.get(t,"links.branches.count"),building_name:t.building_name,subtype_name:t.subtype_name,full_name:t.full_name,barrier:t.barrier,subtype_specification:t.subtype_specification,stop_factors:t.stop_factors,name_ex:t.name_ex,rating:o.getRating(t,i),schedule:t.schedule,is_advertising:r.is_advertising,attributes:o.separateAttributes(t),reg_bc_url:t.reg_bc_url,_hash:t._hash,hasScheduleFilters:!!(n||{}).work_time_mode&&"firms"==e.type,external_content:t.external_content,speed:r.speed,properties:r.properties}}}},{lodash:"lodash"}],141:[function(e,t,n){var a=e("bluebird");t.exports=function(e,t){function n(e){e=e||{},this.regionId=e.regionId}function i(e,n){return new a(function(a,i){var o={regionId:n.regionId};n._request=t.doRequest(e,o,function(e,t){e||t||(e={error:"Empty API data"}),e?i(e):t.error?i(t):(n._data=t,a(t))})})}return n.prototype.getForecast=function(){return i("getForecast",this)},n.prototype.getWeatherNow=function(){return i("getWeatherNow",this)},n.prototype.getData=function(){return this._data},n.prototype.dispose=function(){this._request&&this._request.cancel()},n},t.exports._args=["app","$weatherApi"]},{bluebird:384}],142:[function(e,t,n){t.exports=function(e,t){setTimeout(function(){var e={id:"141265769617911",ads:{text:"ДОЛГОСТОЙКИЕ ЗАЩИТНЫЕ ПОКРЫТИЯ АВТОМОБИЛЯ КЛАССА «ЛЮКС»",article:"MR.CAP — КОМПЛЕКС ТЕХНОЛОГИЙ ПО СОХРАНЕНИЮ, ВОССТАНОВЛЕНИЮ И ЗАЩИТЕ ИНТЕРЬЕРА И ЭКСТЕРЬЕРА АВТОМОБИЛЯ: FORMULA U — ПОЛИМЕРНОЕ ПОКРЫТИЕ ДЛЯ ЛКП, ЗАЩИЩАЕТ АВТОМОБИЛЬ ОТ АГРЕССИВНЫХ ФАКТОРОВ НА 3 ГОДА; SHINEALL — ПРЕДПРОДАЖНАЯ ПОДГОТОВКА; NEWMATIZING — ГЛУБОКАЯ ХИМЧИСТКА САЛОНА И МНОГОЕ ДРУГОЕ."}};t(e)},200)}},{}],143:[function(e,t,n){var a=e("querystring");t.exports=function(e){var t=e.location.search();return"?"==t[0]&&(t=t.substr(1,t.length)),a.parse(t)}},{querystring:400}],144:[function(e,t,n){var a=e("lodash"),i=req("lib/eventify"),o=e("slot/lib/defer");t.exports=function(e){function t(e){var t=e.split("_"),n=t[0];if(t.length>3)for(var a=1,i=t.length-2;i>a;a++)n+="_"+t[a];return n.toLowerCase()}function n(n,i,o){var r=n.header;r.code=t(i);var s=a.pick(n,"can_be_opened","has_updates","is_installed","is_outdated","is_preinstalled");return a.extend(r,s),o&&a.extend(r,o[i]),r.id==e.config.universeId&&(r.name=m._t("Выберите город")),l[r.id]=r,u[i]=r.id,d[r.id]=i,h[r.name]=r.id,c++,r}var r,s,l={},c=0,u={},d={},h={},p=DGOfflineAPI.systemContext.resolve("regionManager"),f=DGOfflineAPI.systemContext.resolve("updateManager"),m=e.requireComponent("i18n"),g=o(),_={};return f.startBackgroundWork(),p.regionInfoChanged.connect(function(t,i,o){var r,s=p.getRegionInfos(),c=s[t].header;return u[t]?(c&&(r=l[u[t]],a.difference(r.settlements,c.settlements).length&&(r.settlements=c.settlements,_.emit("settlementsChanged",u[t],c.settlements)),r.name!=c.name&&(r.name=c.name,_.emit("nameChanged",u[t],c.name))),void e.mainModuleReady.then(function(){_.emit("regionInfoChanged",u[t],i,o)})):(r=n(s[t],t),void _.emit("newRegionAdded",r))}),f.updateInfoChanged.connect(function(t,n,a){e.mainModuleReady.then(function(){_.emit("updateInfoChanged",u[t],n,a)})}),f.regionDownloadError.connect(function(t,n){t&&e.mainModuleReady.then(function(){_.emit("regionDownloadError",u[t],n)})}),_={initRegion:function(e){var t=d[e],n=p.getRegionContext(t),a=n.resolve("regionHeader").id,i=DGOfflineAPI.activeRegionContext.resolve("regionHeader").id,o=a==i;return o||DGOfflineAPI.setActiveRegion(n),r=DGOfflineAPI.activeRegionContext,p.setLastRegion(t),s=e,l[s]},getRegionQtContext:function(){return r},getRegions:function(){return l},getRegionByName:function(e){return l[h[e]]},getRegionsLength:function(){return c},lazyLoad:function(){if(!g.started){g.started=!0;var e=f.getUpdateInfos(),t=p.getRegionInfos();a.each(t,function(t,a){n(t,a,e)}),g.resolve(l)}return g.promise()},downloadRegion:function(e){return f.startForegroundRegionDownload(d[e])},stopDownloadingRegion:function(e){return f.stopForegroundRegionDownload(d[e])},deleteRegion:function(t){s==t&&_.emit("changeRegion",e.config.universeId),f.deleteRegion(d[t])}},i(_)}},{lodash:"lodash","slot/lib/defer":489}],145:[function(e,t,n){var a=e("lodash");t.exports=function(t,n,i){function o(e){var t=["id","name","code","bounds","default_pos","zoom_level","time_zone","country_code","domain","locale","name_grammatical_cases"];return e.default_pos.zoom||(e.default_pos.zoom=11),a.every(t,function(t){return!!e[t]})}function r(e){var n=t.registry.get("hostname"),a=n&&n.startsWith("2gis."),o=a&&n!=i._config("projectDomain",e.country_code);return o}function s(e){var t=[],n=(e.locale||"").split("_")[0],i=n;return a.isEmpty(e.online_languages)||(t=e.online_languages.available.split(","),i=e.online_languages.default_lang),a.extend(e,{availableLanguages:t.length>1&&t,defaultLanguage:i,dataLanguage:n,currentLanguage:i}),e}function l(e){var t=req("lib/geo/bound");return t.getWktBound(e)}function c(e){return o(e)?(e.bounds=l(e.bounds),e.redirectDomain=r(e),a.isArray(e.settlements)&&(e.settlements=e.settlements.sort()),e=s(e)):null}var u={},d=req("lib/eventify"),h=e("slot/lib/defer"),p=h(),f=t.config,m={initRegion:function(e){return u[e]},lazyLoad:function(){if(!p.started){p.started=!0;var e=t.requireComponent("dgApi"),i={},o=f.supportedLocales;o&&(i.locale_filter=o),e.region.list(i,function(e,i){var o=a.get(i,"items");if(e||a.isEmpty(o)||"ENOTFOUND"==i.code){var r=n.get("region");a.each(a.cloneDeep(f.emergencyProjects),function(e){e=c(e),e&&(u[e.id]=e)}),a.isEmpty(r)||(u[r.id]=r);var s;try{s=JSON.stringify(e)}catch(l){s=""+e}t.sendError("Couldn't load project list",{targetError:s&&s.substr(0,256),code:i&&i.code||null})}else a.each(o,function(e){e=c(e),e&&(u[e.id]=e)});p.resolve(u)})}return p.promise()},getRegions:function(){return u},getRegionsLength:function(){return u.length},getRegionQtContext:function(){return null},setRegions:function(e){u=e},getProjectByProjectName:function(e){return a.find(u,function(t){return t.name==e})}};return d(m)},t.exports._args=["app","$syncRegistry","$i18n"]},{lodash:"lodash","slot/lib/defer":489}],146:[function(e,t,n){var a=e("lodash"),i=req("helpers/string");t.exports=function(e){function t(e,t){var n=RegExp("(^|-| )"+i.escapeRegExp(e),"i");return n.exec(t)?t.indexOf(e)+1:null}function n(e,n){if(!e)return[];e=e.toLowerCase();var o=i.toLocal(e),r=a.compact(a.map(n,function(n){var i=a.compact([t(e,n.nameLower),t(o,n.nameLower)]);return i.length?(n.pos=Math.min.apply(this,i),n):null}));return a.sortBy(r,"pos")}function o(e){var t=[];return a.each(e,function(e){var n=a.findWhere(t,{id:e.id});n?(n.findBySettlement=n.findBySettlement||[],n.findBySettlement.push(a.first(e.findBySettlement))):t.push(a.cloneDeep(e))}),t}function r(t,i,r){var s=n(t,e.regions);return i&&(s=s.concat(n(t,e.settlements))),r&&(s=o(s)),a.map(s,function(e){return a.omit(e,"nameLower","pos")})}return r}},{lodash:"lodash"}],147:[function(e,t,n){var a=e("lodash");t.exports=function(e,t){function n(){var t=[];return a.each(e,function(e){t.push(a.defaults({nameLower:e.name.toLowerCase()},e))}),t}function i(){var t=[];return a.each(e,function(e){a.each(e.settlements,function(n){t.push(a.defaults({findBySettlement:[n],nameLower:n.toLowerCase()},e))})}),t}function o(e){return a.filter(e,function(e){return!a.contains(t,e.id)})}return{regions:o(n()),settlements:o(i())}}},{lodash:"lodash"}],148:[function(e,t,n){function a(e,t){switch(t){case"flamp":return i(e);case"foursquare":return o(e);default:return e}}function i(e){return{name:e.name,avatar:c.makePreview(e.image,"64_64"),reviewsCount:e.reviews_count}}function o(e){return{name:[e.first_name,e.last_name].join(" ").trim(),avatar:e.photo&&[e.photo.prefix,e.photo.suffix].join("64x64"),reviewsCount:e.reviews_count}}function r(e,t){return e?("flamp"==t?e.preview=c.makePreview(e.image,"100_100"):e.preview=e.image,e):null}function s(e){if(!e)return null;var t,n,a=e.business_account||null;return a&&(t=a.name,n=a.image),e={message:e.text,name:t,avatar:n}}var l=e("lodash"),c=req("helpers/flamp");t.exports=function(e){return e.reviews=l.map(e.reviews,function(e){return e.officialAnswer=s(e.official_answer),e.user=a(e.user,e.source),e.photo=r(e.photo,e.source),e}),e}},{lodash:"lodash"}],149:[function(e,t,n){"use strict";function a(e){var t=void 0,n=void 0;if("geo_type"in e)t="geo",n=e.geo_type;else{if("route_type"in e)return"route."+e.route_type;"station_type"in e&&(t="station",n=e.station_type)}return o[t+"-"+n]}var i=e("lodash"),o={"geo-district":"adm_div.district","geo-house":"address","geo-city":"city","geo-station":"station","geo-street":"street","geo-living_area":"adm_div.living_area","geo-metro":"station.metro","station-surface_transport":"station","station-metro":"station.metro","station-railway":"station.railway"};t.exports=function(e){return e.items=i.compact(i.map(e.data,function(e){e=e||{};var t=e.name||e.synonym;return t?{hint:{id:e.id,text:t,hint_type:a(e)||"geo"}}:null})),e.data=null,e}},{lodash:"lodash"}],150:[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e,t){function n(e,t,n){var i=e.toLowerCase();return n=n||t.length,a.transform(t,function(e,t){var a=t[0].text.toLowerCase();return a.startsWith(i)?e.push(t)<n:!1},[])}return function(i){var o=t.getData(),r=e.config.group("suggest.personal"),s=[];r.mixSearches&&(s=n(i,o.searches,r.numMixSearches));var l=n(i,o.branches,r.numMixBranches);return a.union(s,l)}},t.exports._args=["app","$personalApi"]},{lodash:"lodash"}],151:[function(e,t,n){"use strict";var a=e("lodash"),i=req("lib/request2"),o=e("./formatters/v1.9");t.exports=function(e,t,n){function r(e){e.result||(e.result={items:[]})}function s(e,t){
var n={key:d,region_id:m.id,lang:m.dataLanguage,q:e.query};return e.type&&(n.type=e.type),i("get",f).query(n).then(function(e){return a.isEmpty(e.body)?t("no data from suggestList"):(r(e.body),t(null,e.body.result,n.q))})["catch"](t)}function l(e,t){var n={key:d,where:m.id,lang:m.dataLanguage,output:"json"};return n=a.extend(n,e),i("get",p).query(n).then(function(e){return a.isEmpty(e.body)?t("no data from suggestCommon"):(r(e.body),t(null,o(e.body.result),n.what))})["catch"](t)}function c(e,t,n){if(!t||!e){var o={};return r(o),n(null,o,e),null}var s=p+"/attribute/list",l={key:d,q:e,tag:t,page_size:20,region_id:m.id};return i("get",s).query(l).then(function(t){return a.isEmpty(t.body)?n("no data from suggestWidgetItem"):(r(t.body),n(null,t.body.result,e))})["catch"](n)}function u(e,t,n){if(t&&e.trim().length<h.countForSearchCity){var o={};return r(o),n(null,o,e),null}var s=p+"/list",l={key:d,q:e,types:"adm_div.settlement"};return i("get",s).query(l).then(function(t){return a.isEmpty(t.body)?n("no data from suggestRegion"):(r(t.body),n(null,t.body.result,e))})["catch"](n)}var d=e.config["WebApi.key"],h=e.config.group("suggest"),p=e.config["WebApi.catalogUrl"]+"suggest",f=p+"/list",m=void 0;return n.onInit(function(e){m=e}),function(e,t,n,a){switch(n=n||{},t){case"catalog":return s({query:e},a);case"streets":return s({query:e,type:"street"},a);case"world":return u(e,!1,a);case"widget":return c(e,n.widgetTag,a);case"routeSearch":return l({what:e,type:"geo, station",geo_type:"house,living_area,place,sight,station",geo_limit:8,stations_limit:8},a);default:return null}}},t.exports._args=["app","$i18n","$regionManager"]},{"./formatters/v1.9":149,lodash:"lodash"}],152:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/string");t.exports=function(e,t,n){function o(e){e=e||{};var t=a.get(e,"project.id");if("foreign_city"==e.hint_type&&t){var o=n.getRegion(t);if(!o)return null;if((e.text||"").toLowerCase()!=(o.name||"").toLowerCase())return i.format("%1 (%2)",e.text,o.name)}return e.text}function r(e){if(!e)return null;var t=["adm_div.district","address","city","street","adm_div.division","adm_div.living_area","adm_div.settlement","building","building.trivial","road"];return e.startsWith("station")?"station":e.startsWith("route")?"route":a.contains(t,e)?"geo":e}function s(e){return e=e||{},!e.subtype&&e.hint_type?e.hint_type.split(".")[1]:null}var l={address:t._pt("Поиск","дом"),building:t._pt("Поиск","дом"),"building.trivial":t._pt("Поиск","дом"),city:t._pt("Поиск","город"),foreign_city:t._pt("Поиск","город"),street:t._pt("Поиск","улица"),"adm_div.settlement":t._pt("Поиск","нп"),"adm_div.district":t._pt("Поиск","район"),"adm_div.living_area":t._pt("Поиск","м/н"),"adm_div.division":t._pt("Поиск","АО"),"station.metro":t._pt("Поиск","станция метро"),"station.railway":t._pt("Поиск","ж/д станция"),station:t._pt("Поиск","остановка"),route:t._pt("Поиск","маршрут"),"route.bus":t._pt("Поиск","автобус"),"route.trolleybus":t._pt("Поиск","троллейбус"),"route.tram":t._pt("Поиск","трамвай"),"route.shuttle_bus":t._pt("Поиск","маршрутное такси"),"route.metro":t._pt("Поиск","метро"),"route.suburban_train":t._pt("Поиск","электричка"),"route.funicular_railway":t._pt("Поиск","фуникулер"),"route.monorail":t._pt("Поиск","монорельсовая дорога"),"route.river_transport":t._pt("Поиск","речной транспорт"),"route.cable_car":t._pt("Поиск","канатная дорога"),"route.light_rail":t._pt("Поиск","скоростной трамвай"),"route.premetro":t._pt("Поиск","метротрам"),"route.light_metro":t._pt("Поиск","лёгкое метро"),road:t._pt("Поиск","дорога")};return function(e){return a.compact(a.map(e,function(e){if(!e.hint)return null;var t=o(e.hint);return t?[{type:"text",tokenType:l[e.hint.hint_type],item:e,tail:t.slice(-10),text:t,highlighted_text:e.hint.highlighted_text,project:e.hint.project,id:e.hint.id,subtype:s(e.hint),hint_type:r(e.hint.hint_type)}]:null}))}},t.exports._args=["app","$i18n","$regionManager"]},{lodash:"lodash"}],153:[function(e,t,n){var a=e("lodash"),i=req("lib/request2");t.exports=function(e){return function(t,n,o,r){function s(e){return!a.has(e,"body.result")||a.has(e,"body.meta.error")?r(e.body||e):r(null,e.body.result)}var l=e.config["tyres.url"]+t;r=r||a.noop;var c=e.config["WebApi.sessionKeys"];a.extend(o,{key:e.config["WebApi.key"],user:e.cookie(c.user.cookieName),session:e.cookie(c.session.cookieName)});var u={};if(e.isServer){var d=e.registry.get("User-Agent");d&&(u["User-Agent"]=d.ua);var h=e.requireComponent("syncRegistry").get("X-Real-Referer");h&&(u["X-Real-Referer"]=h),e.registry.has("ip")&&(u["X-Real-IP"]=e.registry.get("ip"))}n=o.method||"GET";var p="GET"==n.toUpperCase()?"query":"send";return i(n,l)[p](o).withCredentials().set(u).then(s)["catch"](r)}}},{lodash:"lodash"}],154:[function(e,t,n){t.exports=function(e,t,n){return{isAnyMapAction:function(){var e="zoom"==this.module,t="map"==this.module||"online"==this.module&&"map"==this.element,a="map"==this.module&&"globalMarker"==this.element&&this.mods&&this.mods.countryIcon,i=(e||t)&&!a;return i&&n.get("global/citySelect")&&(n.del("global/citySelect"),n.replace()),i}}},t.exports._args=["app","$analytics","$appState"]},{}],155:[function(e,t,n){t.exports=function(e,t){return{isFromMoveMap:function(){var e="map"==this.module||"online"==this.module&&"map"==this.element,n="globalMarker"==this.element,a="zoom"==this.module,i=e&&!n||a,o=this.diff||{};return i&&("global"in o?o.global?t.trackEvent("google",["Global_city","City_out"]):t.trackEvent("google",["Global_city","City_in"]):"city"in o&&t.trackEvent("google",["Global_city","City_change",o.city.id])),i}}},t.exports._args=["app","$analytics"]},{}],156:[function(e,t,n){var a=e("lodash"),i=e("slot/lib/namer");t.exports=function(t){function n(e,t){t=t||{},this.type=e,this.module=t.block,this.element=t.element,this.mods=i.parseMods(t.className),this.className=t.className,this.diff=null,a.each(this.actionMethods,function(e,t){this[t]=a.bind(e,this)()},this)}return n.prototype.setDiff=function(e){e&&(this.diff=e,a.each(this.diffMethods,function(e,t){this[t]=a.bind(e,this)()},this))},n.prototype.diffMethods=t.invoke(e("./diffApi"),[t]),n.prototype.actionMethods=t.invoke(e("./actionApi"),[t]),n}},{"./actionApi":154,"./diffApi":155,lodash:"lodash","slot/lib/namer":493}],157:[function(e,t,n){var a=e("lodash"),i=e("slot/lib/namer");t.exports=function(t){function n(){this.storage=[],this.lastDiff=null}var o=t.invoke(e("./action"),[t]);return n.prototype.add=function(e,t){var n=new o(e,t);return this.pushNewAction(n),this},n.prototype.addWithCheck=function(e,t){return t.__eventProcessed?this:this.add(e,this.parseEvent(t))},n.prototype.manualAdd=function(e,t){e=e||"click",t=t||{};var n=i.parseElementClass(t.className)||{};n.className=t.className,t.module&&(n.block=t.module),t.element&&(n.element=t.element);var a=new o(e,n);return this.pushNewAction(a),this},n.prototype.parseEvent=function(e){var t=e.currentTarget,n=e.target||e.srcElement;(!t||t==document&&n)&&(t=n);var o=a.get(t,"className"),r=i.parseElementClass(o);if(!r){var s=$(t).data("module");s?(o=s,r={block:s}):(o="online__map",r=i.parseElementClass(o))}return r.className=o,r},n.prototype.setLastDiff=function(e){return this.lastDiff=e,this},n.prototype.addDiff=function(){var e=a.last(this.storage);return e&&(e.diff?this.add().addDiff():e.setDiff(this.lastDiff)),this.setLastDiff(),this},n.prototype.pushNewAction=function(e){this.storage.push(e),this.clean()},n.prototype.clean=function(){this.storage=this.storage.slice(-5)},n}},{"./action":156,lodash:"lodash","slot/lib/namer":493}],158:[function(e,t,n){var a=req("helpers/link");t.exports=function(e,t){var n={},i=t.region,o=t.i18n;n.desktop={type:"desktop",title:o._t("2ГИС для ПК"),href:a.getPcLink(i.id)},n.title=o._t("Установи 2ГИС");var r=t.isTablet?"tabletDashboard":void 0;return n.mobile=a.getMobileLinks(o,r),n}},{}],159:[function(e,t,n){var a=req("helpers/link"),i=req("helpers/firm"),o=req("helpers/outputify");t.exports=function(e,t){if(!e)return null;var n=t.region||{},r=t.i18n;return{name:o.getName(e.name_ex),address:i.getFirmAddress(e,{format:r.getFormats("firms"),infoStrategy:r.getSettings("geoobjects.infoStrategy"),useDrilldownInAddress:!0,regionName:n.name}),text:i.getArticle(e.ads),warning:i.getAdsWarning(e,"article"),advLink:a.getAdvLink(n,"articleCard",{},r.getLang())}}},{}],160:[function(e,t,n){t.exports=function(e){function t(t){return e.element("formSubmitBtn").mod({disabled:!t}),e.element("formSubmitBtn")}function n(){e.element("formFieldInput").parent().mod({error:!1}),e.element("popup").mod({error:!1})}var a={login:function(n){var a=e.element("formFieldEmail").val(),i=e.mod().showPasswords?e.element("formFieldClone").val():e.element("formFieldPassword").val(),o=e.element("formCaptchaFieldInput").val(),r=n&&o.length>0||!n;t(a.length>0&&i.length>0&&i.length<65&&a.length<65&&r)},signup:function(){var n=e.element("formFieldEmail").val(),a=e.element("formFieldPassword").val();t(n.length>0&&a.length>0&&a.length<65&&n.length<65)},recovery:function(){var n=e.element("formFieldEmail").val();t(n.length>0&&n.length<65)},change:function(n){var a=e.element("formFieldPassword").val(),i=e.element("formFieldConfirm").val(),o=e.element("formCaptchaFieldInput").val(),r=n&&o.length>0||!n;t(a.length>0&&i.length>0&&a.length<65&&i.length<65&&r)},responseConfirm:function(n){var a=e.element("formFieldConfirm").val(),i=e.element("formCaptchaFieldInput").val(),o=n&&i.length>0||!n;t(a.length>0&&a.length<65&&o)}};a.sendEmailLogin=a.login;var i={changeHandler:function(e,t){n(),"function"==typeof a[t]&&a[t](e)}};return i}},{}],161:[function(e,t,n){var a=e("lodash"),i=req("helpers/string"),o=req("helpers/link");t.exports=function(e,t,n){var r={};switch(r.type=e.type,r.authConfirmCode=e.authConfirmCode?e.authConfirmCode:"",r.type){case"login":r.privateOffice=e.ua.isPhone?!1:o.getPrivateOfficeLink(t,"auth",null,n.getLang()),r.title=e.title||n._t("Авторизация"),r.email=e.email,r.password=e.password;break;case"sendEmailLogin":r.title=n._gg("Авторизуйтесь, чтобы отправить письмо"),r.headerText=n._gg("Это необходимо, чтобы компании не получали спам"),r.email=e.email,r.password=e.password;break;case"response":r.title=e.title,r.text=e.text,r.showRetry=e.showRetry;break;case"change":r.email=e.email,r.title=n._t("Смена пароля");break;case"confirmed":case"responseConfirm":r.title=n._t("Почта подтверждена");break;case"recovery":r.title=n._t("Восстановление пароля");break;case"confirm":r.email=e.email,r.confirmEmailSentMessage=n._pt("Подтверждение регистрации","На %1 было выслано письмо. Воспользуйтесь ссылкой в письме, чтобы завершить регистрацию.",e.email),r.title=n._t("Подтверждение e-mail");break;case"signup":r.title=n._t("Регистрация"),r.agreement=n._config("helpLink.licensing"),r.email=e.email,r.password=e.password,r.privateOffice=e.ua.isPhone?!1:o.getPrivateOfficeLink(t,"auth",null,n.getLang());break;case"loyalty":r.loyalty=e.loyalty}return r.title||(r.title=n._t("Авторизация")),a.each(n.getSettings().socials,function(e){r["has"+i.capitalize(e)]=!0}),r},t.exports._args=["data","region","$i18n"]},{lodash:"lodash"}],162:[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e,t){e=e||[];var n=[],i=t.type,o=t.i18n,r=req("helpers/time"),s=req("helpers/roundMeters"),l=o._t("Пешеходные маршруты"),c=o._t("Автомобильные маршруты");return a.each(e.paths,function(e,t){if("number"==typeof t){var i={};i.routeId=t,i.duration=r.convertSeconds(e.total_duration,o),i.length=s.convertMeters(e.total_distance,o.getFormats("number")),i.note=e.algorithm||"",i.legs=[],a.each(e.maneuvers,function(e){var n={};n.steps=a.map(e,function(n,a){return{title:n.comment,note:n.outcoming_path_comment,icon:n.icon,routeId:t,legId:n.legId,stepId:a,forPrint:0===a||a===e.length-1}}),i.legs.push(n)}),n.push(i)}}),{routes:n,title:"pedestrian"==i?l:c}}},{lodash:"lodash"}],163:[function(e,t,n){var a=e("lodash"),i=e("moment");t.exports=function(e,t){var n=a.get(e,"data.items");if(e.is_final){var o=a(n).map(function(e){return a.map(a.get(e,"children.items"),function(e){return a.get(e,"orgs.items[0]")})}).flatten().compact().map(function(e){var t=e.opened_at,n=i(t).format("MMMM"),a=i(t).format("MM");return e["final"]=!0,{month:n,monthNum:a,org:e}}).value();e.groups=[],a.each(o,function(t){var n=a.find(e.groups,function(e){return e.title==t.month});n?n.items.items.push(t.org):e.groups.push({title:t.month,num:t.monthNum,items:{items:[t.org]}})}),e.groups=a.sortBy(e.groups,"num")}else{var r,s=t.openedRubric;e.categories=a.map(n,function(t){var n=!1;return s===t.name&&(n=!0,e.checkedCategory=t.name),{name:t.name,code:t.code,checked:n}}),s||(e.checkedCategory=e.categories[0].name,e.categories[0].checked=!0),r=a.find(n,"name",e.checkedCategory),e.groups=a.map(a.get(r,"children.items"),function(e){return{title:e.name,code:e.code,items:e.orgs}}),e.text=r.text}return e.header=a.includes(["ru","cl"],t.region.domain)?t.region.domain:void 0,e.regionGenitiveName=a.get(t,"region.name_grammatical_cases.genitive")||"",e.regionPrepositionalName=a.get(t,"region.name_grammatical_cases.prepositional")||"",e}},{lodash:"lodash",moment:"moment"}],164:[function(e,t,n){t.exports=function(e){var t={apartmentTypesValues:{1:e._gg("1-комнатные"),2:e._gg("2-комнатные"),3:e._gg("3-комнатные"),4:e._gg("4-комнатные"),5:e._gg("5-комнатные"),euro:e._gg("Студии"),duplex:e._gg("2-уровневые"),office:e._gg("Офисные помещения"),cottage:e._gg("Коттеджи"),penthouse:e._gg("Пентхаус"),townhouse:e._gg("Таунхаус")},houseTypes:{panel:{title:e._gg("Панельный"),icon:"panel"},brick:{title:e._gg("Кирпичный"),icon:"bricks"},monolith:{title:e._gg("Монолитный"),icon:"panel"},monolithBrick:{title:e._gg("Монолитно - кирпичный"),icon:"bricks"},panelBrick:{title:e._gg("Панельно - кирпичный"),icon:"panel"},autoclavedAeratedConcrete:{title:e._gg("Сибит"),icon:"sibit"}},furnishTypes:{fine:{title:e._gg("С отделкой")},self:{title:e._gg("Без отделки")}},parkingTypes:{aboveGround:e._gg("Надземный"),underGround:e._gg("Подземный")},securityTypes:{survillance:e._gg("Видеонаблюдение"),coveredSpace:e._gg("Закрытая территория"),concierge:e._gg("Консьерж")},houseYardTypes:{playground:e._gg("Детская площадка"),bicyclePath:e._gg("Велосипедные дорожки"),park:e._gg("Озеленение"),sportsground:e._gg("Спортивная площадка"),rest:e._gg("Места отдыха"),illumination:e._gg("Комплексное освещение")},bankLogos:{zhivagobank:"zhivagobank.jpg",zhilicshnogo_finansirovanijja:"zhilicshnogo_finansirovanijja.jpg",zenit:"zenit.jpg",zapsibkombank:"zapsibkombank.jpg",yunikredit_bank:"yunikredit_bank.jpg",yug_invest_bank:"yug_invest_bank.jpg",vyborg:"vyborg.jpg",vtb_24:"vtb_24.jpg",vozrozhdenie:"vozrozhdenie.jpg",volzhskyi_socialnyi_bank:"volzhskyi_socialnyi_bank.jpg",volgo_kamskiy:"volgo_kamskiy.jpg",volga_kredit_bank:"volga_kredit_bank.jpg",vok_bank:"vok_bank.jpg",vneshprombank:"vneshprombank.jpg",vitabank:"vitabank.jpg",ussuri:"ussuri.jpg",uraltransbank:"uraltransbank.jpg",uralsib:"uralsib.jpg",uralprombank:"uralprombank.jpg",uralfd:"uralfd.jpg",uglemetbank:"uglemetbank.jpg",ug_invest_bank:"ug_invest_bank.jpg",trast:"trast.jpg",transportnyi:"transportnyi.jpg",transkreditbank:"transkreditbank.jpg",transkapitalbank:"transkapitalbank.jpg",transcapital:"transcapital.jpg",tatsocbank:"tatsocbank.jpg",tatfondbank:"tatfondbank.jpg",tagilbank:"tagilbank.jpg",svyaz_bank:"svyaz_bank.jpg",surgutneftegazbank:"surgutneftegazbank.jpg",stroylesbank:"stroylesbank.jpg",strojjkredit:"strojjkredit.jpg",strategiya:"strategiya.jpg",starbank:"starbank.jpg",spytnik:"spytnik.jpg",spurt_bank:"spurt_bank.jpg",spirit_bank:"spirit_bank.jpg",soyuz_bank:"soyuz_bank.jpg",sovetskiy:"sovetskiy.jpg",sokidarnost:"sokidarnost.jpg",sofrino_bank:"sofrino_bank.jpg",snezhinskiy:"snezhinskiy.jpg",smp_bank:"smp_bank.jpg",smolensky_bank:"smolensky_bank.jpg",skb_bank:"skb_bank.jpg","severo-zapadniy-1-allians-bank":"severo-zapadniy-1-allians-bank.jpg",sberbank:"sberbank.jpg",sber_invest_bank:"sber_invest_bank.jpg",sbbank:"sbbank.jpg",saratov_bank:"saratov_bank.jpg",rusuzhbank:"rusuzhbank.jpg",russtrojjbank:"russtrojjbank.jpg",russkiy_ipotechnyi:"russkiy_ipotechnyi.jpg",rusbank:"rusbank.jpg",rublev:"rublev.jpg",rost:"rost.jpg",rossijjskijj_kapital:"rossijjskijj_kapital.jpg",rossijja:"rossijja.jpg",rosselkhozbank:"rosselkhozbank.jpg",rosinterbank:"rosinterbank.jpg",rosgosstrakh_bank:"rosgosstrakh_bank.jpg",rosevrobank:"rosevrobank.jpg",rosenergobank:"rosenergobank.jpg",rosavtobank:"rosavtobank.jpg",rininvestbank:"rininvestbank.jpg",riabank:"riabank.jpg",renessans:"renessans.jpg",rajjffajjzenbank:"rajjffajjzenbank.jpg",pushkino:"pushkino.jpg",promtransbank:"promtransbank.jpg",promsvyazbank:"promsvyazbank.jpg",promservisbank:"promservisbank.jpg",proektnogo_finansirovaniya:"proektnogo_finansirovaniya.jpg",primsotsbank:"primsotsbank.jpg",pochto_bank:"pochto_bank.jpg",plyus:"plyus.jpg",petrokommerc:"petrokommerc.jpg",pervyi_exspress_bank:"pervyi_exspress_bank.jpg",pervobank:"pervobank.jpg",otkrytie:"otkrytie.jpg",opm_bank:"opm_bank.jpg",obyedinennyiy_kapital:"obyedinennyiy_kapital.jpg",obrazovanie:"obrazovanie.jpg","nst-bank":"nst-bank.jpg",ns_bank:"ns_bank.jpg",novahov_kapital_bank:"novahov_kapital_bank.jpg",nordea:"nordea.jpg",nomos_bank:"nomos_bank.jpg",niko_bank:"niko_bank.jpg",nbd_bank:"nbd_bank.jpg",nats_corp_bank:"nats_corp_bank.jpg",mts_bank:"mts_bank.jpg",mosstroyekonombank:"mosstroyekonombank.jpg",moskovskyi_oblastnoy_bank:"moskovskyi_oblastnoy_bank.jpg",moskovskyi_kreditnyi_bank:"moskovskyi_kreditnyi_bank.jpg",moskovskijj_industrialnijj:"moskovskijj_industrialnijj.jpg",moskommercbank:"moskommercbank.jpg",moi_bank_ipoteka:"moi_bank_ipoteka.jpg",moi_bank:"moi_bank.jpg",miraf_bank:"miraf_bank.png",mezhtopehnergobank:"mezhtopehnergobank.jpg",metropolbank:"metropolbank.jpg",metkombank:"metkombank.jpg",metallinvestbank:"metallinvestbank.jpg",mdm_bank:"mdm_bank.jpg",master_bank:"master_bank.jpg",lokobank:"lokobank.jpg",levoberezhnyjj:"levoberezhnyjj.jpg",kuban_kredit:"kuban_kredit.jpg",kredit_evropa_bank:"kredit_evropa_bank.jpg",krayinvestbank:"krayinvestbank.jpg",konfidens_bank:"konfidens_bank.jpg",kompaniya_roznichnogo_kreditovaniya:"kompaniya_roznichnogo_kreditovaniya.jpg",kedr:"kedr.jpg",kastromaselkhozbank:"kastromaselkhozbank.jpg",kamskyi_kommercheskyi_bank:"kamskyi_kommercheskyi_bank.jpg",kamskyi_gorizont:"kamskyi_gorizont.jpg",j_and_t:"j_and_t.jpg",itbbank:"itbbank.jpg",itbank:"itbank.jpg",investtorgbank:"investtorgbank.jpg",investkapitalbank:"investkapitalbank.jpg",investitsionnyi_respublikanskyi_bank:"investitsionnyi_respublikanskyi_bank.jpg",inteza:"inteza.jpg",interprombank:"interprombank.JPG",interkomerts:"interkomerts.jpg",intehbank:"intehbank.jpg",hanty_mansiysky_bank:"hanty_mansiysky_bank.jpg",gorod:"gorod.jpg",globehksbank:"globehksbank.jpg",genbank:"genbank.jpg",gazprombank:"gazprombank.jpg",gazbank:"gazbank.jpg",forshtadt:"forshtadt.jpg",forbank:"forbank.jpg",fininvest:"fininvest.jpg",fia_bank:"fia_bank.jpg",evrosity_bank:"evrosity_bank.jpg",energomashbank:"energomashbank.jpg",energobank:"energobank.jpg",ekspress_kredit:"ekspress_kredit.jpg",ekonombank:"ekonombank.jpg",ehkspobank:"ehkspobank.jpg",deltakredit:"deltakredit.png","dalnevostochnyi ":"dalnevostochnyi .jpg",cheljabinvestbank:"cheljabinvestbank.jpg",chelindbank:"chelindbank.jpg",byistrobank:"byistrobank.jpg",bulgar_bank:"bulgar_bank.jpg",bta_kazan:"bta_kazan.JPG",bfa_bank:"bfa_bank.jpg",bash_invest_bank:"bash_invest_bank.jpg",bankirskiy_dom:"bankirskiy_dom.jpg",bank_moskvy:"bank_moskvy.jpg",baltinvest:"baltinvest.jpg",baltika_bank:"baltika_bank.jpg",avtograd_bank:"avtograd_bank.png",avb_bank:"avb_bank.jpg",asiatsko_tihookeanskiy:"asiatsko_tihookeanskiy.jpg",alfa_bank:"alfa_bank.jpg",aleksandrovskiy:"aleksandrovskiy.jpg",alef_bank:"alef_bank.jpg",akkobank:"akkobank.jpg",akibank:"akibank.jpg",akcept:"akcept.jpg",akb_rosbank:"akb_rosbank.jpg",ak_bars_bank:"ak_bars_bank.jpg",agrosoyuz_bank:"agrosoyuz_bank.jpg",agropromkredit:"agropromkredit.jpg",af_bank:"af_bank.jpg",admiraltejskiy:"admiraltejskiy.jpg",absolyut:"absolyut.jpg","PSKB (peterburgskiy_sotsialnyi_kommercheskyi_bank)":"peterburgskiy_sotsialnyi_kommercheskyi_bank.jpg"}};return t},t.exports._args=["$i18n"]},{}],165:[function(e,t,n){var a=e("lodash"),i=req("helpers/seo"),o=req("helpers/booklet");t.exports=function(e,t,n,r){var s={getSeoParams:function(s,l){var c,u,d=i.detectCityType(r),h=n.panels.get("rubricsNear"),p=!a.isEmpty(h);if("about"!=l.subpageName){c=l.subpageName;var f=o.getBuildingsMenuItems(t),m=a.find(f,{id:l.subpageName});u=m&&m.title}var g="booklet";u&&(g="bookletPage"),p&&(g="rubricsNear");var _=[];if(l.apartmentLayouts&&l.apartmentLayouts.minArea&&_.push(t._gg("от %1 тыс.руб за м²",l.apartmentLayouts.minArea)),s.modules.maininfo.release){var v=s.modules.maininfo.release.split("-");_.push(t._gg("Срок сдачи %1кв %2",v[1],v[0]))}_=a.union(_,l.shortInfo.apartmentTypes),l.infrastructure&&(l.infrastructure.houseType&&_.push(l.infrastructure.houseType.title),l.infrastructure.furnishTypes&&(_=a.union(_,a.pluck(l.infrastructure.furnishTypes,"title"))));var y={type:g,bookletType:"buildings",bookletId:s.bookletId,cityType:d.type,cityNamePrepositional:d.prepositional,cityName:d.name,city:d.code,subpageName:c,pageTitle:u,bookletName:s.title,firmName:s.modules.maininfo.companyName,address:s.address,attributes:_.join(", ")};return p&&a.extend(y,{rubrics:h.rubrics.join(","),lon:h.lon,lat:h.lat}),i.getSeoParams(y,e,t)}};return s},t.exports._args=["origin","$i18n","$appState","$regionManager"]},{lodash:"lodash"}],166:[function(e,t,n){var a=e("lodash"),i=req("helpers/string");t.exports=function(t,n,o){var r=e("./viewModelHelper.js")(n,o);if(!t)return null;var s={},l=t.modules,c=t.properties,u=o.getFormats().currency;s.currency=a.extend(u,{code:u.id.toLowerCase()}),s.isEditor=t.is_owner,s.templateName=t.template_name,s.title=c.title,s.subtitle=l.maininfo.companyName,s.subpageName=t.subpageName,s.editorEnabled="covers"===s.subpageName||"logos"===s.subpageName,s.firm_id=t.firm_id,s.address=t.address,s.phone=l.maininfo.phone,s.emailForRequest=l.requests&&l.requests.email,s.properties=t.properties,s.defaultCover=t.defaultCover,s.defaultLogo=t.defaultLogo,s.mapsDomain=t.mapsDomain,s.bookletCode=t.bookletCode=t.alias||t.code,s.isAdvertiser=t.is_advertiser&&t.is_advertiser===!0;var d="",h="http://"+t.configDomain+"/";if(t.firm_id){var p=t.firm_id;d=h+"booklets/"+p}else d=h;s.widgetUrl=t.widgetUrl=d;var f=l.maininfo.release,m="",g="",_=["I","II","III","IV"];if(6===f.length){var v=f.split("-");g=v[0].substr(2),m=parseInt(v[1],10),_[m-1]&&(m=_[m-1])}var y=t.extra&&t.extra.new_building_done||"finished"===l.maininfo.release,b=l.maininfo.start,k="",w="";if(6===b.length){var x=b.split("-");w=x[0].substr(2),k=parseInt(x[1],10),_[k-1]&&(k=_[k-1])}s.shortInfo={maxFloors:l.maininfo.maxFloors,minPrice:l.maininfo.minPrice,releaseQuarter:m,releaseYear:g,finished:y,startQuarter:k,startYear:w};var C="";l.maininfo.slogan&&l.maininfo.description&&(C=l.maininfo.description.replace(/\n/g,"<br>"),s.description={slogan:l.maininfo.slogan,description:i.cutTags(C,"<br>")});var L=r.getLayoutsAlbums({model:t,currency:s.currency});if(L&&L.length&&(s.apartmentLayouts=r.getLayoutsData({albums:L,currency:s.currency}),s.shortInfo.minFullPrice=s.apartmentLayouts.minPrice?s.apartmentLayouts.minPrice:!1,s.apartmentLayouts.apartmentsTypes&&(s.shortInfo.apartmentTypes=r.getApartmentTypes(s.apartmentLayouts.apartmentsTypes),s.showMoreApartments=s.shortInfo.apartmentTypes.length>4?s.shortInfo.apartmentTypes.length:!1),s.apartmentLayouts.filters=r.getLayoutsFilters(s.apartmentLayouts.apartmentsTypes),s.apartmentLayouts.albumsTemplate="layouts",s.apartmentLayouts.oneAlbum=1===L.length?L.length:!1),t.apartmentsData&&(s.apartmentsBlock=r.getApartmentsBlock(t.apartmentsData),s.apartmentsGroups=r.getApartmentsGroups(t.apartmentsData)),s.flatsVariants=!s.apartmentsBlock&&r.getApartmentTypes(l.maininfo.apartmentTypes),s.showMoreFlats=s.flatsVariants.length>4?s.flatsVariants.length:!1,l.payments&&l.payments.length){s.hypothec=a.find(l.payments,function(e){return"hypothec"===e.id}),s.tradein=a.find(l.payments,function(e){return"tradein"===e.id}),s.installment=a.find(l.payments,function(e){return"installment"===e.id}),s.socialPrograms=a.find(l.payments,function(e){return"social"===e.id}),s.isPaymentTypes=!!(s.tradein||s.installment||s.socialPrograms);var I="",T=0;if(s.hypothec){var S=s.hypothec.description.replace(/\n/g,"<br>");s.hypothec.description=i.cutTags(S,"<br>"),a.each(s.hypothec.banks,function(e){e.percent&&(I=""+e.percent,T=I.indexOf(".")?I.indexOf("."):!1,T>0&&(e.separator=T,e.sepBefore=I.slice(0,T),e.sepAfter=I.slice(T+1,I.length))),e.isPercentAndTerm=!(!e.percent||!e.term),e.logo=r.getBankLogo(e.alias)}),s.hypothec.banks&&s.hypothec.banks.length&&(s.isHypothec=!0,s.showMoreBanks=s.hypothec.banks.length>5?s.hypothec.banks.length:!1,s.firstBanks=s.hypothec.banks.slice(0,3),s.hypothecColumns=Math.min(s.firstBanks.length,3))}if(s.socialPrograms){var E=s.socialPrograms.description.replace(/\n/g,"<br>");s.socialPrograms.description=i.cutTags(E,"<br>")}if(s.tradein){var P=s.tradein.description.replace(/\n/g,"<br>");s.tradein.description=i.cutTags(P,"<br>")}if(s.installment){var j=s.installment.description.replace(/\n/g,"<br>");s.installment.description=i.cutTags(j,"<br>")}s.payments=s.hypothec||s.tradein||s.installment||s.socialPrograms}t.computed&&(s.infrastructureBlock=r.getInfrastructureBlockData(t));var M;if(l.infrastructure){if(s.infrastructure=r.prepareInfrastructureData(l),M=r.prepareAlbums(t,[{photos:l.infrastructure.photos}],"infrastructure"),M.length){var A=M[0].photos;s.infrastructure.photos=A,s.infrastructure.photoWidget={count:A.length,big:A[0],small:A.length>2&&A.slice(1,3)}}s.infrastructure.photoWidget&&(s.infrastructure.features||s.infrastructure.landscaping)&&(s.infrastructure.featuresAtTheBottom=!0),!s.infrastructure.photoWidget&&s.infrastructure.features&&s.infrastructure.landscaping&&(s.infrastructure.featuresAtTheTop=!0)}if(t.computed&&t.computed.nearest&&t.computed.nearest.length){var D=a.take(t.computed.nearest,9),R={};t.computed.point&&a.each(D,function(e){var n;e.point&&(n=r.getDistance(t.computed.point,e.point),n=Math.round(n),e.distance=n);var a=e.code;(!R[a]||n&&n<R[a].radius)&&(R[a]=e)});var N=a.toArray(R);N.sort(function(e,t){return void 0===e.distance?1:e.distance-t.distance}),a.each(N,function(e){e.distance&&(e.distance>1e3?(e.distance=Math.round(e.distance/100)/10,e.distance>=10&&(e.distance=Math.round(e.distance)),e.distance+=o._gg(" км")):e.distance+=o._gg(" м"))}),s.others=N,s.showMoreOthers=s.others.length>3?s.others.length:!1}var B;l.progress&&l.progress.length&&(B=r.prepareAlbums(t,l.progress,"progress"),s.progress={albums:B,oneAlbum:1===B.length,albumsTemplate:"progress"});var F,O;if(B&&B.length?(F=B[0],O=o._gg("Ход стройки")):M&&M.length?(F=M[0],O=o._gg("Инфраструктура")):L&&L.length&&(F=L[0],O=o._gg("Цены и планировки")),F){var z=a.take(F.photos,3);s.aboutPhotos={title:O,count:F.count,big:z[0],small:z.length>2&&z.slice(1,3)}}var q=[];l.docs&&l.docs.length&&(a.each(l.docs,function(e){if(e.src){var t,n;if(e.src.original&&e.src.original.length){var i=e.src.original;t=a.last(i.split(".")),n=e.src.w464h344||e.src.w500?e.src.w464h344||e.src.w500:e.src.original}else t=a.last(e.src.split("."));if(t&&t.length){if(e.extension=t,e.original=e.src.original||e.src,e.title=e.title||o._gg("Без названия"),e.thumb=n?n:!1,e.size){var r;e.size>=1048576?(r=(e.size/1048576).toFixed(1),e.dimension="MB"):e.size<1048576&&e.size>=1024?(r=(e.size/1024).toFixed(),e.dimension="KB"):(r=e.size,e.dimension="B"),e.shortSize=r}q.push(e)}}}),s.firstDocs=q.slice(0,6),s.allOtherDocs=q.slice(6,q.length),s.docs=q);var $=l.maininfo.companyName,U=l.maininfo.declarationUrl;$&&$.length&&U&&U.length&&(s.footerInfo={companyName:$,declarationUrl:U});var H=l.maininfo.maxFloors&&l.maininfo.minPrice&&l.maininfo.release,G=t.payments&&t.payments.id&&"hypothec"===t.payments.id;return s.isShortInfoAndPhoto=H&&s.aboutPhotos||G,s.isShortInfoWithoutPhoto=H&&!s.aboutPhotos&&!G,s},t.exports._args=["model","slot","$i18n"]},{"./viewModelHelper.js":167,lodash:"lodash"}],167:[function(e,t,n){var a=e("lodash"),i=req("helpers/string"),o=req("helpers/booklet");t.exports=function(t,n){function r(e,t){var n,a,i,o,r,s,l=6378137;return n=(t.lat-e.lat)*Math.PI/180,a=(t.lon-e.lon)*Math.PI/180,i=e.lat*Math.PI/180,o=t.lat*Math.PI/180,r=Math.sin(n/2)*Math.sin(n/2)+Math.sin(a/2)*Math.sin(a/2)*Math.cos(i)*Math.cos(o),s=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),l*s}function s(e,t,i){return e&&t&&t.length?(t=a.filter(t,function(e){return e.photos&&e.photos.length}),a.each(t,function(o){a.each(o.photos,function(t){t.mapsDomain=e.mapsDomain,t.bookletCode=e.bookletCode,t.thumbnail=t.urls&&t.urls.w500||t.urls.original,t.section=i,t.albumId=o.id}),o.thumbnail=o.photos[0].thumbnail,o.section=i,o.count=o.photos.length,o.single=1===t.length,o.title||(o.title=n._gg("Альбом без названия")),o.isEditor=e.is_owner,o.widgetUrl=e.widgetUrl}),t):[]}function l(e){return a.indexOf(m,e.apartment_type)}function c(e){return a.indexOf(m,e.typeId)}function u(e){return a.get(e,"full_cost.value")}function d(e){var t,o=e.apartment_type,r=a.first(/\d(?=-room$)/.exec(o));r?t=n._gg("%1-комнатные ",r):"euro"===o&&(t=n._gg("Студии "));var s=a.get(e,"full_cost.value","");s&&(s=i.numberString(s,n.getFormats("number")));var l=n.getFormats().currency;return{id:e.id,typeId:o,type:t,firm:e.firm,price:s,currency:a.extend({},l,{code:l.id.toLowerCase()}),area:e.apartment_size,floor:e.floor,link:e.link}}function h(e){var t=a.first(e);return{typeId:t.typeId,title:t.type,items:e,showMore:e.length>5}}var p=e("./dictionaries.js")(n),f=t.requireComponent("wkt"),m=["euro","1-room","2-room","3-room","4-room","5-room"];return{getDistance:r,prepareAlbums:s,getLayoutsAlbums:function(e){var t=e.model,n=e.currency,i=t.modules.apartmentLayouts;return a.each(i,function(e){e.photos=a.filter(e.photos,function(e){return e.details&&e.details.onSale}),a.each(e.photos,function(e){e.details.minPrice&&(e.price={min:e.details.minPrice,currency:n}),e.details.totalArea&&(e.totalArea={min:e.details.totalArea})})}),i=s(t,i,"apartmentLayouts")},getLayoutsData:function(e){var t,o,r,s,l=e.albums,c=e.currency,u=[];return a.each(l,function(e){var l=[],d=[];if(a.each(e.photos,function(e){"string"==typeof e.details.minPrice&&(e.details.minPrice=parseFloat(e.details.minPrice.replace(",","."))),e.details.minPrice&&l.push(e.details.minPrice),"string"==typeof e.details.totalArea&&(e.details.totalArea=parseFloat(e.details.totalArea.replace(",","."))),e.details.totalArea&&d.push(e.details.totalArea)}),l.length){var h=a.min(l),f=a.max(l);e.price={min:h,max:f>h?f:null,currency:c},(void 0===t||t>h)&&(t=h),(void 0===o||f>o)&&(o=f)}if(d.length){e.totalArea={};var m=a.min(d),g=a.max(d);(void 0===r||r>m)&&(r=m),(void 0===s||g>s)&&(s=g);var _=n.getFormats("number");e.totalArea.min=i.numberString(a.min(d),_),e.totalArea.max=g>m?i.numberString(g,_):null}a.each(e.photos,function(e){if(e.details.apartmentType){var t=e.details.apartmentType;p.apartmentTypesValues[t]&&u.push(t)}})}),u=a.sortBy(u,function(e){return e.charCodeAt()}),u=a.uniq(u),{albums:l,apartmentsTypes:u,minPrice:Math.floor(t),maxPrice:Math.ceil(o),minArea:Math.floor(r),maxArea:Math.ceil(s),isPriceAndArea:(t||o)&&(r||s),currency:c}},getLayoutsFilters:function(e){var t=e,i=a.intersection(t,["euro","1","2","3","4","duplex"]),o=a.intersection(t,["office","cottage"]);if(i.length&&o.length||i.length>1||o.length>1){var r=[{value:"apartment",label:n._gg("квартира"),disabled:!i.length},{value:"cottage",label:n._gg("коттедж"),disabled:!a.contains(t,"cottage")},{value:"office",label:n._gg("коммерческое помещение"),disabled:!a.contains(t,"office")}],s=[{value:"1",label:"1",disabled:!a.contains(t,"1")},{value:"2",label:"2",disabled:!a.contains(t,"2")},{value:"3",label:"3",disabled:!a.contains(t,"3")},{value:"4plus",label:"4+",disabled:!a.contains(t,"4")},{value:"euro",label:n._gg("студия"),disabled:!a.contains(t,"euro")},{value:"duplex",label:n._gg("двухуровневая"),disabled:!a.contains(t,"duplex")
}];return{realtyFilters:r,flatFilters:s}}return null},getApartmentTypes:function(e){var t=[];return e&&e.length&&(t=a.compact(a.map(e,function(e){return p.apartmentTypesValues[e]}))),t},getBankLogo:function(e){var n="/assets/bookletBuildings/banks/",i="",o="default_bank.png";return a.each(p.bankLogos,function(t,n){e.indexOf(n)>-1&&n.length>i.length&&(i=n,o=t)}),{url:t.location.uri(n+o),isDefault:0===i.length}},getInfrastructureBlockData:function(e){if(!e||!e.computed)return null;var t=e.modules.infrastructure,i=o.getAllRubrics({i18n:n});a.each(i,function(e,t){e.index=t});var s=e.computed&&e.computed.markers,l=[],c=[],u=!1;t&&a.isArray(t.social)&&(a.each(s,function(e){a.each(i,function(t){t.count||(t.count=0),e.type===t.staticMarker&&t.count++})}),l=a.compact(a.map(t.social,function(e){var t=a.where(i,{code:e}),n=t[0];return n.indeces=a.pluck(t,"index").join(","),n.count>0?n:null})),c=a.uniq(l,function(e){return e.staticMarker}),c.length&&(u=[]),a.each(c,function(e){var t=e.indeces.split(",");u=u.concat(t)}));var d=e.computed&&e.computed.point,h="",p="",m=a.map(e.computed.stops,function(e){return e=a.pick(e,"id","name","platforms"),e.dist=a.min(a.map(e.platforms,function(e){return h=f.parsePoint(e.geometry.centroid),p=Math.round(r(d,h))})),e});return{showMap:!!d,rubrics:c,collapseRubrics:l.length>4,rubricIds:u,stops:m}},prepareInfrastructureData:function(e){if(!e||!e.infrastructure)return null;var t,n=e.infrastructure,o="",r={};if(n.parking){var s=[];a.each(n.parking,function(e,t){e&&s.push({name:p.parkingTypes[t],value:parseInt(e,10)||null})}),s.length&&(r.parking=s)}return n.security&&(r.security=a.map(n.security,function(e){return p.securityTypes[e]})),n.houseYard&&(r.houseYard=a.map(n.houseYard,function(e){return p.houseYardTypes[e]})),n.furnishType&&(t=a.map(n.furnishType,function(e){return p.furnishTypes[e]})),n.landscaping&&(o=n.landscaping.replace(/\n/g,"<br>"),o=i.cutTags(o,"<br>")),{flatsNumber:n.flatsNumber,houseType:n.houseType&&p.houseTypes[n.houseType],furnishTypes:t,landscaping:o?o:!1,features:!a.isEmpty(r)&&r}},getApartmentsBlock:function(e){return a.chain(e.items).sortBy(u).uniq("apartment_type").sortBy(l).map(d).value()},getApartmentsGroups:function(e){return a.chain(e.items).sortBy(u).map(d).groupBy("typeId").map(h).sortBy(c).value()}}},t.exports._args=["slot","$i18n"]},{"./dictionaries.js":164,lodash:"lodash"}],168:[function(e,t,n){var a=e("lodash");t.exports=function(e){var t=a.pick(e,"defaultCover","defaultLogo");return a.extend(t,{cover:e.properties&&e.properties.cover,coverTop:e.properties&&e.properties.cover_top,logo:e.properties&&e.properties.logo,coversCollection:e.properties&&e.properties.covers_collection,logosCollection:e.properties&&e.properties.logos_collection,templateName:e.templateName||e.template_name}),t.logo&&t.logo!==t.defaultLogo||(t.isDefaultLogo=!0),t}},{lodash:"lodash"}],169:[function(e,t,n){var a=e("lodash"),i=req("helpers/booklet");t.exports=function(e,t){var n=e,o=t.requireComponent("i18n"),r=t.config["booklet.coverTop"];if(n.cover=e.properties&&e.properties.cover,n.logo=e.properties&&e.properties.logo,n.defaultCover=n.defaultCover||t.location.uri("/assets/bookletHeader/default_cover.jpg"),n.isDefaultCover=n.defaultCover==n.cover,n.defaultLogo=n.defaultLogo||t.location.uri("/assets/bookletHeader/default_logo.png"),n.isDefaultLogo=!n.logo||n.defaultLogo==n.logo,a.has(e,"properties.cover_top")?n.coverTop=e.properties.cover_top:n.coverTop=r,n.templateName=e.templateName||e.template_name,n.title=e.title,e.firm&&e.firm.address_name&&(n.address=e.firm.address_name),"buildings"===e.templateName){n.isBuildings=!0;var s=i.getBuildingsMenuItems(o);n.menuItems=a.filter(s,function(t){return t.id==e.subpageName&&(t.active=!0),e[t.section]}),1===n.menuItems.length&&(n.emailForRequest||(n.noNavigation=!0),n.menuItems=[])}"saunas"===n.templateName&&(n.menuItems=a.clone(e.rooms),n.menuItems.length>2?n.menuItems=a.union([{id:"main",title:o._gg("Номера"),alias:n.menuItems[0].alias}],n.menuItems):n.menuItems.length<2&&(n.menuItems=[]),n.menuItems=a.each(n.menuItems,function(t){t.active=t.id==e.subpageName}));var l="covers"===e.subpageName||"logos"===e.subpageName;return(e.isEditor||l)&&(n.editorMenuItems=[{name:"covers",active:"covers"===e.subpageName,label:o._gg("Обложки")},{name:"logos",active:"logos"===e.subpageName,label:o._gg("Логотипы")}],n.editorMode=l),n}},{lodash:"lodash"}],170:[function(e,t,n){t.exports=function(e,t){var n=t.providers,a=req("helpers/booklet"),i={loadTariffs:function(e,t){e.geoid?i.loadTariffsForAddress(e,function(n,a){return n?void i.loadAllTariffs(e,t):void t(null,a)}):i.loadAllTariffs(e,t)},loadTariffsForAddress:function(e,t){var n=e.provider&&e.provider.gis_firm_id;i.getTariffs(n,e.geoid,function(n,a){if(n)return e.notConnected=!0,void t(n);e.tariffs=a;var i=!!a.length;e.connected=i,e.notConnected=!i,t(null,a)})},loadAllTariffs:function(e,t){var n=e.provider&&e.provider.gis_firm_id;i.getTariffs(n,null,function(n,a){return n?void t(n):(e.tariffs=a,void t(null,a))})},getTariffs:function(e,t,a){var i={};t&&(i.geoid=t),e&&(i.filters={gisFirmId:e}),n.searchTariffs(i,a)},loadProviders:function(e,t){i.loadTariffs(e,t)},loadProvider:function(e,t){n.getProvider(e.providerId,function(n,a){return n?void t(n):(e.provider=a,e.title=a.name,void i.loadProviderData(e.provider,function(){return n?void t(n):void i.loadTariffs(e,t)}))})},loadProviderData:function(t,n){if(t.gis_firm_id){var i={fields:"items.contact_groups"};e.firms.filials(t.gis_firm_id,i,function(e,i){if(e)return void n(e);var o=i.data;t.name=o[0].name_ex.primary,t.nameAddition=o[0].name_ex.extension,t.phone=a.getFilialsPhone(o),n()})}else n()},loadAddress:function(t,n){e.geo.profile([t.geoid],{},function(e,a){if(e||!a.address)return void n(e);var i=a.address.components[0];t.address={street:i.street,building:i.number},t.apartment&&(t.address.apartment=t.apartment),n()})}};return i},t.exports._args=["$dgApi","$bookletApi"]},{}],171:[function(e,t,n){var a=e("lodash"),i=req("helpers/linkURL");t.exports=function(t,n,o){if(!t)return null;var r=e("./viewModelHelper.js")(n),s={},l=n.getFormats().currency;return s.currency=a.extend(l,{code:l.id.toLowerCase()}),s.provider=r.getModelProviderData(t),s.compilation=!t.provider,s.filters=!1,s.tariffs=r.getModelTariffs(t),s.isEditor=t.is_owner,t.address&&t.address.street&&t.address.building&&(s.address=t.address,s.connected=!!t.connected,s.notConnected=!!t.notConnected),s.compilation&&s.tariffs.length>2&&(s.filters=r.getFiltersData(s.tariffs)),s.seeOtherSeoLink=i("bookletProvidersAggregator",{city:o.getRegion().code}),s},t.exports._args=["model","$i18n","$regionManager"]},{"./viewModelHelper.js":172,lodash:"lodash"}],172:[function(e,t,n){var a=e("lodash"),i=req("helpers/link");t.exports=function(e){function t(e){return e=25*(Math.floor(e/25)||1),"_speed"+(e>100?100:e)}function n(e){return"number"==typeof e.speed?e.speed:a.get(e,"speed.in",0)}var o={getFiltersData:function(t){var n,i,o,r,s,l,c,u,d,h={},p=50,f=10;return n=a.map(t,function(e){return e.price?parseInt(e.price,10):null}),n=a.without(n,void 0),i=a.map(t,function(e){return"number"==typeof e.speed?parseInt(e.speed,10):e.speed&&e.speed["in"]?parseInt(e.speed["in"],10):null}),i=a.without(i,void 0),c=a.pluck(t,"tv"),c=a.compact(c),u=a.pluck(t,"hd"),u=a.compact(u),d=a.pluck(t,"connectingCost"),o=a.min(n),r=a.max(n),s=a.min(i),l=a.max(i),i.length&&l-s>f&&(h.speed={},h.speed.min=s,h.speed.max=l),n.length&&r-o>p&&(h.price={},h.price.min=o,h.price.max=r),h.flags={tv:{name:e._gg("ТВ-каналы"),activity:!!(c.length&&c.length<t.length)},hd:{name:e._gg("HD-каналы"),activity:!!(u.length&&u.length<t.length)},freeConnecting:{name:e._gg("Бесплатное подключение"),activity:-1!==a.indexOf(d,0)&&a.min(d)!==a.max(d)}},h},getModelTariffs:function(e){var o=[];return a.each(e.tariffs,function(a){var r=n(a),s=r>0&&"string"==typeof a.description&&e.tariffs.length>2;o.push({id:a.id||"",name:a.name,speed:r>0?r:"–",speedIcon:t(r),tv:a.tv_channels||!1,hd:a.hd_channels||!1,phone:a.phone||!1,price:parseInt(a.price,10),connectingCost:a.connecting_cost,description:a.description,compilation:!e.provider,providerName:a.provider_name,providerLogo:i.addProtocolToUrl(a.provider_logo_url),minimize:s})}),o=a.sortBy(o,"price")},getModelProviderData:function(e){return e.provider?{description:a.unescape(e.provider.description),email:e.provider.email,logoUrl:i.addProtocolToUrl(e.provider.logo_url),name:e.provider.name,agreementUrl:e.provider.licence_url}:!1}};return o},t.exports._args=["$i18n"]},{lodash:"lodash"}],173:[function(e,t,n){var a=e("lodash");t.exports=function(e,t){function n(e,t){var n=[];return a.each(e,function(e,i){a.isNumber(t[i])?n.push({text:e,count:t[i]}):t[i]&&n.push(e)}),n}function i(e,t){return e=a.indexOf(c,e),t=a.indexOf(c,t),t===e-1}function o(t){var n=t,i=e.getMinutes(),o=parseInt(e.getHours()+""+(10>i?"0"+i:i+""),10),r=e.getDay()-1;return 0>r&&(r=6),a.each(n.prices,function(e){var t=e.from.match(/(\d+):(\d+)/),a=e.to.match(/(\d+):(\d+)/);if(3===t.length&&3===a.length){var i=parseInt(t[1]+t[2],10),s=parseInt(a[1]+a[2],10);n.roundTheClock="0"==i&&"2400"==s,n.today=-1!==n.days.indexOf(r),n.singleDay=n.from!==n.to,e.now=n.today&&o>=i&&s>=o}}),n}function r(e){var t=e.price,n=e.currency,r=[],s=null,l="";return a.each(t,function(e,t){e=a.filter(e,function(e){return a.isNumber(e.cost)}),a.each(e,function(e){4===e.from.length&&(e.from="0"+e.from),4===e.to.length&&(e.to="0"+e.to),e.currency=n}),s&&(i(t,s.mnemonic)&&a.isEqual(s.prices,e)?(s.to=u[t],s.mnemonic=t,s.days.push(c.indexOf(t))):(s.to||(s.to=u[l]),r.push(o(s)),s=null)),s||(s={mnemonic:t,from:u[t],prices:a.cloneDeep(e),days:[c.indexOf(t)]}),l=t}),s.to=u[l],r.push(o(s)),r}function s(e){if(!e||!a.isString(e.from)||!a.isString(e.to))return null;var t=e.from.match(/(\d+):(\d+)/),n=e.to.match(/(\d+):(\d+)/);if(3!==t.length||3!==n.length)return null;var i=parseInt(t[1]+t[2],10),o=parseInt(n[1]+n[2],10);return{from:i,to:o}}function l(t){var n=null,i=e.getDay()-1,o=e.getHours(),r=a.range(i,7).concat(a.range(0,i)),s=a.map(r,function(e){return c[e]});s=a.filter(s,function(e){return!!t[e]});var l;return a.some(s,function(e){var r=t[e],s=-1!==a.indexOf(r.days,i);if(!r.prices.length)return!1;if(s){var c=a.last(r.days)===i;if(l=a.find(r.prices,function(e){var t=parseInt(e.from,10),n=parseInt(e.to,10),a=o>=t&&n>o||t>o;return a}),!l&&c)return!1}return l||(l=r.prices[0]),r.today=!0,l.now=!0,n={day:r,price:l},!0}),n}var c=["mon","tue","wed","thu","fri","sat","sun"],u={mon:t._gg("Пн"),tue:t._gg("Вт"),wed:t._gg("Ср"),thu:t._gg("Чт"),fri:t._gg("Пт"),sat:t._gg("Сб"),sun:t._gg("Вс")};return{shortDays:c,days:u,fetch:n,isNextDay:i,prepareRange:o,groupCustomPrice:r,getTimeRange:s,getNearestPrice:l}},t.exports._args=["now","$i18n"]},{lodash:"lodash"}],174:[function(e,t,n){var a=e("lodash");t.exports=function(t,n){function i(){var e=r.firstByType("phone",t.firm.contact_groups);return e&&e.text}function o(e){return(""+e).replace(/\B(?=(\d{3})+(?!\d))/g," ")}if(!t)return null;var r=req("helpers/contact"),s=e("./utilities.js"),l=s(t.now,n),c=n.getFormats().currency;c=a.extend(c,{code:c.id.toLowerCase()});var u={russian:n._gg("Русская парная"),turkish:n._gg("Турецкий хаммам"),finnish:n._gg("Финская парная"),infrared:n._gg("Инфракрасная сауна"),japanese:n._gg("Японская сауна"),russian_with_wood:n._gg("Русская баня на дровах")},d={aqua:n._gg("Аква-зона"),entertainment:n._gg("Развлечения"),rest:n._gg("Для отдыха"),services:n._gg("Сервис")},h=t.rooms=t.modules&&t.modules.rooms||[],p=h.length<2;if(h.length){var f=h.length-1;a.each(h,function(e,i){if(p&&0===i?e.isActive=!0:e.isActive=t.subpageName===e.id,e.num=i+1,h.length>=2){var r=i===f?h[0]:h[i+1];if(e.prevNextRooms=[r],!e.description&&h.length>2){var s=0===i?h[f]:h[i-1];e.prevNextRooms.unshift(s),e.showPrevNextBoth=!0}}if(e.photos&&e.photos.length&&(e.firstPhoto=e.photos[0].urls.original),e.extendedCard=e.nextRoom||e.prevNextRooms||e.description,e.steamroom)switch(e.steamroomType=u[e.steamroom]?u[e.steamroom]:"",e.steamroom){case"finnish":e.hotType="hottest";break;case"russian_with_wood":case"russian":e.hotType="hotter";break;default:e.hotType="hot"}e.description&&(e.description=e.description.replace(/\n/g,"<br>")),e.offer&&(e.offer=e.offer.replace(/\n/g,"<br>"),e.isSpecialOffer=e.offer&&e.offer.length?e.offer:!1);var m=[],g=e.price;if(e.closestHour=!1,"fixed"===g.type)e.currentTimeCost=g.value,e.currentTimeCostFormatted=o(g.value),e.currentTimeCostCurrency=c,m.push({mnemonic:"sun",from:n._gg("Пн"),to:n._gg("Вс"),today:!0,prices:{from:"00:00",to:"00:00",cost:g.value,now:!0},days:[0,1,2,3,4,5,6],currency:c}),e.workingNow=!0,e.fixedPrice=!0;else if("custom"===g.type&&(m=l.groupCustomPrice({price:g.value,currency:c}),e.fixedPrice=!1,a.each(m,function(t){a.each(t.prices,function(n){t.today&&n.now&&(e.closestHour=n.to,e.currentTimeCost=n.cost,e.currentTimeCostFormatted=o(n.cost),e.currentTimeCostCurrency=c),n.costFormatted=o(n.cost)})}),e.workingNow=e.closestHour!==!1,!e.workingNow)){var _=a.indexBy(m,"mnemonic"),v=l.getNearestPrice(_);v&&(e.closestHour=v,e.currentTimeCost=v.price.cost,e.currentTimeCostFormatted=o(v.price.cost),e.currentTimeCostCurrency=c)}if(e.prices=m,e.currency=c,e.options){var y=e.options;e.features=[],a.each(y,function(t,n){void 0!==d[n]&&e.features.push(d[n])});var b=y.aqua;e.isAqua=!1,b&&(b.pools&&(e.pools=[],a.each(b.pools,function(t){t.checked&&e.pools.push({width:t.width,length:t.length,isChecked:t.checked,withSize:!!t.width&&!!t.length})}),e.poolsQuantity=e.pools.length),e.aquas=l.fetch({hydromassage:n._gg("Гидромассаж"),waterslides:n._gg("Водные горки"),bath:n._gg("Купель"),jacuzzi:n._gg("Джакузи")},y.aqua),e.isAqua=e.poolsQuantity>0||e.aquas.length>0),y.services&&(e.services=l.fetch({brooms:n._gg("Веники"),towels:n._gg("Полотенца"),bedsheets:n._gg("Простыни"),tea:n._gg("Чай"),sneakers:n._gg("Тапочки")},y.services));var k=y.rest;k&&(e.rest=l.fetch({restroom:n._gg("Комната отдыха"),fireplace:n._gg("Камин"),bower:n._gg("Беседка, мангал"),massage_chair:n._gg("Массажное кресло"),calabash:n._gg("Кальян")},y.rest)),y.entertainment&&(e.entertainments=l.fetch({karaoke:n._gg("Караоке"),tennis:n._gg("Теннис"),billiards:n._gg("Бильярд"),dancefloor:n._gg("Танцпол"),hockey:n._gg("Настольный хоккей"),tv:"TV/DVD",wifi:"Wi-Fi"},y.entertainment))}})}return t.alias||(t.alias=t.id),t.subpageName||(t.subpageName=p?"room":"main"),t.activePageType="main"===t.subpageName?"main":"room",t.title=t.properties.title,t.phone=t.makeup?!1:i(),t.templateName=t.template_name,t.isEditor=t.is_owner,t.isSaunas=!0,t.currency=c,t},t.exports._args=["model","$i18n"]},{"./utilities.js":173,lodash:"lodash"}],175:[function(e,t,n){"use strict";function a(e,t,n){var a=d.firstByType("phone",e.contact_groups)||d.firstByType("fax",e.contact_groups);if(!a)return null;var i=u(e.contact_groups).map("contacts").flatten().filter(d.isPhone).size();return{type:"phone",text:n._t("Телефон"),isLink:1==i,buttons:[{href:i>1?"":"tel:"+u.get(a,"value",""),type:"phone",icon:"action-phone",onClick:t.clickHandlers.phone}]}}function i(e,t,n){if(n.showAdLinkInActions){var a=u.get(t,"ads.link.value");if(a)return a}return u.get(e,"value")}function o(e,t,n,a,o,r){var s=i(n,e,a);return{type:"website",text:r._t("Сайт"),disabled:!s,buttons:[{href:h.addBssParamsToLink(s,o),disabled:!s,type:"website",icon:"action-website",onClick:t.clickHandlers.website,onMouseenter:t.websiteOtherHandlers.mouseenter,onFocus:t.websiteOtherHandlers.focus}]}}function r(e,t,n,a){if(t.ua.isPhone||!n.get("routeSearch"))return null;var i=!u.get(e,"point.lon")||!u.get(e,"point.lat");return f.getPathAction(i,{from:t.clickHandlers.pathFrom,to:t.clickHandlers.pathTo},f.getPathActionLocaleParams(a))}function s(e,t,n){if("branch"!=e.type&&"building"!=e.geo_type)return null;var a=!u.get(e,"links.entrances");return{type:"entrance",text:n._t("Вход"),disabled:a,buttons:[{icon:"action-entrance",disabled:a,type:"entrance",onClick:t.clickHandlers.entrance}]}}function l(e,t){return t.get("favorites")?{module:{type:"favoritesWidget",data:{entity:e,type:"action"}}}:null}function c(e,t,n){return{type:"floor",text:n._t("На этаже"),disabled:!e.floorName,buttons:[{icon:"action-floor",type:"floor",disabled:!e.floorName,onClick:t.clickHandlers.floor}]}}var u=e("lodash"),d=req("helpers/contact"),h=req("helpers/analytics"),p=req("helpers/distributeActions"),f=req("helpers/actions");t.exports=function(t,n,i,h,f){if("branch"!=t.type){var m="building"===t.geo_type?"halfRight":"center",g={path:r(t,n,f,i),entrance:s(t,n,i),favorite:{module:{type:"favoritesWidget",data:{type:"action",entity:t,dropDownPosition:m}}}},_=e("../../helpers/distributeActions")(g);return _([["path"],["entrance"],["favorite"]])}var v=u.get(i.getSettings(),"firms"),y={sid:h.session,user:h.user,analyticsPlace:n.analyticsPlace},b=d.firstByType("website",t.contact_groups),k={phone:a(t,n,i),website:o(t,n,b,v,y,i),path:r(t,n,f,i),entrance:s(t,n,i),favorite:l(t,f),floor:c(t,n,i)},w=p(k),x=w([[n.shownInFloors&&"floor"],["phone","website"],[n.ua.isPhone&&"website","path"],[v.showWebsiteInsteadEntrance&&!n.shownInFloors&&!!b&&"website",!v.hideEntranceAction&&!n.shownInFloors&&"entrance"],["favorite"]]);return x},t.exports.setPhoneActionState=function(e,t,n){return u.map(e,function(e){return"phone"!=e.type?e:Object.assign({},e,{buttons:u.map(e.buttons,function(e){return Object.assign({},e,{active:t,onClick:n})})})})},t.exports._args=["model","params","$i18n","$analytics","$featureSwitcher"]},{"../../helpers/distributeActions":"/helpers/distributeActions.js",lodash:"lodash"}],176:[function(e,t,n){"use strict";var a=e("lodash"),i=e("../../helpers/landmarks"),o=e("../../helpers/stationsNear"),r=e("../../helpers/linkURL"),s=e("../../helpers/geo"),l=e("../../helpers/string");t.exports={getFeatureProps:function(t,n){var a={access:t.access,purpose:t.purpose,purpose_name:t.purpose_name,floors:Object.assign({},t.floors_data),type:t.geo_type,name:t.name,full_name:t.full_name,subtype_name:t.subtype_name,address:Object.assign({},t.address),building_name:t.building_name,links:Object.assign({},t.links),point:Object.assign({},t.point)};return e("../cardFeatures/prepareFeaturesData")(a,{i18n:n.i18n,cityCode:n.cityCode,onParkingFeatureClick:n.parkingFeatureClickHandler,getBuildingCompositeType:!1})},getLandmarksProps:function(e,t){var n=a.get(e,"links.landmarks"),o=i.getLandmarks(n,e.id,{cityCode:t.cityCode,numberFormat:t.numberFormat});return a.map(o,function(e){return Object.assign({},e,{onLandmarksLinkClick:t.landmarksClickHandler})})},getNearStopsProps:function(e,t){var n=a.get(e,"links.nearest_stations");if(a.isEmpty(n))return null;var i=e.point,r=o.getClosestStation(n,{point:i,numberFormat:t.numberFormat,cityCode:t.cityCode,showDistance:!0});return r?Object.assign({},r,{onNearStopsLinkClick:t.nearStopsLinkClickHandler}):null},getInfrastructureProps:function(e,t){function n(n){if(!i[n])return null;var o=a.cloneDeep(i[n]);switch(n){case"providers":o.hasProvidersButton=t.hasProvidersButton,o.onClickProvidersButton=t.onClickProvidersButton}if(o.items=null,o.more=!0,o.more){var s=l[o.type][e.type];o.seoLinkMore=r(s,Object.assign(c,{id:e.buildingId,firmId:e.id}))}return o.onClick=t.onClickItem,o}var i=s.getFirmLists(e.links,e.apartments,t.i18n),o=e.point,l={servicing:{branch:"firmMoreServicing",building:"geoMoreServicing"},providers:{branch:"firmMoreProviders",building:"geoMoreProviders"}},c={city:t.regionCode,lon:a.get(o,"lon"),lat:a.get(o,"lat")},u=a.flow(a.partialRight(a.map,n),a.compact)(["providers","servicing"]);return u},getFirmsInBuildingProps:function(e,t){var n=s.getFirmLists(e.links,null,t.i18n),i=e.point,o={city:t.regionCode,lon:a.get(i,"lon"),lat:a.get(i,"lat")};if(!n.firms)return null;var l=a.cloneDeep(n.firms);return l.onInitFirmsList=function(){},l.items=null,l.more=!0,l.seoLinkMore=r("geoMoreFirms",Object.assign(o,{id:e.buildingId})),l.onClick=t.onClickItem,l},getAttractionsProps:function(e,t){function n(e){var n=a.compact([e.description,e.dates,e.authors]),i=140,o=180,r=n.join(),s=r.length>o,c=l.threeDots(r.substr(0,i));return{text:n,preview:!t.isMausoleum&&s?c:null,header:e.caption}}var i=s.getAttractions(e);if(!a.size(i))return null;var o=a.flow(a.partialRight(a.map,n),a.compact)(i);if(a.isEmpty(o))return null;var r=a.size(o)>1?a.tail(o):null,c={firstAttractionItem:a.first(o),additionalAttractionsList:r,expanderLabels:t.expanderLabels||{},isCollapsable:!t.isMausoleum&&!a.isEmpty(r)};return c}}},{"../../helpers/geo":"/helpers/geo.js","../../helpers/landmarks":"/helpers/landmarks.js","../../helpers/linkURL":"/helpers/linkURL.js","../../helpers/stationsNear":"/helpers/stationsNear.js","../../helpers/string":"/helpers/string.js","../cardFeatures/prepareFeaturesData":180,lodash:"lodash"}],177:[function(e,t,n){"use strict";function a(e){var t=135,n=v.get(e,"ads.article");return n?_.getSynopsis(n,t):null}function i(e,t){var n=g.getPhotoAlbum(e,"facilities");return n?{seoLink:y("firmPhotoAlbum",{city:t,id:e.id,albumName:"facilities",lon:v.get(e,"point.lon"),lat:v.get(e,"point.lat")})}:null}function o(e,t){return!!e.point&&!t.isCarPark&&!t.hasParking}function r(e){var t=g.separateAttributes(e);return v.chain(t).get("payment").map(function(e){return v.has(e,"attributes")?v.compact(e.attributes):[]}).flatten().compact().value()}function s(e,t){return v.some(t,function(t){return v.contains(e,t)})}function l(e,t){return v.chain(e.rubrics).map(function(e){return{id:e.id,name:e.name,seoLinkRubric:y("rubric",{city:t,query:e.name,id:e.id})}}).value()}function c(e,t){if(v.isEmpty(e))return null;var n=v.map(e.rubrics,"id"),a=t.isDiscovery,i=v.partial(s,t.contextRubricId||n),o=v.chain(e.attribute_groups).map(function(e){return s(n,e.rubric_ids)?{label:e.name||"",items:v.map(e.attributes,"name"),isDiscoveryRubric:a&&i(e.rubric_ids)}:null}).compact().sortByOrder("isDiscoveryRubric","desc").value();return 1==v.size(o)&&(v.first(o).label=""),{full:o,cut:t.doNotCutAttrs?null:u(o)}}function u(e){var t=k,n=v.chain(e).map("items").flatten().reduce(function(e,n){var a=v.size(n);return t>a?(e.push(n),t-=a):t>0&&(e.push(_.getSynopsis(n,t)),t=0),e},[]).value();return 0==t?n:null}function d(e,t,n){var a=v.get(e,"org",{});return a.branch_count>=2&&!n?{count:a.branch_count,seoLink:y("firmBranches",{city:t,firmId:a.id})}:null}function h(e,t){var n=g.getPhotoAlbum(e,"common","800x176");if(!n)return null;var a=n.count<1e4?n.count:"9999+",i=y("firmPhotoAlbum",{city:t,id:e.id,lon:v.get(e,"point.lon"),lat:v.get(e,"point.lat")});return v.assign({},n,{seoLink:i,count:a})}function p(e,t){return e.point?y("geoAddress",{city:t,id:v.get(e,"address.building_id"),lon:e.point.lon,lat:e.point.lat}):e.id?"#":null}function f(e,t,n){var i=g.getAds(e,n);return i?(i.text=_.threeDots(i.text||a(e)),e.point&&(i.seoLink=y("firmMoreInfo",{city:t,id:e.id,lon:e.point.lon,lat:e.point.lat})),i):null}function m(e,t){var n=v.get(e,"org.id"),a=b.getPrivateOfficeLink(t.region,"firmCard",n,t.lang),i=a&&g.canCreateBooklet(e,t.region.country_code);return{office:{href:a,isOwner:i},adv:i?null:b.getAdvLink(t.region,"firmCard",e,t.lang)}}var g=req("helpers/firm"),_=req("helpers/string"),v=e("lodash"),y=req("helpers/linkURL"),b=req("helpers/link"),k=60;t.exports={getFacilities:i,getRubrics:l,getAttributes:c,getPayment:r,getFilials:d,getPhotos:h,getSeoLinkAddress:p,getAds:f,getPrivateLinks:m,getNearParkingLink:o,_ATTRIBUTES_MAX_LENGTH:k}},{lodash:"lodash"}],178:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/outputify"),o=req("helpers/firm"),r=req("helpers/geo"),s=e("./utils");t.exports=function(e,t){if(!e)return null;var n=t.region||{},l=o.getDiscounts(e,n),c=n.code,u=t.formats,d=t.settings,h=a.get(u,"address.order"),p=r.getDrilldown(e),f=a.get(d,"firms.useCityInDrilldown"),m=s.getNearParkingLink(e,{isCarPark:t.isCarPark,hasParking:t.hasParking}),g=e.cityName,_=i.getSeparatedAddress(e.address,h),v=[].concat(_),y=t.generatedTitle,b=!1,k=!1;"branch"!=e.type&&y==(_&&_.join(" / "))&&(y=_,_=[],b=!0),"branch"==e.type&&(k=_.join("")==n.name,!f&&g&&(_[0]=g+", "+_[0]));var w=!a.contains(["gate","attraction","parking"],e.geo_type)&&!a.size(_),x=void 0;switch(e.type){case"building":x="buildingTemplate";break;case"adm_div":x="geoTemplate";break;case"branch":default:x="firmTemplate"}var C=a.get(e,"address.building_name"),L=a.get(e,"floors_data.ground_count");C&&L&&(C+=", ");var I={name:e.name_ex&&i.getName(e.name_ex)||e.name,legal:e.name_ex&&i.getNameAddition(e.name_ex),address:_,addressWithoutCity:v,notClickable:k,addressComment:e.address_comment,seoLinkAddress:s.getSeoLinkAddress(e,c),title:y,isAddressInTitle:w,isSeparatedTitle:b,drilldown:p,filials:s.getFilials(e,c,t.shownInFloors),mediaButtons:t.mediaButtons,photos:s.getPhotos(e,c),ads:s.getAds(e,c,t.bss),discounts:l,attributes:s.getAttributes(e,{isDiscovery:t.isDiscovery,contextRubricId:t.contextRubricId,doNotCutAttrs:t.doNotCutAttrs}),payment:s.getPayment(e),schedule:!!e.schedule,contacts:!a.isEmpty(e.contact_groups),nearParkings:m,facilities:s.getFacilities(e,c),rubrics:s.getRubrics(e,c),recoveryAds:t.postponeRecoveryAds?null:e.recoveryAds,recoveryAdsRerender:e.recoveryAds&&t.postponeRecoveryAds,dontPreloadPhoto:t.dontPreloadPhoto,shownInFloors:t.shownInFloors,photosUploaderControl:t.photosUploaderControl,floorName:t.floorName,buildingName:C,floorsCount:L,showBuildingInfo:!(!C&&!L),privateLinks:s.getPrivateLinks(e,{lang:t.lang,region:n}),geoAdvLink:t.geoAdvLink,mainTemplate:x};return I}},{"./utils":177,lodash:"lodash"}],179:[function(e,t,n){"use strict";var a=req("helpers/firm");t.exports=function(e,t){var n=e.get("data");if(!n)return null;var i=t.i18n,o=t.offline,r=t.plusOneFeature&&!o,s=r?a.getPlusOne(n):null,l=s?[s]:[],c=o?null:a.getBooklet(n,i),u=!!n.hasApartments,d=t.hasFloors,h=t.floorsSeoLink,p=t.proposals,f=c?[c]:[];return f[0]&&"net"==f[0].subtype&&!n.enableProviders&&(f=[]),{hasButtons:!(!f.length&&!l.length)||u||d||p,booklets:f,plusOnes:l,apartments:u,floorsSeoLink:h,proposals:p}}},{}],180:[function(e,t,n){"use strict";function a(e,t){if(!o.contains(["building","gate"],e.type)){var n=s.getGeoTypeHumanReadable(e,t);return n?{text:n,purpose:"humanReadable"}:null}return null}function i(e,t,n,a){return o.map(s.getParkings(e,t,n),function(e){return{purpose:e.purpose,text:e.name,id:e.id,seoLink:e.seoLink,comment:e.price,additional:e.capacity&&n._npt("Вместимость парковки","на %1 место","на %1 места","на %1 мест",e.capacity),onParkingFeatureClick:a}})}var o=e("lodash"),r=e("../../helpers/passway"),s=e("../../helpers/geo");t.exports=function(e,t){if(!e||!t)return[];var n=t.cityCode,l=t.i18n,c=[];t.getBuildingCompositeType&&c.push(s.getBuildingCompositeType(e,l)),c.push(a(e,l),i(e,n,l,t.onParkingFeatureClick),r.getPasswayAttributes(e,l));var u=o.chain(c).flatten().filter(function(e){return e&&e.text&&e.purpose}).value();return u}},{"../../helpers/geo":"/helpers/geo.js","../../helpers/passway":"/helpers/passway.js",lodash:"lodash"}],181:[function(e,t,n){var a=e("lodash"),i=req("helpers/outputify"),o=req("helpers/firm");t.exports=function(e){e=e||{};var t=a.get(e,"ads.options.logo",{}),n=o.getLogoUrl(e,"128x128"),r=!1;(t.use_default_value||n)&&(r=!0);var s=i.getName(e.name_ex)||e.name,l=o.getRating(e);return{rating:a.get(l,"value"),showLogo:r,logo:n,firmColor:a.get(t,"bg_color"),textColor:a.get(t,"text_color"),firmName:s}}},{lodash:"lodash"}],182:[function(e,t,n){t.exports=function(e,t){var n={},a=t.i18n;return e.rubricShortId?(n.title=a._gg("Советы экспертов"),n.desc=a._gg("2ГИС помогает жителям легко ориентироваться в городе. Теперь ответы можно найти не только в справочнике, но и у специалистов."),n.placeholder=a._gg("Где купить запчасти для Доджа? Чем лучше утеплить лоджию? Где лучше отремонтировать велосипед? В каком магазине продается идеальная баранина на плов?")):(n.title=a._gg("Вопрос о городе"),n.desc=a._gg("2ГИС помогает жителям легко ориентироваться в городе. Теперь ответы можно получать не только в справочнике, но и у настоящих экспертов, которые знают все городские секреты."),n.placeholder=a._gg("Почему в визовых центрах нельзя пользоваться мобильным телефоном? В какие кафе пускают с собакой? Где найти настоящий ирландский Гиннесс? Можно ли жарить шашлыки во дворе своего дома?")),n.hiddenTarget=!t.isMausoleum,n.disableButton=!t.isMausoleum,n}},{}],183:[function(e,t,n){var a=e("lodash"),i=req("helpers/linkURL");t.exports=function(e,t,n){function o(e,n){if(e.language!==n.language){if(n.currentLanguage==t.currentLanguage)return 1;if(e.currentLanguage==t.currentLanguage)return-1}return e.name==n.name?0:e.name<n.name?-1:1}function r(e){return a.groupBy(e,function(e){return e.name.charAt(0)})}function s(e,t){return a.each(e,function(e){e.name.length>t&&(e.parts={visible:e.name.slice(0,t),fade1:e.name.slice(t,t+1),fade2:e.name.slice(t+1,t+2),invisible:e.name.slice(t+2)})}),e}var l=a.values(e),c=a.map(l,function(e){var t=e.redirectDomain?n._config("projectURL",e.country_code):"";return{seoLinkCity:i("city",{city:e.code},t),language:e.currentLanguage,name:e.name,id:e.id}});c.sort(o);var u=r(s(c,20));return{list:u}},t.exports._args=["cityData","currentRegion","$i18n"]},{lodash:"lodash"}],184:[function(e,t,n){var a=e("lodash"),i=req("helpers/link");t.exports=function(e,t,n,o,r){var s=a.values(t);s=a.sortBy(s,"name");var l,c=a.map(s,function(e){var t={name:e.name,id:e.id};return l!=e.name.charAt(0)&&(l=e.name.charAt(0),t.letter=l),t}),u={ios:"iOS",android:"Android",windowsphone:"Windows Phone",blackberry:"Blackberry"};r||(r="android");var d=i.getMobileLinks(o,"phoneDashboard")[r],h=null;return d&&(h={title:o._t("Установи 2ГИС для %1",u[r]),href:d.href,mod:r}),{city:n.name,time:" ",list:c,ads:h}}},{lodash:"lodash"}],185:[function(e,t,n){t.exports=function(){var e={points:"2 балла",trend:"asc",description:"Движение свободное",timeMin:"00:00",timeMax:"23:59",days:[{key:"mo",title:"Пн"},{key:"tu",title:"Вт"},{key:"we",title:"Ср"},{key:"th",title:"Чт"},{key:"fr",title:"Пт"},{key:"sa",title:"Сб"},{key:"su",title:"Вс"}],selectedDay:"th",selectedTime:"10:10",mode:"now"};return e}},{}],186:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/contact"),o=req("helpers/analytics"),r=e("util").format;t.exports=function(e,t,n,s){function l(e){return a.each(e,function(e,t){e&&a.each(e.contacts,function(e,n){e.groupIndex=t+"",e.contactIndex=n+""})}),e}function c(e){var t=[];return e=a.filter(e,function(e){return e.name?!0:(t=t.concat(e.contacts),!1)}),e.unshift({contacts:t}),e}function u(e){return a.each(e,function(e){a.isEqual(e.schedule,t.masterSchedule)&&delete e.schedule}),e}function d(e){return e[0]&&(e[0]=h(e[0])),e}function h(e,n){var o={name:e.name,schedule:e.schedule,phones:[],websites:[],socials:[]},r={phone:"phones",fax:"phones",website:"websites"};return a.each(e.contacts,function(e){e=m(e),r[e.type]?o[r[e.type]].push(e):i.isSocial(e)?o.socials.push(e):(o.other=o.other||{contacts:[]},o.other.contacts.push(e))}),o.claimToFirm=t.claimToFirm,o.phones=f(o.phones),o.socials=_(o.socials,n),o.socialHeader=!n&&o.socials.length>1,o}function p(e){var n=e[0],i=e.splice(1);return i.length&&(i=a.map(i,function(e){return h(e,!0)}),n.other=n.other||{},n.other.groups=i),n.other&&(n.other.expanded=t.expandEverything),n}function f(e){if(!e.length)return null;var o=!1,r=e[0],s=void 0,l=void 0;if(!t.isUserFromPhone){r=a.find(e,function(e){return e.text.length>=4})||r;var c=i.splitPhone(r);c.fade&&(o=!0,s=c.parts.visible),l=1==e.length?n._t("Показать телефон"):n._t("Показать телефоны")}return{fade:t.expandEverything?!1:o,type:r.type,icon:"contact_"+r.type,list:e,visiblePhonePart:s,showText:l}}function m(e){var n=e.type;switch(i.isSocial(e)&&(n="social"),n){case"website":e=i.fixSiteText(e),e=i.getSite(e),e.href=o.addBssParamsToLink(e.url,{place:t.analyticsPlace,sid:s.session,user:s.user,ill:t.ill}),e.title=e.text,e.text=e.text||e.value;break;case"email":e.href="mailto:"+e.value,e.title=e.href,e.text=e.text||e.value;break;case"phone":case"fax":e=g(e);break;case"social":e=i.prepareSocialContact(e);break;default:e=v(e)}return e}function g(e){e.href="tel:"+e.value,e.icon="contact_"+e.type;var a=e.text||e.value;return e.text=i.replaceDash(a,{
os:t.userOS,type:"firmcard"}),"fax"==e.type&&(e.comment=e.comment?r("%s, %s",n._t("факс"),e.comment):n._t("факс")),e}function _(e,t){var i;return i=1!=e.length||t?{vkontakte:n._t("Вконтакте"),facebook:n._gg("Facebook"),twitter:n._gg("Twitter"),instagram:n._gg("Instagram"),odnoklassniki:n._t("Одноклассники"),googleplus:n._gg("Google+"),linkedin:n._gg("LinkedIn"),youtube:n._gg("Youtube")}:{vkontakte:n._t("Организация во Вконтакте"),facebook:n._t("Организация в Facebook"),twitter:n._t("Организация в Twitter"),instagram:n._t("Организация в Instagram"),odnoklassniki:n._t("Организация в Одноклассниках"),googleplus:n._t("Организация в Google+"),linkedin:n._t("Организация в LinkedIn"),youtube:n._t("Организация в Youtube")},a.map(e,function(e){return e.text=i[e.type]||e.text,e})}function v(e){var t={pobox:n._gg("PO box")};e.comment=t[e.type]||e.type;var i=["icq","skype","jabber"];return a.contains(i,e.type)&&(e.href=e.type+":"+e.value),e}function y(e){return a.extend(e,{dropdownMode:t.dropdownMode})}return a(a.cloneDeep(e)).thru(l).thru(c).thru(u).thru(d).thru(p).thru(y).value()},t.exports._args=["data","params","$i18n","$analytics"]},{lodash:"lodash",util:422}],187:[function(e,t,n){t.exports=function(e,t,n){switch(e.subType){case"cityQuora":return{icon:"cityQuora_logo",title:n._gg("Советы экспертов"),message:n._gg("Есть вопрос? Спросите 2ГИС — мы найдем ответ"),buttonText:n._gg("Задать вопрос"),buttonAttrs:{hash:{"class":"contextPromo__btn",href:t.config["skver.url"],target:"_blank"}}};default:return!1}},t.exports._args=["data","slot","$i18n"]},{}],188:[function(e,t,n){var a=e("lodash"),i=req("helpers/linkURL");t.exports=function(e,t,n,o){var r=t.region,s=t.showCityLink,l=t.showThisCityLink,c=n.getSettings(),u={cityFilter:t.isGrym,showAds:t.showAds,showOtherCityLink:t.showOtherCityLink,citySelectName:t.citySelectName,time:t.time};if(e&&e.error)return e;u.city=a.extend(t.city,{name:r.name,code:r.code});var d=[{type:"cafe",title:n._pt("Дашборд","Поесть")},{type:"hotel",title:n._pt("Дашборд","Гостиницы")},{type:"pharmacy",title:n._pt("Дашборд","Аптеки")},{type:"tireShop",title:n._pgg("Дашборд","Шины и диски")},{type:"tireService",title:n._pgg("Дашборд","Шиномонтаж")},{type:"sauna",title:n._pgg("Дашборд","Сауны")},{type:"provider",title:n._pgg("Дашборд","Провайдеры")},{type:"newlyBuilt",title:n._pt("Дашборд","Новостройки")},{type:"atm",title:n._pt("Дашборд","Банкоматы")},{type:"beauty",title:n._pt("Дашборд","Красота и здоровье")},{type:"carservice",title:n._pt("Дашборд","Автосервисы")},{type:"bar",title:n._gg("Бары")},{type:"museum",title:n._gg("Музеи")},{type:"banquetHalls",title:n._gg("Банкетные залы")},{type:"sport",title:n._gg("Спорттовары")},{type:"all",title:n._pt("Дашборд","Все рубрики"),seoLink:i("rubricListMain",{city:r.code})}],h=[];if(a.isObject(c)&&c.dashboard){var p=c.dashboard,f=p[r.code];h=p.metarubrics,f&&f.metarubrics&&!a.isEmpty(f.metarubrics)&&(h=f.metarubrics)}return u.metaRubrics=a.map(h,function(e){var t=a.findWhere(d,{type:e.code});return t.rubricQuery=e.rubricQuery,t.seoLink||(t.seoLink=i("search",{city:r.code,query:e.rubricQuery})),t}),s&&(o.get("globalMap")?u.cityLink=i("countries"):l?u.cityLink=i("city",{city:r.code}):u.cityLink=i("citiesWithCity",{city:r.code})),u},t.exports._args=["model","params","$i18n","$featureSwitcher"]},{lodash:"lodash"}],189:[function(e,t,n){var a=e("lodash"),i=req("helpers/panels");t.exports=function(e){function t(e){return!i.isListType(e)}function n(e){var n=e.panels.added||e.panels.replaced,a=n&&n.findByType(t);return a&&a.id?(""+a.id).split("_")[0]:null}function o(i){if(i.panels){var o=i.panels.value,r=a.last(o)||{};i.panels.removed&&i.panels.removed.has(t)&&"find"==r.type&&e.broadcast("searchResults[::isActive()] miniCard:unselect");var s;if(o.length>1&&(s=o[o.length-2]),s&&"find"==s.type){var l=n(i);l&&(e.broadcast("searchResults[::isActive()] miniCard:unselect"),e.broadcast("searchResults[::isActive()] miniCard:highlight",[l]))}}}function r(e){for(var n=0,i=e.length;i>n;n++){var o=e[n],r=e[n+1];if(a.contains(["searchResults","mixedResults"],o.contentType)&&r&&t(r.conf.type)){var s="miniCard:highlight";"mixedResults"==o.contentType&&(s="searchResults[::isActive()] "+s),o["interface"].pass(s,[r.conf.id])}}}return{processDiff:o,processNew:r}}},{lodash:"lodash"}],190:[function(e,t,n){var a=req("helpers/outputify"),i=e("lodash"),o=req("helpers/discount"),r=req("helpers/link"),s=req("helpers/string");t.exports=function(e,t,n,l){function c(e,t){if(e.length<=t)return e;e=e.substr(e,t);var n=e.lastIndexOf(" ");if(-1==n)return e+"… ";for(;--n>=0;)if(e[n].charCodeAt()>=65)return e.substr(e,n+1)+"… ";return s.decorateUrls(e)+"… "}var u=l.getRegion();i.each(t.discounts,function(e){e.canExpand=!1;var a=s.cutTags(e.description,"<ul><li>");e.descriptionHTML=s.decorateUrls(a),e.minimized=!0,e.description&&t.discounts.length>1?(e.canExpand=e.description.length>170,e.shortText=e.canExpand?c(a,150):e.descriptionHTML):e.shortText=e.descriptionHTML,e.title=o.getDiscountTitleWithPercent(e),e.formattedDate=o.formatDiscountPeriod(e,u,n),e.current=t.activeDiscountId==e.id});var d=i.find(t.discounts,"source"),h=d&&d.source,p=i.map(t.discounts,function(e){var t=o.getDiscountCoverUrl(e,"400x");return i.extend({},e,{showDetails:!(!h&&!e.comment_fas),source:e.source||h,details:e.comment_fas,cover:t,coverTop:i.get(e,"cover_top",null)})}),f=o.isInternationalDiscountsRegion(u),m=i.map(n.getSettings().socials,function(e){return{id:e,icon:"discountCard_"+e}});return{name:a.getName(t.firm.name_ex),discounts:!t.isAdvertiser&&f?i.take(p,1):p,advLink:r.getAdvLink(u,"discountsCard",t.firm,n.getLang()),socials:m}},t.exports._args=["slot","model","$i18n","$regionManager"]},{lodash:"lodash"}],191:[function(e,t,n){var a=e("lodash");n.createParksList=function(e,t){var n=e.parks[t],i=a.keys(n),o=n[i[0]],r={};return a.each(i,function(e){r[e]=n[e][0].id}),{parks:i,events:o,parksIds:r}}},{lodash:"lodash"}],192:[function(e,t,n){var a=e("lodash");t.exports=function(t,n,i){function o(e){var t=[];return l>e&&t.push("_past"),l.getTime()==e.getTime()&&t.push("_current"),c.getTime()==e.getTime()&&t.push("_holiday"),t.join(" ")}var r=e("./utils"),s=a.clone(t[n.actuallyDate]),l=new Date(n.actuallyDate),c=new Date(n.holiday),u=new Date,d=[i._gg("воскресенье"),i._gg("понедельник"),i._gg("вторник"),i._gg("среда"),i._gg("четверг"),i._gg("пятница"),i._gg("суббота")];if(u>l&&delete s.transport,s.parks){var h=a.keys(s.parks),p=h[0],f=r.createParksList(s,p);s.currentDistrict=p,s.districts=h,s.parks=f.parks,s.parkEvents=f.events,s.parksIds=f.parksIds}return s.days=a.map(a.keys(t),function(e){var t=new Date(e);return{weekDay:d[t.getDay()],monthDay:t.getDate(),dateMods:o(t),fullDate:e}}),s},t.exports._args=["cityData","dates","$i18n"]},{"./utils":191,lodash:"lodash"}],193:[function(e,t,n){"use strict";function a(e,t){var n=i.includes(t,e.layer_id),a=+new Date;if(n)return!1;if(e.spotlight_till&&e.spotlight_after){var o=+new Date(e.spotlight_till);return o>a}if(e.show_after&&"1970-01-01T00:00:00Z"!=e.show_after){var r=new Date(e.show_after);return r.setDate(r.getDate()+30)>a}return!0}var i=e("lodash");t.exports={isNewLayer:a}},{lodash:"lodash"}],194:[function(e,t,n){"use strict";function a(e,t,n){var a=r.get(e.sublayers,t);return r.isUndefined(a)||r.isUndefined(a.subfolders)?!1:r.map(a.subfolders,function(e,a){var i={id:t+"-"+a,sublayer:a,layer:t,type:"sublayer",name:e.name};if(!r.isEmpty(e.icon)){var o=e.icon.replace(".png",".svg");i.icon=""+n+t+"/"+o+"?bg=dark&size=10"}return i})}function i(e){return r.chain(e).get("icons.image").find(function(e){return"dark"==e.bg&&"image/svg+xml"==e.type}).get("src","").thru(function(e){return"data:image/svg+xml;base64,"+e}).value()}function o(e,t){var n=r.curryRight(s.isNewLayer)(t.seenLayersIds);return r.map(e.layers,function(o){return{id:o.layer_id,layer:o.layer_id,menuClasses:"_menuRow",type:"layer",name:o.readable_name,icon:i(o),subLayers:a(e,o.layer_id,t.resourceUrl),isNew:n(o)}})}var r=e("lodash"),s=e("./utils");t.exports=function(e,t){var n={};return n.layers=o(e,r.pick(t,"resourceUrl","seenLayersIds")),n.newLayersLength=r.filter(n.layers,{isNew:!0}).length,n}},{"./utils":193,lodash:"lodash"}],195:[function(e,t,n){"use strict";function a(e){var t=e.replace(/<(h\d).*?>.+?<\/\1>/gi,""),n=r.cutTags(t,"<a><p><div>");return r.setExternalLinkAttributes(n,{"class":"link _undashed",target:"_blank"})}function i(e){var t=/<h\d.*?>(.+?)<\/h\d>/i;return o.get(e.match(t),1)}var o=e("lodash"),r=req("helpers/string"),s=req("helpers/link");t.exports=function(e,t){var n=t.photos,r=n.length,l=e.description;return{address:i(l),advLink:s.getAdvLink(t.region,"extraLayersCard",e,t.i18n.getLang()),description:a(l),dontPreloadPhoto:t.dontPreloadPhoto,name:e.name,photosCount:r,previewUrl:r?o.first(n).originalUrl:null}}},{lodash:"lodash"}],196:[function(e,t,n){var a=e("lodash"),i=req("helpers/link");t.exports=function(e,t){function n(){if(a.isObject(u)&&u.feedback){var e=u.feedback.phone;return e&&-1!=e.indexOf(l.code)}return null}function o(){if(a.isObject(u)&&u.feedback&&c.isDesktop){var e=u.feedback.chat;return e&&-1!=e.indexOf(l.code)}return!1}var r={},s=t.i18n,l=t.region,c=t.ua,u=s.getSettings(),d={"default":{title:s._t("Спасибо за сообщение"),text:s._t("Мы внимательно рассмотрим ваш отзыв и учтем в&nbsp;своей работе. Оставайтесь с нами!")},loyalty:{title:s._gg("Спасибо за ваше сообщение!"),text:s._gg("Если неточность подтвердится, вы получите один&nbsp;балл в конкурсе «Городской эксперт»")},claimToFirm:{title:s._t("Спасибо!"),text:s._t("Мы отправили ваше сообщение в компанию. Ожидайте ответа.")}},h=[{evaluation:1,mod:"worst",text:s._pt("Оценка приложения","Плохо")},{evaluation:2,mod:"bad",text:s._pt("Оценка приложения","Не очень")},{evaluation:3,mod:"normal",text:s._pt("Оценка приложения","Пойдет")},{evaluation:4,mod:"good",text:s._pt("Оценка приложения","Хорошо")},{evaluation:5,mod:"super",text:s._pt("Оценка приложения","Супер!")}];if(u.feedback.reverseRatingOrder&&(h=h.reverse()),"response"==e.type)r.type="response",t.isLoyaltyState?r.message=d.loyalty:"claimToFirm"==e.feedbackType?r.message=d.claimToFirm:r.message=d["default"];else{r.type="form",r.text=e.text,r.name=e.name,r.email=e.email,r.dontAskName=e.nameIsFromAuth,r.dontAskEmail=e.emailIsFromAuth,r.attachment=!0,r.emailPlaceholder=s._t("Электронная почта"),r.maxFileSize=t.config["feedbackApi.maxFileSize"],r.isEmailRequired=t.isEmailRequired,t.isEmailRequired?r.emailPlaceholder=s._t("Электронная почта (обязательно)"):r.emailPlaceholder=s._t("Электронная почта");var p=s._config("law.rules");switch(e.type){case"dataError":r.filialName=e.filialName,r.filialAddress=e.filialAddress,r.firmPrivateOfficeLink=i.getPrivateOfficeLink(e.city,"feedback",e.firmId,s.getLang()),r.title=s._t("Ошибка в данных организации"),r.messagePlaceholder=s._t("Какие именно данные об организации некорректны?"),r.phone=n(),r.chat=o(),r.introPartialName="dataError",r.addFirmHref=i.getAddLink(e.city,"feedback",s);break;case"mapError":r.placeTitle=e.placeTitle,r.introPartialName="mapError",a.include(["metro","station"],e.geoType)?(r.messagePlaceholder=s._t("Какие данные некорректны?"),"metro"==e.geoType?r.title=s._t("Ошибка в данных метро"):"station"==e.geoType&&(r.title=s._t("Ошибка в данных остановки"))):(r.title=s._t("Ошибка на карте"),r.messagePlaceholder=s._t("Какие данные на карте некорректны?"));break;case"publicTransportRouteError":r.introPartialName="publicTransportRouteError",r.routeType=e.routeType,r.routeNumber=e.routeNumber,r.title=s._t("Ошибка в маршруте городского транспорта"),r.messagePlaceholder=s._t("Какие данные маршрута некорректны?");break;case"photoError":r.introPartialName="photoError",r.href=p,r.title=s._t("Пожаловаться на фото"),r.messagePlaceholder=s._t("Чем, по-вашему, плоха эта фотография?"),r.attachment=!1;break;case"bookletError":r.introPartialName="bookletError",r.href=p,r.title=s._t("Пожаловаться на буклет"),r.messagePlaceholder=s._t("Что, по-вашему, не так с этим буклетом?");break;case"discountError":r.title=s._gg("Ошибка в данных"),r.messagePlaceholder=s._gg("Какие именно данные некорректны?");break;case"app":r.rating=h,r.title=s._t("Оценить 2ГИС"),r.messagePlaceholder=s._t("Ваши пожелания и предложения по улучшению нашего сервиса"),r.phone=n(),r.chat=o(),r.loyalty=t.isLoyaltyState;break;case"claimToFirm":r.title=s._t("Письмо компании"),r.introPartialName="claimToFirmIntro",r.messagePlaceholder=s._t("Ваш вопрос"),r.emailPlaceholder=s._t("Электронная почта"),r.filialName=e.filialName,r.firmPrivateOfficeLink=i.getPrivateOfficeLink(e.city,"feedback",e.firmId,s.getLang()),r.claimToFirm=!0;break;default:r.title=s._t("Обратная связь"),r.introPartialName="app",r.messagePlaceholder=s._t("Ваше сообщение")}}return r}},{lodash:"lodash"}],197:[function(e,t,n){"use strict";var a=e("lodash"),i=e("./utils"),o=e("slot/config");t.exports=function(e){function t(e){return a.chain(e).flatten().reduce(function(e,t){return g(t.value)?(e[t.value]=+t.value.match(/\d+$/),e):e},{}).value()}function n(e,t){return a.isEmpty(t)?a.values(e):[1,2,3,4,5]}function r(o){var r={id:m(e),placeholder:o.caption,type:o.widget,template:"slider",cumulative:!0,points:[],values:[],mapping:{}},s=t(o.items),l=i.forceSlider(s,e.forcedValues);r.name=a.chain(o.items).flatten().first().get("value").replace(/_\d+$/,"").value(),r.mapping=s;var c=n(s,l);if(a.size(c)<2)return null;r.values=c,r.points=c;var u=[];a.each(e.widgetValues,function(e,t){a.has(r.mapping,t)&&u.push(r.mapping[t])}),l.length&&(u=l,r.forced=!0),u.length||(u=r.values);var d=Math.min.apply(Math,u),h=Math.max.apply(Math,u);return r.initValues=[d,h],r.desc=i.sliderRange(r,{},e.i18n),r}function s(t){if(!g(t.value))return null;var n={id:m(e),placeholder:t.caption,type:t.widget,name:t.value,template:"slider",scale:t.lg===!0?"log":void 0,range:{min:t.min,max:t.max},initValues:[]},o=i.getSliderValues(n);if(!o)return null;n=a.merge(n,o);var r,s,l=e.widgetValues[n.name]&&e.widgetValues[n.name].split("-");if(l&&l.length?(r=Math.min.apply(Math,l),s=Math.max.apply(Math,l)):(r=n.range.min,s=n.range.max),n.initValues=[r,s],n.desc=i.sliderRange(n,{},e.i18n),-1!=n.name.indexOf("price")){var c=_();n.currency=a.extend({code:c.id.toLowerCase()},c)}return n}function l(e){var t=c(e.widget),n=a.chain(e.items).cloneDeep().flatten().map(t).compact().value();if(!n.length)return null;var o=!!a.find(n,{forced:!0}),r=!1;return i.isCheckbox(e.widget)&&a.size(n)>6&&e.caption&&!o&&(r=!0),{type:e.widget,template:e.widget,items:n,label:e.caption,expandable:r}}function c(t){return function(n){var o={id:m(e),type:t,allowOff:!0},r=a.filter(n.values,function(e){return g(e)});return r.length?("sort"==n.type?(o.name="sort",o.value=r.join(",")):n.key?(o.name="key:"+n.key,o.value=r.join(",")):(o.name=r.join(","),o.value="true"),"work_time_now"==o.name&&(o.name="work_time_mode",o.value="now"),"work_round_the_clock"==o.name&&(o.name="work_time_mode",o.value="alltime"),o.label=n.text,o.checked=i.isChecked(o,e.widgetValues),o.disabled=i.isDisabled(o,e.widgetValues),o.forced=i.isForced(o,e.forcedValues),o):null}}function u(t){var n=!1,o=a.chain(t.items).flatten().map(function(t){var o=a.filter(t.values,g);if(a.isEmpty(o))return null;var r={type:"option",label:t.text,value:o.join(",")};return i.isSelected("",r,e.widgetValues)&&(r.selected=!0),i.isForced(r,e.forcedValues)&&(r.selected=!0,n=!0),r}).compact().value();return a.isEmpty(o)?null:{tag:t.tag,label:t.caption,type:"selectbox",template:"selectbox",items:o,forced:n,name:m()}}function d(e){var t=h(e),n=p(e,{isForced:t.isForced}),a=f(e);return{type:"workhours",template:"workhours",items:[t,n,a]}}function h(t){var n=[{value:"now"},{value:"alltime"},{value:"specified"}];e.media&&(n=a.reject(n,{value:"now"}));var o=a(n).map(function(n){return n.label=a.get(t.labels,n.value,""),n.name="work_time_mode",n.type="radio",n.allowOff=!0,n.checked=i.isChecked(n,e.widgetValues),n.forced=i.isForced(n,e.forcedValues),n}).value();if(a.isEmpty(o))return null;var r=!!a.find(o,{forced:!0});return r&&(o=a.map(o,function(t){return t.disabled=!i.isForced(t,e.forcedValues),t})),{isForced:r,mod:r?"workTimeModes _disabled":"workTimeModes",type:"buttons",name:"work_time_mode",items:o}}function p(t,n){var i,o=a.map(Array(25),Number.call,Number);i="12h"==t.time_format?{type:"12h",points:["12 am","8 am","4 pm",e.i18n._gg("midnight")]}:{type:"24h",points:[0,4,8,12,16,20,24]};var r=a.get(e,"widgetValues.work_hour");return{mod:n.isForced?"forced":"",type:"time",name:"work_hour",scale:i,values:o,points:o,id:m(),initValues:r?[r]:null}}function f(t){var n=["sun","mon","tue","wed","thu","fri","sat"],o=n.indexOf(t.first_week_day),r=t.labels;n=n.slice(o).concat(n.slice(0,o));var s=a(n).map(function(t){var n={label:a.get(r,t,""),name:"work_day",type:"radio",value:t};return n.checked=i.isChecked(n,e.widgetValues),n}).compact().value();return{type:"buttons",name:"work_day",mod:"week",items:s}}function m(){return v++,["filters",e.context,e.contextId,v].join("_")}function g(e){return a.find(y,{tag:e})||i.isExtraFilter(e)}function _(){var t=a.findWhere(o["mediaCard.hardcode.currency"],{project:a.get(e,"region.code")});return a.get(t,"value")||e.i18n.getFormats().currency}var v=0,y=a.get(e,"filters.attributes",[]);return function(e){switch(e.widget){case"buttons":case"checkboxlist":return l(e);case"slider":return s(e);case"enum_slider":return r(e);case"combobox":return u(e);case"worktime":return d(e);default:return null}}}},{"./utils":201,lodash:"lodash","slot/config":"slot/config"}],198:[function(e,t,n){"use strict";function a(){return{checkConnection:!0}}function i(e,t){var n={sauna_capacity:t.i18n._t("Вместимость"),sauna_hour_price:t.i18n._t("Стоимость часа"),food_service_avg_price:t.i18n._t("Средний чек"),food_service_lunch_price:t.i18n._t("Средняя цена на обед"),fitness_month_unltd_subscription_price:t.i18n._t("Месячный абонемент"),fitness_year_unltd_subscription_price:t.i18n._t("Годовой абонемент"),net_min_price:t.i18n._t("Стоимость в месяц")};p.each(n,function(t,n){var a=p.find(e.widgets,{name:n});a&&(a.label=t)})}function o(e,t){var n=p.find(e.widgets,{name:"sauna_capacity"});if(n){var a=[{min:1,max:4,label:t.i18n._t("До 5 гостей")},{min:5,max:10,label:t.i18n._t("5-10 гостей")},{min:11,max:20,label:t.i18n._t("11-20 гостей")},{min:21,max:1e3,label:t.i18n._t("Больше 20 гостей")}],i=p.first(n.items).range;if(a=p.reject(a,function(e){return e.max<i.min||e.min>i.max}),a.length<2)return void(e.widgets=p.reject(e.widgets,{name:"sauna_capacity"}));var o=p.map(a,function(e){var n={type:"buttons",name:"sauna_capacity",label:e.label,value:e.min+"-"+e.max,allowOff:!0};return n.disabled=f.isDisabled(n,t.widgetValues),n.checked=f.isChecked(n,t.widgetValues),n});n.items=[{radios:!0,name:"sauna_capacity",items:o}]}}function r(e,t){var n=t.i18n._t("Станция метро"),a=p.map(t.stations,function(e){return{value:e.name,label:e.name,style:{"border-color":e.color}}}),i={selectbox:!0,params:{icons:{searchIcon:"media_filters-search",clearIcon:"media_filters-clear",arrowIcon:null},notShowDefaultValueInDropdown:!0,showClearButton:!0,visibleItemsCount:200,minFilteringLength:1,marker:!0,mod:"mediaFilter",placeholder:n,defaults:{value:"",label:n}},type:"selectbox",name:"subway",label:"",items:a,single:!0};e.widgets.unshift(i)}function s(e,t){var n=t.i18n._t("Район города"),a=p(t.districts).filter("name").map(function(e){return{value:e.id,label:e.name}}).value();if(!p.isEmpty(a)){var i={selectbox:!0,params:{icons:{searchIcon:"media_filters-search",clearIcon:"media_filters-clear",arrowIcon:null},notShowDefaultValueInDropdown:!0,showClearButton:!0,visibleItemsCount:200,minFilteringLength:1,mod:"mediaFilter",placeholder:n,defaults:{value:"",label:n}},type:"selectbox",name:"district_id",label:"",items:a,single:!0};e.widgets.unshift(i)}}function l(e){p.each(e.widgets,function(t,n){p.get(t,"items")&&p.some(p.clone(t.items).splice(6),function(e){return e.checked||e.forced})&&(e.widgets[n].expandedOnInit=!0)})}function c(e,t){var n=p.pick(e,"single","template","type");return n.single=!0,n.label=t.i18n._t("Время работы"),n.items=p.map(e.items,function(e){return"buttons"==e.type&&(e.type="radios"),e[e.type]=!0,e}),n}function u(e,t){if("workhours"==t.type)return c(t,e);var n=p.size(t.items);return n?p.each(t.items,function(e){e[e.type]=!0}):t[t.type]=!0,{name:p.get(t,"name","details"),label:t.label,type:"widget",items:n?t.items:[t],expandable:n>6,single:!n}}function d(e){return f.isCheckbox(e.type)?(e.items=p.filter(e.items,function(e){return!f.isExtraFilter(e.name)}),p.size(e.items)?e:null):e}function h(e){var t=p.find(e,{type:"workhours"});return t?p.chain(e).reject({type:"workhours"}).push(t).value():e}var p=e("lodash"),f=e("./utils");t.exports={reformatWidgets:function(e,t){return p.chain(e).map(d).compact().map(p.partial(u,t)).thru(h).value()},addLocalWidgets:function(e,t,n){var l=p.contains(t.forcedValues,"alltime"),c=[{name:"sort",label:t.i18n._t("Рейтинг"),value:"rating",type:"checkbox",button:!0,icon:"media_filters-rating",iconHover:"media_filters-rating-hover",iconActive:"media_filters-rating-active"},{name:"work_time_mode",label:t.i18n._t("Открыто"),value:"now",type:"checkbox",button:!0,icon:"media_filters-opened",iconHover:"media_filters-opened-hover",iconActive:"media_filters-opened-active"},{name:"work_time_mode",label:t.i18n._t("Круглосуточно"),value:"alltime",type:"checkbox",forced:l,button:!0,icon:"media_filters-24x7",iconHover:"media_filters-24x7-hover",iconActive:"media_filters-24x7-active"}];if(c=t.region.flags&&t.region.flags.flamp?p.reject(c,{value:"alltime"}):p.reject(c,{name:"sort"}),"providers"==t.mediaRubric){c=p.reject(c,{name:"work_time_mode"});var u=a();e.widgets.unshift(u)}else n.get("mediaResults.func.metroAndAreas")&&(p.isEmpty(t.stations)?s(e,t):r(e,t));p.each(c,function(e){e.checked=f.isChecked(e,t.widgetValues),e.disabled=f.isDisabled(e,t.widgetValues)}),p.each(c,function(e,n){e.id="local_"+t.contextId+"_"+(n+1)});var d={name:"rating_and_opened",buttons:!0,single:!0,items:c,type:"buttons"};e.widgets.unshift(d),p(e.widgets).filter({type:"selectbox"}).each(function(e){return p.each(e.items,function(n){f.isSelected(e.name,n,t.widgetValues)&&(n.selected=!0)})}).value(),o(e,t),i(e,t)},formatSaunaCapacityFilter:o,expandHiddenOnInit:l}},{"./utils":201,lodash:"lodash"}],199:[function(e,t,n){"use strict";t.exports=function(e){var t=[],n=0;return e.isAutoParts&&e.snippet&&t.push({type:"link",id:"additional-widget-"+ ++n,title:e.i18n._gg("Найти запчасти"),action:function(e){e.notify("extendedSearchClicked",{fromButton:!0})}}),t}},{}],200:[function(e,t,n){"use strict";function a(e){if(e&&e.length){var t=e.attr("data-uncheckable");if(!t){var n=e.find("input[type=radio]:checked");n.length&&e.attr("data-checked",n.attr("value"));var a=e.find("input[type=radio]");a.on("click",function(e){var t=$(this),n=t.parents(".radiogroup, .filters__radiogroup"),a=n.attr("data-checked");a&&a==t.attr("value")?(t[0].checked=!1,n.removeAttr("data-checked"),t.trigger("change",e)):n.attr("data-checked",t.attr("value"))}),e.attr("data-uncheckable",!0)}}}function i(e,t){var n=e.find(".radiogroup__input");n.each(function(){$(this)[0].disabled=!t}),e.mod({disabled:!t})}n.switchRadioGroup=i,n.makeUncheckable=a},{}],201:[function(e,t,n){"use strict";function a(e){return"checkboxlist"==e||"checkbox"==e}function i(e){return"option"==e||"selectbox"==e}function o(e){return"buttons"==e||"radio"==e}function r(e){return v.contains(["buttons","checkboxlist","widget","workhours"],e)}function s(e){return v.contains(["slider","enum_slider","time"],e)}function l(e,t){t=t||[];var n=e.value+""=="true"?(e.name+"").split(","):(e.value+"").split(",");return!!n&&v.all(n,function(e){return-1!=t.indexOf(e)})}function c(e,t){return v(t).map(function(t){return e[t]}).compact().value()}function u(e,t){var n;if(t=t||{},a(e.type)){var i=e.name.split(",");n=v.all(i,function(n){return t[n]+""==e.value})}else{var o=(t[e.name]||y.getDefaultValue(e.name))+"";if(o){if(e.value==o)return!0;var r=o.split(",");e.values||(e.values=(e.value+"").split(",")),n=v.all(e.values,function(e){return v.contains(r,e)})}}return n||e.value==e["default"]}function d(e,t,n){if(n[e]&&n[e]==t.value)return!0;var a=t.value.split(",");return v.all(a,function(e){return n[e]})}function h(e,t){return t=t||{},t[e.name]+""=="false"}function p(e,t){var n;n=v.isArray(e)?v.clone(e):v.chain(e).pick("primary","widgets").values().flatten().compact().value(),v.each(n,function(e){r(e.type)?v.each(e.items,function(e){v.isArray(e.items)?v.each(e.items,function(e){t(e)}):t(e)}):t(e)})}function f(e,t){return v.chain(e.mapping).map(function(e,n){return t[n]&&e}).compact().value()}function m(e,t){return _(e,t,function(e,t,n){return l(e,n)})}function g(e,t){return _(e,t,function(e,t,n){return d(e.name,t,n)})}function _(e,t,n){var a,i=e.selectBox;return a=i?i["interface"].getItems():e.items,v.find(a,function(a){return n(e,a,t)})}var v=e("lodash"),y=req("helpers/filters"),b=req("helpers/string"),k=req("helpers/round");n.isChecked=u,n.isSelected=d,n.isDisabled=h,n.isForced=l,n.isCheckbox=a,n.isSelectbox=i,n.isRadio=o,n.isSlider=s,n.isGroup=r,n.eachControl=p,n.forceSlider=c,n.isExtraFilter=function(e){var t=["sort","general_rating","rating","work_round_the_clock","work_time_now","work_time_mode","bound","has_site","has_photos","general_payment_.*"],n=RegExp("^("+t.join("|")+")$");return v.size(e.match(n))},n.countWidgets=function(e,t,n){t=t||{},n=n||[];var r=0;return p(e,function(e){if(!v.contains(["work_day","work_hour"],e.name))if(s(e.type))if("enum_slider"==e.type){var d=f(e,t);(d.length||v.size(c(e.mapping,n)))&&r++}else t[e.name]&&r++;else a(e.type)||o(e.type)?(u(e,t)||l(e,n))&&r++:i(e.type)&&(g(e,t)||m(e,n))&&r++}),r},n.applyValue2UI=function(e,t,n,r,d){var p;if(t=t||{},s(e.type)&&e.rader){var _=[];if("enum_slider"==e.type){var y=c(e.mapping,n);y.length||(y=f(e,t)),y.length||(y=e.values);var b=Math.min.apply(Math,y),k=Math.max.apply(Math,y);_=[b,k]}else{var w=t[e.name];_=w?v.map((""+w).split("-"),parseFloat):v.sortBy(v.values(e.range))}v.each(_,function(t,n){e.rader.val(n,t)})}if(a(e.type)){p=d('[name="'+e.name+'"][value="'+e.value+'"][type="checkbox"]',r);var x=u(e,t)||l(e,n);p.each(function(e,t){t.checked=x}),p.mod({disabled:h(e,t)})}if(o(e.type)){var C=e.name;p=d('[name="'+C+'"][value="'+e.value+'"][type="radio"]',r),p[0].checked=u(e,t)||l(e,n),p.attr("data-checked",p[0].checked),d(p.parents(".radiogroup, .filters__radiogroup")[0]).attr("data-checked",t[e.name]||p[0].checked)}if(i(e.type)){var L=e.selectBox["interface"],I=g(e,t)||m(e,n);I?L.setValue(I.value):L.setDefault()}},n.select=function(e,t){var n=v.find(e.items,function(n){return d(e.name,n,t)});n&&(n.selected=!0)},n.getSliderValues=function(e){for(var t,n,a=[],i=[],o=1,r=e.range||{},s=r.max-r.min,l=s/o,c=0;o>=c;c++){if(t=Math.floor(r.min+l*c),i.push(t),"log"==e.scale){var u=r.min,d=r.max,h=Math.log(t||.1),p=Math.log(u||.1);n=Math.round(Math.exp((t-u)/(d-u)*(h-p)+p))}else n=t;a.push(n)}return v.first(a)<v.last(a)?(a=k(a,10),{points:i,values:a}):null},n.sliderRange=function(e,t,n){var a=e.initValues||e.values,i=e.values;t=v.defaults(t,{minVal:v.first(a),maxVal:v.last(a)});var o=t.minVal,r=t.maxVal,s={};if(!e.placeholder&&e.label)o>=v.first(i)&&o!=r&&(s.min={label:e.label+" "+n._pt("фильтр минимум","от"),value:b.currencyString(o,n)}),r<=v.last(i)&&o!=r&&(s.max={label:n._pt("фильтр максимум","до"),value:b.currencyString(r,n)}),o==r&&(s.single={value:b.currencyString(o,n)});else{var l=n.getFormats().currency.symbol,c=(e.placeholder||"").split(/%d\d/);c.length>2&&l&&(c[2]=c[2].replace(/%c/,l)),s.min={label:c[0],value:b.numberString(o,n.getFormats("number"))},s.max={label:c[1],value:b.numberString(r,n.getFormats("number")),postfix:c[2]}}return s}},{lodash:"lodash"}],202:[function(e,t,n){"use strict";var a=e("./widgetsParser"),i=e("./mediaHelper.js"),o=e("./primaryAdditionalWidgetsLoader"),r=e("lodash"),s=e("./utils");t.exports=function(e,t,n,l){function c(e,t){return e=e||{},t.media?e.important?e.important.concat(e.widgets):[]:t.snippet?e.important:e.widgets}function u(e){var t=r.first(e);return s.isCheckbox(r.get(t,"type"))}function d(e,t){t.snippet&&(s.eachControl(r.pick(e,"primary"),function(e){s.isCheckbox(e.type)&&(e.inline=!0,e.primary=!0)}),s.eachControl(r.pick(e,"widgets"),function(e){s.isCheckbox(e.type)&&(e.inline=!0)}))}var h={context:e.mods.context,contextId:e.contextId,media:"mediaCard"==e.mods.context,mediaRubric:e.mediaRubric,template:"mediaCard"==e.mods.context?"media":"catalog",snippet:"catalog"==e.mods.context,i18n:t,region:n,widgetValues:e.values,forcedValues:e.forcedValues,mode:e.mode,filters:e.filters,stations:r.get(e,"stations"),districts:r.get(e,"filters.spatial.districts"),orgId:e.orgId,rubricId:e.rubricId,contextRubricsIds:e.contextRubricsIds,boundSortAllowed:e.boundSortAllowed,isAutoParts:e.isAutoParts},p={context:h.context,template:h.template,snippet:h.snippet,initData:{contextRubricsIds:e.contextRubricsIds,currentRegion:n}};if(p.widgets={},p.allwidgets=[],l.get("widgets")){var f=a(e.widgets,h);p.widgets=c(f,h),f.widgets&&(p.allwidgets=p.allwidgets.concat(f.widgets)),p.primaryAdditional=o(h)}return h.snippet&&u(p.widgets)&&(p.primary=r.take(p.widgets),p.widgets=r.rest(p.widgets)),h.media&&(p.widgets=i.reformatWidgets(p.widgets,h),i.addLocalWidgets(p,h,l),p.allwidgets=p.widgets,i.expandHiddenOnInit(p)),d(p,h),p.activeCount=s.countWidgets(p.allwidgets,h.widgetValues,h.forcedValues),p}},{"./mediaHelper.js":198,"./primaryAdditionalWidgetsLoader":199,"./utils":201,"./widgetsParser":203,lodash:"lodash"}],203:[function(e,t,n){"use strict";function a(e,t){function n(e){return i.chain(e).map(a).compact().value()}if(!e)return{};var a=o(t);return{widgets:n(e.main),important:n(e.actions)}}var i=e("lodash"),o=e("./controlsBuilder");t.exports=a},{"./controlsBuilder":197,lodash:"lodash"}],204:[function(e,t,n){"use strict";function a(e,t,n){var a=d.firstByType("phone",e.contact_groups)||d.firstByType("fax",e.contact_groups);if(!a)return null;var i=u(e.contact_groups).map("contacts").flatten().filter(d.isPhone).size();return{type:"phone",text:n._t("Телефон"),isLink:1==i,buttons:[{href:i>1?"":"tel:"+u.get(a,"value",""),type:"phone",icon:"action-phone",onClick:t.clickHandlers.phone}]}}function i(e,t,n){if(n.showAdLinkInActions){var a=u.get(t,"ads.link.value");if(a)return a}return u.get(e,"value")}function o(e,t,n,a,o,r){var s=i(n,e,a);return{type:"website",text:r._t("Сайт"),disabled:!s,buttons:[{href:h.addBssParamsToLink(s,o),disabled:!s,type:"website",icon:"action-website",onClick:t.clickHandlers.website,onMouseenter:t.websiteOtherHandlers.mouseenter,onFocus:t.websiteOtherHandlers.focus}]}}function r(e,t,n,a){if(t.ua.isPhone||!n.get("routeSearch"))return null;var i=!u.get(e,"point.lon")||!u.get(e,"point.lat");return f.getPathAction(i,{from:t.clickHandlers.pathFrom,to:t.clickHandlers.pathTo},f.getPathActionLocaleParams(a))}function s(e,t,n){var a=!u.get(e,"links.entrances");return{type:"entrance",text:n._t("Вход"),disabled:a,buttons:[{icon:"action-entrance",disabled:a,type:"entrance",onClick:t.clickHandlers.entrance}]}}function l(e,t){return t.get("favorites")?{module:{type:"favoritesWidget",data:{type:"action",entity:e,gaCategory:"Firm_Card_event"}}}:null}function c(e,t,n){return{type:"floor",text:n._t("На этаже"),disabled:!e.floorName,buttons:[{icon:"action-floor",type:"floor",disabled:!e.floorName,onClick:t.clickHandlers.floor}]}}var u=e("lodash"),d=req("helpers/contact"),h=req("helpers/analytics"),p=req("helpers/distributeActions"),f=req("helpers/actions");t.exports=function(e,t,n,i,h){var f=u.get(n.getSettings(),"firms"),m={sid:i.session,user:i.user,analyticsPlace:t.analyticsPlace},g=d.firstByType("website",e.contact_groups),_={phone:a(e,t,n),website:o(e,t,g,f,m,n),path:r(e,t,h,n),entrance:s(e,t,n),favorite:l(e,h),floor:c(e,t,n)},v=p(_),y=v([[t.shownInFloors&&"floor"],["phone","website"],[t.ua.isPhone&&"website","path"],[f.showWebsiteInsteadEntrance&&!t.shownInFloors&&!!g&&"website",!f.hideEntranceAction&&!t.shownInFloors&&"entrance"],["favorite"]]);return y},t.exports.setPhoneActionState=function(e,t,n){
return u.map(e,function(e){return"phone"!=e.type?e:Object.assign({},e,{buttons:u.map(e.buttons,function(e){return Object.assign({},e,{active:t,onClick:n})})})})},t.exports._args=["model","params","$i18n","$analytics","$featureSwitcher"]},{lodash:"lodash"}],205:[function(e,t,n){"use strict";function a(e){var t=135,n=k.get(e,"ads.article");return n?b.getSynopsis(n,t):null}function i(e,t){return t.streetName?{photos:h(e,t.cityCode),name:t.streetName,comment:k.compact([e.address_comment,t.drillDown]),nearStops:o(e,{landmarksEnabled:t.landmarksEnabled,numberFormat:t.numberFormat,showDistance:t.showDistance,cityCode:t.cityCode}),landmarks:x.getLandmarks(k.get(e,"links.landmarks"),k.get(e,"id"),{cityCode:t.cityCode,numberFormat:t.numberFormat}),parkings:!!e.point&&!t.isCarPark,facilities:p(e)}:null}function o(e,t){if(t.landmarksEnabled&&k.has(e,"links.landmarks"))return[];var n=k.get(e,"links.nearest_stations");if(!k.size(n))return[];var a=C.getClosestStation(n,{showDistance:t.showDistance,point:e.point,numberFormat:t.numberFormat,cityCode:t.cityCode});return a&&(a.color=a.color||"#666"),a?[a]:[]}function r(e,t){if(k.isEmpty(e.address))return null;var n=y.getFirmAddress(e,t);return{street:n,comment:e.address_comment,entrances:e.links&&e.links.entrances,buildingName:k.get(e,"address.building_name",""),lat:k.get(e,"point.lat",""),lon:k.get(e,"point.lon",""),popup:!0,notClickable:n==t.regionName}}function s(e){var t=y.separateAttributes(e);return k.chain(t).get("payment").map(function(e){return k.has(e,"attributes")?k.compact(e.attributes):[]}).flatten().compact().value()}function l(e,t){return k.some(t,function(t){return k.contains(e,t)})}function c(e,t){return k.chain(e.rubrics).map(function(e){return{id:e.id,name:e.name,seoLinkRubric:w("rubric",{city:t,query:e.name,id:e.id})}}).value()}function u(e,t){if(k.isEmpty(e))return null;var n=k.map(e.rubrics,"id"),a=t.isDiscovery,i=k.partial(l,t.contextRubricId||n),o=k.chain(e.attribute_groups).map(function(e){return l(n,e.rubric_ids)?{label:e.name||"",items:k.map(e.attributes,"name"),isDiscoveryRubric:a&&i(e.rubric_ids)}:null}).compact().sortByOrder("isDiscoveryRubric","desc").value();return 1==k.size(o)&&(k.first(o).label=""),{full:o,cut:t.doNotCutAttrs?null:d(o)}}function d(e){var t=I,n=k.chain(e).map("items").flatten().reduce(function(e,n){var a=k.size(n);return t>a?(e.push(n),t-=a):t>0&&(e.push(b.getSynopsis(n,t)),t=0),e},[]).value();return 0==t?n:null}function h(e,t){var n=y.getPhotoAlbum(e,"view","128x128");if(!n)return null;var a=w("firmPhotoAlbum",{city:t,id:e.id,albumName:"view",lon:e.point&&e.point.lon,lat:e.point&&e.point.lat});return k.assign({},n,{seoLink:a})}function p(e,t){var n=y.getPhotoAlbum(e,"facilities");return n?{seoLink:w("firmPhotoAlbum",{city:t,id:e.id,albumName:"facilities",lon:k.get(e,"point.lon"),lat:k.get(e,"point.lat")})}:null}function f(e,t,n){var a=k.get(e,"org",{});return a.branch_count>=2&&!n?{count:a.branch_count,seoLink:w("firmBranches",{city:t,firmId:a.id})}:null}function m(e,t){var n=y.getPhotoAlbum(e,"common","800x176");if(!n)return null;var a=n.count<1e4?n.count:"9999+",i=w("firmPhotoAlbum",{city:t,id:e.id,lon:k.get(e,"point.lon"),lat:k.get(e,"point.lat")});return k.assign({},n,{seoLink:i,count:a})}function g(e,t){return e.point?w("geoAddress",{city:t,id:k.get(e,"address.building_id"),lon:e.point.lon,lat:e.point.lat}):e.id?"#":null}function _(e,t,n){var i=y.getAds(e,n);return i?(i.text=b.threeDots(i.text||a(e)),e.point&&(i.seoLink=w("firmMoreInfo",{city:t,id:e.id,lon:e.point.lon,lat:e.point.lat})),i):null}function v(e,t){var n=k.get(e,"org.id"),a=L.getPrivateOfficeLink(t.region,"firmCard",n,t.lang),i=a&&y.canCreateBooklet(e,t.region.country_code);return{office:{href:a,isOwner:i},adv:i?null:L.getAdvLink(t.region,"firmCard",e,t.lang)}}var y=req("helpers/firm"),b=req("helpers/string"),k=e("lodash"),w=req("helpers/linkURL"),x=req("helpers/landmarks"),C=req("helpers/stationsNear"),L=req("helpers/link"),I=60;t.exports={getAddress:r,getGeo:i,getRubrics:c,getAttributes:u,getPayment:s,getFilials:f,getPhotos:m,getSeoLinkAddress:g,getAds:_,getPrivateLinks:v,_ATTRIBUTES_MAX_LENGTH:I}},{lodash:"lodash"}],206:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/outputify"),o=req("helpers/firm"),r=req("helpers/geo"),s=e("./utils");t.exports=function(e,t){if(!e)return null;var n=t.region||{},l=t.formats,c=t.settings,u=a.get(l,"address.order"),d=o.getDiscounts(e,n),h=n.code,p=s.getAddress(e,{useDrilldownInAddress:a.get(c,"firms.useDrilldownInAddress"),format:u,regionName:n.name,infoStrategy:a.get(l,"geoobjects.infoStrategy")}),f=r.getDrilldown(e,{withoutPostalCode:!0,withoutCityName:!a.get(c,"firms.useCityInDrilldown")}),m=s.getGeo(e,{streetName:a.get(p,"street"),cityCode:h,drillDown:f,isCarPark:t.isCarPark,landmarksEnabled:a.get(c,"landmarksEnabled"),showDistance:a.get(c,"showNearStationDistance"),numberFormat:a.get(l,"number")});return{name:e.name_ex&&i.getName(e.name_ex)||e.name,legal:e.name_ex&&i.getNameAddition(e.name_ex),address:p,filials:s.getFilials(e,h,t.shownInFloors),mediaButtons:t.mediaButtons,photos:s.getPhotos(e,h),ads:s.getAds(e,h,t.bss),discounts:d,attributes:s.getAttributes(e,{isDiscovery:t.isDiscovery,contextRubricId:t.contextRubricId,doNotCutAttrs:t.doNotCutAttrs}),payment:s.getPayment(e),schedule:!!e.schedule,contacts:!a.isEmpty(e.contact_groups),geo:m,rubrics:s.getRubrics(e,h),recoveryAds:t.postponeRecoveryAds?null:e.recoveryAds,recoveryAdsRerender:e.recoveryAds&&t.postponeRecoveryAds,city:h,isDiscovery:t.isDiscovery,dontPreloadPhoto:t.dontPreloadPhoto,shownInFloors:t.shownInFloors,photosUploaderControl:t.photosUploaderControl,seoLinkAddress:s.getSeoLinkAddress(e,h),floorName:t.floorName,privateLinks:s.getPrivateLinks(e,{lang:t.lang,region:n})}}},{"./utils":205,lodash:"lodash"}],207:[function(e,t,n){"use strict";var a=req("helpers/firm");t.exports=function(e,t){var n=e.get("data");if(!n)return null;var i=t.i18n,o=t.offline,r=t.plusOneFeature&&!o,s=r?a.getPlusOne(n):null,l=s?[s]:[],c=o?null:a.getBooklet(n,i),u=c?[c]:[],d=!!n.hasApartments,h=t.hasFloors,p=t.floorsSeoLink,f=t.proposals;return u[0]&&"net"==u[0].subtype&&!n.enableProviders&&(u=[]),{hasButtons:!(!u.length&&!l.length)||d||h||f,booklets:u,plusOnes:l,apartments:d,floors:p,proposals:f}}},{}],208:[function(e,t,n){var a=req("helpers/linkURL"),i=req("helpers/string"),o=req("helpers/link"),r=e("moment");t.exports=function(e,t){function n(e){var t=e;return t.length>l&&(t=i.threeDots(t.substr(0,l))),{full:i.decorateUrls(e).split("\n"),cut:t}}function s(e,t){return t?a("firmComments",{city:u,id:e,lon:t.lon,lat:t.lat}):null}var l=114;t=t||{};var c=t.region||{},u=c.code,d=t.i18n;if(e&&e.text){var h,p=e.user||{};return t.total&&(h={text:d._nt("%1 отзыв","%1 отзыва","%1 отзывов",t.total),href:s(t.id,t.point)}),{hasReview:!0,title:d._t("Последний отзыв"),rating:e.rating,user:{name:p.name,image:p.avatar},time:r(e.creation_time).fromNow(),text:n(e.text),reviewsLink:h,source:e.source}}return t.canShowWriteButton?{writeLink:o.getFlampLink(t.id,t.i18n)}:null}},{moment:"moment"}],209:[function(e,t,n){"use strict";function a(e,t,n){var a=t.getRegion(),i=o.getPrivateOfficeLink(a,"firmCard",r.get(e,"org.id"),n.getLang());return i?{href:i,text:n._t("Я владелец")}:null}function i(e,t,n){var a=t.getRegion();return o.getAdvLink(a,"firmCard",e,n.getLang())}var o=req("helpers/link"),r=e("lodash");t.exports={getPrivateOfficeLink:a,getAdvLink:i},t.exports._args=["model","$regionManager","$i18n"]},{lodash:"lodash"}],210:[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e){function t(e){var t="";return a.each(e,function(e){t+='<div class="floorsDashboard__column">'+e.html+"</div>"}),t}function n(t,n,i,o,r){a.each(t,function(t,s){var l;l=s>=o?i.indexOf(a.min(i,"height")):s;var c;c=r?a.result(a.findWhere(n,{blockType:t.module.type}),"blockHeight"):n[s].blockHeight,i[l].html+=e.renderPartial("block",t),i[l].height+=c})}function i(t,n){var i=a.pluck(t,"clientHeight");a.each(n,function(n){if(!n.rendered){var o=e.renderPartial("block",n),r=i.indexOf(a.min(i));$(t).eq(r).append(o),n.module.unbindEvents(),n.module.bindEvents(),n.rendered=!0,i=a.pluck(t,"clientHeight")}})}function o(i,o,r){var s=[];e.element("tab").filter('[data-id="'+i.id+'"]').find(e.element("block")).each(function(e,t){s.push({blockHeight:t.clientHeight,blockType:t.dataset.type}),r&&$(t).removeClass("_appear")});var l=a.times(o,function(){return{html:"",height:0}});n(i.blocks,s,l,o,r),a.each(i.blocks,function(e){e.rendered=!1});var c=t(l);$(e.element("tab").filter('[data-id="'+i.id+'"]').find(e.element("columns"))).html(c),i.bindEventsToNewBlocks(),r&&e.element("tab").filter('[data-id="'+i.id+'"]').find(e.element("block")).each(function(e,t){$(t).removeClass("_appear")})}return{doMasonry:o,spreadNewBlocks:i}}},{lodash:"lodash"}],211:[function(e,t,n){"use strict";t.exports=function(e){function t(t,n){t.css("height","auto");var a=e.element("content").outerHeight(),o=e.element("navigation").outerHeight();r=t.outerHeight(!0),i=a+o+p+r,s=e.block().outerHeight()-i+h,n!=h&&s>n&&(t.css("height",e.block().height()),f=!0)}function n(){f&&(u=e.element("wrapper").outerHeight()-i,o=e.element("wrapper").offset().top,d=o,l=h-o,c=l)}function a(t){var n=e.element("wrapper").offset().top;if(f&&o&&n>(o&&d)){d=n,t.height()<=r&&(f=!1);var a=u/c,i=l-(h-n);l=h-n,t.css("height",t.height()-i*a)}}var i,o,r,s,l,c,u,d,h=16,p=16,f=!1;return{changeHeight:t,doCalcForCutting:n,cut:a}}},{}],212:[function(e,t,n){"use strict";var a=e("lodash"),i=e("async"),o=req("helpers/firm"),r=req("helpers/floors");t.exports=function(e){function t(t){var n=!!a.get(c,"reviews.general_review_count"),i=void 0;if(!n){var o=a.find(c.reviews.items,"tag","flamp");i=!!a.get(o,"is_reviewable")}return n||i?void e.init("mediaReview",{firm:c,review:a.sample(c.reviewsItems),last:!0,tab:"reviews"},t):void t()}function n(t){var n=!(!c.external_content||!a.find(c.external_content,{type:"discount"}));return n?(e.init("mediaActions",c,t),null):t()}function s(e){var t={"1-2":624,"1-3":946,"2-2":311,"2-3":472,"4-3":235},n=t[e.length+"-"+u]||d,i=n+"x156";return a.each(e,function(e){e.preview=a.chain(e.previews).pick(i).values()}),e}function l(){var e=a.take(c.photos,2*u),t=e.length;return t>1&&t%2&&(t-=1),e=a.take(e,t),{items:s(e,u),count:a.size(c.photos),previewPhotosNumber:t}}var c=void 0,u=void 0,d=156;return{init:function(s,d){var h=this;c=s.model,u=s.columnsLength;var p=e.requireComponent("i18n");this.metaRubrics=r.getMetaRubricsByPriority(c.metaRubrics,5,p),c.photos&&(this.photos=l(s.columnsLength)),s.isDefault&&(this.recoveryAds=c.see_also),c.contact_groups&&c.contact_groups.length&&h.addBlock(e.init("mediaContacts",{model:c})),c.schedule&&h.addBlock(e.init("mediaSchedule",c.schedule)),h.addBlock(e.init("mediaAddress",c));var f=[t,n];a.set(h,"additionalInfo.fas",o.getAdsWarning(c,"text")),i.series(f,function(e,t){return e?d():(a.each(a.compact(t),function(e){h.addBlock(e)}),d())})},rerenderPhotosPreviews:function(){this.photos=l(),e.element("photosWrapper").html(e.renderPartial("photosPreviews",this))},clientInit:function(){this.rerenderPhotosPreviews()},resize:function(e){u=e,this.rerenderPhotosPreviews()}}}},{async:383,lodash:"lodash"}],213:[function(e,t,n){"use strict";t.exports=function(e){return{init:function(t,n){var a=this;a.addBlock(e.init("mediaAdvantages",t)),n()}}}},{}],214:[function(e,t,n){"use strict";var a=e("lodash"),i=e("bluebird");t.exports=function(e,t,n,o,r,s){function l(e){function t(i,o,r){var l=i.pop();l?s.firms.floorsProfiles(l,function(s,l){s?r(s):(a.each(l.data,function(t){var i=a.filter(e,function(e){return t.id==e.filials[0]});a.each(i,function(e){e.firmName=t.name_ex.primary,n.push(e)})}),t(i,o,r))}):o(n)}var n=[],o=a(e).map(function(e){return e.filials[0]}).uniq().value(),r=a.chunk(o,20);return new i(function(e,n){t(r,e,n)})}return{init:function(e,t){var i=this,s=e.model,c=r.getByBranchId(s.id);o.getDiscountsInBuildings({buildingIds:c.buildings}).then(l).then(function(e){var o=[],r=[],l=a.map(e,function(e){return e.comment_fas&&o.push(e.comment_fas),e.source&&r.push({text:e.source,url:e.source}),{type:"mediaDiscount",data:{discount:e,branchId:s.id}}});o.length&&a.set(i,"additionalInfo.copyright",{comments:a.uniq(o)}),r.length&&a.set(i,"additionalInfo.copyright",{source:{text:n._t("Данные взяты с"),links:r}}),i.addBlocks(l,t)})["catch"](t)}}},t.exports._args=["slot","$bookletApi","$i18n","$discountsApi","$floorsManager","$dgApi"]},{bluebird:384,lodash:"lodash"}],215:[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e,t,n){function i(e){var t=e.blocks[0].module.block();return t[0].offsetTop}function o(){var e=c.offsetHeight,t=c.scrollTop;return e-l+t}function r(){e.broadcast("patchwork:loadVisible",o())}function s(t){var n=e.init("photosUploader",{id:t,album:"common",type:"firm"});return a.extend(n,{hidden:!0})}var l,c,u,d,h=req("helpers/firm");return{init:function(t,n){var i=this,o=t.model;if(o.photosUploaderAvailable){var r=h.getStaticId(o.id);i.addBlock(s(r))}i.addBlock(e.init("patchwork",a.extend({id:o.id,columnCount:t.columnsLength,noMega:!0,noCompact:!0},o.photoModel))),n()},updateDimensions:function(t){e.broadcast("patchwork:updateSize",null,null,t),r()},resize:function(t){c&&(e.broadcast("patchwork:updateSize",t,!0),l=i(this),r())},onScroll:function(t,a){if(t&&(r(),n.get("photosUploader"))){var i=e.element("photosUploader"),o=!1;if(i.mod().hidden?(u||(u=a.contentTopHeight-a.trackOffset+a.contentTopOffset),o=t.scrollTop>u):(d||(d=t.scrollTop+i.offset().top+i.outerHeight()),o=t.scrollTop-i.offset().top>2*d/3),e.element("photosUploaderControl").mod({active:o}),o){var s=t.scrollHeight-t.clientHeight,l=t.scrollTop>=s-e.element("footer").outerHeight();e.element("photosUploaderControl").mod({moved:l})}}},onRender:function(){e.broadcast("patchwork:updateSize"),c=e.element("scroller")[0],l=i(this),r(),t.trackEvent("google",["Photos","Show_Gallery"])}}},t.exports._args=["slot","$analytics","$featureSwitcher"]},{lodash:"lodash"}],216:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/request");t.exports=function(e,t){var n,o;return{init:function(e,r){var s=this;o=e.model,n=t.reviews(o.id),n.loadData({omitFirmData:!0}).then(function(e){return!e||a.isEmpty(e.reviews)?i.emitError(404,"empty api response",r):(s.addReviewBlocks(e.reviews,r),null)})["catch"](r)},needToLoadMore:function(){return n.hasNextPage()},loadMore:function(e){var t=this;n.loadNextPage().then(function(n){t.addReviewBlocks(n,e)},function(t){e(t)})},addReviewBlocks:function(e,t){var n=a.map(e,function(e){return e.isReviewTab=!0,{type:"mediaReview",data:{firm:o,review:e}}});this.addBlocks(n,t)}}},t.exports._args=["slot","$models"]},{lodash:"lodash"}],217:[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(t,n,i){function o(e){return e in u}function r(){return n.defaultTab||"about"}var s,l=e("./masonryHelper.js")(t),c={},u={about:function(){return e("./tabs/about")},photos:function(){return e("./tabs/photos")},reviews:function(){return e("./tabs/reviews")},discount:function(){return e("./tabs/discounts")},advantages:function(){return e("./tabs/advantages")}},d=100,h=function(e){if(this.id=e,this.blocks=[],!o(e))throw Error('No tab "'+e+'"');var n=u[e]();a.extend(this,t.invoke(n,[t]))};h.prototype.addBlock=function(e){var t={module:e};return this.blocks.push(t),t},h.prototype.addBlocks=function(e,n){var i=this;t.initModules(e,function(e,t){return e?void n(e):(a.each(t,function(e){i.addBlock(e)}),void(n&&n()))})},h.prototype.render=function(e,n){a.each(this.blocks,function(t){t.animate=!!e});var i=t.renderPartial("tab",this),o=t.element("tab").filter('[data-id="'+this.id+'"]');o.length&&o.remove(),t.element("tabs").append(i),t.ua().isPhone||this.doMasonry(n),this.bindEventsToNewBlocks(),a.isFunction(this.onRender)&&this.onRender()},h.prototype.bindEventsToNewBlocks=function(){a(this.blocks).reject("rendered").each(function(e){e.module.unbindEvents(),e.module.bindEvents(),e.rendered=!0}).value()},h.prototype.doMasonry=function(e,t){a.includes(["rooms","discount"],this.id)||l.doMasonry(this,e,t)},h.prototype.renderNewBlocks=function(){var e=this,n=t.element("tabs").find('[data-id="'+this.id+'"]'),i=n.find(t.element("column")),o=function(e){return e.offsetTop+e.offsetHeight};a.each(this.blocks,function(a){if(!a.rendered){var r,s=t.renderPartial("block",a);if(1==i.length)r=i[0];else if(e.column&&i.length>1)r=i[e.column-1];else{var l=n.find(".floorsDashboard__block:last-child");r=l.length&&o(l[1])<o(l[0])?i[1]:i[0]}$(r).append(s),a.module.bindEvents(),a.rendered=!0}})},h.prototype.hideAllBlocks=function(e){var n=t.element('tab[data-id="'+this.id+'"]'),a=n.find(".floorsDashboard__block");a.mod({disappear:!0}),t.setTimeout(function(){a.mod({disappear:!1,hidden:!0}),e&&e()},d)},h.prototype.showBlock=function(e){var n=t.element('tab[data-id="'+this.id+'"]'),a=n.find(".floorsDashboard__block:nth-child("+(e+1)+")");a.mod({hidden:!1,disappear:!1,appear:!0}),t.setTimeout(function(){return a.mod({appear:!1})},d)};var p={changeActiveTab:function(e){s=e},switchTab:function(e,t){this.changeActiveTab(e),i.floors.changeDashboardTab(e),i.push(t,!1)},getTab:function(e){return c[e]},getActiveTab:function(){return c[s]},initTab:function(e,t,i){if(a.isUndefined(e)&&(e=r()),c[e])return void i();var o;try{o=new h(e)}catch(s){return void i(s)}this.changeActiveTab(e),c[e]=o;var l={model:n,isDefault:e==r(),columnsLength:t};o.init(l,i)},reinitTab:function(e,t,n){delete c[e],this.initTab(e,t,n)},renderTab:function(e,t,n){c[e].render(!0,t,n)},renderNewBlocks:function(e){var n,i=c[e],o=t.element("tabs").find('[data-id="'+i.id+'"]');t.ua().isPhone?(n=o.find(t.element("columns")),a.each(i.blocks,function(e){if(!e.rendered){var a=t.renderPartial("block",e);$(n).append(a),e.module.bindEvents(),e.rendered=!0}})):(n=o.find(t.element("column")),l.spreadNewBlocks(n,i.blocks))},hideAllVisibleBlocks:function(){t.element("activeTab").find(".floorsDashboard__block").mod({disappear:!0})},showTab:function(e){t.element("block").mod({disappear:!1,appear:!0}),t.element("tab").mod({active:!1}),t.element("tabs").find('[data-id="'+e+'"]').mod({active:!0}),t.setTimeout(function(){t.element("block").mod({appear:!1})},d)},getDefaultTab:r,setModel:function(e){n=e}};return p},t.exports._args=["slot","model","$appState"]},{"./masonryHelper.js":210,"./tabs/about":212,"./tabs/advantages":213,"./tabs/discounts":214,"./tabs/photos":215,"./tabs/reviews":216,lodash:"lodash"}],218:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/linkURL"),o=e("./linkHelper");t.exports=function(e,t,n,r,s){var l=r.getRegion();return a.find(e.menuItems,{id:e.activeTab.id}).active=!0,a.each(e.menuItems,function(t){t.url=i("floors",{city:l.code,complexId:e.complexId,floorsDashboardTab:t.id})}),a.each(e.activeTab.blocks,function(e){e.rendered=!0}),e.privateOfficeLink=o.getPrivateOfficeLink(e,r,n),e.advLink=o.getAdvLink(e,r,n),{firmId:e.id,menuItems:e.menuItems,activeTab:e.activeTab,adsText:a.get(e,"ads.text"),privateOfficeLink:e.privateOfficeLink,advLink:e.advLink,firmListLink:i("floorsFirmList",{city:l.code,complexId:s.get("floors").complexId}),photosUploaderAvailable:e.photosUploaderAvailable}},t.exports._args=["model","slot","$i18n","$regionManager","$appState"]},{"./linkHelper":209,lodash:"lodash"}],219:[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e){function t(e){return a.chain(e).get("attributes.all").sample().get("attributes").sample(2).pluck("name").value()}var n=e&&e.data||{};return{title:a.get(n,"name_ex.primary"),subTitle:a.get(n,"name_ex.extension"),rating:n.rating,attrs:t(n)}}},{lodash:"lodash"}],220:[function(e,t,n){function a(e,t){return{temperature:c.formatTemperature(e.temp),weather:c.getWeatherIconData(e),conditions:u.getShortWeatherDesc(e,t),wind:{mods:c.getWindDirectionMap(t)[e.wind.direction].mod,desc:t._t("Ветер %1",c.getWindDirectionMap(t)[e.wind.direction].desc),value:e.wind.speed,unit:t._t("м/с")}}}function i(e,t){var n=[],a=d.getRotatedForecast(e);return l.forEach(a,function(e){var a={};a.period=l.capitalize(c.getPartDayInstrMap(t)[e.partDay]),a.weather=c.getWeatherIconData(e),a.temperature=c.formatTemperature(e.temp),a.conditions=u.getFullWeatherDesc(e,{stateOneLine:!1},t),n.push(a)}),n}function o(e,t,n){var a=[];return l.forEach(e.slice(1),function(e,i){var o,r,s={},u={},h=[];o=m(e.date,"YYYY-MM-DD"),u.date=l.capitalize(o.format("dd"))+" "+o.format("D"),r=d.getWorstWeather(e.weather,n),u.weather=r.icon,u.conditions=r.conditions,u.temperature=d.getTempRange(e),l.forEach(e.weather,function(e){var t={};t.period=l.capitalize(c.getPartDayInstrMap(n)[e.partDay]),t.weather=c.getWeatherIconData(e),t.temperature=c.formatTemperature(e.temp),h.push(t)}),s.summary=u,s.detail=h,s.dayNum=i,s.isOpen=t[i],a.push(s)}),a}function r(e,t,n){var a=n.getSettings().weather||{},i=l.get(e,"weather.temp"),o=c.findPromoLink(a.promoLinks,i,t.code),r=o&&o.linkText,s=o&&o.staticText;return s&&(r=r.toLowerCase()),o?{staticPart:s,linkPart:{text:r,href:h("search",{city:t.code,query:o.searchText})},meta:o||null}:null}function s(e,t){return f.getFormattedTime(e,t.getFormats().time.dashboard)}var l=e("lodash"),c=req("helpers/weather"),u=e("./formatters/gismeteo"),d=e("./forecastVmUtils"),h=req("helpers/linkURL"),p=req("helpers/string"),f=req("helpers/time"),m=e("moment");t.exports=function(e,t,n,l){var c=e.forecast,u=e.now,d={city:t.name,today:l._t("Сейчас %1",s(t,l)),current:a(u.weather,l),soon:i(e,l),promo:r(u,t,l),week:o(c,n,l),copyrightHref:"http://"+l._config("gismeteoDomain"),copyrightDomain:p.capitalize(l._config("gismeteoDomain"))};return d},t.exports._args=["weather","$i18n"]},{"./forecastVmUtils":221,"./formatters/gismeteo":222,lodash:"lodash",moment:"moment"}],221:[function(e,t,n){var a=e("lodash"),i=e("./formatters/gismeteo"),o=req("helpers/weather");n.getTempRange=function(e){var t=a.pluck(e.weather,"temp");return{max:o.formatTemperature(a.max(t)),min:o.formatTemperature(a.min(t))}},n.getWorstWeather=function(e,t){var n={},r=e.slice(1),s=a.max(r,"precipitation.value"),l=a.max(r,"wind.speed"),c=a.find(r,function(e){return 1==e.storm});if(l.wind.speed>20)n.conditions=i.getFullWeatherDesc(l,{stateOneLine:!0},t),n.icon=o.getWeatherIconData(s);else if(c)n.conditions=i.getFullWeatherDesc(c,{stateOneLine:!0},t),n.icon=o.getWeatherIconData(c);else{var u=a.some(r,function(e){return 0!=e.precipitation.type&&e.precipitation.value>0});if(u)n.conditions=i.getFullWeatherDesc(s,{stateOneLine:!0},t),n.icon=o.getWeatherIconData(s);else{var d=a.cloneDeep(a.max(r,"cloudy"));d.partDay=1,n.conditions=i.getFullWeatherDesc(d,{stateOneLine:!0},t),n.icon=o.getWeatherIconData(d)}}return n},n.getRotatedForecast=function(e){var t=3,n=e.now.weather.partDay,i=e.forecast,o=i.slice(0,2),r=a(o[0].weather).concat(o[1].weather).thru(function(e){var i=n+1,o=n+t+1;return a.slice(e,i,o)}).value();return r},t.exports._args=["weather","$i18n"]},{"./formatters/gismeteo":222,lodash:"lodash"}],222:[function(e,t,n){function a(e,t,n){var a;return a=t&&t.stateOneLine?" ":"<br>",0==e.direction?o.getWindDirectionMap(n)[0].desc:e.speed>20?n._t("штормовое предупреждение")+","+a+n._t("ветер %1 м/с",e.speed):n._t("ветер %1 м/с",e.speed)}var i=e("lodash"),o=req("helpers/weather");n.getShortWeatherDesc=function(e,t){var n,a=e.cloudy,r=e.precipitation.type,s=e.precipitation.value;return n=0==a?i.capitalize(o.getCloudyStateMap(t)[a]):e.storm?i.capitalize(o.getPrecipitationMap(t)[r][s])+",<br>"+t._t("возможны грозы"):i.capitalize(o.getCloudyStateMap(t)[a])+",<br>"+o.getPrecipitationMap(t)[r][s]},n.getFullWeatherDesc=function(e,t,n){var r,s,l=e.cloudy,c=e.precipitation.type,u=e.precipitation.value;return r=t&&t.stateOneLine?" ":"<br>",s=0==l?i.capitalize(o.getCloudyStateMap(n)[l])+",<br>"+a(e.wind,t,n):e.storm?i.capitalize(o.getPrecipitationMap(n)[c][u])+","+r+n._t("возможны грозы")+",<br>"+a(e.wind,t,n):i.capitalize(o.getCloudyStateMap(n)[l])+","+r+o.getPrecipitationMap(n)[c][u]+",<br>"+a(e.wind,t,n)},t.exports._args=["windData","params","$i18n"]},{lodash:"lodash"}],223:[function(e,t,n){var a=e("lodash"),i=req("helpers/linkURL");t.exports=function(e,t,n,o,r,s){function l(e){return a.each(e,function(e,t){var n;e.flampName=h,e.caption=e.description,e.id==c&&(u=e.copyright,d=t),e.order=t,"firm"==r.photosType?n="firmPhoto":"geo"==r.photosType&&(n="geoPhoto"),n&&(e.seoLink=i(n,{city:o.code,id:r.id,photoId:e.id,album:"common"!=r.albumName?r.albumName:null}))}),e}n=n||{},o=o||{},r=r||{};var c=r.photoId,u={},d=0,h=t._config("Flamp.name",o.country_code),p=l(a.get(n,"photos.items")),f=a.get(p,"length");return{photos:p,title:e.ua().isPhone?n.title:"",copyright:u,prevHref:a.get(p,[d-1,"seoLink"]),nextHref:a.get(p,[d+1,"seoLink"]),fallbackSrc:s&&a.get(p,[d,"url"]),captionCurrent:a.get(p,[d,"caption"]),countCurrent:d+1,countAll:f,useCounter:f>1,isPhone:e.ua().isPhone}},t.exports._args=["slot","$i18n","model","region","initData","needFallback"]},{lodash:"lodash"}],224:[function(e,t,n){"use strict";var a=e("lodash"),i=e("../../helpers/geo"),o=e("../../helpers/string");t.exports=function(e,t){function n(n){var i=a.compact([n.description,n.dates,n.authors]);if("attraction"==e.type&&!i.length)return null;var r=140,s=180,l=i.join(),c=l.length>s,u=o.threeDots(l.substr(0,r));return{text:i,preview:!t.isMausoleum&&c?u:null,header:n.name}}var r=i.getAttractions(e);if(!a.size(r))return null;var s=a.flow(a.partialRight(a.map,n),a.compact)(r);if(a.isEmpty(s))return null;var l=a.size(s)>1?a.tail(s):null,c={firstAttractionItem:a.first(s),additionalAttractionsList:l,expanderLabels:t.expanderLabels||{},isCollapsable:!t.isMausoleum&&!a.isEmpty(l)};return c}},{"../../helpers/geo":"/helpers/geo.js","../../helpers/string":"/helpers/string.js",lodash:"lodash"}],225:[function(e,t,n){"use strict";var a=e("lodash"),i=e("../../helpers/geo"),o=e("../../helpers/linkURL");t.exports=function(e,t,n,r){function s(n){if(!u[n])return null;var i=a.cloneDeep(u[n]);switch(n){case"providers":i.hasProvidersButton=t.hasProvidersButton,i.onClickProvidersButton=t.onClickProvidersButton;break;case"apartments":i.description=r._gg("Объявления от агентств недвижимости. <br>2ГИС не несет ответственности за достоверность информации"),i.onInitApartmentsList=t.onInitApartmentsList;break;case"firms":i.onInitFirmsList=t.onInitFirmsList}if("firms"==i.type||"apartments"==i.type?(i.onClickListItem=t.onClickListItem,i.items=a.map(i.items,function(e){return e.seoLinkOrganization=o("firm",Object.assign(h,{id:e.id})),e})):(i.items=null,i.more=!0),i.more){var s=d[i.type]||d.firms;i.seoLinkMore=o(s,Object.assign(h,{id:e.id}))}return i.onClick=t.onClickItem,i}var l=n.getRegion(),c=e.point,u=i.getFirmLists(e.links,e.apartments,r),d={firms:"geoMoreFirms",servicing:"geoMoreServicing",apartments:"geoMoreApartments",providers:"geoMoreProviders"},h={city:l.code,lon:a.get(c,"lon"),lat:a.get(c,"lat")},p=a.flow(a.partialRight(a.map,s),a.compact)(["firms","providers","apartments","servicing"]);return p},t.exports._args=["model","params","$regionManager","$i18n"]},{"../../helpers/geo":"/helpers/geo.js","../../helpers/linkURL":"/helpers/linkURL.js",lodash:"lodash"}],226:[function(e,t,n){"use strict";var a=e("lodash"),i=e("../../helpers/landmarks"),o=e("../../helpers/stationsNear"),r=e("../../helpers/parking");t.exports={getFeatureProps:function(t,n){var a={access:t.access,purpose:t.purpose,purpose_name:t.purpose_name,floors:Object.assign({},t.floors),type:t.type,name:t.name,full_name:t.full_name,subtype_name:t.subtype_name,address:Object.assign({},t.address),building_name:t.building_name,links:Object.assign({},t.links),point:Object.assign({},t.point)};return e("../cardFeatures/prepareFeaturesData")(a,{i18n:n.i18n,cityCode:n.cityCode,onParkingFeatureClick:n.parkingFeatureClickHandler,getBuildingCompositeType:!0})},getLandmarksProps:function(e,t){var n=a.get(e,"links.landmarks"),o=i.getLandmarks(n,e.id,{cityCode:t.cityCode,numberFormat:t.numberFormat});return a.map(o,function(e){return Object.assign({},e,{onLandmarksLinkClick:t.landmarksClickHandler})})},getNearStopsProps:function(e,t){var n=a.get(e,"links.nearest_stations");if(a.isEmpty(n))return null;var i=e.point,r=o.getClosestStation(n,{point:i,numberFormat:t.numberFormat,cityCode:t.cityCode,showDistance:!0});return r?Object.assign({},r,{onNearStopsLinkClick:t.nearStopsLinkClickHandler}):null},getParkingProps:function(e,t){var n={capacity:Object.assign({},e.capacity),access:e.access,is_paid:e.is_paid,is_incentive:e.is_incentive,subtype:e.subtype,level_count:e.level_count,access_comment:e.access_comment};return r.getParkingData(n,{i18n:t.i18n})}}},{"../../helpers/landmarks":"/helpers/landmarks.js","../../helpers/parking":"/helpers/parking.js","../../helpers/stationsNear":"/helpers/stationsNear.js","../cardFeatures/prepareFeaturesData":180,lodash:"lodash"}],227:[function(e,t,n){"use strict";function a(e){return[{text:e._pt("Дашборд","Поесть"),icon:"card_meta-cafe"},{text:e._pt("Дашборд","Гостиницы"),icon:"card_meta-hotel"},{text:e._pt("Дашборд","Банкоматы"),icon:"card_meta-atm"},{text:e._pt("Дашборд","Аптеки"),icon:"card_meta-pharmacy"}]}function i(e,t){var n=h.getPhotoAlbum(e,"view","800x176");return n?(n.count=n.count<1e4?n.count:"9999+",n.seoLinkPhotos=c("geoPhotoAlbum",{id:e.id,albumName:"view",center:e.point,city:t.code}),n):void 0}function o(e,t){var n="adm_div"==e.type?u.getGeoTypeHumanReadable(e,t):"",a=u.getDrilldown(e);return n&&a?n+", "+a:n||a}function r(e){if(!e||!e.point)return"";var t=e.point.lon,n=e.point.lat;return t&&n?[t,n].join(", "):t||n}var s=e("lodash"),l=req("helpers/link"),c=req("helpers/linkURL"),u=req("helpers/geo"),d=req("helpers/outputify"),h=req("helpers/firm");t.exports=function(e,t,n,h,p,f){if(!e)return null;var m=h.getRegion(),g=e.point,_=!s.isEmpty(u.getParkings(e,m.code,n)),v=e.title||u.getTitle(e,n),y=d.getSeparatedAddress(e.address,n.getFormats("address.order")),b=!1;v==(y&&y.join(" / "))&&(v=y,y=null,b=!0);var k={seoLinkAddress:g&&c("geoAddress",{city:m.code,id:e.id,lon:g.lon,lat:g.lat}),showSearch:p.get("geoCard2.searchNear"),advLink:l.getAdvLink(m,"geoCard",{},n.getLang()),photos:i(e,m),isPhotosUploader:p.get("photosUploader")&&!!e.id,separatedTitle:b,title:v},w={};switch(e.type){case"parking":case"gate":break;case"adm_div":case"attraction":w={address:y,addressInTitle:!s.includes(["gate","attraction","parking"],e.type)&&!y,drilldown:o(e,n)};break;case"geoPlace":w={coordinates:r(e)};break;default:w={addressInTitle:!s.includes(["gate","attraction","parking"],e.type)&&!y,nearParkings:"building"==e.type&&e.point&&!_,drilldown:o(e,n),metarubrics:a(n),dontPreloadPhoto:t.dontPreloadPhoto,floorsSeoLink:l.getFloorsLink(e,f,h),hasFloors:u.checkFloors(e,p,f),address:y}}return Object.assign({},k,w)},t.exports._args=["model","$i18n"]},{lodash:"lodash"}],228:[function(e,t,n){t.exports=function(e,t,n){function a(){r&&window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",o,!1)}function i(){window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",o,!1)}function o(e){var t=e.alpha;n(t)}var r=!1;return e.ua().isDesktop&&t.get("geoLocation.desktop.direction")&&(r=!0),{init:a,dispose:i}},t.exports._args=["slot","$featureSwitcher","onDirectionChange"]},{}],229:[function(e,t,n){t.exports={markers:[{id:"5348553839136541",projectGinza:"true",lon:30.359226565453,lat:59.931853969854},{id:"5348552840744206",projectGinza:"true",lon:30.315879760033,lat:59.926232946195},{id:"5348552839983118",projectGinza:"true",lon:30.359803192415,lat:59.9269737657},{id:"5348553838735194",projectGinza:"true",lon:30.325531560772,lat:59.940759478641},{id:"5348552838774513",projectGinza:"true",lon:30.359226565453,lat:59.931853969854},{id:"70000001017434696",projectGinza:"true",lon:30.311288005322,lat:59.948398164514},{id:"5348552838774387",projectGinza:"true",lon:30.302957076495,lat:59.932961391898},{id:"70000001017363508",projectGinza:"true",lon:30.354217931247,lat:59.930356874644},{id:"5348553838786640",projectGinza:"true",lon:30.320211921709,lat:59.85344350117},{id:"70000001017246070",projectGinza:"true",lon:30.34600993965,lat:59.938109464333
},{id:"5348552838774686",projectGinza:"true",lon:30.262582110167,lat:60.005196340321},{id:"5348552838480158",projectGinza:"true",lon:30.322522762281,lat:59.933890847931},{id:"5348552839974158",projectGinza:"true",lon:30.259518995123,lat:60.009226753953},{id:"70000001018465171",projectGinza:"true",lon:30.282213681087,lat:59.940356342213},{id:"5348552840574912",projectGinza:"true",lon:30.322522762281,lat:59.933890847931},{id:"5348552838479938",projectGinza:"true",lon:30.319182029901,lat:59.973326074643},{id:"5348552838774257",projectGinza:"true",lon:30.307044719754,lat:59.963342601999},{id:"5348552838774196",projectGinza:"true",lon:30.327765759087,lat:60.007208595538},{id:"70000001020002909",projectGinza:"true",lon:30.200158568676,lat:59.858022709287},{id:"70000001020393339",projectGinza:"true",lon:30.297839645822,lat:59.958037917087},{id:"5348553838943118",projectGinza:"true",lon:30.320355607495,lat:59.957789691292},{id:"5348553838621395",projectGinza:"true",lon:30.244643637009,lat:59.967363842752},{id:"5348552838479884",projectGinza:"true",lon:30.33584328983,lat:59.935172442995},{id:"5348552838495416",projectGinza:"true",lon:30.369486472311,lat:59.927673499081},{id:"5348552841830789",projectGinza:"true",lon:30.323069824667,lat:59.933727377891},{id:"5348552839487467",projectGinza:"true",lon:30.327765759087,lat:60.007208595538},{id:"70000001018615730",projectGinza:"true",lon:30.33584328983,lat:59.935172442995},{id:"70000001021590800",projectGinza:"true",lon:30.350317054739,lat:59.869010724519},{id:"5348552838774616",projectGinza:"true",lon:30.278489914632,lat:59.974002739348},{id:"70000001019093676",projectGinza:"true",lon:30.403301747489,lat:60.012167775771},{id:"5348552838774447",projectGinza:"true",lon:30.305943505211,lat:59.961398481851},{id:"70000001021241402",projectGinza:"true",lon:30.354847883946,lat:59.987001427549},{id:"5348552838479942",projectGinza:"true",lon:30.377980803582,lat:59.939845081781},{id:"70000001019386665",projectGinza:"true",lon:30.314173536937,lat:59.956059053538},{id:"70000001019138309",projectGinza:"true",lon:30.324396804958,lat:59.936195236022},{id:"5348552841424239",projectGinza:"true",lon:30.479207218252,lat:59.943784055235},{id:"70000001021309749",projectGinza:"true",lon:30.350317054739,lat:59.869010724519},{id:"70000001020871596",projectGinza:"true",lon:30.322234689934,lat:59.937303289963},{id:"70000001020014576",projectGinza:"true",lon:29.821943089615,lat:60.16801347049},{id:"70000001022501610",projectGinza:"true",lon:30.336182096584,lat:59.953595794263}]}},{}],230:[function(e,t,n){"use strict";var a=req("helpers/string"),i=e("moment"),o=e("lodash");t.exports=function(e,t){var n=o.cloneDeep(e.holidayData),r=e.project||"online",s=e.type||"detailed",l="YYYY-MM-DD",c=i.months("DD MMMM"),u=r+a.capitalize(s),d=n.holidayName,h={start:i(n.period.start,l).get("date"),end:i(n.period.end,l).get("date")};h.start==h.end&&delete h.end;var p=e.alertText||t._t("Не забудьте уточнить время работы")+".<br/>"+t._t("Возможно, в праздники оно отличается."),f=c[i(n.period.end,l).get("month")],m={type:u,holidayName:d,period:h,alertText:p,month:f,template:s,project:r};return m},t.exports._args=["initData","$i18n"]},{lodash:"lodash",moment:"moment"}],231:[function(e,t,n){"use strict";function a(e,t){var n=["name","ads","address","point"],a=i.chain(e).pick(n).extend(t).value();e.address_name!=i.get(t,"regionData.name")&&(a.addressName=e.address_name);var r=i.chain(e).get("adm_div").find("type","city").get("name","").value().replace(/^.+\s/,"");a.cityName=r?r:i.get(t,"regionData.name");var s=i.chain(e.contact_groups).map("contacts").flatten();a.contact=s.reject("type","phone").reduce(o.formatContacts,{}).value(),a.phones=s.filter(function(e){return"phone"==e.type&&i.startsWith(e.value,"+")}).value(),a.rating=i.chain(e).get("reviews.items").reduce(function(e,t){return"flamp"==t.tag&&t.rating||!e.rating?t:e}).pick("rating","review_count").value();var l=i.chain(e.attribute_groups).map("attributes").flatten();a.paymentAccepted=l.filter(function(e){return e.tag.match(/general_payment_\w+/)}).map("name").join(", ").value();var c=l.find(function(e){return e.tag.match(/price/)}).get("name","").words(/(\d+)/g).join("-").value();return a.priceRange=c?c+" "+t.currency.id:null,a.schedule=i.flow(o.getSchedule,o.formatSchedule)(e),a}var i=e("lodash"),o=e("./utils");t.exports=a},{"./utils":235,lodash:"lodash"}],232:[function(e,t,n){"use strict";t.exports={firmcard:e("./firmcard"),review:e("./review"),mainsite:e("./mainsite")}},{"./firmcard":231,"./mainsite":233,"./review":234}],233:[function(e,t,n){"use strict";function a(e){return{url:e.mainUrl}}t.exports=a},{}],234:[function(e,t,n){"use strict";function a(e,t){var n=o.get(e,"firm",{}),a=o.pick(e.review,"user","text","rating"),s=n.name,l=i(o.get(e,"review.creation_time")).format("YYYY-MM-DD HH:mm:ss"),c=r.getSeoUrl(n,t.regionData);return{firmName:s,firmUrl:c,review:a,datePublished:l}}var i=e("moment"),o=e("lodash"),r=req("helpers/firm");t.exports=a},{lodash:"lodash",moment:"moment"}],235:[function(e,t,n){"use strict";function a(e){return e.schedule?e.schedule:l.chain(e).get("contact_groups").map("schedule").compact().first().value()}function i(e){var t=l.curry(o)(e),n={Mon:"Mo",Tue:"Tu",Wed:"We",Thu:"Th",Fri:"Fr",Sat:"Sa",Sun:"Su"};return l.chain(n).map(t).compact().join(", ").value()}function o(e,t,n){return l.chain(e).get(n).get("working_hours").reduce(function(e,t){return{from:e.from,to:t.to}}).thru(function(e){return l.get(e,"from")&&l.get(e,"to")?t+" "+e.from+"-"+e.to:null}).value()}function r(e,t){return"website"==t.type?e.website=s(t.value):l.has(e,t.type)||(e[t.type]=t.value),e}function s(e){return l.chain(e).words(/http:\/\/(?!link).*/).first().value()}var l=e("lodash");t.exports={formatWebsite:s,formatSchedule:i,getSchedule:a,formatContacts:r}},{lodash:"lodash"}],236:[function(e,t,n){"use strict";var a=e("./../utils"),i={"@context":"http://schema.org/","@type":"LocalBusiness",name:a.stringField("name"),description:a.stringField("ads.text"),contactPoint:a.arrayField("phones",{"@type":"ContactPoint",telephone:a.stringField("value"),contactType:"customer support"}),fax:a.stringField("contact.fax"),email:a.stringField("contact.email"),url:a.stringField("contact.website"),address:{"@type":"PostalAddress",addressCountry:a.stringField("regionData.country_code"),addressLocality:a.stringField("cityName"),streetAddress:a.stringField("addressName"),postalCode:a.stringField("address.postcode"),postOfficeBoxNumber:a.stringField("contact.pobox")},geo:a.dependOn("point.lat",{"@type":"GeoCoordinates",latitude:a.stringField("point.lat"),longitude:a.stringField("point.lon")}),aggregateRating:a.dependOn("rating.rating",{"@type":"AggregateRating",bestRating:"5",worstRating:"1",ratingValue:a.stringField("rating.rating"),reviewCount:a.stringField("rating.review_count")}),paymentAccepted:a.stringField("paymentAccepted"),currenciesAccepted:a.stringField("currency.id"),priceRange:a.stringField("priceRange"),openingHours:a.stringField("schedule")};t.exports=function(e){return a.resolveTemplate(i,e)}},{"./../utils":240}],237:[function(e,t,n){"use strict";var a=e("lodash"),i=e("./../formatters"),o={firmcard:e("./firmcard"),review:e("./review"),mainsite:e("./mainsite")};t.exports=function(e){var t=a.get(i,e),n=a.get(o,e);return t&&n?a.flow(t,n):a.noop}},{"./../formatters":232,"./firmcard":236,"./mainsite":238,"./review":239,lodash:"lodash"}],238:[function(e,t,n){"use strict";var a=e("./../utils"),i={"@context":"http://schema.org/","@type":"WebSite",name:"2GIS",url:a.stringField("url")};t.exports=function(e){return a.resolveTemplate(i,e)}},{"./../utils":240}],239:[function(e,t,n){"use strict";var a=e("./../utils"),i={"@context":"http://schema.org/","@type":"Review",itemReviewed:{"@type":"LocalBusiness",name:a.stringField("firmName"),url:a.stringField("firmUrl")},author:{"@type":"Person",name:a.stringField("review.user.name")},datePublished:a.stringField("datePublished"),reviewBody:a.stringField("review.text"),reviewRating:a.dependOn("review.rating",{"@type":"Rating",ratingValue:a.stringField("review.rating"),bestRating:"5",worstRating:"1"})};t.exports=function(e){return a.resolveTemplate(i,e)}},{"./../utils":240}],240:[function(e,t,n){"use strict";function a(e,t){return function(n){var a=c.get(n,e);return a?o(t,n):null}}function i(e,t){return function(n){return c.chain(n).get(e).map(function(e){return o(t,e)}).value()}}function o(e,t){return c.reduce(e,function(e,n,a){return c.isFunction(n)?n=n(t):c.isObject(n)&&(n=o(n,t)),s(n)||(e[a]=n),e},{})}function r(e){return function(t){return c.get(t,e)}}function s(e){switch(void 0===e?"undefined":l(e)){case"undefined":return!0;case"object":case"string":return c.isEmpty(e);default:return!1}}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},c=e("lodash");t.exports={dependOn:a,arrayField:i,resolveTemplate:o,stringField:r}},{lodash:"lodash"}],241:[function(e,t,n){"use strict";var a=e("./jsonldFormatters"),i=req("lib/sendError");t.exports=function(e){var t=a(e.type),n=t(e.model,e.localData),o={};try{o.jsonld=JSON.stringify(n)}catch(r){i("failed to stringify jsonld",{type:e.type})}return o}},{"./jsonldFormatters":237}],242:[function(e,t,n){var a=e("lodash");t.exports=function(e,t){function n(t,n,i){function o(e,t){var n=r.getTransportType(e,t);n&&i.highlightPlatform(t.geometry.centroid,n)}var r=req("helpers/station");t=t||{},i.clearGeo();var s=["street","road","adm_div"],l=["station_platform","station"];if(a.contains(l,t.type))e.isGrym?i.highlightGeo(t.id):"station_platform"==t.type?o(t,t):"station"==t.type&&a.each(t.platforms,function(e){o(t,e)});else if(a.contains(s,t.type)){var c=t.geometry&&t.geometry.selection||t.id;c&&i.highlightGeo(c,n)}}function i(e,a){n(e,a,{clearGeo:t.clearGeomsCard,highlightPlatform:t.highlightPlatformCard,highlightGeo:t.highlightGeoCard})}var o={highlightAreaCard:i};return o}},{lodash:"lodash"}],243:[function(e,t,n){var a=e("lodash"),i=req("lib/geo/lonlat"),o=e("./geo");t.exports=function(t,n,r,s){function l(){return Math.round(o.scaleToZoom(b.mapPosition.scale))}function c(e){return{mapcenter:i(e).toFixed().toPlainObject(),angle:{degrees:e.angle},zoom:{zoomlevel:Math.round(o.scaleToZoom(e.scale))}}}function u(e){e=e||{};var t=b.mapPosition;e.angle!=t.angle&&p();var n=e.lonLat||t;return n.angle=a.isNumber(e.angle)?e.angle:t.angle,n.scale=a.isNumber(e.scale)?e.scale:t.scale,b.moveToPosition(n)}function d(){b.activeAreaMargins=s.getPixelBoundMargins(!0)}function h(){b.activeAreaMargins={top:20,right:20,bottom:20,left:20}}function p(){function e(n){var a=v(n.angle);t.notify("refreshRotate",a),clearTimeout(T),T=setTimeout(function(){t.notify("rotateStop",a),b.positionChanged.disconnect(e)},200)}b&&b.positionChanged.connect(e)}function f(){20==b.activeAreaMargins.top&&20==b.activeAreaMargins.bottom&&20==b.activeAreaMargins.right&&20==b.activeAreaMargins.left?d():h()}function m(){var e=b.mapPosition;e.angle=0,b.mapPosition=e,B=.5*Math.PI,F=.5*Math.PI,e.angle=2*N/3*Math.PI,b.moveToPosition(e)}function g(e){if(0!=B&&(N>0&&e.angle<0?e.angle+=2*Math.PI:0>N&&e.angle>0&&(e.angle-=2*Math.PI),e.angle*=N,e.angle>F)){e.angle=F;var t;B<Math.PI?(t=B,B=0):(t=2/3*Math.PI,B-=.5*Math.PI,F+=.5*Math.PI),e.angle+=t,e.angle*=N,b.moveToPosition(e)}}function _(e){return e*Math.PI/180}function v(e){return Math.round(e/Math.PI*180)}var y,b,k,w,x,C,L,I,T,S=req("lib/eventify"),E=req("lib/offlineApi/database"),P=req("lib/offlineApi/mapMovement"),j=req("lib/offlineApi/dynamicGeometry"),M=req("lib/resolvingQueue")("movement"),A=t.config,D=!1,R=!1,N=1,B=0,F=0;return k={init:function(s){b=DGOfflineAPI.systemContext.mainMapControl||DGOfflineAPI.systemContext.resolve("mainMapControl"),L=e("./mrkr")(t,k,b,E),a.extend(k,a.pick(L,"drawMarkers","drawMarker","clearMarker","clearMarkersGroup","hasMarkerWithId","highlightMarker","unhighlightMarker","royalizeMarker","deroyalizeMarker","markerIsNeeded")),d(),b.setViewElement(s);var l=r.getRegionId();if(D=l==A.universeId,!D){var c=r.getCenter();c?(c.zoom=r.getZoom().zoomlevel,c.angle=r.get("angle"),k.setPosition(c)):P.jumpToDefaultPosition()}n.onInit(function(t,n){D=t.id==A.universeId,b.addRegion(n),L.initFlags(),I=e("./highlight")(k),a.extend(k,a.pick(I,"highlightGeo","unhighlightGeo","highlightGeoCard","highlightPlatformCard","unhighlightAll","clearGeomsCard")),D||e("./hoverHandler")().bind(k)}),n.on("dispose region",function(e,t){b.releaseRegion(t)}),n.on("init region",function(e){var t=req("lib/offlineStorage/offlineStorage")(),n=t.get("positions",e.id);n?(b.registerOurChange("replace"),b.setPosition(n)):b.defaultPosition()});var u={branch:!0,building:!0};b.defaultIdentify.connect(function(e){function t(e){if(e&&e[0]){var t=e[0].type;n.type=t,u[t]&&(n.isPoi=!0)}k.emit("map click",n)}var n=i(e.identifiedGeoPoint||e.clickGeoPoint);e.directoryObject?(n.id=e.directoryObject.id,E.resolveObjectData([{id:n.id}],"full",function(e){var i=a.first(e);return i&&"metro"==i.subtype&&"station_platform"==i.type?(n.id=i.station_id,void E.resolveObjectData([{id:n.id}],"full",t)):void t(e)})):k.emit("map click",n)}),b.positionChanged.connect(function(e){R&&(R=!1,t.setTimeout(m,100)),0!=B&&g(e),r.changeZoom(Math.round(o.scaleToZoom(e.scale))),b.isMinimumScale()?t.notify("maxZoomLevelReached"):b.isMaximumScale()?t.notify("minZoomLevelReached"):t.notify("intermediateZoomLevelReached"),clearTimeout(C),C=setTimeout(function(){var t={};y&&(t.isOur=!0,t.historyAction=y,y=null),k.emit("positionChanged",t,e)},500)}),t.block().on("mousemove",function(e){e.containerPoint={x:e.clientX,y:e.clientY},k.emit("mousemove",e)}),k.on("somethingHovered",function(){t.notify("mapElemHovered")}).on("somethingUnhovered",function(){t.notify("mapElemUnhovered")})},clearRoutes:a.noop,registerOurChange:function(e){y=e},drawRecoveryMarker:a.noop,toggleTrafficLayer:a.noop,setView:function(e,t){u({lonLat:e,scale:o.zoomToScale(t)})},focusGeo:function(e){k.fitObjects([{id:e.id}],"focus")},focusPoints:a.noop,focusPoint:function(e){e&&parseInt(e,10)&&k.fitObjects([{id:e}],"focus")},focusModel:function(e,t){var n=[{id:e.id}];t.extraObjects&&a.each(t.extraObjects,function(e){e.id&&n.push({id:e.id})}),k.fitObjects(n,"focus")},routeShow:a.noop,togglePlatformMarker:a.noop,changeActiveDirection:a.noop,getCenter:function(){return a.pick(b.mapPosition,"lon","lat")},getAngle:function(){return v(b.mapPosition.angle)},setPosition:function(e){b.mapPosition={lon:e.lon,lat:e.lat,angle:_(e.angle),scale:o.zoomToScale(e.zoom)}},hideEntrances:function(e){e&&e.id!=x||j.hide(w)},showEntrance:function(e,t){t=t||{},j.hide(w);var n={onEntranceFocus:"entrances",onMarkerFocus:"object_and_entrances"};w=n[t.movingType]||n.onMarkerFocus,x=e.id,j.show({id:e.id},w),p()},calculateViewportCenter:function(e){var t=s.getPixelBound().topLeft,n=b.convertGeoPoint2dToScreenPoint(e);return n.x-=t[0]/2,b.convertScreenPointToGeoPoint2d(n)},setViewportCenter:function(e){var t=k.calculateViewportCenter(e);u({lonLat:t})},fitObjects:function(e,t){"focus"==t?P.moveToObjects(e,function(){M.dequeue()}):P.zoomOutToObjects(e),p()},defaultPosition:function(){return P.jumpToDefaultPosition(),c(b.mapPosition)},getZoom:l,setZoom:function(e){var t=b.mapPosition;t.scale=o.zoomToScale(e),b.mapPosition=t},zoomIn:function(){b.zoomIn()},zoomOut:function(){b.zoomOut()},addMovement2Queue:a.bind(M.enqueue,M),rotate:function(e){u({angle:_(e)})},isUniverse:function(){return D},toggleViewportLimits:f,setViewportLimits:d},S(k)},t.exports._args=["slot","$regionManager","$appState","$viewport"]},{"./geo":245,"./highlight":246,"./hoverHandler":247,"./mrkr":248,lodash:"lodash"}],244:[function(e,t,n){function a(){this.hash={}}var i=e("lodash");a.prototype.add=function(e){this.hash[e]=1},a.prototype.addEphemeral=function(e){e in this.hash||(this.hash[e]=0)},a.prototype.rm=function(e){delete this.hash[e]},a.prototype.rmEphemeral=function(e){0==this.hash[e]&&delete this.hash[e]},a.prototype.clear=function(){this.hash={}},a.prototype.arrayOfObjects=function(){return i.map(this.hash,function(e,t){return{id:t}})},t.exports=function(){return new a}},{lodash:"lodash"}],245:[function(e,t,n){function a(e){return Math.log(e)/Math.log(2)}var i=6378137,o=2*Math.PI*i,r=96,s=256,l=r/.0256;n.zoomToScale=function(e){return o/(Math.pow(2,e)*s/l)},n.scaleToZoom=function(e){return a(o*l/(e*s))}},{}],246:[function(e,t,n){var a=req("lib/offlineApi/mapSelection"),i=e("lodash");t.exports=function(t){function n(e){l.addEphemeral(e),a.setSelection(l.arrayOfObjects())}function o(e){l.rmEphemeral(e),a.setSelection(l.arrayOfObjects())}function r(e){e&&(l.rm(e),a.setSelection(l.arrayOfObjects()))}function s(){l.clear(),t.isUniverse()||a.setSelection(l.arrayOfObjects())}var l=e("./ephemeralHash")();return{highlightGeo:n,unhighlightGeo:o,highlightGeoCard:n,highlightPlatformCard:i.noop,clearGeomsCard:r,unhighlightAll:s}}},{"./ephemeralHash":244,lodash:"lodash"}],247:[function(e,t,n){var a=e("lodash");t.exports=function(){function e(e,t,n){return{data:e,pixel:t,type:n}}function t(t,n,a){switch(a.layerData){case"SIGHT":return e(t,n,"sight");default:return e(t,n,"firms")}}var n={bind:function(e){var n,i=req("lib/offlineApi/database"),o=req("lib/offlineApi/mapObjectsHoverHandler");o.mapObjectHoverEnter&&o.mapObjectHoverLeave&&(o.mapObjectHoverEnter.connect(function(o,r,s,l){n=!0,i.resolveObjectData([{id:l.id}],"full",function(i){n&&e.emit("somethingHovered",t(a.first(i),o,l))})}),o.mapObjectHoverLeave.connect(function(t){"POI"!=t.layerData&&"SIGHT"!=t.layerData&&"PLATFORM"!=t.layerData||(n=!1,e.emit("somethingUnhovered"))}))}};return n}},{lodash:"lodash"}],248:[function(e,t,n){t.exports=function(t,n,a,i){function o(){!M&&P.setStatesPriority&&(M=!0,P.setStatesPriority(["hidden","selected","highlighted"]))}function r(e){var t=E.first(e);return t&&t.type||"branch"}function s(e,t,a,i){var o={objectType:r(i),type:I,ids:E.pluck(i,"id"),lonlat:a};n.emit("marker click",o)}function l(e,o,s,l){j++,u(!0,C,l),u(!0,L,l);var c=E.reduce(l,function(e,t){return t.isInbuild||e.push(t.id),e},[]),d={type:I,ids:c,lonlat:s,pixel:a.convertGeoPoint3dToScreenPoint(s)},h=t.searchContext.read("contextKey"),p=j;i.resolveObjectData(l,"full",h,function(e){p==j&&(d.objectType=r(e),d.data=1==l.length?e[0]:e,n.emit("markerHovered",d))})}function c(e){j--,u(!1,C,e),u(!1,L,e);var t={ids:E.pluck(e,"id")};n.emit("markerUnhovered",t)}function u(e,t,n){if(t){if(T&&E.findWhere(n,{id:T}))return;t.toggleState(e,"highlighted",n)}}function d(e,t){function n(n){n&&n.toggleState(t,"selected",e)}T=t?e:null,n(L),n(C)}function h(e,t){var n=t?"connect":"disconnect";e.markerActivated[n](s),e.markerHoverEnter[n](l),e.markerHoverLeave[n](c)}function p(){var e=[].slice.call(arguments),t=e.pop(),n=function(e){h(e,!0),e.remove=function(){this.setVisible(!1),h(this,!1)},t(e)};return e.push(n),P.createMarkerGroup.apply(P,e)}function f(e,t){I=t,p(e,!0,function(e){C=e,e.setVisible(!0)})}function m(e,t,n){L&&L.setVisible(!1);var a={id:e};t.ads&&(a.markerTags=["ad"]),p([a],!1,function(a){if(L=a,L.setVisible(!0),n.royalize&&(L.addState("selected"),C&&t)){var o="branch"==t.type?t.address.building_id:e;i.resolveReference([{id:o}],"link",function(e){S=e[0],S&&C.addState("hidden",S)})}})}function g(e){L&&L.hasObjectId(e)&&(L.remove(),L=null),C&&S&&(C.removeState("hidden",S),S=null)}function _(){C&&(C.remove(),C=null),L&&(L.remove(),L=null),T=null}function v(e){function t(t){return t&&t.hasObjectId(e)}return t(C)||t(L)}function y(e){u(!0,C,e),u(!0,L,e)}function b(e){u(!1,C,e),u(!1,L,e)}function k(e){d(e,!0)}function w(e){d(e,!1)}function x(e,t){return"query/geo"!=t||E.contains(A,e.type)}var C,L,I,T,S,E=e("lodash"),P=req("lib/offlineApi/markerManager"),j=0,M=!1,A=["building","attraction"];return{initFlags:o,drawMarkers:f,drawMarker:m,clearMarker:g,clearMarkersGroup:_,hasMarkerWithId:v,highlightMarker:y,unhighlightMarker:b,royalizeMarker:k,deroyalizeMarker:w,markerIsNeeded:x}}},{lodash:"lodash"}],249:[function(e,t,n){t.exports=function(e,t){var n,a,i={},o=1/0,r=!1;return i.add=function(i){if(!r){var s=t(i,e);s?r=!0:(n=e.distanceTo(i),o>n&&(o=n,a=i))}},i.canApply=function(){return!r&&a},i.getBounds=function(){var t=a.lat-e.lat,n=a.lng-e.lng,i=L.latLng({lat:e.lat-t,lng:e.lng-n}),o=new L.LatLngBounds;return o.extend(a),o.extend(i),o},i}},{}],250:[function(e,t,n){var a=e("lodash"),i=req("lib/geo/lonlat");t.exports=function(e,t){function n(t,n,a){var i="extraLayers-"+n,o=a+n;e.ua().isIE(8)||(o=o.replace(".png",".svg")),o+="?bg=map";var s=r(i,o),l={pane:f,icon:s,draggable:!1,zIndexOffset:p.mushroomsMarker,riseOnHover:!0,riseOffset:2e3},c=L.markerEx(t,l);return c.data={},c.data.markerType=i,c}function o(){u||(u=new L.FeatureGroup),!f&&c.createPane&&(f=c.createPane("extraLayersPane")),d||(d=new L.MarkerGeneralizeGroup({showCoverageOnHover:!1,maxClusterRadius:40,iconCreateFunction:function(t){return new L.DivIcon({html:e.renderPartial("cluster",t.getChildCount())})},pane:f,maxZoom:t.getZoomlevels("max"),minZoom:t.getZoomlevels("min"),levels:a.cloneDeep(m)})),c.addLayer(d)}function r(e,t){return g[e]||(g[e]=L.divIcon({iconSize:L.point(18,18),className:"map__markerExtraLayers",html:'<img class="map__markerExtraLayersIcon" src="'+t+'">'})),g[e]}function s(e,n){var o=n.data.id,r={ids:[o],marker:e};a.extend(r,n);var s=function(e){r.pixel=t.getPixelOfEvent(e),r.latlng=e.latlng,r.lonlat=i(e.latlng)};return e.on("click",function(){setTimeout(function(){t.emit("marker click",r)},0)}),e.on("mouseover",function(e){s(e),t.emit("markerHovered",r)}),e.on("mouseout",function(e){s(e),t.emit("markerUnhovered",r)}),r}function l(e,t){return"Polygon"==e?t.outline?t["stroke-opacity"]:0:t["stroke-opacity"]}var c,u,d,h=e.config,p=h["markers.zIndex"],f=null,m=h["markers.levels.extraLayers"],g={};t.on("mapInited",function(){c=t.map,o()});var _={drawExtraLayers:function(e){function t(e){var t=e.geomsList;L.geoJson(t,{pointToLayer:function(t,a){return n(a,t.properties.icon,e.resourceUrl)},onEachFeature:function(t,n){void 0===n.getLatLngs&&n.addTo(d),s(n,{data:t,type:"extraLayers",layerId:e.layerId})},style:function(e){var t={color:"#624f3e",weight:2,opacity:.7,fillColor:"#624f3e",fillOpacity:.2},n=e&&e.properties||{},i={color:n["stroke-color"]?"#"+n["stroke-color"]:void 0,weight:n["stroke-width"],opacity:l(a.get(e,"geometry.type"),n),fillColor:n["fill-color"]?"#"+n["fill-color"]:void 0,fillOpacity:n.fill?n["fill-opacity"]:0};return a.defaults(i,t)}}).addTo(u),c.addLayer(u)}u.clearLayers(),d.clearLayers(),a.each(e,t)}};return _}},{lodash:"lodash"}],251:[function(e,t,n){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=e("lodash"),o=e("./methods");t.exports=function(e,t,n){var r,s,l,c=e.config,u=c["markers.levels.favorite"],d=c["markers.zIndex"];return t.on("mapInited",function(){r=t.map,l=r.createPane("favoritesPane"),s||(s=new L.MarkerGeneralizeGroup({levels:i.cloneDeep(u),pane:l})),r.addLayer(s)}),n.subscribe(function(){if(!e.isServer){var r=n.getState().favorites,c=i.get(r,"collection.is_owned"),u=r.hideMarkers?[]:i.map(r.list,function(e){return a({},e,{apiData:i.get(e,"item.objectData")})});o.drawFavorites(t,s,e,l,u,c)}}),{highlightFavorites:o.highlightFavorites(d),unhighlightFavorites:o.unhighlightFavorites(d)}},t.exports._args=["slot","leafletImplProxy","$favorites"]},{"./methods":252,lodash:"lodash"}],252:[function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){if(!e.lon||!e.lat){var a=o.getGeom(n,t);a&&a.point&&(e.lon=a.point.lon,e.lat=a.point.lat)}}var o=e("./utils"),r=e("lodash"),s=req("lib/geo/lonlat"),l=e("../../markersHash"),c=e("../../styles/marker"),u=req("helpers/geo"),d=r.curry(function(e,t,n){return r.get(n,e,t)}),h=d("apiData.id",""),p=r.compose(l.getById,h),f=[];n.drawFavorites=function(e,t,i,o,s,c){var u=r.map(s,r.partial(n.drawMarker,e,t,i,o,c));f=r.reduce(f,function(e,n){return u.indexOf(n)<0?(t.removeLayer(l.getById(n)),l.deleteById(n),e):[].concat(a(e),[n])},[])},n.createMarker=function(e,t,n,a){var i=o.getIcon(a),r={icon:i,draggable:!1,pane:n,zIndexOffset:t["markers.zIndex.mushroomsMarker"],riseOnHover:!0,riseOffset:2e3};return e.point&&e.point.lon&&e.point.lat?L.markerEx(e.point,r):!1},n.drawMarker=function(e,t,a,i,s,l){var c=p(l),d=h(l);if(c)return d;var m=r.cloneDeep(l),g=o.canAddMarker(m),_=o.getGeom(a,m);if(!g||!_)return null;var v=n.createMarker(_,a.config,i,s);if(v){if(m.apiData||m.sourceData)v.data=r.extend({},m.apiData||m.sourceData);else{var y=a.requireComponent("i18n");v.data=u.createSomePlace(y)}var b={id:o.getMarkerIdent(m),type:o.getMarkerType(m)};return v=r(v).thru(r.partial(n.bindMarker,e,m,b)).thru(r.partial(n.registerInHash,a,m)).value(),t.addLayer(v),f.push(d),d}return null},n.bindMarker=function(e,t,n,a){n=n||{};var i={marker:a,data:r.extend({isFavoriteMarker:!0},a.data,t.item.point),ids:[n.id],type:n.type,count:1};i=r.extend(i,n);var o=function(t){i.pixel=e.getPixelOfEvent(t),i.latlng=t.latlng,i.lonlat=s(t.latlng)};return a.on("click",function(t){o(t),r.defer(function(){e.emit("marker click",i)})}),a.on("mouseover",function(t){o(t),e.emit("markerHovered",i)}),a.on("mouseout",function(t){o(t),e.emit("markerUnhovered",i)}),a},n.registerInHash=function(e,t,n){return n.data&&(i(n.data,t,e),l.registerNew(n)),n},n.highlightFavorites=function(e){return r.compose(function(t){return c.setZIndex(t,e)},c.highlighted,l.getById,d("item.id",""))},n.unhighlightFavorites=function(e){return r.compose(function(t){return c.setZIndex(t,e)},c.unhighlighted,l.getById,d("item.id",""))}},{"../../markersHash":276,"../../styles/marker":277,"./utils":253,lodash:"lodash"}],253:[function(e,t,n){"use strict";var a,i,o=e("lodash");n.getIcon=function(e){return e?(a||(a=L.divIcon({iconSize:[22,18],iconAnchor:[12,9],className:"map__markerFavorites"})),a):(i||(i=L.divIcon({iconSize:[0,0],className:"map__marker"})),i)},n.canAddMarker=function(e){switch(e.type){case"object":return!!e.apiData;case"point":return e.item&&!!e.item.point;case"route":return!1;default:return!1}},n.getGeom=function(e,t){var a={object:o.partial(n.getGeomObject,e),point:o.partial(n.getGeomPoint,e),route:o.partial(n.getGeomRoute,e)},i=a[t.type];return i&&o.isFunction(i)?i(t):null},n.getGeomObject=function(e,t){var n=t.apiData,a=e.requireComponent("wkt");if(t.item.point)return{point:t.item.point};if(n.point)return{point:n.point};if(n.geometry){var i=a.parseObject(n.geometry.centroid);if(i&&"Point"==i.type)return{point:i.geometry}}if("station"==n.type&&!n.point&&!n.geometry){var o=n.platforms&&n.platforms[0]&&a.parseObject(n.platforms[0].geometry.centroid);if(o&&"Point"==o.type)return{point:o.geometry}}return null},n.getGeomPoint=function(e,t){return{point:t.item.point}},n.getGeomRoute=function(){return{}},n.getMarkerIdent=function(e){switch(e.type){case"object":return e.apiData&&e.apiData.id;case"point":return e.id;case"route":return null;default:return null}},n.getMarkerType=function(e){var t={branch:"firms",station_entrance:"station_entrance",station_platform:"station_platform",station:"station"};return e.apiData&&t[e.apiData.type]?t[e.apiData.type]:"geo"}},{lodash:"lodash"}],254:[function(e,t,n){var a=e("lodash"),i=req("lib/geo/lonlat"),o=e("slot/lib/defer");t.exports=function(e,t,n,r,s){function l(e,t){var n=g?c():u(),a={icon:n,draggable:!1,zIndexOffset:k.mushroomsMarker,riseOnHover:!0,riseOffset:2e3,pane:t},i=L.markerEx(e,a);return i}function c(){return _||(_=L.divIcon({iconSize:[0,0],html:e.renderPartial("geolocation",{})})),_}function u(){return v||(v=L.divIcon({iconSize:[0,0],html:e.renderPartial("geolocation",{simple:!0})})),v}function d(){var t=e.element("markerGeolocation");t&&t.mod({hidden:!1})}function h(){var t=e.element("markerGeolocation");t&&t.mod({hidden:!0})}function p(){w&&(f.removeLayer(w),w=null)}var f,m,g,_,v,y,b=e.config,k=b["markers.zIndex"],w=null,x=!1;t.on("mapInited",function(){f=t.map,!m&&f.createPane&&(m=f.createPane("geolocationPane")),f.on("locationfound",function(e){g=!0,e.zoom=f.getBoundsZoom(e.bounds),y=e.zoom,t.emit("locationfound",a.pick(e,"zoom","latlng"))}),f.on("zoomstart",function(){x=o()}),f.on("zoomend",function(){x&&(x.resolve(),x=!1)})});var C={drawGeolocationMarker:function(a){function o(){function o(e){h.pixel=t.getPixelOfEvent(e),h.lonlat=i(e.latlng)}p();var c="geolocation",u=l(L.latLng(a),"geolocationPane"),h={marker:u,data:{name:s._pt("Геолокация","Вы здесь")},type:c};u.on("mouseover",function(e){o(e),t.emit("somethingHovered",h)}),u.on("mouseout",function(e){o(e),t.emit("somethingUnhovered",h)}),u.on("click",function(){if(r.inGlobal())if(g)t.moveTo(u.getLatLng(),y,!0);else{var a=n.get("geoProject");a&&e.notify("changeRegion",a)}}),f.addLayer(u),w=u,d()}x?x.done(o):o()},updateGeolocationMarker:function(e){w&&w.setLatLng(L.latLng(e))},clearGeolocationMarker:function(){g=!1,p()},showGeolocationMarker:function(e){g||(w?d():e&&C.drawGeolocationMarker(e))},hideGeolocationMarker:function(){g||w&&h()},locate:function(e){var t=a.clone(e);return t.setView=!1,f.locate(t)},stopLocate:function(){return f.stopLocate()}};return C},t.exports._args=["slot","leafletImplProxy","$syncRegistry","$appState","$i18n"]},{lodash:"lodash","slot/lib/defer":489}],255:[function(e,t,n){function a(e,t){var n=e.getWest(),a=e.getEast(),i=e.getSouth(),o=e.getNorth(),r=t.getWest(),s=t.getEast(),l=t.getSouth(),c=t.getNorth(),u=0,d=Math.max(Math.min(n,a),Math.min(r,s)),h=Math.min(Math.max(n,a),Math.max(r,s)),p=Math.max(Math.min(i,o),Math.min(l,c)),f=Math.min(Math.max(i,o),Math.max(l,c));return h-d>0&&f-p>0&&(u=(h-d)*(f-p)),u}var i=e("lodash");n.findNearest=function(e,t){return i.min(t,function(t){return e.distanceTo(t.default_pos)})||{}},n.findBiggest=function(e,t){return i.max(t,function(t){return a(e,t.bounds)})||{}},n._getIntersectArea=a},{lodash:"lodash"}],256:[function(e,t,n){var a=e("lodash"),i=req("lib/geo/lonlat"),o=req("helpers/time"),r=e("./calc");t.exports=function(t,n,s,l,c,u,d,h,p,f){function m(){F=new L.FeatureGroup({showCoverageOnHover:!1,maxClusterRadius:1,iconCreateFunction:b}),B.addLayer(F),O=new L.MarkerGeneralizeGroup({levels:[{safeZone:5,size:[36,40],offset:[18,40],className:"_general_shield"},{safeZone:5,size:[14,14],className:"_general_bullet"},{safeZone:0,className:"_general_hidden"}],showCoverageOnHover:!1,maxClusterRadius:1,maxZoom:19,pane:z,iconCreateFunction:b}),B.addLayer(O)}function g(e){return a.isNumber(e)&&e<=U["globalMap.countryZoom"]}function _(e){return a.isNumber(e)&&e>U["globalMap.countryZoom"]&&e<=U["globalMap.cityZoom"]}function v(e){return a.isNumber(e)&&e>U["globalMap.cityZoom"]}function y(e){return a.isNumber(e)&&e<=U["globalMap.globalZoom"]}function b(e){return new L.DivIcon({html:t.renderPartial("cluster",e.getChildCount())})}function k(e){var t=B.getZoom();return v(t)!=v(e)&&v(t)?void T():_(t)!=_(e)&&_(t)?void E():g(t)?void P():void 0}function w(e){return e=e||d.getLatLngCenter(),a.filter($.get(),function(t){return t.bounds.contains(e)})}function x(e,t){var n=B.getBounds(),i=a.filter(a.isEmpty(t)?$.get():t,function(e){return n.intersects(e.bounds)});return a.isEmpty(i)?null:i.length>1?(e=e||d.getLatLngCenter(),r.findNearest(e,i)):a.first(i)}function C(e){var t=w(e);return 1==t.length?a.first(t):x(e,t)}function I(e,a){var i=B.getZoom();if(y(i))return void(y(i)!=y(e)&&n.emit("enterGlobal"));var o=C(a);o?(R(),(o.id!=s.getRegion().id||c.inGlobal())&&t.notify("changeRegion",o.id,!0)):t.notify("enterGlobal")}function T(){O.clearLayers(),F.clearLayers()}function S(e){return e.pixel=n.getPixelOfEvent(e),e.lonlat=i(e.latlng),e}function E(){T();var e=s.getRegions(),t=a.sortBy(e,function(e){return-e.statistics.branch_count}),n=[];a.each(t,function(e){var t,a=(u.getCountries(e.country_code)||{}).disableShowCityName;a||(t=e.name);var i="_city_"+e.code,o=M(L.latLng(e.default_pos),{code:e.code,modifier:["_cityIcon",i].join(" "),pane:z,name:t});j(o,e),n.push(o);
}),O.addLayers(n)}function P(){T();var e=u.getCountries(),i=B.getBounds();a.each(e,function(e){var o=a.find(e.points,function(e){return i.contains(L.latLng(e))});o=o||a.first(e.points),o=L.latLng(o);var r="_country_"+e.code,s=M(o,{code:e.code,modifier:["_countryIcon",r].join(" "),pane:q});s.on("click",function(){n.emit("somethingUnhovered"),t.notify("countryMarkerClicked",e,o),l.trackEvent("google",["Global_Markers","Click","Country",1])}).on("mouseover",function(t){t=S(t),t.type="globalCountry",t.data={name:e.name,description:f._nt("%1 город","%1 города","%1 городов",e.citiesCount||e.regionsCount)},n.emit("somethingHovered",t),l.trackEvent("google",["Global_Markers","Show_Tooltip","Country",1])}).on("mouseout",function(){n.emit("somethingUnhovered")}),F.addLayer(s)})}function j(e,a){e.on("click",function(){t.notify("changeRegion",a.id),n.emit("somethingUnhovered"),a.id==p.get("geoProject")?l.trackEvent("google",["Global_Markers","Click","Identified_City",3]):l.trackEvent("google",["Global_Markers","Click","City",2])}).on("mouseover",function(e){e=S(e),e.type="globalCity",e.data={name:a.name,description:o.getFormattedTime(a,f.getFormats().time["short"])+" "+o.getTimeZone(a,f)},n.emit("somethingHovered",e),l.trackEvent("google",["Global_Markers","Show_Tooltip","City",2])}).on("mouseout",function(){n.emit("somethingUnhovered")})}function M(e,n){n=n||{};var a=n.code,i=n.modifier,o=n.pane,r=n.name,s=L.divIcon({iconSize:null,iconAnchor:[0,5],className:"map__globalMarker "+i,html:t.renderPartial("globalMarker",{mod:i,city:"logo_s_"+a,name:r})}),l={icon:s,draggable:!1,riseOnHover:!0,riseOffset:2e3};return o&&(l.pane=o),L.marker(e,l)}function A(){var e=p.get("geoProject");if(e){var t=s.getRegions(),n=t[e];if(n)return n.default_pos}return null}function D(){var e=A();e&&n.emit("autoLocationShow",e)}function R(){var e=A();e&&n.emit("autoLocationHide")}function N(){var e=B.getZoom();t.mod({globalMarkerName:4==e})}if(!h.get("globalMap"))return{};var B,F,O,z,q,$=t.invoke(e("./regionsBounds"),[n]),U=t.config;return s.on("init region",R),n.on("mapBounded",function(){c.inGlobal()&&D()}),n.on("enterGlobal",function(){k(),D()}),n.on("mapInited",function(){B=n.map,z=B.createPane("globalCityPane"),z.style.display="none",q=B.createPane("globalCountryPane"),m(),k(),N();var e=B.getZoom();B.on("zoomstart",function(){e=B.getZoom()}),B.on("zoomend",function(){k(e),N()}),B.on("moveend",function(t){var n,i=a.get(t,"target.scrollWheelZoom._lastMousePos");i&&(n=B.containerPointToLatLng(i)),I(e,n)})}),{}},t.exports._args=["slot","leafletImplProxy","$regionManager","$analytics","$appState","$countryManager","$viewport","$featureSwitcher","$syncRegistry","$i18n"]},{"./calc":255,"./regionsBounds":257,lodash:"lodash"}],257:[function(e,t,n){var a=e("lodash");t.exports=function(e,t){var n;return{get:function(){return n||(n=a.map(t.getRegions(),function(t){return{id:t.id,name:t.name,default_pos:L.latLng(t.default_pos),country_code:t.country_code,bounds:e.getBoundFromPolygon(t.bounds)}})),n}}},t.exports._args=["leafletImplProxy","$regionManager"]},{lodash:"lodash"}],258:[function(e,t,n){var a=e("lodash");t.exports=function(t,n){function i(e){return t.invoke(e,[t,o])}var o=e("../leafletImplProxy")(t,n),r=[i(e("./parkings")),i(e("./ruler")),i(e("./traffic")),i(e("./routeSearch")),i(e("./transport")),i(e("./markers/common")),i(e("./markers/superize")),i(e("./markers/labelsForTests")),i(e("./extraLayers")),i(e("./geolocation")),i(e("./globalMap")),i(e("./favorites"))],s={};return a.each(r,function(e){s=a.extend(s,e)}),s}},{"../leafletImplProxy":275,"./extraLayers":250,"./favorites":251,"./geolocation":254,"./globalMap":256,"./markers/common":259,"./markers/labelsForTests":260,"./markers/superize":268,"./parkings":269,"./routeSearch":270,"./ruler":271,"./traffic":272,"./transport":273,lodash:"lodash"}],259:[function(e,t,n){var a=e("lodash"),i=e("../../markersHash"),o=e("../../styles/marker"),r=e("./lib/preparing"),s=req("helpers/firm").getStaticId;t.exports=function(t,n,l){function c(e,t){var n=d(e,t),a=S.getMarkersGroup(e);return a.addLayer(n),n}function u(e,t,n){var a=c(e,t);return i.registerNew(a,n),a}function d(e,t){var n={click:I.markerClick,mouseover:I.markerMouseover,mouseout:I.markerMouseout};return T(k,e,t,n)}function h(t,n){function o(){c.off("invalidationFinish",o),w&&y(w.getCoords(),n,w.getId())}var r=e("./lib/deduplicate"),s=r(t),l=[],c=S.getMarkersGroup(n);a.each(s,function(e){var t=d(n,e);i.registerNew(t),l.push(t)}),c.addLayers(l),c.on("invalidationFinish",o)}function p(e){var t=S.getMarkersGroup(e);return n.emit("hideAllMarkers"),i.clear(),t.clearLayers()}function f(e,t){var n=i.getById(e);if(n){m(e,t);var a=S.getMarkersGroup(t);a.removeLayer(n);var r=i.deleteById(e);r&&o.showMarker(r)}}function m(e,t,n){if(w&&w&&w.getId()==s(e)){var a=w.getMarker();if(a.revokeImmunity(),w.needDelete()){b.removeLayer(a);var r=S.getMarkersGroup(t);if(r.removeLayer(a),!n){var l=i.deleteById(e);w.needShowUnderlying(b.getZoom())&&o.showMarker(l)}}w=null,a.classes.remove("_czar"),o.setZIndex(a,C),o.isBookletMarker(a)&&a.classes.remove("map__marker").add("map__markerBookletPoi")}}function g(e){var t=i.getById(e);t&&!t.classes.contains("_czar")&&(o.highlighted(t),o.setZIndex(t,C))}function _(e){var t=i.getById(e);o.unhighlighted(t),o.setZIndex(t,C)}function v(){var e=null;if(t.mod().onlyAdsMushrooms){var n=b.getZoom();13>=n?e="s":n>=14&&16>=n?e="m":n>=17&&(e="l")}t.mod({bulletSize:e})}function y(e,t,n){var a=i.getByIdAndCoords(n,e);m(n,t,!0);var r;if(a&&b.hasLayer(a))a.immunifyForHide(),r="reformed";else{var l=i.getByIdAndCoords(n,e);l?l==a?(b.addLayer(a),r="reformed"):(a=u(t,e,l),o.hideMarker(l),r="substituted"):(a=u(t,e),r="created"),a.immunifyForHide()}a.classes.add("_czar"),o.setZIndex(a,C),o.isBookletMarker(a)&&a.classes.remove("map__markerBookletPoi").add("map__marker"),w=new L({id:s(n),coords:e,marker:a,type:r})}var b,k,w,x=t.config,C=x["markers.zIndex"],L=e("./royalData"),I=e("./lib/events")(t,n),T=a.partial(e("./lib/creator"),t,n),S=e("./lib/groups")(t,n);n.on("mapInited",function(){b=n.map,k=b.createPane("searchPane");var e=l.get("dotMarkers3");a.each(S.createLayerGroups(k,e),function(e){b.addLayer(e)}),b.on("zoomend",function(){v()})});var E={drawMarkers:function(e,t,a){function i(){o.off("invalidationFinish",i),a(),n.emit("showAllMarkers")}v(),S.setCurrentMarkersGroup(t),p(t);var o=S.getMarkersGroup();o.on("invalidationFinish",i);var s=r.search(e);h(s,t)},clearMarkersGroup:p,drawMarker:function(e,t,n){var a=r.fromFull(t);a&&y(a,n.mode,e)},clearMarker:m,drawRecoveryMarker:function(e){var t=r.fromSeeAlso(e);t&&u("firms",t)},clearRecoveryMarker:function(e){var t=i.getLastMarkerByCoords(e);o.isRecoveryMarker(t)&&f(e.branch_id,"firms")},highlightRecoveryMarker:function(e){if(e.point){var t=i.getLastMarkerByCoords(e.point);t&&(o.isRecoveryMarker(t)||o.makeMarkerRecovery(t),g(e.id))}},unhighlightRecoveryMarker:function(e){if(e.point){var t=i.getLastMarkerByCoords(e.point);t&&(o.isRecoveryMarker(t)||o.remakeMarkerRecovery(t),_(e.id))}},hasMarker:function(e){return b.hasLayer(e)},hasMarkerWithId:function(e){return!!i.getById(e)},highlightMarker:g,unhighlightMarker:_};return E},t.exports._args=["slot","leafletImplProxy","$featureSwitcher"]},{"../../markersHash":276,"../../styles/marker":277,"./lib/creator":261,"./lib/deduplicate":262,"./lib/events":263,"./lib/groups":264,"./lib/preparing":266,"./royalData":267,lodash:"lodash"}],260:[function(e,t,n){var a,i,o=e("lodash"),r=!1,s=!1;t.exports=function(t){function n(){r&&(o.isFunction(a)&&a(),c.getMarkersGroup().eachLayer(function(e){var t=e.data.ids;t&&t.length>1?$(e._icon).mod({firmsMulti:!0}):t&&1==t.length&&$(e._icon).mod({firmSingle:!0})}),o.isFunction(i)&&i())}function l(){s&&c.getMarkersGroup().eachLayer(function(e){e.data.vital&&e.classes.add("_vital")})}var c=e("./lib/groups")(t),u={enableMultiLabels:function(e){r=e!==!1},enableVitalLabels:function(e){s=e!==!1},setMultiLabelsCallbacks:function(e,t){i=t,a=e}};return t.isClient&&"undefined"!=typeof window&&(window.TestHandles=window.TestHandles||{},o.extend(window.TestHandles,u)),{readyToAddMultiLabels:n,readyToAddViatalLabels:l}}},{"./lib/groups":264,lodash:"lodash"}],261:[function(e,t,n){function a(e,t){return e.data=r.extend({},t),e}function i(e){return e.data.isInbuild?e.data.total:e.data.ids&&e.data.ids.length||0}function o(e,t,n){var a={marker:e,data:e.data,ids:e.data.ids,type:t,count:i(e)},o=function(e){return r.extend(e,a,{pixel:e.containerPoint,lonlat:s(e.latlng)})};return r.each(n,function(t,n){"function"==typeof t&&e.on(n,function(e){t(o(e),e.target)})}),e}var r=e("lodash"),s=req("lib/geo/lonlat");t.exports=function(t,n,i,s,l,c){var u=t.config,d=u["markers.zIndex"],h=r.partial(e("./icons"),t,n),p=h(l.markerTypes),f={pane:i,icon:p,draggable:!1,showAlways:!!l.recovery,zIndexOffset:d.mushroomsMarker,riseOnHover:!0,riseOffset:2e3},m=L.markerEx(l.position,f);return m=a(m,l),o(m,s,c)}},{"./icons":265,lodash:"lodash"}],262:[function(e,t,n){var a=e("lodash"),i=e("../../../markersHash");t.exports=function(e){var t={};return a.each(e,function(e){if(e.lat&&e.lon){var n=i.getCoordsKey(e);t[n]?(t[n].ids.push(e.id),t[n].markerTypes.push(e.markerType)):t[n]=e}}),t}},{"../../../markersHash":276,lodash:"lodash"}],263:[function(e,t,n){t.exports=function(e,t){function n(e){return e&&e._icon?$(e._icon).find(".map__markerTailClose"):null}function a(e,t){var n=i(t);return o(n,e.originalEvent)&&o(n,{target:e.originalEvent.relatedTarget})}function i(e){return e&&e._icon?$(e._icon).find(".map__markerTail"):null}function o(e,t){t=t||{};var n=$(t.target);return e.length&&n.length?n.is(e)||!!e.find(n).length:!1}function r(e){var a="marker click",r=i(e.marker);if(o(r,e.originalEvent)){var s=n(e.marker);a=o(s,e.originalEvent)?"markerAdClose click":"markerAd click"}setTimeout(function(){t.emit(a,e)},0)}function s(e){var n=i(e.marker);o(n,e.originalEvent)?a(e,e.marker)||t.emit("markerAdHovered",e):t.emit("markerHovered",e)}function l(e){var n=i(e.marker);o(n,e.originalEvent)?a(e,e.marker)||t.emit("markerAdUnhovered",e):t.emit("markerUnhovered",e)}var c={markerClick:r,markerMouseover:s,markerMouseout:l};return c}},{}],264:[function(e,t,n){"use strict";var a,i,o,r,s,l,c,u=e("lodash"),d={};t.exports=function(e,t){var n=(e.config["markers.levels.debug"],e.config["markers.levels.common"]),h=e.config["markers.levels.commonNew"],p={getMarkersGroup:function(e){return d[e||c||"firms"]},setCurrentMarkersGroup:function(e){c=e},createLayerGroups:function(c,p){function f(e){var t=e&&e.data&&e.data.markerType;switch(t){case"recovery":return 0;case"commercial":return 1;default:return 2}}function m(e,t){function n(e){return e&&e.data&&e.data.markerType}function a(e){return"recovery"==n(e)}function i(e){return"commercial"==n(e)}if(a(e.marker)||a(t.marker))return!0;var o,r=Math.abs(e.markerX-t.markerX),s=Math.abs(e.markerY-t.markerY);if(p){var l=0;3!=e.levelIndex&&!i(e.marker)&&i(t.marker)&&(l=t.margin),o=Math.max(e.safeZone,l);var c=Math.max(o,e.markerWidth/2+t.markerWidth/2),u=Math.max(o,e.markerHeight/2+t.markerHeight/2);return r>c||s>u}o=Math.max(e.safeZone,t.margin);var d=o+e.markerWidth/2+t.markerWidth/2,h=o+e.markerHeight/2+t.markerHeight/2;return r>d||s>h}function g(e){function t(e){var t=u.parseInt(e);return u.isNaN(t)?e:t}return u.map(e,function(e){return u.mapValues(e,function(e){return u.isString(e)?t(e):u.isArray(e)?u.map(e,t):e})})}function _(e,t){var n=t;return 9>t&&(n=9),t>18&&(n=18),g(h[n])}var v=p?_:u.cloneDeep(n);return a=new L.MarkerGeneralizeGroup({showCoverageOnHover:!1,maxClusterRadius:40,iconCreateFunction:function(t){return new L.DivIcon({html:e.renderPartial("cluster",t.getChildCount())})},pane:c,checkMarkersIntersection:m,checkMarkerMinimumLevel:f,viewportHideOffset:0,maxZoom:t.getZoomlevels("max"),minZoom:t.getZoomlevels("min"),levels:v}),i=new L.MarkerGeneralizeGroup({showCoverageOnHover:!1,maxClusterRadius:40,iconCreateFunction:function(t){return new L.DivIcon({html:e.renderPartial("cluster",t.getChildCount())})},checkMarkersIntersection:m,checkMarkerMinimumLevel:f,pane:c,viewportHideOffset:.5,maxZoom:t.getZoomlevels("max"),minZoom:t.getZoomlevels("min"),levels:v}),o=new L.MarkerGeneralizeGroup({showCoverageOnHover:!1,maxClusterRadius:40,checkMarkersIntersection:m,checkMarkerMinimumLevel:f,pane:c,viewportHideOffset:.5,maxZoom:t.getZoomlevels("max"),minZoom:t.getZoomlevels("min"),levels:v}),s=new L.MarkerGeneralizeGroup({showCoverageOnHover:!1,maxClusterRadius:40,checkMarkersIntersection:m,checkMarkerMinimumLevel:f,pane:c,viewportHideOffset:.5,maxZoom:t.getZoomlevels("max"),minZoom:t.getZoomlevels("min"),levels:v}),r=new L.MarkerGeneralizeGroup({showCoverageOnHover:!1,iconCreateFunction:function(t){return new L.DivIcon({html:e.renderPartial("cluster",t.getChildCount())})},checkMarkersIntersection:m,checkMarkerMinimumLevel:f,pane:c,viewportHideOffset:.5,maxZoom:t.getZoomlevels("max"),minZoom:t.getZoomlevels("min"),levels:v}),l=new L.MarkerGeneralizeGroup({showCoverageOnHover:!1,maxClusterRadius:40,iconCreateFunction:function(t){return new L.DivIcon({html:e.renderPartial("cluster",t.getChildCount())})},pane:c,checkMarkersIntersection:m,checkMarkerMinimumLevel:f,viewportHideOffset:0,maxZoom:t.getZoomlevels("max"),minZoom:t.getZoomlevels("min"),levels:v}),d={firms:a,geo:i,apartment:o,transport:r,floorList:s,booklet:l}}};return p}},{lodash:"lodash"}],265:[function(e,t,n){function a(e){var t=["recovery","commercial"],n=o.find(t,function(t){return o.contains(e,t)});return n||e[0]}function i(e){var t="map__marker";switch(e){case"recovery":case"recovery_onlyAdsMushrooms":t+=" _recovery";break;case"commercial":case"commercial_onlyAdsMushrooms":t+=" _commercial"}return e.startsWith("booklet-")&&(t="map__markerBookletPoi _"+e.split("-")[1]),t}var o=e("lodash"),r={};t.exports=function(e,t,n){if(n instanceof Array&&(n=a(o.compact(n))),n=n||"default",n+=e.mod().onlyAdsMushrooms?"_onlyAdsMushrooms":"",!r[n]){var s=i(n);r[n]=L.divIcon({iconSize:null,className:s})}return r[n]}},{lodash:"lodash"}],266:[function(e,t,n){function a(e){var t;return e.recovery?t="recovery":e.from_booklet?t="booklet-"+e.rubric_code:e.is_advertising&&(t="commercial"),t}function i(e){return e.branch_id||e.id}function o(e){return e.lat&&e.lon?(e.markerType=a(e),e.id=i(e),e.position=L.latLng(e),e.ids=[e.id],e.markerTypes=[e.markerType],e):null}var r=e("lodash");n.search=function(e){return e=r.map(e,o),r.compact(e)},n.fromFull=function(e){var t=e;t.branch_id=e.id,t.building_id=e.address&&e.address.building_id,t.is_advertising=!r.isEmpty(e.ads);var n=e.point||e.focusPoint||r.pick(e,["lat","lon"]);return t.lat=n.lat,t.lon=n.lon,o(t)},n.fromSeeAlso=function(e){var t={};return t.branch_id=e.id,t.building_id=e.building_id,t.is_advertising=!0,t.lat=e.lat,t.lon=e.lon,t.name_ex=e.name_ex,t.recovery=e.recovery,o(t)}},{lodash:"lodash"}],267:[function(e,t,n){function a(e){e=e||{},this._id=e.id,this._coords=e.coords,this._coordsHash=o.getCoordsKey(e.coords),this._marker=e.marker,this._type=e.type}var i=e("lodash"),o=e("../../markersHash");a.prototype.getCoords=function(){return this._coords},a.prototype.getId=function(){return this._id},a.prototype.getMarker=function(){return this._marker},a.prototype.needDelete=function(){return i.contains(["substituted","created"],this._type)},a.prototype.needShowUnderlying=function(e){return this._marker.options.classForZoom?this.needDelete()&&"HIDDEN"!=this._marker.options.classForZoom[e]:this.needDelete()},t.exports=a},{"../../markersHash":276,lodash:"lodash"}],268:[function(e,t,n){var a=e("lodash"),i=e("../../markersHash"),o=req("helpers/outputify"),r=req("helpers/firm"),s=e("../../styles/marker"),l=req("helpers/string");t.exports=function(t,n,c,u,d){function h(e,t,n){if(n=n||{},c.contains(e.getLatLng())){var a=$(e._icon);if(a.length&&a.mod()&&!a.mod().hidden){t=t||_(e);var i=a.offset(),o=g(t);return c.isPixelAreaVisible({left:i.left+o.left,top:i.top+o.top,height:o.height,width:o.width},{bound:n.bound||c.getPixelBound(),widgetSizes:n.widgetSizes||c.getWidgetSizes()})}}return!1}function p(e,t,n){function i(e){var t=$(e._icon).offset(),a=g(n||e),i=40,o=t.left+a.left,r=t.top+a.top;return{left:o,top:r,right:o+a.width+i,bottom:r+a.height+i}}function o(e,t){var n=!1;return e=a.sortBy(e),t=a.sortBy(t),e[0]<=t[0]&&e[1]>=t[0]&&(n=!0),e[0]<=t[1]&&e[1]>=t[1]&&(n=!0),n}if(!e._icon||!t._icon)return!1;var r=i(e),s=i(t),l=o([r.left,r.right],[s.left,s.right])&&o([r.top,r.bottom],[s.top,s.bottom]);return l}function f(e,n){if(e._icon&&n&&n.ads){e.data=e.data||{},e.data.ad={title:n.name_ex.primary,description:n.ads.text,address:n.address,reg_bc_url:n.reg_bc_url};var a=t.renderPartial("super",v(e.data)),i=$(e._icon);return i.html(a),t.onNextFrame(function(){e.classes.add("_super"),s.setZIndex(e,b)}),!0}return!1}function m(e,n){if(e&&e.data&&(e.data.ad=null),e.classes){e.classes.remove("_super").remove("_unfold"),s.setZIndex(e,b);var a=$(e._icon);n?a.empty():t.setTimeout(function(){a.empty()},y["markers.adTimeouts"].hide)}}function g(e){var t={"default":{width:10,height:10,left:-5,top:-5},commercialMushroom:{width:28,height:42,left:-14,top:-38},"super":{width:194,height:42,left:-14,top:-38}},n=e;return a.isString(e)||(n=_(e)),n=n||"default",t[n]||t["default"]}function _(e){var t="";if(!e.classes)return t;var n=["_super",["_commercial","_mushroom"],"_mushroom"];return t=a.find(n,function(t){return a.isArray(t)?a.all(t,function(t){return e.classes.contains(t)}):e.classes.contains(t)}),a.isArray(t)&&(t=a.first(t)+a.map(a.drop(t,1),l.capitalize).join("")),t||"default"}function v(e){return{adTitle:e.ad&&e.ad.title,adDescription:e.ad.description,regularTitle:o.getName(e.name_ex),attributes:e&&a.pluck(a.flatten(e.stop_factors,!0),"name"),address:r.getFirmAddress(e.ad,{useDrilldownInAddress:u.getSettings("firms.useDrilldownInAddress"),format:u.getFormats("address.order"),infoStrategy:u.getSettings("geoobjects.infoStrategy"),regionName:d.getRegion().name})}}var y=t.config,b=y["markers.zIndex"],k=e("./lib/groups")(t),w={filterMarkerGroup:function(e,t){var n=[];return a.isString(e)&&(e=k.getMarkersGroup(e)),e.eachLayer(function(e){t(e)&&n.push(e)}),n},getVisibleMarkers:function(e,t){var n=[],i={bound:c.getPixelBound(),widgetSizes:c.getWidgetSizes()};return a.isArray(e)?n=a.filter(e,function(e){return h(e,t,i)}):(a.isString(e)&&(e=k.getMarkersGroup(e)),e.eachLayer(function(e){h(e,t,i)&&n.push(e)})),n},superizeMarker:function(e,t){var n=i.getById(e);return f(n,t)},unsuperizeMarker:m,unfoldMarkerAd:function(e){e.classes.add("_unfold")},foldMarkerAd:function(e){e.classes.remove("_unfold")},markersCanOverlap:p};return w},t.exports._args=["slot","leafletImplProxy","$viewport","$i18n","$regionManager"]},{"../../markersHash":276,"../../styles/marker":277,"./lib/groups":264,lodash:"lodash"}],269:[function(e,t,n){var a=e("lodash"),i=req("helpers/parking");t.exports=function(e,t,n,o,r,s){function l(){this.data={},this.currentPointKey=""}function c(e){var n=(e.layer||{}).options,a=(n||{}).parking;a&&t.emit("clickParking",e,a)}function u(e){var n=(e.layer||{}).options,a=(n||{}).parking;a&&t.emit("somethingHovered",{type:"parking",pixel:t.getPixelOfEvent(e),data:{name:a.name,type:a.type,description:d(a)}})}function d(e){var t=[i.getAccessText(e,s),e.access_comment,(i.getCapacity(e,s)||"").replace(" ","&nbsp;")];return a.compact(t).join(", ")}function h(e){var n=(e.layer||{}).options,a=(n||{}).parking;a&&t.emit("somethingUnhovered")}function p(e){return e=e||E.getZoom(),e>=18}function f(e){if(!e)return null;var t={37001:"",37002:"_zone_blue",37003:"_zone_orange",37004:"_zone_green",37005:"_zone_blue-orange",37006:"_zone_blue-green"},n=e.substr(0,5);return t[n]}function m(e){var t,n,i=["map__markerParking"];p()?(i.push("_big"),t=[20,20],n=[10,10]):(i.push("_small"),t=[16,16],n=[8,8]);var r=o.getRegion()||{};i.push("_city_"+r.code);var s=e&&e.geometry&&e.geometry.style;return i.push(f(s)),L.divIcon({iconSize:t,iconAnchor:n,className:a.compact(i).join(" ")})}function g(){var e=E.getPanes()||{};e.parkings||E.createPane("parkings")}function _(e){return j[e]||(j[e]=new l),j[e]}function v(e){return M[e]||(M[e]=L.featureGroup().addTo(E)),M[e]}function y(){return!!a.find(A,function(e){return e})}function b(e,t){e&&t&&(A[e]=t)}function k(e,t){I(e),g();var n;P.differentIcon||(n=m());var i=_(e);a.each(i.get(),function(e){var a=e&&e.geometry&&e.geometry.centroid;if(a){P.differentIcon&&(n=m(e)),e.point=r.parsePoint(a);var i={icon:n,clickable:!0,pane:"parkings",parking:e};L.markerEx(e.point,i).addTo(t)}}),t.on("click",c),t.on("mouseover",u),t.on("mouseout",h)}function w(t,a){var i=o.getRegion()||{},r={type:"parking",zoom_level:i.zoom_level&&i.zoom_level.max},s=_(t);n.geo.byRadius(s.getCurrentPointKey(),P.radius,r,function(n,i){var o=!!(!n&&i&&i.data&&i.total>0);e.notify("parkingsResult",t,o),o&&a(i.data)})}function x(e){return e=e||E.getZoom(),y()&&e>=E.getMaxZoom()-2}function C(e){var t=_(e),n=v(e);t.has()?k(e,n):w(e,function(a){t.set(a),k(e,n)})}function I(e){var t=v(e);t&&(t.clearLayers(),t.off("click",c),t.off("mouseover",u),t.off("mouseout",h))}function T(e){I(e);var t=_(e);t.clear(),t=null,j[e]=null}function S(e){return x(e)!=x()||p(e)!=p()}var E;l.prototype={clear:function(){this.data={},this.currentPointKey=""},set:function(e){this.data[this.currentPointKey]=e},setCurrentPointKey:function(e){this.currentPointKey=e?e.lon+","+e.lat:""},get:function(){return this.data[this.currentPointKey]||{}},getCurrentPointKey:function(){return this.currentPointKey},has:function(){return!!this.data[this.currentPointKey]}};var P=(s.getSettings&&s.getSettings()||{}).parkingsMode||{},j={},M={},A={};t.on("mapInited",function(){E=t.map});var D={toggleShowParkingsMode:function(e,t,n){if(!P.disable){b(t,e);var a=_(t);a.setCurrentPointKey(n),e?x()&&C(t):T(t)}},redrawParking:function(e){P.disable||S(e)&&(x()?a.each(a.keys(j),C):a.each(a.keys(j),I))}};return D},t.exports._args=["slot","leafletImplProxy","$dgApi","$regionManager","$wkt","$i18n"]},{lodash:"lodash"}],270:[function(e,t,n){var a=e("lodash"),i=e("../../closestBounds"),o=req("lib/geo/lonlat");t.exports=function(e,t,n,r,s,l,c){function u(e){return e?e.clearLayers():e=L.layerGroup().addTo(_),e}function d(e,n){var a=e._icon,i=$(a).offset(),r=b["map.routeSearch.iconAnchor"],s=b["map.routeSearch.offsetMarker"],l=i.top+s+r,c=_.containerPointToLatLng(L.point(i.left+r,l));e.setLatLng(c),n&&t.emit("routeSearchKeypointDragEnd",o(c),n)}function h(e,t){if(p(e)){var n=t._icon,a=$(n).find(".map__markerRouteSearch");a.mod({active:"dragstart"==e.type})}}function p(e){var t=e.originalEvent?e.originalEvent:e;return!t.button}function f(){v&&(_.removeLayer(v),v=null)}function m(){u(y),w=[]}function g(e,t){return void 0===t?v.getLegById(e):v.getStepById(e,t)}var _,v,y,b=e.config,k=b["markers.zIndex"],w=[];t.on("mapInited",function(){_=t.map});var x={segmentFocus:function(e,n){if(v&&v.legs){var a=g(e,n);if(a)t.customFitBounds(a.getBounds(),{},!0);else if(e){var i=v&&v._data&&v._data.waypoints&&v._data.waypoints[e],o=i&&i.geometry;o&&t.setViewportCenter(o,_.getZoom())}}},segmentHover:function(e){if(v&&v.legs){var t=g(e.segmentId,e.stepId);t&&t.makeTransparent(e.isHover)}},drawRsMarkers:function(a,o){function r(e){e.on({dragend:function(t){d(e,a),h(t,e)},dragstart:function(t){h(t,e)}})}if(!v){var s=t.getLatLng(o);if(y=t.getLayerGroup(y),w[a])return void w[a].setLatLng(s);var c=b["map.routeSearch.iconAnchor"],u={icon:L.divIcon({iconSize:[20,20],iconAnchor:[c,c],html:e.renderPartial("routeSearch",{color:"#2864c8",typeTo:"to"==a})}),pane:_.createPane("routeSearch"),zIndexOffset:k.routeSearchKeypoint,clickable:!0,draggable:!0};w[a]=L.markerEx(s,u).addTo(y),r(w[a]);var p=e.registry.get("isInit"),f=n.getLastEntry(),m=l.contains(s),g=n.lastActionHasMapContext();if(!m&&!p&&!g&&"typeIn"!=f){var x=i(_.getCenter(),l.contains);x.add(s),t.customFitBounds(x.getBounds())}}},clearRsMarkers:m,clearRsMarkersByType:function(e){w[e]&&(y.removeLayer(w[e]),delete w[e])},drawRouteSearch:function(i,l){function u(){a.each(["legs","waypoints","metroEntrances"],function(e){v[e].on(y[e])})}function p(){a.each(["waypoints","metroEntrances","legs"],function(e){v[e].off(y[e])})}function g(n,i){var o={};if(n.pixel=t.getPixelOfEvent(n),"leg"==i){var s=l.movements?l.movements:l.items[0].maneuvers;a.extend(o,s[n.layer.data.legIndx]);var c=a.get(o,"waypoints.start.name"),u=a.get(o,"waypoints.end.name");"auto"!=l.searchType&&c&&u&&c&&u&&(o.name=c+" — "+u);var d=e.config.maxWaypointsCount,h=l.waypoints.length<d;!h&&d?o.description=r._nt("Нельзя добавить больше %1 точки","Нельзя добавить больше %1 точек","Нельзя добавить больше %1 точек",d):"auto"!=l.searchType&&"pedestrian"!=l.searchType||(o.description=r._t("Переместите, чтобы изменить маршрут"))}else if("waypoint"==i){var p=n.layer.data.indx;o=l.waypoints[p],0==p?o.direction="from":p==l.waypoints.length-1&&(o.direction="to"),o.name=o.name||o.platform_name,o.isKeypoint?o.description=r._t("Переместите, чтобы изменить маршрут"):"auto"!=l.searchType&&"pedestrian"!=l.searchType||(o.description=r._t("Кликните дважды, чтобы удалить точку"))}else"ppnotEntrance"==i&&(o=n.layer.data);return o.searchType=l.searchType,n.type=i,n.data=o,n}var y={waypoints:{mouseover:function(e){t.emit("waypointMouseover",g(e,"waypoint"))},mouseout:function(e){t.emit("waypointMouseout",e)}},legs:{mouseover:function(e){t.emit("legMouseover",g(e,"leg"))},mouseout:function(e){t.emit("legMouseout",e)}},metroEntrances:{mouseover:function(e){t.emit("waypointMouseover",g(e,"ppnotEntrance"))},mouseout:function(e){t.emit("waypointMouseout",e)}}};if(f(),m(),DG.routeLayer){if(l.city=c.getRegion().code,v=DG.routeLayer(l,{useGradient:!s.queryString.has("printmode"),waypointsCount:e.config.maxWaypointsCount}),v.addTo(_),u(),v.waypoints.eachLayer(function(e){e.on("dragstart",function(){p()}),e.on("dragend",function(){u()})}),v.on("dragstartMarker",function(){p()}),v.on("change",function(e){var n=a.indexOf(e.waypoints,e.lastChange),i=!1;0==n?i="from":n==e.waypoints.length-1&&(i="to"),i?t.emit("routeSearchKeypointDragEnd",o(e.lastChange),i):(e.waypoints=a.map(e.waypoints,function(e){return o(e)}),t.emit("legChanged",e.waypoints,n))}),v.on("dragstartKeypoint",function(e){h(e.event,e.marker)}),v.on("dragendKeypoint",function(e){d(e.marker),h(e.event,e.marker)}),i.printRoute){var b={lon:i.to.lon,lat:i.to.lat};t.setViewportCenter(b,16)}e.registry.get("isInit")||n.lastActionHasMapContext()||i.printRoute||t.customFitBounds(v.getBounds())}},clearRouteSearch:f,focusWholeRoute:function(){v&&t.customFitBounds(v.getBounds(),{zoomOut:1})}};return x},t.exports._args=["slot","leafletImplProxy","$routeSearchStore","$i18n","$appState","$viewport","$regionManager"]},{"../../closestBounds":249,lodash:"lodash"}],271:[function(e,t,n){t.exports=function(e,t){var n,a;t.on("mapInited",function(){n=t.map});var i={addRulerPoint:function(e){a.addLatLng(e)},setRulerPoints:function(e){a.setLatLngs(e)},getRulerInfo:function(){return{distance:a.getTotalDistance(),pointsCount:a.getLatLngs().length}},onRulerChange:function(e){a.on("changed",e)},rulerChangeOff:function(){a.off("changed")},hasRuler:function(){return!!a},activateRuler:function(e){t.on("map click",e),a=DG.ruler().addTo(n)},removeRuler:function(e){n.removeLayer(a),t.off("map click",e),a=null}};return i}},{}],272:[function(e,t,n){t.exports=function(e,t){var n,a;t.on("mapInited",function(){a=t.map});var i={toggleTrafficLayer:function(e){DG.Traffic&&(e&&!n?(n=new DG.Traffic({disableLabel:!0,maxZoom:a.getMaxZoom(),zIndex:20}),n._metaLayer.on("mouseover",function(e){t.emit("somethingHovered",{type:"traffic",pixel:a.latLngToContainerPoint(e.latlng),data:e.meta})}),n._metaLayer.on("mouseout",function(){t.emit("somethingUnhovered")}),a.addLayer(n)):e&&n?n.redraw():(a.removeLayer(n),n=null))}};return i}},{}],273:[function(e,t,n){var a=e("lodash"),i=e("../../mapUtils"),o=req("helpers/camel");t.exports=function(e,t,n,r){function s(e){return e?e.clearLayers():e=L.layerGroup().addTo(w),e}function l(o,r){function l(t){var o,r,s,l,d,h,p=t==S.indexActiveDirection,m=i.getRouteColor(S,p),g=S.directions[t].platforms,_=S.directions[t].geometry.selection;A.geometry.style.color=m,M.geometry.color=m,s=n.parseObject(_),d=new L[s.type](s.geometry,M.background),l=new L[s.type](s.geometry,M.geometry),h=L.featureGroup([d,l]),c.push(d),o=i.getTerminalStops([g]),r=a.difference(g,o),p?(f(r,A.background.style,A.background.radius),h.addTo(x),f(r,A.geometry.style,A.geometry.radius)):h.addTo(x).on("click",function(){e.notify("changeIndexActiveDirection",t),b(t)}),u(o,S.subtype,m)}var c=[];x=s(x),C=s(C),I=s(I),a.each(S.directions,function(e,t){t!=S.indexActiveDirection&&l(t)}),l(S.indexActiveDirection),!e.registry.get("isInit")&&o&&t.customFitBounds(L.featureGroup(x.getLayers()).getBounds()),r&&y(!0,r,!0)}function c(e,t,i,o){var r=o||C;a.each(e,function(e){var a=n.parsePoint(e.geometry.centroid,"leaflet");L.circleMarker(a,t).setRadius(i).addTo(r).on("click",function(t){g(t,e)}).on("mouseover",function(t){_(t,e)})})}function u(e,t,n){a.each(e,function(e){d(e,t,n)})}function d(a,i,s){I=t.getLayerGroup(I);var l=r.getRegion(),c=L.divIcon({iconSize:[0,0],className:"map__marker",html:e.renderPartial("platform",{type:o(i),city:l.code,color:s})}),u=h(a);L.markerEx(n.parsePoint(a.geometry.centroid,"leaflet"),{icon:c,zIndexOffset:u?D.activeTerminalPlatform:D.terminalPlatform}).addTo(I).on("click",function(e){g(e,a)}).on("mouseover",function(e){_(e,a)})}function h(e){return S?a.some(S.directions[S.indexActiveDirection].platforms,{id:e.id}):!1}function p(){return i.checkShowPlatform(w.getZoom(),S.subtype)}function f(e,t,n){T&&c(e,t,n)}function m(){s(C),T=!1}function g(e,n){t.emit("clickStationPlatform",e,S.subtype,n)}function _(t,n){e.notify("hoverStopAtMap",n.id,!0),y(!0,n)}function v(t,a){var o=n.parsePoint(t.geometry.centroid,"leaflet"),r=h(t),s=i.getRouteColor(S,r),l=L.divIcon({iconSize:[0,0],html:e.renderPartial("tooltip",{color:s,name:t.name})}),c=L.markerEx(o,{icon:l,clickable:!0,zIndexOffset:D.tooltip}).addTo(a).on("click",function(e){g(e,t)});return{latLng:o,marker:c}}function y(t,n,a){if(E=s(E),t){if(P=s(P),!S)return;var i=v(n,a?P:E);a||i.marker.on("mouseout",function(){e.notify("hoverStopAtMap",n.id,!1),y(!1)})}}function b(e){S.indexActiveDirection=e,l()}function k(){S=null,s(x),s(C),s(I),s(E),s(P)}var w,x,C,I,T,S,E,P,j=e.config,M=j["transport.route.geometryStyles"],A=j["transport.platform.geometryStyles"],D=j["markers.zIndex"];t.on("mapInited",function(){w=t.map});var R={routeShow:function(e,t){k(),S=e,T=p(),l(!0,t)},clearRoutes:k,redrawRoutes:function(){S&&T!=p()&&(T=p(),T?l():m())},togglePlatformMarker:y,changeActiveDirection:b};return R},t.exports._args=["slot","leafletImplProxy","$wkt","$regionManager"]},{"../../mapUtils":281,lodash:"lodash"}],274:[function(e,t,n){function a(e){return l.map(e,function(e){return r.parsePoint(e.geometry.centroid).toLatLng()})}function i(e){return!e.length||e[0]instanceof L.LatLng||(e=l.map(e,function(e){return L.latLng(e)})),L.latLngBounds(e)}function o(e){return s(i(e).getCenter())}var r=req("lib/wkt")(),s=req("lib/geo/lonlat"),l=e("lodash");n.getCentroid=function(e){switch(e.type){case"geolocation":case"branch":return s(e.point);case"station":var t=a(e.platforms);return o(t);case"route":return null;default:return e.geometry?r.parsePoint(e.geometry.centroid):null}},n.getBounds=function(e){switch(e.type){case"station_platform":return i([r.parsePoint(e.geometry.centroid).toLatLng()]);case"station":return i(a(e.platforms));default:return null}},n.pointsToBound=i,n.getPointsCentroid=o},{lodash:"lodash"}],275:[function(e,t,n){var a=e("lodash");t.exports=function(e,t){var n={getPixelOfEvent:function(e){return e.containerPoint||this.map.mouseEventToContainerPoint(e.originalEvent)},getLatLng:a.bind(t.getLatLng,t),getLayerGroup:a.bind(t.getLayerGroup,t),prepareFeatureGroup:a.bind(t.prepareFeatureGroup,t),customFitBounds:a.bind(t.customFitBounds,t),setViewportCenter:a.bind(t.setViewportCenter,t),getZoomlevels:a.bind(t.getZoomlevels,t),getBoundFromPolygon:a.bind(t.getBoundFromPolygon,t),moveTo:a.bind(t.moveTo,t),
emit:a.bind(t.emit,t),off:a.bind(t.off,t),on:a.bind(t.on,t)};return t.on("mapInited",function(e){n.map=e}),n}},{lodash:"lodash"}],276:[function(e,t,n){function a(e){var t=function(e){return(+e).toFixed(4)};return""+t(e.lon||e.lng)+t(e.lat)}function i(e){var t=s.getStaticId(e.branch_id||e.id),n=l.map(e.ids,s.getStaticId);return n.push(t),l.compact(n)}function o(e,t){e=s.getStaticId(e);var n=a(t);return e+":"+n}var r=req("lib/hashmultivalue"),s=req("helpers/firm"),l=e("lodash"),c={},u={},d=new r,h={getById:function(e){return e=s.getStaticId(e),c[e]||!1},getByIdAndCoords:function(e,t){var n=o(e,t);return c[n]||!1},getLastMarkerByCoords:function(e){var t=a(e);return d.getLast(t)},registerNew:function(e,t){e=e||{};var n=i(e.data),r=a(e.data);l.each(n,function(n){t&&(u[n]=t),c[n]=e,c[o(n,e.data)]=e}),l.isEmpty(n)&&(c[o(null,e.data)]=e),d.add(r,e)},deleteById:function(e){if(e=s.getStaticId(e),d.rejectSome(function(t){return t==c[e]}),l.each(c,function(t,n){t==c[e]&&delete c[n]}),delete c[e],e in u){var t=u[e];return delete u[e],t}return null},clear:function(){c={},d.clear(),u={}},getCoordsKey:a};t.exports=h},{lodash:"lodash"}],277:[function(e,t,n){n.hideMarker=function(e){e&&e.classes.add("_viewportHidden")},n.showMarker=function(e){e&&e.classes.remove("_viewportHidden")},n.isBookletMarker=function(e){return e.data&&e.data.markerType&&e.data.markerType.startsWith("booklet-")},n.setZIndex=function(e,t){if(e&&e.setZIndexOffset){var n=t.mushroomsMarker;e.classes.contains("_czar")?n=t.royalizeMarker:e.classes.contains("_highlighted")?n=t.activeMushroomsMarker:e.classes.contains("_super")&&(n=t.superMarker),e.setZIndexOffset(n)}},n.isRecoveryMarker=function(e){return e&&e.data&&"recovery"==e.data.markerType},n.highlighted=function(e){return e&&e.classes.add("_highlighted"),e},n.unhighlighted=function(e){return e&&e.classes.remove("_highlighted"),e},n.makeMarkerRecovery=function(e){e&&e.classes.add("_recovery")},n.remakeMarkerRecovery=function(e){e&&e.classes.remove("_recovery")}},{}],278:[function(e,t,n){(function(n){var a=e("lodash"),i=req("helpers/camel"),o=req("lib/geo/lonlat"),r=e("./leaflet/geoHelpers");t.exports=function(t,s,l,c,u,d,h){function p(e,t){var n=function(a){t(a),E.off(e,n)};return E._events[e].unshift({fn:n,ctx:this}),n}function f(e,t){if(!W){t=t||"default";var n;W=t,S.emit("ourChangeIsRegistered");var a=function(){clearTimeout(n);var a=function(n){W=null,n.isOur=!0,n.callerType=t,n.historyAction=e};p("moveend",a)};E.once("movestart",a),n=setTimeout(function(){W=null,E.off("movestart",a)},0)}}function m(e,t,n){t=t||{},e=e.getBounds?e.getBounds():L.latLngBounds(e),q||a.extend(t,{paddingTopLeft:D.getLeftDimension(),paddingBottomRight:D.getRightDimension()});var i={tl:L.point(t.paddingTopLeft||[0,0]),br:L.point(t.paddingBottomRight||[0,0])},o=E.getBoundsZoom(e,!1,i.tl.add(i.br));o=Math.max(o,G),n||f("replace");var r=g(e,o,i),s=S.getBoundFromPolygon(l.getRegion().bounds);s.contains(r)?E.setView(r,o,t):E.setZoom(G),q&&setTimeout(function(){var e=E.getZoom(),n=e-(t.zoomOut||0);t.animate=!1,E.setZoom(n,t)},0)}function g(e,t,n){var a=E.project(e.getSouthWest(),t),i=E.project(e.getNorthEast(),t),o=n.br.subtract(n.tl).divideBy(2);return E.unproject(a.add(i).divideBy(2).add(o),t)}function _(e){var t=D.getLatLngCenter(),n=E.getZoom();E.setZoomAround(t,n+e)}function v(e){var t={fillColor:"#ff9387",color:"#ff9387",clickable:!1};return 11>=e?a.extend(t,{fillOpacity:.18,weight:1}):12==e?a.extend(t,{fillOpacity:.12,weight:1}):13==e?a.extend(t,{fillOpacity:.08,weight:2}):a.extend(t,{fillOpacity:0,weight:3})}function y(e,n,a){var o=l.getRegion(),r=L.divIcon({iconSize:[0,0],className:"map__marker",html:t.renderPartial("platform2",{type:i(n),city:o.code})});L.markerEx(s.parsePoint(e,"leaflet"),{icon:r}).addTo(a)}function b(e,t,n){var a=s.parseObject(e);if("Point"==a.type)return null;var i=v(t),o=new L[a.type](a.geometry,i);return L.featureGroup([o]).addTo(n),o}function k(e){if(S.hideEntrances(),e.links){var t=a.reduce(e.links.entrances,function(e,t){return t.geometry&&e.push(t.geometry.vectors),e},[]);P=new DG.Entrance({vectors:a.flatten(t,!0)}),P.addTo(E).show(!1)}}function w(){var e=l.getRegion().bounds;if(e){var n=S.getBoundFromPolygon(l.getRegion().bounds),a=!n.contains(E.getBounds());t.notify("osmTilesVisible",a)}}function x(t){var n=D.getLatLngCenter(),i=e("./closestBounds");return i=i(n,D.contains),a.each(t,function(e){e.recovery||i.add(e.position)}),i}function C(e,n,a){if(a&&d.get("globalMap")&&d.get("flying")){var i={x:1,y:1},o=L.Util.template(E.baseLayer._url,L.extend(i,{s:E.baseLayer._getSubdomain(i),z:1}));u.speed(o,function(a){var i=a>t.config["speed.minForFly"];i&&(S.emit("startFly"),E.once("moveend",function(){S.emit("endFly")})),E.flyTo(e,n,{animate:i})})}else E.flyTo(e,n,{animate:!1})}function I(e){for(;N.length;){var t=N.shift();t(e)}F=!0}function T(){E.on("mousemove",function(e){S.emit("mousemove",e)}),E.on("mousedown",function(e){S.emit("mousedown",e)}),E.on("click",function(e){var n=o(e.latlng);S.emit("map click",n),t.notify("imitationInputBlur")}).on("dblclick",function(e){S.emit("map unclick",e)}),E.on("movestart",function(){O=!0}),E.on("moveend",function(e){if(O=!1,!z){for(;R.length;){var t=R.shift();t()}var n=E.getCenter(),a=[n.lng,n.lat];S.emit("positionChanged",e,a),H.dequeue(),w()}});var e=E.baseLayer;e&&(e.on("load",function(e){I(e)}),e.on("loading",function(){F=!1}));var n;E.on("zoomstart",function(e){S.emit("zoomstart",e),n=e.target._zoom}),E.on("zoomend",function(e){S.emit("zoomChange",n,e.target._zoom);var t=v(e.target._zoom);a.each([M],function(e){e&&e.setStyle(t)})}),E.on("dragGeneral",function(){S.emit("dragGeneral")}),E.on("locationerror",function(e){S.emit("locationerror",e)}),E.poi._metaLayer.on("mouseover",function(e){E.poi._setCursor("pointer");var t=a.get(e,"meta.linked",{}),n=a.get(e,"meta.hint")||t.name;"building"==t.type&&d.get("floors")&&h.hasBuilding(t.id)&&(n=c._t("Этажи")+", "+n),S.emit("somethingHovered",{type:"poi",pixel:E.latLngToContainerPoint(e.latlng),ids:[t.id],data:{name:n,type:t.type,subtype:t.subtype}})}),E.poi._metaLayer.on("mouseout",function(){E.poi._setCursor("auto"),S.emit("somethingUnhovered")}),E.poi._metaLayer.on("click",function(e){var t=o([e.latlng.lng,e.latlng.lat]);S.emit("dgPoiClick",e,t)}),S.on("enterGlobal",function(){t.notify("enterGlobal")})}var S,E,P,j,M,A,D=t.requireComponent("viewport"),R=[],N=[],B=null,F=!1,O=!1,z=!1,q=!1,$=req("lib/eventify"),U=c.getSettings().zoom.focusZoom,H=req("lib/resolvingQueue")("movement"),G=t.config["globalMap.globalZoom"]+1,W=null;return S={init:function(e,i,o){A=i;var r=(o.getZoom()||{}).zoomlevel,s=o.getCenter(),c=d.get("globalMap")&&o.inGlobal(),u=s||c&&t.config["globalMap.default.mapcenter"],h=r||c&&t.config["globalMap.default.zoom"],p=A.getMapInitView(h,u);o.changeZoom(p.zoom),o.actualize("zoom");var f={zoomControl:!1,poi:{disableLabel:!0},zoomAnimationThreshold:7,center:S.getLatLng(p.center),zoom:p.zoom,offsetInPixels:p.offsetInPixels,minZoom:p.minZoom,cityBounds:p.cityBounds,worldCopyJump:!0};DG.projectsList=[l.getRegion()],DG.extend(DG.config,{detectRetina:d.get("detectRetina")}),E=DG.map(e,f);var m=l.getRegion().code;E._metroEntranceThresholdZoom=t.config["map.metroEntranceThresholdZoom"][m]||16,TEST||l.loadRegions(function(){DG.projectsList=a.values(l.getRegions()),E.projectDetector._loadProjectList()}),!a.isUndefined(n.window),1,"undefined"!=typeof window&&(window.TestHandles=window.TestHandles||{},window.TestHandles.map=E,window.TestHandles.viewport=D),T(),S.emit("mapInited",E),w()},setDefaultRegionViewById:function(e){var t=A.getMapInitView(null,null,e);S.setDefaultRegionView(t.zoom,t.center)},setDefaultRegionView:function(e,t){var n=A.getMapInitView(),a=e||n.zoom,i=t||n.center;f("replace"),C(i,a,!0)},moveTo:C,setCityLimits:function(){var e=A.getMapInitView();S.setCityBounds(e.cityBounds),S.limitMinZoomLevel(e.minZoom)},isTooltipEnabled:function(){return E.isTooltipEnabled()},isGeocoderEnabled:function(){return E.isGeocoderEnabled()},bound:function(){S.emit("mapBounded",E)},fitObjects:function(e,n){if(!t.registry.get("isInit")){var a=x(e);"zoomout"==n&&a&&a.canApply()?m(a.getBounds()):"focus"==n&&e&&S.focusPoints(e)}},showCircle:function(e){var n=L.divIcon({iconSize:[0,0],className:"map__circle"}),a=L.marker({lon:e.lon,lat:e.lat},{icon:n}).addTo(E);t.setTimeout(function(){E.removeLayer(a)},t.config["animations.mapCircleShow"])},onMoveEnd:function(e){t.setTimeout(function(){O?R.push(e):e()},0)},onTileLoad:function(e){t.setTimeout(function(){N.push(e),F&&I()},0)},getCenterOffset:function(e){return E._getCenterOffset(e)._floor().round()},calculateViewportCenter:function(e,t){e=L.latLng(e);var n=D.getPixelBound().topLeft,a=E.project(e,t).subtract([n[0]/2,0]);return E.unproject(a,t)},setViewportCenter:function(e,t){var n=S.calculateViewportCenter(e,t);E.setView(n,t)},showEntrance:function(e,n){n=n||{};var i=E.getZoom(),o=e.links&&e.links.entrances,r=o&&o.length,l=!("onEntranceFocus"!=n.movingType||!r),c=l?t.config["map.entranceMinZoom"]:U,u=[],d=function(){k(e)};if("notMove"==n.movingType)return d();var h=function(e){var t=s.parseObject(e);return t.geometry};if(l&&o[0].geometry.points.length)a.each(o,function(e){u=a(e.geometry.points).map(h).compact().flatten(!0).value()});else{if(!e.point)return t.sendError('Model does not contain "point" property',{id:e.id,type:e.type}),null;u.push(S.getLatLng(e.point))}return S.onMoveEnd(function(){S.onTileLoad(d)}),S.focusPoints(u,!1,{zoom:a.max([i,c])}),null},hideEntrances:function(){P&&P instanceof DG.Entrance&&(P.removeFrom(E),P=null)},focusPoint:function(e,n){if(!t.registry.get("isInit")){n=n||{};var a,i=L.latLng(e),o=!n.checkBounds||n.checkBounds&&!D.contains(i);i&&(q?(a=n.zoom||E.getZoom(),U>a&&(a=U),S.setView(i,a)):o&&(f(n.historyAction?n.historyAction:"replace"),n.notChangeZoom||(a=n.zoom||(E.getZoom()<U?U:E.getZoom())),S.setViewportCenter(i,a?a:E.getZoom())))}},setCenter:function(e){E.panTo(S.getLatLng(e))},getCenter:function(){return E.getCenter()},setView:function(e,t,n){E.setView(S.getLatLng(e),t,n)},convertPixelToLonLat:function(e){return o(E.containerPointToLatLng(e))},getZoom:function(){return E.getZoom()},setZoom:function(e,t){E.setZoom(e,t)},zoomIn:function(){_(1)},zoomOut:function(){_(-1)},getBounds:function(){return E.getBounds()},getBoundFromPolygon:function(e){var t=s.parsePolygon(e,"leaflet"),n=a.pluck(t[0],"lat"),i=a.pluck(t[0],"lon"),o=new L.LatLng(a.max(n),a.max(i)),r=new L.LatLng(a.min(n),a.min(i));return new L.LatLngBounds(o,r)},getOffsetLngFromPixels:function(e,t){var n=L.CRS.EPSG3857.pointToLatLng(L.point(0,0),t),a=L.CRS.EPSG3857.pointToLatLng(L.point(e,0),t);return(n.lng-a.lng)/2},getViewportCenter:function(e,t){return o(e).add(t,0)},setCityBounds:function(e){E.options.cityBounds=e},latLngInBounds:function(e,t,n){var a,i=!1;return e.lon?a=L.latLng(parseFloat(e.lat),parseFloat(e.lon)-n):(a=S.getLatLng(e),a.lng-=n),t.contains(a)&&(i=!0),i},highlightPlatformCard:function(e,t){j=S.getLayerGroup(j),y(e,t,j)},highlightGeoCard:function(e,t){B=S.prepareLayerGroup(B),M=b(e,t,B)},clearGeomsCard:function(){S.prepareLayerGroup(B),S.prepareLayerGroup(j)},focusPoints:function(e,n,i){if(t.registry.get("isInit"))return!1;var o=!n||n&&!D.contains(e),s=i||{},l=s.zoom||U,c=s.historyAction||"replace";if(a.isArray(e)){if(!e.length)return!1;e=r.pointsToBound(e)}return q?m(e,{zoomOut:0}):o&&(E.getBoundsZoom(e)>l?(f(c),S.setViewportCenter(e.getCenter(),l)):m(e)),null},focusGeo:function(e){var n=e.geometry;if(!t.registry.get("isInit")&&n){var a,i=s.parseObject(n.selection),o=s.parsePoint(n.centroid).toLatLng();a="Point"==i.type?new L.Polyline([i.geometry]):new L[i.type](i.geometry);var r=a.getBounds();E.getBoundsZoom(r)>U?(f("replace"),S.setViewportCenter(o,U)):m(r)}},focusModel:function(e,n){if(!t.registry.get("isInit")){n=n||{};var i=r.getBounds(e);n.extraObjects&&a.each(n.extraObjects,function(e){var t=r.getCentroid(e).toLatLng();i.extend(t)}),S.focusPoints(i,!1,{historyAction:n.historyAction})}},registerOurChange:f,limitMinZoomLevel:function(e){E.options.minZoom=e,E.baseLayer.options.minZoom=e,E._updateZoomLevels()},getLimitZoomLevels:function(){return E?{maxZoom:E.getMaxZoom(),minZoom:E.getMinZoom()}:null},distance:function(e,t){var n=S.getLatLng(e),a=S.getLatLng(t);return n.distanceTo(a)},getPointsCentroid:r.getPointsCentroid,markerIsNeeded:function(){return!0},setViewportLimits:a.noop,addMovement2Queue:a.bind(H.enqueue,H),disableMapCentering:function(e){z=e},enablePrintMode:function(e){e=void 0===e?!0:e,q=e},customFitBounds:m,getLatLng:function(e){return a.isArray(e)?new L.LatLng(e[1],e[0]):L.latLng(e)},getLayerGroup:function(e){return e||L.layerGroup().addTo(E)},getZoomlevels:function(e){var t=a.extend({},l.getRegion().zoom_level);return t.min=0,t.max=t.max||19,t[e]},prepareFeatureGroup:function(e){return e?e.clearLayers():e=L.featureGroup().addTo(E),e},prepareLayerGroup:function(e){return e?e.clearLayers():e=L.layerGroup().addTo(E),e},enableScrollWheelZoom:function(){E.scrollWheelZoom.enable()},disableScrollWheelZoom:function(){E.scrollWheelZoom.disable()}},S=$(S,20),S=a.extend(S,e("./leaflet/features")(t,S))},t.exports._args=["slot","$wkt","$regionManager","$i18n","$checkNetwork","$featureSwitcher","$floorsManager"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./closestBounds":249,"./leaflet/features":258,"./leaflet/geoHelpers":274,lodash:"lodash"}],279:[function(e,t,n){var a=e("lodash");t.exports=function(t,n){var i=t.invoke(e("./leafletImpl"),[t,n]),o=a.reduce(i,function(e,t,n){return"function"==typeof t&&(e[n]=a.noop),e},{});return o}},{"./leafletImpl":278,lodash:"lodash"}],280:[function(e,t,n){t.exports=function(e,t,n){function a(t){var n=i(),a=n.maxZoom,o=n.minZoom;return t=Math.min(t,a),t=Math.max(t,o),t==o?e.notify("minZoomLevelReached"):t==a?e.notify("maxZoomLevelReached"):e.notify("intermediateZoomLevelReached"),t}function i(){var a=t.getLimitZoomLevels();if(!a){var i=v.getRegion().zoom_level.max,o=v.getRegion().zoom_level.min;return n.get("globalMap")&&(o=e.config["globalMap.default.zoom"]),"undefined"!=typeof L&&L.Browser.retina&&i--,{maxZoom:i,minZoom:o}}return a}function o(e,t,n){var a=l(n);return a.zoom=r(a.zoom,e),a.center=s(a.center,a.zoom,t),a}function r(e,t){var n=t||e;return a(n)}function s(a,i,o){if(o)if(n.get("globalMap"))a=o;else{var r=m();r.contains(L.latLng(o))&&(a=o)}else{var s=0;(e.ua().isDesktop||e.ua().isTablet)&&(s=f(i)),a=t.getViewportCenter(a,s).toFixed()}return a}function l(e){return{center:p(e),zoom:u(e),cityBounds:m(e),minZoom:h(e),maxZoom:d(e),offsetInPixels:c()}}function c(){return g.getDefaultDashboardDimensions()/2}function u(e){var t=v.getRegion(e);return t.default_pos.zoom}function d(e){var t=v.getRegion(e);return t.zoom_level.max}function h(e){if(n.get("globalMap"))return 2;var t=v.getRegion(e);return t.zoom_level.min}function p(e){var t=v.getRegion(e);return _(t.default_pos.lon,t.default_pos.lat)}function f(e){var n=e||u();return t.getOffsetLngFromPixels(g.getDefaultDashboardDimensions(),n)}function m(e){if(n.get("globalMap"))return DG.latLngBounds(DG.latLng(85,1800),DG.latLng(-85,-1800));var a=v.getRegion(e);return t.getBoundFromPolygon(a.bounds)}var g=e.requireComponent("viewport"),_=req("lib/geo/lonlat"),v=e.requireComponent("regionManager"),y={checkLevel:a,getMapInitView:o};return y},t.exports._args=["slot","map","$featureSwitcher"]},{}],281:[function(e,t,n){var a=e("lodash");n.checkShowPlatform=function(t,n){var a=e("slot/config")["transport.route.platformZoomVisibility"];switch(n){case"metro":return t>=a.metro;default:return t>=a["default"]}},n.getRouteColor=function(e,t){var n,a=req("helpers/route"),i="#959faa";return t?n=a.getRouteColor(e):i},n.getTerminalStops=function(e){var t=[];return a.each(e,function(e){t.push(e[0]),e.length>1&&t.push(e[e.length-1])}),t}},{lodash:"lodash","slot/config":"slot/config"}],282:[function(e,t,n){var a=e("lodash"),i=e("./leaflet/geoHelpers");t.exports=function(e){function t(e,t){return"branch"==e.type&&!e.geo_type&&"geo"==t&&e.address?e.address.building_id:e.id}function n(t,n,o){var r;return r="firms"==n||"floorList"==n||"booklet"==n?o?a.map(t.markers,function(e){return e.isInbuild=o,e.total=t.request_count,e}):t.markers:e.isGrym?t.data:a.compact(a.map(t.data,function(e){var t=i.getCentroid(e);return t?a.extend(t,e):null})),r||[]}var o={getDrawId:t,getMarkersObjects:n,getMode:function(e){var t={branch:"firms",geo:"geo",apartment:"apartment",station:"transport",station_entrance:"transport",station_platform:"transport"},n=t[e.type]||"geo";return e.type&&a.contains(["metro"],e.type)&&(n="transport"),n}};return o}},{"./leaflet/geoHelpers":274,lodash:"lodash"}],283:[function(e,t,n){"use strict";var a=req("helpers/string"),i=e("lodash");t.exports=function(e,t){function n(e){e&&(u.setFromTo(e),d.push())}function o(e,t,i,o){if(!i){var s=r();if(s.from){if(s.to)return;i="to"}else i="from"}return t?(u.setFromTo(i,{text:a.replaceAll("&nbsp;"," ",t),lon:e.lon,lat:e.lat,context:o}),void d.push()):void n(i)}function r(){return{from:d.get("from"),to:d.get("to")}}function s(e,t){return i.chain(e).pick(e,function(e){return t>=e}).keys().value().join(",")}var l=e.requireComponent("dgApi"),c=e.requireComponent("requestGroups"),u=e.requireComponent("routeSearchStore"),d=e.requireComponent("appState"),h=e.requireComponent("i18n"),p={setRsKeypointByGeoPoint:function(t,n,a,i){var r=e.config["geocoder.objects2ZoomRestrictions"],u={zoom_level:n||17,type:s(r,n)},d=l.geo.inPoint(t.join(","),u,function(e,n,r){var s=h._pt("Точка на географической карте","Неизвестная точка");if(200!=r.code)return void o(t,s,a,i);var l=n;if("poi"==l.type){var c=l.reference||{};o(t,c.name,a,i)}else o(t,l.name||l.subtype_name||s,a,i)});c.add(d,"geocoding",!0)},setRsKeypointByState:function(e){function n(n){n in e&&(e[n]&&e[n].lon&&e[n].lat&&d.get("routeTab")?t.drawRsMarkers(n,e[n]):t.clearRsMarkersByType(n))}n("from"),n("to")}};return p}},{lodash:"lodash"}],284:[function(e,t,n){var a=e("lodash");t.exports=function(e,t,n,i){function o(n){t(function(){e.addRulerPoint(n)})}function r(){e.onRulerChange(function(e){0==e.latlngs.length&&i.trackEvent("google",["Ruler","Delete_all"]),n.setRulerPoints(e.latlngs),n.push()})}function s(t){t&&(e.activateRuler(o),t.points&&e.setRulerPoints(t.points),r())}function l(t){if(t)if(e.hasRuler()){e.rulerChangeOff();var n=t.points;if(n){var l=a.isArray(n)?n:[n];e.setRulerPoints(l)}else e.setRulerPoints([]);r()}else s(t);else{var c=e.getRulerInfo();i.trackEvent("google",["Ruler","Point_amount",c.pointsCount]),i.trackEvent("google",["Ruler","Distance_amount",Math.ceil(c.distance)]),e.removeRuler(o)}}return{refreshRuler:l,initRuler:s}}},{lodash:"lodash"}],285:[function(e,t,n){var a=e("lodash"),i=req("helpers/discount"),o=req("helpers/firm"),r=req("helpers/string");t.exports=function(e,t,n,s){var l=135,c=s.getRegion(),u=a.map(t,function(e){var t=i.formatDiscountPeriod(e,c,n),o=e.title,s=e.theme,u=["birthday","gift","lunchtime","students","takeaway","wedding"],d=a.include(u,s)?s:"gift",h=r.cutTags(e.description,"<ul><li>"),p=r.cutTags(e.description),f=r.decorateUrls(h);return{title:o,period:t,percent:e.percent,rubric:s,description:f,showMore:p.length>l,icon:"mediaActions_"+d}}),d=1===u.length,h=o.getSeoUrl(e,c,"discount");return{items:u,isSingleItem:d,seoUrl:h}},t.exports._args=["firmModel","discounts","$i18n","$regionManager"]},{lodash:"lodash"}],286:[function(e,t,n){var a=e("lodash"),i=req("helpers/linkURL");t.exports=function(e,t,n){function o(){var n=a.get(e,"links.nearest_stations");return a.isEmpty(n)?null:d.getAllStations(n,{showDistance:t.getSettings("showNearStationDistance"),point:e.point,numberFormat:t.getFormats("number"),cityCode:c.code})}function r(e){var t={};t.parkings=!!e.point;var n=a.findWhere(e.external_content,{type:"photo_album",subtype:"facilities"});return t.facilities=n&&n.main_photo_url,t}function s(){var n=u.getFirmAddress(e,{useDrilldownInAddress:t.getSettings("firms.useDrilldownInAddress"),format:t.getFormats("address.order"),infoStrategy:t.getSettings("geoobjects.infoStrategy"),regionName:c.name});return{fullAddress:n,notClickable:n==c.name}}var l,c=n.getRegion(),u=req("helpers/firm"),d=req("helpers/stationsNear"),h=a.find(e.external_content,{type:"photo_album",subtype:"view"});e.point&&(l=i("geoAddress",{city:c.code,id:e.address&&e.address.building_id,lon:e.point.lon,lat:e.point.lat}));var p=r(e),f=4,m=3,g=o(),_=a.filter(g,{type:"metro"}),v=a.reject(g,{type:"metro"}),y=[];a.each(_,function(e){return y.length==m?!1:(a.find(y,{color:e.color})||y.push(e),null)});var b=f-y.length,k=y.concat(v.slice(0,b));return{address:s(),descriptionAddress:a.get(e,"name_ex.description"),buildingName:a.get(e,"address.building_name"),description:e.address_comment,seoUrl:l,panoramaUrl:h&&h.main_photo_url,stations:k,geo:p}},t.exports._args=["model","$i18n","$regionManager"]},{lodash:"lodash"}],287:[function(e,t,n){var a=e("lodash"),i=req("helpers/firm");t.exports=function(e){return{text:i.getArticle(e.model.ads),articleWarning:a.get(e,"model.ads.article_warning")}}},{lodash:"lodash"}],288:[function(e,t,n){var a=e("lodash"),i=req("helpers/firm"),o=req("helpers/linkURL"),r=req("helpers/mediaCard");t.exports=function(e,t,n){function s(e){var t=a.find(e,i.isPaymentGroup);return t&&(e=a.without(e,t),e.push(t)),e}function l(e){return a.isObject(e)?{name:e.name,attributes:r.processAttributes(e.attributes,n,t)}:null}var c=a(s(e.attribute_groups)).map(l).compact().value(),u=t.getRegion(),d=a.each(e.rubrics,function(e){e.url=o("rubric",{city:u.code,query:e.name,id:e.id})});return{groups:c,rubrics:d}},t.exports._args=["model","$regionManager","$i18n"]},{lodash:"lodash"}],289:[function(e,t,n){"use strict";t.exports=["5348553839136541","5348552840744206","5348552839983118","5348553838735194","5348552838774513","70000001017434696","5348552838774387","70000001017363508","5348553838786640","70000001017246070","5348552838774686","5348552838480158","5348552839974158","70000001018465171","5348552840574912","5348552838479938","5348552838774257","5348552838774196","70000001020002909","70000001020393339","5348553838943118","5348553838621395","5348552838479884","5348552838495416","5348552841830789","5348552839487467","70000001018615730","70000001021590800","5348552838774616","70000001019093676","5348552838774447","70000001021241402","5348552838479942","70000001019386665","70000001019138309","5348552841424239","70000001021309749","70000001020871596","70000001020014576","70000001022501610"]},{}],290:[function(e,t,n){arguments[4][209][0].apply(n,arguments)},{dup:209,lodash:"lodash"}],291:[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e){function t(e){var t="";return a.each(e,function(e){t+='<div class="mediaCard__column">'+e.html+"</div>"}),t}function n(t,n,i,o,r,s){a.each(n,function(t,n){var l;l=n>=r?o.indexOf(a.min(o,"height")):n;var c;c=s?a.result(a.findWhere(i,{blockType:t.module.type}),"blockHeight"):i[n].blockHeight,o[l].html+=e.renderPartial("block",t),o[l].height+=c})}function i(t,n){var i=a.pluck(t,"clientHeight");a.each(n,function(n){if(!n.rendered){var o=e.renderPartial("block",n),r=i.indexOf(a.min(i));$(t).eq(r).append(o),n.module.unbindEvents(),n.module.bindEvents(),n.rendered=!0,i=a.pluck(t,"clientHeight")}})}function o(i,o,r){var s=[];e.element("tab").filter('[data-id="'+i.id+'"]').find(e.element("block")).each(function(e,t){s.push({blockHeight:t.clientHeight,blockType:t.dataset.type}),r&&$(t).removeClass("_appear")});var l=a.times(o,function(){return{html:"",height:0}});n(i,i.blocks,s,l,o,r),a.each(i.blocks,function(e){e.rendered=!1});var c=t(l);$(e.element("tab").filter('[data-id="'+i.id+'"]').find(e.element("columns"))).html(c),i.bindEventsToNewBlocks(),r&&e.element("tab").filter('[data-id="'+i.id+'"]').find(e.element("block")).each(function(e,t){$(t).removeClass("_appear")})}return{doMasonry:o,spreadNewBlocks:i}}},{lodash:"lodash"}],292:[function(e,t,n){"use strict";t.exports=function(e){function t(t,n){t.css("height","auto");var a=e.element("content").outerHeight(),o=e.element("navigation").outerHeight(),l=e.element("footer").outerHeight();r=t.outerHeight(!0),i=a+o+p+r+l,s=e.block().outerHeight()-i+h,n!=h&&s>n&&(t.css("height",e.block().height()),f=!0)}function n(){f&&(u=e.element("wrapper").outerHeight()-i,o=e.element("wrapper").offset().top,d=o,l=h-o,c=l)}function a(t){var n=e.element("wrapper").offset().top;if(f&&o&&n>(o&&d)){var a=e.element("tabs").find('[data-id="'+t.id+'"]');d=n,a.height()<=r&&(f=!1);var i=u/c,s=l-(h-n);l=h-n,a.css("height",a.height()-s*i)}}var i,o,r,s,l,c,u,d,h=16,p=16,f=!1;return{changeHeight:t,doCalcForCutting:n,cut:a}}},{}],293:[function(e,t,n){"use strict";var a=e("lodash"),i=e("bluebird"),o=req("helpers/booklet"),r=req("helpers/firm");t.exports=function(e,t,n,s,l){function c(t){if(!m.canShowReviews||!m.isMediaReviewsFeature)return void t();var n=!!a.get(m,"reviews.general_review_count"),i=void 0;if(!n){var o=a.find(m.reviews.items,"tag","flamp");i=!!a.get(o,"is_reviewable")}return n||i?void e.init("mediaReview",{firm:m,review:a.sample(m.reviewsItems),last:!0,tab:"reviews"},t):void t()}function u(e){return new i(function(t){e(function(e,n){return t(e?null:n)})})}function d(t){var n=!(!m.external_content||!a.find(m.external_content,{type:"discount"}));return n?void e.init("mediaActions",m,t):void t()}function h(e){var t={"1-2":624,"1-3":946,"2-2":311,"2-3":472,"4-3":235},n=t[e.length+"-"+g]||_,i=n+"x156";return a.each(e,function(e){e.preview=a.chain(e.previews).pick(i).values()}),e}function p(){var t=a.reject(m.photos,"isSauna"),n=e.ua().isPhone?1:2*g,i=a.take(t,n),o=i.length;return o>1&&o%2&&(o-=1),i=a.take(i,o),{items:h(i,g),count:a.size(m.photos),previewPhotosNumber:o}}function f(){var t=e.element("recoveryAds").length;if(t){var n=e.element("recoveryAds").offset().top,a=e.element("scroller").height(),i=130;a>n+i&&v()}}var m=void 0,g=void 0,_=156,v=a.once(function(){if(m&&m.see_also){var t=$(".mediaRecoveryAds__article",e.element("recoveryAds")),n=a.pluck(m.see_also,"id"),i=0;a.each(t,function(e){$(e).seeable(.7)&&i++}),i&&e.broadcast("mediaRecoveryAds:registerImpressions",a.take(n,i))}});return{init:function(t,s){var h=this;if(m=t.model,g=t.columnsLength,m.photos&&(this.photos=p(t.columnsLength)),t.isDefault&&(this.recoveryAds=m.see_also),"saunas"==m.bookletType){var f=a.result(m,"bookletData.modules.rooms");1===f.length&&(h.addBlock(e.init("mediaRoomCard",{model:f[0],type:"about"})),a.set(h,"additionalInfo.copyright",{source:o.formatSourceData(m,l)}))}m.contact_groups&&m.contact_groups.length&&h.addBlock(e.init("mediaContacts",{model:m})),m.schedule?h.addBlock(e.init("mediaSchedule",m.schedule)):e.isClient&&n.trackEvent("google",["Media_Card_event","Time_Null"]),h.addBlock(e.init("mediaAddress",m)),a.set(h,"additionalInfo.fas",r.getAdsWarning(m,"text")),i.map([c,d],u).then(function(e){a.each(a.compact(e),function(e){h.addBlock(e)})})["finally"](function(){h.addBlock(e.init("mediaAttributes",m)),s()})},rerenderPhotosPreviews:function(){this.photos=p(),e.element("photosWrapper").html(e.renderPartial("photosPreviews",this))},clientInit:function(){this.rerenderPhotosPreviews()},resize:function(e){g=e,this.rerenderPhotosPreviews()},onScroll:function(){f()}}},t.exports._args=["slot","$reviewsApi","$analytics","$regionManager","$i18n"]},{bluebird:384,lodash:"lodash"}],294:[function(e,t,n){"use strict";t.exports=function(e){return{init:function(t,n){var a=this;a.addBlock(e.init("mediaAdvantages",t)),n()}}}},{}],295:[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e,t,n,i){return{init:function(e,t){var o=this,r=e.model;i.getDiscounts({branchId:r.id,sortBy:"order"}).then(function(e){var i=[],s=[],l=a.map(e,function(e){return e.comment_fas&&i.push(e.comment_fas),e.source&&s.push({text:e.source,url:e.source}),{type:"mediaDiscount",data:{discount:e,branchId:r.id}}});i.length&&a.set(o,"additionalInfo.copyright",{comments:a.uniq(i)}),s.length&&a.set(o,"additionalInfo.copyright",{source:{text:n._t("Данные взяты с"),links:s}}),o.addBlocks(l,t)})["catch"](function(e){t(e)})}}},t.exports._args=["slot","$bookletApi","$i18n","$discountsApi"]},{lodash:"lodash"}],296:[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e,t,n){function i(e){var t=e.blocks[0].module.block();return t[0].offsetTop}function o(){var e=c.offsetHeight,t=c.scrollTop;return e-l+t}function r(){e.broadcast("patchwork:loadVisible",o())}function s(t){var n=e.init("photosUploader",{id:t,album:"common",type:"firm"});return a.extend(n,{hidden:!0})}var l,c,u,d,h=req("helpers/firm");return{init:function(t,n){var i=this,o=t.model;if(o.photosUploaderAvailable){var r=h.getStaticId(o.id);i.addBlock(s(r))}i.addBlock(e.init("patchwork",a.extend({id:o.id,columnCount:t.columnsLength,noMega:!0,noCompact:!e.ua().isPhone},o.photoModel))),n()},updateDimensions:function(t){e.broadcast("patchwork:updateSize",null,null,t),r()},resize:function(t){c&&(e.broadcast("patchwork:updateSize",t,!0),l=i(this),r())},onScroll:function(t,a){if(t&&(r(),n.get("photosUploader"))){var i=e.element("photosUploader"),o=!1;if(i.mod().hidden?(u||(u=a.contentTopHeight-a.trackOffset+a.contentTopOffset),o=t.scrollTop>u):(d||(d=t.scrollTop+i.offset().top+i.outerHeight()),o=t.scrollTop-i.offset().top>2*d/3),e.element("photosUploaderControl").mod({active:o}),o){var s=t.scrollHeight-t.clientHeight,l=t.scrollTop>=s-e.element("footer").outerHeight();e.element("photosUploaderControl").mod({moved:l})}}},onRender:function(){e.broadcast("patchwork:updateSize"),c=e.element("scroller")[0],l=i(this),r(),t.trackEvent("google",["Photos","Show_Gallery"])}}},t.exports._args=["slot","$analytics","$featureSwitcher"]},{lodash:"lodash"}],297:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/request");t.exports=function(e,t,n,o){var r,s;return{init:function(l,c){var u=this;s=l.model,r=t.reviews(s.id,s),r.setIsOrgReviews(a.get(l,"model.allFilials",a.get(s,"reviews.is_org_reviews",!1))),r.loadData().then(function(t){return!t||a.isEmpty(t.reviews)?void i.emitError(404,"empty api response",c):(n.get("reviews.forAllFilials")&&t.firm.branch_count>1&&(u.reviewsToggle={items:[{title:o._t("Филиал"),"for":"filial",active:!r.getIsOrgReviews()},{title:o._t("Все филиалы"),"for":"filials",active:r.getIsOrgReviews()}]}),e.notify("reviewsCountChanged",a.get(t,"firm.reviews_count",0)),void u.addReviewBlocks(t.reviews,c))},function(e){c(e)})},needToLoadMore:function(){return r.hasNextPage()},loadMore:function(e){var t=this;r.loadNextPage().then(function(n){t.addReviewBlocks(n,e)},function(t){e(t)})},addReviewBlocks:function(e,t){var n=0,i=a.map(e,function(e){return e.isReviewTab=!0,e.noIndex="flamp"==e.source&&++n>10,{type:"mediaReview",data:{firm:s,review:e}}});this.addBlocks(i,t)}}},t.exports._args=["slot","$models","$featureSwitcher","$i18n"]},{lodash:"lodash"}],298:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/booklet"),o=e("../linkHelper");t.exports=function(e,t,n){var r;return{init:function(s,l){if(this.flexible=!0,a.set(this,"additionalInfo.copyright",{source:i.formatSourceData(s.model,n)}),s.isDefault){var c=s.model;this.recoveryAds=c.see_also,this.showFooter=!0,this.privateOfficeLink=o.getPrivateOfficeLink(c,t,n),this.advLink=o.getAdvLink(c,t,n)}r=a.result(s.model,"bookletData.modules.rooms",[]),a.each(r,function(t){this.addBlock(e.init("mediaRoomCard",{model:t}))},this),l()}}},t.exports._args=["slot","$regionManager","$i18n"]},{"../linkHelper":290,lodash:"lodash"}],299:[function(e,t,n){"use strict";var a=e("lodash"),i=e("moment"),o=req("helpers/contact");t.exports=function(e,t,n){function r(e,n){return l?void n():void t.providers.searchTariffs({providerId:e},function(e,t){return e||a.isEmpty(t)?void n():(l=t,void n())})}function s(e){var t={id:a.get(e,"model.org.id"),name:a.get(e,"model.name_ex.primary")};return a.isEmpty(a.get(e,"model.contact_groups"))&&(t.phone=o.firstByType("phone",e.model.contact_groups)),t}var l;return{init:function(t,i){if(a.get(t,"model.contact_groups")){var r=o.firstByType("website",t.model.contact_groups);
if(r){var s=a.clone(r);s.text=n._gg("Информация предоставлена компанией. Официальный сайт ")+r.text,a.set(this,"additionalInfo.copyright",{source:s})}}a.get(t,"model.tariffId")?this.initRequestForm(t,i):this.initTariffsTable(t,function(){var n=a.get(t,"model.connectionAddress");n&&e.broadcast("checkConnectionWidget:setAddress",n.address,n.buildingId),i()})},initTariffsTable:function(e,t){var n=this;r(a.get(e,"model.org.id"),function(a){return a?void t(a):(n.setCopyrightDate(),void n.addBlocks([{type:"checkConnectionWidget",data:{provider:s(e),type:"mediaCard"}},{type:"providerTariffs",data:{firm:e.model,columnsLength:e.columnsLength,tariffs:l}}],t))})},initRequestForm:function(t,n){var i=this;r(a.get(t,"model.org.id"),function(o){if(o)return void n(o);i.setCopyrightDate();var r=parseInt(a.get(t,"model.tariffId"),10),c=a.find(l,{id:r}),u=a.get(t,"model.checkConnectionData",{}),d=s(t),h=a({tariff:c,provider:d,template:"mediaCard"}).extend(a.pick(u,"address","geoid")).value();e.init("providerRequestForm",h,function(e,t){i.addBlock(t),n()})})},setCopyrightDate:function(){a.has(this,"additionalInfo.copyright")&&!a.isEmpty(l)&&a.set(this,"additionalInfo.copyright.source.date",i(l[0].modification_time).format("L"))}}},t.exports._args=["slot","$bookletApi","$i18n"]},{lodash:"lodash",moment:"moment"}],300:[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(t,n,i){function o(e){return e in u}function r(){return n.defaultTab||"about"}var s,l=e("./masonryHelper.js")(t),c={},u={about:function(){return e("./tabs/about")},photos:function(){return e("./tabs/photos")},reviews:function(){return e("./tabs/reviews")},discount:function(){return e("./tabs/discounts")},rooms:function(){return e("./tabs/rooms")},advantages:function(){return e("./tabs/advantages")},tariffs:function(){return e("./tabs/tariffs")}},d=100,h=function(e){if(this.id=e,this.blocks=[],!o(e))throw Error('No tab "'+e+'"');var n=u[e]();a.extend(this,t.invoke(n,[t]))};h.prototype.addBlock=function(e){var t={module:e};return this.blocks.push(t),t},h.prototype.addBlocks=function(e,n){var i=this;t.initModules(e,function(e,t){return e?void n(e):(a.each(t,function(e){i.addBlock(e)}),void(n&&n()))})},h.prototype.render=function(e,n){a.each(this.blocks,function(t){t.animate=!!e});var i=t.renderPartial("tab",this),o=t.element("tab").filter('[data-id="'+this.id+'"]');o.length&&o.remove(),t.element("tabs").append(i),t.ua().isPhone||this.doMasonry(n),this.bindEventsToNewBlocks(),a.isFunction(this.onRender)&&this.onRender()},h.prototype.bindEventsToNewBlocks=function(){a(this.blocks).reject("rendered").each(function(e){e.module.unbindEvents(),e.module.bindEvents(),e.rendered=!0}).value()},h.prototype.doMasonry=function(e,t){a.includes(["rooms","discount"],this.id)||l.doMasonry(this,e,t)},h.prototype.renderNewBlocks=function(){var e=this,n=t.element("tabs").find('[data-id="'+this.id+'"]'),i=n.find(t.element("column")),o=function(e){return e.offsetTop+e.offsetHeight};a.each(this.blocks,function(a){if(!a.rendered){var r,s=t.renderPartial("block",a);if(1==i.length)r=i[0];else if(e.column&&i.length>1)r=i[e.column-1];else{var l=n.find(".mediaCard__block:last-child");r=l.length&&o(l[1])<o(l[0])?i[1]:i[0]}$(r).append(s),a.module.bindEvents(),a.rendered=!0}})},h.prototype.hideAllBlocks=function(e){var n=t.element('tab[data-id="'+this.id+'"]'),a=n.find(".mediaCard__block");a.mod({disappear:!0}),t.setTimeout(function(){a.mod({disappear:!1,hidden:!0}),e&&e()},d)},h.prototype.showBlock=function(e){var n=t.element('tab[data-id="'+this.id+'"]'),a=n.find(".mediaCard__block:nth-child("+(e+1)+")");a.mod({hidden:!1,disappear:!1,appear:!0}),t.setTimeout(function(){return a.mod({appear:!1})},d)};var p={changeActiveTab:function(e){s=e},switchTab:function(e,t){this.changeActiveTab(e),i.changeMediaCardTab(e),i.push(t,!1)},getTab:function(e){return c[e]},getActiveTab:function(){return c[s]},initTab:function(e,t,i){if(a.isUndefined(e)&&(e=r()),c[e])return void i();var o;try{o=new h(e)}catch(s){return void i(s)}this.changeActiveTab(e),c[e]=o;var l={model:n,isDefault:e==r(),columnsLength:t};o.init(l,i)},reinitTab:function(e,t,n){delete c[e],this.initTab(e,t,n)},renderTab:function(e,t){c[e].render(!0,t)},renderNewBlocks:function(e){var n,i=c[e],o=t.element("tabs").find('[data-id="'+i.id+'"]');t.ua().isPhone?(n=o.find(t.element("columns")),a.each(i.blocks,function(e){if(!e.rendered){var a=t.renderPartial("block",e);$(n).append(a),e.module.bindEvents(),e.rendered=!0}})):(n=o.find(t.element("column")),l.spreadNewBlocks(n,i.blocks))},hideAllVisibleBlocks:function(){t.element("activeTab").find(".mediaCard__block").mod({disappear:!0})},showTab:function(e){t.element("block").mod({disappear:!1,appear:!0}),t.element("tab").mod({active:!1}),t.element("tabs").find('[data-id="'+e+'"]').mod({active:!0}),t.setTimeout(function(){t.element("block").mod({appear:!1})},d)},getDefaultTab:r,setModel:function(e){n=e}};return p},t.exports._args=["slot","model","$appState"]},{"./masonryHelper.js":291,"./tabs/about":293,"./tabs/advantages":294,"./tabs/discounts":295,"./tabs/photos":296,"./tabs/reviews":297,"./tabs/rooms":298,"./tabs/tariffs":299,lodash:"lodash"}],301:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/linkURL"),o=e("./linkHelper");t.exports=function(e,t,n,r){var s=r.getRegion();return a.find(e.menuItems,{id:e.activeTab.id}).active=!0,a.each(e.menuItems,function(t){t.url=i("firm",{city:s.code,id:e.id,tab:t.id})}),a.each(e.activeTab.blocks,function(e){e.rendered=!0}),e.privateOfficeLink=o.getPrivateOfficeLink(e,r,n),e.advLink=o.getAdvLink(e,r,n),{firmId:e.id,prev:{prevTitle:e.prevTitle,prevUrl:e.prevUrl},next:{nextTitle:e.nextTitle,nextUrl:e.nextUrl},menuItems:e.menuItems,activeTab:e.activeTab,adsText:a.get(e,"ads.text"),privateOfficeLink:e.privateOfficeLink,advLink:e.advLink,photosUploaderAvailable:e.photosUploaderAvailable}},t.exports._args=["model","slot","$i18n","$regionManager"]},{"./linkHelper":290,lodash:"lodash"}],302:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/firm"),o=req("helpers/linkURL"),r=req("helpers/contact"),s=req("helpers/analytics"),l=req("helpers/linkURL");t.exports=function(e,t,n,c){function u(e){return r.firstByType("phone",e)}function d(e){if(a.isEmpty(e.address))return null;var t=i.getFirmAddress(e,{useDrilldownInAddress:n.getSettings("firms.useDrilldownInAddress"),format:n.getFormats("address.order"),infoStrategy:n.getSettings("geoobjects.infoStrategy"),regionName:m.name});return{street:t,comment:e.address_comment,entrances:e.links&&e.links.entrances,buildingName:a.get(e,"address.building_name",""),notClickable:t==m.name}}function h(e){var t,i=r.firstByType("website",e.contact_groups),o=d(e),l=u(e.contact_groups);l||(l=r.firstByType("fax",e.contact_groups)),t=l?a.chain(e.contact_groups).map("contacts").flatten().reduce(function(e,t){return e+r.isPhone(t)},0).value():0;var c={phone:{key:"phone",text:n._t("Телефон"),icon:"action-phone",href:t>1?"":"tel:"+a.get(l,"value",""),disabled:!l},website:{key:"website",text:n._t("Сайт"),icon:"action-website",href:function(){var t=i&&i.value;if(_.showAdLinkInActions){var n=e.ads&&e.ads.link;n&&(t=n.value)}return s.addBssParamsToLink(t,k)}(),disabled:!i},entrance:{key:"entrance",text:n._t("Вход"),icon:"action-entrance",disabled:!(o&&o.entrances)},favorite:{key:"favorite",isFavorite:!0}},h=req("helpers/distributeActions")(c);return h([["phone"],["website"],["entrance"],["favorite"]])}function p(e){var n=e.org||{};return n.branch_count>=2&&!t.shownInFloors?{count:n.branch_count,seoLink:l("firmBranches",{city:m.code,firmId:n&&n.id})}:null}var f,m=c.getRegion(),g=n.getSettings(),_=g&&g.firms||{},v=e.floors?null:a.get(e,"links.entrances");e.point&&(f=o("geoAddress",{city:m.code,id:a.get(e,"address.building_id"),lon:a.get(e,"point.lon"),lat:a.get(e,"point.lat")}));var y=i.getRating(e)||{},b=u(e.contact_groups),k=a.pick(t,"place","sid","user");k.ill=a.get(e,"bss.ill");var w=i.getAds(e,k);if(w){var x=w.text.replace(/\*$/,"");w.text=x}var C={};a.has(e,"ads.options.logo")&&(C={logo:a.get(e,"logoUrl"),bgColor:a.get(e,"ads.options.logo.bg_color")});var L=d(e);L.url=f;var I={firmId:e.id,name:{primary:e.name,description:a.get(e,"name_ex.description")},actions:{mobile:h(e),desktop:{routeA:!!e.point,routeB:!!e.point,entrance:!!v}},rating:y.value,address:L,ads:w,hasPhone:!a.isEmpty(b),branding:C,isFloors:!!e.floors,cardType:e.cardType,filials:p(e),isPhotosUploader:a.get(e,"photosUploaderAvailable"),allFilials:a.get(e,"allFilials")};return I},t.exports._args=["model","params","$i18n","$regionManager"]},{lodash:"lodash"}],303:[function(e,t,n){t.exports=function(t,n,a,i,o,r,s){function l(e){var t=g.clone(e),n=/(.*)\s+(\([^\(]+\))\s*$/,a=n.exec(t.value);return a&&(t.value=a[1],t.external=a[2]),t.href="tel:"+t.value,e.text.length<7&&(t.shortNumber=!0),t}function c(e){var t=g.clone(e),n=t.type;return"website"===n&&(t=_.fixSiteText(t),t=_.getSite(t),t.href=v.addBssParamsToLink(t.url,k),t.title=t.text,t.value=t.text||t.value),"email"===n&&(t.href="mailto:"+t.value,t.title=t.href,t.value=t.text||t.value),"phone"!==n&&"fax"!==n||(t=l(t)),_.isSocial(t)&&b.push(_.prepareSocialContact(t)),t[n]=!0,t.index=y++,t}function u(e){return g.map(e,function(e){return g.extend({},e,{icon:"mediaSocial_"+e.type})})}function d(e){var t=["phone","fax"];return g.contains(t,e.type)}function h(e){var t=g.findLast(e,d);return t&&(t.last=!0),e}function p(e){return e=g.map(e,c),h(e)}function f(e){var t=g.reject(e,"name")||[];if(t){var n=g.filter(e,"name")||[],a=g.flatten(g.pluck(t,"contacts"));e=n,e.unshift({contacts:h(a)})}return e}function m(e){return g.chain(e).pluck("items").flatten().cloneDeep().value()}var g=e("lodash"),_=req("helpers/contact"),v=req("helpers/analytics"),y=0,b=[],k={place:r.getPlace()||r.PLACE_CATALOG,sid:r.session,user:r.user,ill:g.get(t,"bss.ill")},w={},x=f(t.contact_groups),C=g.map(x,function(e){return{name:e.name||null,items:p(e.contacts||[])}});if(w.flatContacts=m(C),w.template=o,"firstPhone"==o){var L=g.find(w.flatContacts,{type:"phone"})||{};return L.last=!0,w.phones=[L],w}g.get(t,"ads.link.text")&&(w.advLink={href:v.addBssParamsToLink(t.ads.link.value,k),text:t.ads.link.text});var I=s.get("claimToFirm")&&g.get(t,"email_for_sending.allowed"),T=g.first(C),S=g.slice(C,1);return g.extend(w,{firstGroup:T,otherGroups:S,claimToFirm:I,socials:b.length?u(b):null,plusOne:a,moreFilialsCount:n,floors:i.hasFloors,floorsSeoLink:i.seoLink})},t.exports._args=["model","moreFilialsCount","plusOne","floorsParams","template","$analytics","$featureSwitcher"]},{lodash:"lodash"}],304:[function(e,t,n){var a=e("lodash"),i=req("helpers/discount"),o=req("helpers/string");t.exports=function(e,t,n){var r=n.getRegion(),s=i.formatDiscountPeriod(e,r,t),l=e.theme,c=["birthday","gift","lunchtime","students","takeaway","wedding"],u=a.include(c,l)?l:"gift",d=i.getDiscountCoverUrl(e,"304x172"),h=o.cutTags(e.description,"<ul><li>"),p=o.decorateUrls(h);return{cover:d,percent:e.percent,title:e.title,period:s,description:p,icon:"mediaDiscounts_"+u,votes:e.votes,firmName:e.firmName}},t.exports._args=["discount","$i18n","$regionManager"]},{lodash:"lodash"}],305:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/contact"),o=req("helpers/link"),r=req("helpers/schedule");t.exports=function(e,t,n,s,l){function c(){if(!e.schedule)return null;var n=r.getNow(k),a=r.isOpened(e.schedule,n),i=r.getMediaTodayWorktimeText(e.schedule,n,t);return{status:a?"opened":"closed",icon:a?"media_working-hours-opened":"media_working-hours-closed",tooltip:i}}function u(){var t=b.getAdsWarning(e,"text");return t?t.replace(/<br\s*[\/]?>/gi," "):null}function d(){return e.external_content&&!!a.find(e.external_content,{type:"photo_album",subtype:"common"})}function h(e){var t={providers:"providers","default":"default"};return t[e]||t["default"]}function p(){return a.map(e.tariffs,function(e){var n=[],i=a.get(e,"speed.in");return i&&n.push(i+" Мбит/сек."),e.tv_channels&&n.push(t._ngg("%1 ТВ-канал","%1 ТВ-канала","%1 ТВ-каналов",e.tv_channels)),e.hd_channels&&n.push(t._ngg("%1 HD-канал","%1 HD-канала","%1 HD-каналов",e.hd_channels)),{name:e.name,price:{value:e.price,currency:C},properties:n}})}function f(e){if(a.isEmpty(e))return null;var t=a.first(e);return a.each(e,function(e){e.price.value<t.price.value&&(t=e)}),t}function m(){var n,i=b.getAddressParts(e,{regionName:k.name,useDrilldownInAddress:t.getSettings("firms.useDrilldownInAddress")}),o=b.getBuildingName(e),r=0,c=0,u=15,d=30;return i&&(n={street:i.street+",",number:i.number},i.city&&(n.street=i.city+", "+n.street),n.floorsIndicator=b.checkFloors(e,s,l),r=a.get(n,"number.length")||0,c=a.get(n,"street.length")||0),o&&o.length+c+r<=d&&o.length<=u&&(n.street=o+", "+n.street),n}function g(){var n=b.getFirmAddress(e,{useDrilldownInAddress:t.getSettings("firms.useDrilldownInAddress"),format:t.getFormats("address.order"),infoStrategy:t.getSettings("geoobjects.infoStrategy"),regionName:k.name}),a=b.getBuildingName(e);return a&&(n=a+", "+n),n}function _(){var t=a.get(e,"org.branch_count");return t=t>1?t:null}var v,y=req("helpers/string"),b=req("helpers/firm"),k=n.getRegion(),w=null,x=t.getFormats().currency,C=a.extend({},x,{code:x.id.toLowerCase()}),L=a.chain(e).get("context.stop_factors").take(4).map(function(e){return!w&&e.name.search(t._t("Средний чек"))>-1?(w={value:e.name.match(/[^\d](\d+)[^\d]/)[1],currency:C},null):y.capitalize(e.name)}).compact().value(),I=a.find(e.external_content,{type:"discount"})&&t._t("скидки"),T=b.getRating(e)||{},S=i.firstByType("website",e.contact_groups),E=p(),P=f(E),j=b.getLogoUrl(e,"64x64");v="floorList"==e.parentType?o.getFloorsLink(e,l,n):b.getSeoUrl(e,k);var M=a.get(e,"name_ex.description");return{template:h(e.mediaRubric),name:M?e.name:e.name_ex.primary,description:M?M:e.name_ex.extension,seoUrl:v,rating:T.value,reviewsNumber:T.count,attributes:L,price:w,hasAttrs:L.length||w,schedule:c(),discount:I,address:m(),fullAddressHint:g(),ad:a.get(e,"ads.text"),warning:u(),filialsNumber:_(),withoutGallery:!d(),site:S,logo:j,cheapestTariff:P,otherTariffs:a.isEmpty(E)?null:E.length-1,isAction:!1}},t.exports._args=["model","$i18n","$regionManager","$featureSwitcher","$floorsManager"]},{lodash:"lodash"}],306:[function(e,t,n){"use strict";function a(e){var t=o.find(e.external_content,function(e){return e.main_photo_url&&"common"===e.subtype});return t&&t.main_photo_url}function i(e){return o.map(e,function(e){return{staticId:s.getStaticId(e.id),name:e.name_ex&&e.name_ex.primary,micro:e.name_ex&&e.name_ex.extension,address:e.address_name,cover:a(e),warning:s.getAdsWarning(e,"text")}})}var o=e("lodash"),r=req("helpers/link"),s=req("helpers/firm");t.exports=function(e,t,n){var a=n.getRegion();return{advLink:r.getAdvLink(a,"firmCard",e,t.getLang()),items:i(e)}},t.exports._args=["model","$i18n","$regionManager"]},{lodash:"lodash"}],307:[function(e,t,n){var a=e("lodash"),i=e("slot/lib/defer");t.exports=function(e,t){var n=4e3,o=function(e){this.firmData=e,this.photos=[],this.photoIndex=0,this.photosBcUrl=null,this.autoplay=!1,this.galleryPreloading=!1};return a.extend(o.prototype,{init:function(e){this.params=e=e||{},e.preloadFirst=e.preloadFirst||0,e.preloadLast=e.preloadLast||0,(e.preloadFirst||e.preloadLast||e.autoplay||e.blurPreview)&&this.loadPhotos().done(a.bind(function(){this.preloadFirstPhotos().done(a.bind(function(){e.autoplay&&this.enableAutoplay()},this))},this))},loadPhotos:function(){if(this.loadPhotosDefer)return this.loadPhotosDefer;this.loadPhotosDefer=new i;var e=this.params.type,n="saunaRoom"==e?"booklet":"firm",o={id:this.firmData.staticId||this.firmData.id};"firm"==n&&(a.extend(o,{firmData:this.firmData,albumName:"common"}),"saunas"==this.firmData.bookletType&&(n="firmAndBooklet",a.extend(o,{bookletId:this.firmData.bookletData.code,bookletData:this.firmData.bookletData}))),"saunaRoom"==e&&a.extend(o,{saunaRoomData:this.firmData});var r=t.photos({dataProvider:n});return r.request(o).then(a.bind(function(){this.photos=r.photos.items,this.photosBcUrl=r.photos.reg_bc_url,this.loadPhotosDefer.resolve()},this)),this.loadPhotosDefer},preloadPhoto:function(t,n){this.loadPhotos().done(a.bind(function(){var a=this.photos[t];if(!a||a.loaded)return void(n&&n());var i;i=0===t&&this.firmData.firstPhoto?this.firmData.firstPhoto:a.previews[this.params.previewSize]||a.url;var o=new Image;o.onload=e.ifAlive(function(){a.loaded||(e.element("photos").append(e.renderPartial("photo",{url:i,index:t})),a.loaded=!0),n&&n(t)}),o.src=i},this))},preloadNextPhoto:function(e){var t="prev"==e?a.findLastIndex:a.findIndex,n=t(this.photos,function(e){return!e.loaded});this.preloadPhoto(n)},preloadLastPhoto:function(){this.loadPhotos().done(a.bind(function(){this.preloadPhoto(this.photos.length-1)},this))},getNextPhotoIndex:function(e,t){var n="prev"==e,a=n?t-1:t+1;return this.photos[a]||(a=n?this.photos.length-1:0),a},showPhoto:function(){e.element("photosItem").mod({visible:!1,hidden:!0}),e.element("photos").find('[data-index="'+this.photoIndex+'"]').mod({visible:!0,hidden:!1})},preloadFirstPhotos:function(){var t=new i,n=a.map(a.keys(this.photos),a.partialRight(a.parseInt,10));if(n=a.union(a.take(n,this.params.preloadFirst+1),a.takeRight(n,this.params.preloadLast)),n.length){var o=0;a.each(n,function(i){this.preloadPhoto(i,a.bind(function(i){0==i&&e.setTimeout(a.bind(this.showPhoto,this)),++o==n.length&&t.resolve()},this))},this)}else t.resolve();return t},disableAutoplay:function(){this.autoplay=!1,clearInterval(this.gallerySlideInterval)},enableAutoplay:function(){this.autoplay=!0,this.loadPhotos().done(a.bind(function(){this.photos.length<2||(clearInterval(this.gallerySlideInterval),this.gallerySlideInterval=e.setInterval(a.bind(function(){if(!this.galleryPreloading){this.photoIndex=this.getNextPhotoIndex("next",this.photoIndex);var e=this.photos[this.photoIndex];e.loaded&&(this.showPhoto(),this.preloadNextPhoto())}},this),n))},this))},pauseAutoplay:function(){this.autoplay&&clearInterval(this.gallerySlideInterval)},resumeAutoplay:function(){this.autoplay&&this.enableAutoplay()},changePhoto:function(t){this.galleryPreloading||this.loadPhotos().done(a.bind(function(){this.photoIndex=this.getNextPhotoIndex(t,this.photoIndex);var n=this.photos[this.photoIndex];n.loaded?(this.showPhoto(),this.preloadNextPhoto(t)):(this.galleryPreloading=!0,e.mod({spinner:!0}),this.preloadPhoto(this.photoIndex,a.bind(function(){this.galleryPreloading=!1,e.mod({spinner:!1}),this.showPhoto(),this.preloadNextPhoto(t)},this)))},this))},getCurrentPhoto:function(){return this.photos[this.photoIndex]},getBcUrl:function(){return this.photosBcUrl}}),o},t.exports._args=["slot","$models"]},{lodash:"lodash","slot/lib/defer":489}],308:[function(e,t,n){var a=e("lodash");t.exports=function(e,t,n){var i,o,r,s,l,c=0;if(e.photos)e.photos.length&&(i=e.photos[0],o=i.urls[t.previewSize]||i.urls.original,c=e.photos.length);else{var u;u=e.photoAlbums?a.findWhere(e.photoAlbums,{type:"common"}):e.external_content&&a.find(e.external_content,{type:"photo_album",subtype:"common"}),u&&(o=u.main_photo_url+"/"+t.previewSize,t.blurPreview&&n.isClient&&(r=u.main_photo_url+"/78x51"),c=u.count)}if("saunas"==e.bookletType){var d=a.get(e,"bookletData.modules.rooms",[]),h=a.flatten(a.pluck(d,"photos"));c+=h.length,h.length&&!o&&(i=h[0],o=i.urls[t.previewSize]||i.urls.original)}var p=2>c;if(!o&&t.noPhotoIcon){var f={restaurant:[161,164,165,15791,51459],bar:[159],coffee:[162]},m=a.map(e.rubrics,function(e){return 4294967295&e.id}),g=a.findKey(f,function(e){return!a.isEmpty(a.intersection(m,e))});g&&(s="media_nophoto-"+g)}return l="mediaMiniCard"==t.type?"small":"big",{advertiser:!!e.ads,photosCount:c,firstPhoto:o,firstPhotoPreview:r||o,showSmallPreview:!!r,singlePhoto:p,noPhotoIcon:s,arrowPrev:"media_arrow-left-"+l,arrowNext:"media_arrow-right-"+l}}},{lodash:"lodash"}],309:[function(e,t,n){t.exports=function(e){var t={eat:{metarubric:"Поесть",items:[{id:"date",title:e._t("Свидание"),icon:"media_presets-date",group:"details",filters:{food_service_details_live_music:!0,food_service_details_wine_list:!0,food_service_details_table_reservation:!0,food_service_details_sport_on_tv:!1,food_service_infrastructure_banquet:!1}},{id:"party",title:e._t("Вечеринка"),icon:"media_presets-party",group:"details",filters:{food_service_infrastructure_dancefloor:!0,food_service_infrastructure_banquet:!1}},{id:"company",title:e._t("Компания"),icon:"media_presets-company",group:"details",filters:{food_service_details_sport_on_tv:!0,food_service_details_table_reservation:!0,food_service_infrastructure_banquet:!1}},{id:"children",title:e._t("С детьми"),icon:"media_presets-children",group:"details",filters:{food_service_details_kids_menu:!0,food_service_details_sport_on_tv:!1,food_service_infrastructure_kids_room:!0,food_service_infrastructure_dancefloor:!1,food_service_infrastructure_banquet:!1}},{id:"breakfast",title:e._t("Завтрак"),icon:"media_presets-breakfast",group:"details",filters:{food_service_details_breakfast:!0,food_service_wifi:!0,food_service_infrastructure_banquet:!1}},{id:"lunch",title:e._t("Ланч"),icon:"media_presets-lunch",group:"details",filters:{food_service_business_lunch:!0,food_service_wifi:!0,food_service_infrastructure_banquet:!1}}]},saunas:{metarubric:"Сауны",items:[{id:"russian",title:e._t("Русская"),icon:"media_presets-russian",group:"details",filters:{sauna_steam_type_russian_bath:!0,sauna_steam_type_russian_firewood_bath:!0}},{id:"finnish",title:e._t("Финская"),icon:"media_presets-finnish",group:"details",filters:{sauna_steam_type_finnish_bath:!0}},{id:"hammam",title:e._t("Хаммам"),icon:"media_presets-hammam",group:"details",filters:{sauna_steam_type_turkish_hamam:!0}},{id:"japanese",title:e._t("Японская"),icon:"media_presets-japanese",group:"steam_type",filters:{sauna_steam_type_japanese_bath:!0}},{id:"pool",title:e._t("С бассейном"),icon:"media_presets-pool",group:"details",filters:{sauna_infrastructure_pool:!0}}]},fitness:{metarubric:"Фитнес",items:[{id:"sauna",title:e._t("Есть сауна"),icon:"media_presets_withSauna",filters:{fitness_sauna:!0}},{id:"pool",title:e._t("С бассейном"),icon:"media_presets-pool",filters:{fitness_pool:!0}},{id:"group_trainings",title:e._t("Групповые тренировки"),icon:"media_presets_group",group:"details",filters:{fitness_details_water_aerobics:!0,fitness_details_aerobics:!0,fitness_details_matrial_arts:!0,fitness_details_yoga:!0,fitness_details_callanetics:!0,fitness_details_pilates:!0,fitness_details_stretching:!0,fitness_details_dance_programs:!0,fitness_details_shaping:!0,fitness_details_ems_exercises:!0}}]}};return t}},{}],310:[function(e,t,n){var a=e("lodash"),i=req("helpers/linkURL"),o=req("helpers/firm");t.exports=function(e,t,n){var r=a.map(e,function(e,a){var r=i("firm",{id:a,lon:e.point.lon,lat:e.point.lat,city:t.getRegion().code}),s=n.getSettings().advWarning&&!!e.ads;return{preview:e.preview,staticId:a,title:e.name_ex&&e.name_ex.primary,url:r,address:e.address_name,isAds:!!e.ads,micro:e.ads&&e.ads.text,warning:o.getAdsWarning(e,"text"),showAdvWarning:s,mainPhotoURL:e.main_photo_url?e.main_photo_url+"/100x100":null,extension:e.name_ex&&e.name_ex.extension}});return{firms:r}},t.exports._args=["rawFirms","$regionManager","$i18n"]},{lodash:"lodash"}],311:[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e,t,n){function i(){var i=t.getSettings(),r=i.ads.mkb.rotate;if(a.isArray(r)){var s=n.getRegion().code;r=a.contains(r,s)}r&&e.setInterval(function(){o&&e.notify("isFrameActive")&&e.broadcast("googleTagAds:refresh")},e.config.resultsAdsIntervalRotation)}var o,r,s={};return s.init=function(t,n){var s=t.contextRubrics||[],l=a.map(s,"short_id");r=e.init("googleTagAds",{type:"mediaResults",rubrics:l},n),e.isClient&&(r["interface"].onBannerRender(function(e){!e&&t.onRender&&(o=!0,t.onRender())}),i())},s.isShown=function(){return o},s.dispose=function(){r&&(r.dispose(),r=null),e.element("banner").remove()},s.isAlive=function(){return!!r&&r["interface"].hasAds()},s},t.exports._args=["slot","$i18n","$regionManager"]},{lodash:"lodash"}],312:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/firm");t.exports=function(e){function t(t,n){var o=a(t).map(function(e){return i.getStaticId(a.get(e,"org.id"))}).value();return a.isEmpty(o)?void n():void e.providers.searchTariffs({filters:{gisFirmId:o}},function(e,t){if(a.isEmpty(t))return void n();var i={};a.each(t,function(e){var t=e.provider_gis_firm_id;i[t]||(i[t]=[]),i[t].push(e)}),n(i)})}return{injectTariffsToResults:function(e,n){t(e,function(t){return a.isEmpty(t)?void n():(a.each(e,function(e){var n=a.get(e,"org.id");t[n]&&(e.tariffs=t[n])}),void n())})}}},t.exports._args=["$bookletApi"]},{lodash:"lodash"}],313:[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(){return{getParams:function(e){var t=e.page&&{current:e.page.current,max:e.page.total},n={type:"search",query:e.query,filters:e.filtersValues,page:t};return e.providersInBuilding&&(n.type="providersInBuilding"),e.rubricId&&a.assign(n,{type:"rubric",id:e.rubricId}),n}}}},{lodash:"lodash"}],314:[function(e,t,n){"use strict";t.exports=function(e,t,n){n=n||{};var a="_scheme_media mediaResults__track";return n.showPresets&&(a+=" _presetsShown"),{miniCards:t,filtersEnabled:n.showFilters,presetsEnabled:n.showPresets,filtersCollapsed:!1,showAds:!!n.showAds,providers:"providers"==n.mediaRubric,trackClass:a}}},{}],315:[function(e,t,n){"use strict";var a=e("lodash"),i=e("moment"),o=req("helpers/firm"),r=req("helpers/link");t.exports=function(e,t,n,s,l){function c(e){var t={flamp:"mediaBlocks_reviews",foursquare:"mediaBlocks_tips"};return t[e]||t.flamp}function u(e){return e.replace(/\n/g,"<br>")}var d=300,h=a.find(a.get(e,"reviews.items"),"tag","flamp"),p=a.get(h,"is_reviewable")&&!a.get(t,"isReviewTab"),f=void 0;if(p&&(f=r.getFlampLink(e.id,l)),!t)return{icon:"mediaBlocks_reviews",type:"flamp",leaveReviewUrl:f,showLeaveReviewBtn:p,showReviewTitle:!0};var m=s.getRegion(),g=o.getSeoUrl(e,m,n.tab),_=i(1e3*t.creation_timestamp),v=e.reviews.general_review_count,y=1==v;return{id:t.id,user:t.user,icon:c(t.source),type:t.source,url:t.url,leaveReviewUrl:f,tabUrl:g,address:t.filialData&&o.getFirmAddress(t.filialData,{useDrilldownInAddress:l.getSettings("firms.useDrilldownInAddress"),format:l.getFormats("address.order"),infoStrategy:l.getSettings("geoobjects.infoStrategy"),regionName:m.name}),photo:t.photo&&t.photo.image,text:u(t.text),textCollapsable:t.text.length>d,stars:t.rating,likes:t.likes_score,recommend:t.is_recommended,when:_.fromNow(),total:v,showLeaveReviewBtn:p,showReviewTitle:!t.isReviewTab,onlyOneReview:y,noIndex:t.noIndex,flampReviews:h}},t.exports._args=["firm","review","params","$regionManager","$i18n"]},{lodash:"lodash",moment:"moment"}],316:[function(e,t,n){t.exports=function(e){return{pools:e._t("Бассейн"),hydromassage:e._t("Гидромассаж"),waterslides:e._t("Водные горки"),bath:e._t("Купель"),jacuzzi:e._t("Джакузи"),brooms:e._t("Веники"),towels:e._t("Полотенца"),bedsheets:e._t("Простыни"),tea:e._t("Чай"),sneakers:e._t("Тапочки"),restroom:e._t("Комната отдыха"),fireplace:e._t("Камин"),bower:e._t("Беседка, мангал"),massage_chair:e._t("Массажное кресло"),calabash:e._t("Кальян"),karaoke:e._t("Караоке"),tennis:e._t("Теннис"),billiards:e._t("Бильярд"),dancefloor:e._t("Танцпол"),hockey:e._t("Настольный хоккей"),tv:"TV/DVD",wifi:"Wi-Fi"}},t.exports._args=["$i18n"]},{}],317:[function(e,t,n){var a=e("lodash"),i=req("helpers/string");t.exports=function(e){function t(e,t){e=a.indexOf(l,e),t=a.indexOf(l,t);var n=(e+1)%7;return t===n}function n(e){var n=[],i=null,o="";return a.each(l,function(r){if(e[r]){var s=a.filter(e[r],function(e){return a.isNumber(e.cost)});a.each(s,function(e){4===e.from.length&&(e.from="0"+e.from),4===e.to.length&&(e.to="0"+e.to)}),i&&(t(i.weekday,r)&&a.isEqual(i.prices,s)?(i.to=c[r],i.weekday=r,i.days.push(l.indexOf(r))):(i.to||(i.to=c[o]),n.push(i),i=null)),i||(i={weekday:r,from:c[r],prices:a.cloneDeep(s),days:[l.indexOf(r)]}),o=r}}),i.to=c[o],n.push(i),n}function o(t,n){var a,i=parseInt(t.replace(":",""),10),o=parseInt(n.replace(":",""),10),r="0"==i&&"2400"==o;return a=r?e._t("Круглосуточно"):t+" – "+n}function r(t,n){return a.map(t,function(t){var r={};return r.weekdays=t.from!=t.to?t.from+"-"+t.to:t.from,r.prices=a.map(t.prices,function(t){return{timeRange:o(t.from,t.to),price:i.numberString(t.cost,e.getFormats("number")),currency:n}}),r})}function s(t){var i,o,s=e.getFormats().currency,l={code:s.id.toLowerCase(),symbol:s.symbol};"fixed"===t.type?o=[t.value]:"custom"===t.type&&(i=n(t.value),o=a(i).pluck("prices").flatten().pluck("cost").value(),i=r(i,l));var c=a.min(o),u=a.max(o);return{value:c!=u?c+"-"+u:c,currency:l,schedule:i}}var l=["mon","tue","wed","thu","fri","sat","sun"],c={mon:e._t("Пн"),tue:e._t("Вт"),wed:e._t("Ср"),thu:e._t("Чт"),fri:e._t("Пт"),sat:e._t("Сб"),sun:e._t("Вс")};return{isNextDay:t,groupPrices:n,formatPriceData:s}},t.exports._args=["$i18n"]},{lodash:"lodash"}],318:[function(e,t,n){var a=e("lodash");t.exports=function(t,n,i){function o(e){var t,n={russian:i._t("Русская парная"),turkish:i._t("Турецкий хаммам"),finnish:i._t("Финская парная"),infrared:i._t("Инфракрасная сауна"),japanese:i._t("Японская сауна"),russian_with_wood:i._t("Русская баня на дровах")};e.steamroom&&(t=n[e.steamroom]);var o;return e.capacity&&(o=i._nt("до %1 человека","до %1 человек","до %1 человек",e.capacity)),t?t+=", "+o:t=a.capitalize(o),t}function r(e){var t={finnish:"hottest",russian_with_wood:"hotter",russian:"hotter"};return t[e.steamroom]||"hot"}function s(t){function n(e,t){return a(e).filter("checked").map(function(e){return e.length&&e.width?t+" "+i._t("%1x%2 м",e.length,e.width):t}).value()}function o(e,t){var i=[];if(t&&r[e]){var o=r[e];"pools"==e?i=n(t,o):(a.isNumber(t)&&(o+=", "+t),i=[o])}return i}var r=e("./attributes")(i),s=[];return t.options&&a.each(t.options,function(e){a.each(e,function(e,t){var n=o(t,e);s=s.concat(n)})}),s}function l(e){return e?e.replace(/\n/g,"<br>"):null}var c=e("./prices.js")(i),u=200,d=80,h=r(t),p=s(t),f="about"!==n.type&&p.join("").length>d;return{title:t.title,type:o(t),description:l(t.description),descriptionMore:t.description&&(""+t.description).length>u,price:c.formatPriceData(t.price),attrs:p,attrsMore:f,details:t.offer,temperatureIcon:"media_thermometer-"+h,temperatureType:h,isAboutTab:"about"===n.type}},t.exports._args=["model","params","$i18n"]},{"./attributes":316,"./prices.js":317,lodash:"lodash"}],319:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/schedule"),o=req("helpers/string");t.exports=function(e,t,n,r){var s=i.isEveryDay(e);if(s){var l=i.getMediaTodayWorktimeText(e,t,r),c=!r.getSettings("firms.doNotMergeWorkingHours");return{inline:{work:l,"break":c&&o.capitalize(i.getTodayBreaktimeText(e,t,r))},comment:i.getComment(e)}}var u=i.getWeekTable(e,t,r),d=a.some(u,function(e){return a.get(e,"parts.second")});return{comment:i.getComment(e),week:u,hasSecondColumn:d}},t.exports._args=["schedule","now","$regionManager","$i18n"]},{lodash:"lodash"}],320:[function(e,t,n){"use strict";function a(e,t){var n=void 0;return n="station_entrance"==t.type&&"metro"==t.subtype?t.stationId:t.metroId,s.findIndex(e,{station_id:n})}function i(e,t,n){var a=s.assign({},e,{name:e.name,id:e.station_id,transitions:e.transitions||null,transitionTitle:e.transitions?t._nt("Переход на станцию","Переход на станции","Переход на станции",e.transitions.length):null,onStationClick:n});return a}function o(e,t,n,o,r){var l=a(e,n),c=s.reduce(e,function(e,t,n){var a=i(t,o,r);return l>n?[e[0].concat(a),e[1]]:n>l?[e[0],e[1].concat(a)]:e},[[],[]]),u=[],d={name:s.first(e).name,color:t,isMetro:!0,platforms:c[0].reverse()},h={name:s.last(e).name,color:t,isMetro:!0,platforms:c[1]};return d.platforms.length>0&&u.push(d),h.platforms.length>0&&u.push(h),u}function r(e,t,n){return s.assign({},e,{seoLinkStation:l("transportStopMetro",{city:n,id:e.station_id,lon:t.lon,lat:t.lat}),transitions:s.map(e.transitions,function(e){return s.assign({},e,{seoLinkStation:l("transportStopMetro",{city:n,id:e.station_id,lon:t.lon,lat:t.lat})})})})}var s=e("lodash"),l=req("helpers/linkURL");
t.exports=function(e,t,n,a,i,l,c){return s.chain(e).map(s.partial(r,s,t,n)).thru(s.partial(o,s,a,i,c,l)).value()},t.exports._args=["platforms","metroPoint","city","routeColor","metroSubstitute","selectStation","$i18n"]},{lodash:"lodash"}],321:[function(e,t,n){var a=e("lodash"),i=req("helpers/station"),o=req("helpers/linkURL"),r=req("helpers/link");t.exports=function(e,t){if(e.error)return e;var n=t.region||{},s=t.point,l=t.i18n,c=n.code,u=a.first(e.routes);return{name:e.name,city:c,type:i.getCaption(e.type,e.subtype,l),line:{color:u.color||"#5d86dd",name:u.name},crossing:i.viewForCrossings(e,c,s,o,l),schedule:e.schedule,advLink:r.getAdvLink(n,"metroCard",{},l.getLang()),seoLinkLine:u&&u.id?o("transportRoute",{city:c,id:u.id,zoom:11}):void 0}}},{lodash:"lodash"}],322:[function(e,t,n){"use strict";var a=req("helpers/schedule"),i=req("helpers/string");t.exports=function(e,t,n){if(!e)return{};var o=a.getTodayWorktimeText(e,t,n),r=n.getSettings("firms.doNotMergeWorkingHours")?null:a.getTodayBreaktimeText(e,t,n);return{status:i.capitalize(a.getStatusText(e,t,n)),title:r?o+", "+r:o}},t.exports._args=["schedule","now","$i18n"]},{}],323:[function(e,t,n){var a=e("lodash");t.exports=function(e,t,n){function i(e,t,n){var a=0;return a+=e?1:0,a+=t?1:0,a+=n?1:0}n=n||{};for(var o={},r=req("helpers/geo"),s=req("helpers/firm"),l=t.requireComponent("regionManager"),c=l.getRegion(),u=t.requireComponent("i18n"),d=t.requireComponent("featureSwitcher"),h=["type","name","ads","photo"],p=e.type,f=req("helpers/link"),m=0,g=h.length;g>m;m++){var _=h[m];o[_]=e[_]||""}o.profile=a.clone(e),r.typeIsGeo(p)?o.profile.type=r.getGeoTypeHumanReadable(e,u):o.profile.type="",c&&(o.city=c);var v=req("helpers/miniCard")(e,o,{wkt:t.requireComponent("wkt"),searchContext:t.searchContext,regionManager:l,providersFeature:d.get("bookletProviders"),plusOneFeature:n.plusOneFeature,offlineMode:n.offline,i18n:u,isMausoleum:t.isMausoleum,searchType:n.searchType,os:t.ua().osName}),y=v.getHelperByType();y&&y.prepareData();var b=s.getDiscounts(e,c);if(b&&(o.discounts.label=u._t("Посмотреть скидки")),e.recoveryAd&&(o.recoveryAd=!0,o.recoveryHeader=0===e.adsIndex,o.advLink=f.getAdvLink(c,"miniCard",{},u.getLang())),"branch"==p){var k=t.requireComponent("floorsManager"),w=s.checkFloors(e,d,k),x=i(n.plusOne,b,w);if(w&&3>x){var C=f.getFloorsLink(e,k,l);o.floorsButton={label:u._t("Посмотреть на этажах"),seoUrl:C}}o.floors=e.floors}return o}},{lodash:"lodash"}],324:[function(e,t,n){n.doPrettyCount=function(e){return e.length<4?e:e.replace(/(\d)(?=(?:\d{3})+?$)/g,"$1&thinsp;")}},{}],325:[function(e,t,n){function a(e,t){i.each(e.items,function(n){var a=i.get(n,"org.id");n.fullName=[n.name_prefix,n.name].join(" "),e.firms&&a&&i.each(e.firms,function(e){e.primaryName=i.get(e,"name_ex.primary"),e.id==a&&(n.org=e,n.org.href=o("firmWithGifts",{city:t,id:n.org.id}))})})}var i=e("lodash"),o=req("helpers/linkURL"),r=e("moment");t.exports=function(t,n){var o=e("./util"),s=i.get(t,"presents.total"),l=[n._gg("в понедельник"),n._gg("во вторник"),n._gg("в среду"),n._gg("в четверг"),n._gg("в пятницy"),n._gg("в субботy"),n._gg("в воскресенье")];if(t=t||{},t.next_present){var c=i.cloneDeep(t.next_present),u=r(c.date,"DD.MM.YYYY");u.isSame(new Date,"day")?c.day=n._gg("сегодня"):c.day=l[u.weekday()],c.next=!0,delete t.next_present,i.isArray(i.get(t,"winners.items"))&&t.winners.items.unshift(c)}return t.isEnoughGifts=s>3,t.needSlider=t.isEnoughGifts&&i.get(t,"winners.total"),t.needSlider&&(t.winners.items=i.chunk(t.winners.items,2)),s&&a(t.presents,t.cityCode),t.presents&&i.each(t.presents.items,function(e){e.price=o.doPrettyCount(""+e.price),e.stats.reposts_count=o.doPrettyCount(""+e.stats.reposts_count)}),t},t.exports._args=["data","$i18n"]},{"./util":324,lodash:"lodash",moment:"moment"}],326:[function(e,t,n){"use strict";var a=req("helpers/linkURL"),i=e("lodash");n.formatDym=function(e,t){return i.map(e,function(e){return{url:a("rubric",{city:t,id:e.id,query:e.name}),name:e.name,id:e.id}})}},{lodash:"lodash"}],327:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/panels"),o=req("helpers/floors"),r=req("helpers/linkURL"),s=e("./helper"),l=req("helpers/request");t.exports=function(e,t,n,c){function u(){function e(e){return t[e]&&n[e]&&t[e]==n[e]}var t=v.to||{},n=v.from||{};return e("lat")&&e("lon")}function d(){var e={cafe:{title:n._pt("Дашборд","Поесть")},hotel:{title:n._pt("Дашборд","Гостиницы")},pharmacy:{title:n._pt("Дашборд","Аптеки")},newlyBuilt:{title:n._pt("Дашборд","Новостройки")},atm:{title:n._pt("Дашборд","Банкоматы")},carservice:{title:n._pt("Дашборд","Автосервисы")}},t=n.getSettings();return a.isObject(t)&&t.noresults?a.compact(a.map(t.noresults.metarubrics,function(t){var n=e[t.code];return n?(n.type=t.code,n.seoLink=r("search",{city:x.code,query:t.rubricQuery,tab:"firm"}),n.query=t.rubricQuery,n):null})):null}function h(){return a.includes(["notAllowedOnPhone","catalogFloorsNotFound","floorsNotAllowedOnPhone","floorsWithoutWebGl"],e.msgType)?e.msgType:y?"notFoundCity":b?k?a.contains(["startStationNotFound","endStationNotFound"],e.msgType)?"notFoundPoints":u()?"pointsIsEqual":w?"notFoundRoutesGlobal":"notFoundRoutes":"routeServerError":k?"catalogNotFound":"catalogServerError"}function p(){var e={subway:n._t("Метрополитен"),car:n._t("Автомобильные маршруты"),pedestrian:n._t("Пешеходные маршруты"),bus:n._t("Общественный транспорт")};return e[v.rsType]}function f(){return!y&&b?k?"routeNotFound":"brokenGlasses":null}function m(e){var t=e.redirectDomain?n._config("projectURL",e.country_code):"";return r("city",{city:e.code},t)}function g(){var e=v.regions;if(!w||!e)return null;var t=a.compact([e.current,e.from,e.to]);return t=a.uniq(t,function(e){return e.id}),t.length<2?null:a.map(t,function(e,t){var a;return a=0==t?n._t("Остаться в %1",e.name_grammatical_cases.prepositional):n._t("Перейти в %1",e.name_grammatical_cases.accusative),{id:e.id,text:a,href:m(e)}})}function _(){return"catalogFloorsNotFound"==e.msgType?o.getMetaRubricsByPriority(v.metarubrics,4,n):d()}e=e||{};var v=e.errorModuleData||{},y=e.isCitySelect,b=i.isRouteSearchModule(v.name),k=l.isClientErrorCode(e.code),w=b&&v.regions,x=c.getRegion();return{metaRubrics:_(),addFirmHref:e.addFirmHref,templateName:h(),routeType:p(),isSubway:"subway"==v.rsType,type:f(),needGoogleTag:"notFoundCity"!=h(),projects:g(),isWizardInited:e.isWizardInited,regionPrepositional:a.get(x,"name_grammatical_cases.prepositional"),dym:s.formatDym(v.dym,x.code)}},t.exports._args=["data","config","$i18n","$regionManager"]},{"./helper":326,lodash:"lodash"}],328:[function(e,t,n){var a=e("lodash"),i=req("helpers/contact"),o=req("helpers/analytics");t.exports=function(t,n,r,s,l){function c(e,t){t&&t.searchType&&s.trackEvent("google",["RouteSearch","Map_"+t.searchType,"Show"])}function u(e){s.trackEvent("google",e),s.trackEvent("yandex",[e.join("_").toUpperCase()])}function d(e,t,n,a){if(n.rubricId)s.trackEvent("yandex",["SEARCH_RUBRIC"]);else if(n.house&&n.query)u(["Search","Callout_Building"]);else switch(e){case"filials":u(["Search","Branches"]),s.trackEvent("inspectlet",[{Search:"Branches"}]);break;case"inbuild":u(["Search","Building"]);break;case"query/firms":u(["Search","Simple","Regular"]),s.trackEvent("inspectlet",[{Search:"Regular"}]);break;case"media":s.trackEvent("inspectlet",[{Search:"Media"}])}if(t&&"inbuild"!=e){var i=a?"Build_search_recovery":"Simple_search_recovery";s.trackEvent("google",["Recovery","Show",i])}}function h(e,t){if("bus"==t.rsType)s.trackEvent("google",["RouteSearch","Card_bus","Click_stop"]);else if("subway"==t.rsType){var n=e.text(),a=t.from?t.from.text:"",i=t.to?t.to.text:"";n!=a&&n!=i&&s.trackEvent("google",["RouteSearch","Card_subway","Station"])}}function p(e,t){var n=t.rsType,a="Card_"+n;if(e&&n){var i=e.length;s.trackEvent("google",["RouteSearch",a,"Amount",i]),s.trackEvent("google",["RouteSearch","Card_Type",n]),i>1&&s.trackEvent("google",["RouteSearch",a,"More_than_1"])}}function f(e){if(e){var t=e.length;s.trackEvent("google",["RouteSearch","Card_Type","car"]),s.trackEvent("google",["RouteSearch","Card_auto","Amount",t])}}function m(e,t){c(e,t);var n=t?a.first(t.items):null;n&&n.type&&s.trackEvent("google",["RouteSearch","Card_auto",n.type])}function g(e){var t=a.pluck(e,"short_id"),n=a.keys(o.inspectlet.mapWebvizorTags).map(a.ary(parseInt,1)),i=a.intersection(t,n);0!=i.length&&a.forEach(i,function(e){s.trackEvent("inspectlet",[{Cntxt_R:o.inspectlet.mapWebvizorTags[e]}])})}function _(t){function n(e){return i[e.short_id]}var i=e("./analytics/dictionaries").mapDisoveryRubricIds;return a.chain(t).map(n).compact().first().value()}function v(e){var n=e.marker,a=n&&n._map,i=t.searchContext;if(a&&"discovery"==i.read("requestType")){var o=i.read("contextRubrics"),r=_(o);if(r){var c=a.getZoom(),u=+(n&&n.data&&n.data.is_advertising);l.get("dotMarkers3")?s.trackEvent("google",["Map_Discovery_Zoom1",r,c,u]):s.trackEvent("google",["Map_Discovery_Zoom",r,c,u])}}}function y(e){var t=r.getRegions();s.trackEvent("google",["Cityselect","Select",t[e].name]),s.trackEvent("yandex",["CITY_SELECT"])}function b(e){var t=["Media_Card_event","Navigate","Back"];e&&(t=["Media_Card_event","Navigate","Back",1]),s.trackEvent("google",t)}var k={pages:[]},w={"*:contactClicked":function(e,t,n){return"mediaCard"===n?("website"==e.type&&s.trackEvent("google",["Media_Card_event","Site","Contact"]),void(i.isSocial(e)&&s.trackEvent("google",["Media_Card_event","Social",e.type]))):(i.isPhone(e)&&s.trackEvent("yandex",["PHONE_CLICK"]),"website"==e.type&&s.trackEvent("yandex",["SITE_CLICK"]),void(i.isSocial(e)&&("mixedCard"===n?s.trackEvent("google",["Mixed_Card_event","Social",e.type]):s.trackEvent("google",["Firm_Card_event","Social",e.type]))))},"routeResults:mapDataReady":c,"autoResults:mapDataReady":c,"auth:opened":function(e){switch(e){case"signup":s.trackEvent("google",["Auth","Registration_begin","Open"]);break;case"confirm":s.trackEvent("google",["Auth","Registration_end","Open"]);break;case"login":s.trackEvent("google",["Auth","Control","Open_auth_form"]);break;case"recovery":s.trackEvent("google",["Auth","Forgot_begin","Open"]);break;case"change":s.trackEvent("google",["Auth","Forgot_end","Open"])}},"auth:login":function(e){switch(e){case"success":s.trackEvent("google",["Auth","Login","Success_email"]),s.trackEvent("yandex",["AUTH_LOGIN"]);break;case"error":s.trackEvent("google",["Auth","Login","Fail_email"]),s.trackEvent("google",["Auth","Login","Fail_Error"]);break;case"unavailable":s.trackEvent("google",["Auth","Login","Fail_email"]),s.trackEvent("google",["Auth","Login","Fail_notAvailable"])}},"auth:signup":function(e){switch(e){case"success":s.trackEvent("google",["Auth","Registration_begin","Success"]),s.trackEvent("yandex",["AUTH_REGISTRATION"]);break;case"error":s.trackEvent("google",["Auth","Registration_begin","Fail_Error"]);break;case"unavailable":s.trackEvent("google",["Auth","Registration_begin","Fail_notAvailable"]);break;case"failValidation":s.trackEvent("google",["Auth","Registration_begin","Fail_validation"])}},"auth:confirm":function(e){switch(e){case"success":s.trackEvent("google",["Auth","Registration_end","Success"]);break;case"error":s.trackEvent("google",["Auth","Registration_end","Fail_Error"]);break;case"unavailable":s.trackEvent("google",["Auth","Registration_end","Fail_notAvailable"])}},"auth:recovery":function(e){switch(e){case"success":s.trackEvent("google",["Auth","Forgot_begin","Success"]);break;case"error":s.trackEvent("google",["Auth","Forgot_begin","Fail_Error"]);break;case"unavailable":s.trackEvent("google",["Auth","Forgot_begin","Fail_notAvailable"])}},"auth:recoveryBegin":function(){s.trackEvent("google",["Auth","Forgot_begin","Submit"])},"auth:recoveryEnd":function(){s.trackEvent("google",["Auth","Forgot_end","Submit"])},"auth:change":function(e){switch(e){case"success":s.trackEvent("google",["Auth","Forgot_end","Success"]);break;case"error":s.trackEvent("google",["Auth","Forgot_end","Fail_notAvailable"]);break;case"unavailable":s.trackEvent("google",["Auth","Forgot_end","Fail_Error"])}},"*:signupSocial":function(e){s.trackEvent("google",["Auth","Registration_Social",e])},"awardCard:clicked":function(e){var t=r.getRegion(),n=[t.code,e.title].join(", ");s.trackEvent("google",["Awards_2014","Card_Click",n])},"congestion:switched":function(e){s.trackEvent("google",["Traffic",e?"On":"Off"]),e&&s.trackEvent("yandex",["TRAFFIC_SHOW"])},"dataViewer:changePanels":function(){var e=n.get("panels"),i=a.findWhere(e,{type:"rubrics"}),o=a.findWhere(e,{type:"subrubrics"});if(o){var r=o.name||t.broadcast("rubricsList:getName");s.trackEvent("google",["Rubrics","Subrubric_list",r])}else i&&s.trackEvent("google",["Rubrics","MainRubric_list"])},"firmCard:bugReportLinkClicked":function(){s.trackEvent("google",["Firm_Card_event","Error_click"])},"card:bugReportLinkClicked":function(){s.trackEvent("google",["Mixed_Card_event","Error_click"])},"firmCard:proposalShown":function(e){s.trackEvent("googleBooklets",["Product_Offer","Product_Offer_Show",e])},"card:proposalShown":function(e){s.trackEvent("googleBooklets",["Product_Offer","Product_Offer_Show",e])},"proposals:proposalClicked":function(e){s.trackEvent("googleBooklets",["Product_Offer","Product_Offer_Click",e])},"card:proposalClicked":function(e){s.trackEvent("googleBooklets",["Product_Offer","Product_Offer_Click",e])},"firmCard:proposalsButtonShown":function(e){s.trackEvent("googleBooklets",["Product_Offer","Card_Button_show",e])},"card:proposalsButtonShown":function(e){s.trackEvent("googleBooklets",["Product_Offer","Card_Button_show",e])},"firmCard:proposalsCoverageClicked":function(e,t){s.trackEvent("googleBooklets",["Product_Offer","Card_Вutton_click",t])},"card:proposalsCoverageClicked":function(e,t){s.trackEvent("googleBooklets",["Product_Offer","Card_Вutton_click",t])},"mediaCard:bugReportLinkClicked":function(){s.trackEvent("google",["Firm_Card_event","Error_click"])},"mediaCard:arrowsShown":function(){s.trackEvent("google",["Media_Card_event","Navigate","Show"])},"mediaCard:mediaDiscountsClicked":function(){s.trackEvent("google",["Discount","Media_card","Show_tab"])},"miniCard:discountsButtonClicked":function(e){s.trackEvent("googleBooklets",["Discount",e.recovery?"Recovery_Button":"Search_Button","Click"])},"firmCard:discountsButtonClicked":function(){s.trackEvent("googleBooklets",["Discount","Card_Button","Click"])},"card:discountsButtonClicked":function(){s.trackEvent("googleBooklets",["Discount","Card_Button","Click"])},"discountsCard:clickDiscount":function(){s.trackEvent("googleBooklets",["Discount","Sharing_Social","Show"])},"discountsCard:sendErrorClicked":function(){s.trackEvent("googleBooklets",["Discount","Feedback","Show"])},"rubricsList:rubricClicked":function(e){e&&e.name&&s.trackEvent("google",["Rubrics","Subrubric_click",e.name])},"searchResults:clientInit":function(e){if(e.has("data"))if(e.is("recovery"))s.trackEvent("google",["Advertiser","Recovery_list",e.get("adsLength")]);else{var t=a.countBy(e.get("markers"),function(e){return e.is_advertising?"adsCount":"freeCount"});s.trackEvent("google",["Advertiser","Discovery_list",t.adsCount||0])}},"dashboard:closeClicked":function(e){e||(s.trackEvent("google",["Dashboard","Close",screen.width+"x"+screen.height]),s.trackEvent("yandex",["DASHBOARD_CLOSE"]))},"feedback:showPromoOwner":function(){s.trackEvent("google",["Feedback","Owner"])},"feedback:submit":function(e,t){s.trackEvent("google",["Feedback","Submit",e]),t&&s.trackEvent("google",["Feedback","Submit","Value",t]),"discountError"==e&&s.trackEvent("googleBooklets",["Discount","Feedback","Submit"])},"mixedResults:setResults":d,"searchResults:showDiscoveryResult":g,"searchResults:showTyresButton":function(){s.trackEvent("google",["Tyres","Button","Show"]),s.trackEvent("yandex",["TYRES_SHOW"])},"searchBar:switchPoints":function(){s.trackEvent("google",["RouteSearch","Search_panel","Switcher"])},"searchBar:minimizeControlClicked":function(e){"media"===e.specialMode&&("card"===e.contentType?s.trackEvent("google",["Media_Card_event","Navigate","Minimize",1]):"results"===e.contentType&&s.trackEvent("google",["Search","Media_Results_Hide",e.queryText,1]))},"searchBar:shiftMediaCard":function(){s.trackEvent("google",["Media_Card_event","Navigate","Minimize"])},"searchBar:mediaTabClickedTrack":function(e){"back"===e&&b(!0),"new"===e&&s.trackEvent("google",["Search","Media_Filters","New"])},"searchBar:backLinkClicked":function(e){"media"===e.mode&&b()},"searchBar:mediaTabShown":function(e){"new"===e&&s.trackEvent("google",["Search","Media_Filters_show","New"])},"searchBar:closeControlClicked":function(e){"media"===e.specialMode&&"results"===e.contentType&&s.trackEvent("google",["Search","Media_Results_Close",e.queryText,1]),"media"===e.specialMode&&"card"===e.contentType&&b()},"bookletBuildings:tabShown":function(e){s.trackEvent("googleBooklets",["Booklet_Buildings",e]),"apartments"==e&&s.trackEvent("googleBooklets",["Booklet_Buildings","Flats","Tab_show"])},"bookletBuildings:apartmentsTabClicked":function(){s.trackEvent("googleBooklets",["Booklet_Buildings","Flats","Tab_click"])},"bookletBuildings:apartmentShown":function(e){s.trackEvent("googleBooklets",["Booklet_Buildings","Flats_Ad_show",e])},"bookletBuildings:apartmentClicked":function(e){s.trackEvent("googleBooklets",["Booklet_Buildings","Flats_Ads_click",e])},"filters:shownMediaFilters":function(e,t){a.contains(["food_service_food","sort","work_time","food_service_avg_price","food_service_infrastructure","food_service_details","sauna_steam_type","sauna_hour_price"],t)||s.trackEvent("google",["Search","Media_Filters_show",e])},"routeResults:clientInit":p,"routeResults:stepsItemClick":h,"routeResults:routeClicked":function(e,t,n){if(0!=n){var a=e.rsType,i="Card_"+a;s.trackEvent("google",["RouteSearch",i,"Open_another_route"])}c(e,t)},"autoResults:routeClicked":m,"autoResults:clientInit":f,"autoResults:focusPoint":function(e,t){s.trackEvent("google",["RouteSearch","Card_auto","Click_"+t])},"stopCard:routeSelected":function(){s.trackEvent("google",["Stop_Card_event","Route_item"])},"stopCard:headerClick":function(){s.trackEvent("google",["Stop_Card_event","Title"])},"citySelect:changeRegion":y,"citySelect2Region:changeRegion":y,"citySelectPhone:changeRegion":y,"map:markerClick":v,"map:trackMarkerClick":v,"mediaContacts:sendEmailLinkClicked":function(){s.trackEvent("google",["Media_Card_event","Email","Click"])},"mediaCard:trackedAnalyticsTabClicked":function(e){var t={reviews:["Media_Card_event","Reviews","Tab"],discount:["Media_Card_event","Discount","Tab_Click"]};t[e]&&s.trackEvent("google",t[e]),"discounts"==e&&s.trackEvent("google",["Discount","Media_card","Click_tab"])},"mediaCard:ownerInfoClick":function(){s.trackEvent("google",["Media_Card_event","Advantage","Tab"])},"mediaContacts:shownWithoutSite":function(){s.trackEvent("google",["Media_Card_event","Site_Null"])},"mediaContacts:noPhone":function(){s.trackEvent("google",["Media_Card_event","Phone_Null"])},"mediaContacts:filialsLinkShown":function(){s.trackEvent("google",["Media_Card_event","Branches_Show"])},"mediaContacts:filialsClick":function(){s.trackEvent("google",["Media_Card_event","Branches"])},"mediaActions:clickShowAll":function(){s.trackEvent("google",["Media_Card_event","Discount","All_Click"])},"mediaActions:actionsItemClick":function(){s.trackEvent("google",["Media_Card_event","Discount","Item_Click"]),s.trackEvent("google",["Discount","Media_card","Click_discount"])},"mediaActions:showDiscountsTitle":function(){s.trackEvent("google",["Media_Card_event","Discount","Item_Show"])},"mediaReview:clickReviewsTotal":function(e){"reviews"===e&&s.trackEvent("google",["Media_Card_event","Reviews","All_reviews_click"])},"mediaReview:reviewTextMoreClicked":function(){s.trackEvent("google",["Media_Card_event","Reviews","Last_review_click"])},"productsFilters:filterClick":function(e){"sort_by"===e.name?s.trackEvent("google",["Tyres","Sort",e.value]):(s.trackEvent("yandex",["TYRES_FILTER",e]),s.trackEvent("google",["Tyres","Filter",e.name]))},"productsFilters:submitClick":function(e){s.trackEvent("google",["Tyres","Go"]),s.trackEvent("yandex",["TYRES_GO",e])},"productCard:clientInited":function(e){s.trackEvent("google",["Tyres","Item","Show"]),s.trackEvent("yandex",["TYRES_ITEM",e])},"productCard:siteClick":function(e){s.trackEvent("google",["Tyres","Item","Site"]),s.trackEvent("yandex",["TYRES_SITE",e])},"productCard:contactsClick":function(e){s.trackEvent("google",["Tyres","Item","Contacts"]),s.trackEvent("yandex",["TYRES_CONTACT",e])},"products:notFound":function(){s.trackEvent("google",["Tyres","NotFound"])},"products:clientInited":function(){s.trackEvent("google",["Tyres","Models","Show"]),s.trackEvent("yandex",["TYRES_CHOICE"])},"searchResults:pageShown":function(e){s.trackEvent("google",["Pagination_Control","Show",e]),k.query==n.getQuery()&&k.pages.push(e)},"*:queryChange":t.action("queryChange",function(e){(e||k.query!=n.getQuery())&&(k.query=n.getQuery(),k.pages.length&&(s.trackEvent("google",["Pagination_Control","Amount",a.uniq(k.pages).length]),k.pages=[]))}),"geoCard2:apartmentsShown":function(){s.trackEvent("google",["Flats_Adv","Build_card"]),s.trackEvent("googleBooklets",["Flats_Adv","Build_card"]),s.trackEvent("yandex",["FLATS_SHOW"])},"geoCard2:apartmentsHeaderClicked":function(){s.trackEvent("google",["Flats_Adv","Flats_card"]),s.trackEvent("googleBooklets",["Flats_Adv","Flats_card"]),s.trackEvent("yandex",["FLATS_OPEN"])},"*:apartmentClicked":function(e,t){s.trackEvent("google",["Flats_Adv","Offer_Click",e]),s.trackEvent("googleBooklets",["Flats_Adv","Offer_Click",e]),"geoCard2"==t?s.trackEvent("yandex",["BLDNG_FLTS_CLCK_"+e]):"apartmentsList"==t&&s.trackEvent("yandex",["CRD_FLTS_CLCK_"+e])},"*:apartmentViewed":function(e,t){s.trackEvent("google",["Flats_Adv","Offer_Show",e]),s.trackEvent("googleBooklets",["Flats_Adv","Offer_Show",e]),"geoCard2"==t?s.trackEvent("yandex",["BLDNG_FLTS_SHW_"+e]):"apartmentsList"==t&&s.trackEvent("yandex",["CRD_FLTS_SHW_"+e])},"firmCard:showApartmentsOnMapButtonClicked":function(){s.trackEvent("google",["Flats_Adv","Button_click"]),s.trackEvent("googleBooklets",["Flats_Adv","Button_click"])},"card:showApartmentsOnMapButtonClicked":function(){s.trackEvent("google",["Flats_Adv","Button_click"]),s.trackEvent("googleBooklets",["Flats_Adv","Button_click"])},"share:shareClicked":function(e){s.trackEvent("google",["Sharing",e])},"collectionsContainer:shareClicked":function(e){s.trackEvent("google",["Collections","Collection","Share","odnoklassniki"==e?1:0])},"favoritesContainer:shareClicked":function(e){s.trackEvent("google",["Collections","Card","Share","odnoklassniki"==e?1:0])},"share:widgetClicked":function(){s.trackEvent("google",["Sharing","Widget"])},"share:shareInited":function(){s.trackEvent("google",["Sharing","Open"])},"*:cityQuoraFormShow":function(e){s.trackEvent("google",["Ask","Form_show",e])},"*:cityQuoraFormSend":function(e){s.trackEvent("google",["Ask","Form_send",e])},"*:contextPromoButton":function(e,t){"cityQuora"==t&&s.trackEvent("google",["Ask","Button_"+e])}};return w},t.exports._args=["slot","$appState","$regionManager","$analytics","$featureSwitcher"]},{"./analytics/dictionaries":330,lodash:"lodash"}],329:[function(e,t,n){var a=e("lodash"),i=req("helpers/analytics"),o=req("helpers/contact");t.exports=function(e,t,n,r){function s(e,n,i){n=n||r.getPlace();var o=a.get(i,"ill")||!1;a.each(e,function(e){var a={place:n,ill:o};"object"==typeof e?(a.branch_id=e.id,a.url=e.url):a.branch_id=e,t.floors.isActive()&&(a.indoor=parseInt(t.get("floors").complexId,10)),r.trackEvent("impression",[a])})}function l(e){var n=i.bss.BC[e];return function(e,i){var o=a.get(i,"mute"),s=e.place||a.get(i,"analyticsPlace")||r.getPlace();if(!o&&n){var l=e.ill||a.get(e,"bss.ill")||a.get(i,"ill")||!1,c={url:e.reg_bc_url,branch_id:e.id,action:"reg_bc_event",eventid:n,place:s,ill:l};t.floors.isActive()&&(c.indoor=parseInt(t.get("floors").complexId,10)),r.trackEvent("apitracker",[c])}}}var c=l("FIRM_OPEN"),u=l("PHONE"),d=l("EMAIL"),h=l("MESSENGER"),p=l("MESSENGER_SKYPE"),f=l("BOOKLET"),m=l("SOCIAL"),g=l("SEND_EMAIL_TO_FIRM"),_={"geoCard2:firmListDisplayed":s,"map:firmAdDisplayed":a.partialRight(s,{ill:i.bss.ILL.ADS_ON_MAP}),"*:firmDisplayed":s,"firmCard:firmCardOpened":function(e,t){s([{id:e.id,url:e.reg_bc_url}],e.place,t),c(e,t)},"card:combinedCardOpened":function(e,t){s([{id:e.id,url:e.reg_bc_url}],e.place,t),c(e,t)},"*:firmClicked":c,"*:contactClicked":function(e,t){var n={place:t,reg_bc_url:e.reg_bc_url,ill:e.ill};o.isMessenger(e)?"skype"==e.type?p(n):h(n):o.isSocial(e)?m(n):o.isPhone(e)?u(n):"email"==e.type&&d(n)},"*:sendEmailClicked":l("CLICK_EMAIL_TO_FIRM"),"feedback:sentFeedback":function(e,t){"claimToFirm"==e&&g(t)},"*:addressClicked":l("ADDRESS"),"*:plusOneClicked":l("PLUS_ONE"),"*:firmReviewClicked":l("REVIEWS"),"*:bookletButtonClicked":function(e,t){t&&t.regBc&&f({place:t.analyticsPlace,reg_bc_url:t.regBc})},"firmCard:firmPhotoPreviewsClicked":l("PHOTO_GALLERY"),"card:firmPhotoPreviewsClicked":l("PHOTO_GALLERY"),"mediaCard:photosClicked":l("PHOTO_GALLERY"),"mediaCard:switchToPhotosTab":l("PHOTO_GALLERY"),"*:adsLinkClicked":l("ADS"),"*:ownerInfoClick":l("OWNER_INFO"),"*:routeSearchClicked":l("ROUTE"),"mediaCard:pathFinderEntranceClicked":l("ENTRANCE"),"firmCard:pathFinderEntranceClicked":l("ENTRANCE"),"card:pathFinderEntranceClickedWithBc":l("ENTRANCE"),"*:addToFavorites":l("FAVORITE"),"firmCard:scheduleOpened":l("TIME_TABLE"),"card:scheduleOpened":l("TIME_TABLE"),"*:branchesClick":l("FILIALS"),"firmCard:allContactsClicked":l("ALL_CONTACTS"),"card:allContactsClicked":l("ALL_CONTACTS"),"*:discountsButtonClicked":l("DISCOUNTS"),"mediaCard:mediaDiscountsClicked":l("DISCOUNTS"),"mediaCard:sendBySmsClicked":l("DISCOUNT_TO_SMS"),"firmCard:parkingsShown":l("PARKING_FIRM"),"card:parkingsShownWithBc":l("PARKING_FIRM"),"mediaAddress:nearStationSelected":l("NEARSTOP_FIRM"),"firmCard:nearStationSelected":l("NEARSTOP_FIRM"),"card:nearStationSelected":l("NEARSTOP_FIRM"),"firmCard:landmarkClicked":l("LANDMARK_FIRM"),"card:landmarkClicked":l("LANDMARK_FIRM"),"productCard:proposalsDisplayed":a.partialRight(s,null,{ill:2}),"*:showInFloorsClicked":l("SHOW_IN_FLOORS"),"searchResults:bssShowInFloorsClicked":function(){c({place:i.bss.PLACES.CATALOG}),l("SHOW_IN_FLOORS")},"floorsDashboard:parkingsShown":l("PARKING_FIRM"),"floorsDashboard:photosClicked":l("PHOTO_GALLERY"),"floorsDashboard:switchToPhotosTab":l("PHOTO_GALLERY"),"floorsDashboard:discountsClicked":l("DISCOUNTS")};return _},t.exports._args=["slot","$appState","$regionManager","$analytics"]},{lodash:"lodash"}],330:[function(e,t,n){var a=e("lodash"),i=a.reduce({"Поесть":[161,164,159,165,166,162,15791,51459,16677,58871,110376,110317,52248],"СТО":[9041],"Аптеки":[207],"Строительные материалы":[9777,281,284,283,10274,1196,293,503,540,768,578,579,16623,937,473,993,10902,549,7669,280,8740,25194,102043,15769,19119,69342,14390],"Автозапчасти":[430,1140],"Красота":[305,651,652,5603,13102,13726,14942,56759,13597,69989,110355,58858,67142,53986,70190,110352,110351,69488,110353],"Мед услуги":[222,4521,661,12211,4517,16863,218,4518,4537,4519,221,16876,4529,99224,10446,16869,16866,13641,219,13405,16864,110341,69271,53175,4534,49847,16867,13635,56064,53460,110340],"Фитнес":[267,268],"Гостиницы":[269],"Сантехника / Санфаянс":[291],"Окна":[288],"Грузоперевозки":[417,721,423,9741,419],"Мебель":[573,575,574,352,589,10566,593,53116],"Металлы":[615,487,504,616,834,656,71648,16539,56265,51065,13162,51214,55718,52269]},function(e,t,n){return a.reduce(t,function(e,t){return e[t]=n,e},e)},{});t.exports.mapDisoveryRubricIds=i},{lodash:"lodash"}],331:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/favorites");t.exports=function(e,t,n,o,r,s,l){function c(t){e.modules.favoritesTooltip&&e.modules.favoritesTooltip.dispose();var n=e.init("favoritesTooltip",{type:"overflowRemote",tooltipData:{sourceElement:t}});e.block().append(n.render()),n.bindEvents(),r.trackEvent("google",["Favorites","Tooltip_Show"]),r.trackEvent("google",["Favorites","Tooltip_Full","Authorized"])}function u(n,a){var o="favoritesItem"==e.sender.type,s=i.rawItemIdent(n);t.removeFavoriteById(s.id,!o).then(function(){a&&a.parentType?r.trackEvent("google",[f(a.parentType),"Favorites","Remove"]):r.trackEvent("google",["Favorites","Remove"]),e.broadcast("*:favoriteRemoved",s.id,{fromSuggest:n._sentFromSuggestedFavs}),e.broadcast("map:clearMarker",n)})}function d(n){var a=i.rawItemIdent(n);t.restoreFavoriteById(a.id).then(function(){r.trackEvent("google",["Favorites","Return"]),e.broadcast("*:favoriteRestored",a.id)})}function h(e){t.updateTitle(e.id,e.title,function(){r.trackEvent("google",["Favorites","Edit",e.item.object_type||""])})}function p(e){var a=e||{};"favoritesWidget"===a.moduleName&&t.afterAuth(function(){t.widgetInit(a.entity).then(function(){return t.isFull()?void c(a.element):void t.widgetComplicatedAddToCollection(a.entity)})}),n.showAuth({authType:"login",title:l._t("Авторизуйтесь, чтобы продолжить работу с избранным")}),n.push()}function f(e){switch(e){case"firmCard":return"Firm_Card_event";case"card":return"Mixed_Card_event";case"metroCard":case"stopCard":return"Stop_Card_event";case"routeCard":return"Route_Card_event";case"geoCard2":return"Build_Card_event";case"mediaCard":case"mediaCardHeader":return"Media_Card_event"}return"Favorites"}return{"*:needsAuth":p,"tools:favorites":function(){n.floors.isInitialFloorState()&&n.floors.removeInitialFloorModifier(),s.get("favorites.collections")?e.action("showFrame")("collections"):t.getFavoritesList().then(function(t){e.action("showFrame")(0==t.length?"favoritesEmpty":"favorites")})},"favoritesContainer:click":function(t){var n=a.pick(a.get(t,"item.point"),"lat","lon"),i=a.get(t,"item.objectData");i&&(n.id=i.id,n.type=i.type,n.subtype=i.subtype),e.action("showCardByState")(n)},"favoritesContainer:highlight":function(t){e.broadcast("map:highlightFavorites",t)},"favoritesContainer:unhighlight":function(t){e.broadcast("map:unhighlightFavorites",t)},"favoritesWidget:favorite":function(t){e.broadcast("*:favoriteAdded",i.rawItemIdent(t).id,{fromSuggest:t._sentFromSuggestedFavs})},"favoritesButton:unfavorite":u,"favoritesWidget:showFavoritesFullTooltip":c,"favoritesItem:delete":u,"favoritesItem:restore":d,"favoritesItem:update":h,"auth:close":function(){t.afterAuthReset()},"frame:moverClick":function(){e.broadcast("favoritesTooltip:close")},"favoritesTooltip:showAuthPopup":function(){var e=t.isFull?"Full":"Free";r.trackEvent("google",["Favorites","Tooltip_Click",e])},"favoritesTooltip:close":function(){r.trackEvent("google",["Favorites","Tooltip_Close"])},"favoritesList:open":function(){r.trackEvent("google",["Favorites","Open"])},"favoritesList:closePanel":function(){r.trackEvent("google",["Favorites","Close"])}}},t.exports._args=["slot","$favorites","$appState","$authorization","$analytics","$featureSwitcher","$i18n"]},{lodash:"lodash"}],332:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/firm");t.exports=function(e,t,n,o,r,s){function l(){d&&(clearTimeout(d),d=null)}function c(n){n!=h&&(h=n,d=e.setTimeout(function(){if(n==h){var a={is_poi:"true"},c=r.getFromPoiHash(n+"_floors");c?a.hash=c:e.bssContext.startNewChain({pr:"poi"});var u=t.get("floors").complexId;o.firms.profile(n,i.defaultProfileParams(a),function(e,t){if(e)return void l();if(d){var n=t&&t._hash,a=t&&t.id,i=t&&t.reg_bc_url;r.getFromPoiHash(a+"_floors")||(r.setNewPoiHash(a+"_floors",n),s.processQueue(),r.trackEvent("impression",[{isPoi:!0,url:i,place:r.PLACE_MAP,indoor:parseInt(u,10)}])),l()}})}},u["impression.hoverTimeout"]))}var u=e.config.group("analytics"),d=null,h=null,p={"*:changeRegion":function(){t.floors.isActive()&&(t.floors.exit(),t.replace())},"*:search":function(){t.floors.isActive()&&t.floors.removeInitialFloorModifier()},"*:floors":function(o,r){if(o){t.floors.isActive()&&t.floors.exit();var s,l=a.isString(o)?o:o.id,c=a.get(r,"branchId");c&&(s=i.getStaticId(c));var u,d=a.get(r,"isOpenedFromPoi");n.hasBranch(s)&&(u=c.split("_")[1],
c=null,s=null),t.floors.enter(l,{bssHash:u,initialBranchId:s,isOpenedFromPoi:d}),c&&(t.floors.removeInitialFloorModifier(),e.action("showFrame")("firm",{id:c,floors:!0})),t.push()}},"floors:closeStarted":function(){e.modules.floorsDashboard&&e.modules.floorsDashboard.dispose()},"floors:closeAnimationFinished":function(){this.sender.instance.dispose(),t.floors.isActive()||(e.mod({floors:null}),e.broadcast("*:exitFloors"))},"floors:initFailed":function(){t.floors.isActive()||(e.mod({floors:null}),e.broadcast("*:exitFloors"))},"floorsResults:searchResultsReady":function(){e.broadcast("searchBar:setLoading",!1)},"floorsResults:highlight":function(t){e.setTimeout(function(){e.broadcast("floors:highlight",t),e.broadcast("floors:focusOnFirms",t.map(function(e){return e.id}))},100)},"floorsResults:clearMap":function(){e.broadcast("floors:unhighlight")},"floors:roomClicked":function(n){var a=n.firmIds;a.length&&(t.floors.removeInitialFloorModifier(),1===a.length?(e.action("showFrame")("firm",{analyticsPlace:r.PLACE_MAP,is_poi:!0,id:a[0],floors:!0}),r.trackEvent("googleFloors",["Firm_Card_Open","Map"])):a.length>1&&e.action("showFrame")("profiles",{profiles:a.join(","),floors:!0}),e.ua().isMobile&&e.setTimeout(function(){e.broadcast("floors:focusOnFirms",a)},500))},"floors:tooltipShown":function(e){"entity"!=e.type&&c(e.ids[0])},"floors:tooltipHidden":function(){h=null,l()},"floors:markerClicked":function(n){n.isBranch&&(t.floors.removeInitialFloorModifier(),e.action("showFrame")("firm",{id:n.firmId,floors:!0}),e.ua().isMobile&&e.setTimeout(function(){e.broadcast("floors:focusOnFirms",[n.firmId])},500),r.trackEvent("googleFloors",["Firm_Card_Open","Map"]))},"miniCard:hovered":function(t){e.broadcast("floors:hoverRoom",i.getStaticId(t))},"miniCard:unhovered":function(t){e.broadcast("floors:unhoverRoom",i.getStaticId(t))},"miniCard:clicked":function(t){e.setTimeout(function(){e.broadcast("floors:focusOnFirms",[i.getStaticId(t.id)])},500)},"floors:firmsHovered":function(t){e.broadcast("miniCard:highlight",t)},"floors:firmsUnhovered":function(){e.broadcast("miniCard:unselect")},"floors:mapInteractionHappened":function(){var e=t.get("floorsDashboard/minimized");e||(t.set("floorsDashboard/minimized",!e),t.replace())},"floorsDashboard:close":function(){t.set("floorsDashboard/closed",!0),t.push()},"floorsDashboard:minimized":function(e){t.set("floorsDashboard/minimized",e),t.push()},"floorsDashboard:clickAddress":function(){t.floors.exit()},"firmCard:floorNameSelected":function(t){e.broadcast("floors:focus",i.getStaticId(t.id))},"card:floorNameSelected":function(t){e.broadcast("floors:focus",i.getStaticId(t.id))},"floorsDashboard:parkingsShown":function(n,i){var o;t.floors.exit(),i.bssContext&&i.bssContext.continueChain(),o=e.action("showFrame")("firm",{id:n.id,isParkingsFromFloors:!0,is_poi:a.get(i,"isPoi")}),o&&t.push()},"*:firmListClicked":function(){t.floors.removeInitialFloorModifier(),e.action("showFrame")("flFirmList",{floors:!0})},"floors:loadingIsLong":function(){e.mod({floorsPreloaderShown:!0})},"floors:longLoadingEnded":function(){e.mod({floorsPreloaderShown:!1})},"floors:zoomExit":function(n){r.trackEvent("googleFloors",["Control","Exit","Zoom"]),e.broadcast("map:disableScrollWheelZoom"),e.setTimeout(function(){e.broadcast("map:enableScrollWheelZoom")},1500),t.changeCenter(n.centroid.slice().reverse()),t.changeZoom(17),t.floors.exit(),t.push()}};return p},t.exports._args=["slot","$appState","$floorsManager","$dgApi","$analytics","$bssContext"]},{lodash:"lodash"}],333:[function(e,t,n){var a=e("lodash");t.exports=function(e,t,n){var i,o=!1;e.action("rotate",function(n){var a=n.startAngle||t.getAngle()||0;if(!(o||n["default"]&&0==a)){var i,r=e.config.rotateStepDegree;n["default"]?i=0:(a=Math.round(a/r)*r,i=n.cw?a+r:a-r),o=!0,e.broadcast("map:rotate",i)}});var r={"*:rotate":e.action("rotate"),"*:refreshRotate":function(t){e.broadcast("rotate:rotateToAngle",t)},"map:rotateStop":function(e){o=!1,t.setAngle(e),t.replace()},"searchBar:logoClicked":function(){e.broadcast("suggest:setText");var n=e.broadcast("map:defaultPosition"),a=t.get("city");t.assign(n),t.set("city",a),t.push()},"stopCard:mapDataReady":function(e){i=e.id},"stopCard:clearMap":function(){i=null},"map:markerHovered":function(t){e.broadcast("map:setCursor","pointer");var n=["station"],i=t.ids;i&&i.length&&a.contains(n,t.objectType)&&e.broadcast("map:highlightGeo",i[0])},"map:markerUnhovered":function(t){e.broadcast("map:setCursor","auto");var n=t.ids;n&&n.length&&(i&&i==n[0]||e.broadcast("map:unhighlightGeo",n[0]))},"*:mapElemHovered":function(){e.broadcast("map:setCursor","pointer")},"*:mapElemUnhovered":function(){e.broadcast("map:setCursor","auto")},"updateApp:updateButtonClicked":function(){n.installApplication()},"updateApp:closeClicked":function(){t.del("updateApp"),t.push()},"*:framesSizeChanged":function(){e.broadcast("map:setViewportLimits")},"citySelect2Region:setTooltip":function(t){e.broadcast("tooltip:isVisible")?e.broadcast("tooltip:setDisplay"):t&&e.broadcast("tooltip:show",{data:t.hint,pixel:{x:t.x,y:t.y},type:"hint"})},"citySelect2Region:setTooltipPosition":function(t){e.broadcast("tooltip:move",t)}};return r},t.exports._args=["slot","$appState","$appUpdater"]},{lodash:"lodash"}],334:[function(e,t,n){var a=e("lodash");t.exports=function(t){var n=t.invoke(e("./main"),[t]),i=t.invoke(e("./map"),[t]),o=t.invoke(e("./analytic"),[t]),r=t.invoke(e("./analyticBss"),[t]),s=t.invoke(e("./meta"),[t]),l=t.invoke(e("./phone"),[t]),c=t.invoke(e("./favorites"),[t]),u=t.invoke(e("./floors"),[t]),d=[r,n,i,s,c,o];if(t.requireComponent("featureSwitcher").get("floors")&&d.push(u),t.ua().isPhone&&d.push(l),t.isGrym){var h=e("./grym");d.push(h(t))}return a.reduce(d,t.mergeActions,{})}},{"./analytic":328,"./analyticBss":329,"./favorites":331,"./floors":332,"./grym":333,"./main":335,"./map":336,"./meta":337,"./phone":338,lodash:"lodash"}],335:[function(e,t,n){var a=e("lodash"),i=e("deep-equal"),o=req("helpers/weather");t.exports=function(e,t,n,r,s,l,c,u,d,h,p,f,m,g,_,v,y){function b(e,t){function n(){return t.instance["interface"]&&t.instance["interface"].getAnalyticsPlace?t.instance["interface"].getAnalyticsPlace():null}if(t){var a=l.PLACE_CATALOG,i=n(),o={find:{dashboard:a,searchBar:a,rubricsList:a,geoCard:i,firmCard:a,card:a,floorsDashboard:a},firm:{miniCard:i,geoCard:i,recoveryAds:a,productCard:a,mediaRecoveryAds:a},filials:{miniCard:i,firmCard:i,card:i},geo:{miniCard:a},inbuild:{geoCard:i},servicing:{geoCard:i}};o[e]&&o[e][t.type]&&l.setPlace(o[e][t.type])}}function k(t,n){var a,i=e.sender,o=i&&i.type;return b(t,i),f.panels.show(t,n,o)?(n&&n.isReplaceNeeded?f.replace():f.push(),a=!1):(f.get("dataViewer/minimized")&&(f.dataViewer.maximize(),f.push()),e.broadcast("dataViewer:blinkLastFrame"),a=!0),a}function w(t){if(f.floors.isActive()){var n=g.getByComplexId(f.get("floors").complexId).buildings,i=a.get(t,"address.building_id");a.includes(n,i)?t.floors=!0:(t.floors=!1,f.floors.exit())}var o=a.pick(t,"id","media","floors","bss","parkings","is_poi","group","lon","lat","initedId"),r=t.isDiscovery;e.isClient&&(window.innerWidth||1e3)<876&&(r=!1),o.booked=r,k("firm",o)}function x(e){e=e||{},f.getRouteSearchType()||(f.setRouteSearchType("bus"),f.replace());var t=f.getRouteSearchType(),n=h.get("ppnotTime")&&{time:f.get("ppnotTime")},i=a.assign({to:f.get("to"),from:f.get("from"),rsType:t,waypoints:f.getWaypoints()},n);k("routeSearch",i);var o="push"==e.stateMethod?"push":"replace";f[o](),l.trackEvent("google",["RouteSearch","Search_panel",t+"_search"])}function C(t,n){var o;a.each(["to","from"],function(e){if(e in t){var n=a.cloneDeep(t[e]);n&&delete n.context,i(n,f.get(e))||(c.setFromTo(e,t[e]),o=!0)}}),o?f.push():x(),n&&D(!0),e.broadcast("searchBar:setLoading",!1),e.broadcast("map:switchRsMode",!1)}function L(e){k("geo",a.pick(e,"id","lon","lat","group"))}function I(e,t){var n="stop",i=e.id;"station_entrance"===e.type?n="stationEntrance":"metro"!==e.subtype&&"light_metro"!==e.subtype||(n="station","station_platform"===e.type&&(i=e.station_id));var o={id:i,platforms:e.platforms};if(t){var r=a.pick(t,"type","point","platforms","geometry");o.extraObjects=[r]}k(n,o)}function T(e){k("route",a.pick(e,"id","activePlatformId"))}function S(e){var t="platform";"metro"!==e.subtype&&"light_metro"!==e.subtype||(t="stationPlatform"),k(t,{platformId:e.id})}function E(e){var t=a.find(e.group,{type:"branch"});t?w({id:t.id,lon:e.lon,lat:e.lat,initedId:e.initedId}):"branch"==e.type?w(e):"station"==e.type||"station_entrance"==e.type?I(e):"station_platform"==e.type?S(e):"route"==e.type?T(e):L(e)}function P(e,t,n){f.enterGlobal(e,t,n),f.replace()}function j(){e.mod({map:null})}function M(){e.mod({map:"disabled"})}function A(e){be={},e&&("function"==typeof e.success&&(be.success=e.success),"function"==typeof e.error&&(be.error=e.error)),f.set("p2d",{state:"bind"}),f.push()}function D(t){e.broadcast("*:updateScroll"),f.setRouteTab(t)}function R(t){t=t||{},e.mod({print:!0,waitForPrint:!0}),e.modules.print&&e.modules.print.dispose();var n,a=e.modules.dataViewer;if(n={"static":"",layout:"full"},a){var i=a["interface"].getPrintableModule();i&&(n=i["interface"].getPrintData.call(i))}$.when(n).then(function(e){N(e,t)})}function N(t,n){l.trackEvent("google",["Print",n.analyticsAction,t.analyticsLabel||"Map"]);var a=e.init("print",t);e.element("print").append(a.render()),a.bindEvents()}function B(t,n){var a=n?n:"frame[:last]",i=e.broadcast(a+":getShareContent",t);return i&&i.title&&(i.title=i.title.replace(/&nbsp;/g," ")),i}function F(t,n){e.broadcast("map:showEntrance",t,n)}function O(){p.firms.search(d.getSettings().entrancesPromo.firmQuery,function(t,n){if(!t){var i=a.find(n.data,function(e){return"branch"==e.type&&e.address});i&&(e.onTransitionEnd(function(){e.broadcast("firmCard:pathfinderEntrance")}),w(i))}})}function z(e,t){f.showFeedback({feedbackType:t||"dataError",filialId:e.id,filialName:e.name,filialAddress:e.address_name,firmId:e.org&&e.org.id,bss:a.pick(e,"reg_bc_url","bss")}),f.push()}function q(t,n){f.floors.isActive()&&f.floors.removeInitialFloorModifier(),t&&t.name&&(b("find",e.sender),e.broadcast("searchBar:setLoading",!0),a.has(t,"filters")?f.search({rubric:{name:t.name,filters:t.filters}}):a.has(t,"id")?f.search({rubric:{text:t.name,id:t.id}}):f.search({query:t.name}),n&&f[n](),f.push())}function U(e,t){t&&a.extend(e,{photosType:"single"}),k("gallery",e)}function H(e){return h.get("photosUploader")&&a.extend(e,{showPhotosUploader:!0}),e}function G(e,t){t&&a.extend(e,{photosType:"single"}),f.set("photos",e),f.push()}function W(){l.trackEvent("google",["Interface","Iconify"]),f.dataViewer.minimize(),f.push()}function V(e){f.dataViewer.maximize(),e?f.replace():f.push()}function Z(e){var t=a.pick(e,"id","photoId","albumName","photosType");return"common"==t.albumName&&delete t.albumName,t.photosType&&"geo"===t.photosType||(t.photosType="firm"),t}function Y(t,n){e.element("side").mod({resize:!0}),e.element("sideOverlay").css("width",n).mod({visible:!0})}function K(t,n){var a=e.config["mediaCard.resize"].hideOverlayWidth;n=t?n:a,e.element("sideOverlay").css("width",n)}function X(t){return e.element("side").mod({resize:!1}),e.element("sideOverlay").css("width","").mod({visible:!1}),-1===t?W():(l.trackEvent("google",["Search","Media_Resize",t]),e.broadcast("*:setColumnsLength",t),e.broadcast("*:updateScroll"),null)}function J(e){f.search(e),f.push()}function Q(t){"media"===t&&(e.broadcast("mediaResults:checkMaximize"),f.closeMediaCard(),f.push()),"products"===t&&(f.closeProductCard(),f.push())}function ee(){return l.trackEvent("google",["Extension","ExtPromoClick","text_label_1"]),"2gis.ru"==window.location.hostname&&"undefined"!=typeof chrome&&chrome.webstore&&chrome.webstore.install?(chrome.webstore.install(d._config("extension.chromeLink"),function(){l.trackEvent("google",["Extension","ExtPromoInstall","text_label_1"])},function(){return!1}),!1):null}function te(t,n,i){y.getRecommendedList(t).then(function(e){var t=a.get(e[0],"id");t&&(n&&h.get(i)&&ae("Dashboard",n),k("favorites",{collectionID:t}))})["catch"](function(n){e.sendError("collectionsApi could not load theme: "+t)})}function ne(t){var n=t.clickParams;if(n){if(n.route&&C(n.route,!0),n.card&&q(n.card,n.appStateAction),n.firm&&k("firm",{id:n.firm.id}),n.booklet&&k("booklet",{bookletId:n.booklet}),n.product&&k("products",{productType:n.product}),n.floors&&k("floorList"),t.showFrame){var a=t.showFrame;k(a.type,a.data)}if(n.mapCenter){var i=n.mapCenter;e.broadcast("map:setView",i.lonLat,i.zoom)}if(n.extraLayerName){var o=u.getRegion().code+"_"+n.extraLayerName;f.extraLayers.hasLayer(o)||e.broadcast("extraLayers:listItemClick",o)}}else switch(t.name){case"weather":k("weather");break;case"push2dial":A();break;case"entrances":O();break;case"extension":ee();break;case"presents2015":ae("Dashboard","presents2015");break;case"award2015":ae("Dashboard","award2015");break;case"9may":ae("Dashboard","9may");break;case"euro2016":te("euro2016","summer2016","summer");break;case"summer2016":ae("Dashboard","summer2016")}}function ae(e,t){var n={presents2015:"Newyear",award2015:"Awards_2015","9may":"9may",summer2016:"summer2016"};f.panels.clear(),f.floors.removeInitialFloorModifier(),f.panels.add(t),f.push(),e&&l.trackEvent("google",[n[t]||"Unknown","Open",e])}function ie(){f.closeFeedback(),f.push()}function oe(t){e.broadcast("extraLayers:trackMarkerClick",t.layerId);var n=t.data.properties;k("extraLayersCard",{layerId:t.layerId,featureId:n&&n.featureId})}function re(e){var t=e.data||{};k("apartments",{house:t.building_id,orgId:t.firmId})}function se(e){var t=g.getByBranchId(e.ids[0]);f.floors.enter(a.get(t,"id")),f.push()}function le(e,t){switch(t){case"station_platform":case"station_entrance":case"station":case"transport":"station_platform"==a.get(e,"data.type")?S(e.data):a.get(e,"data.byPlatform")?S({subtype:a.get(e,"data.subtype"),id:a.get(e,"data.platforms[0].id")}):I(e.data);break;case"point":case"geo":a.defaults(e.data,e.lonlat),L(e.data)}}function ce(t,n){f.floors.isActive()&&f.floors.exit(),f.get("routeTab")||D(!0),c.setFromTo(t,n),f.push(),e.broadcast("map:switchRsMode",!1),f.get("from")&&f.get("to")&&!f.panels.find("routeSearch")&&x({stateMethod:"push"})}function ue(t,n){if(e.modules.photosUploaderTooltip&&e.modules.photosUploaderTooltip.dispose(),h.get("photosUploader")){n=n||{};var a=e.init("photosUploaderTooltip",{type:t,tooltipData:n});e.block().append(a.render()),a.bindEvents()}}function de(){v.off("loginComplete",de),e.broadcast("*:openSendEmailForm")}function he(e){return v.isAuthorized()?void z(e,"claimToFirm"):(v.off("loginComplete",de),v.on("loginComplete",de),f.showAuth({authType:"sendEmailLogin"}),void f.push())}function pe(t){f.floors.isActive()&&(f.floors.exit(),f.replace(),e.action("showFrame")("firm",{id:t.id,isReplaceNeeded:!0})),e.broadcast("map:showEntrance",t)}function fe(t,n){"noResults"==a.get(n,"reason")&&404!=a.get(n,"code")&&e.sendError("frame failed: "+t,n)}var me,ge=req("helpers/panels"),_e=req("helpers/firm"),ve=req("helpers/mediaCard"),ye=req("helpers/filters"),be={};return e.action("showFrame",k),e.action("showCardByState",E),e.action("showRouteSearchCard",x),e.action("print",R),e.action("teaserClick",ne),me={"searchBar:search":function(t){b("find",e.sender),f.search(t),f.setActiveTab(!1),f.push()},"searchBar:back":function(){f.panels.removeLast(),f.push()},"*:shutOffRsMode":function(){e.broadcast("map:switchRsMode",!1)},"searchBar:typeChanged":function(e){if(e){var t=f.getRouteSearchType(),n=req("helpers/routeSearch");n.changePanelType(t,e)&&f.setWaypoints(),f.setRouteSearchType(e),f.push()}},"*:pathActionClicked":function(e,t){l.trackEvent("google",["RouteSearch","Enter","card_"+e]),l.trackEvent("yandex",["ROUTE_BUTTON_CLICK"]),ce(e,a.assign({},t,{context:"card"}))},"fromTo:clicked":ce,"searchBar:modeChanged":function(t){var n="rs"==t;D(n),e.broadcast("map:switchRsMode",n),n?e.broadcast("map:setRsKeypoint",{from:f.get("from"),to:f.get("to")}):e.broadcast("map:clearRsKeypoint"),f.push()},"searchBar:rsBarClicked":function(){e.broadcast("dataViewer:setDestinationFromLastFrame")},"searchBar:rsSubmit":C,"*:showProviderBooklet":function(e){e=a.defaults(e||{},{bookletId:"providers"}),f.panels.add("booklet",e),f.push()},"searchResults:providersAggregatorButtonClicked":function(e){var t={};e.get("buildingId")&&(t.geoid=e.get("buildingId")),t=a.defaults(t,{bookletId:"providers"}),f.panels.add("booklet",t),f.push()},"*:originalRubricNameFound":function(t){e.broadcast("searchBar:setQuery",t)},"specialistsMiniCard:callSpecialists":function(e){k("specialists",e)},"*:showFloorList":function(e){k("floorList",e)},"floorList:clientNotSupported":function(e){f.panels.remove("floorList"),k("noResults",e)},"routeResults:setSuggestColors":function(t){e.broadcast("searchBar:setColors",t)},"noResults:clientInit":function(){e.broadcast("searchBar:cleanColors")},"autoResults:clientInit":function(){e.broadcast("searchBar:cleanColors")},"noResults:linkBusClicked":function(){f.setRouteSearchType("bus"),f.push()},"dashboard:rendered":function(){e.broadcast("dashboard:setMode",e.mod().dashboard)},"dashboard:cityLinkClicked":function(t){if(h.get("globalMap")){var n=u.getRegion();P(!0,e.config["globalMap.citySelect.zoom"],n.default_pos)}else f.toggle("citySelect",!t),f.push()},"googleTagAds:mouseup":function(){e.broadcast("map:stopDrag")},"dashboard:closeClicked":function(e){e?f.del("citySelect"):f.toggleDashboard("hidden"),f.push()},"citySelect2:countryFilterChanged":function(){e.broadcast("cityFilter:clearInput",{force:!0})},"citySelect2Region:downloadRegionClicked":function(e){u.downloadRegion(e)},"citySelect2:regionMoved":function(){e.broadcast("cityFilter:clearInput",{force:!0})},"citySelect2Region:removeRegionClicked":function(e){u.deleteRegion(e)},"citySelect2Region:stopDownloadingRegionClicked":function(e,t){t?u.stopDownloadingRegion(e):u.deleteRegion(e)},"citySelectPhone:hid":function(){e.broadcast("tools:showCity")},"cityFilter:inputChanged":function(t,n){e.broadcast("citySelect2:filterRegions",t,n)},"*:firmsInBuildClicked":function(e,t){t?w({id:t}):k("inbuild",{house:e})},"geoCard2:showServicingFirmsInBuild":function(e){k("servicing",{house:e})},"card:showServicingFirmsInBuild":function(e){k("servicing",{house:e})},"geoCard2:showApartments":function(e){k("apartments",{house:e})},"firmCard:showApartmentsOnMapButtonClicked":function(e){k("apartmentsMap",{firmId:e})},"card:showApartmentsOnMapButtonClicked":function(e){k("apartmentsMap",{firmId:e})},"proposals:proposalBranchClicked":function(e){k("firm",{id:e})},"*:showProvidersInBuilding":function(e,t){k("servicing",{house:e,group:"internet",address:t})},"geoCard2:searchNear":function(){},"mixedResults:searchResultsReady":function(){e.broadcast("searchBar:setLoading",!1)},"ruler:clicked":function(e){f.ruler(e),f.push()},"zoom:in":function(){e.broadcast("map:zoomIn")},"zoom:out":function(){e.broadcast("map:zoomOut")},"congestion:traffic":function(t){e.broadcast("map:traffic",t)},"congestion:clicked":function(e){var t=!e;f.setTraffic(t),f.push()},"geoLocation:disableMapCentering":function(t){e.broadcast("map:disableMapCentering",t)},"geoLocation:updatedGeoPosition":function(t,n){e.broadcast("map:updateGeoPosition",t,n)},"geoLocation:enableGeolocation":function(t){e.broadcast("map:enableGeolocation",t)},"geoLocation:disableGeolocation":function(t){e.broadcast("map:disableGeolocation",t)},"map:geoLocationFound":function(t){e.broadcast("geoLocation:locationFound",t)},"map:geoLocationError":function(t){e.broadcast("geoLocation:locationError",t)},"trafficControl:on":function(){e.broadcast("map:trafficControlOn")},"trafficControl:off":function(){e.broadcast("map:trafficControlOff")},"*:firmSelected":function(t){if(f.floors.isActive()&&f.floors.exit(),t.is_poi){var n=l.getFromPoiHash(t.id);n||e.bssContext.startNewChain({pr:"poi"})}w(t),e.broadcast("miniCard:unselect")},"ads:itemSelected":w,"firmCard:advSelected":w,"card:advSelected":w,"firmCard:bugReportLinkClicked":z,"card:bugReportLinkClicked":z,"*:sendEmailLinkClicked":he,"*:openSendEmailForm":he,"firmCard:proposalsCoverageClicked":function(e){k("proposalsMap",{branchId:e})},"card:proposalsCoverageClicked":function(e){k("proposalsMap",{branchId:e})},"mediaCard:bugReportLinkClicked":z,"floorsDashboard:bugReportLinkClicked":z,"*:mediaResizeStart":function(t){m.resize(t,a.extend({onStart:Y,onChange:K,onEnd:X},e.config["mediaCard.resize"]))},"*:geoSelected":L,"*:openCard":E,"*:routeSelected":function(e){T(e)},"booklet:bookletRubricClicked":function(e){k("rubricsNear",e)},"booklet:mapClicked":function(t){t.filials_ids.length>1?k("filials",{bookletId:t.bookletId,firmId:t.firm_id}):k("firm",{id:t.filials_ids[0]}),e.broadcast("map:showEntrance",{type:"branch",id:t.filials_ids[0],point:t.geo})},"bookletProviders:connect":function(e){a.extend(e,{template:"bookletPopup"}),k("providerRequestForm",e)},"providerTariffs:connect":function(e){f.showProviderRequestForm(e),f.push()},"*:allRubricsClicked":function(){k("rubrics")},"*:rubricsListClicked":function(e){k("subrubrics",e)},"*:rubricClicked":function(e){q(e)},"firmCard:addressSelected":pe,"card:addressSelected":pe,"reviewsCard:filialAddressClicked":function(e){f.floors.isActive()&&(f.floors.exit(),f.push()),F(e)},"firmCard:takeMapOptions":F,"card:takeMapOptions":F,"geoCard2:takeMapOptions":F,"*:firmDetails":w,"*:showFirmList":function(t,n){var i=ye.getFiltersCount(e.searchContext.getFilters()),o=f.panels.findLastStoppingMap(),r=!i&&o&&!a.contains(["rubricsNear","filials"],o.type);if(h.get("trueSearchBuilding")&&r){var s=a.omit(o,"panelId","searchId","page");k(o.type,a.extend({house:t},s))}else n=n.length<=50?n:a.map(n,function(e){return e.split("_")[0]}),k("profiles",{profiles:n.join(",")})},"*:showNoResults":function(){k("noResults")},"firmCard:allReviewsClicked":function(e){k("reviews",a.pick(e,"id"))},"firmCard:ownerInfoClick":function(e){k("article",{id:e.id})},"card:allReviewsClicked":function(e){k("reviews",a.pick(e,"id"))},"card:ownerInfoClick":function(e){k("article",{id:e.id})},"*:pathFinderEntranceClicked":function(t,n){var i=a.defaults(n||{},{movingType:"onEntranceFocus"});e.broadcast("map:showEntrance",t,i),e.ua().isPhone&&!i.onInit&&(f.dataViewer.minimize(),f.push())},"map:minZoomLevelReached":function(){e.broadcast("zoom:minZoomLevel")},"map:maxZoomLevelReached":function(){e.broadcast("zoom:maxZoomLevel")},"map:intermediateZoomLevelReached":function(){e.broadcast("zoom:intermediateZoomLevel")},"frame:close":function(t){if(t){switch(t.type){case"forecast":var n=t["interface"].getModuleBirthTime();l.trackEvent("google",["Weather","Close",o.getForecastLifeTime(n)]);break;case"gallery":l.trackEvent("google",["Photos","Close_Gallery","X"]),e.broadcast("gallery:doNotTrackDispose");break;case"newYearGifts":l.trackEvent("google",["Newyear","Close"]);break;case"victory":l.trackEvent("google",["9may","Close",new Date])}var a=f.panels.last();a&&("filters"==a.type&&"filters"!=t.type||"invisibleFrame"==ge.getFrameType(a.type))&&f.panels.removeLast(),"noResults"==a.type&&f.get("isFloorsWarning")&&f.del("isFloorsWarning")}e.mod({full:null,wide:null}),f.panels.removeLast(),f.push()},"frame:glassClicked":function(t){e.mod({full:null});var n=f.getState().panels||[];f.push(function(){0==t.id&&n.length>2?f.panels.removeAllButFirst():f.panels.removeLast()})},"photos:closed":function(){e.broadcast("booklet:activateContent")},"*:wideWidth":function(){e.mod({wide:!0,full:null}),e.broadcast("extras:hidden",!1),f.dataViewer.setSize("wideWidth")},"*:fullScreen":function(){e.mod({wide:null,full:!0}),e.broadcast("extras:hidden",!0),f.dataViewer.setSize("fullScreen")},"*:fullWidth":function(){e.mod({wide:null,full:!0}),e.broadcast("extras:hidden",!1),f.dataViewer.setSize("fullWidth")},"*:defaultWidth":function(){e.mod({wide:null,full:null}),e.broadcast("extras:hidden",!1),f.dataViewer.setSize("defaultWidth")},"*:minimizeViewer":W,"*:maximizeViewer":V,"dataViewer:summaryClick":function(){e.broadcast("frame:hideMaximizeBtn"),f.dataViewer.maximize(),f.get("citySelect")&&f.del("citySelect"),f.push()},"dataViewer:closeAllPanels":function(){f.panels.clear(),f.push()},"dataViewer:framesFailed":function(t){a.each(t,function(e){var t=e.frame.conf;f.panels.removeBy("panelId",t.panelId)}),f.actualize("panels"),a.each(t,function(e){if("oneResult"==e.reason){var t=e.query,n=e.model;f.replace(function(){t&&f.set("query",{query:t}),ve.isMediaFirm(h,u,n)&&(n.media=!0),E(n)})}}),e.action("updateModifiers")(f)},"dataViewer:changePanels":function(){e.broadcast("map:superizeMarkers")},"*:extendedSearchClicked":a.debounce(function(e){var t=f.panels.last();t&&"filters"==t.type?f.panels.removeLast():(f.panels.show("filters"),e&&e.fromButton?l.trackEvent("google",["Search","After","ItemSearch"]):l.trackEvent("google",["Search","After","Advanced_Search"]),l.trackEvent("inspectlet",["Filter"])),f.push()},200,!0),"extras:feedbackModeSet":function(){f.showFeedback({feedbackType:"app"}),f.push()},"extras:popupOpened":function(){e.broadcast("promoTooltip:disablePromos")},"extras:popupClosed":function(){e.broadcast("promoTooltip:enablePromos")},"dataViewer:minimize":function(t){e.mod({minimized:t})},"extras:shareModeSet":function(){f.showShare(),f.push()},"*:showEvent":function(e,t){ae(e,t)},"newYearGifts:showPopup":function(e){f.showGiftPopup(e),f.push()},"newYearGiftsPopup:closed":function(){f.removePresentId(),f.removeGiftPopup(),f.push()},"extras:downloadModeSet":function(){f.set("download",!0),f.push()},"download:close":function(){f.set("download",null),f.push()},"extras:vertical":function(t){e.registry("feedback").pos=t?"side":"normal",e.broadcast("feedback:reposition",e.registry.get("feedback").pos),e.registry("download").pos=t?"side":"normal",e.broadcast("download:reposition",e.registry.get("download").pos),e.registry("share").pos=t?"side":"normal",e.broadcast("share:reposition",e.registry.get("share").pos),e.broadcast("promoTooltip:vertical",t)},"feedback:close":function(){ie()},"feedback:openChatLinkClicked":function(){e.modules.chat||e.init("chat",{},function(t,n){t||(e.block().append(n.render()),n.bindEvents())})},"share:close":function(){f.closeShare(),f.push()},"*:bookletButtonClicked":function(e,t){var n=a.extend({bookletId:e||0},t||{});k("booklet",n)},"*:discountsButtonClicked":function(e){k("discounts",e)},"discountsCard:sendErrorClicked":function(e){f.showFeedback({feedbackType:"discountError",filialId:e}),f.push()},"discountsCard:clickDiscount":function(e){f.showDiscount(e),f.push()},"discountsCard:clickActiveDiscount":function(){f.hideDiscount(),f.push()},"*:plusOne":function(t,n){function a(){var a=e.requireComponent("plusOne"),i=a.isExternal(n.provider_tag);i?a.open(n.provider_tag,t,n):(f.showPlusOne(n.provider_tag,t,n),f.push())}e.isGrym?e.requireComponent("checkNetwork").check(function(e){e&&a()}):a()},"*:showPromoOwner":function(e,t){f.showPromoAccount({utm:e,firmId:t}),f.push()},"*:branchesClick":function(e){k("filials",{bookletId:e.bookletId,firmId:e.id,media:e.media,searchResults:e.searchResults})},"*:photosUploaderControlClicked":a.flow(Z,H,U),"*:showPhotosUploaderTooltip":function(e){ue(e.type,e.tooltipData)},"firmCard:photosClicked":function(e){var t=Z(e);"facilities"==t.albumName?G(t):U(t)},"card:photosClicked":function(e){var t=Z(e);"facilities"==t.albumName?G(t):U(t)},"geoCard2:photosClicked":function(e){e.photosType="geo",U(e)},"reviewsCard:photoClicked":function(e){G(e,!0)},"mediaCard:photosClicked":function(e){G(a.omit(e,"reg_bc_url"))},"mediaAddress:photosClicked":function(e){G(e)},"mediaReview:photosClicked":function(e){G(e,!0)},"mediaReview:filialAddressClicked":function(e){F(e)},"mediaCard:reviewsCountChanged":function(t){e.broadcast("mediaCard:reviewsCountChanged",t)},"extraLayersCard:photosClicked":function(e){e.photosType="multiple",G(e)},"extraLayers:tooltipClicked":function(){ae("ExtraLayers","9may")},"booklet:photosClicked":function(e){e.photosType="booklet",G(e)},"*:eventElemClicked":function(e){var t=e.type;"geo"==t||"geoCallout"==t?L({id:e.id,type:t}):w({id:e.id})},"eventCard:transportLinkClicked":function(t){var n=u.getRegion().code+"_"+t;f.extraLayers.hasLayer(n)||e.broadcast("extraLayers:listItemClick",n)},"popup:show":function(t){"transparent"==t?e.mod({popup:"visible"}):e.mod({inactiveBg:!0})},"popup:close":function(){e.mod().popup&&e.mod({popup:!1}),e.mod().inactiveBg&&e.mod({inactiveBg:!1}),f.get("promoAccount")&&f.closePromoAccount(),f.get("plusOne")&&f.closePlusOne(),f.push()},"*:changeRegion":function(t,n,a){e.action("changeRegion")(t,n,a)},"wizard:moreLinkClicked":function(){e.broadcast("wizard:hideCityElement"),e.broadcast("searchResults:checkFreeSpaceBanner")},"*:cityModeSetted":function(){e.action("cityModeSetted")()},"*:platformDetails":S,"*:stationSelected":I,"routeCard:routeShow":function(t,n){e.isClient&&e.broadcast("map:routeShow",t,n)},"*:landmarkClicked":function(e){switch(e=e||{},e.type){case"station_platform":k("platform",{platformId:e.id});break;case"station_entrance":I({id:e.stationId,subtype:e.subtype});break;case"building":L({id:e.id,type:e.type});break;case"branch":w({id:e.id});break;case"adm_div":L({id:e.id,type:e.type})}},"routeCard:clearRouteCardFromMap":function(){e.broadcast("map:clearRoutes")},"routeCard:togglePlatformMarker":function(t,n,a){e.broadcast("map:togglePlatformMarker",t,n,a)},"routeCard:clickPlatformInRoute":function(t,n,a){e.broadcast("map:togglePlatformMarker",t,n,!0),t&&e.broadcast("map:focusPoint",a||n.id,{historyAction:"push"})},"miniCard:clicked":function(t){e.broadcast("map:unhighlightObject",t.id),E(t),e.regInterests()},"miniCard:hovered":function(t,n){e.broadcast("map:highlightObject",t,n)},"floorsResults:floorsResultsReplaced":function(t){e.action("showFrame")("firm",{id:t.id,isReplaceNeeded:!0,floors:!0}),e.broadcast("searchBar:setLoading",!1),e.setTimeout(function(){e.broadcast("floors:focusOnFirms",[_e.getStaticId(t.id)])},500)},"mediaMiniCard:hovered":function(t,n){e.broadcast("map:highlightObject",t,n)},"miniCard:unhovered":function(t){e.broadcast("map:unhighlightObject",t)},"productCard:proposalHovered":function(t,n){e.broadcast("map:highlightObject",t,n)},"productCard:proposalUnhovered":function(t){e.broadcast("map:unhighlightObject",t)},"mediaMiniCard:unhovered":function(t){e.broadcast("map:unhighlightObject",t)},"recoveryAds:hovered":function(t){e.broadcast("map:highlightRecoveryMarker",t)},"recoveryAds:unhovered":function(t){e.broadcast("map:unhighlightRecoveryMarker",t)},"mediaRecoveryAds:hovered":function(t){e.broadcast("map:highlightRecoveryMarker",t)},"mediaRecoveryAds:unhovered":function(t){e.broadcast("map:unhighlightRecoveryMarker",t)},"map:markerHovered":function(t){var n=_e.getStaticIds(t.ids);e.broadcast("frame[active] searchResults miniCard:highlight",n),e.broadcast("frame[active] recoveryAds:highlight",n),e.broadcast("frame[active] mediaRecoveryAds:highlight",n),e.broadcast("frame[active] favoritesContainer:highlightItem",t),e.broadcast("frame[active] productCard:highlightProposal",n)},"map:markerUnhovered":e.action("unhighlightList",function(t){var n=_e.getStaticIds(t.ids);e.broadcast("frame[active] searchResults miniCard:unhighlight",n),e.broadcast("frame[active] recoveryAds:unhighlight",n),e.broadcast("frame[active] mediaRecoveryAds:unhighlight",n),e.broadcast("frame[active] favoritesContainer:unhighlightItem",t),e.broadcast("frame[active] productCard:unhighlightProposal",n)}),"map:legMouseover":function(t){e.broadcast("*:stepHoverSwitch",t,!0)},"map:legMouseout":function(t){e.broadcast("*:stepHoverSwitch",t,!1)},"map:hoverStopAtMap":function(t,n){e.broadcast("routeCard:highlightPlatform",t,n)},"*:highlightGeoCard":function(t){e.broadcast("map:highlightGeoCard",t)},"*:nearStationSelected":function(e,t){f.floors.isActive()&&f.floors.exit(),I(t,e)},"routeCard:changeActiveDirection":function(t){void 0!==t&&null!==t&&e.broadcast("map:changeActiveDirection",t)},"map:changeIndexActiveDirection":function(t){void 0!==t&&null!==t&&e.broadcast("routeCard:changeIndexActiveDirection",t)},"booklet:activated":M,
"booklet:deactivated":j,"booklet:minimized":function(){e.mod({map:null})},"generalPhotos:clientInited":function(){e.broadcast("mediaCard:stopAutoplay"),e.broadcast("generalPhotos:setSeoParams"),e.broadcast("extraLayers:shouldHideTooltip")},"generalPhotos:closeButtonClicked":function(){e.broadcast("mediaCard:startAutoplay"),e.broadcast("generalPhotos:dispose")},"generalPhotos:photoDeleted":function(t){e.broadcast("patchwork:changePhotos",t)},"photos:minimized":function(){e.mod({map:null})},"*:imitationInputBlur":function(){e.broadcast("*:imitationInputBlur")},"frame:error":j,"suggest:openGeoCard":function(e){L(e,!0)},"suggest:openRouteCard":function(e){T(e)},"suggest:openStationCard":function(e){I(e)},"suggestRs:clear":function(e){var t=f.panels.find("routeSearch");t||(c.setFromTo(e,null),f.push())},"*:clearPanels":function(){f.panels.clear(),f.push()},"*:showAuthPopup":function(){f.showAuth({authType:"login"}),f.push()},"*:showPhotosAuthPopup":function(){l.trackEvent("google",["Photos","Auth","Show"]),f.showAuth({authType:"login",title:d._t("Авторизируйтесь, чтобы добавить фотографию")}),f.push()},"errorMsg:signupClicked":function(){f.showAuth({authType:"signup"}),f.push()},"auth:close":function(){f.closeAuth(),f.push()},"auth:popupClose":function(){e.broadcast("*:authCancel")},"*:blinkLastFrame":function(){e.broadcast("dataViewer:blinkLastFrame")},"*:loggedIn":function(t){e.broadcast("*:loggedIn",t)},"*:loggedOut":function(){var t=e.requireComponent("authorization");t.logout(function(){var t=e.requireComponent("p2d");t.startup(),e.broadcast("*:loggedOut"),e.broadcast("promo:rerender")})},"tools:userInfoClicked":function(t){if(f.get("p2d"))e.modules.push2dial["interface"].close();else{f.set("p2d",{userInfoClicked:!0}),f.push();var n=t?"side":"normal";e.broadcast("push2dial:reposition",n)}},"*:phoneBound":function(t){e.broadcast("tools:showMobileName",t)},"*:phoneUnbound":function(){var t=e.requireComponent("p2d");t.isBound()?e.broadcast("tools:showMobileName",t.getBinding()):e.broadcast("tools:showMobileName")},"tools:boundPhoneClicked":function(t){if(f.get("p2d"))e.modules.push2dial["interface"].close();else{f.set("p2d",{boundPhoneClicked:!0}),f.push();var n=t?"side":"normal";e.broadcast("push2dial:reposition",n)}},"push2dial:closed":function(){f.del("bindPhone"),f.del("p2d"),f.push()},"push2dial:letsTryPush2Dial":function(){"function"==typeof be.success&&be.success("try"),be.success=null},"push2dialCaller:openP2DBindingForm":A,"frame:frameFailed":function(t,n){if(fe(t,n),ge.isRouteSearchModule(t)){var i=a.get(n,"type"),o={startStationNotFound:"from",endStationNotFound:"to"};e.broadcast("suggestRs:setError",o[i]),l.trackEvent("google",["RouteSearch","Result","Not_found"]),c.commit(t,!1)}},"frame:frameSuccess":function(e){ge.isRouteSearchModule(e)&&(l.trackEvent("google",["RouteSearch","Result","Found"]),c.commit(e,!0))},"frame:disposePopup":function(){e.broadcast("newYearGiftsPopup:dispose")},"*:resetSuggestError":function(){e.broadcast("suggestRs:resetError")},"*:extraLayersDetails":function(t){e.broadcast("extraLayers:trackExtraLayersCard",t.layerId),k("extraLayersCard",{layerId:t.layerId,featureId:t.featureId})},"map:markerClick":function(t){var n=t.type||"firms";switch(e.action("unhighlightList")(t),n){case"extraLayers":oe(t);break;case"apartment":re(t);break;case"floorList":se(t);break;default:le(t,n)}},"museum:museumSwitch":function(t){e.mod({museum:t})},"phoneBar:action":function(t){s.setItem("phoneBar","closed"),e.mod({phoneBar:!1}),e.modules.phoneBar.dispose(),l.trackEvent("google",["Mobile_vers","Store_"+t,e.ua().os.name])},"promoMobileFull:action":function(t){s.setItem("promoMobileFull","closed"),e.modules.promoMobileFull.dispose(),l.trackEvent("google",["Promo_Mobile_Fullscreen",t,e.ua().os.name])},"extras:print":R,"print:printSuccess":function(){e.mod({waitForPrint:!1})},"print:printFailure":function(t){l.trackEvent("google",["Print","Print_Fail",t]),e.mod({printFailure:!0})},"discountsPromoEntry:clickBlock":function(){e.bssContext.startNewChain({pr:"promo"}),f.search({query:d._gg("Поесть"),filters:{food_service_discount:!0}}),f.push(),e.modules.discountsPromo&&e.modules.discountsPromo.dispose();var t=e.init("discountsPromo");e.block().append(t.render()),t.bindEvents(),e.broadcast("discountsTooltip:close")},"searchResults:clientInit":function(){e.broadcast("discountsPromo:show")},"pagination:pagePicked":function(e){a.isFinite(e)&&(f.changePage(parseInt(e,10)),f.push())},"*:changePage":function(e){f.changePage(e),f.replace()},"*:shareClicked":function(i,o,s,l,c){var u=n(),d=c||B(i,l)||{},h=req("helpers/social");s&&e.broadcast("frame[:last]:increaseRepostCount",s),o?u.resolve(o):t.reduceLink(o||window.location.href,function(e){u.resolve(e)}),d.image||(d.image=a.get(e.registry.get("seo",{}),"ogImage.image")),u.done(function(e){switch(i){case"facebook":r.shareWithFb(d.title,d.desc,e,d.image,d.callbackFb||a.noop);break;case"twitter":h.openSocialPopup(h.getTwitterUrl(e,a.compact([d.title,"#2gis"]).join(" "),d.useImageForTwitter?d.image:""));break;case"vkontakte":h.openSocialPopup(h.getVkontakteUrl(e,d.image,d.title,d.desc));break;case"odnoklassniki":h.openSocialPopup(h.getOdnoklassnikiUrl(e,d.title))}})},"awardCard:clicked":function(e){w({id:e.id})},"awardCard:voted":function(t,n,a){f.showAwardPopup({isAuthorized:t,name:n}),f.push(),t||l.trackEvent("google",["Awards_2015","Auth_Show"]),e.broadcast("award:setVotedCardId",a)},"awardCard:like":function(e,t){f.showAwardPopup({justSharing:!0,name:e,"final":t}),f.push()},"victory:contentLinkClicked":function(t,n,a){e.broadcast("extraLayers:openSublayer",t,n),a&&(f.dataViewer.minimize(),f.push())},"*:enterGlobal":P,"weather:search":J,"forecast:search":J,"mixedResults:showMediaCard":function(){var t=!f.panels.find("find",{}).media&&!f.panels.find("firm",{}).media&&e.isClient;t&&e.stage==e.STAGE_INITED&&e.broadcast("searchBar:hide"),f.toggleMediaResults(!0),f.replace()},"firmCard:showMediaCard":function(){f.toggleMediaCard(!0),f.actualize(),e.broadcast("promoTooltip:disablePromos")},"card:showMediaCard":function(){f.toggleMediaCard(!0),f.actualize(),e.broadcast("promoTooltip:disablePromos")},"mediaResults:init":function(){e.stage==e.STAGE_INITED&&e.broadcast("dataViewer:hide"),e.broadcast("dataViewer:updateMediaMode")},"mediaResults:inited":function(){e.broadcast("searchBar:setLoading",!1),f.shouldBeMediaMode()&&e.broadcast("searchBar:updateSpecialMode","media")},"mediaResults:clientInited":function(){e.broadcast("dataViewer:show"),e.broadcast("extraLayers:shouldHideTooltip")},"mediaResults:shownOnClient":function(){e.broadcast("dataViewer:show")},"mediaResults:activated":function(){e.broadcast("mediaResults:checkMaximize")},"mediaResults:updateTabsData":function(t){a.extend(t,{mode:"results"}),e.broadcast("searchBar:updateMediaTabs",t)},"mediaResults:showSearchBar":function(){e.broadcast("searchBar:show")},"products:inited":function(){e.broadcast("searchBar:updateSpecialMode","products")},"productCard:inited":function(){e.broadcast("searchBar:updateSpecialMode","products"),e.broadcast("searchBar:updateMediaTabsText",{type:"products",mode:"card"})},"productCard:backLinkClicked":function(){f.closeProductCard(),f.push()},"products:updatedResultsNumber":function(t){e.broadcast("searchBar:updateMediaTabsText",{total:t,type:"products",mode:"results"})},"mediaCard:inited":function(){f.shouldBeMediaMode()&&e.broadcast("searchBar:updateSpecialMode","media")},"mediaCard:updateTabsData":function(){e.broadcast("searchBar:updateMediaTabs",{mode:"card"})},"mediaCard:hideSearchBar":function(){e.broadcast("searchBar:addMediaCardMode")},"mediaCard:showSearchBar":function(){e.broadcast("searchBar:removeMediaCardMode")},"searchBar:mediaTabClicked":function(e){"all"===e&&(f.switchToAllResults(),f.push()),"new"===e&&(f.switchToNewFirms(),f.push())},"searchBar:resultsPlaceholderClicked":function(t){"products"===t&&e.broadcast("products:scrollToResultsTop")},"searchBar:backLinkClicked":Q,"searchBar:minimizeControlClicked":W,"searchBar:maximizeControlClicked":V,"searchBar:closeControlClicked":function(t){if("card"===t.contentType)return Q(t.specialMode);if("media"==t.specialMode){var n=e.broadcast("dataViewer:findLastFrameByType","mediaResults");if(n)return a.get(n,"interface.close",a.noop)()}return"products"==t.specialMode&&e.broadcast("products:close"),null},"mediaResults:maximized":function(){e.broadcast("searchBar:minimize")},"mediaResults:minimized":function(){e.broadcast("searchBar:maximize")},"searchBar:mediaExpanded":function(t){e.broadcast("dataViewer:updateLastFrame"),a.get(t,"isLastPanelMediaCard")?e.broadcast("searchBar:addMediaCardMode"):e.broadcast("searchBar:removeMediaCardMode"),e.broadcast("dataViewer:show"),e.broadcast("promoTooltip:disablePromos")},"searchBar:mediaCollapsed":function(){e.broadcast("dataViewer:updateLastFrame"),e.broadcast("dataViewer:setColumnsLength")},"mediaResults:miniCardClicked":function(t){e.broadcast("searchBar:minimize"),k("firm",a.extend(t,{media:!0}))},"mediaResults:providersResetServicing":function(){function t(){f.panels.add({type:"find",query:d._gg("провайдеры")})}f.panels.removeBy("type","servicing"),f.panels.removeBy("type","firm");var n=f.panels.findLast("find");n?n.media?delete n.filters:(f.panels.removeBy("type","find"),t()):t(),f.push(),e.broadcast("checkConnectionWidget:reset",!0)},"searchResults:resultsRendered":function(){e.broadcast("filters:finalActions")},"mediaCard:cardArrowClicked":function(e){k("firm",e)},"dataViewer:updateMediaMode":function(t){e.mod({media:t}),e.isClient&&"iPad"===e.ua().device.model&&e.broadcast("extras:hidden",t)},"frame:framesSizeChanged":function(){e.broadcast("extraLayers:shouldHideTooltip")},"world:autoLocationError":function(){e.broadcast("geoLocation:showAutoLocationError")},"geoLocation:useSearchClicked":function(){e.broadcast("world:autofocus")},"video:create":function(){f.set("video",!0),f.push()},"video:delete":function(){f.del("video"),f.push()},"gallery:close":function(){f.del("photos"),f.push()},"gallery:photoClicked":function(e){G(e)},"mediaCard:photoClicked":function(e){G(a.extend(e,{photosType:"firm"}))},"floorsDashboard:photoClicked":function(e){G(a.extend(e,{photosType:"firm"}))},"*:tyresButtonClicked":function(){k("products",{productType:"tyres"})},"productMiniCard:click":function(e){f.showProductCard(e.id),f.push()},"productsFilters:changedFilters":function(e){f.setProductsFilters(e),f.push()},"*:showForecast":function(){k("weather")},"chat:chatShowed":function(){ie()},"whatsNew:whatsNewClosed":function(){e.broadcast("extras:hidden",!1)},"extraLayersGinza:ginzaGiveMeMarkers":function(){e.broadcast("ginzaProject:addMarkers")},"extraLayersGinza:ginzaDestroyYourMarkers":function(){e.broadcast("ginzaProject:clearMarkers")}},"undefined"!=typeof window&&(window.TestHandles=window.TestHandles||{},window.TestHandles.resizeMediaResults=X),me},t.exports._args=["slot","$shortonizerApi","$defer","$social","$localStorage","$analytics","$routeSearchStore","$regionManager","$i18n","$featureSwitcher","$dgApi","$appState","$frameResizer","$floorsManager","$bssContext","$authorization","$collectionsApi"]},{"deep-equal":428,lodash:"lodash"}],336:[function(e,t,n){var a=req("helpers/firm"),i=req("helpers/discreteFrame");t.exports=function(e,t,n,o){function r(t,n){e.broadcast("map:setRsKeypoint",t),n?e.broadcast("map:drawRouteSearch",t,n):e.broadcast("map:setRsKeypoint",t)}function s(n,a){a&&e.broadcast("map:clearRouteSearch"),t.inGlobal()||e.broadcast("map:setRsKeypoint",{from:t.get("from"),to:t.get("to")})}function l(){var e=i.getSavedColumnsNumber(n);return!t.get("dataViewer/minimized")&&!e}function c(){e.mod().media&&l()&&!t.inGlobal()&&(t.dataViewer.minimize(),t.push(),e.broadcast("searchBar:trackMediaShift")),o.manualAdd("click",{className:"online__map"})}function u(t,n){t.floors?e.broadcast("floors:unhighlightFirm",a.getStaticId(t.id)):(e.broadcast("map:clearMarker",t),e.broadcast("map:hideEntrances",t),e.broadcast("favoritesItem:unhighlight",t),n&&e.broadcast("map:toggleShowParkingsMode",!1,"firmCard"))}function d(t,n){t.floors?e.broadcast("floors:unhighlightFirm",a.getStaticId(t.id)):(e.broadcast("map:clearMarker",t),e.broadcast("map:hideEntrances",t),e.broadcast("map:clearGeoCard",t.id),e.broadcast("favoritesItem:unhighlight",t),n&&e.broadcast("map:toggleShowParkingsMode",!1,"card"))}function h(n,a){t.floors.isActive()&&(t.floors.exit(),t.replace(),a.bssContext&&a.bssContext.continueChain(),e.action("showFrame")("firm",{id:n.id,isParkingsFromFloors:!0,isReplaceNeeded:!0,is_poi:a.isPoi})),e.broadcast("map:showEntrance",n)}function p(t,n){h(t,n),e.broadcast("map:toggleShowParkingsMode",!0,"firmCard",t.point)}function f(t,n){h(t,n),e.broadcast("map:toggleShowParkingsMode",!0,"card",t.point)}var m={"map:visibleMarkersChanged":function(){e.broadcast("markerSetting:updateVisibleMarkersCount")},"ginzaProject:clearGinzaMarker":function(){e.broadcast("map:clearMarkersGroup","firms")},"ginzaProject:addGinzaMarker":function(t){e.broadcast("map:drawMarkers",{result:t,mode:"firms"},null,!0)},"searchResults:mapDataReady":function(t,n){e.broadcast("map:drawMarkers",t,n)},"searchResults:clearMap":function(t){e.broadcast("map:clearMarkersGroup",t),e.broadcast("map:hideEntrances")},"searchResults:royalizeMarker":function(t){e.broadcast("map:drawMarker",t)},"searchResults:deroyalizeMarker":function(t){e.broadcast("map:clearMarker",t)},"mediaResults:mapDataReady":function(t){e.broadcast("map:drawMarkers",{result:t,mode:"firms",notZoomMap:!0})},"mediaResults:clearMap":function(){e.broadcast("map:clearMarkersGroup","firms")},"geoCard2:mapDataReady":function(t,n){e.broadcast("map:highlightGeoCard",t),e.broadcast("map:drawMarker",t),n&&e.broadcast("map:toggleShowParkingsMode",!0,"geoCard2",t.point)},"geoCard2:clearMap":function(t,n){e.broadcast("map:clearGeoCard",t.id),e.broadcast("map:clearMarker",t),e.broadcast("map:hideEntrances",t),n&&e.broadcast("map:toggleShowParkingsMode",!1,"geoCard2")},"geoCard2:parkingsShown":function(t){e.broadcast("map:showEntrance",t),e.broadcast("map:toggleShowParkingsMode",!0,"geoCard2",t.point)},"geoCard2:preparedForPrint":function(t){e.broadcast("map:focusPoint",t)},"apartmentsMapList:mapDataReady":function(t){e.broadcast("map:drawMarkers",t,"focus")},"apartmentsMapList:clearMap":function(){e.broadcast("map:clearMarkersGroup","apartment")},"apartmentsList:mapDataReady":function(t){e.broadcast("map:drawMarker",t)},"apartmentsList:clearMap":function(t){e.broadcast("map:clearMarker",t)},"proposalsMapList:mapDataReady":function(t){e.broadcast("map:drawMarkers",t,"focus")},"proposalsMapList:clearMap":function(){e.broadcast("map:clearMarkersGroup","firms")},"productCard:mapDataReady":function(t){e.broadcast("map:drawMarkers",{result:t,mode:"firms",notZoomMap:!0})},"productCard:clearMap":function(){e.broadcast("map:clearMarkersGroup","firms")},"firmCard:mapDataReady":function(t,n){t.floors?e.setTimeout(function(){e.broadcast("floors:highlightFirm",t)},200):(e.broadcast("map:drawMarker",t),n&&e.broadcast("map:toggleShowParkingsMode",!0,"firmCard",t.point))},"card:mapDataReady":function(t,n){t.geometry&&t.geometry.selection&&e.broadcast("map:highlightGeoCard",{id:t.id,geometry:t.geometry,type:"adm_div"}),e.broadcast("map:drawMarker",t),n&&e.broadcast("map:toggleShowParkingsMode",!0,"card",t.point)},"firmCard:clearMap":u,"card:clearMap":d,"firmCard:parkingsShown":p,"card:parkingsShown":f,"floorList:mapDataReady":function(t){e.broadcast("map:drawMarkers",{result:t,mode:"floorList",type:"floorList"})},"floorList:clearMap":function(){e.broadcast("map:clearMarkersGroup","floorList")},"mediaCard:mapDataReady":function(t,n){e.broadcast("map:drawMarker",t),e.broadcast("map:focusPoint",t.point),n&&e.broadcast("map:toggleShowParkingsMode",!1,"mediaCard")},"mediaCard:clearMap":function(t,n){e.broadcast("map:clearMarker",t),e.broadcast("map:hideEntrances",t),n&&e.broadcast("map:toggleShowParkingsMode",!1,"mediaCard")},"mediaAddress:parkingsClicked":function(t){e.broadcast("map:showEntrance",t),e.broadcast("map:toggleShowParkingsMode",!0,"mediaCard",t.point)},"map:parkingsResult":function(t,n){e.broadcast(t+":parkingsResult",n)},"*:hideEntrances":function(){e.broadcast("map:hideEntrances")},"stopCard:mapDataReady":function(t,n){n&&e.broadcast("map:drawMarker",t),e.broadcast("map:highlightGeoCard",t)},"stopCard:clearMap":function(t){e.broadcast("map:clearGeoCard",t.id),e.broadcast("map:clearMarker",t)},"stopCard:preparedForPrint":function(t){e.broadcast("map:focusModel",t)},"metroCard:mapDataReady":function(t){e.broadcast("map:drawMarker",t),e.broadcast("map:highlightGeoCard",t)},"metroCard:clearMap":function(t){e.broadcast("map:clearGeoCard",t.id),e.broadcast("map:clearMarker",t)},"metroCard:preparedForPrint":function(t){e.broadcast("map:focusPoint",t)},"routeResults:mapDataReady":r,"routeResults:clearMap":s,"routeResults:routeClicked":r,"autoResults:mapDataReady":function(t,n){r(t,n),"car"==t.rsType&&e.broadcast("map:toggleShowParkingsMode",!0,"autoResults",t.to)},"autoResults:clearMap":function(t,n){s(t,n),e.broadcast("map:toggleShowParkingsMode",!1,"autoResults")},"autoResults:routeClicked":r,"autoResults:preparedForPrint":function(){e.broadcast("map:focusWholeRoute")},"eventCard:mapDataReady":function(t){e.broadcast("map:drawMarkers",{result:t,mode:"geo"})},"eventCard:clearMap":function(){e.broadcast("map:clearMarkersGroup","geo")},"bookletBuildings:mapDataReady":function(t){e.broadcast("map:drawMarkers",{type:"filials",mode:"booklet",result:{markers:t.markers}},"focus"),e.broadcast("map:highlightGeoCard",t)},"bookletBuildings:clearMap":function(){e.broadcast("map:clearMarkersGroup","booklet"),e.broadcast("map:clearGeoCard")},"*:focusModel":function(t,n){e.broadcast("map:focusModel",t,n)},"*:segmentClick":function(t,n){e.broadcast("map:segmentFocus",t,n)},"*:segmentHover":function(t){e.broadcast("map:segmentHover",t)},"map:osmTilesVisible":function(t){e.mod({osmCopyright:t})},"*:focusPoint":function(t,n){e.broadcast("map:focusPoint",t,n)},"geoCard2:addressSelected":function(t,n){e.broadcast("map:focusPoint",t,n)},"extraLayers:drawExtraLayers":function(t){e.broadcast("map:drawExtraLayers",t)},"favoritesEmptyList:drawFavorites":function(t){e.broadcast("map:drawFavorites",t)},"geoLocation:drawMarker":function(t){e.broadcast("map:drawGeolocationMarker",t)},"geoLocation:updateMarker":function(t){e.broadcast("map:updateGeolocationMarker",t)},"geoLocation:clearMarker":function(){e.broadcast("map:clearGeolocationMarker")},"map:startFly":function(){e.mod({flying:!0}),e.broadcast("*:imitationInputBlur"),e.broadcast("*:hideWhenFlying")},"map:endFly":function(){e.registry.get("redirecting")||e.mod({flying:!1})},"map:countryMarkerClicked":function(n,a){n=n||{},t.changeCenter(n.center||a),t.changeZoom(n.zoom),t.set("global/citySelect",!0),t.push(),e.broadcast("world:showCountry",n.code)},"map:mousedown":c};return m},t.exports._args=["slot","$appState","$localStorage","$userActivity"]},{}],337:[function(e,t,n){var a=e("lodash");t.exports=function(e){function t(t){t=t||{};var n=e.registry.get("seo",{});e.registry.set("seo",a.assign(n,a.pick(t,["title","description","canonicalUrl","langAlternates","prevPageUrl","nextPageUrl","ogImage","twitterImage"]))),e.isServer?"#"!=t.canonicalUrl&&"/#"!=t.canonicalUrl||e.sendError("Failed to create canonical URL",t):t.title&&(document.title=t.title)}e.action("setSeoParams",t);var n={"*:setSeoParams":t};return n}},{lodash:"lodash"}],338:[function(e,t,n){t.exports=function(e,t){var n={"*:addressSelected":function(){t.dataViewer.minimize(),t.push()},"*:parkingsShown":function(){t.dataViewer.minimize(),t.push()}};return n},t.exports._args=["slot","$appState"]},{}],339:[function(e,t,n){var a=e("lodash");t.exports=function(e,n,i){for(var o=req("helpers/seo"),r=[],s=parseInt(e.current,10),l=e.count,c=t.exports.ranger(s,l,i),u=c.min;u<=c.max;u++){var d=o.getCanonicalUrl(a.extend(n,{page:u}));r.push({num:u,active:s==u,tag:s==u?"span":"a",href:s!=u?d:null})}return{pages:r,leftEnabled:s>1,rightEnabled:l>s}},t.exports.ranger=function(e,t,n){var a=n||5,i=Math.max(1,e-Math.floor(a/2)),o=Math.min(a,t),r=o-1,s=i+r;return s>t&&(s=t,i=s-r),{min:i,max:s}}},{lodash:"lodash"}],340:[function(e,t,n){function a(e,t){return Math.abs(e-t)}function i(e,t){var n=t/e,i=c.reduce(u,function(e,t){return t.value>n?e:e?a(t.value,n)<a(e.value,n)?t:e:t},null);return i||c.first(u)}function o(e,t){return e*t.value}function r(e,t){this._params=t,this._initialItems=e,this._setup()}function s(e){var t=.33,n=1/0,a=0;return c.each(e,function(e,i){e.height<n-e.width*t&&(n=e.height,a=i)}),a}function l(e,t){this.items=[],this.width=e,this.gap=t,this.height=0}var c=e("lodash"),u=[{key:"1-2",value:.5},{key:"3-5",value:.625},{key:"3-4",value:.75},{key:"1-1",value:1},{key:"sqrt2-1",value:1.4078},{key:"5-3",value:5/3}];r.prototype._setup=function(){var e=this._params;this._items=c.clone(this._initialItems)||[],this._columns=c.times(e.columnCount,function(){return new l(e.columnWidth,e.columnGap)}),this.shiftMega(e),c.each(this._items,this.push,this)},r.prototype.shiftMega=function(e){if(delete this._mega,e.mega&&!(this._columns.length<3)){var t=this._items[0];if(t){var n=i(t.width,t.height);if(n.value<=1){this._items.shift(),this._mega=c.extend(t,{size:n.key});var a=c.take(this._columns,2),r=a[0].width+e.columnGap+a[1].width;c.each(a,function(e){e.addItemHeight(o(r,n))})}}}},r.prototype.push=function(e){var t=this.chooseItemDestination(e);this._columns[t].push(e)},r.prototype.chooseItemDestination=function(e){return s(this._columns,e)},r.prototype.getItemsByColumns=function(){return c.map(this._columns,function(e){return{items:e.items}})},r.prototype.getMega=function(){return this._mega},r.prototype.redistribute=function(e){return this._columns.length==e?!1:(this._params.columnCount=e,this._setup(),!0)},l.prototype.push=function(e){var t=i(e.width,e.height);this.items.push(c.extend(e,{size:t.key})),this.addItemHeight(o(this.width,t))},l.prototype.addItemHeight=function(e){this.height&&(this.height+=this.gap),this.height+=e},t.exports=r},{lodash:"lodash"}],341:[function(e,t,n){function a(e){return e?i.extend({isMega:!0},e):null}var i=e("lodash");t.exports=function(e,t){var n={columns:e,mega:a(t)};return n}},{lodash:"lodash"}],342:[function(e,t,n){var a=e("lodash"),i=req("helpers/string"),o=req("helpers/linkURL");t.exports=function(e,t,n){function r(e){var n=e.price;if(!n)return null;var o=a([n.min,n.max]).compact().uniq().map(function(e){return i.numberString(e,t.getFormats("number"))}).value().join(" – ");return{value:o,currency:d}}function s(e){return{name:e.name,attributesIcons:e.attributesIcons,parameters:e.parameters,price:r(e),proposalsNumber:e.proposals&&e.proposals.total,coverURL:e.image&&e.image.url}}function l(e){var t;e.org&&e.org.branch_count>1&&(t=e.org.branch_count);var a=o("firm",{city:n.getRegion().code,id:e.id});return{id:e.id,seoUrl:a,orgId:e.org&&e.org.org_id,rating:e.rating,advertiser:!!e.ads,name:e.name,address:e.address,filials:t}}function c(e){var n=e.proposals&&e.proposals.items;return n?a.map(n,function(e){var n;return e.price&&(n={value:i.numberString(e.price,t.getFormats("number")),currency:d}),{branch:e.branch.id.split("_").shift(),firm:l(e.branch),price:n,buyLink:e.url}}):null}var u=t.getFormats().currency,d={code:u.id.toLowerCase(),value:u.value};return{product:s(e),proposals:c(e)}},t.exports._args=["data","$i18n","$regionManager"]},{lodash:"lodash"}],343:[function(e,t,n){var a=e("lodash"),i=req("helpers/linkURL"),o=req("helpers/string");t.exports=function(e,t,n){function r(e){var n=e.price&&e.price.min;if(!n)return null;var i=t.getFormats().currency;return a.extend(i,{code:i.id.toLowerCase()}),{value:o.numberString(n,t.getFormats("number")),currency:i}}var s=e.product,l=r(s),c={city:n.getRegion().code,productType:e.productType,id:s.id},u=i("productCard",c);return{name:s.name,size:s.size,imageUrl:s.image&&s.image.url,price:l,attributes:s.attributes,attributesIcons:s.attributesIcons,showAttributes:l||!a.isEmpty(s.attributes),proposalsNumber:s.proposals&&s.proposals.total,seoUrl:u}},t.exports._args=["data","$i18n","$regionManager"]},{lodash:"lodash"}],344:[function(e,t,n){var a=e("lodash"),i=req("helpers/string");t.exports=function(e,t){function n(e){return e?i.numberString(e,t.getFormats("number")):null}function o(t,i){var o=$("#"+t.name,e.block()[0]),r=[t.values.min,t.values.max],s=t.value||a.clone(r),l={root:o,track:$(".productsFilters__raderTrack",o),trackActive:$(".productsFilters__raderTrackActive",o),points:$(".productsFilters__raderPoint",o),runners:$(".productsFilters__raderRunner",o),pointInRangeCls:"_range_in",click:!0,runnersFreeze:[1,0],stickingRadius:0,bumpRadius:0,values:r,pointsPos:r,runnersVal:s,change:function(e){var t=[Math.round(e.minVal),Math.round(e.maxVal)];t[0]==r[0]&&t[1]==r[1]&&(t=null),i(t)},onUpdate:function(t){o.find(e.element("raderRunnerLabelNumber")).html(n(Math.round(t.maxVal)))}};return o.rader(l)}return{initSlider:o}},t.exports._args=["slot","$i18n"]},{lodash:"lodash"}],345:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/link");t.exports=function(e,t){function n(e){return e=25*(Math.floor(e/25)||1),"_speed"+(e>100?100:e)}var o,r=t.getFormats().currency,s=e.tariff||{},l={name:a.get(e,"provider.name")||s.provider_name,phone:a.get(e,"provider.phone"),logoUrl:i.addProtocolToUrl(s.provider_logo_url)},c=a.get(s,"speed.in"),u={name:s.name,speed:c,channels:s.tv_channels,hdChannels:s.hd_channels,price:parseInt(s.price,10),icon:n(c)};return"bookletPopup"==e.template&&(o=t._gg("Укажите адрес")),{template:e.template,connected:e.connected,notConnected:e.notConnected,provider:l,tariff:u,formTitle:o,currency:r}},t.exports._args=["model","$i18n"]},{lodash:"lodash"}],346:[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e){return function(t){function n(e){if(!e)return null;var t=a.ceil(e/100*360);return{right:180>=t?-135+t:45,left:t>180?-135+t:null}}var i=e.getFormats().currency,o={code:i.id.toLowerCase(),symbol:i.symbol},r=a.map(t.tariffs,function(e){var t=a.get(e,"speed.in"),n=e.tv_channels;return{id:e.id,name:e.name,modificationTime:e.modification_time,description:e.description,price:{value:e.price,currency:o},speed:{value:t},tv:{value:n,hdChannels:e.hd_channels}}});r=a.sortBy(r,function(e){return e.price.value});var s=a.max(a.map(r,function(e){return a.get(e,"speed.value")})),l=a.max(a.map(r,function(e){return a.get(e,"tv.value")}));return a.each(r,function(e){var t;s&&(t=a.ceil(a.get(e,"speed.value",0)/s*100),a.extend(e.speed,{percent:t,arc:n(t)})),l&&(t=a.ceil(a.get(e,"tv.value",0)/l*100),a.extend(e.tv,{percent:t,arc:n(t)}))}),{header:"Тарифы «"+t.firmName+"»",tariffs:r,showTvColumn:!!l}}},t.exports._args=["$i18n"]},{lodash:"lodash"}],347:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/link");t.exports=function(e,t,n,o,r,s){function l(){n.isAuthorized()?o.isBound("account")?(e.type="panel",e.title=p,e.text=f.successAccount,e.linked=!0):o.isBound("browser")&&(e.type="panel",e.title=p,e.text=f.successBrowser,e.linked=!0):o.isBound("browser")?(e.type="panel",e.title=p,e.text=f.successBrowser,e.linked=!0):(e.type="panel",e.settings=!!n.isAuthorized(),e.email=n.isAuthorized()&&!n.isSocial(),e.title=r._t("Звоните прямо из справочника"),e.text=f.notBound)}function c(){o.isBound("account")?(e.type="panel",e.title=p,e.text=f.successAccount,e.linked=!0):(e.type="panel",e.title=p,e.text=f.notBound),n.isSocial()?e.authorized=!0:n.isAuthorized()&&(e.email=!0)}var u=e||{},d=s.getRegion(),h=t.isGrym?"desktopApp":"onlineApp",p=n.isAuthorized()?n.getAuthorizedUserSync().authorizedUser.display_name:r._t("Звонки"),f={successBrowser:r._t("Ваш телефон привязан к браузеру. Вы можете звонить в один клик прямо из справочника!"),successAccount:r._t("Ваш телефон привязан к профилю 2ГИС. Вы можете звонить в один клик прямо из справочника!"),successPassword:r._t("Ваш пароль успешно изменен!"),offerBrowser:r._t("Привяжите ваш телефон к браузеру и звоните в один клик прямо из справочника!"),offerAccount:r._t("Привяжите ваш телефон к профилю 2ГИС и звоните в один клик прямо из справочника!"),notBound:r._t("Один клик в справочнике 2ГИС, и ваш телефон начнет набирать номер нужной организации."),bindingForm:r._t("Мгновенный набор номера на вашем мобильном!")},m={items:[{type:"android",title:"Google Play",href:r._config(h+".storeLink.p2d.android")}]},g=t.getLoyaltyState();return"bind"==e.state?(e.popup=!0,e.type="form",e.title=r._t("Звонок в&nbsp;один клик"),e.text=f.bindingForm,e.products=m):"bound"==e.state?(e.popup=!0,e.type="response",e.title=r._t("Звонок в&nbsp;один клик"),e.text=f.successAccount,e.products=m,e.linked=!0):"justUnbound"==e.state?(g?(u.descTitle=r._hgg("%{Link Знаете Уфу лучше всех?}",{link:{"class":"_scheme_dark _undashed push2dial__sectionTitleLink",href:"http://ufa-urban-expert.2gis.ru?utm_source=online&utm_medium=signup&utm_campaign=contest",target:"_blank"}}),e.text=r._gg("Сообщайте о неточностях в 2ГИС и выиграйте поездку в Прагу на двоих")):(e.text=n.isAuthorized()?f.offerAccount:f.offerBrowser,u.descTitle=r._t("Звонок в&nbsp;один клик")),e.type="panel",e.title=p,u.loyalty=g,e.text=n.isAuthorized()?f.offerAccount:f.offerBrowser,e.linked=!1,e.justUnbound=!1):"passwordChanged"==e.state?(e.type="panel",e.title=p,e.email=!0,e.text=f.successPassword,e.linked=o.isBound("account")):e.userInfoClicked||e.fromLink?c():l(),a.each(e.pin,function(e,t){a.isNaN(parseInt(e,10))||(u["pin"+t]=e)}),e.advertiserData&&(e.advertiserData.lkUrl=i.getPrivateOfficeLink(d,"push2dial",e.advertiserData.firmId,r.getLang())),u},t.exports._args=["data","slot","$authorization","$p2d","$i18n","$regionManager"]},{lodash:"lodash"}],348:[function(e,t,n){function a(e){return Math.round(e/1e3*10)/10}function i(e){var t=o.find(e.external_content,function(e){return e.main_photo_url&&"common"===e.subtype});return t&&t.main_photo_url}var o=e("lodash"),r=req("helpers/linkURL"),s=req("helpers/firm");t.exports=function(e,t,n,l){var c="/128x128",u=o.map(e,function(e,t){var u,d="";u=void 0===e.distance?"":0==e.distance?l._t("В этом же здании"):e.distance<1e3?l._nt("В %1 метре","В %1 метрах","В %1 метрах",e.distance):l._t("В %1 км",a(e.distance));var h=r("firm",{id:t,lon:e.point.lon,lat:e.point.lat,city:n.getRegion().code});o.get(e,"ads.options.logo.img_url")?d=s.getLogoUrl(e,"128x128"):e.main_photo_url&&(d=e.main_photo_url+c);var p=l.getSettings().advWarning&&!!e.ads;return{preview:d,staticId:t,title:e.name,url:h,address:e.address_name,distance:u,isAds:!!e.ads,micro:e.ads&&e.ads.text,warning:s.getAdsWarning(e,"text"),showAdvWarning:p,mainPhotoURL:i(e),extension:e.name_ex&&e.name_ex.extension}});return{firms:u}},t.exports._args=["rawFirms","params","$regionManager","$i18n"]},{lodash:"lodash"}],349:[function(e,t,n){"use strict";function a(e){return e?r.map(e.split("\n\n"),function(e){return e.replace(/\n/g,"<br>")}):[]}function i(e,t){var n,i=e.length>u[t].MAX_FULL_LENGTH;return i&&(n=l.threeDots(e.substr(0,u[t].CUT_LENGTH))),e=l.decorateUrls(e),{cut:a(n),full:a(e)}}function o(e,t,n){return e?c.getFirmAddress(e,{useDrilldownInAddress:n.getSettings("firms.useDrilldownInAddress"),format:n.getFormats("address.order"),infoStrategy:n.getSettings("geoobjects.infoStrategy"),regionName:t.name}):null}var r=e("lodash"),s=e("moment"),l=req("helpers/string"),c=req("helpers/firm"),u={review:{MAX_FULL_LENGTH:400,CUT_LENGTH:300},answer:{MAX_FULL_LENGTH:140,CUT_LENGTH:120}},d={flamp:"reviewCardPartner_flag",foursquare:"reviewCardPartner_4square"},h={flamp:"flamp.ru",foursquare:"foursquare.com"};t.exports=function(e,t,n,a){if(!e)return null;var r=i(e.text,"review"),l=e.officialAnswer?{name:e.officialAnswer.name||a._gg("Ответ компании"),message:i(e.officialAnswer.message,"answer"),avatar:e.officialAnswer.avatar}:null,c=!!(r.cut.length||l&&l.message.cut.length);return{id:e.id,jsonldModule:e.jsonldModule,rating:e.rating,isRecommended:e.is_recommended,date:s(e.creation_time).fromNow(),address:o(e.filialData,n,a),message:i(e.text,"review"),user:e.user,href:e.url,photo:e.photo&&{src:e.photo.image,
href:e.photo.url,preview:e.photo.preview,comment:e.photo.comment},officialAnswer:l,source:{key:e.source,logo:d[e.source],url:h[e.source]||""},showReadMoreLink:c,likes:e.likes_score,noIndex:t}}},{lodash:"lodash",moment:"moment"}],350:[function(e,t,n){"use strict";function a(e,t){var n=0;return s.compact(s.map(e,function(e){var a="flamp"==e.source&&++n>10;return l(e,a,t.region,t.i18n)}))}function i(e,t){if(!e||!t)return null;var n=e.reviews||{},a=d.getRating(e)||{};return{name:e.name,primaryName:e.primaryName,href:u("firm",{city:t.region.code,id:e.id,lat:e.lat,lon:e.lon}),address:e.address,total:e.reviews_count,rating:a.value,reviewWriteHref:o(n)?c.getFlampLink(e.id,t.i18n):null}}function o(e){var t=s.find(e.items,"tag","flamp")||{};return!!t.is_reviewable}function r(e,t){return{items:[{title:t.i18n._t("Филиал"),"for":"filial",active:!e},{title:t.i18n._t("Все филиалы"),"for":"filials",active:e}]}}var s=e("lodash"),l=e("./reviewVm"),c=req("helpers/link"),u=req("helpers/linkURL"),d=req("helpers/firm");t.exports=function(e,t){return e=e||{},e.firm||e.reviews?{firm:i(e.firm,t),list:a(e.reviews,t),reviewsToggle:e.reviewsToggle?r(e.allFilials,t):null,allFilials:e.allFilials}:null}},{"./reviewVm":349,lodash:"lodash"}],351:[function(e,t,n){var a=req("helpers/link");t.exports=function(e,t){e=e||{};var n=req("helpers/route"),i=req("helpers/camel"),o=n.splitRouteName(e.name),r=t.region||{},s=t.i18n,l={name:o.name,note:o.note,type:i(e.subtype),typeName:n.getTransportTypeText(e.subtype,s),advLink:a.getAdvLink(r,"routeCard",{},s.getLang()),city:r.code,color:e.color,noteInTitle:"suburban_train"!==e.subtype};return l}},{}],352:[function(e,t,n){var a=e("lodash"),i=req("helpers/routeSearch"),o=req("helpers/string");t.exports=function(e,t,n,r){function s(e){return 1==e.movements.length&&a.isEmpty(p(e,0))}function l(){return 1==e.length&&s(e[0])?r._t("Пеший маршрут"):"subway"==t.rsType?r._t("Метрополитен"):r._t("Общественный транспорт")}function c(){return"subway"==t.rsType?"subwayRoute":"wayRoute"}function u(e){return"metro"==e||"lightMetro"==e}function d(e){return"suburban_train"==e||"aeroexpress"==e}function h(){return a.map(e,function(e,n){function i(){return"bus"!=t.rsType?[]:a.compact(a.map(e.movements,function(t,n){var a=t.metro?"metro":(p(e,n)||{}).subtype;return o.convertUnderScoreToCamel(a)}))}function r(){return"subway"!=t.rsType?[]:a.compact(a.map(e.movements,function(e){return"passage"==e.type?e.color:null}))}function l(){function i(i,r){function s(){var e=[];return d(i.subtype)&&e.push({text:o.capitalize(_.subtype_name)}),i.comment&&e.push({text:i.comment}),g.metro&&g.metro.line_name&&e.push({text:g.metro.line_name}),g.metro&&(g.metro.boarding_suggest||g.metro.boarding_parts_suggest)&&e.push({type:"metro",coaches:c(g.metro.boarding_parts_suggest,i.color),text:g.metro.boarding_suggest}),g.platforms&&g.platforms.ui_pass_count&&e.push({text:g.platforms.ui_pass_count}),g.metro&&g.metro.ui_penultimate_stop?e.push({text:g.metro.ui_penultimate_stop}):g.platforms&&g.platforms.ui_penultimate_stop&&e.push({text:g.platforms.ui_penultimate_stop}),e}function l(){var e=[];return a.forEach(g.routes,function(t){u(t.subtype)||d(t.subtype)||e.push({name:o.capitalize(t.subtype_name),numbers:t.names})}),e}function h(){if(m){if(0==r)return t.from&&t.from.text;if(r==f-1)return t.to&&t.to.text}return i.name}var g=e.movements[r]||{},_=p(e,r)||{};return{id:i.platform_id,segmentId:r,routeId:n,name:h(),color:i.color,type:i.nextMovementType,hints:s(),transports:l(),once:1==e.movements.length}}var r=a.map(e.waypoints,i);return r}function c(e,t){return a.map([1,2,3],function(n){return{color:a.contains(e,n)?t:""}})}function h(){return e.transfer_comment}e=e||{},e.waypoints=e.waypoints||[],e.movements=e.movements||[];var f=e.waypoints.length,m=s(e);return{routeId:n,time:e.ui_total_duration,transfers:h(),transport:i(),branches:r(),points:l()}})}e=e||[],t=t||{};var p=i.getFirstRouteByMovementKey;return{city:n.code,title:l(),type:c(),routes:h()}},t.exports._args=["model","params","region","$i18n"]},{lodash:"lodash"}],353:[function(e,t,n){var a=e("lodash"),i=req("helpers/linkURL");t.exports=function(e,t,n,o,r){function s(){function t(e){var t=a.take(e.rubrics,3),n=a.pluck(t,"name");return n.join(", ")}function s(e){return r._nt("%1 организация","%1 организации","%1 организаций",e.branch_count)}return a.map(e.items,function(e){var a="rubric";return"general_rubric"==e.type&&(a="rubricListSub"),{name:e.name,id:e.id,description:n?s(e):t(e),seoLink:i(a,{city:o.code,id:e.id,query:e.name})}})}return e?{title:n?t:r._t("Справочник организаций"),rubricsCount:e.total,rubrics:s()}:null}},{lodash:"lodash"}],354:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/schedule");t.exports=function(e,t,n){if(!e)return{};var o=i.is24x7(e),r=o?null:i.getWeekTable(e,t,n),s=a.some(r,function(e){return a.get(e,"parts.second")}),l=!n.getSettings("firms.doNotMergeWorkingHours");return{today:i.getTodayWorktimeText(e,t,n),breaks:l&&i.getTodayBreaktimeText(e,t,n),comment:i.getComment(e),week:r,hasSecondRow:s}},t.exports._args=["schedule","now","$i18n"]},{lodash:"lodash"}],355:[function(e,t,n){"use strict";function a(e){return{type:r.CHANGE_TIME,payload:e}}function i(e){return{type:r.CHANGE_DATE,payload:e}}function o(e){return{type:r.CHANGE_USE_SELECTED,payload:e}}var r=e("../actions/ppnotTime");t.exports={changeTime:a,changeDate:i,changeUseSelected:o}},{"../actions/ppnotTime":356}],356:[function(e,t,n){"use strict";var a="PPNOT_TIME/CHANGE_DATE",i="PPNOT_TIME/CHANGE_TIME",o="PPNOT_TIME/CHANGE_USE_SELECTED";t.exports={CHANGE_TIME:i,CHANGE_DATE:a,CHANGE_USE_SELECTED:o}},{}],357:[function(e,t,n){var a=e("lodash");t.exports=function(e,t){function n(e){return a.filter(e,function(e){return"all"==e.name?"providers"!=r.tab:"inBuilding"==e.name?"inBuilding"==r.tab:"new"==e.name?!("new"!=r.tab&&!r.newTotal):"filials"==e.name?"filials"==r.tab&&r.filials:"providers"==e.name?"providers"==r.tab:!0})}function i(e,t){t=t||"all",a.find(e,{name:t}).active=!0}var o,r={},s=a.once(function(){e.notify("mediaTabShown","new")});return{setData:function(e){if(r=a.extend(r,e),"card"===r.mode)return void(o=[]);var l=!0;void 0==r.total&&(r.totalText=t._t("Результаты поиска"),l=!1),o=[{name:"all",icon:"searchBar_mediaPin",number:r.total,showNumber:l,text:r.totalText},{name:"providers",icon:"searchBar_mediaPin",number:r.total||0,showNumber:!0,text:t._ngg("провайдер","провайдера","провайдеров",r.total||0)},{name:"inBuilding",icon:"searchBar_mediaAddress",text:r.address,hidden:!0},{name:"filials",icon:"searchBar_filials",text:t._nt("%1 филиал","%1 филиала","%1 филиалов",r.filials)},{name:"new",icon:"searchBar_mediaBolt",number:r.newTotal||0,showNumber:!0,text:t._nt("Новая","Новых","Новых",r.newTotal)}],o=n(o),a.find(o,{name:"new"})&&s(),i(o,e.tab),a.each(o,function(e){e[e.name+"Tab"]=!0})},viewContext:function(){return{menuItems:o}}}},t.exports._args=["slot","$i18n"]},{lodash:"lodash"}],358:[function(e,t,n){"use strict";var a=e("redux"),i=e("./ppnotTime"),o=a.combineReducers({ppnotTime:i});t.exports=o},{"./ppnotTime":359,redux:465}],359:[function(e,t,n){"use strict";function a(e,t){var n=void 0===e?r:e,a=t.type,s=t.payload;switch(a){case o.CHANGE_TIME:return i({},n,{time:s});case o.CHANGE_DATE:return i({},n,{date:s});case o.CHANGE_USE_SELECTED:return i({},n,{useSelected:s});default:return n}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=e("../actions/ppnotTime"),r={useSelected:!1};t.exports=a},{"../actions/ppnotTime":356}],360:[function(e,t,n){"use strict";var a=e("redux"),i=e("./reducers"),o=e("redux-thunk")["default"],r=a.createStore(i,a.applyMiddleware(o));t.exports=r},{"./reducers":358,redux:465,"redux-thunk":459}],361:[function(e,t,n){t.exports=function(e,t){function n(){return s||(s=(e.self()||{})["interface"]),s||{}}function a(){i&&(i.dispose(),i=null),clearInterval(o)}var i,o,r,s,l={};l.refresh=function(){e.mod({adsChanging:!0}),e.setTimeout(function(){e.broadcast("googleTagAds:refresh")},400)},l.close=function(){e.mod({cute:!1}),e.setTimeout(function(){a(),n().updateScroll(),e.mod({adsChanging:!1})},300)};var c;return l.create=function(n,o,r){i=e.init("googleTagAds",{type:r||"results",rubrics:n}),i.singleMode=o,i["interface"].onBannerRender(function(n){n?(e.mod().cute?l.close():a(),e.mod().makeReload||l.showFreeSpaceBanner(!0)):(e.mod().cute?e.mod({adsChanging:!1}):e.mod({cute:!0}),l.needRefresh(),c||(c=!0,t.trackEvent("google",["МKB","Show_MKB"])))})},l.get=function(){return i},l.showFreeSpaceBanner=function(t){i&&!t||e.googletag()},l.closeByUser=function(){t.trackEvent("google",["МKB","Close_MKB"]),l.close()},l.needRefresh=function(){if(i&&e.isClient){var t=n().isVisible()&&!(document&&document.hidden);r==t||i.singleMode||(r=t,r?o=e.setInterval(l.refresh,e.config.resultsAdsIntervalRotation):clearInterval(o))}},l},t.exports._args=["slot","$analytics"]},{}],362:[function(e,t,n){t.exports=function(e){return function(t,n){var a=e.notify("isBook"),i=e.element("scroller")[0];if(a&&i){var o,r=n.prev()[0],s=e.block().find(".filters")[0]||e.element("preloader_top")[0],l=n.next()[0],c=l&&l.offsetTop+l.offsetHeight,u=i.scrollTop,d=u+i.offsetHeight;r?o=r.offsetTop:s&&(o=Math.max(s.offsetTop-60,0)),c&&c>d?i.scrollTop=c-(d-u):u>o&&(i.scrollTop=o)}}}},{}],363:[function(e,t,n){var a=e("lodash"),i=req("helpers/model"),o=req("helpers/getInt32");t.exports=function(e,t){return{getParams:function(n,r){if(!n.has("data")||"rubricsNear"==n.get("type"))return null;var s,l,c,u,d,h,p,f,m,g=n.get("type"),_=t.getQuery(),v=n.get("seoData");if(n.get("length")){var y=n.get("firstItem");s=y.name,l=y.org&&y.org.id||y.id,c=y.address&&y.address.building_id,u=y.point,p=n.get("rubricId")&&a.findWhere(y.rubrics,{id:n.get("rubricId")}),p&&(f=p.name),d=i.getCityName(y)}if("inbuild"!=n.get("type")&&"servicing"!=n.get("type")&&(d=""),"servicing"==n.get("type")&&(c=n.get("buildingId")),h=c,f){g="rubric",h=n.get("rubricId");var b=a.find(n.get("contextRubrics"),function(e){return e.id==n.get("rubricId")});m=b&&b.short_id?b.short_id:o(n.get("rubricId"))}return"query/firms"==g&&(g="search"),u=u||{},{cityName:d,type:g,query:_||f,firmName:s,geoName:(v.geoName||"").replace("&nbsp;"," "),buildingName:v.buildingName||"",hasPhoto:n.has("photo"),id:h,filters:e.searchContext.getFilters(),firmId:l,rubricId:n.get("rubricId"),shortId:m,lon:u.lon,lat:u.lat,page:r}}}},t.exports._args=["slot","$appState"]},{lodash:"lodash"}],364:[function(e,t,n){"use strict";function a(e,t){var n=t;return h.map(n,function(t){return i(e,t)})}function i(e,t){return e.has("providersBooklet")&&"internet"===h.get(t,"group")&&(t.providerButton=!0,t.providersInBuildingSeoLink=e.get("providersInBuildingSeoLink")),t}function o(e,t){return e?{expandedView:!0,additional:{ads:h.get(e,"ads.text"),comment:p.getAdsWarning(e,"text"),showAdvWarning:t.advWarning&&!!e.ads,filialsNumber:e.total}}:{}}function r(e){return 200==e.get("code")?"results":e.is("notFound")?"i404":"error"}function s(e){return e.title}function l(e,t,n){return"transport"==t?f.getTransportResultTitle({station:e.counts.station,route:e.counts.route},n):f.getSimpleResultTitle(t,e.count,n)}function c(e,t){return{text:e.title,icon:u(t),mode:t}}function u(e){switch(e){case"geo":return"results-geo";case"transport":return"results-transport";case"firms":default:return"results-firms"}}var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},h=e("lodash"),p=e("../../helpers/firm"),f=e("../../helpers/tabs");t.exports=function(e,t,n,i,u){var h=e.get("headerInfo"),p=e.get("count"),f=e.get("filialsData");return d({title:t?s(h):l(h,e.get("mode"),u),contentPartial:r(e),items:a(e,n),count:p,simple:t,providerSeoLink:e.get("providerSeoLink"),tyresSeoLink:e.get("tyresSeoLink"),mobileHeader:i&&!f&&c(h,e.get("mode"))},o(f,u.getSettings()))},t.exports._args=["model","simple","items","isPhone","$i18n"]},{"../../helpers/firm":"/helpers/firm.js","../../helpers/tabs":"/helpers/tabs.js",lodash:"lodash"}],365:[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/string");t.exports=function(e,t,n){function o(e,t){e=i.escapeRegExp(e);var n=RegExp("("+e+")","i"),a='<span class="selectBox__highlight">$1</span>';return t.replace(n,a)}function r(e){return a.map(e,function(e){return"highlighted"==e.style?o(e.text,e.text):e.text}).join("")}function s(i,o,s){var l=t(i,"widget",{widgetTag:o},function(t,n){if(t||a.isEmpty(n))return s();var i=1,o=a(n.items).compact().map(function(t){var n=(t||{}).hint;if(n&&n.highlighted_text&&n.text){var o=r(n.highlighted_text),s=a.find(e.items,{value:t.full_code});return{index:i++,value:t.full_code,label:o,text:s.label,type:"option"}}return null}).compact().value();return s(o)});n.abortGroup("suggest_widget"),n.add(l,"suggest_widget",!0)}function l(t,n){var i=1,r=a(e.items).compact().map(function(e){var n=o(t,e.label);return n==e.label?null:{index:i++,value:""+e.value,text:e.label,label:n,type:"option"}}).compact().value();n(r)}return function(e,t,n){switch(t=t||{},t.type){case"suggest":return s(e,t.tag,n);case"simple":return l(e,n);default:return n()}}},t.exports._args=["data","$suggestApi","$requestGroups"]},{lodash:"lodash"}],366:[function(e,t,n){"use strict";function a(e){var t=1;return c(e.items).compact().map(function(e){return{index:t++,value:""+e.value,label:""+e.label,text:""+(e.text||""),style:e.style,selected:e.selected,type:"option"}}).value()}function i(e){return{autofocus:!1,disabled:!e.items||!e.items.length||e.forced,multiple:!1,required:!1}}function o(e,t,n){var a=e.defaults;return a&&a.label||(a={label:n._t("Все"),value:""}),a.selected=!t,a}function r(e,t,n){return e?e.label:t.defaults&&t.defaults.label||n._t("Все")}function s(e){return e.icons&&!c.isUndefined(e.icons.arrowIcon)?e.icons.arrowIcon:"select_arrow"}function l(e){return c.isEmpty(e.icons)?null:{searchIcon:e.icons.searchIcon,clearIcon:e.icons.clearIcon}}var c=e("lodash");t.exports=function(e,t){if(!e)return{};var n=c.cloneDeep(e),u=c.find(n.items,{selected:!0});return{items:a(n),attributes:i(n),visibleItemsCount:n.visibleItemsCount||5,defaults:o(n,u,t),itemsCount:n.items&&n.items.length,selectedItemLabel:r(u,n,t),selectedItem:u,icons:l(n),arrowIcon:s(n),placeholder:n.placeholder,name:n.name,showClearButton:n.showClearButton,eraseOnClick:n.eraseOnClick,notShowDefaultValueInDropdown:n.notShowDefaultValueInDropdown,minFilteringLength:n.minFilteringLength||2,trackClass:n.mod?"selectBox__track _scheme_"+n.mod:"selectBox__track"}},t.exports._args=["model","selectedItem","$i18n"]},{lodash:"lodash"}],367:[function(e,t,n){var a=e("lodash");t.exports=function(e,t,n,i){function o(e,t,n){if(a.has(f,["elements",e,t]))return void f.elements[e][t].push(n);this.elements[e]||(this.elements[e]={}),this.elements[e][t]||(this.elements[e][t]=function(){return!0}),f.elements[e]||(f.elements[e]={}),f.elements[e][t]=[];var i=this.elements[e][t]||function(){return{result:!0,stopBubbling:!1}};this.elements[e][t]=function(){var n=u.call(this,e,t,arguments);return n.stopBubbling?n.result:i.apply(this,arguments)},f.elements[e][t].push(n)}function r(e,t){if(f["interface"][e])return void f["interface"][e].push(t);var n=this["interface"][e]||function(){};f["interface"][e]=[t],this["interface"][e]=function(){n.apply(this,arguments);for(var t=[e],a=0;a<arguments.length;a++)t.push(arguments[a]);return p.apply(this,t)}}function s(e,t){if(t){if(f[e])return void f[e].push(t);var n=this[e]||function(){return{}};f[e]=[t],this[e]=function(){var t=n.apply(this,arguments);return d.call(this,e,t)}}}function l(e,t){if(t){if(f[e])return void f[e].push(t);var n=this[e]||function(){return{}};f[e]=[t],this[e]=function(){for(var t=h.call(this,e,arguments),a=[],i=0;i<arguments.length;i++)a.push(arguments[i]);return a.push(t),n.apply(this,a)}}}function c(t,n){a.forEach(e,function(e){if(a.includes(t,e.name)){var i=e.func();i.init&&i.init.apply(this,n),i.elements&&(f.elements||(f.elements={}),a.forOwn(i.elements,function(e,t){a.forOwn(e,function(e,n){o.call(this,t,n,e)},this)},this)),i["interface"]&&(f["interface"]||(f["interface"]={}),a.forOwn(i["interface"],function(e,t){r.call(this,t,e)},this));var c=["viewContext","clientInit","bind","dispatcher"];a.each(c,function(e){s.call(this,e,i[e])},this),l.call(this,"dispose",i.dispose)}},this)}function u(e,t,n){return!a.has(f,["elements",e,t])||a.isEmpty(f.elements[e][t])?{stopBubbling:!1,result:!0}:a.transform(f.elements[e][t],function(e,t){var i=t.apply(this,n);return a.isObject(i)?(e.stopBubbling=!!i.stopBubbling,e.result=!!i.result):(e.stopBubbling=!i,e.result=!!i),!e.stopBubbling},{stopBubbling:!1,result:!0},this)}function d(e,t){if(!a.has(f,e)||a.isEmpty(f[e]))return t;var n=a.reduce(f[e],function(e,t){return t.call(this,e)||e},t,this);return n||t}function h(e,t){var n={};return!a.has(f,e)||a.isEmpty(f[e])?n:a.reduce(f[e],function(e,n){return n.apply(this,t,e)||e},n,this)}function p(e,t){a.has(f,["interface",e])&&!a.isEmpty(f["interface"][e])&&a.each(f["interface"][e],function(e){e.call(this,t)},this)}var f={};c.call(n,t,i)}},{lodash:"lodash"}],368:[function(e,t,n){t.exports=function(e){var t={elements:{input:{keydown:function(t){return e.slot.mod().opened?!0:(46==t.keyCode&&e.setValue(),!0)}}}};return t}},{}],369:[function(e,t,n){var a=e("lodash"),i=req("helpers/string");t.exports=function(e){function t(t){var n={notShowDefaultValueInDropdown:e.vc.notShowDefaultValueInDropdown,items:[]};e.vc.notShowDefaultValueInDropdown||(n.defaults=a.cloneDeep(e.vc.defaults));var o=1,r='<span class="selectBox__highlight">$1</span>';t=i.escapeRegExp(t),""==t&&(t=".*");var s=RegExp("("+t+")","i");return e.slot.invoke(e.viewModel,[e.vc,{processingCallback:function(e){var t=e.label,i={};s.test(t)&&(a.merge(i,e),i.label=t.replace(s,r),i.index=o++,n.items.push(i))}}]),n}function n(n){a.trim(n).length>=e.vc.minFilteringLength?(e.renderDropdownItems(t(a.trimLeft(n))),e.vc.notShowDefaultValueInDropdown?e.slot.element("dropdownItem").first().mod({hovered:!0}):e.slot.element("dropdownItem").filter("._default").next().mod({hovered:!0})):e.renderDropdownItems(e.vc)}function o(e){return e>=48&&57>=e?!0:e>=65&&90>=e?!0:e>=96&&111>=e?!0:e>=186&&222>=e?!0:59==e||61==e||173==e}var r={elements:{wrapper:{keydown:function(t,n){return e.slot.mod().opened?(9!=a.get(t,"keyCode",!1)&&9!=a.get(n,"keyCode",!1)||e.selectItem(),!0):!0}},input:{keydown:function(e){switch(e.keyCode){case 8:case 46:return{stopBubbling:!0,result:!0};default:return!0}},keypress:function(){return e.vc.isDesktop?{stopBubbling:!0,result:!0}:null},keyup:function(t){if(!e.vc.isDesktop)return!0;if(o(t.keyCode)||8==t.keyCode||46==t.keyCode)if(t.preventDefault(),e.slot.mod().opened)n($(this).val());else{var a=$(this).val();8!=t.keyCode&&46!=t.keyCode||(a=""),e.slot.mod({opened:!0}),n(a)}return{stopBubbling:!0,result:!0}},focus:function(){return e.selectInputText(),!0}}}};return r}},{lodash:"lodash"}],370:[function(e,t,n){t.exports=function(e){var t={elements:{wrapper:{keydown:function(t,n){switch(t.keyCode||n.keyCode){case 13:return e.selectItem(),e.slot.notify("focusNext",e.vc.name),!1;default:return!0}}}},"interface":{setFocus:function(){e.slot.element("input").trigger("focus")},selectBoxUpdated:function(t){t===e.vc.name&&e.slot.element("input").trigger("focus")}}};return t}},{}],371:[function(e,t,n){function a(e,t){i.each(e.items,function(e){e.items&&e.items.length?a(e,t):t(e)})}var i=e("lodash"),o=1,r="";t.exports=function(e,t,n){return e.error?e:(a(e,function(e){e.index=o++,t&&t.processingCallback&&t.processingCallback(e),e.selected&&(r=e.label),t.onInit&&("string"!=typeof e.value&&(e.value=""+e.value),"string"!=typeof e.label&&(e.label=""+e.label))}),t&&t.onInit&&(e.attributes||(e.attributes={autofocus:!1,disabled:!1,multiple:!1,required:!1}),e.visibleItemsCount||(e.visibleItemsCount=5),e.defaults&&e.defaults.label||(e.defaults={label:n._t("Все"),value:""}),e.items&&e.items.length||(e.attributes.disabled=!0)),r?(e.defaults.selected=!1,e.selectedItemLabel=r):(e.defaults.selected=!0,e.selectedItemLabel=e.defaults.label),e.itemsCount=o,o=1,r="",e.icons&&!i.isUndefined(e.icons.arrowIcon)?e.arrowIcon=e.icons.arrowIcon:e.arrowIcon="select_arrow",e.trackClass=e.type?"selectBox2__track _scheme_"+e.type:"selectBox2__track",e.minFilteringLength=e.minFilteringLength?e.minFilteringLength:2,e.tabindexPresent=!i.isUndefined(e.tabIndex),e)},t.exports._args=["model","params","$i18n"]},{lodash:"lodash"}],372:[function(e,t,n){"use strict";var a=req("helpers/link");t.exports=function(e,t){if(e.error)return e;var n=t.i18n,i=t.region,o={name:e.name,type:t.transportType,typeName:e.transportTypeName,advLink:a.getAdvLink(i,"stopCard",{},n.getLang()),routesModules:t.routesModules};return o}},{}],373:[function(e,t,n){"use strict";t.exports={ru:{text:"Мы&nbsp;подготовили интересные места, которые помогут провести лето ярко&nbsp;и, возможно, заменят отпуск у&nbsp;моря. А&nbsp;если соберётесь в&nbsp;столицу, посетите самый большой в&nbsp;Европе океанариум.",location:"ru",sponsorLogo:!0,links:[{text:"Зона&#13;&#10;аквариума",link:"http://www.moskvarium.ru/ru/aquarium",icon:"summer2016-star",type:"star"},{text:"Центр плавания&#13;&#10;с&nbsp;дельфинами",link:"http://www.moskvarium.ru/ru/swimming",icon:"summer2016-dolphin",type:"dolphin"},{text:"Купить&#13;&#10;билет",link:"http://tickets.moskvarium.ru/",icon:"summer2016-ticket",type:"ticket"}]},moscow:{text:"Места и&nbsp;компании, которые интересно посетить в&nbsp;жаркое время года: красивые парки, кафе с&nbsp;верандами, открытые бассейны, пляжи и&nbsp;самый большой в&nbsp;Европе океанариум&nbsp;&mdash; &laquo;Москвариум&raquo;.",location:"ru",sponsorLogo:!0,links:[{text:"Зона&#13;&#10;аквариума",link:"http://www.moskvarium.ru/ru/aquarium",icon:"summer2016-star",type:"star"},{text:"Центр плавания&#13;&#10;с&nbsp;дельфинами",link:"http://www.moskvarium.ru/ru/swimming",icon:"summer2016-dolphin",type:"dolphin"},{text:"Купить&#13;&#10;билет",link:"http://tickets.moskvarium.ru/",icon:"summer2016-ticket",type:"ticket"}]},kz:{text:"Жазғы уақытты қызық өткізүге арналған топтамалар: өзіңізге жаңа және таныс орындар мен ұйымдарды таңдаңыз. Жаңа жетістіктерге шабыттаныңыз  – тіпті ең батыл ойларды ForteBank жүзеге асыруға көмектеседі",location:"kz",sponsorLogo:!0,nationalHeading:"Қалаға жаз келді",additional:"Лицензия Национального Банка Республики Казахстан<br> №1.2.29/197/36 от 27.02.2015 выдана АО «ForteBank».",nationalLang:[{lang:"кз",active:!0},{lang:"ру",common:!0}],links:[{text:"Бақытыңа қол жеткіз!",desc:"Кепілсіз несие ал!",link:"https://mybank.fortebank.com/retail/apps/ApplicationItem.aspx?id=AppRetailCredit_Bonus",icon:"summer2016-crystal",type:"crystal"}]},kz_common:{text:"Подборки, которые помогут провести лето интересно: открыть новые и&nbsp;выбрать уже знакомые места и&nbsp;организации. Вдохновляйтесь на&nbsp;новые свершения&nbsp;&mdash; даже самые смелые идеи поможет реализовать Fortebank",location:"kz",sponsorLogo:!0,additional:"Лицензия Национального Банка Республики Казахстан<br> №1.2.29/197/36 от 27.02.2015 выдана АО «ForteBank».",nationalLang:[{lang:"кз"},{lang:"ру",common:!0,active:!0}],links:[{text:"Осуществить мечту!",desc:"Получить кредит без залога",link:"https://mybank.fortebank.com/retail/apps/ApplicationItem.aspx?id=AppRetailCredit_Bonus",icon:"summer2016-crystal",type:"crystal"}]},kg:{text:"Мы&nbsp;подготовили интересные места, которые помогут провести лето ярко и&nbsp;незабываемо. Вдохновляйтесь на&nbsp;новые свершения, и&nbsp;не&nbsp;бойтесь устать&nbsp;&mdash; восстановить силы поможет СПА-комплекс &laquo;С&nbsp;лёгким&nbsp;паром!&raquo;.",location:"kg",note:"Реклама",sponsorLogo:!0,links:[{text:"О комплексе",link:"http://slegkim-parom.kg/о-нас/",icon:"summer2016-leaf",type:"leaf"},{text:"СПА-процедуры",link:"http://slegkim-parom.kg/spa-процедуры-женское-отделение/",icon:"summer2016-spa",type:"spa"},{text:"Центр красоты",link:"http://slegkim-parom.kg/женское-отделение/",icon:"summer2016-mirror",type:"mirror"}]},ua:{text:"Места и&nbsp;компании, которые интересно посетить в&nbsp;жаркое время года: красивые парки, кафе с&nbsp;верандами, открытые бассейны и&nbsp;пляжи. Выбирайте, где отдыхать с&nbsp;друзьями и&nbsp;семьёй.",location:"ua"}}},{}],374:[function(e,t,n){"use strict";function a(e,t,n){switch(e){case"parking":case"geo":return p.getTitle(t,n);case"firms":return f.getName(t.name_ex);case"geolocation":case"station_platform":case"station":case"globalCity":case"globalCountry":case"ppnotEntrance":case"apartment":case"poi":case"leg":case"waypoint":case"floors":return t.name;case"transport":return"station_entrance"==t.type?p.getTitle(t,n):t.name;case"station_entrance":return p.getTitle(t,n);case"traffic":if(t.speed)return n._gg("%1 км/ч",t.speed);break;case"extraLayers":return t.properties.name}return null}function i(e,t,n){switch(e){case"globalCity":case"globalCountry":case"waypoint":case"leg":case"parking":return t.description;case"geo":return"building"==t.type?h.get(p.getBuildingCompositeType(t,n),"text"):p.getShortDescription(t,n);case"station_platform":case"station":return m.getStationDesc(t,n);case"station_entrance":return p.getShortDescription(t,n);case"transport":return"station_entrance"==t.type?p.getShortDescription(t,n):m.getStationDesc(t,n)}return null}function o(e,t){return!e||0>=e-1?null:t._nt("И ещё %1 организация","И ещё %1 организации","И ещё %1 организаций",e-1)}function r(e,t){return e?t._nt("%1 организация в здании","%1 организации в здании","%1 организаций в здании",e):null}function s(e){var t=h.pluck(h.flatten(e.stop_factors,!0),"name");return h.isEmpty(t)?null:t}function l(e,t){return"firms"==e||"poi"==e&&"branch"==t.type}function c(e,t){var n="view";l(e,t)&&(n="common");var a=g.getPhotoAlbum({external_content:t.external_content},n,"128x128");return(a||{}).preview}function u(e,t,n,a){if("geo"==e){var i=p.getTitle(t,a),o=f.getAddress(t.address,a.getFormats("address.order"));if(i!=o)return o}return l(e,t)?g.getFirmAddress(t,{format:a.getFormats("address.order"),infoStrategy:a.getSettings("geoobjects.infoStrategy"),canUseDrilldown:!0,useDrilldownInAddress:a.getSettings("firms.useDrilldownInAddress"),regionName:n}):null}function d(e,t,n,a){if(!e)return null;var i=_.getNow(n.getRegion());return{status:_.getShortStatusText(t,i,a),scheduleIcon:_.isOpened(t,i,a)?"media_working-hours-opened":"media_working-hours-closed"}}var h=e("lodash"),p=req("helpers/geo"),f=req("helpers/outputify"),m=req("helpers/station"),g=req("helpers/firm"),_=req("helpers/schedule");t.exports=function(e,t,n){e=e||{};var l=e.data||{};return{title:a(e.type,l,t),adv:l.is_advertising,description:i(e.type,l,t),rating:l.rating,attrs:s(l),price:l.price,currency:l.currency,moreFirms:"firms"==e.type?o(e.count,t):r(l.branchesCount,t),photosPreview:c(e.type,l),address:u(e.type,l,n.getRegion().name,t),schedule:d(l.hasScheduleFilters,l.schedule,n,t),isMultiple:e.count>1}},t.exports._args=["info","$i18n","$regionManager"]},{lodash:"lodash"}],375:[function(e,t,n){"use strict";t.exports={abakan:{parade:"10:00",firework:"22:50",hasTrafficData:!0},arkhangelsk:{parade:"13:00",firework:"22:00",hasTrafficData:!0},barnaul:{parade:"10:00",firework:"22:30",hasTrafficData:!0},belgorod:{parade:"10:00",firework:"22:00"},biysk:{parade:"10:00",firework:"22:00",hasTrafficData:!0},blagoveshensk:{parade:"10:00",firework:"21:50",hasTrafficData:!0},bratsk:{parade:"11:40",firework:"17:00",hasTrafficData:!0},ekaterinburg:{parade:"10:00",firework:"22:30",hasTrafficData:!0},izhevsk:{parade:"10:00",firework:"22:00",hasTrafficData:!0},kaluga:{parade:"10:00",firework:"22:00",hasTrafficData:!0},krasnodar:{parade:"11:00",firework:"21:30",hasTrafficData:!0},krasnoyarsk:{parade:"10:00",firework:"22:45",hasTrafficData:!0},kemerovo:{parade:"12:00",firework:"22:00"},magnitogorsk:{parade:"10:00",firework:"23:00",hasTrafficData:!0},miass:{parade:"11:00",firework:"22:30"},moscow:{parade:"10:00",firework:"22:00",hasTrafficData:!0},murmansk:{parade:"10:00",firework:"22:00"},novokuznetsk:{parade:"10:00",firework:"23:00",hasTrafficData:!0},novorossiysk:{parade:"10:00",firework:"22:00",hasTrafficData:!0},novosibirsk:{parade:"10:00",firework:"22:00",hasTrafficData:!0},noyabrsk:{parade:"11:30",firework:"22:00",hasTrafficData:!0},omsk:{parade:"11:00",firework:"23:00",hasTrafficData:!0},perm:{parade:"10:00",firework:"23:00",hasTrafficData:!0},pskov:{parade:"10:00",firework:"23:00"},rostov:{parade:"10:00",firework:"22:00",hasTrafficData:!0},samara:{parade:"10:00",firework:"22:30"},surgut:{parade:"10:00",hasTrafficData:!0},togliatti:{parade:"10:00",firework:"22:00",hasTrafficData:!0},ufa:{parade:"9:30",firework:"23:00",hasTrafficData:!0},chelyabinsk:{parade:"12:00",firework:"22:00"}}},{}],376:[function(e,t,n){function a(e,t,n){var a,r=e.precipitation.value,l=e.partDay,h=d[l],p=t[h];return a=i.capitalize(o.getPartDayInstrMap(n)[p.partDay]),p.wind.speed>20||e.wind.speed>20?a=n._t("Штормовое предупреждение"):1==p.precipitation.type&&0!=p.precipitation.value&&0==r?(h==c&&(a=n._t("Вечером дождь")),h!=s&&h!=u||(a=n._t("Утром дождь"))):p.wind.speed>=11&&p.wind.speed<=20&&(h==c&&(a=n._t("Вечером сильный ветер")),h==s&&(a=n._t("Сегодня сильный ветер")),h==u&&(a=n._t("Завтра сильный ветер"))),a}var i=e("lodash"),o=req("helpers/weather"),r=0,s=1,l=2,c=3,u=5,d={};d[r]=s,d[s]=c,d[l]=c,d[c]=u,n.getForecastInfo=function(e,t){var n=e.now.weather.partDay,r=d[n],s=e.forecast.slice(0,2),l=i(s[0].weather).concat(s[1].weather).value(),c=a(e.now.weather,l,t),u={dayPartText:c,temp:o.formatTemperature(l[r].temp,{withoutGrads:!0})};return u},t.exports._args=["weatherNow","twoDayForecast","$i18n"]},{lodash:"lodash"}],377:[function(e,t,n){var a=e("lodash"),i=req("helpers/weather"),o=e("./weatherUtils"),r=req("helpers/linkURL");t.exports=function(e,t,n,s){if(!t)return null;var l,c,u=a.get(t,"now.weather.temp"),d=i.formatTemperature(u,{withoutGrads:!0}),h=i.getWeatherIconData(a.get(t,"now.weather")).icon,p=o.getForecastInfo(t,s),f=r("weather",{city:n.code}),m=!1,g=!1;if(e.showLink){var _=s.getSettings().weather||{},v=i.findPromoLink(_.promoLinks,u,n.code);l=v&&v.dashboardText,l&&v.searchText?(c=r("search",{city:n.code,query:v.searchText}),g=!0):m=!0}return{temperature:d,icon:h,dayPart:p.dayPartText,forecastTemperature:p.temp,showForecastLink:m,showPromoLink:g,forecastUrl:f,promoText:l,promoUrl:c}},t.exports._args=["params","data","region","$i18n"]},{"./weatherUtils":376,lodash:"lodash"}],378:[function(e,t,n){"use strict";var a=e("lodash"),i=e("moment"),o=req("helpers/time");t.exports=function(e,t){function n(t){var n=o.getFormattedTime(e,""),a=i(n).diff(i(t),"days");return 1>a?{isTodayNews:!0}:365>a?{value:i(t).from(n)}:{value:i(t).format("D MMMM YYYY")}}function r(t){var i=a.cloneDeep(t);return i.date={raw:t.date,formatted:n(t.date)},i.link&&(i.link.href=i.link.href.replace("%regionCode%",e.code)),i}return r(t)}},{lodash:"lodash",moment:"moment"}],379:[function(e,t,n){"use strict";var a=e("lodash"),i=e("./prepareNewsItem");t.exports=function(e,t){var n=a.get(e,"news.newsItems"),o=a.map(n,a.partial(i,t)),r=a.map(e.socialLinks,function(e,t){return{mods:"_type_"+t,icon:"whatsNew_socials_"+t,name:t,url:e}});return{news:o,socialLinks:r}}},{"./prepareNewsItem":378,lodash:"lodash"}],380:[function(e,t,n){var a=e("lodash"),i=req("helpers/string"),o=req("helpers/tabs"),r=req("helpers/linkURL");t.exports=function(e,t,n,s,l,c){function u(e,t){var n=r("search",{city:v.code,query:s,tab:e});return{link:{href:n,"class":"wizard__moreLink _undashed","data-mode":t}}}function d(e,t){var n=o.findTextType(e,t),a=o.findTypeCount(e,n),i={firms:l._hnt("Также найдена / %link{Link %1 организация}","Также найдено / %link{Link %1 организации}","Также найдено / %link{Link %1 организаций}",a,u("firms",t)),geo:l._hnt("Также найдено / %link{Link %1 место на карте}","Также найдено / %link{Link %1 места на карте}","Также найдено / %link{Link %1 мест на карте}",a,u("geo",t)),transport:l._hnt("Также найдены / %link{Link %1 маршрут и остановка}","Также найдено / %link{Link %1 маршрута и остановки}","Также найдено / %link{Link %1 маршрутов и остановок}",a,u("transport",t)),
station:l._hnt("Также найдена / %link{Link %1 остановка}","Также найдено / %link{Link %1 остановки}","Также найдено / %link{Link %1 остановок}",a,u("transport",t)),route:l._hnt("Также найден / %link{Link %1 маршрут}","Также найдено / %link{Link %1 маршрута}","Также найдено / %link{Link %1 маршрутов}",a,u("transport",t))};return i[n]}function h(e,t){var n=o.findTextType(e,t),a=o.findTypeCount(e,n),i={firms:l._hnt("и %link{Link %1 организация}","и %link{Link %1 организации}","и %link{Link %1 организаций}",a,u("firms",t)),geo:l._hnt("и %link{Link %1 место на карте}","и %link{Link %1 места на карте}","и %link{Link %1 мест на карте}",a,u("geo",t)),transport:l._hnt("и %link{Link %1 маршрут и остановка}","и %link{Link %1 маршрута и остановки}","и %link{Link %1 маршрутов и остановок}",a,u("transport",t)),station:l._hnt("и %link{Link %1 остановка}","и %link{Link %1 остановки}","и %link{Link %1 остановок}",a,u("transport",t)),route:l._hnt("и %link{Link %1 маршрут}","и %link{Link %1 маршрута}","и %link{Link %1 маршрутов}",a,u("transport",t))};return i[n]}function p(e){return a.find(a.difference(["firms","geo","transport"],[e]),function(e){return void 0!==t[e]})}function f(e){if(a.isEmpty(e))return null;var t={},n=p();if(a.size(e)>1){t.generalText=d(e,n).replace("/ ","");var i=p(n);t.alsoText=h(e,i)}else{var o=d(e,n).split(" / ");t.generalText=o[0],t.alsoText=o[1]}return t}function m(e,t){return a.map(t,function(t){return a.contains(e,t)?i.format('<span class="wizard__guessNearbySearch">%1</span>',t):t}).join(", ")}function g(e){if(a.isEmpty(e.settlements)&&a.isEmpty(e.findBySettlement))return null;var t=e.settlements,n=e.findBySettlement,i=a.union(n,a.difference(t,n)).slice(0,2);return{countElse:t.length>i.length?t.length-i.length:null,text:m(n,i)}}function _(){return a.isEmpty(n)?null:a.map(n.slice(0,1),function(e){return{id:e.id,text:e.name,code:e.code,nearby:g(e),href:r("city",{city:e.code})}})}t=t||{};var v=c.getRegion();return{cities:_(),more:f(t),twoLinks:a.values(t).length>1}},t.exports._args=["slot","summary","regions","query","$i18n","$regionManager"]},{lodash:"lodash"}],381:[function(e,t,n){var a=e("lodash"),i=req("helpers/linkURL");t.exports=function(e,t,n,o){function r(e,t){var n=t.toLowerCase(),a=e.toLowerCase(),i=n.indexOf(a);if(-1!=i){var o=a.length,r=t.substring(0,i),s=t.substring(i,i+o),l=t.substring(i+o);return r+'<span class="world__highlight">'+s+"</span>"+l}return t}function s(e){var t=a.findWhere(e,{style:"highlighted"});return t?t:a.findWhere(e,{style:"normal"})}function l(e,t){return a(e).each(function(e){c(e,t)}).sortByOrder(["selected","regionsCount","citiesCount"],[!1,!1,!1]).value()}function c(e,t){return e.regions=a.map(e.regions,u),t?e.citiesCount=e.regionsCount:e.regions=a.sortBy(e.regions,"name"),e}function u(e){e=a.cloneDeep(e);var t=e.redirectDomain?o._config("projectURL",e.country_code):"";return e.logo="logo_s_"+e.code,e.url=i("city",{city:e.code},t),a.each(e.highlighted,function(t){if(t){var n=(s(t)||{}).text,i=r(n,e.name),o=a.map(e.settlements,function(e){return r(n,e)});i==e.name&&o.join()==e.settlements.join()&&(i=r(e.name,e.name)),e.name=i,e.settlements=o}}),e}function d(e){return a.isEmpty(e)?null:{items:[{name:o._gg("Мои города"),code:"favorites",citiesCount:e.length,regions:a.map(e,u)}]}}return{countries:{items:l(e,n)},favorites:d(t)}},t.exports._args=["countries","favoritesCities","filtered","$i18n"]},{lodash:"lodash"}],382:[function(e,t,n){t.exports=function(e){return e=e||{},{location:{logo:"logo_s_"+e.code,name:e.name,id:e.id}}}},{}],383:[function(e,t,n){(function(e){!function(){function n(e){var t=!1;return function(){if(t)throw Error("Callback was already called.");t=!0,e.apply(a,arguments)}}var a,i,o={};a=this,null!=a&&(i=a.async),o.noConflict=function(){return a.async=i,o};var r=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},s=function(e,t){if(e.map)return e.map(t);var n=[];return r(e,function(e,a,i){n.push(t(e,a,i))}),n},l=function(e,t,n){return e.reduce?e.reduce(t,n):(r(e,function(e,a,i){n=t(n,e,a,i)}),n)},c=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};void 0!==e&&e.nextTick?(o.nextTick=e.nextTick,"undefined"!=typeof setImmediate?o.setImmediate=setImmediate:o.setImmediate=o.nextTick):"function"==typeof setImmediate?(o.nextTick=function(e){setImmediate(e)},o.setImmediate=o.nextTick):(o.nextTick=function(e){setTimeout(e,0)},o.setImmediate=o.nextTick),o.each=function(e,t,a){if(a=a||function(){},!e.length)return a();var i=0;r(e,function(o){t(o,n(function(t){t?(a(t),a=function(){}):(i+=1,i>=e.length&&a(null))}))})},o.forEach=o.each,o.eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var a=0,i=function(){t(e[a],function(t){t?(n(t),n=function(){}):(a+=1,a>=e.length?n(null):i())})};i()},o.forEachSeries=o.eachSeries,o.eachLimit=function(e,t,n,a){var i=u(t);i.apply(null,[e,n,a])},o.forEachLimit=o.eachLimit;var u=function(e){return function(t,n,a){if(a=a||function(){},!t.length||0>=e)return a();var i=0,o=0,r=0;!function s(){if(i>=t.length)return a();for(;e>r&&o<t.length;)o+=1,r+=1,n(t[o-1],function(e){e?(a(e),a=function(){}):(i+=1,r-=1,i>=t.length?a():s())})}()}},d=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[o.each].concat(t))}},h=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[u(e)].concat(n))}},p=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[o.eachSeries].concat(t))}},f=function(e,t,n,a){var i=[];t=s(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n,a){i[e.index]=a,t(n)})},function(e){a(e,i)})};o.map=d(f),o.mapSeries=p(f),o.mapLimit=function(e,t,n,a){return m(t)(e,n,a)};var m=function(e){return h(e,f)};o.reduce=function(e,t,n,a){o.eachSeries(e,function(e,a){n(t,e,function(e,n){t=n,a(e)})},function(e){a(e,t)})},o.inject=o.reduce,o.foldl=o.reduce,o.reduceRight=function(e,t,n,a){var i=s(e,function(e){return e}).reverse();o.reduce(i,t,n,a)},o.foldr=o.reduceRight;var g=function(e,t,n,a){var i=[];t=s(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&i.push(e),t()})},function(e){a(s(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};o.filter=d(g),o.filterSeries=p(g),o.select=o.filter,o.selectSeries=o.filterSeries;var _=function(e,t,n,a){var i=[];t=s(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||i.push(e),t()})},function(e){a(s(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};o.reject=d(_),o.rejectSeries=p(_);var v=function(e,t,n,a){e(t,function(e,t){n(e,function(n){n?(a(e),a=function(){}):t()})},function(e){a()})};o.detect=d(v),o.detectSeries=p(v),o.some=function(e,t,n){o.each(e,function(e,a){t(e,function(e){e&&(n(!0),n=function(){}),a()})},function(e){n(!1)})},o.any=o.some,o.every=function(e,t,n){o.each(e,function(e,a){t(e,function(e){e||(n(!1),n=function(){}),a()})},function(e){n(!0)})},o.all=o.every,o.sortBy=function(e,t,n){o.map(e,function(e,n){t(e,function(t,a){t?n(t):n(null,{value:e,criteria:a})})},function(e,t){if(e)return n(e);var a=function(e,t){var n=e.criteria,a=t.criteria;return a>n?-1:n>a?1:0};n(null,s(t.sort(a),function(e){return e.value}))})},o.auto=function(e,t){t=t||function(){};var n=c(e);if(!n.length)return t(null);var a={},i=[],s=function(e){i.unshift(e)},u=function(e){for(var t=0;t<i.length;t+=1)if(i[t]===e)return void i.splice(t,1)},d=function(){r(i.slice(0),function(e){e()})};s(function(){c(a).length===n.length&&(t(null,a),t=function(){})}),r(n,function(n){var i=e[n]instanceof Function?[e[n]]:e[n],h=function(e){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1&&(i=i[0]),e){var s={};r(c(a),function(e){s[e]=a[e]}),s[n]=i,t(e,s),t=function(){}}else a[n]=i,o.setImmediate(d)},p=i.slice(0,Math.abs(i.length-1))||[],f=function(){return l(p,function(e,t){return e&&a.hasOwnProperty(t)},!0)&&!a.hasOwnProperty(n)};if(f())i[i.length-1](h,a);else{var m=function(){f()&&(u(m),i[i.length-1](h,a))};s(m)}})},o.waterfall=function(e,t){if(t=t||function(){},e.constructor!==Array){var n=Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();var a=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),r=e.next();r?i.push(a(r)):i.push(t),o.setImmediate(function(){e.apply(null,i)})}}};a(o.iterator(e))()};var y=function(e,t,n){if(n=n||function(){},t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var a={};e.each(c(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),a[e]=i,n(t)})},function(e){n(e,a)})}};o.parallel=function(e,t){y({map:o.map,each:o.each},e,t)},o.parallelLimit=function(e,t,n){y({map:m(t),each:u(t)},e,n)},o.series=function(e,t){if(t=t||function(){},e.constructor===Array)o.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var n={};o.eachSeries(c(e),function(t,a){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[t]=i,a(e)})},function(e){t(e,n)})}},o.iterator=function(e){var t=function(n){var a=function(){return e.length&&e[n].apply(null,arguments),a.next()};return a.next=function(){return n<e.length-1?t(n+1):null},a};return t(0)},o.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var b=function(e,t,n,a){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){a(e,i)})};o.concat=d(b),o.concatSeries=p(b),o.whilst=function(e,t,n){e()?t(function(a){return a?n(a):void o.whilst(e,t,n)}):n()},o.doWhilst=function(e,t,n){e(function(a){return a?n(a):void(t()?o.doWhilst(e,t,n):n())})},o.until=function(e,t,n){e()?n():t(function(a){return a?n(a):void o.until(e,t,n)})},o.doUntil=function(e,t,n){e(function(a){return a?n(a):void(t()?n():o.doUntil(e,t,n))})},o.queue=function(e,t){function a(e,n,a,i){n.constructor!==Array&&(n=[n]),r(n,function(n){var r={data:n,callback:"function"==typeof i?i:null};a?e.tasks.unshift(r):e.tasks.push(r),e.saturated&&e.tasks.length===t&&e.saturated(),o.setImmediate(e.process)})}void 0===t&&(t=1);var i=0,s={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,push:function(e,t){a(s,e,!1,t)},unshift:function(e,t){a(s,e,!0,t)},process:function(){if(i<s.concurrency&&s.tasks.length){var t=s.tasks.shift();s.empty&&0===s.tasks.length&&s.empty(),i+=1;var a=function(){i-=1,t.callback&&t.callback.apply(t,arguments),s.drain&&s.tasks.length+i===0&&s.drain(),s.process()},o=n(a);e(t.data,o)}},length:function(){return s.tasks.length},running:function(){return i}};return s},o.cargo=function(e,t){var n=!1,a=[],i={tasks:a,payload:t,saturated:null,empty:null,drain:null,push:function(e,n){e.constructor!==Array&&(e=[e]),r(e,function(e){a.push({data:e,callback:"function"==typeof n?n:null}),i.saturated&&a.length===t&&i.saturated()}),o.setImmediate(i.process)},process:function l(){if(!n){if(0===a.length)return void(i.drain&&i.drain());var o="number"==typeof t?a.splice(0,t):a.splice(0),c=s(o,function(e){return e.data});i.empty&&i.empty(),n=!0,e(c,function(){n=!1;var e=arguments;r(o,function(t){t.callback&&t.callback.apply(null,e)}),l()})}},length:function(){return a.length},running:function(){return n}};return i};var k=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&r(n,function(t){console[e](t)}))}]))}};o.log=k("log"),o.dir=k("dir"),o.memoize=function(e,t){var n={},a={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),r=t.apply(null,i);r in n?o.apply(null,n[r]):r in a?a[r].push(o):(a[r]=[o],e.apply(null,i.concat([function(){n[r]=arguments;var e=a[r];delete a[r];for(var t=0,i=e.length;i>t;t++)e[t].apply(null,arguments)}])))};return i.memo=n,i.unmemoized=e,i},o.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},o.times=function(e,t,n){for(var a=[],i=0;e>i;i++)a.push(i);return o.map(a,t,n)},o.timesSeries=function(e,t,n){for(var a=[],i=0;e>i;i++)a.push(i);return o.mapSeries(a,t,n)},o.compose=function(){var e=Array.prototype.reverse.call(arguments);return function(){var t=this,n=Array.prototype.slice.call(arguments),a=n.pop();o.reduce(e,n,function(e,n,a){n.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);a(e,t)}]))},function(e,n){a.apply(t,[e].concat(n))})}};var w=function(e,t){var n=function(){var n=this,a=Array.prototype.slice.call(arguments),i=a.pop();return e(t,function(e,t){e.apply(n,a.concat([t]))},i)};if(arguments.length>2){var a=Array.prototype.slice.call(arguments,2);return n.apply(this,a)}return n};o.applyEach=d(w),o.applyEachSeries=p(w),o.forever=function(e,t){function n(a){if(a){if(t)return t(a);throw a}e(n)}n()},"undefined"!=typeof define&&define.amd?define([],function(){return o}):void 0!==t&&t.exports?t.exports=o:a.async=o}()}).call(this,e("_process"))},{_process:396}],384:[function(e,t,n){(function(e,a){!function(e){if("object"==typeof n&&void 0!==t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i;"undefined"!=typeof window?i=window:void 0!==a?i=a:"undefined"!=typeof self&&(i=self),i.Promise=e()}}(function(){var t,n,i;return function o(e,t,n){function a(r,s){if(!t[r]){if(!e[r]){var l="function"==typeof _dereq_&&_dereq_;if(!s&&l)return l(r,!0);if(i)return i(r,!0);var c=Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=t[r]={exports:{}};e[r][0].call(u.exports,function(t){var n=e[r][1][t];return a(n?n:t)},u,u.exports,o,e,t,n)}return t[r].exports}for(var i="function"==typeof _dereq_&&_dereq_,r=0;r<n.length;r++)a(n[r]);return a}({1:[function(e,t,n){"use strict";t.exports=function(e){function t(e){var t=new n(e),a=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),a}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(t,n,a){"use strict";function i(){this._isTickUsed=!1,this._lateQueue=new d(16),this._normalQueue=new d(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=u}function o(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function r(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function s(e){this._normalQueue._pushOne(e),this._queueTick()}var l;try{throw Error()}catch(c){l=c}var u=t("./schedule"),d=t("./queue"),h=t("./util");i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){h.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)),e.exit(2)):this.throwLater(t)},i.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(n){throw Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},h.hasDevTools?(i.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?o.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},i.prototype.invoke=function(e,t,n){this._trampolineEnabled?r.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},i.prototype.settlePromises=function(e){this._trampolineEnabled?s.call(this,e):this._schedule(function(){e._settlePromises()})}):(i.prototype.invokeLater=o,i.prototype.invoke=r,i.prototype.settlePromises=s),i.prototype.invokeFirst=function(e,t,n){this._normalQueue.unshift(e,t,n),this._queueTick()},i.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),a=e.shift();t.call(n,a)}else t._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},n.exports=i,n.exports.firstLineError=l},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,a){var i=!1,o=function(e,t){this._reject(t)},r=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},s=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)},l=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=a.propagateFromFunction(),e.prototype._boundValue=a.boundValueFunction());var c=n(o),u=new e(t);u._propagateFrom(this,1);var d=this._target();if(u._setBoundTo(c),c instanceof e){var h={promiseRejectionQueued:!1,promise:u,target:d,bindingPromise:c};d._then(t,r,void 0,u,h),c._then(s,l,void 0,u,h),u._setOnCancel(c)}else u._resolveCallback(d);return u},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";function a(){try{Promise===o&&(Promise=i)}catch(e){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=e("./promise")();o.noConflict=a,t.exports=o},{"./promise":22}],5:[function(e,t,n){"use strict";var a=Object.create;if(a){var i=a(null),o=a(null);i[" size"]=o[" size"]=0}t.exports=function(t){function n(e,n){var a;if(null!=e&&(a=e[n]),"function"!=typeof a){var i="Object "+s.classString(e)+" has no method '"+s.toString(n)+"'";throw new t.TypeError(i)}return a}function a(e){var t=this.pop(),a=n(e,t);return a.apply(e,this)}function i(e){return e[this]}function o(e){var t=+this;return 0>t&&(t=Math.max(0,t+e.length)),e[t]}var r,s=e("./util"),l=s.canEvaluate;s.isIdentifier;t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(a,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=o;else if(l){var a=r(e);t=null!==a?a:i}else t=i;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,a,i){var o=e("./util"),r=o.tryCatch,s=o.errorObj,l=t._async;t.prototype["break"]=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e.isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n.isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this.isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var a=r(e).call(this._boundValue());a===s&&(this._attachExtraTrace(a.e),l.throwLater(a.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),l.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){function n(e,n,s){return function(l){var c=s._boundValue();e:for(var u=0;u<e.length;++u){var d=e[u];if(d===Error||null!=d&&d.prototype instanceof Error){if(l instanceof d)return o(n).call(c,l)}else if("function"==typeof d){var h=o(d).call(c,l);if(h===r)return h;if(h)return o(n).call(c,l)}else if(a.isObject(l)){for(var p=i(d),f=0;f<p.length;++f){var m=p[f];if(d[m]!=l[m])continue e}return o(n).call(c,l)}}return t}}var a=e("./util"),i=e("./es5").keys,o=a.tryCatch,r=a.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){function t(){this._trace=new t.CapturedTrace(a())}function n(){return i?new t:void 0}function a(){var e=o.length-1;return e>=0?o[e]:void 0}var i=!1,o=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=o.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=n,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var n=e.prototype._pushContext,o=e.prototype._popContext,r=e._peekContext,s=e.prototype._peekContext,l=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=o,e._peekContext=r,e.prototype._peekContext=s,e.prototype._promiseCreated=l,i=!1},i=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=a,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],9:[function(t,n,i){"use strict";n.exports=function(n,i){function o(e,t,n){var a=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+F.toString(e));a._attachCancellationCallback(e)})}catch(i){return i}}function r(e){if(!this.isCancellable())return this;var t=this._onCancel();void 0!==t?F.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function s(){return this._onCancelField}function l(e){this._onCancelField=e}function c(){this._cancellationParent=void 0,this._onCancelField=void 0}function u(e,t){if(0!==(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function d(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function h(){var e=this._boundTo;return void 0!==e&&e instanceof n?e.isFulfilled()?e.value():void 0:e}function p(){this._trace=new j(this._peekContext())}function f(e,t){if(O(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var a=x(e);F.notEnumerableProp(e,"stack",a.message+"\n"+a.stack.join("\n")),F.notEnumerableProp(e,"__stackCleaned__",!0)}}}function m(e,t,n,a,i){if(void 0===e&&null!==t&&V){if(void 0!==i&&i._returnedNonUndefined())return;n&&(n+=" ");var o="a promise was created in a "+n+"handler but was not returned from it";a._warn(o,!0,t)}}function g(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),_(n)}function _(e,t,a){if(te.warnings){var i,o=new B(e);if(t)a._attachExtraTrace(o);else if(te.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var r=x(o);o.stack=r.message+"\n"+r.stack.join("\n")}C(o,"",!0)}}function v(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}function y(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function b(e){for(var t=e[0],n=1;n<e.length;++n){for(var a=e[n],i=t.length-1,o=t[i],r=-1,s=a.length-1;s>=0;--s)if(a[s]===o){r=s;break}for(var s=r;s>=0;--s){var l=a[s];if(t[i]!==l)break;t.pop(),i--}t=a}}function k(e){for(var t=[],n=0;n<e.length;++n){var a=e[n],i="    (No stack trace)"===a||q.test(a),o=i&&K(a);i&&!o&&(U&&" "!==a.charAt(0)&&(a="    "+a),t.push(a))}return t}function w(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var a=t[n];if("    (No stack trace)"===a||q.test(a))break}return n>0&&(t=t.slice(n)),t}function x(e){var t=e.stack,n=""+e;return t="string"==typeof t&&t.length>0?w(e):["    (No stack trace)"],{message:n,stack:k(t)}}function C(e,t,n){if("undefined"!=typeof console){var a;if(F.isObject(e)){var i=e.stack;a=t+$(i,e)}else a=t+(e+"");"function"==typeof D?D(a,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(a)}}function L(e,t,n,a){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(a):t(n,a))}catch(o){N.throwLater(o)}var r=!1;try{r=ee(e,n,a)}catch(o){r=!0,N.throwLater(o)}var s=!1;if(J)try{s=J(e.toLowerCase(),{reason:n,promise:a})}catch(o){s=!0,N.throwLater(o)}r||i||s||"unhandledRejection"!==e||C(n,"Unhandled rejection ")}function I(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?""+e:F.toString(e);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(t))try{var a=JSON.stringify(e);t=a}catch(i){}0===t.length&&(t="(empty array)")}return"(<"+T(t)+">, no stack trace)"}function T(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function S(){return"function"==typeof Q}function E(e){var t=e.match(X);return t?{fileName:t[1],line:parseInt(t[2],10)}:void 0}function P(e,t){if(S()){for(var n,a,i=e.stack.split("\n"),o=t.stack.split("\n"),r=-1,s=-1,l=0;l<i.length;++l){var c=E(i[l]);if(c){n=c.fileName,r=c.line;break}}for(var l=0;l<o.length;++l){var c=E(o[l]);if(c){a=c.fileName,s=c.line;break}}0>r||0>s||!n||!a||n!==a||r>=s||(K=function(e){if(z.test(e))return!0;var t=E(e);return!!(t&&t.fileName===n&&r<=t.line&&t.line<=s)})}}function j(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);Q(this,j),t>32&&this.uncycle()}var M,A,D,R=n._getDomain,N=n._async,B=t("./errors").Warning,F=t("./util"),O=F.canAttachTrace,z=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,q=null,$=null,U=!1,H=!(0==F.env("BLUEBIRD_DEBUG")),G=!(0==F.env("BLUEBIRD_WARNINGS")||!H&&!F.env("BLUEBIRD_WARNINGS")),W=!(0==F.env("BLUEBIRD_LONG_STACK_TRACES")||!H&&!F.env("BLUEBIRD_LONG_STACK_TRACES")),V=0!=F.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(G||!!F.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),N.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){L("rejectionHandled",M,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),L("unhandledRejection",A,e,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(e,t,n){return _(e,t,n||this)},n.onPossiblyUnhandledRejection=function(e){var t=R();A="function"==typeof e?null===t?e:t.bind(e):void 0},n.onUnhandledRejectionHandled=function(e){var t=R();M="function"==typeof e?null===t?e:t.bind(e):void 0};var Z=function(){};n.longStackTraces=function(){if(N.haveItemsQueued()&&!te.longStackTraces)throw Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!te.longStackTraces&&S()){var e=n.prototype._captureStackTrace,t=n.prototype._attachExtraTrace;te.longStackTraces=!0,Z=function(){if(N.haveItemsQueued()&&!te.longStackTraces)throw Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e,n.prototype._attachExtraTrace=t,i.deactivateLongStackTraces(),N.enableTrampoline(),te.longStackTraces=!1},n.prototype._captureStackTrace=p,n.prototype._attachExtraTrace=f,i.activateLongStackTraces(),N.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return te.longStackTraces&&S()},n.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&Z()),"warnings"in e){var t=e.warnings;te.warnings=!!t,V=te.warnings,F.isObject(t)&&"wForgottenReturn"in t&&(V=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!te.cancellation){if(N.haveItemsQueued())throw Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=c,n.prototype._propagateFrom=u,n.prototype._onCancel=s,n.prototype._setOnCancel=l,n.prototype._attachCancellationCallback=r,n.prototype._execute=o,Y=u,te.cancellation=!0}},n.prototype._execute=function(e,t,n){try{e(t,n)}catch(a){return a}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(e){},n.prototype._attachCancellationCallback=function(e){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(e,t){};var Y=d,K=function(){return!1},X=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;F.inherits(j,Error),i.CapturedTrace=j,j.prototype.uncycle=function(){var e=this._length;if(!(2>e)){for(var t=[],n={},a=0,i=this;void 0!==i;++a)t.push(i),i=i._parent;e=this._length=a;for(var a=e-1;a>=0;--a){var o=t[a].stack;void 0===n[o]&&(n[o]=a)}for(var a=0;e>a;++a){var r=t[a].stack,s=n[r];if(void 0!==s&&s!==a){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[a]._parent=void 0,t[a]._length=1;var l=a>0?t[a-1]:this;e-1>s?(l._parent=t[s+1],l._parent.uncycle(),l._length=l._parent._length+1):(l._parent=void 0,l._length=1);for(var c=l._length+1,u=a-2;u>=0;--u)t[u]._length=c,c++;return}}}},j.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=x(e),n=t.message,a=[t.stack],i=this;void 0!==i;)a.push(k(i.stack.split("\n"))),i=i._parent;b(a),y(a),F.notEnumerableProp(e,"stack",v(n,a)),F.notEnumerableProp(e,"__stackCleaned__",!0)}};var J,Q=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?""+t:I(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){
Error.stackTraceLimit+=6,q=e,$=t;var n=Error.captureStackTrace;return K=function(e){return z.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var a=Error();if("string"==typeof a.stack&&a.stack.split("\n")[0].indexOf("stackDetection@")>=0)return q=/@/,$=t,U=!0,function(e){e.stack=Error().stack};var i;try{throw Error()}catch(o){i="stack"in o}return"stack"in a||!i||"number"!=typeof Error.stackTraceLimit?($=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?I(t):""+t},null):(q=e,$=t,function(e){Error.stackTraceLimit+=6;try{throw Error()}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}([]),ee=function(){if(F.isNode)return function(t,n,a){return"rejectionHandled"===t?e.emit(t,a):e.emit(t,n,a)};var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:void 0!==this?this:null;if(!t)return function(){return!1};try{var n=document.createEvent("CustomEvent");n.initCustomEvent("testingtheevent",!1,!0,{}),t.dispatchEvent(n),J=function(e,n){var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,!1,!0,n),!t.dispatchEvent(a)}}catch(i){}var o={};return o.unhandledRejection="onunhandledRejection".toLowerCase(),o.rejectionHandled="onrejectionHandled".toLowerCase(),function(e,n,a){var i=o[e],r=t[i];return r?("rejectionHandled"===e?r.call(t,a):r.call(t,n,a),!0):!1}}();"undefined"!=typeof console&&void 0!==console.warn&&(D=function(e){console.warn(e)},F.isNode&&e.stderr.isTTY?D=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:F.isNode||"string"!=typeof Error().stack||(D=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var te={warnings:G,longStackTraces:!1,cancellation:!1};return W&&n.longStackTraces(),{longStackTraces:function(){return te.longStackTraces},warnings:function(){return te.warnings},cancellation:function(){return te.cancellation},propagateFromFunction:function(){return Y},boundValueFunction:function(){return h},checkForgottenReturns:m,setBounds:P,warn:_,deprecated:g,CapturedTrace:j}}},{"./errors":12,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype["return"]=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype["throw"]=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],a=function(){throw t};return this.caught(e,a)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var a=arguments[1];a instanceof e&&a.suppressUnhandledRejections();var i=function(){return a};return this.caught(n,i)}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){function n(){return o(this)}function a(e,n){return i(e,n,t,t)}var i=e.reduce,o=e.all;e.prototype.each=function(e){return this.mapSeries(e)._then(n,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return i(this,e,t,t)},e.each=function(e,t){return a(e,t)._then(n,void 0,void 0,e,void 0)},e.mapSeries=a}},{}],12:[function(e,t,n){"use strict";function a(e,t){function n(a){return this instanceof n?(d(this,"message","string"==typeof a?a:t),d(this,"name",e),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(a)}return u(n,Error),n}function i(e){return this instanceof i?(d(this,"name","OperationalError"),d(this,"message",e),this.cause=e,this.isOperational=!0,void(e instanceof Error?(d(this,"message",e.message),d(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(e)}var o,r,s=e("./es5"),l=s.freeze,c=e("./util"),u=c.inherits,d=c.notEnumerableProp,h=a("Warning","warning"),p=a("CancellationError","cancellation error"),f=a("TimeoutError","timeout error"),m=a("AggregateError","aggregate error");try{o=TypeError,r=RangeError}catch(g){o=a("TypeError","type error"),r=a("RangeError","range error")}for(var _="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<_.length;++v)"function"==typeof Array.prototype[_[v]]&&(m.prototype[_[v]]=Array.prototype[_[v]]);s.defineProperty(m.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),m.prototype.isOperational=!0;var y=0;m.prototype.toString=function(){var e=Array(4*y+1).join(" "),t="\n"+e+"AggregateError of:\n";y++,e=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var a=this[n]===this?"[Circular AggregateError]":this[n]+"",i=a.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];a=i.join("\n"),t+=a+"\n"}return y--,t},u(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=l({CancellationError:p,TimeoutError:f,OperationalError:i,RejectionError:i,AggregateError:m}),d(Error,"__BluebirdErrorTypes__",b)),t.exports={Error:Error,TypeError:o,RangeError:r,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(e,t,n){var a=function(){"use strict";return void 0===this}();if(a)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:a,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,r={}.constructor.prototype,s=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},l=function(e,t){return{value:e[t]}},c=function(e,t,n){return e[t]=n.value,e},u=function(e){return e},d=function(e){try{return Object(e).constructor.prototype}catch(t){return r}},h=function(e){try{return"[object Array]"===o.call(e)}catch(t){return!1}};t.exports={isArray:h,keys:s,names:s,defineProperty:c,getDescriptor:l,freeze:u,getPrototypeOf:d,isES5:a,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,a){return n(this,e,a,t)},e.filter=function(e,a,i){return n(e,a,i,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n){function a(e){this.finallyHandler=e}function i(e,t){return null!=e.cancelPromise?(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0):!1}function o(){return s.call(this,this.promise._target()._settledValue())}function r(e){return i(this,e)?void 0:(u.e=e,u)}function s(e){var s=this.promise,l=this.handler;if(!this.called){this.called=!0;var d=0===this.type?l.call(s._boundValue()):l.call(s._boundValue(),e);if(void 0!==d){s._setReturnedNonUndefined();var h=n(d,s);if(h instanceof t){if(null!=this.cancelPromise){if(h.isCancelled()){var p=new c("late cancellation observer");return s._attachExtraTrace(p),u.e=p,u}h.isPending()&&h._attachCancellationCallback(new a(this))}return h._then(o,r,void 0,this,void 0)}}}return s.isRejected()?(i(this),u.e=e,u):(i(this),e)}var l=e("./util"),c=t.CancellationError,u=l.errorObj;return a.prototype._resultCancelled=function(){i(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,a){return"function"!=typeof e?this.then():this._then(n,a,void 0,{promise:this,handler:e,called:!1,cancelPromise:null,type:t},void 0)},t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThrough(e,0,s,s)},t.prototype.tap=function(e){return this._passThrough(e,1,s)},s}},{"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,a,i,o,r){function s(e,n,a){for(var o=0;o<n.length;++o){a._pushContext();var r=p(n[o])(e);if(a._popContext(),r===h){a._pushContext();var s=t.reject(h.e);return a._popContext(),s}var l=i(r,a);if(l instanceof t)return l}return null}function l(e,n,i,o){var r=this._promise=new t(a);r._captureStackTrace(),r._setOnCancel(this),this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(f):f,this._yieldedPromise=null}var c=e("./errors"),u=c.TypeError,d=e("./util"),h=d.errorObj,p=d.tryCatch,f=[];d.inherits(l,o),l.prototype._isResolved=function(){return null===this._promise},l.prototype._cleanup=function(){this._promise=this._generator=null},l.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,n=void 0!==this._generator["return"];if(n)this._promise._pushContext(),e=p(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var a=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=a,this._promise._attachExtraTrace(a),this._promise._pushContext(),e=p(this._generator["throw"]).call(this._generator,a),this._promise._popContext(),e===h&&e.e===a&&(e=null)}var i=this._promise;this._cleanup(),e===h?i._rejectCallback(e.e,!1):i.cancel()}},l.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=p(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},l.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=p(this._generator["throw"]).call(this._generator,e);this._promise._popContext(),this._continue(t)},l.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},l.prototype.promise=function(){return this._promise},l.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},l.prototype._continue=function(e){var n=this._promise;if(e===h)return this._cleanup(),n._rejectCallback(e.e,!1);var a=e.value;if(e.done===!0)return this._cleanup(),n._resolveCallback(a);var o=i(a,this._promise);if(!(o instanceof t)&&(o=s(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",a)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var r=o._bitField;0===(50397184&r)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&r)?this._promiseFulfilled(o._value()):0!==(16777216&r)?this._promiseRejected(o._reason()):this._promiseCancelled()},t.coroutine=function(e,t){if("function"!=typeof e)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,a=l,i=Error().stack;return function(){var t=e.apply(this,arguments),o=new a(void 0,void 0,n,i),r=o.promise();return o._generator=t,o._promiseFulfilled(void 0),r}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new u("expecting a function but got "+d.classString(e));f.push(e)},t.spawn=function(e){if(r.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var a=new l(e,this),i=a.promise();return a._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,a,i){var o=e("./util");o.canEvaluate,o.tryCatch,o.errorObj;t.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]){e=arguments[t];var a}var i=[].slice.call(arguments);e&&i.pop();var a=new n(i).promise();return void 0!==e?a.spread(e):a}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,a,i,o,r){function s(e,t,n,a){this.constructor$(e),this._promise._captureStackTrace();var i=c();this._callback=null===i?t:i.bind(t),this._preservedValues=a===o?Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:p,this._init$(void 0,-2)}function l(e,t,n,i){if("function"!=typeof t)return a("expecting a function but got "+u.classString(t));var o="object"==typeof n&&null!==n?n.concurrency:0;return o="number"==typeof o&&isFinite(o)&&o>=1?o:0,new s(e,t,o,i).promise()}var c=t._getDomain,u=e("./util"),d=u.tryCatch,h=u.errorObj,p=[];u.inherits(s,n),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(e,n){var a=this._values,o=this.length(),s=this._preservedValues,l=this._limit;if(0>n){if(n=-1*n-1,a[n]=e,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return a[n]=e,this._queue.push(n),!1;null!==s&&(s[n]=e);var c=this._promise,u=this._callback,p=c._boundValue();c._pushContext();var f=d(u).call(p,e,n,o),m=c._popContext();if(r.checkForgottenReturns(f,m,null!==s?"Promise.filter":"Promise.map",c),f===h)return this._reject(f.e),!0;var g=i(f,this._promise);if(g instanceof t){g=g._target();var _=g._bitField;if(0===(50397184&_))return l>=1&&this._inFlight++,a[n]=g,g._proxy(this,-1*(n+1)),!1;if(0===(33554432&_))return 0!==(16777216&_)?(this._reject(g._reason()),!0):(this._cancel(),!0);f=g._value()}a[n]=f}var v=++this._totalResolved;return v>=o?(null!==s?this._filter(a,s):this._resolve(a),!0):!1},s.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var a=e.pop();this._promiseFulfilled(n[a],a)}},s.prototype._filter=function(e,t){for(var n=t.length,a=Array(n),i=0,o=0;n>o;++o)e[o]&&(a[i++]=t[o]);a.length=i,this._resolve(a)},s.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return l(this,e,t,null)},t.map=function(e,t,n,a){return l(e,t,n,a)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,a,i,o){var r=e("./util"),s=r.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+r.classString(e));return function(){var a=new t(n);a._captureStackTrace(),a._pushContext();var i=s(e).apply(this,arguments),r=a._popContext();return o.checkForgottenReturns(i,r,"Promise.method",a),a._resolveFromSyncValue(i),a}},t.attempt=t["try"]=function(e){if("function"!=typeof e)return i("expecting a function but got "+r.classString(e));var a=new t(n);a._captureStackTrace(),a._pushContext();var l;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],u=arguments[2];l=r.isArray(c)?s(e).apply(u,c):s(e).call(u,c)}else l=s(e)();var d=a._popContext();return o.checkForgottenReturns(l,d,"Promise.try",a),a._resolveFromSyncValue(l),a},t.prototype._resolveFromSyncValue=function(e){e===r.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";function a(e){return e instanceof Error&&u.getPrototypeOf(e)===Error.prototype}function i(e){var t;if(a(e)){t=new c(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var n=u.keys(e),i=0;i<n.length;++i){var o=n[i];d.test(o)||(t[o]=e[o])}return t}return r.markAsOriginatingFromRejection(e),e}function o(e,t){return function(n,a){if(null!==e){if(n){var o=i(s(n));e._attachExtraTrace(o),e._reject(o)}else if(t){var r=[].slice.call(arguments,1);e._fulfill(r)}else e._fulfill(a);e=null}}}var r=e("./util"),s=r.maybeWrapAsError,l=e("./errors"),c=l.OperationalError,u=e("./es5"),d=/^(?:name|message|stack|cause)$/;t.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){function n(e,t){var n=this;if(!o.isArray(e))return a.call(n,e,t);var i=s(t).apply(n._boundValue(),[null].concat(e));i===l&&r.throwLater(i.e)}function a(e,t){var n=this,a=n._boundValue(),i=void 0===e?s(t).call(a,null):s(t).call(a,null,e);i===l&&r.throwLater(i.e)}function i(e,t){var n=this;if(!e){var a=Error(e+"");a.cause=e,e=a}var i=s(t).call(n._boundValue(),e);i===l&&r.throwLater(i.e)}var o=e("./util"),r=t._async,s=o.tryCatch,l=o.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var o=a;void 0!==t&&Object(t).spread&&(o=n),this._then(o,i,void 0,this,e)}return this}}},{"./util":36}],22:[function(t,n,a){"use strict";n.exports=function(){function n(){}function a(e,t){if("function"!=typeof t)throw new v("expecting a function but got "+p.classString(t));if(e.constructor!==i)throw new v("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function i(e){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,e!==b&&(a(this,e),this._resolveFromExecutor(e)),this._promiseCreated()}function o(e){this.promise._resolveCallback(e)}function r(e){this.promise._rejectCallback(e,!1)}function s(e){var t=new i(b);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var l,c=function(){return new v("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},u=function(){return new i.PromiseInspection(this._target())},d=function(e){return i.reject(new v(e))},h={},p=t("./util");l=p.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},p.notEnumerableProp(i,"_getDomain",l);var f=t("./es5"),m=t("./async"),g=new m;f.defineProperty(i,"_async",{value:g});var _=t("./errors"),v=i.TypeError=_.TypeError;i.RangeError=_.RangeError;var y=i.CancellationError=_.CancellationError;i.TimeoutError=_.TimeoutError,i.OperationalError=_.OperationalError,i.RejectionError=_.OperationalError,i.AggregateError=_.AggregateError;var b=function(){},k={},w={},x=t("./thenables")(i,b),C=t("./promise_array")(i,b,x,d,n),L=t("./context")(i),I=L.create,T=t("./debuggability")(i,L),S=(T.CapturedTrace,t("./finally")(i,x)),E=t("./catch_filter")(w),P=t("./nodeback"),j=p.errorObj,M=p.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var n,a=Array(t-1),i=0;for(n=0;t-1>n;++n){var o=arguments[n];if(!p.isObject(o))return d("expecting an object but got "+p.classString(o));a[i++]=o}return a.length=i,e=arguments[n],this.then(void 0,E(a,e,this))}return this.then(void 0,e)},i.prototype.reflect=function(){return this._then(u,u,void 0,this,void 0)},i.prototype.then=function(e,t){if(T.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+p.classString(e);arguments.length>1&&(n+=", "+p.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},i.prototype.done=function(e,t){var n=this._then(e,t,void 0,void 0,void 0);n._setIsFinal()},i.prototype.spread=function(e){return"function"!=typeof e?d("expecting a function but got "+p.classString(e)):this.all()._then(e,void 0,void 0,k,void 0)},i.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new C(this).promise()},i.prototype.error=function(e){return this.caught(p.originatesFromRejection,e)},i.is=function(e){return e instanceof i},i.fromNode=i.fromCallback=function(e){var t=new i(b),n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,a=M(e)(P(t,n));return a===j&&t._rejectCallback(a.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},i.all=function(e){return new C(e).promise()},i.cast=function(e){var t=x(e);return t instanceof i||(t=new i(b),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(e){var t=new i(b);return t._captureStackTrace(),t._rejectCallback(e,!0),t},i.setScheduler=function(e){if("function"!=typeof e)throw new v("expecting a function but got "+p.classString(e));var t=g._schedule;return g._schedule=e,t},i.prototype._then=function(e,t,n,a,o){var r=void 0!==o,s=r?o:new i(b),c=this._target(),u=c._bitField;r||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===a&&0!==(2097152&this._bitField)&&(a=0!==(50397184&u)?this._boundValue():c===this?void 0:this._boundTo));var d=l();if(0!==(50397184&u)){var h,p,f=c._settlePromiseCtx;0!==(33554432&u)?(p=c._rejectionHandler0,h=e):0!==(16777216&u)?(p=c._fulfillmentHandler0,h=t,c._unsetRejectionIsUnhandled()):(f=c._settlePromiseLateCancellationObserver,p=new y("late cancellation observer"),c._attachExtraTrace(p),h=t),g.invoke(f,c,{handler:null===d?h:"function"==typeof h&&d.bind(h),promise:s,receiver:a,value:p})}else c._addCallbacks(e,t,s,a,d);return s},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},i.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField},i.prototype._setAsyncGuaranteed=function(){this._bitField=134217728|this._bitField},i.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==h)return void 0===t&&this._isBound()?this._boundValue():t},i.prototype._promiseAt=function(e){return this[4*e-4+2]},i.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},i.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),n=e._rejectionHandler0,a=e._promise0,i=e._receiverAt(0);void 0===i&&(i=h),this._addCallbacks(t,n,a,i,null)},i.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),a=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=h),this._addCallbacks(n,a,i,o,null)},i.prototype._addCallbacks=function(e,t,n,a,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=a,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:i.bind(e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:i.bind(t));else{var r=4*o-4;this[r+2]=n,this[r+3]=a,"function"==typeof e&&(this[r+0]=null===i?e:i.bind(e)),"function"==typeof t&&(this[r+1]=null===i?t:i.bind(t))}return this._setLength(o+1),o},i.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},i.prototype._resolveCallback=function(e,t){if(0===(117506048&this._bitField)){if(e===this)return this._rejectCallback(c(),!1);var n=x(e,this);if(!(n instanceof i))return this._fulfill(e);t&&this._propagateFrom(n,2);var a=n._target(),o=a._bitField;if(0===(50397184&o)){var r=this._length();r>0&&a._migrateCallback0(this);for(var s=1;r>s;++s)a._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(a)}else if(0!==(33554432&o))this._fulfill(a._value());else if(0!==(16777216&o))this._reject(a._reason());else{var l=new y("late cancellation observer");a._attachExtraTrace(l),this._reject(l)}}},i.prototype._rejectCallback=function(e,t,n){var a=p.ensureErrorObject(e),i=a===e;if(!i&&!n&&T.warnings()){var o="a promise was rejected with a non-error: "+p.classString(e);this._warn(o,!0)}this._attachExtraTrace(a,t?i:!1),this._reject(e)},i.prototype._resolveFromExecutor=function(e){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,a=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==a&&t._rejectCallback(a,!0)},i.prototype._settlePromiseFromHandler=function(e,t,n,a){var i=a._bitField;if(0===(65536&i)){a._pushContext();var o;t===k?n&&"number"==typeof n.length?o=M(e).apply(this._boundValue(),n):(o=j,o.e=new v("cannot .spread() a non-array: "+p.classString(n))):o=M(e).call(t,n);var r=a._popContext();if(i=a._bitField,0===(65536&i))if(o===w)a._reject(n);else if(o===j||o===a){var s=o===a?c():o.e;a._rejectCallback(s,!1)}else T.checkForgottenReturns(o,r,"",a,this),a._resolveCallback(o)}},i.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(e){this._rejectionHandler0=e},i.prototype._settlePromise=function(e,t,a,o){var r=e instanceof i,s=this._bitField,l=0!==(134217728&s);0!==(65536&s)?(r&&e._invokeInternalOnCancel(),t===S?(a.cancelPromise=e,M(t).call(a,o)===j&&e._reject(j.e)):t===u?e._fulfill(u.call(a)):a instanceof n?a._promiseCancelled(e):r||e instanceof C?e._cancel():a.cancel()):"function"==typeof t?r?(l&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,a,o,e)):t.call(a,o,e):a instanceof n?a._isResolved()||(0!==(33554432&s)?a._promiseFulfilled(o,e):a._promiseRejected(o,e)):r&&(l&&e._setAsyncGuaranteed(),0!==(33554432&s)?e._fulfill(o):e._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,a=e.receiver,o=e.value;"function"==typeof t?n instanceof i?this._settlePromiseFromHandler(t,a,o,n):t.call(a,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},i.prototype._settlePromise0=function(e,t,n){var a=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(a,e,i,t)},i.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},i.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=c();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():g.settlePromises(this))}},i.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16))return this._setRejected(),this._fulfillmentHandler0=e,this._isFinal()?g.fatalError(e,p.isNode):void((65535&t)>0?0!==(134217728&t)?this._settlePromises():g.settlePromises(this):this._ensurePossibleRejectionHandled())},i.prototype._fulfillPromises=function(e,t){for(var n=1;e>n;n++){var a=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,a,o,t)}},i.prototype._rejectPromises=function(e,t){for(var n=1;e>n;n++){var a=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,a,o,t)}},i.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!==(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var a=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,a,e),this._fulfillPromises(t,a)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var e=this._bitField;return 0!==(33554432&e)?this._rejectionHandler0:0!==(16777216&e)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){T.deprecated("Promise.defer","new Promise");var e=new i(b);return{promise:e,resolve:o,reject:r}},p.notEnumerableProp(i,"_makeSelfResolutionError",c),t("./method")(i,b,x,d,T),t("./bind")(i,b,x,T),t("./cancel")(i,C,d,T),t("./direct_resolve")(i),t("./synchronous_inspection")(i),t("./join")(i,C,x,b,T),i.Promise=i,t("./map.js")(i,C,d,x,b,T),t("./using.js")(i,d,x,I,b,T),t("./timers.js")(i,b),t("./generators.js")(i,d,b,x,n,T),t("./nodeify.js")(i),t("./call_get.js")(i),t("./props.js")(i,C,x,d),t("./race.js")(i,b,x,d),t("./reduce.js")(i,C,d,x,b,T),t("./settle.js")(i,C,T),t("./some.js")(i,C,d),t("./promisify.js")(i,b),t("./any.js")(i),t("./each.js")(i,b),t("./filter.js")(i,b),p.toFastProperties(i),p.toFastProperties(i.prototype),s({a:1}),s({b:2}),s({c:3}),s(1),s(function(){}),s(void 0),s(!1),s(new i(b)),T.setBounds(m.firstLineError,p.lastLineError),i}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){"use strict";t.exports=function(t,n,a,i,o){function r(e){switch(e){case-2:return[];case-3:return{}}}function s(e){var a=this._promise=new t(n);e instanceof t&&a._propagateFrom(e,3),a._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var l=e("./util");l.isArray;return l.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function c(e,n){var o=a(this._values,this._promise);if(o instanceof t){o=o._target();var s=o._bitField;if(this._values=o,0===(50397184&s))return this._promise._setAsyncGuaranteed(),o._then(c,this._reject,void 0,this,n);if(0===(33554432&s))return 0!==(16777216&s)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=l.asArray(o),null===o){var u=i("expecting an array or an iterable object but got "+l.classString(o)).reason();return void this._promise._rejectCallback(u,!1)}return 0===o.length?void(-5===n?this._resolveEmptyArray():this._resolve(r(n))):void this._iterate(o)},s.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?Array(n):this._values;for(var i=this._promise,o=!1,r=null,s=0;n>s;++s){var l=a(e[s],i);l instanceof t?(l=l._target(),r=l._bitField):r=null,o?null!==r&&l.suppressUnhandledRejections():null!==r?0===(50397184&r)?(l._proxy(this,s),this._values[s]=l):o=0!==(33554432&r)?this._promiseFulfilled(l._value(),s):0!==(16777216&r)?this._promiseRejected(l._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(l,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},s.prototype._cancel=function(){!this._isResolved()&&this._promise.isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},s.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(e){return e},s}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){function a(e){return!w.test(e)}function i(e){try{return e.__isPromisified__===!0}catch(t){return!1}}function o(e,t,n){var a=p.getDataPropertyOrDefault(e,t+n,b);return a?i(a):!1}function r(e,t,n){for(var a=0;a<e.length;a+=2){var i=e[a];if(n.test(i))for(var o=i.replace(n,""),r=0;r<e.length;r+=2)if(e[r]===o)throw new v("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function s(e,t,n,a){for(var s=p.inheritedDataKeys(e),l=[],c=0;c<s.length;++c){
var u=s[c],d=e[u],h=a===x?!0:x(u,d,e);"function"!=typeof d||i(d)||o(e,u,t)||!a(u,d,e,h)||l.push(u,d)}return r(l,t,n),l}function l(e,a,i,o,r,s){function l(){var i=a;a===h&&(i=this);var o=new t(n);o._captureStackTrace();var r="string"==typeof u&&this!==c?this[u]:e,l=f(o,s);try{r.apply(i,m(arguments,l))}catch(d){o._rejectCallback(g(d),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var c=function(){return this}(),u=e;return"string"==typeof u&&(e=o),p.notEnumerableProp(l,"__isPromisified__",!0),l}function c(e,t,n,a,i){for(var o=RegExp(C(t)+"$"),r=s(e,t,o,n),l=0,c=r.length;c>l;l+=2){var u=r[l],d=r[l+1],f=u+t;if(a===L)e[f]=L(u,h,u,d,t,i);else{var m=a(d,function(){return L(u,h,u,d,t,i)});p.notEnumerableProp(m,"__isPromisified__",!0),e[f]=m}}return p.toFastProperties(e),e}function u(e,t,n){return L(e,t,void 0,e,null,n)}var d,h={},p=e("./util"),f=e("./nodeback"),m=p.withAppended,g=p.maybeWrapAsError,_=p.canEvaluate,v=e("./errors").TypeError,y="Async",b={__isPromisified__:!0},k=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],w=RegExp("^(?:"+k.join("|")+")$"),x=function(e){return p.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},C=function(e){return e.replace(/([$])/,"\\$")},L=_?d:l;t.promisify=function(e,t){if("function"!=typeof e)throw new v("expecting a function but got "+p.classString(e));if(i(e))return e;t=Object(t);var n=void 0===t.context?h:t.context,o=!!t.multiArgs,r=u(e,n,o);return p.copyDescriptors(e,r,a),r},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new v("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var n=!!t.multiArgs,a=t.suffix;"string"!=typeof a&&(a=y);var i=t.filter;"function"!=typeof i&&(i=x);var o=t.promisifier;if("function"!=typeof o&&(o=L),!p.isIdentifier(a))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var r=p.inheritedDataKeys(e),s=0;s<r.length;++s){var l=e[r[s]];"constructor"!==r[s]&&p.isClass(l)&&(c(l.prototype,a,i,o,n),c(l,a,i,o,n))}return c(e,a,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,a,i){function o(e){var t,n=!1;if(void 0!==s&&e instanceof s)t=d(e),n=!0;else{var a=u.keys(e),i=a.length;t=Array(2*i);for(var o=0;i>o;++o){var r=a[o];t[o]=e[r],t[o+i]=r}}this.constructor$(t),this._isMap=n,this._init$(void 0,-3)}function r(e){var n,r=a(e);return c(r)?(n=r instanceof t?r._then(t.props,void 0,void 0,void 0,void 0):new o(r).promise(),r instanceof t&&n._propagateFrom(r,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s,l=e("./util"),c=l.isObject,u=e("./es5");"function"==typeof Map&&(s=Map);var d=function(){function e(e,a){this[t]=e,this[t+n]=a,t++}var t=0,n=0;return function(a){n=a.size,t=0;var i=Array(2*a.size);return a.forEach(e,i),i}}(),h=function(e){for(var t=new s,n=e.length/2|0,a=0;n>a;++a){var i=e[n+a],o=e[a];t.set(i,o)}return t};l.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){var a;if(this._isMap)a=h(this._values);else{a={};for(var i=this.length(),o=0,r=this.length();r>o;++o)a[this._values[o+i]]=this._values[o]}return this._resolve(a),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return r(this)},t.props=function(e){return r(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function a(e,t,n,a,i){for(var o=0;i>o;++o)n[o+a]=e[o+t],e[o+t]=void 0}function i(e){this._capacity=e,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(e){return this._capacity<e},i.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e,this._length=t+1},i.prototype._unshiftOne=function(e){var t=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,a=(n-1&t-1^t)-t;this[a]=e,this._front=a,this._length=this.length()+1},i.prototype.unshift=function(e,t,n){this._unshiftOne(n),this._unshiftOne(t),this._unshiftOne(e)},i.prototype.push=function(e,t,n){var a=this.length()+3;if(this._willBeOverCapacity(a))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+a-3;this._checkCapacity(a);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=a},i.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var n=this._front,i=this._length,o=n+i&t-1;a(this,0,this,t,o)},t.exports=i},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,a,i){function o(e,o){var l=a(e);if(l instanceof t)return s(l);if(e=r.asArray(e),null===e)return i("expecting an array or an iterable object but got "+r.classString(e));var c=new t(n);void 0!==o&&c._propagateFrom(o,3);for(var u=c._fulfill,d=c._reject,h=0,p=e.length;p>h;++h){var f=e[h];(void 0!==f||h in e)&&t.cast(f)._then(u,d,void 0,c,null)}return c}var r=e("./util"),s=function(e){return e.then(function(t){return o(t,e)})};t.race=function(e){return o(e,void 0)},t.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,a,i,o,r){function s(e,n,a,i){this.constructor$(e);var r=h();this._fn=null===r?n:r.bind(n),void 0!==a&&(a=t.resolve(a),a._attachCancellationCallback(this)),this._initialValue=a,this._currentCancellable=null,this._eachValues=i===o?[]:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function l(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function c(e,t,n,i){if("function"!=typeof t)return a("expecting a function but got "+p.classString(t));var o=new s(e,t,n,i);return o.promise()}function u(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(d,void 0,void 0,this,void 0)):d.call(this,n)}function d(e){var n=this.array,a=n._promise,i=f(n._fn);a._pushContext();var o;o=void 0!==n._eachValues?i.call(a._boundValue(),e,this.index,this.length):i.call(a._boundValue(),this.accum,e,this.index,this.length),o instanceof t&&(n._currentCancellable=o);var s=a._popContext();return r.checkForgottenReturns(o,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",a),o}var h=t._getDomain,p=e("./util"),f=p.tryCatch;p.inherits(s,n),s.prototype._gotAccum=function(e){void 0!==this._eachValues&&e!==o&&this._eachValues.push(e)},s.prototype._eachComplete=function(e){return this._eachValues.push(e),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},s.prototype._resultCancelled=function(e){return e===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel()))},s.prototype._iterate=function(e){this._values=e;var n,a,i=e.length;if(void 0!==this._initialValue?(n=this._initialValue,a=0):(n=t.resolve(e[0]),a=1),this._currentCancellable=n,!n.isRejected())for(;i>a;++a){var o={accum:null,value:e[a],index:a,length:i,array:this};n=n._then(u,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(l,l,void 0,n,this)},t.prototype.reduce=function(e,t){return c(this,e,t,null)},t.reduce=function(e,t,n,a){return c(e,t,n,a)}}},{"./util":36}],29:[function(t,n,i){"use strict";var o,r=t("./util"),s=function(){throw Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};if(r.isNode&&"undefined"==typeof MutationObserver){var l=a.setImmediate,c=e.nextTick;o=r.isRecentNode?function(e){l.call(a,e)}:function(t){c.call(e,t)}}else o="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:s:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,a=document.createElement("div"),i=new MutationObserver(function(){e.classList.toggle("foo"),n=!1});i.observe(a,t);var o=function(){n||(n=!0,a.classList.toggle("foo"))};return function(n){var a=new MutationObserver(function(){a.disconnect(),n()});a.observe(e,t),o()}}();n.exports=o},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,a){function i(e){this.constructor$(e)}var o=t.PromiseInspection,r=e("./util");r.inherits(i,n),i.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},i.prototype._promiseFulfilled=function(e,t){var n=new o;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},i.prototype._promiseRejected=function(e,t){var n=new o;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return a.deprecated(".settle()",".reflect()"),new i(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,a){function i(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(e,t){if((0|t)!==t||0>t)return a("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(e),o=n.promise();return n.setHowMany(t),n.init(),o}var r=e("./util"),s=e("./errors").RangeError,l=e("./errors").AggregateError,c=r.isArray,u={};r.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=c(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(e){this._howMany=e},i.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},i.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new l,t=this.length();t<this._values.length;++t)this._values[t]!==u&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(e){this._values.push(e)},i.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new s(t)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return o(e,t)},t.prototype.some=function(e){return o(this,e)},t._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},a=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},r=t.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=e.prototype._isCancelled=function(){return 65536===(65536&this._bitField)},e.prototype.isCancelled=function(){return this._target()._isCancelled()},e.prototype.isPending=function(){return r.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),a.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){function a(e,a){if(u(e)){if(e instanceof t)return e;var i=o(e);if(i===c){a&&a._pushContext();var l=t.reject(i.e);return a&&a._popContext(),l}if("function"==typeof i){if(r(e)){var l=new t(n);return e._then(l._fulfill,l._reject,void 0,l,null),l}return s(e,i,a)}}return e}function i(e){return e.then}function o(e){try{return i(e)}catch(t){return c.e=t,c}}function r(e){return d.call(e,"_promise0")}function s(e,a,i){function o(e){s&&(s._resolveCallback(e),s=null)}function r(e){s&&(s._rejectCallback(e,d,!0),s=null)}var s=new t(n),u=s;i&&i._pushContext(),s._captureStackTrace(),i&&i._popContext();var d=!0,h=l.tryCatch(a).call(e,o,r);return d=!1,s&&h===c&&(s._rejectCallback(h.e,!0,!0),s=null),u}var l=e("./util"),c=l.errorObj,u=l.isObject,d={}.hasOwnProperty;return a}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n){function a(e){var t=this;return t instanceof Number&&(t=+t),clearTimeout(t),e}function i(e){var t=this;throw t instanceof Number&&(t=+t),clearTimeout(t),e}var o=e("./util"),r=t.TimeoutError,s=function(e,t,n){if(e.isPending()){var a;a="string"!=typeof t?t instanceof Error?t:new r("operation timed out"):new r(t),o.markAsOriginatingFromRejection(a),e._attachExtraTrace(a),e._reject(a),n.cancel()}},l=function(e){return c(+this).thenReturn(e)},c=t.delay=function(e,a){var i;return void 0!==a?i=t.resolve(a)._then(l,null,null,e,void 0):(i=new t(n),setTimeout(function(){i._fulfill()},+e)),i._setAsyncGuaranteed(),i};t.prototype.delay=function(e){return c(e,this)},t.prototype.timeout=function(e,t){e=+e;var n=this.then(),o=n.then(),r=setTimeout(function(){s(o,t,n)},e);return o._then(a,i,void 0,r,void 0)}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,a,i,o,r){function s(e){setTimeout(function(){throw e},0)}function l(e){var t=a(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function c(e,n){function i(){if(r>=c)return u._fulfill();var o=l(e[r++]);if(o instanceof t&&o._isDisposable()){try{o=a(o._getDisposer().tryDispose(n),e.promise)}catch(d){return s(d)}if(o instanceof t)return o._then(i,s,null,null,null)}i()}var r=0,c=e.length,u=new t(o);return i(),u}function u(e,t,n){this._data=e,this._promise=t,this._context=n}function d(e,t,n){this.constructor$(e,t,n)}function h(e){return u.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function p(e){this.length=e,this.promise=null,this[e-1]=null}var f=e("./util"),m=e("./errors").TypeError,g=e("./util").inherits,_=f.errorObj,v=f.tryCatch;u.prototype.data=function(){return this._data},u.prototype.promise=function(){return this._promise},u.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},u.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var a=null!==t?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,a},u.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},g(d,u),d.prototype.doDispose=function(e,t){var n=this.data();return n.call(e,e,t)},p.prototype._resultCancelled=function(){for(var e=this.length,n=0;e>n;++n){var a=this[n];a instanceof t&&a.cancel()}},t.using=function(){var e=arguments.length;if(2>e)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[e-1];if("function"!=typeof i)return n("expecting a function but got "+f.classString(i));var o,s=!0;2===e&&Array.isArray(arguments[0])?(o=arguments[0],e=o.length,s=!1):(o=arguments,e--);for(var l=new p(e),d=0;e>d;++d){var m=o[d];if(u.isDisposer(m)){var g=m;m=m.promise(),m._setDisposable(g)}else{var y=a(m);y instanceof t&&(m=y._then(h,null,null,{resources:l,index:d},void 0))}l[d]=m}for(var b=Array(l.length),d=0;d<b.length;++d)b[d]=t.resolve(l[d]).reflect();var k=t.all(b).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return _.e=n.error(),_;if(!n.isFulfilled())return void k.cancel();e[t]=n.value()}w._pushContext(),i=v(i);var a=s?i.apply(void 0,e):i(e),o=w._popContext();return r.checkForgottenReturns(a,o,"Promise.using",w),a}),w=k.lastly(function(){var e=new t.PromiseInspection(k);return c(l,e)});return l.promise=w,w._setOnCancel(l),w},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new d(e,this,i());throw new m}}},{"./errors":12,"./util":36}],36:[function(t,n,a){"use strict";function i(){try{var e=T;return T=null,e.apply(this,arguments)}catch(t){return I.e=t,I}}function o(e){return T=e,i}function r(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function s(e){return"function"==typeof e||"object"==typeof e&&null!==e}function l(e){return r(e)?Error(_(e)):e}function c(e,t){var n,a=e.length,i=Array(a+1);for(n=0;a>n;++n)i[n]=e[n];return i[n]=t,i}function u(e,t,n){if(!C.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var a=Object.getOwnPropertyDescriptor(e,t);return null!=a?null==a.get&&null==a.set?a.value:n:void 0}function d(e,t,n){if(r(e))return e;var a={value:n,configurable:!0,enumerable:!1,writable:!0};return C.defineProperty(e,t,a),e}function h(e){throw e}function p(e){try{if("function"==typeof e){var t=C.names(e.prototype),n=C.isES5&&t.length>1,a=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=P.test(e+"")&&C.names(e).length>0;if(n||a||i)return!0}return!1}catch(o){return!1}}function f(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e}function m(e){return j.test(e)}function g(e,t,n){for(var a=Array(e),i=0;e>i;++i)a[i]=t+i+n;return a}function _(e){try{return e+""}catch(t){return"[no string representation]"}}function v(e){try{d(e,"isOperational",!0)}catch(t){}}function y(e){return null==e?!1:e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0}function b(e){return e instanceof Error&&C.propertyIsWritable(e,"stack")}function k(e){return{}.toString.call(e)}function w(e,t,n){for(var a=C.names(e),i=0;i<a.length;++i){var o=a[i];if(n(o))try{C.defineProperty(t,o,C.getDescriptor(e,o))}catch(r){}}}function x(t,n){return R?e.env[t]:n}var C=t("./es5"),L="undefined"==typeof navigator,I={e:{}},T,S=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)a.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var a={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},E=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(C.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var a=[],i=Object.create(null);null!=e&&!t(e);){var o;try{o=n(e)}catch(r){return a}for(var s=0;s<o.length;++s){var l=o[s];if(!i[l]){i[l]=!0;var c=Object.getOwnPropertyDescriptor(e,l);null!=c&&null==c.get&&null==c.set&&a.push(l)}}e=C.getPrototypeOf(e)}return a}}var a={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var o in n)if(a.call(n,o))i.push(o);else{for(var r=0;r<e.length;++r)if(a.call(e[r],o))continue e;i.push(o)}return i}}(),P=/this\s*\.\s*\S+\s*=/,j=/^[a-z$_][a-z$_0-9]*$/i,M=function(){return"stack"in Error()?function(e){return b(e)?e:Error(_(e))}:function(e){if(b(e))return e;try{throw Error(_(e))}catch(t){return t}}}(),A=function(e){return C.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var D="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],a=e[Symbol.iterator]();!(t=a.next()).done;)n.push(t.value);return n};A=function(e){return C.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?D(e):null}}var R=void 0!==e&&"[object process]"===k(e).toLowerCase(),N={isClass:p,isIdentifier:m,inheritedDataKeys:E,getDataPropertyOrDefault:u,thrower:h,isArray:C.isArray,asArray:A,notEnumerableProp:d,isPrimitive:r,isObject:s,canEvaluate:L,errorObj:I,tryCatch:o,inherits:S,withAppended:c,maybeWrapAsError:l,toFastProperties:f,filledRange:g,toString:_,canAttachTrace:b,ensureErrorObject:M,originatesFromRejection:y,markAsOriginatingFromRejection:v,classString:k,copyDescriptors:w,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:R,env:x};N.isRecentNode=N.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),N.isNode&&N.toFastProperties(e);try{throw Error()}catch(B){N.lastLineError=B}n.exports=N},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:396}],385:[function(e,t,n){},{}],386:[function(e,t,n){function a(e,t){return p.isUndefined(t)?""+t:p.isNumber(t)&&!isFinite(t)?""+t:p.isFunction(t)||p.isRegExp(t)?""+t:t}function i(e,t){return p.isString(e)?e.length<t?e:e.slice(0,t):e}function o(e){return i(JSON.stringify(e.actual,a),128)+" "+e.operator+" "+i(JSON.stringify(e.expected,a),128)}function r(e,t,n,a,i){throw new g.AssertionError({message:n,actual:e,expected:t,operator:a,stackStartFunction:i})}function s(e,t){e||r(e,!0,t,"==",g.ok)}function l(e,t){if(e===t)return!0;if(p.isBuffer(e)&&p.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return p.isDate(e)&&p.isDate(t)?e.getTime()===t.getTime():p.isRegExp(e)&&p.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:p.isObject(e)||p.isObject(t)?u(e,t):e==t}function c(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function u(e,t){if(p.isNullOrUndefined(e)||p.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(p.isPrimitive(e)||p.isPrimitive(t))return e===t;var n=c(e),a=c(t);if(n&&!a||!n&&a)return!1;if(n)return e=f.call(e),t=f.call(t),l(e,t);var i,o,r=_(e),s=_(t);if(r.length!=s.length)return!1;for(r.sort(),s.sort(),o=r.length-1;o>=0;o--)if(r[o]!=s[o])return!1;for(o=r.length-1;o>=0;o--)if(i=r[o],!l(e[i],t[i]))return!1;return!0}function d(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0:!1}function h(e,t,n,a){var i;p.isString(n)&&(a=n,n=null);try{t()}catch(o){i=o}if(a=(n&&n.name?" ("+n.name+").":".")+(a?" "+a:"."),e&&!i&&r(i,n,"Missing expected exception"+a),!e&&d(i,n)&&r(i,n,"Got unwanted exception"+a),e&&i&&n&&!d(i,n)||!e&&i)throw i}var p=e("util/"),f=Array.prototype.slice,m=Object.prototype.hasOwnProperty,g=t.exports=s;g.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var t=e.stackStartFunction||r;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=Error();if(n.stack){var a=n.stack,i=t.name,s=a.indexOf("\n"+i);if(s>=0){var l=a.indexOf("\n",s+1);a=a.substring(l+1)}this.stack=a}}},p.inherits(g.AssertionError,Error),g.fail=r,g.ok=s,g.equal=function(e,t,n){e!=t&&r(e,t,n,"==",g.equal)},g.notEqual=function(e,t,n){e==t&&r(e,t,n,"!=",g.notEqual)},g.deepEqual=function(e,t,n){l(e,t)||r(e,t,n,"deepEqual",g.deepEqual)},g.notDeepEqual=function(e,t,n){l(e,t)&&r(e,t,n,"notDeepEqual",g.notDeepEqual)},g.strictEqual=function(e,t,n){e!==t&&r(e,t,n,"===",g.strictEqual)},g.notStrictEqual=function(e,t,n){e===t&&r(e,t,n,"!==",g.notStrictEqual)},g["throws"]=function(e,t,n){h.apply(this,[!0].concat(f.call(arguments)))},g.doesNotThrow=function(e,t){h.apply(this,[!1].concat(f.call(arguments)))},g.ifError=function(e){if(e)throw e};var _=Object.keys||function(e){var t=[];for(var n in e)m.call(e,n)&&t.push(n);return t}},{"util/":422}],387:[function(e,t,n){arguments[4][385][0].apply(n,arguments)},{dup:385}],388:[function(e,t,n){(function(t){"use strict";function a(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(n){return!1}}function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e){return this instanceof o?(o.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?r(this,e):"string"==typeof e?s(this,e,arguments.length>1?arguments[1]:"utf8"):l(this,e)):arguments.length>1?new o(e,arguments[1]):new o(e)}function r(e,t){if(e=m(e,0>t?0:0|g(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;n++)e[n]=0;return e}function s(e,t,n){"string"==typeof n&&""!==n||(n="utf8");var a=0|v(t,n);return e=m(e,a),e.write(t,n),e}function l(e,t){if(o.isBuffer(t))return c(e,t);if(K(t))return u(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return d(e,t);if(t instanceof ArrayBuffer)return h(e,t)}return t.length?p(e,t):f(e,t)}function c(e,t){var n=0|g(t.length);return e=m(e,n),t.copy(e,0,0,n),e}function u(e,t){var n=0|g(t.length);e=m(e,n);for(var a=0;n>a;a+=1)e[a]=255&t[a];return e}function d(e,t){var n=0|g(t.length);e=m(e,n);for(var a=0;n>a;a+=1)e[a]=255&t[a];return e}function h(e,t){return o.TYPED_ARRAY_SUPPORT?(t.byteLength,e=o._augment(new Uint8Array(t))):e=d(e,new Uint8Array(t)),e}function p(e,t){var n=0|g(t.length);e=m(e,n);for(var a=0;n>a;a+=1)e[a]=255&t[a];return e}function f(e,t){var n,a=0;"Buffer"===t.type&&K(t.data)&&(n=t.data,a=0|g(n.length)),e=m(e,a);for(var i=0;a>i;i+=1)e[i]=255&n[i];return e}function m(e,t){o.TYPED_ARRAY_SUPPORT?(e=o._augment(new Uint8Array(t)),e.__proto__=o.prototype):(e.length=t,e._isBuffer=!0);var n=0!==t&&t<=o.poolSize>>>1;return n&&(e.parent=X),e}function g(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function _(e,t){if(!(this instanceof _))return new _(e,t);var n=new o(e,t);return delete n.parent,n}function v(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(a)return U(e).length;t=(""+t).toLowerCase(),a=!0}}function y(e,t,n){var a=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return E(this,t,n);case"binary":return P(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function b(e,t,n,a){n=+n||0;var i=e.length-n;a?(a=+a,a>i&&(a=i)):a=i;var o=t.length;if(o%2!==0)throw Error("Invalid hex string");a>o/2&&(a=o/2);for(var r=0;a>r;r++){var s=parseInt(t.substr(2*r,2),16);if(isNaN(s))throw Error("Invalid hex string");e[n+r]=s}return r}function k(e,t,n,a){return V(U(t,e.length-n),e,n,a)}function w(e,t,n,a){return V(H(t),e,n,a)}function x(e,t,n,a){return w(e,t,n,a)}function C(e,t,n,a){return V(W(t),e,n,a)}function L(e,t,n,a){return V(G(t,e.length-n),e,n,a)}function I(e,t,n){return 0===t&&n===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var a=[],i=t;n>i;){var o=e[i],r=null,s=o>239?4:o>223?3:o>191?2:1;if(n>=i+s){var l,c,u,d;switch(s){case 1:128>o&&(r=o);break;case 2:l=e[i+1],128===(192&l)&&(d=(31&o)<<6|63&l,d>127&&(r=d));break;case 3:l=e[i+1],c=e[i+2],128===(192&l)&&128===(192&c)&&(d=(15&o)<<12|(63&l)<<6|63&c,d>2047&&(55296>d||d>57343)&&(r=d));break;case 4:l=e[i+1],c=e[i+2],u=e[i+3],128===(192&l)&&128===(192&c)&&128===(192&u)&&(d=(15&o)<<18|(63&l)<<12|(63&c)<<6|63&u,d>65535&&1114112>d&&(r=d))}}null===r?(r=65533,s=1):r>65535&&(r-=65536,a.push(r>>>10&1023|55296),r=56320|1023&r),a.push(r),i+=s}return S(a)}function S(e){var t=e.length;if(J>=t)return String.fromCharCode.apply(String,e);for(var n="",a=0;t>a;)n+=String.fromCharCode.apply(String,e.slice(a,a+=J));return n}function E(e,t,n){var a="";n=Math.min(e.length,n);for(var i=t;n>i;i++)a+=String.fromCharCode(127&e[i]);return a}function P(e,t,n){var a="";n=Math.min(e.length,n);for(var i=t;n>i;i++)a+=String.fromCharCode(e[i]);return a}function j(e,t,n){var a=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>a)&&(n=a);for(var i="",o=t;n>o;o++)i+=$(e[o]);return i}function M(e,t,n){for(var a=e.slice(t,n),i="",o=0;o<a.length;o+=2)i+=String.fromCharCode(a[o]+256*a[o+1]);return i}function A(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,a,i,r){if(!o.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||r>t)throw new RangeError("value is out of bounds");if(n+a>e.length)throw new RangeError("index out of range")}function R(e,t,n,a){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);o>i;i++)e[n+i]=(t&255<<8*(a?i:1-i))>>>8*(a?i:1-i)}function N(e,t,n,a){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);o>i;i++)e[n+i]=t>>>8*(a?i:3-i)&255}function B(e,t,n,a,i,o){if(t>i||o>t)throw new RangeError("value is out of bounds");if(n+a>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function F(e,t,n,a,i){return i||B(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Y.write(e,t,n,a,23,4),n+4}function O(e,t,n,a,i){return i||B(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Y.write(e,t,n,a,52,8),n+8}function z(e){if(e=q(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"");
}function $(e){return 16>e?"0"+e.toString(16):e.toString(16)}function U(e,t){t=t||1/0;for(var n,a=e.length,i=null,o=[],r=0;a>r;r++){if(n=e.charCodeAt(r),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(r+1===a){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function G(e,t){for(var n,a,i,o=[],r=0;r<e.length&&!((t-=2)<0);r++)n=e.charCodeAt(r),a=n>>8,i=n%256,o.push(i),o.push(a);return o}function W(e){return Z.toByteArray(z(e))}function V(e,t,n,a){for(var i=0;a>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var Z=e("base64-js"),Y=e("ieee754"),K=e("isarray");n.Buffer=o,n.SlowBuffer=_,n.INSPECT_MAX_BYTES=50,o.poolSize=8192;var X={};o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:a(),o.TYPED_ARRAY_SUPPORT?(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array):(o.prototype.length=void 0,o.prototype.parent=void 0),o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,a=t.length,i=0,r=Math.min(n,a);r>i&&e[i]===t[i];)++i;return i!==r&&(n=e[i],a=t[i]),a>n?-1:n>a?1:0},o.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!K(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new o(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var a=new o(t),i=0;for(n=0;n<e.length;n++){var r=e[n];r.copy(a,i),i+=r.length}return a},o.byteLength=v,o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):y.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:o.compare(this,e)},o.prototype.indexOf=function(e,t){function n(e,t,n){for(var a=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===a?0:i-a]){if(-1===a&&(a=i),i-a+1===t.length)return n+a}else a=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(o.isBuffer(e))return n(this,e,t);if("number"==typeof e)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},o.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},o.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},o.prototype.write=function(e,t,n,a){if(void 0===t)a="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)a=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===a&&(a="utf8")):(a=n,n=void 0);else{var i=a;a=t,t=0|n,n=i}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");a||(a="utf8");for(var r=!1;;)switch(a){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":return w(this,e,t,n);case"binary":return x(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,t,n);default:if(r)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),r=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var a;if(o.TYPED_ARRAY_SUPPORT)a=o._augment(this.subarray(e,t));else{var i=t-e;a=new o(i,void 0);for(var r=0;i>r;r++)a[r]=this[r+e]}return a.length&&(a.parent=this.parent||this),a},o.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var a=this[e],i=1,o=0;++o<t&&(i*=256);)a+=this[e+o]*i;return a},o.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var a=this[e+--t],i=1;t>0&&(i*=256);)a+=this[e+--t]*i;return a},o.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var a=this[e],i=1,o=0;++o<t&&(i*=256);)a+=this[e+o]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},o.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var a=t,i=1,o=this[e+--a];a>0&&(i*=256);)o+=this[e+--a]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),Y.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),Y.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),Y.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),Y.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,a){e=+e,t=0|t,n=0|n,a||D(this,e,t,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,a){e=+e,t=0|t,n=0|n,a||D(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,a){if(e=+e,t=0|t,!a){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,r=1,s=0>e?1:0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=(e/r>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,a){if(e=+e,t=0|t,!a){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,r=1,s=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(r*=256);)this[t+o]=(e/r>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return O(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return O(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,a){if(n||(n=0),a||0===a||(a=this.length),t>=e.length&&(t=e.length),t||(t=0),a>0&&n>a&&(a=n),a===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-n&&(a=e.length-t+n);var i,r=a-n;if(this===e&&t>n&&a>t)for(i=r-1;i>=0;i--)e[i+t]=this[i+n];else if(1e3>r||!o.TYPED_ARRAY_SUPPORT)for(i=0;r>i;i++)e[i+t]=this[i+n];else e._set(this.subarray(n,n+r),t);return r},o.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var a;if("number"==typeof e)for(a=t;n>a;a++)this[a]=e;else{var i=U(""+e),o=i.length;for(a=t;n>a;a++)this[a]=i[a%o]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=o.prototype;o._augment=function(e){return e.constructor=o,e._isBuffer=!0,e._set=e.set,e.get=Q.get,e.set=Q.set,e.write=Q.write,e.toString=Q.toString,e.toLocaleString=Q.toString,e.toJSON=Q.toJSON,e.equals=Q.equals,e.compare=Q.compare,e.indexOf=Q.indexOf,e.copy=Q.copy,e.slice=Q.slice,e.readUIntLE=Q.readUIntLE,e.readUIntBE=Q.readUIntBE,e.readUInt8=Q.readUInt8,e.readUInt16LE=Q.readUInt16LE,e.readUInt16BE=Q.readUInt16BE,e.readUInt32LE=Q.readUInt32LE,e.readUInt32BE=Q.readUInt32BE,e.readIntLE=Q.readIntLE,e.readIntBE=Q.readIntBE,e.readInt8=Q.readInt8,e.readInt16LE=Q.readInt16LE,e.readInt16BE=Q.readInt16BE,e.readInt32LE=Q.readInt32LE,e.readInt32BE=Q.readInt32BE,e.readFloatLE=Q.readFloatLE,e.readFloatBE=Q.readFloatBE,e.readDoubleLE=Q.readDoubleLE,e.readDoubleBE=Q.readDoubleBE,e.writeUInt8=Q.writeUInt8,e.writeUIntLE=Q.writeUIntLE,e.writeUIntBE=Q.writeUIntBE,e.writeUInt16LE=Q.writeUInt16LE,e.writeUInt16BE=Q.writeUInt16BE,e.writeUInt32LE=Q.writeUInt32LE,e.writeUInt32BE=Q.writeUInt32BE,e.writeIntLE=Q.writeIntLE,e.writeIntBE=Q.writeIntBE,e.writeInt8=Q.writeInt8,e.writeInt16LE=Q.writeInt16LE,e.writeInt16BE=Q.writeInt16BE,e.writeInt32LE=Q.writeInt32LE,e.writeInt32BE=Q.writeInt32BE,e.writeFloatLE=Q.writeFloatLE,e.writeFloatBE=Q.writeFloatBE,e.writeDoubleLE=Q.writeDoubleLE,e.writeDoubleBE=Q.writeDoubleBE,e.fill=Q.fill,e.inspect=Q.inspect,e.toArrayBuffer=Q.toArrayBuffer,e};var ee=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":389,ieee754:390,isarray:391}],389:[function(e,t,n){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===r||t===d?62:t===s||t===h?63:l>t?-1:l+10>t?t-l+26+26:u+26>t?t-u:c+26>t?t-c+26:void 0}function n(e){function n(e){c[d++]=e}var a,i,r,s,l,c;if(e.length%4>0)throw Error("Invalid string. Length must be a multiple of 4");var u=e.length;l="="===e.charAt(u-2)?2:"="===e.charAt(u-1)?1:0,c=new o(3*e.length/4-l),r=l>0?e.length-4:e.length;var d=0;for(a=0,i=0;r>a;a+=4,i+=3)s=t(e.charAt(a))<<18|t(e.charAt(a+1))<<12|t(e.charAt(a+2))<<6|t(e.charAt(a+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===l?(s=t(e.charAt(a))<<2|t(e.charAt(a+1))>>4,n(255&s)):1===l&&(s=t(e.charAt(a))<<10|t(e.charAt(a+1))<<4|t(e.charAt(a+2))>>2,n(s>>8&255),n(255&s)),c}function i(e){function t(e){return a.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,r,s=e.length%3,l="";for(i=0,r=e.length-s;r>i;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],l+=n(o);switch(s){case 1:o=e[e.length-1],l+=t(o>>2),l+=t(o<<4&63),l+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],l+=t(o>>10),l+=t(o>>4&63),l+=t(o<<2&63),l+="="}return l}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,r="+".charCodeAt(0),s="/".charCodeAt(0),l="0".charCodeAt(0),c="a".charCodeAt(0),u="A".charCodeAt(0),d="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=i}(void 0===n?this.base64js={}:n)},{}],390:[function(e,t,n){n.read=function(e,t,n,a,i){var o,r,s=8*i-a-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?i-1:0,h=n?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=h,u-=8);for(r=o&(1<<-u)-1,o>>=-u,u+=a;u>0;r=256*r+e[t+d],d+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return r?NaN:(p?-1:1)*(1/0);r+=Math.pow(2,a),o-=c}return(p?-1:1)*r*Math.pow(2,o-a)},n.write=function(e,t,n,a,i,o){var r,s,l,c=8*o-i-1,u=(1<<c)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=a?0:o-1,f=a?1:-1,m=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,r=u):(r=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-r))<1&&(r--,l*=2),t+=r+d>=1?h/l:h*Math.pow(2,1-d),t*l>=2&&(r++,l/=2),r+d>=u?(s=0,r=u):r+d>=1?(s=(t*l-1)*Math.pow(2,i),r+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),r=0));i>=8;e[n+p]=255&s,p+=f,s/=256,i-=8);for(r=r<<i|s,c+=i;c>0;e[n+p]=255&r,p+=f,r/=256,c-=8);e[n+p-f]|=128*m}},{}],391:[function(e,t,n){var a={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==a.call(e)}},{}],392:[function(e,t,n){(function(n){function a(){}function i(){h.log.apply(h,arguments)}function o(){h.log.apply(h,arguments)}function r(){h.warn.apply(h,arguments)}function s(e){_[e]=m()}function l(e){var t=_[e];if(!t)throw Error("No such label: "+e);var n=m()-t;h.log(e+": "+n+"ms")}function c(){var e=Error();e.name="Trace",e.message=p.format.apply(null,arguments),h.error(e.stack)}function u(e){h.log(p.inspect(e)+"\n")}function d(e){if(!e){var t=g.call(arguments,1);f.ok(!1,p.format.apply(null,t))}}var h,p=e("util"),f=e("assert"),m=e("date-now"),g=Array.prototype.slice,_={};h=void 0!==n&&n.console?n.console:"undefined"!=typeof window&&window.console?window.console:{};for(var v=[[a,"log"],[i,"info"],[o,"warn"],[r,"error"],[s,"time"],[l,"timeEnd"],[c,"trace"],[u,"dir"],[d,"assert"]],y=0;y<v.length;y++){var b=v[y],k=b[0],w=b[1];h[w]||(h[w]=k)}t.exports=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{assert:386,"date-now":393,util:422}],393:[function(e,t,n){function a(){return(new Date).getTime()}t.exports=a},{}],394:[function(e,t,n){function a(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function r(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},a.prototype.emit=function(e){var t,n,a,o,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(r(n))for(o=Array.prototype.slice.call(arguments,1),c=n.slice(),a=c.length,l=0;a>l;l++)c[l].apply(this,o);return!0},a.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(n=s(this._maxListeners)?a.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},a.prototype.on=a.prototype.addListener,a.prototype.once=function(e,t){function n(){this.removeListener(e,n),a||(a=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var a=!1;return n.listener=t,this.on(e,n),this},a.prototype.removeListener=function(e,t){var n,a,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,a=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){a=s;break}if(0>a)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},a.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},a.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},a.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},a.listenerCount=function(e,t){return e.listenerCount(t)}},{}],395:[function(e,t,n){t.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],396:[function(e,t,n){function a(){h&&u&&(h=!1,u.length?d=u.concat(d):p=-1,d.length&&i())}function i(){if(!h){var e=s(a);h=!0;for(var t=d.length;t;){for(u=d,d=[];++p<t;)u&&u[p].run();p=-1,t=d.length}u=null,h=!1,l(e)}}function o(e,t){this.fun=e,this.array=t}function r(){}var s,l,c=t.exports={};!function(){try{s=setTimeout}catch(e){s=function(){throw Error("setTimeout is not defined")}}try{l=clearTimeout}catch(e){l=function(){throw Error("clearTimeout is not defined")}}}();var u,d=[],h=!1,p=-1;c.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new o(e,t)),1!==d.length||h||s(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=r,c.addListener=r,c.once=r,c.off=r,c.removeListener=r,c.removeAllListeners=r,c.emit=r,c.binding=function(e){throw Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],397:[function(e,t,n){(function(e){!function(a){function i(e){throw new RangeError(A[e])}function o(e,t){for(var n=e.length,a=[];n--;)a[n]=t(e[n]);return a}function r(e,t){var n=e.split("@"),a="";n.length>1&&(a=n[0]+"@",e=n[1]),e=e.replace(M,".");var i=e.split("."),r=o(i,t).join(".");return a+r}function s(e){for(var t,n,a=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&o>i?(n=e.charCodeAt(i++),56320==(64512&n)?a.push(((1023&t)<<10)+(1023&n)+65536):(a.push(t),i--)):a.push(t);return a}function l(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=N(e>>>10&1023|55296),e=56320|1023&e),t+=N(e)}).join("")}function c(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:w}function u(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function d(e,t,n){var a=0;for(e=n?R(e/I):e>>1,e+=R(e/t);e>D*C>>1;a+=w)e=R(e/D);return R(a+(D+1)*e/(e+L))}function h(e){var t,n,a,o,r,s,u,h,p,f,m=[],g=e.length,_=0,v=S,y=T;for(n=e.lastIndexOf(E),0>n&&(n=0),a=0;n>a;++a)e.charCodeAt(a)>=128&&i("not-basic"),m.push(e.charCodeAt(a));for(o=n>0?n+1:0;g>o;){for(r=_,s=1,u=w;o>=g&&i("invalid-input"),h=c(e.charCodeAt(o++)),(h>=w||h>R((k-_)/s))&&i("overflow"),_+=h*s,p=y>=u?x:u>=y+C?C:u-y,!(p>h);u+=w)f=w-p,s>R(k/f)&&i("overflow"),s*=f;t=m.length+1,y=d(_-r,t,0==r),R(_/t)>k-v&&i("overflow"),v+=R(_/t),_%=t,m.splice(_++,0,v)}return l(m)}function p(e){var t,n,a,o,r,l,c,h,p,f,m,g,_,v,y,b=[];for(e=s(e),g=e.length,t=S,n=0,r=T,l=0;g>l;++l)m=e[l],128>m&&b.push(N(m));for(a=o=b.length,o&&b.push(E);g>a;){for(c=k,l=0;g>l;++l)m=e[l],m>=t&&c>m&&(c=m);for(_=a+1,c-t>R((k-n)/_)&&i("overflow"),n+=(c-t)*_,t=c,l=0;g>l;++l)if(m=e[l],t>m&&++n>k&&i("overflow"),m==t){for(h=n,p=w;f=r>=p?x:p>=r+C?C:p-r,!(f>h);p+=w)y=h-f,v=w-f,b.push(N(u(f+y%v,0))),h=R(y/v);b.push(N(u(h,0))),r=d(n,_,a==o),n=0,++a}++n,++t}return b.join("")}function f(e){return r(e,function(e){return P.test(e)?h(e.slice(4).toLowerCase()):e})}function m(e){return r(e,function(e){return j.test(e)?"xn--"+p(e):e})}var g="object"==typeof n&&n&&!n.nodeType&&n,_="object"==typeof t&&t&&!t.nodeType&&t,v="object"==typeof e&&e;v.global!==v&&v.window!==v&&v.self!==v||(a=v);var y,b,k=2147483647,w=36,x=1,C=26,L=38,I=700,T=72,S=128,E="-",P=/^xn--/,j=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=w-x,R=Math.floor,N=String.fromCharCode;if(y={version:"1.4.1",ucs2:{decode:s,encode:l},decode:h,encode:p,toASCII:m,toUnicode:f},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return y});else if(g&&_)if(t.exports==g)_.exports=y;else for(b in y)y.hasOwnProperty(b)&&(g[b]=y[b]);else a.punycode=y}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],398:[function(e,t,n){"use strict";function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var r={};if("string"!=typeof e||0===e.length)return r;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var u=0;c>u;++u){var d,h,p,f,m=e[u].replace(s,"%20"),g=m.indexOf(n);g>=0?(d=m.substr(0,g),h=m.substr(g+1)):(d=m,h=""),p=decodeURIComponent(d),f=decodeURIComponent(h),a(r,p)?i(r[p])?r[p].push(f):r[p]=[r[p],f]:r[p]=f}return r};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],399:[function(e,t,n){"use strict";function a(e,t){if(e.map)return e.map(t);for(var n=[],a=0;a<e.length;a++)n.push(t(e[a],a));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?a(r(e),function(r){var s=encodeURIComponent(i(r))+n;return o(e[r])?a(e[r],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[r]))}).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],400:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":398,"./encode":399}],401:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":402}],402:[function(e,t,n){"use strict";function a(e){return this instanceof a?(c.call(this,e),u.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new a(e)}function i(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(e){e.end()}var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=a;var s=e("process-nextick-args"),l=e("core-util-is");l.inherits=e("inherits");var c=e("./_stream_readable"),u=e("./_stream_writable");l.inherits(a,c);for(var d=r(u.prototype),h=0;h<d.length;h++){var p=d[h];a.prototype[p]||(a.prototype[p]=u.prototype[p])}},{"./_stream_readable":404,"./_stream_writable":406,"core-util-is":408,inherits:447,"process-nextick-args":410}],403:[function(e,t,n){"use strict";function a(e){return this instanceof a?void i.call(this,e):new a(e)}t.exports=a;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(a,i),a.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":405,"core-util-is":408,inherits:447}],404:[function(e,t,n){(function(n){"use strict";function a(e,t,n){return F?e.prependListener(t,n):void(e._events&&e._events[t]?T(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function i(t,n){B=B||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof B&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var a=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(N||(N=e("string_decoder/").StringDecoder),this.decoder=new N(t.encoding),this.encoding=t.encoding)}function o(t){return B=B||e("./_stream_duplex"),this instanceof o?(this._readableState=new i(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void S.call(this)):new o(t)}function r(e,t,n,a,i){var o=u(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,d(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var r=Error("stream.push() after EOF");e.emit("error",r)}else if(t.endEmitted&&i){var l=Error("stream.unshift() after end event");e.emit("error",l)}else{var c;!t.decoder||i||a||(n=t.decoder.write(n),c=!t.objectMode&&0===n.length),i||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&h(e))),f(e,t)}else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function l(e){return e>=O?e=O:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function c(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=l(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function u(e,t){var n=null;return j.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function d(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,h(e)}}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(R("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?I(p,e):p(e))}function p(e){R("emit readable"),e.emit("readable"),b(e)}function f(e,t){t.readingMore||(t.readingMore=!0,I(m,e,t))}function m(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(R("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;R("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&P(e,"data")&&(t.flowing=!0,b(e))}}function _(e){R("readable nexttick read 0"),e.read(0)}function v(e,t){t.resumeScheduled||(t.resumeScheduled=!0,I(y,e,t))}function y(e,t){t.reading||(R("resume read 0"),e.read(0)),t.resumeScheduled=!1,e.emit("resume"),b(e),t.flowing&&!t.reading&&e.read(0)}function b(e){var t=e._readableState;if(R("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function k(e,t){var n,a=t.buffer,i=t.length,o=!!t.decoder,r=!!t.objectMode;if(0===a.length)return null;if(0===i)n=null;else if(r)n=a.shift();else if(!e||e>=i)n=o?a.join(""):1===a.length?a[0]:j.concat(a,i),a.length=0;else if(e<a[0].length){var s=a[0];n=s.slice(0,e),a[0]=s.slice(e)}else if(e===a[0].length)n=a.shift();else{n=o?"":M.allocUnsafe(e);for(var l=0,c=0,u=a.length;u>c&&e>l;c++){var d=a[0],h=Math.min(e-l,d.length);o?n+=d.slice(0,h):d.copy(n,l,0,h),h<d.length?a[0]=d.slice(h):a.shift(),l+=h}}return n}function w(e){var t=e._readableState;if(t.length>0)throw Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,I(x,t,e))}function x(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function C(e,t){for(var n=0,a=e.length;a>n;n++)t(e[n],n)}function L(e,t){for(var n=0,a=e.length;a>n;n++)if(e[n]===t)return n;return-1}t.exports=o;var I=e("process-nextick-args"),T=e("isarray");o.ReadableState=i;var S,E=e("events").EventEmitter,P=function(e,t){return e.listeners(t).length};!function(){try{S=e("stream")}catch(t){}finally{S||(S=e("events").EventEmitter)}}();var j=e("buffer").Buffer,M=e("buffer-shims"),A=e("core-util-is");A.inherits=e("inherits");var D=e("util"),R=void 0;R=D&&D.debuglog?D.debuglog("stream"):function(){};var N;A.inherits(o,S);var B,B,F="function"==typeof E.prototype.prependListener;o.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding,t!==n.encoding&&(e=M.from(e,t),t="")),r(this,n,e,t,!1)},o.prototype.unshift=function(e){var t=this._readableState;return r(this,t,e,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(t){return N||(N=e("string_decoder/").StringDecoder),
this._readableState.decoder=new N(t),this._readableState.encoding=t,this};var O=8388608;o.prototype.read=function(e){R("read",e);var t=this._readableState,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return R("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?w(this):h(this),null;if(e=c(e,t),0===e&&t.ended)return 0===t.length&&w(this),null;var a=t.needReadable;R("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&(a=!0,R("length less than watermark",a)),(t.ended||t.reading)&&(a=!1,R("reading or ended",a)),a&&(R("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),a&&!t.reading&&(e=c(n,t));var i;return i=e>0?k(e,t):null,null===i&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&w(this),null!==i&&this.emit("data",i),i},o.prototype._read=function(e){this.emit("error",Error("not implemented"))},o.prototype.pipe=function(e,t){function i(e){R("onunpipe"),e===h&&r()}function o(){R("onend"),e.end()}function r(){R("cleanup"),e.removeListener("close",c),e.removeListener("finish",u),e.removeListener("drain",_),e.removeListener("error",l),e.removeListener("unpipe",i),h.removeListener("end",o),h.removeListener("end",r),h.removeListener("data",s),v=!0,!p.awaitDrain||e._writableState&&!e._writableState.needDrain||_()}function s(t){R("ondata");var n=e.write(t);!1===n&&((1===p.pipesCount&&p.pipes===e||p.pipesCount>1&&-1!==L(p.pipes,e))&&!v&&(R("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++),h.pause())}function l(t){R("onerror",t),d(),e.removeListener("error",l),0===P(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",u),d()}function u(){R("onfinish"),e.removeListener("close",c),d()}function d(){R("unpipe"),h.unpipe(e)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,R("pipe count=%d opts=%j",p.pipesCount,t);var f=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,m=f?o:r;p.endEmitted?I(m):h.once("end",m),e.on("unpipe",i);var _=g(h);e.on("drain",_);var v=!1;return h.on("data",s),a(e,"error",l),e.once("close",c),e.once("finish",u),e.emit("pipe",h),p.flowing||(R("pipe resume"),h.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;a>i;i++)n[i].emit("unpipe",this);return this}var o=L(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var n=S.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&!this._readableState.endEmitted){var a=this._readableState;a.readableListening||(a.readableListening=!0,a.emittedReadable=!1,a.needReadable=!0,a.reading?a.length&&h(this,a):I(_,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(R("resume"),e.flowing=!0,v(this,e)),this},o.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,n=!1,a=this;e.on("end",function(){if(R("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&a.push(e)}a.push(null)}),e.on("data",function(i){if(R("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=a.push(i);o||(n=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return C(o,function(t){e.on(t,a.emit.bind(a,t))}),a._read=function(t){R("wrapped _read",t),n&&(n=!1,e.resume())},a},o._fromList=k}).call(this,e("_process"))},{"./_stream_duplex":402,_process:396,buffer:388,"buffer-shims":407,"core-util-is":408,events:394,inherits:447,isarray:409,"process-nextick-args":410,"string_decoder/":417,util:387}],405:[function(e,t,n){"use strict";function a(e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,n){var a=e._transformState;a.transforming=!1;var i=a.writecb;if(!i)return e.emit("error",Error("no writecb in Transform class"));a.writechunk=null,a.writecb=null,null!==n&&void 0!==n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e),this._transformState=new a(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){r(t,e)}):r(t)})}function r(e,t){if(t)return e.emit("error",t);var n=e._writableState,a=e._transformState;if(n.length)throw Error("Calling transform done when ws.length != 0");if(a.transforming)throw Error("Calling transform done when still transforming");return e.push(null)}t.exports=o;var s=e("./_stream_duplex"),l=e("core-util-is");l.inherits=e("inherits"),l.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw Error("Not implemented")},o.prototype._write=function(e,t,n){var a=this._transformState;if(a.writecb=n,a.writechunk=e,a.writeencoding=t,!a.transforming){var i=this._readableState;(a.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":402,"core-util-is":408,inherits:447}],406:[function(e,t,n){(function(n){"use strict";function a(){}function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function o(t,n){P=P||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof P&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var a=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){f(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new w(this)}function r(t){return P=P||e("./_stream_duplex"),this instanceof r||this instanceof P?(this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void I.call(this)):new r(t)}function s(e,t){var n=Error("write after end");e.emit("error",n),x(t,n)}function l(e,t,n,a){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):S.isBuffer(n)||"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),x(a,o),i=!1),i}function c(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=E.from(t,n)),t}function u(e,t,n,a,o){n=c(t,n,a),S.isBuffer(n)&&(a="buffer");var r=t.objectMode?1:n.length;t.length+=r;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest=new i(n,a,o),l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else d(e,t,!1,r,n,a,o);return s}function d(e,t,n,a,i,o,r){t.writelen=a,t.writecb=r,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,n,a,i){--t.pendingcb,n?x(i,a):i(a),e._writableState.errorEmitted=!0,e.emit("error",a)}function p(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function f(e,t){var n=e._writableState,a=n.sync,i=n.writecb;if(p(n),t)h(e,n,a,t,i);else{var o=v(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||_(e,n),a?C(m,e,n,o,i):m(e,n,o,i)}}function m(e,t,n,a){n||g(e,t),t.pendingcb--,a(),b(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function _(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var a=t.bufferedRequestCount,i=Array(a),o=t.corkedRequestsFree;o.entry=n;for(var r=0;n;)i[r]=n,n=n.next,r+=1;d(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new w(t)}else{for(;n;){var s=n.chunk,l=n.encoding,c=n.callback,u=t.objectMode?1:s.length;if(d(e,t,!1,u,s,l,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function v(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function y(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function b(e,t){var n=v(t);return n&&(0===t.pendingcb?(y(e,t),t.finished=!0,e.emit("finish")):y(e,t)),n}function k(e,t,n){t.ending=!0,b(e,t),n&&(t.finished?x(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function w(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var a=t.entry;for(t.entry=null;a;){var i=a.callback;e.pendingcb--,i(n),a=a.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}t.exports=r;var x=e("process-nextick-args"),C=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:x;r.WritableState=o;var L=e("core-util-is");L.inherits=e("inherits");var I,T={deprecate:e("util-deprecate")};!function(){try{I=e("stream")}catch(t){}finally{I||(I=e("events").EventEmitter)}}();var S=e("buffer").Buffer,E=e("buffer-shims");L.inherits(r,I);var P;o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:T.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var P;r.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))},r.prototype.write=function(e,t,n){var i=this._writableState,o=!1;return"function"==typeof t&&(n=t,t=null),S.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=a),i.ended?s(this,n):l(this,i,e,n)&&(i.pendingcb++,o=u(this,i,e,t,n)),o},r.prototype.cork=function(){var e=this._writableState;e.corked++},r.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||_(this,e))},r.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},r.prototype._write=function(e,t,n){n(Error("not implemented"))},r.prototype._writev=null,r.prototype.end=function(e,t,n){var a=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),a.corked&&(a.corked=1,this.uncork()),a.ending||a.finished||k(this,a,n)}}).call(this,e("_process"))},{"./_stream_duplex":402,_process:396,buffer:388,"buffer-shims":407,"core-util-is":408,events:394,inherits:447,"process-nextick-args":410,"util-deprecate":411}],407:[function(e,t,n){(function(t){"use strict";var a=e("buffer"),i=a.Buffer,o=a.SlowBuffer,r=a.kMaxLength||2147483647;n.alloc=function(e,t,n){if("function"==typeof i.alloc)return i.alloc(e,t,n);if("number"==typeof n)throw new TypeError("encoding must not be number");if("number"!=typeof e)throw new TypeError("size must be a number");if(e>r)throw new RangeError("size is too large");var a=n,o=t;void 0===o&&(a=void 0,o=0);var s=new i(e);if("string"==typeof o)for(var l=new i(o,a),c=l.length,u=-1;++u<e;)s[u]=l[u%c];else s.fill(o);return s},n.allocUnsafe=function(e){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>r)throw new RangeError("size is too large");return new i(e)},n.from=function(e,n,a){if("function"==typeof i.from&&(!t.Uint8Array||Uint8Array.from!==i.from))return i.from(e,n,a);if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("string"==typeof e)return new i(e,n);if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var o=n;if(1===arguments.length)return new i(e);void 0===o&&(o=0);var r=a;if(void 0===r&&(r=e.byteLength-o),o>=e.byteLength)throw new RangeError("'offset' is out of bounds");if(r>e.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(e.slice(o,o+r))}if(i.isBuffer(e)){var s=new i(e.length);return e.copy(s,0,0,e.length),s}if(e){if(Array.isArray(e)||"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return new i(e);if("Buffer"===e.type&&Array.isArray(e.data))return new i(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},n.allocUnsafeSlow=function(e){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=r)throw new RangeError("size is too large");return new o(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:388}],408:[function(e,t,n){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function a(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function r(e){return"number"==typeof e}function s(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function c(e){return void 0===e}function u(e){return"[object RegExp]"===g(e)}function d(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===g(e)}function p(e){return"[object Error]"===g(e)||e instanceof Error}function f(e){return"function"==typeof e}function m(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function g(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=a,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=r,n.isString=s,n.isSymbol=l,n.isUndefined=c,n.isRegExp=u,n.isObject=d,n.isDate=h,n.isError=p,n.isFunction=f,n.isPrimitive=m,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../../../insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../insert-module-globals/node_modules/is-buffer/index.js":395}],409:[function(e,t,n){arguments[4][391][0].apply(n,arguments)},{dup:391}],410:[function(e,t,n){(function(e){"use strict";function n(t,n,a,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,r,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,a)});case 4:return e.nextTick(function(){t.call(null,n,a,i)});default:for(o=Array(s-1),r=0;r<o.length;)o[r++]=arguments[r];return e.nextTick(function(){t.apply(null,o)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=n:t.exports=e.nextTick}).call(this,e("_process"))},{_process:396}],411:[function(e,t,n){(function(e){function n(e,t){function n(){if(!i){if(a("throwDeprecation"))throw Error(t);a("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(a("noDeprecation"))return e;var i=!1;return n}function a(t){try{if(!e.localStorage)return!1}catch(n){return!1}var a=e.localStorage[t];return null==a?!1:"true"===(a+"").toLowerCase()}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],412:[function(e,t,n){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":403}],413:[function(e,t,n){(function(a){var i=function(){try{return e("stream")}catch(t){}}();n=t.exports=e("./lib/_stream_readable.js"),n.Stream=i||n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),!a.browser&&"disable"===a.env.READABLE_STREAM&&i&&(t.exports=i)}).call(this,e("_process"))},{"./lib/_stream_duplex.js":402,"./lib/_stream_passthrough.js":403,"./lib/_stream_readable.js":404,"./lib/_stream_transform.js":405,"./lib/_stream_writable.js":406,_process:396}],414:[function(e,t,n){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":405}],415:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":406}],416:[function(e,t,n){function a(){i.call(this)}t.exports=a;var i=e("events").EventEmitter,o=e("inherits");o(a,i),a.Readable=e("readable-stream/readable.js"),a.Writable=e("readable-stream/writable.js"),a.Duplex=e("readable-stream/duplex.js"),a.Transform=e("readable-stream/transform.js"),a.PassThrough=e("readable-stream/passthrough.js"),a.Stream=a,a.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function a(){c.readable&&c.resume&&c.resume()}function o(){u||(u=!0,e.end())}function r(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(l(),0===i.listenerCount(this,"error"))throw e}function l(){c.removeListener("data",n),e.removeListener("drain",a),c.removeListener("end",o),c.removeListener("close",r),c.removeListener("error",s),e.removeListener("error",s),c.removeListener("end",l),c.removeListener("close",l),e.removeListener("close",l)}var c=this;c.on("data",n),e.on("drain",a),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",r));var u=!1;return c.on("error",s),e.on("error",s),c.on("end",l),c.on("close",l),e.on("close",l),e.emit("pipe",c),e}},{events:394,inherits:447,"readable-stream/duplex.js":401,"readable-stream/passthrough.js":412,"readable-stream/readable.js":413,"readable-stream/transform.js":414,"readable-stream/writable.js":415}],417:[function(e,t,n){function a(e){if(e&&!l(e))throw Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function r(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=e("buffer").Buffer,l=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),a(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=r;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var a=t.charCodeAt(t.length-1);if(!(a>=55296&&56319>=a)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,a=t.charCodeAt(i);if(a>=55296&&56319>=a){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,a=this.charBuffer,i=this.encoding;t+=a.slice(0,n).toString(i)}return t}},{buffer:388}],418:[function(e,t,n){function a(e,t){this._id=e,this._clearFn=t}var i=e("process/browser.js").nextTick,o=Function.prototype.apply,r=Array.prototype.slice,s={},l=0;n.setTimeout=function(){return new a(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new a(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n.setImmediate="function"==typeof setImmediate?setImmediate:function(e){var t=l++,a=arguments.length<2?!1:r.call(arguments,1);return s[t]=!0,i(function(){s[t]&&(a?e.apply(null,a):e.call(null),n.clearImmediate(t))}),t},n.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(e){delete s[e]}},{"process/browser.js":396}],419:[function(e,t,n){"use strict";function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&c.isObject(e)&&e instanceof a)return e;var i=new a;return i.parse(e,t,n),i}function o(e){return c.isString(e)&&(e=i(e)),e instanceof a?e.format():a.prototype.format.call(e)}function r(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}var l=e("punycode"),c=e("./util");n.parse=i,n.resolve=r,n.resolveObject=s,n.format=o,n.Url=a;var u=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","	"],f=["{","}","|","\\","^","`"].concat(p),m=["'"].concat(f),g=["%","/","?",";","#"].concat(m),_=["/","?","#"],v=255,y=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=e("querystring");a.prototype.parse=function(e,t,n){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),i=-1!==a&&a<e.indexOf("#")?"?":"#",o=e.split(i),r=/\\/g;o[0]=o[0].replace(r,"/"),e=o.join(i);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var d=h.exec(s);if(d)return this.path=s,this.href=s,this.pathname=d[1],d[2]?(this.search=d[2],t?this.query=C.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=u.exec(s);if(p){p=p[0];var f=p.toLowerCase();this.protocol=f,s=s.substr(p.length)}if(n||p||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var L="//"===s.substr(0,2);!L||p&&w[p]||(s=s.substr(2),this.slashes=!0)}if(!w[p]&&(L||p&&!x[p])){for(var I=-1,T=0;T<_.length;T++){var S=s.indexOf(_[T]);-1!==S&&(-1===I||I>S)&&(I=S)}var E,P;P=-1===I?s.lastIndexOf("@"):s.lastIndexOf("@",I),-1!==P&&(E=s.slice(0,P),s=s.slice(P+1),this.auth=decodeURIComponent(E)),I=-1;for(var T=0;T<g.length;T++){var S=s.indexOf(g[T]);-1!==S&&(-1===I||I>S)&&(I=S)}-1===I&&(I=s.length),this.host=s.slice(0,I),s=s.slice(I),this.parseHost(),this.hostname=this.hostname||"";var j="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!j)for(var M=this.hostname.split(/\./),T=0,A=M.length;A>T;T++){var D=M[T];if(D&&!D.match(y)){for(var R="",N=0,B=D.length;B>N;N++)R+=D.charCodeAt(N)>127?"x":D[N];if(!R.match(y)){var F=M.slice(0,T),O=M.slice(T+1),z=D.match(b);z&&(F.push(z[1]),O.unshift(z[2])),O.length&&(s="/"+O.join(".")+s),this.hostname=F.join(".");break}}}this.hostname.length>v?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=l.toASCII(this.hostname));var q=this.port?":"+this.port:"",$=this.hostname||"";this.host=$+q,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!k[f])for(var T=0,A=m.length;A>T;T++){var U=m[T];if(-1!==s.indexOf(U)){var H=encodeURIComponent(U);H===U&&(H=escape(U)),s=s.split(U).join(H)}}var G=s.indexOf("#");-1!==G&&(this.hash=s.substr(G),s=s.slice(0,G));var W=s.indexOf("?");if(-1!==W?(this.search=s.substr(W),this.query=s.substr(W+1),t&&(this.query=C.parse(this.query)),s=s.slice(0,W)):t&&(this.search="",this.query={}),s&&(this.pathname=s),x[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var q=this.pathname||"",V=this.search||"";this.path=q+V}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",a=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(o=C.stringify(this.query));var r=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||x[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),a&&"#"!==a.charAt(0)&&(a="#"+a),r&&"?"!==r.charAt(0)&&(r="?"+r),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),r=r.replace("#","%23"),t+i+n+r+a},a.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(c.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var n=new a,i=Object.keys(this),o=0;o<i.length;o++){var r=i[o];n[r]=this[r]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),l=0;l<s.length;l++){var u=s[l];"protocol"!==u&&(n[u]=e[u])}return x[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!x[e.protocol]){for(var d=Object.keys(e),h=0;h<d.length;h++){var p=d[h];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||w[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",g=n.search||"";n.path=m+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=v||_||n.host&&e.pathname,b=y,k=n.pathname&&n.pathname.split("/")||[],f=e.pathname&&e.pathname.split("/")||[],C=n.protocol&&!x[n.protocol];if(C&&(n.hostname="",n.port=null,n.host&&(""===k[0]?k[0]=n.host:k.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),y=y&&(""===f[0]||""===k[0])),v)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,k=f;else if(f.length)k||(k=[]),k.pop(),k=k.concat(f),n.search=e.search,n.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(C){n.hostname=n.host=k.shift();var L=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;L&&(n.auth=L.shift(),n.host=n.hostname=L.shift())}return n.search=e.search,n.query=e.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!k.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var I=k.slice(-1)[0],T=(n.host||e.host||k.length>1)&&("."===I||".."===I)||""===I,S=0,E=k.length;E>=0;E--)I=k[E],"."===I?k.splice(E,1):".."===I?(k.splice(E,1),S++):S&&(k.splice(E,1),S--);if(!y&&!b)for(;S--;S)k.unshift("..");!y||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),T&&"/"!==k.join("/").substr(-1)&&k.push("");var P=""===k[0]||k[0]&&"/"===k[0].charAt(0);if(C){n.hostname=n.host=P?"":k.length?k.shift():"";var L=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;L&&(n.auth=L.shift(),n.host=n.hostname=L.shift())}return y=y||n.host&&k.length,y&&!P&&k.unshift(""),k.length?n.pathname=k.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},a.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":420,punycode:397,querystring:400}],420:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],421:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],422:[function(e,t,n){(function(t,a){function i(e,t){var a={seen:[],stylize:r};return arguments.length>=3&&(a.depth=arguments[2]),arguments.length>=4&&(a.colors=arguments[3]),m(t)?a.showHidden=t:t&&n._extend(a,t),k(a.showHidden)&&(a.showHidden=!1),k(a.depth)&&(a.depth=2),k(a.colors)&&(a.colors=!1),k(a.customInspect)&&(a.customInspect=!0),a.colors&&(a.stylize=o),l(a,e,a.depth)}function o(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function r(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function l(e,t,a){if(e.customInspect&&t&&I(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(a,e);return y(i)||(i=l(e,i,a)),i}var o=c(e,t);if(o)return o;var r=Object.keys(t),m=s(r);if(e.showHidden&&(r=Object.getOwnPropertyNames(t)),L(t)&&(r.indexOf("message")>=0||r.indexOf("description")>=0))return u(t);if(0===r.length){if(I(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(C(t))return e.stylize(Date.prototype.toString.call(t),"date");if(L(t))return u(t)}var _="",v=!1,b=["{","}"];if(f(t)&&(v=!0,b=["[","]"]),I(t)){var k=t.name?": "+t.name:"";_=" [Function"+k+"]"}if(w(t)&&(_=" "+RegExp.prototype.toString.call(t)),C(t)&&(_=" "+Date.prototype.toUTCString.call(t)),L(t)&&(_=" "+u(t)),0===r.length&&(!v||0==t.length))return b[0]+_+b[1];if(0>a)return w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");
e.seen.push(t);var x;return x=v?d(e,t,a,m,r):r.map(function(n){return h(e,t,a,m,n,v)}),e.seen.pop(),p(x,_,b)}function c(e,t){if(k(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return v(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,a,i){for(var o=[],r=0,s=t.length;s>r;++r)j(t,r+"")?o.push(h(e,t,n,a,r+"",!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,n,a,i,!0))}),o}function h(e,t,n,a,i,o){var r,s,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),j(a,i)||(r="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(n)?l(e,c.value,null):l(e,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),k(r)){if(o&&i.match(/^\d+$/))return s;r=JSON.stringify(""+i),r.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=e.stylize(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),r=e.stylize(r,"string"))}return r+": "+s}function p(e,t,n){var a=0,i=e.reduce(function(e,t){return a++,t.indexOf("\n")>=0&&a++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function f(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function _(e){return null==e}function v(e){return"number"==typeof e}function y(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function k(e){return void 0===e}function w(e){return x(e)&&"[object RegExp]"===S(e)}function x(e){return"object"==typeof e&&null!==e}function C(e){return x(e)&&"[object Date]"===S(e)}function L(e){return x(e)&&("[object Error]"===S(e)||e instanceof Error)}function I(e){return"function"==typeof e}function T(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function S(e){return Object.prototype.toString.call(e)}function E(e){return 10>e?"0"+e.toString(10):e.toString(10)}function P(){var e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),R[e.getMonth()],t].join(" ")}function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var M=/%[sdj%]/g;n.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,a=arguments,o=a.length,r=(e+"").replace(M,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return a[n++]+"";case"%d":return+a[n++];case"%j":try{return JSON.stringify(a[n++])}catch(t){return"[Circular]"}default:return e}}),s=a[n];o>n;s=a[++n])r+=g(s)||!x(s)?" "+s:" "+i(s);return r},n.deprecate=function(e,i){function o(){if(!r){if(t.throwDeprecation)throw Error(i);t.traceDeprecation?console.trace(i):console.error(i),r=!0}return e.apply(this,arguments)}if(k(a.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var r=!1;return o};var A,D={};n.debuglog=function(e){if(k(A)&&(A=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!D[e])if(RegExp("\\b"+e+"\\b","i").test(A)){var a=t.pid;D[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,a,t)}}else D[e]=function(){};return D[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=f,n.isBoolean=m,n.isNull=g,n.isNullOrUndefined=_,n.isNumber=v,n.isString=y,n.isSymbol=b,n.isUndefined=k,n.isRegExp=w,n.isObject=x,n.isDate=C,n.isError=L,n.isFunction=I,n.isPrimitive=T,n.isBuffer=e("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",P(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!x(t))return e;for(var n=Object.keys(t),a=n.length;a--;)e[n[a]]=t[n[a]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":421,_process:396,inherits:447}],423:[function(e,t,n){!function(e,n){"function"==typeof define&&define.amd?define(n):"object"==typeof t&&"object"==typeof t.exports?t.exports=n():e.Cldr=n()}(this,function(){var e=function(e,t){var n,a;if(e.forEach)return e.forEach(t);for(n=0,a=e.length;a>n;n++)t(e[n],n,e)},t=function(e){var t,n=[];if(Object.keys)return Object.keys(e);for(t in e)n.push(t);return n},n=function(n,a){var i,o;return o=n+(a&&JSON?": "+JSON.stringify(a):""),i=Error(o),i.code=n,e(t(a),function(e){i[e]=a[e]}),i},a=function(e,t,a){if(!t)throw n(e,a)},i=function(e,t){a("E_MISSING_PARAMETER",void 0!==e,{name:t})},o=function(e,t,n,i){a("E_INVALID_PAR_TYPE",n,{expected:i,name:t,value:e})},r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=function(e,t){o(e,t,"string"==typeof e||r(e),"String or Array")},l=function(e){return null!==e&&""+e=="[object Object]"},c=function(e,t){o(e,t,void 0===e||l(e),"Plain Object")},u=function(e,t){o(e,t,"string"==typeof e,"a string")},d=function(e,t){if(r(e)&&(e=e.join("/")),"string"!=typeof e)throw Error('invalid path "'+e+'"');return e=e.replace(/^\//,"").replace(/^cldr\//,""),e=e.replace(/{[a-zA-Z]+}/g,function(e){return e=e.replace(/^{([^}]*)}$/,"$1"),t[e]}),e.split("/")},h=function(e,t){var n,a;if(e.some)return e.some(t);for(n=0,a=e.length;a>n;n++)if(t(e[n],n,e))return!0;return!1},p=function(e,t,n,a){var i,o,r=n[0],s=n[1],l=e.localeSep,c=n[2];return a=a||{},"und"!==r&&"Zzzz"!==s&&"ZZ"!==c?[r,s,c]:void 0!==t.get("supplemental/likelySubtags")?(o=h([[r,s,c],[r,c],[r,s],[r],["und",s]],function(e){return i=!/\b(Zzzz|ZZ)\b/.test(e.join(l))&&t.get(["supplemental/likelySubtags",e.join(l)])}),o?(i=i.split(l),["und"!==r?r:i[0],"Zzzz"!==s?s:i[1],"ZZ"!==c?c:i[2]]):a.force?t.get("supplemental/likelySubtags/und").split(l):void 0):void 0},f=function(e,t,n){var a,i,o=n[0],r=n[1],s=n[2];return i=h([[[o,"Zzzz","ZZ"],[o]],[[o,"Zzzz",s],[o,s]],[[o,r,"ZZ"],[o,r]]],function(i){var o=p(e,t,i[0]);return a=i[1],o&&o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]}),i?a:n},m=function(e,t){var n,a=e,i=t.length;for(n=0;i-1>n;n++)if(a=a[t[n]],!a)return;return a[t[n]]},g=function(e,t,n){var a=d(t,n);return m(e._resolved,a)},_=function(e){return r(e)?e:[e]},v=function(){var t=function(){var n={},a=[].slice.call(arguments,0);return e(a,function(e){var a;for(a in e)a in n&&r(n[a])?n[a]=n[a].concat(e[a]):a in n&&"object"==typeof n[a]?n[a]=t(n[a],e[a]):n[a]=e[a]}),n};return t}(),y=function(e){this.init(e)};return y._alwaysArray=_,y._createError=n,y._itemGetResolved=g,y._jsonMerge=v,y._pathNormalize=d,y._resourceGet=m,y._validatePresence=i,y._validateType=o,y._validateTypePath=s,y._validateTypePlainObject=c,y._resolved={},y.localeSep="-",y.load=function(e){var t,n;for(i(e,"json"),t=0;t<arguments.length;t++)for(e=_(arguments[t]),n=0;n<e.length;n++)c(e[n],"json"),y._resolved=v(y._resolved,e[n])},y.prototype.init=function(e){var t,n,a,o,r,s,l,c,d,h,m=y.localeSep;switch(i(e,"locale"),u(e,"locale"),e=e.replace(/_/,"-"),n=e.split("-u-"),e=n[0],d=n[1],e=e.split("-t-")[0],c=e,!0){case/^[a-z]{2,3}-[A-Z][a-z]{3}-[A-Z0-9]{2,3}(\b|-)/.test(c):a=c.split("-")[0],s=c.split("-")[1],l=c.split("-")[2],h=c.split("-")[3];break;case/^[a-z]{2,3}-[A-Z][a-z]{3}(\b|-)/.test(c):a=c.split("-")[0],s=c.split("-")[1],l="ZZ",h=c.split("-")[2];break;case/^[a-z]{2,3}-[A-Z0-9]{2,3}(\b|-)/.test(c):a=c.split("-")[0],s="Zzzz",l=c.split("-")[1],h=c.split("-")[2];break;case/^([a-z]{2,3}|root)(\b|-)/.test(c):a=c.split("-")[0],s="Zzzz",l="ZZ",h=c.split("-")[1];break;default:a="und",s="Zzzz",l="ZZ"}r=p(y,this,[a,s,l],{force:!0})||c.split("-"),a=r[0],s=r[1],l=r[2],o=f(y,this,r).join(m),this.attributes=t={languageId:o,maxLanguageId:r.join(m),language:a,script:s,territory:l,region:l,variant:h},d&&("-"+d).replace(/-[a-z]{3,8}|(-[a-z]{2})-([a-z]{3,8})/g,function(e,n,a){n?t["u"+n]=a:t["u"+e]=!0}),this.locale=h?[o,h].join(m):o},y.prototype.get=function(e){return i(e,"path"),s(e,"path"),g(y,e,this.attributes)},y.prototype.main=function(e){return i(e,"path"),s(e,"path"),e=_(e),this.get(["main/{languageId}"].concat(e))},y})},{}],424:[function(e,t,n){!function(n){"function"==typeof define&&define.amd?define(["../cldr"],n):"object"==typeof t&&"object"==typeof t.exports?t.exports=n(e("cldrjs")):n(Cldr)}(function(e){function t(e,t){u(e,t,"string"==typeof e||e instanceof RegExp,"String or RegExp")}function n(e,n){return function(a,i){return c(a,"event"),t(a,"event"),c(i,"listener"),p(i,"listener"),n[e].apply(n,arguments)}}function a(e){return n("off",e)}function i(e){return n("on",e)}function o(e){return n("once",e)}function r(){d=e.prototype.get,e.prototype.get=function(e){var t=d.apply(this,arguments);return e=l(e,this.attributes).join("/"),f.trigger("get",[e,t]),this.ee.trigger("get",[e,t]),t}}var s,l=e._pathNormalize,c=e._validatePresence,u=e._validateType;s=function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var a=e.prototype,i=this,o=i.EventEmitter;return a.getListeners=function(e){var t,n,a=this._getEvents();if(e instanceof RegExp){t={};for(n in a)a.hasOwnProperty(n)&&e.test(n)&&(t[n]=a[n])}else t=a[e]||(a[e]=[]);return t},a.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},a.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},a.addListener=function(e,n){var a,i=this.getListenersAsObject(e),o="object"==typeof n;for(a in i)i.hasOwnProperty(a)&&-1===t(i[a],n)&&i[a].push(o?n:{listener:n,once:!1});return this},a.on=n("addListener"),a.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},a.once=n("addOnceListener"),a.defineEvent=function(e){return this.getListeners(e),this},a.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},a.removeListener=function(e,n){var a,i,o=this.getListenersAsObject(e);for(i in o)o.hasOwnProperty(i)&&(a=t(o[i],n),-1!==a&&o[i].splice(a,1));return this},a.off=n("removeListener"),a.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},a.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},a.manipulateListeners=function(e,t,n){var a,i,o=e?this.removeListener:this.addListener,r=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(a=n.length;a--;)o.call(this,t,n[a]);else for(a in t)t.hasOwnProperty(a)&&(i=t[a])&&("function"==typeof i?o.call(this,a,i):r.call(this,a,i));return this},a.removeEvent=function(e){var t,n=typeof e,a=this._getEvents();if("string"===n)delete a[e];else if(e instanceof RegExp)for(t in a)a.hasOwnProperty(t)&&e.test(t)&&delete a[t];else delete this._events;return this},a.removeAllListeners=n("removeEvent"),a.emitEvent=function(e,t){var n,a,i,o,r=this.getListenersAsObject(e);for(i in r)if(r.hasOwnProperty(i))for(a=r[i].length;a--;)n=r[i][a],n.once===!0&&this.removeListener(e,n.listener),o=n.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},a.trigger=n("emitEvent"),a.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},a.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},a._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},a._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return i.EventEmitter=o,e},e}();var d,h,p=function(e,t){u(e,t,void 0===e||"function"==typeof e,"Function")},f=new s;return e.off=a(f),e.on=i(f),e.once=o(f),h=e.prototype.init,e.prototype.init=function(){var e;this.ee=e=new s,this.off=a(e),this.on=i(e),this.once=o(e),h.apply(this,arguments)},e._eventInit=r,r(),e})},{cldrjs:427}],425:[function(e,t,n){!function(n){"function"==typeof define&&define.amd?define(["../cldr"],n):"object"==typeof t&&"object"==typeof t.exports?t.exports=n(e("cldrjs")):n(Cldr)}(function(e){var t=e._alwaysArray,n=function(e){var n,a;return n=function(n){return function(a){return a=t(a),e.get([n].concat(a))}},a=n("supplemental"),a.weekData=n("supplemental/weekData"),a.weekData.firstDay=function(){return e.get("supplemental/weekData/firstDay/{territory}")||e.get("supplemental/weekData/firstDay/001")},a.weekData.minDays=function(){var t=e.get("supplemental/weekData/minDays/{territory}")||e.get("supplemental/weekData/minDays/001");return parseInt(t,10)},a.timeData=n("supplemental/timeData"),a.timeData.allowed=function(){return e.get("supplemental/timeData/{territory}/_allowed")||e.get("supplemental/timeData/001/_allowed")},a.timeData.preferred=function(){return e.get("supplemental/timeData/{territory}/_preferred")||e.get("supplemental/timeData/001/_preferred")},a},a=e.prototype.init;return e.prototype.init=function(){a.apply(this,arguments),this.supplemental=n(this)},e})},{cldrjs:427}],426:[function(e,t,n){!function(n){"function"==typeof define&&define.amd?define(["../cldr"],n):"object"==typeof t&&"object"==typeof t.exports?t.exports=n(e("cldrjs")):n(Cldr)}(function(e){var t=e._alwaysArray,n=e._jsonMerge,a=e._pathNormalize,i=e._resourceGet,o=e._validatePresence,r=e._validateTypePath,s=e._validateTypePlainObject,l=function(e,t){var n,o;if("root"!==t)return n=a(["supplemental/parentLocales/parentLocale",t]),(o=i(e._resolved,n)||i(e._raw,n))?o:(o=t.substr(0,t.lastIndexOf(e.localeSep)),o?o:"root")},c=function(e,t,n){var a,i=e,o=t.length;for(a=0;o-1>a;a++)i[t[a]]||(i[t[a]]={}),i=i[t[a]];i[t[a]]=n},u=function(){var e;return e=function(t,o,r,s,u){var d,h,p;if(void 0!==o&&o!==u)return d=a(r,s),p=i(t._resolved,d),p&&"object"!=typeof p?p:(p=i(t._raw,d),p||(h=l(t,o),p=e(t,h,r,n(s,{languageId:h}),o)),p&&c(t._resolved,d,p),p)}}();return e._raw={},e.load=function(a){var i,r;for(o(a,"json"),i=0;i<arguments.length;i++)for(a=t(arguments[i]),r=0;r<a.length;r++)s(a[r],"json"),e._raw=n(e._raw,a[r])},e.prototype.get=function(t){return o(t,"path"),r(t,"path"),u(e,this.attributes&&this.attributes.languageId||"",t,this.attributes)},e._eventInit&&e._eventInit(),e})},{cldrjs:427}],427:[function(e,t,n){t.exports=e("./cldr"),e("./cldr/event"),e("./cldr/supplemental"),e("./cldr/unresolved")},{"./cldr":423,"./cldr/event":424,"./cldr/supplemental":425,"./cldr/unresolved":426}],428:[function(e,t,n){function a(e){return null===e||void 0===e}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length?"function"!=typeof e.copy||"function"!=typeof e.slice?!1:!(e.length>0&&"number"!=typeof e[0]):!1}function o(e,t,n){var o,u;if(a(e)||a(t))return!1;if(e.prototype!==t.prototype)return!1;if(l(e))return l(t)?(e=r.call(e),t=r.call(t),c(e,t,n)):!1;if(i(e)){if(!i(t))return!1;if(e.length!==t.length)return!1;for(o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}try{var d=s(e),h=s(t)}catch(p){return!1}if(d.length!=h.length)return!1;for(d.sort(),h.sort(),o=d.length-1;o>=0;o--)if(d[o]!=h[o])return!1;for(o=d.length-1;o>=0;o--)if(u=d[o],!c(e[u],t[u],n))return!1;return typeof e==typeof t}var r=Array.prototype.slice,s=e("./lib/keys.js"),l=e("./lib/is_arguments.js"),c=t.exports=function(e,t,n){return n||(n={}),e===t?!0:e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:o(e,t,n)}},{"./lib/is_arguments.js":429,"./lib/keys.js":430}],429:[function(e,t,n){function a(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();n=t.exports=o?a:i,n.supported=a,n.unsupported=i},{}],430:[function(e,t,n){function a(e){var t=[];for(var n in e)t.push(n);return t}n=t.exports="function"==typeof Object.keys?Object.keys:a,n.shim=a},{}],431:[function(e,t,n){!function(e){var t=function(t){this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},void 0!==t&&this.setOption(t);var n=this,a=function(){setTimeout(function(){n._options.checkOnLoad===!0&&(n._options.debug===!0&&n._log("onload->eventCallback","A check loading is launched"),null===n._var.bait&&n._creatBait(),setTimeout(function(){n.check()},1))},1)};void 0!==e.addEventListener?e.addEventListener("load",a,!1):e.attachEvent("onload",a)};t.prototype._options=null,t.prototype._var=null,t.prototype._bait=null,t.prototype._log=function(e,t){console.log("[FuckAdBlock]["+e+"] "+t)},t.prototype.setOption=function(e,t){if(void 0!==t){var n=e;e={},e[n]=t}for(var a in e)this._options[a]=e[a],this._options.debug===!0&&this._log("setOption",'The option "'+a+'" he was assigned to "'+e[a]+'"');return this},t.prototype._creatBait=function(){var t=document.createElement("div");t.setAttribute("class",this._options.baitClass),t.setAttribute("style",this._options.baitStyle),this._var.bait=e.document.body.appendChild(t),this._var.bait.offsetParent,this._var.bait.offsetHeight,this._var.bait.offsetLeft,this._var.bait.offsetTop,this._var.bait.offsetWidth,this._var.bait.clientHeight,this._var.bait.clientWidth,this._options.debug===!0&&this._log("_creatBait","Bait has been created")},t.prototype._destroyBait=function(){e.document.body.removeChild(this._var.bait),this._var.bait=null,this._options.debug===!0&&this._log("_destroyBait","Bait has been removed")},t.prototype.check=function(e){if(void 0===e&&(e=!0),this._options.debug===!0&&this._log("check","An audit was requested "+(e===!0?"with a":"without")+" loop"),this._var.checking===!0)return this._options.debug===!0&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._creatBait();var t=this;return this._var.loopNumber=0,e===!0&&(this._var.loop=setInterval(function(){t._checkBait(e)},this._options.loopCheckTime)),setTimeout(function(){t._checkBait(e)},1),this._options.debug===!0&&this._log("check","A check is in progress ..."),!0},t.prototype._checkBait=function(t){var n=!1;if(null===this._var.bait&&this._creatBait(),null===e.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.clientHeight&&0!=this._var.bait.clientWidth||(n=!0),void 0!==e.getComputedStyle){var a=e.getComputedStyle(this._var.bait,null);!a||"none"!=a.getPropertyValue("display")&&"hidden"!=a.getPropertyValue("visibility")||(n=!0)}this._options.debug===!0&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(n===!0?"positive":"negative")),t===!0&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop()),n===!0?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),t===!0&&(this._var.checking=!1)):null!==this._var.loop&&t!==!1||(this._destroyBait(),this.emitEvent(!1),t===!0&&(this._var.checking=!1))},t.prototype._stopLoop=function(e){clearInterval(this._var.loop),this._var.loop=null,this._var.loopNumber=0,this._options.debug===!0&&this._log("_stopLoop","A loop has been stopped")},t.prototype.emitEvent=function(e){this._options.debug===!0&&this._log("emitEvent","An event with a "+(e===!0?"positive":"negative")+" detection was called");var t=this._var.event[e===!0?"detected":"notDetected"];for(var n in t)this._options.debug===!0&&this._log("emitEvent","Call function "+(parseInt(n)+1)+"/"+t.length),t.hasOwnProperty(n)&&t[n]();return this._options.resetOnEnd===!0&&this.clearEvent(),this},t.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],this._options.debug===!0&&this._log("clearEvent","The event list has been cleared")},t.prototype.on=function(e,t){return this._var.event[e===!0?"detected":"notDetected"].push(t),this._options.debug===!0&&this._log("on",'A type of event "'+(e===!0?"detected":"notDetected")+'" was added'),this},t.prototype.onDetected=function(e){return this.on(!0,e)},t.prototype.onNotDetected=function(e){return this.on(!1,e)},e.FuckAdBlock=t,void 0===e.fuckAdBlock&&(e.fuckAdBlock=new t({checkOnLoad:!0,resetOnEnd:!0}))}(window)},{}],432:[function(e,t,n){"use strict";var a=e("./handlebars.runtime")["default"],i=e("./handlebars/compiler/ast")["default"],o=e("./handlebars/compiler/base").parser,r=e("./handlebars/compiler/base").parse,s=e("./handlebars/compiler/compiler").Compiler,l=e("./handlebars/compiler/compiler").compile,c=e("./handlebars/compiler/compiler").precompile,u=e("./handlebars/compiler/javascript-compiler")["default"],d=a.create,h=function(){var e=d();return e.compile=function(t,n){return l(t,n,e)},e.precompile=function(t,n){return c(t,n,e)},e.AST=i,e.Compiler=s,e.JavaScriptCompiler=u,e.Parser=o,e.parse=r,e};a=h(),a.create=h,n["default"]=a},{"./handlebars.runtime":433,"./handlebars/compiler/ast":435,"./handlebars/compiler/base":436,"./handlebars/compiler/compiler":437,"./handlebars/compiler/javascript-compiler":438}],433:[function(e,t,n){"use strict";var a=e("./handlebars/base"),i=e("./handlebars/safe-string")["default"],o=e("./handlebars/exception")["default"],r=e("./handlebars/utils"),s=e("./handlebars/runtime"),l=function(){var e=new a.HandlebarsEnvironment;return r.extend(e,a),e.SafeString=i,e.Exception=o,e.Utils=r,e.VM=s,e.template=function(t){return s.template(t,e)},e},c=l();c.create=l,n["default"]=c},{"./handlebars/base":434,"./handlebars/exception":442,"./handlebars/runtime":443,"./handlebars/safe-string":444,"./handlebars/utils":445}],434:[function(e,t,n){"use strict";function a(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(e){if(2!==arguments.length)throw new s("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var a=n.inverse||function(){},i=n.fn;return h(t)&&(t=t.call(this)),t===!0?i(this):t===!1||null==t?a(this):d(t)?t.length>0?e.helpers.each(t,n):a(this):i(t)}),e.registerHelper("each",function(e,t){var n,a=t.fn,i=t.inverse,o=0,r="";if(h(e)&&(e=e.call(this)),t.data&&(n=g(t.data)),e&&"object"==typeof e)if(d(e))for(var s=e.length;s>o;o++)n&&(n.index=o,n.first=0===o,n.last=o===e.length-1),r+=a(e[o],{data:n});else for(var l in e)e.hasOwnProperty(l)&&(n&&(n.key=l,n.index=o,n.first=0===o),r+=a(e[l],{data:n}),o++);return 0===o&&(r=i(this)),r}),e.registerHelper("if",function(e,t){return h(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){return h(e)&&(e=e.call(this)),r.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,n){var a=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(a,t)})}function o(e,t){m.log(e,t)}var r=e("./utils"),s=e("./exception")["default"],l="1.3.0";n.VERSION=l;var c=4;n.COMPILER_REVISION=c;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};n.REVISION_CHANGES=u;var d=r.isArray,h=r.isFunction,p=r.toString,f="[object Object]";n.HandlebarsEnvironment=a,a.prototype={constructor:a,logger:m,log:o,registerHelper:function(e,t,n){if(p.call(e)===f){if(n||t)throw new s("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){p.call(e)===f?r.extend(this.partials,e):this.partials[e]=t}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(m.level<=e){var n=m.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};n.logger=m,n.log=o;var g=function(e){var t={};return r.extend(t,e),t};n.createFrame=g},{"./exception":442,"./utils":445}],435:[function(e,t,n){"use strict";function a(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var i=e("../exception")["default"],o={ProgramNode:function(e,t,n,i){var r,s;3===arguments.length?(i=n,n=null):2===arguments.length&&(i=t,t=null),a.call(this,i),this.type="program",this.statements=e,this.strip={},n?(s=n[0],s?(r={first_line:s.firstLine,last_line:s.lastLine,last_column:s.lastColumn,first_column:s.firstColumn},this.inverse=new o.ProgramNode(n,t,r)):this.inverse=new o.ProgramNode(n,t),this.strip.right=t.left):t&&(this.strip.left=t.right)},MustacheNode:function(e,t,n,i,r){if(a.call(this,r),this.type="mustache",this.strip=i,null!=n&&n.charAt){var s=n.charAt(3)||n.charAt(2);this.escaped="{"!==s&&"&"!==s}else this.escaped=!!n;e instanceof o.SexprNode?this.sexpr=e:this.sexpr=new o.SexprNode(e,t),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,t,n){a.call(this,n),this.type="sexpr",this.hash=t;var i=this.id=e[0],o=this.params=e.slice(1),r=this.eligibleHelper=i.isSimple;this.isHelper=r&&(o.length||t)},PartialNode:function(e,t,n,i){a.call(this,i),this.type="partial",this.partialName=e,this.context=t,this.strip=n},BlockNode:function(e,t,n,o,r){if(a.call(this,r),e.sexpr.id.original!==o.path.original)throw new i(e.sexpr.id.original+" doesn't match "+o.path.original,this);this.type="block",this.mustache=e,this.program=t,this.inverse=n,this.strip={left:e.strip.left,right:o.strip.right},(t||n).strip.left=e.strip.right,(n||t).strip.right=o.strip.left,n&&!t&&(this.isInverse=!0)},ContentNode:function(e,t){a.call(this,t),this.type="content",this.string=e},HashNode:function(e,t){a.call(this,t),this.type="hash",this.pairs=e},IdNode:function(e,t){a.call(this,t),this.type="ID";for(var n="",o=[],r=0,s=0,l=e.length;l>s;s++){var c=e[s].part;if(n+=(e[s].separator||"")+c,".."===c||"."===c||"this"===c){if(o.length>0)throw new i("Invalid path: "+n,this);".."===c?r++:this.isScoped=!0}else o.push(c)}this.original=n,this.parts=o,this.string=o.join("."),this.depth=r,this.isSimple=1===e.length&&!this.isScoped&&0===r,this.stringModeValue=this.string},PartialNameNode:function(e,t){a.call(this,t),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,t){a.call(this,t),this.type="DATA",this.id=e},StringNode:function(e,t){a.call(this,t),this.type="STRING",this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,t){a.call(this,t),this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=+e},BooleanNode:function(e,t){a.call(this,t),this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},CommentNode:function(e,t){a.call(this,t),this.type="comment",this.comment=e}};n["default"]=o},{"../exception":442}],436:[function(e,t,n){"use strict";function a(e){return e.constructor===o.ProgramNode?e:(i.yy=o,i.parse(e))}var i=e("./parser")["default"],o=e("./ast")["default"];n.parser=i,n.parse=a},{"./ast":435,"./parser":439}],437:[function(e,t,n){"use strict";function a(){}function i(e,t,n){if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var a=n.parse(e),i=(new n.Compiler).compile(a,t);return(new n.JavaScriptCompiler).compile(i,t)}function o(e,t,n){function a(){var a=n.parse(e),i=(new n.Compiler).compile(a,t),o=(new n.JavaScriptCompiler).compile(i,t,void 0,!0);return n.template(o)}if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var i;return function(e,t){return i||(i=a()),i.call(this,e,t)}}var r=e("../exception")["default"];n.Compiler=a,a.prototype={compiler:a,disassemble:function(){for(var e,t,n,a=this.opcodes,i=[],o=0,r=a.length;r>o;o++)if(e=a[o],"DECLARE"===e.opcode)i.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var s=0;s<e.args.length;s++)n=e.args[s],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),t.push(n);i.push(e.opcode+" "+t.join(" "))}return i.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;t>n;n++){var a=this.opcodes[n],i=e.opcodes[n];if(a.opcode!==i.opcode||a.args.length!==i.args.length)return!1;for(var o=0;o<a.args.length;o++)if(a.args[o]!==i.args[o])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(n=0;t>n;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var a in n)this.options.knownHelpers[a]=n[a];return this.accept(e)},accept:function(e){var t,n=e.strip||{};return n.left&&this.opcode("strip"),t=this[e.type](e),n.right&&this.opcode("strip"),t},program:function(e){for(var t=e.statements,n=0,a=t.length;a>n;n++)this.accept(t[n]);return this.isSimple=1===a,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,n=(new this.compiler).compile(e,this.options),a=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[a]=n;for(var i=0,o=n.depths.list.length;o>i;i++)t=n.depths.list[i],2>t||this.addDepth(t-1);return a},block:function(e){var t=e.mustache,n=e.program,a=e.inverse;n&&(n=this.compileProgram(n)),a&&(a=this.compileProgram(a));var i=t.sexpr,o=this.classifySexpr(i);"helper"===o?this.helperSexpr(i,n,a):"simple"===o?(this.simpleSexpr(i),this.opcode("pushProgram",n),this.opcode("pushProgram",a),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(i,n,a),this.opcode("pushProgram",n),this.opcode("pushProgram",a),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,n,a=e.pairs;this.opcode("pushHash");for(var i=0,o=a.length;o>i;i++)t=a[i],n=t[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type),"sexpr"===n.type&&this.sexpr(n)):this.accept(n),this.opcode("assignToHash",t[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(e,t,n){var a=e.id,i=a.parts[0],o=null!=t||null!=n;this.opcode("getContext",a.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,o)},simpleSexpr:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),
this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var a=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",a.length,i);else{if(this.options.knownHelpersOnly)throw new r("You specified knownHelpersOnly, but used the unknown helper "+i,e);this.opcode("invokeHelper",a.length,i,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,a=e.parts.length;a>n;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new r("Scoped data references are not supported: "+e.original,e);this.opcode("lookupData");for(var t=e.id.parts,n=0,a=t.length;a>n;n++)this.opcode("lookup",t[n])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifySexpr:function(e){var t=e.isHelper,n=e.eligibleHelper,a=this.options;if(n&&!t){var i=e.id.parts[0];a.knownHelpers[i]?t=!0:a.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){for(var t,n=e.length;n--;)t=e[n],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):this[t.type](t)},setupFullMustacheParams:function(e,t,n){var a=e.params;return this.pushParams(a),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),a}},n.precompile=i,n.compile=o},{"../exception":442}],438:[function(e,t,n){"use strict";function a(e){this.value=e}function i(){}var o=e("../base").COMPILER_REVISION,r=e("../base").REVISION_CHANGES,s=e("../base").log,l=e("../exception")["default"];i.prototype={nameLookup:function(e,t){var n,a;return 0===e.indexOf("depth")&&(n=!0),a=/^[0-9]+$/.test(t)?e+"["+t+"]":i.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']",n?"("+e+" && "+a+")":a},compilerInfo:function(){var e=o,t=r[e];return"this.compilerInfo = ["+e+",'"+t+"'];\n"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,a){this.environment=e,this.options=t||{},s("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var i,o=e.opcodes;this.i=0;for(var r=o.length;this.i<r;this.i++)i=o[this.i],"DECLARE"===i.opcode?this[i.name]=i.value:this[i.opcode].apply(this,i.args),i.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l("Compile completed with content left on stack");return this.createFunctionContext(a)},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)}this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var a=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],i=0,o=this.environment.depths.list.length;o>i;i++)a.push("depth"+this.environment.depths.list[i]);var r=this.mergeSource();if(this.isChild||(r=this.compilerInfo()+r),e)return a.push(r),Function.apply(this,a);var l="function "+(this.name||"")+"("+a.join(",")+") {\n  "+r+"}";return s("debug",l+"\n\n"),l},mergeSource:function(){for(var e,t="",n=0,a=this.source.length;a>n;n++){var i=this.source[n];i.appendToBuffer?e=e?e+"\n    + "+i.content:i.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=i+"\n  ")}return t},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"sexpr"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var a=this.lastHelper=this.setupHelper(e,t,!0),i=this.nameLookup("depth"+this.lastContext,t,"context"),o="helper = "+a.name+" || "+i;a.paramsInit&&(o+=","+a.paramsInit),this.push("("+o+",helper ? helper.call("+a.callParams+") : helperMissing.call("+a.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,e,t),a=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),o=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+a+") { "+o+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+i+"; "+o+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t,n,a=this.popStack();this.options.stringParams&&(n=this.popStack(),t=this.popStack());var i=this.hash;t&&i.contexts.push("'"+e+"': "+t),n&&i.types.push("'"+e+"': "+n),i.values.push("'"+e+"': ("+a+")")},compiler:i,compileChildren:function(e,t){for(var n,a,i=e.children,o=0,r=i.length;r>o;o++){n=i[o],a=new this.compiler;var s=this.matchExistingProgram(n);null==s?(this.context.programs.push(""),s=this.context.programs.length,n.index=s,n.name="program"+s,this.context.programs[s]=a.compile(n,t,this.context),this.context.environments[s]=n):(n.index=s,n.name="program"+s)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;n>t;t++){var a=this.context.environments[t];if(a&&a.equals(e))return t}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,n=this.environment.children[e],a=n.depths.list,i=[n.index,n.name,"data"],o=0,r=a.length;r>o;o++)t=a[o],1===t?i.push("depth0"):i.push("depth"+(t-1));return(0===a.length?"self.program(":"self.programWithDepth(")+i.join(", ")+")"},register:function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new a(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,n,i,o="",r=this.isInline();if(r){var s=this.popStack(!0);if(s instanceof a)t=s.value,i=!0;else{n=!this.stackSlot;var l=n?this.incrStack():this.topStackName();o="("+this.push(l)+" = "+s+"),",t=this.topStack()}}else t=this.topStack();var c=e.call(this,t);return r?(i||this.popStack(),n&&this.stackSlot--,this.push("("+o+c+")")):(/^stack/.test(t)||(t=this.nextStack()),this.pushSource(t+" = ("+o+c+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;n>t;t++){var i=e[t];i instanceof a?this.compileStack.push(i):this.pushStack(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof a)return n.value;if(!t){if(!this.stackSlot)throw new l("Invalid stack pop");this.stackSlot--}return n},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return!e&&n instanceof a?n.value:n},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var a=[],i=this.setupParams(e,a,n),o=this.nameLookup("helpers",t,"helper");return{params:a,paramsInit:i,name:o,callParams:["depth0"].concat(a).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(a).join(", ")}},setupOptions:function(e,t){var n,a,i,o=[],r=[],s=[];o.push("hash:"+this.popStack()),this.options.stringParams&&(o.push("hashTypes:"+this.popStack()),o.push("hashContexts:"+this.popStack())),a=this.popStack(),i=this.popStack(),(i||a)&&(i||(this.context.aliases.self="this",i="self.noop"),a||(this.context.aliases.self="this",a="self.noop"),o.push("inverse:"+a),o.push("fn:"+i));for(var l=0;e>l;l++)n=this.popStack(),t.push(n),this.options.stringParams&&(s.push(this.popStack()),r.push(this.popStack()));return this.options.stringParams&&(o.push("contexts:["+r.join(",")+"]"),o.push("types:["+s.join(",")+"]")),this.options.data&&o.push("data:data"),o},setupParams:function(e,t,n){var a="{"+this.setupOptions(e,t).join(",")+"}";return n?(this.useRegister("options"),t.push("options"),"options="+a):(t.push(a),"")}};for(var c="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),u=i.RESERVED_WORDS={},d=0,h=c.length;h>d;d++)u[c[d]]=!0;i.isValidJavaScriptVariableName=function(e){return!(i.RESERVED_WORDS[e]||!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e))},n["default"]=i},{"../base":434,"../exception":442}],439:[function(e,t,n){"use strict";var a=function(){function e(e,t){return{left:"~"===e.charAt(2),right:"~"===t.charAt(0)||"~"===t.charAt(1)}}function t(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(t,n,a,i,o,r,s){var l=r.length-1;switch(o){case 1:return new i.ProgramNode(r[l-1],this._$);case 2:return new i.ProgramNode([],this._$);case 3:this.$=new i.ProgramNode([],r[l-1],r[l],this._$);break;case 4:this.$=new i.ProgramNode(r[l-2],r[l-1],r[l],this._$);break;case 5:this.$=new i.ProgramNode(r[l-1],r[l],[],this._$);break;case 6:this.$=new i.ProgramNode(r[l],this._$);break;case 7:this.$=new i.ProgramNode([],this._$);break;case 8:this.$=new i.ProgramNode([],this._$);break;case 9:this.$=[r[l]];break;case 10:r[l-1].push(r[l]),this.$=r[l-1];break;case 11:this.$=new i.BlockNode(r[l-2],r[l-1].inverse,r[l-1],r[l],this._$);break;case 12:this.$=new i.BlockNode(r[l-2],r[l-1],r[l-1].inverse,r[l],this._$);break;case 13:this.$=r[l];break;case 14:this.$=r[l];break;case 15:this.$=new i.ContentNode(r[l],this._$);break;case 16:this.$=new i.CommentNode(r[l],this._$);break;case 17:this.$=new i.MustacheNode(r[l-1],null,r[l-2],e(r[l-2],r[l]),this._$);break;case 18:this.$=new i.MustacheNode(r[l-1],null,r[l-2],e(r[l-2],r[l]),this._$);break;case 19:this.$={path:r[l-1],strip:e(r[l-2],r[l])};break;case 20:this.$=new i.MustacheNode(r[l-1],null,r[l-2],e(r[l-2],r[l]),this._$);break;case 21:this.$=new i.MustacheNode(r[l-1],null,r[l-2],e(r[l-2],r[l]),this._$);break;case 22:this.$=new i.PartialNode(r[l-2],r[l-1],e(r[l-3],r[l]),this._$);break;case 23:this.$=e(r[l-1],r[l]);break;case 24:this.$=new i.SexprNode([r[l-2]].concat(r[l-1]),r[l],this._$);break;case 25:this.$=new i.SexprNode([r[l]],null,this._$);break;case 26:this.$=r[l];break;case 27:this.$=new i.StringNode(r[l],this._$);break;case 28:this.$=new i.IntegerNode(r[l],this._$);break;case 29:this.$=new i.BooleanNode(r[l],this._$);break;case 30:this.$=r[l];break;case 31:r[l-1].isHelper=!0,this.$=r[l-1];break;case 32:this.$=new i.HashNode(r[l],this._$);break;case 33:this.$=[r[l-2],r[l]];break;case 34:this.$=new i.PartialNameNode(r[l],this._$);break;case 35:this.$=new i.PartialNameNode(new i.StringNode(r[l],this._$),this._$);break;case 36:this.$=new i.PartialNameNode(new i.IntegerNode(r[l],this._$));break;case 37:this.$=new i.DataNode(r[l],this._$);break;case 38:this.$=new i.IdNode(r[l],this._$);break;case 39:r[l-2].push({part:r[l],separator:r[l-1]}),this.$=r[l-2];break;case 40:this.$=[{part:r[l]}];break;case 43:this.$=[];break;case 44:r[l-1].push(r[l]);break;case 47:this.$=[r[l]];break;case 48:r[l-1].push(r[l])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(e,t){throw Error(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,a=[0],i=[null],o=[],r=this.table,s="",l=0,c=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var d=this.lexer.yylloc;o.push(d);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,_,v,y,b,k,w={};;){if(m=a[a.length-1],this.defaultActions[m]?g=this.defaultActions[m]:(null!==p&&void 0!==p||(p=t()),g=r[m]&&r[m][p]),void 0===g||!g.length||!g[0]){var x="";if(!u){k=[];for(v in r[m])this.terminals_[v]&&v>2&&k.push("'"+this.terminals_[v]+"'");x=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:d,expected:k})}}if(g[0]instanceof Array&&g.length>1)throw Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:a.push(p),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),a.push(g[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,s=this.lexer.yytext,l=this.lexer.yylineno,d=this.lexer.yylloc,u>0&&u--);break;case 2:if(y=this.productions_[g[1]][1],w.$=i[i.length-y],w._$={first_line:o[o.length-(y||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(y||1)].first_column,last_column:o[o.length-1].last_column},h&&(w._$.range=[o[o.length-(y||1)].range[0],o[o.length-1].range[1]]),_=this.performAction.call(w,s,c,l,this.yy,g[1],i,o),void 0!==_)return _;y&&(a=a.slice(0,-1*y*2),i=i.slice(0,-1*y),o=o.slice(0,-1*y)),a.push(this.productions_[g[1]][0]),i.push(w.$),o.push(w._$),b=r[a[a.length-2]][a[a.length-1]],a.push(b);break;case 3:return!0}}return!0}},a=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===a.length?this.yylloc.first_column:0)+a[a.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,a,i;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),r=0;r<o.length&&(n=this._input.match(this.rules[o[r]]),!n||t&&!(n[0].length>t[0].length)||(t=n,a=r,this.options.flex));r++);return t?(i=t[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[a],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,a){function i(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return i(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return i(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return t.yytext=i(1,2).replace(/\\"/g,'"'),32;case 24:return t.yytext=i(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return t.yytext=i(1,2),40;case 31:return"INVALID";case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return n.lexer=a,t.prototype=n,n.Parser=t,new t}();n["default"]=a},{}],440:[function(e,t,n){"use strict";function a(e){return(new i).accept(e)}function i(){this.padding=0}var o=e("./visitor")["default"];n.print=a,n.PrintVisitor=i,i.prototype=new o,i.prototype.pad=function(e,t){for(var n="",a=0,i=this.padding;i>a;a++)n+="  ";return n+=e,t!==!1&&(n+="\n"),n},i.prototype.program=function(e){var t,n,a="",i=e.statements;for(t=0,n=i.length;n>t;t++)a+=this.accept(i[t]);return this.padding--,a},i.prototype.block=function(e){var t="";return t+=this.pad("BLOCK:"),this.padding++,t+=this.accept(e.mustache),e.program&&(t+=this.pad("PROGRAM:"),this.padding++,t+=this.accept(e.program),this.padding--),e.inverse&&(e.program&&this.padding++,t+=this.pad("{{^}}"),this.padding++,t+=this.accept(e.inverse),this.padding--,e.program&&this.padding--),this.padding--,t},i.prototype.sexpr=function(e){for(var t,n=e.params,a=[],i=0,o=n.length;o>i;i++)a.push(this.accept(n[i]));return n="["+a.join(", ")+"]",t=e.hash?" "+this.accept(e.hash):"",this.accept(e.id)+" "+n+t},i.prototype.mustache=function(e){return this.pad("{{ "+this.accept(e.sexpr)+" }}")},i.prototype.partial=function(e){var t=this.accept(e.partialName);return e.context&&(t=t+" "+this.accept(e.context)),this.pad("{{> "+t+" }}")},i.prototype.hash=function(e){for(var t,n,a=e.pairs,i=[],o=0,r=a.length;r>o;o++)t=a[o][0],n=this.accept(a[o][1]),i.push(t+"="+n);return"HASH{"+i.join(", ")+"}"},i.prototype.STRING=function(e){return'"'+e.string+'"'},i.prototype.INTEGER=function(e){return"INTEGER{"+e.integer+"}"},i.prototype.BOOLEAN=function(e){return"BOOLEAN{"+e.bool+"}"},i.prototype.ID=function(e){var t=e.parts.join("/");return e.parts.length>1?"PATH:"+t:"ID:"+t},i.prototype.PARTIAL_NAME=function(e){return"PARTIAL:"+e.name},i.prototype.DATA=function(e){return"@"+this.accept(e.id)},i.prototype.content=function(e){return this.pad("CONTENT[ '"+e.string+"' ]")},i.prototype.comment=function(e){return this.pad("{{! '"+e.comment+"' }}")}},{"./visitor":441}],441:[function(e,t,n){"use strict";function a(){}a.prototype={constructor:a,accept:function(e){return this[e.type](e);
}},n["default"]=a},{}],442:[function(e,t,n){"use strict";function a(e,t){var n;t&&t.firstLine&&(n=t.firstLine,e+=" - "+n+":"+t.firstColumn);for(var a=Error.prototype.constructor.call(this,e),o=0;o<i.length;o++)this[i[o]]=a[i[o]];n&&(this.lineNumber=n,this.column=t.firstColumn)}var i=["description","fileName","lineNumber","message","name","number","stack"];a.prototype=Error(),n["default"]=a},{}],443:[function(e,t,n){"use strict";function a(e){var t=e&&e[0]||1,n=d;if(t!==n){if(n>t){var a=h[n],i=h[t];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+a+") or downgrade your runtime to an older version ("+i+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function i(e,t){if(!t)throw new u("No environment passed to template");var n=function(e,n,a,i,o,r){var s=t.VM.invokePartial.apply(this,arguments);if(null!=s)return s;if(t.compile){var l={helpers:i,partials:o,data:r};return o[n]=t.compile(e,{data:void 0!==r},t),o[n](a,l)}throw new u("The partial "+n+" could not be compiled when running in runtime-only mode")},a={escapeExpression:c.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var a=this.programs[e];return n?a=r(e,t,n):a||(a=this.programs[e]=r(e,t)),a},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},c.extend(n,t),c.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,i){i=i||{};var o,r,s=i.partial?i:t;i.partial||(o=i.helpers,r=i.partials);var l=e.call(a,s,n,o,r,i.data);return i.partial||t.VM.checkRevision(a.compilerInfo),l}}function o(e,t,n){var a=Array.prototype.slice.call(arguments,3),i=function(e,i){return i=i||{},t.apply(this,[e,i.data||n].concat(a))};return i.program=e,i.depth=a.length,i}function r(e,t,n){var a=function(e,a){return a=a||{},t(e,a.data||n)};return a.program=e,a.depth=0,a}function s(e,t,n,a,i,o){var r={partial:!0,helpers:a,partials:i,data:o};if(void 0===e)throw new u("The partial "+t+" could not be found");return e instanceof Function?e(n,r):void 0}function l(){return""}var c=e("./utils"),u=e("./exception")["default"],d=e("./base").COMPILER_REVISION,h=e("./base").REVISION_CHANGES;n.checkRevision=a,n.template=i,n.programWithDepth=o,n.program=r,n.invokePartial=s,n.noop=l},{"./base":434,"./exception":442,"./utils":445}],444:[function(e,t,n){"use strict";function a(e){this.string=e}a.prototype.toString=function(){return""+this.string},n["default"]=a},{}],445:[function(e,t,n){"use strict";function a(e){return l[e]||"&amp;"}function i(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function o(e){return e instanceof s?""+e:e||0===e?(e=""+e,u.test(e)?e.replace(c,a):e):""}function r(e){return e||0===e?!(!p(e)||0!==e.length):!0}var s=e("./safe-string")["default"],l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,u=/[&<>"'`]/;n.extend=i;var d=Object.prototype.toString;n.toString=d;var h=function(e){return"function"==typeof e};h(/x/)&&(h=function(e){return"function"==typeof e&&"[object Function]"===d.call(e)});var h;n.isFunction=h;var p=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===d.call(e):!1};n.isArray=p,n.escapeExpression=o,n.isEmpty=r},{"./safe-string":444}],446:[function(e,t,n){var a=e("../dist/cjs/handlebars")["default"];a.Visitor=e("../dist/cjs/handlebars/compiler/visitor")["default"];var i=e("../dist/cjs/handlebars/compiler/printer");if(a.PrintVisitor=i.PrintVisitor,a.print=i.print,t.exports=a,void 0!==e&&e.extensions){var o=function(t,n){var i=e("fs"),o=i.readFileSync(n,"utf8");t.exports=a.compile(o)};e.extensions[".handlebars"]=o,e.extensions[".hbs"]=o}},{"../dist/cjs/handlebars":432,"../dist/cjs/handlebars/compiler/printer":440,"../dist/cjs/handlebars/compiler/visitor":441,fs:385}],447:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],448:[function(e,t,n){n["date-time"]=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}[tT ]\d{2}:\d{2}:\d{2}(\.\d+)?([zZ]|[+-]\d{2}:\d{2})$/,n.date=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}$/,n.time=/^\d{2}:\d{2}:\d{2}$/,n.email=/^\S+@\S+$/,n["ip-address"]=n.ipv4=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,n.ipv6=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,n.uri=/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,n.color=/(#?([0-9A-Fa-f]{3,6})\b)|(aqua)|(black)|(blue)|(fuchsia)|(gray)|(green)|(lime)|(maroon)|(navy)|(olive)|(orange)|(purple)|(red)|(silver)|(teal)|(white)|(yellow)|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\))/,n.hostname=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]))*$/,n.alpha=/^[a-zA-Z]+$/,n.alphanumeric=/^[a-zA-Z0-9]+$/,n.style=/\s*(.+?):\s*([^;]+);?/g,n.phone=/^\+(?:[0-9] ?){6,14}[0-9]$/,n["utc-millisec"]=/^[0-9]+(\.?[0-9]+)?$/},{}],449:[function(e,t,n){var a=e("generate-object-property"),i=e("generate-function"),o=e("jsonpointer"),r=e("xtend"),s=e("./formats"),l=function(e,t,n){if(/^https?:\/\//.test(n))return null;var a=function(e){return e&&e.id===n?e:"object"==typeof e&&e?Object.keys(e).reduce(function(t,n){return t||a(e[n])},null):null},i=a(e);if(i)return i;n=n.replace(/^#/,""),n=n.replace(/\/$/,"");try{return o.get(e,decodeURI(n))}catch(r){var s=t[n]||t[n.replace(/^#/,"")];return s||null}},c=function(e){for(var t=/\[[^\[\]"]+\]/;t.test(e);)e=e.replace(t,".*");return e},u={};u.any=function(){return"true"},u["null"]=function(e){return e+" === null"},u["boolean"]=function(e){return"typeof "+e+' === "boolean"'},u.array=function(e){return"Array.isArray("+e+")"},u.object=function(e){return"typeof "+e+' === "object" && '+e+" && !Array.isArray("+e+")"},u.number=function(e){return"typeof "+e+' === "number"'},u.integer=function(e){return"typeof "+e+' === "number" && (Math.floor('+e+") === "+e+" || "+e+" > 9007199254740992 || "+e+" < -9007199254740992)"},u.string=function(e){return"typeof "+e+' === "string"'};var d=function(e){var t,n=[];for(t=0;t<e.length;t++)n.push("object"==typeof e[t]?JSON.stringify(e[t]):e[t]);for(t=1;t<n.length;t++)if(n.indexOf(n[t])!==t)return!1;return!0},h=function(e,t,n,o,p){var f=p?r(s,p.formats):s,m={unique:d,formats:f},g=p?!!p.verbose:!1,_=p&&void 0!==p.greedy?p.greedy:!1,v={},y=function(e){return e+(v[e]=(v[e]||0)+1)},b={},k=function(e){if(b[e])return b[e];var t=y("pattern");return m[t]=RegExp(e),b[e]=t,t},w=["i","j","k","l","m","n","o","p","q","r","s","t","u","v","x","y","z"],x=function(){var e=w.shift();return w.push(e+e[0]),e},C=function(e,i,o,r){var d=i.properties,v=i.type,b=!1;Array.isArray(i.items)&&(d={},i.items.forEach(function(e,t){d[t]=e}),v="array",b=!0);var w=0,I=function(t,n,a){if(L("errors++"),o===!0)if(L("if (validate.errors === null) validate.errors = []"),g)L("validate.errors.push({field:%s,message:%s,value:%s})",JSON.stringify(c(n||e)),JSON.stringify(t),a||e);else{var i=y("error");m[i]={field:c(n||e),message:t},L("validate.errors.push(%s)",i)}};i.required===!0?(w++,L("if (%s === undefined) {",e),I("is required"),L("} else {")):(w++,L("if (%s !== undefined) {",e));var T=[].concat(v).map(function(t){return u[t||"any"](e)}).join(" || ")||"true";if("true"!==T&&(w++,L("if (!(%s)) {",T),I("is the wrong type"),L("} else {")),b)if(i.additionalItems===!1)L("if (%s.length > %d) {",e,i.items.length),I("has additional items"),L("}");else if(i.additionalItems){var S=x();L("for (var %s = %d; %s < %s.length; %s++) {",S,i.items.length,S,e,S),C(e+"["+S+"]",i.additionalItems,o,r),L("}")}if(i.format&&f[i.format]){"string"!==v&&s[i.format]&&L("if (%s) {",u.string(e));var E=y("format");m[E]=f[i.format],"function"==typeof m[E]?L("if (!%s(%s)) {",E,e):L("if (!%s.test(%s)) {",E,e),I("must be "+i.format+" format"),L("}"),"string"!==v&&s[i.format]&&L("}")}if(Array.isArray(i.required)){var P=function(t){var n=a(e,t);L("if (%s === undefined) {",n),I("is required",n),L("missing++"),L("}")};L("if ((%s)) {","object"!==v?u.object(e):"true"),L("var missing = 0"),i.required.map(P),L("}"),_||(L("if (missing === 0) {"),w++)}if(i.uniqueItems&&("array"!==v&&L("if (%s) {",u.array(e)),L("if (!(unique(%s))) {",e),I("must be unique"),L("}"),"array"!==v&&L("}")),i["enum"]){var j=i["enum"].some(function(e){return"object"==typeof e}),M=j?function(t){return"JSON.stringify("+e+") !== JSON.stringify("+JSON.stringify(t)+")"}:function(t){return e+" !== "+JSON.stringify(t)};L("if (%s) {",i["enum"].map(M).join(" && ")||"false"),I("must be an enum value"),L("}")}if(i.dependencies&&("object"!==v&&L("if (%s) {",u.object(e)),Object.keys(i.dependencies).forEach(function(t){var n=i.dependencies[t];"string"==typeof n&&(n=[n]);var s=function(t){return a(e,t)+" !== undefined"};Array.isArray(n)&&(L("if (%s !== undefined && !(%s)) {",a(e,t),n.map(s).join(" && ")||"true"),I("dependencies not set"),L("}")),"object"==typeof n&&(L("if (%s !== undefined) {",a(e,t)),C(e,n,o,r),L("}"))}),"object"!==v&&L("}")),i.additionalProperties||i.additionalProperties===!1){"object"!==v&&L("if (%s) {",u.object(e));var S=x(),A=y("keys"),D=function(e){return A+"["+S+"] !== "+JSON.stringify(e)},R=function(e){return"!"+k(e)+".test("+A+"["+S+"])"},N=Object.keys(d||{}).map(D).concat(Object.keys(i.patternProperties||{}).map(R)).join(" && ")||"true";L("var %s = Object.keys(%s)",A,e)("for (var %s = 0; %s < %s.length; %s++) {",S,S,A,S)("if (%s) {",N),i.additionalProperties===!1?(r&&L("delete %s",e+"["+A+"["+S+"]]"),I("has additional properties",null,JSON.stringify(e+".")+" + "+A+"["+S+"]")):C(e+"["+A+"["+S+"]]",i.additionalProperties,o,r),L("}")("}"),"object"!==v&&L("}")}if(i.$ref){var B=l(n,p&&p.schemas||{},i.$ref);if(B){var F=t[i.$ref];F||(t[i.$ref]=function(e){return F(e)},F=h(B,t,n,!1,p));var E=y("ref");m[E]=F,L("if (!(%s(%s))) {",E,e),I("referenced schema does not match"),L("}")}}if(i.not){var O=y("prev");L("var %s = errors",O),C(e,i.not,!1,r),L("if (%s === errors) {",O),I("negative schema matches"),L("} else {")("errors = %s",O)("}")}if(i.items&&!b){"array"!==v&&L("if (%s) {",u.array(e));var S=x();L("for (var %s = 0; %s < %s.length; %s++) {",S,S,e,S),C(e+"["+S+"]",i.items,o,r),L("}"),"array"!==v&&L("}")}if(i.patternProperties){"object"!==v&&L("if (%s) {",u.object(e));var A=y("keys"),S=x();L("var %s = Object.keys(%s)",A,e)("for (var %s = 0; %s < %s.length; %s++) {",S,S,A,S),Object.keys(i.patternProperties).forEach(function(t){var n=k(t);L("if (%s.test(%s)) {",n,A+"["+S+"]"),C(e+"["+A+"["+S+"]]",i.patternProperties[t],o,r),L("}")}),L("}"),"object"!==v&&L("}")}if(i.pattern){var z=k(i.pattern);"string"!==v&&L("if (%s) {",u.string(e)),L("if (!(%s.test(%s))) {",z,e),I("pattern mismatch"),L("}"),"string"!==v&&L("}")}if(i.allOf&&i.allOf.forEach(function(t){C(e,t,o,r)}),i.anyOf&&i.anyOf.length){var O=y("prev");i.anyOf.forEach(function(t,n){0===n?L("var %s = errors",O):L("if (errors !== %s) {",O)("errors = %s",O),C(e,t,!1,!1)}),i.anyOf.forEach(function(e,t){t&&L("}")}),L("if (%s !== errors) {",O),I("no schemas match"),L("}")}if(i.oneOf&&i.oneOf.length){var O=y("prev"),q=y("passes");L("var %s = errors",O)("var %s = 0",q),i.oneOf.forEach(function(t,n){C(e,t,!1,!1),L("if (%s === errors) {",O)("%s++",q)("} else {")("errors = %s",O)("}")}),L("if (%s !== 1) {",q),I("no (or more than one) schemas match"),L("}")}if(void 0!==i.multipleOf){"number"!==v&&"integer"!==v&&L("if (%s) {",u.number(e));var $=(0|i.multipleOf)!==i.multipleOf?Math.pow(10,(""+i.multipleOf).split(".").pop().length):1;$>1?L("if ((%d*%s) % %d) {",$,e,$*i.multipleOf):L("if (%s % %d) {",e,i.multipleOf),I("has a remainder"),L("}"),"number"!==v&&"integer"!==v&&L("}")}for(void 0!==i.maxProperties&&("object"!==v&&L("if (%s) {",u.object(e)),L("if (Object.keys(%s).length > %d) {",e,i.maxProperties),I("has more properties than allowed"),L("}"),"object"!==v&&L("}")),void 0!==i.minProperties&&("object"!==v&&L("if (%s) {",u.object(e)),L("if (Object.keys(%s).length < %d) {",e,i.minProperties),I("has less properties than allowed"),L("}"),"object"!==v&&L("}")),void 0!==i.maxItems&&("array"!==v&&L("if (%s) {",u.array(e)),L("if (%s.length > %d) {",e,i.maxItems),I("has more items than allowed"),L("}"),"array"!==v&&L("}")),void 0!==i.minItems&&("array"!==v&&L("if (%s) {",u.array(e)),L("if (%s.length < %d) {",e,i.minItems),I("has less items than allowed"),L("}"),"array"!==v&&L("}")),void 0!==i.maxLength&&("string"!==v&&L("if (%s) {",u.string(e)),L("if (%s.length > %d) {",e,i.maxLength),I("has longer length than allowed"),L("}"),"string"!==v&&L("}")),void 0!==i.minLength&&("string"!==v&&L("if (%s) {",u.string(e)),L("if (%s.length < %d) {",e,i.minLength),I("has less length than allowed"),L("}"),"string"!==v&&L("}")),void 0!==i.minimum&&(L("if (%s %s %d) {",e,i.exclusiveMinimum?"<=":"<",i.minimum),I("is less than minimum"),L("}")),void 0!==i.maximum&&(L("if (%s %s %d) {",e,i.exclusiveMaximum?">=":">",i.maximum),I("is more than maximum"),L("}")),d&&Object.keys(d).forEach(function(t){C(a(e,t),d[t],o,r)});w--;)L("}")},L=i("function validate(data) {")("validate.errors = null")("var errors = 0");return C("data",e,o,p&&p.filter),L("return errors === 0")("}"),L=L.toFunction(m),L.errors=null,L.getError=function(){return L.errors?L.errors.map(function(e){return e.field+" "+e.message}).join("\n"):""},L.toJSON=function(){return e},L};t.exports=function(e,t){return"string"==typeof e&&(e=JSON.parse(e)),h(e,{},e,!0,t)},t.exports.filter=function(e,n){var a=t.exports(e,r(n,{filter:!0}));return function(e){return a(e),e}}},{"./formats":448,"generate-function":450,"generate-object-property":451,jsonpointer:453,xtend:454}],450:[function(e,t,n){var a=e("util"),i=/[\{\[]/,o=/[\}\]]/;t.exports=function(){var e=[],t=0,n=function(n){for(var a="";a.length<2*t;)a+="  ";e.push(a+n)},r=function(e){return e?o.test(e.trim()[0])&&i.test(e[e.length-1])?(t--,n(a.format.apply(a,arguments)),t++,r):i.test(e[e.length-1])?(n(a.format.apply(a,arguments)),t++,r):o.test(e.trim()[0])?(t--,n(a.format.apply(a,arguments)),r):(n(a.format.apply(a,arguments)),r):r};return r.toString=function(){return e.join("\n")},r.toFunction=function(e){var t="return ("+r+")",n=Object.keys(e||{}).map(function(e){return e}),a=n.map(function(t){return e[t]});return Function.apply(null,n.concat(t)).apply(null,a)},arguments.length&&r.apply(null,arguments),r}},{util:422}],451:[function(e,t,n){var a=e("is-property"),i=function(e,t){return a(t)?e+"."+t:e+"["+JSON.stringify(t)+"]"};i.valid=a,i.property=function(e){return a(e)?e:JSON.stringify(e)},t.exports=i},{"is-property":452}],452:[function(e,t,n){"use strict";function a(e){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(e)}t.exports=a},{}],453:[function(e,t,n){var a=(e("console"),function(e){return e.replace(/~./g,function(e){switch(e){case"~0":return"~";case"~1":return"/"}throw"Invalid tilde escape: "+e})}),i=function(e,t,n){var o=a(t.shift());if(void 0===e[o])throw"Value for pointer '"+t+"' not found.";if(0!==t.length)return i(e[o],t,n);if(void 0===n)return e[o];var r=e[o];return null===n?delete e[o]:e[o]=n,r},o=function(e,t){if("object"!=typeof e)throw"Invalid input object.";if(""===t)return[];if(!t)throw"Invalid JSON pointer.";t=t.split("/");var n=t.shift();if(""!==n)throw"Invalid JSON pointer.";return t},r=function(e,t){return t=o(e,t),0===t.length?e:i(e,t)},s=function(e,t,n){if(t=o(e,t),0===t.length)throw"Invalid JSON pointer for set.";return i(e,t,n)};n.get=r,n.set=s},{console:392}],454:[function(e,t,n){function a(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var a in n)i.call(n,a)&&(e[a]=n[a])}return e}t.exports=a;var i=Object.prototype.hasOwnProperty},{}],455:[function(e,t,n){(function(e){(function(){var n,a,i,o,r=[].slice;i=function(e){return e instanceof a||(e=new a(e),e.index()),function(t,n,i){var o;return o=new a(t.headers["accept-language"]),t.locale=o.best(e)+"",i()}},i.Locale=function(){function t(e){var t,n,a;(a=null!=e?e.match(/[a-z]+/gi):void 0)&&(n=a[0],t=a[1],this.language=n.toLowerCase(),t&&(this.country=t.toUpperCase()))}var n;return t["default"]=new t(e.env.LANG||"en_US"),n=function(){var e;return e=[this.language],this.country&&e.push(this.country),this.language?e.join("_"):null},t.prototype.toString=n,t.prototype.toJSON=n,t}(),i.Locales=function(){function e(e){var t,a,i,o,r,s,l;if(e){for(s=(e+"").split(","),o=0,r=s.length;r>o;o++)t=s[o],l=t.split(";"),a=l[0],i=l[1],a=new n(a.trim()),a.score=i?+i.slice(2)||0:1,this.push(a);this.sort(function(e,t){return t.score-e.score})}}var t;return e.prototype.length=0,e.prototype._index=null,e.prototype.sort=Array.prototype.sort,e.prototype.push=Array.prototype.push,e.prototype.index=function(){var e,t,n;if(!this._index)for(this._index={},t=0,n=this.length;n>t;t++)e=this[t],this._index[e]=!0;return this._index},e.prototype.best=function(e){var t,a,i,o,r,s,l,c;if(o=n["default"],!e)return this[0]||o;for(t=e.index(),r=0,l=this.length;l>r;r++){if(a=this[r],t[a])return a;if(t[a.language])return new n(a.language);for(s=0,c=e.length;c>s;s++)if(i=e[s],i.language===a.language)return i}return o},t=function(){return r.call(this)},e.prototype.toJSON=t,e.prototype.toString=function(){return this.toJSON()+""},e}(),o=t.exports=i,n=o.Locale,a=o.Locales}).call(this)}).call(this,e("_process"))},{_process:396}],456:[function(e,t,n){(function(){function e(e,t,n){var a=t&&n||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>i&&(t[a+i++]=p[e])});16>i;)t[a+i++]=0;return t}function n(e,t){var n=t||0,a=h;return a[e[n++]]+a[e[n++]]+a[e[n++]]+a[e[n++]]+"-"+a[e[n++]]+a[e[n++]]+"-"+a[e[n++]]+a[e[n++]]+"-"+a[e[n++]]+a[e[n++]]+"-"+a[e[n++]]+a[e[n++]]+a[e[n++]]+a[e[n++]]+a[e[n++]]+a[e[n++]]}function a(e,t,a){var i=t&&a||0,o=t||[];e=e||{};var r=null!=e.clockseq?e.clockseq:_,s=null!=e.msecs?e.msecs:(new Date).getTime(),l=null!=e.nsecs?e.nsecs:y+1,c=s-v+(l-y)/1e4;if(0>c&&null==e.clockseq&&(r=r+1&16383),(0>c||s>v)&&null==e.nsecs&&(l=0),l>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");v=s,y=l,_=r,s+=122192928e5;var u=(1e4*(268435455&s)+l)%4294967296;o[i++]=u>>>24&255,o[i++]=u>>>16&255,o[i++]=u>>>8&255,o[i++]=255&u;var d=s/4294967296*1e4&268435455;o[i++]=d>>>8&255,o[i++]=255&d,o[i++]=d>>>24&15|16,o[i++]=d>>>16&255,o[i++]=r>>>8|128,o[i++]=255&r;for(var h=e.node||g,p=0;6>p;p++)o[i+p]=h[p];return t?t:n(o)}function i(e,t,a){var i=t&&a||0;"string"==typeof e&&(t="binary"==e?new d(16):null,e=null),e=e||{};var r=e.random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var s=0;16>s;s++)t[i+s]=r[s];return t||n(r)}var o,r=this;if("function"==typeof r.require)try{var s=r.require("crypto").randomBytes;o=s&&function(){return s(16)}}catch(l){}if(!o&&r.crypto&&crypto.getRandomValues){var c=new Uint8Array(16);o=function(){return crypto.getRandomValues(c),c}}if(!o){var u=Array(16);o=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),u[t]=e>>>((3&t)<<3)&255;return u}}for(var d="function"==typeof r.Buffer?r.Buffer:Array,h=[],p={},f=0;256>f;f++)h[f]=(f+256).toString(16).substr(1),p[h[f]]=f;var m=o(),g=[1|m[0],m[1],m[2],m[3],m[4],m[5]],_=16383&(m[6]<<8|m[7]),v=0,y=0,b=i;if(b.v1=a,b.v4=i,b.parse=e,b.unparse=n,b.BufferClass=d,void 0!==t&&t.exports)t.exports=b;else if("function"==typeof define&&define.amd)define(function(){return b});else{var k=r.uuid;b.noConflict=function(){return r.uuid=k,b},r.uuid=b}}).call(this)},{}],457:[function(e,t,n){t.exports=function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e["default"]:e;
},i=a(n(1)),o=a(n(2)),r=a(n(3)),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};e.exports=s({},i,{validate:o,validateWithErrors:r})},function(e,t,n){"use strict";function a(){return null}function i(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function o(e){function t(t,n,a,i,o){if(i=i||m,null==n[a]){var r=o;return t?Error("Required "+r+" `"+a+"` was not specified in "+("`"+i+"`.")):null}return e(n,a,i,o)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function r(e){function t(t,n,a,o){var r=t[n],s=i(r);if(s!==e){var l=o,c=f(r);return Error("Invalid "+l+" `"+n+"` of type `"+c+"` "+("supplied to `"+a+"`, expected `"+e+"`."))}return null}return o(t)}function s(){return o(a)}function l(e){function t(t,n,a,o){var r=t[n];if(!Array.isArray(r)){var s=o,l=i(r);return Error("Invalid "+s+" `"+n+"` of type "+("`"+l+"` supplied to `"+a+"`, expected an array."))}for(var c=0;c<r.length;c++){var u=e(r,c,a,o);if(u instanceof Error)return u}return null}return o(t)}function c(e){function t(t,n,a,i){if(!(t[n]instanceof e)){var o=i,r=e.name||m;return Error("Invalid "+o+" `"+n+"` supplied to "+("`"+a+"`, expected instance of `"+r+"`."))}return null}return o(t)}function u(e){function t(t,n,a,i){for(var o=t[n],r=0;r<e.length;r++)if(o===e[r])return null;var s=i,l=JSON.stringify(e);return Error("Invalid "+s+" `"+n+"` of value `"+o+"` "+("supplied to `"+a+"`, expected one of "+l+"."))}return o(t)}function d(e){function t(t,n,a,o){var r=t[n],s=i(r);if("object"!==s){var l=o;return Error("Invalid "+l+" `"+n+"` of type "+("`"+s+"` supplied to `"+a+"`, expected an object."))}for(var c in r)if(r.hasOwnProperty(c)){var u=e(r,c,a,o);if(u instanceof Error)return u}return null}return o(t)}function h(e){function t(t,n,a,i){for(var o=0;o<e.length;o++){var r=e[o];if(null==r(t,n,a,i))return null}var s=i;return Error("Invalid "+s+" `"+n+"` supplied to "+("`"+a+"`."))}return o(t)}function p(e){function t(t,n,a,o){var r=t[n],s=i(r);if("object"!==s){var l=o;return Error("Invalid "+l+" `"+n+"` of type `"+s+"` "+("supplied to `"+a+"`, expected `object`."))}for(var c in e){var u=e[c];if(u){var d=u(r,c,a,o);if(d)return d}}return null}return o(t)}function f(e){var t=i(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var m="<<anonymous>>";e.exports={array:r("array"),bool:r("boolean"),func:r("function"),number:r("number"),object:r("object"),string:r("string"),any:s(),arrayOf:l,instanceOf:c,objectOf:d,oneOf:u,oneOfType:h,shape:p}},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e["default"]:e},i=a(n(5)),o=a(n(4)),r={},s=function(e,t,n){for(var a in e)if(e.hasOwnProperty(a)){var s;try{i("function"==typeof e[a],"%s: %s type `%s` is invalid; it must be a function, usually from PropTypes.",n,"attributes",a),s=e[a](t,a,n,"prop")}catch(l){s=l}s instanceof Error&&!(s.message in r)&&(r[s.message]=!0,o(!1,"Failed propType: "+s.message))}};e.exports=s},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e["default"]:e},i=a(n(5)),o=function(e,t,n){for(var a in e)if(e.hasOwnProperty(a)){var o;try{i("function"==typeof e[a],"%s: %s type `%s` is invalid; it must be a function, usually from PropTypes.",n,"attributes",a),o=e[a](t,a,n,"prop")}catch(r){o=r}if(o instanceof Error)throw o}};e.exports=o},function(e,t,n){"use strict";var a=function(e,t){for(var n=arguments.length,a=Array(n>2?n-2:0),i=2;n>i;i++)a[i-2]=arguments[i];if(void 0===t)throw Error("`warning(condition, format, ...args)` requires a warning message argument");if(t.length<10||/^[s\W]*$/.test(t))throw Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+t);if(!e){var o=0,r="Warning: "+t.replace(/%s/g,function(){return a[o++]});console.warn(r);try{throw Error(r)}catch(s){}}};e.exports=a},function(e,t,n){"use strict";var a=function(e,t,n,a,i,o,r,s){if(!e){var l;if(void 0===t)l=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,a,i,o,r,s],u=0;l=Error("Invariant Violation: "+t.replace(/%s/g,function(){return c[u++]}))}throw l.framesToPop=1,l}};e.exports=a}])},{}],458:[function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function o(e,t,n,o){switch(void 0===e?"undefined":i(e)){case"object":return"function"==typeof e[o]?e[o].apply(e,a(n)):e[o];case"function":return e(t);default:return e}}function r(){function e(){I.forEach(function(e,t){var n=e.started,i=e.startedTime,s=e.action,l=e.prevState,u=e.error,h=e.took,p=e.nextState,m=I[t+1];m&&(p=m.prevState,h=m.started-n);var _=k(s),v="function"==typeof d?d(function(){return p},s):d,y=c(i),b=L.title?"color: "+L.title(_)+";":null,w="action "+(g?y:"")+" "+_.type+" "+(f?"(in "+h.toFixed(2)+" ms)":"");try{v?L.title?r.groupCollapsed("%c "+w,b):r.groupCollapsed(w):L.title?r.group("%c "+w,b):r.group(w)}catch(x){r.log(w)}var C=o(a,_,[l],"prevState"),T=o(a,_,[_],"action"),S=o(a,_,[u,l],"error"),E=o(a,_,[p],"nextState");C&&(L.prevState?r[C]("%c prev state","color: "+L.prevState(l)+"; font-weight: bold",l):r[C]("prev state",l)),T&&(L.action?r[T]("%c action","color: "+L.action(_)+"; font-weight: bold",_):r[T]("action",_)),u&&S&&(L.error?r[S]("%c error","color: "+L.error(u,l)+"; font-weight: bold",u):r[S]("error",u)),E&&(L.nextState?r[E]("%c next state","color: "+L.nextState(p)+"; font-weight: bold",p):r[E]("next state",p));try{r.groupEnd()}catch(x){r.log("—— log end ——")}}),I.length=0}var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=t.level,a=void 0===n?"log":n,i=t.logger,r=void 0===i?console:i,s=t.logErrors,l=void 0===s?!0:s,d=t.collapsed,h=t.predicate,p=t.duration,f=void 0===p?!1:p,m=t.timestamp,g=void 0===m?!0:m,_=t.transformer,v=t.stateTransformer,y=void 0===v?function(e){return e}:v,b=t.actionTransformer,k=void 0===b?function(e){return e}:b,w=t.errorTransformer,x=void 0===w?function(e){return e}:w,C=t.colors,L=void 0===C?{title:function(){return"#000000"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}}:C;if(void 0===r)return function(){return function(e){return function(t){return e(t)}}};_&&console.error("Option 'transformer' is deprecated, use stateTransformer instead");var I=[];return function(t){var n=t.getState;return function(t){return function(a){if("function"==typeof h&&!h(n,a))return t(a);var i={};I.push(i),i.started=u.now(),i.startedTime=new Date,i.prevState=y(n()),i.action=a;var o=void 0;if(l)try{o=t(a)}catch(r){i.error=x(r)}else o=t(a);if(i.took=u.now()-i.started,i.nextState=y(n()),e(),i.error)throw i.error;return o}}}}var s=function(e,t){return Array(t+1).join(e)},l=function(e,t){return s("0",t-(""+e).length)+e},c=function(e){return"@ "+l(e.getHours(),2)+":"+l(e.getMinutes(),2)+":"+l(e.getSeconds(),2)+"."+l(e.getMilliseconds(),3)},u="undefined"!=typeof performance&&"function"==typeof performance.now?performance:Date;t.exports=r},{}],459:[function(e,t,n){"use strict";function a(e){return function(t){var n=t.dispatch,a=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,a,e):t(i)}}}}n.__esModule=!0;var i=a();i.withExtraArgument=a,n["default"]=i},{}],460:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return function(n,a,i){var r=e(n,a,i),l=r.dispatch,c=[],u={getState:r.getState,dispatch:function(e){return l(e)}};return c=t.map(function(e){return e(u)}),l=s["default"].apply(void 0,c)(r.dispatch),o({},r,{dispatch:l})}}}n.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n["default"]=i;var r=e("./compose"),s=a(r)},{"./compose":463}],461:[function(e,t,n){"use strict";function a(e,t){return function(){return t(e.apply(void 0,arguments))}}function i(e,t){if("function"==typeof e)return a(e,t);if("object"!=typeof e||null===e)throw Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),i={},o=0;o<n.length;o++){var r=n[o],s=e[r];"function"==typeof s&&(i[r]=a(s,t))}return i}n.__esModule=!0,n["default"]=i},{}],462:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n=t&&t.type,a=n&&'"'+n+'"'||"an action";return"Given action "+a+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function o(e){Object.keys(e).forEach(function(t){var n=e[t],a=n(void 0,{type:s.ActionTypes.INIT});if(void 0===a)throw Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var i="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if(void 0===n(void 0,{type:i}))throw Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function r(e){for(var t=Object.keys(e),n={},a=0;a<t.length;a++){var r=t[a];"function"==typeof e[r]&&(n[r]=e[r])}var s,l=Object.keys(n);try{o(n)}catch(c){s=c}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(s)throw s;for(var a=!1,o={},r=0;r<l.length;r++){var c=l[r],u=n[c],d=e[c],h=u(d,t);if(void 0===h){var p=i(c,t);throw Error(p)}o[c]=h,a=a||h!==d}return a?o:e}}n.__esModule=!0,n["default"]=r;var s=e("./createStore"),l=e("lodash/isPlainObject"),c=(a(l),e("./utils/warning"));a(c)},{"./createStore":464,"./utils/warning":466,"lodash/isPlainObject":470}],463:[function(e,t,n){"use strict";function a(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};var a=function(){var e=t[t.length-1],n=t.slice(0,-1);return{v:function(){return n.reduceRight(function(e,t){return t(e)},e.apply(void 0,arguments))}}}();return"object"==typeof a?a.v:void 0}n.__esModule=!0,n["default"]=a},{}],464:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){function a(){_===g&&(_=g.slice())}function o(){return m}function s(e){if("function"!=typeof e)throw Error("Expected listener to be a function.");var t=!0;return a(),_.push(e),function(){if(t){t=!1,a();var n=_.indexOf(e);_.splice(n,1)}}}function u(e){if(!(0,r["default"])(e))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(v)throw Error("Reducers may not dispatch actions.");try{v=!0,m=f(m,e)}finally{v=!1}for(var t=g=_,n=0;n<t.length;n++)t[n]();return e}function d(e){if("function"!=typeof e)throw Error("Expected the nextReducer to be a function.");f=e,u({type:c.INIT})}function h(){var e,t=s;return e={subscribe:function(e){function n(){e.next&&e.next(o())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");n();var a=t(n);return{unsubscribe:a}}},e[l["default"]]=function(){return this},e}var p;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw Error("Expected the enhancer to be a function.");return n(i)(e,t)}if("function"!=typeof e)throw Error("Expected the reducer to be a function.");var f=e,m=t,g=[],_=g,v=!1;return u({type:c.INIT}),p={dispatch:u,subscribe:s,getState:o,replaceReducer:d},p[l["default"]]=h,p}n.__esModule=!0,n.ActionTypes=void 0,n["default"]=i;var o=e("lodash/isPlainObject"),r=a(o),s=e("symbol-observable"),l=a(s),c=n.ActionTypes={INIT:"@@redux/INIT"}},{"lodash/isPlainObject":470,"symbol-observable":471}],465:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0,n.compose=n.applyMiddleware=n.bindActionCreators=n.combineReducers=n.createStore=void 0;var i=e("./createStore"),o=a(i),r=e("./combineReducers"),s=a(r),l=e("./bindActionCreators"),c=a(l),u=e("./applyMiddleware"),d=a(u),h=e("./compose"),p=a(h),f=e("./utils/warning");a(f);n.createStore=o["default"],n.combineReducers=s["default"],n.bindActionCreators=c["default"],n.applyMiddleware=d["default"],n.compose=p["default"]},{"./applyMiddleware":460,"./bindActionCreators":461,"./combineReducers":462,"./compose":463,"./createStore":464,"./utils/warning":466}],466:[function(e,t,n){"use strict";function a(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw Error(e)}catch(t){}}n.__esModule=!0,n["default"]=a},{}],467:[function(e,t,n){function a(e){return i(Object(e))}var i=Object.getPrototypeOf;t.exports=a},{}],468:[function(e,t,n){function a(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}t.exports=a},{}],469:[function(e,t,n){function a(e){return!!e&&"object"==typeof e}t.exports=a},{}],470:[function(e,t,n){function a(e){if(!r(e)||h.call(e)!=s||o(e))return!1;var t=i(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==d}var i=e("./_getPrototype"),o=e("./_isHostObject"),r=e("./isObjectLike"),s="[object Object]",l=Object.prototype,c=Function.prototype.toString,u=l.hasOwnProperty,d=c.call(Object),h=l.toString;t.exports=a},{"./_getPrototype":467,"./_isHostObject":468,"./isObjectLike":469}],471:[function(e,t,n){(function(n){"use strict";t.exports=e("./ponyfill")(n||window||this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ponyfill":472}],472:[function(e,t,n){"use strict";t.exports=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}},{}],473:[function(e,t,n){(function(t){!function(n){function a(e,t){if(!(this instanceof a))return new a(e,t);var i=this;o(i),i.q=i.c="",i.bufferCheckPosition=n.MAX_BUFFER_LENGTH,i.opt=t||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!e,i.noscript=!(!e&&!i.opt.noscript),i.state=H.BEGIN,i.ENTITIES=Object.create(n.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(q)),i.trackPosition=i.opt.position!==!1,i.trackPosition&&(i.position=i.line=i.column=0),p(i,"onready")}function i(e){for(var t=Math.max(n.MAX_BUFFER_LENGTH,10),a=0,i=0,o=T.length;o>i;i++){var r=e[T[i]].length;if(r>t)switch(T[i]){case"textNode":m(e);break;case"cdata":f(e,"oncdata",e.cdata),e.cdata="";break;case"script":f(e,"onscript",e.script),e.script="";break;default:_(e,"Max buffer length exceeded: "+T[i])}a=Math.max(a,r)}e.bufferCheckPosition=n.MAX_BUFFER_LENGTH-a+e.position}function o(e){for(var t=0,n=T.length;n>t;t++)e[T[t]]=""}function r(e){m(e),""!==e.cdata&&(f(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(f(e,"onscript",e.script),e.script="")}function s(e,t){return new l(e,t)}function l(e,t){if(!(this instanceof l))return new l(e,t);S.apply(this),this._parser=new a(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,P.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){return t?void n.on(e,t):(n.removeAllListeners(e),n._parser["on"+e]=t)},enumerable:!0,configurable:!1})})}function c(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function u(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function d(e,t){return u(e)?!!t.match(e):e[t]}function h(e,t){return!d(e,t)}function p(e,t,n){e[t]&&e[t](n)}function f(e,t,n){e.textNode&&m(e),p(e,t,n)}function m(e){e.textNode=g(e.opt,e.textNode),e.textNode&&p(e,"ontext",e.textNode),e.textNode=""}function g(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function _(e,t){return m(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=Error(t),e.error=t,p(e,"onerror",t),e}function v(e){return e.closedRoot||y(e,"Unclosed root tag"),e.state!==H.BEGIN&&e.state!==H.TEXT&&_(e,"Unexpected end"),m(e),e.c="",e.closed=!0,p(e,"onend"),a.call(e,e.strict,e.opt),e}function y(e,t){if("object"!=typeof e||!(e instanceof a))throw Error("bad call to strictFail");e.strict&&_(e,t)}function b(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0}function k(e,t){var n=e.indexOf(":"),a=0>n?["",e]:e.split(":"),i=a[0],o=a[1];return t&&"xmlns"===e&&(i="xmlns",o=""),{prefix:i,local:o}}function w(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))return e.attribName=e.attribValue="";if(e.opt.xmlns){var t=k(e.attribName,!0),n=t.prefix,a=t.local;if("xmlns"===n)if("xml"===a&&e.attribValue!==O)y(e,"xml: prefix must be bound to "+O+"\nActual: "+e.attribValue);else if("xmlns"===a&&e.attribValue!==z)y(e,"xmlns: prefix must be bound to "+z+"\nActual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[a]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,f(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}function x(e,t){if(e.opt.xmlns){var n=e.tag,a=k(e.tagName);n.prefix=a.prefix,n.local=a.local,n.uri=n.ns[a.prefix]||"",n.prefix&&!n.uri&&(y(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=a.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){f(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var o=0,r=e.attribList.length;r>o;o++){var s=e.attribList[o],l=s[0],c=s[1],u=k(l,!0),d=u.prefix,h=u.local,p=""==d?"":n.ns[d]||"",m={name:l,value:c,prefix:d,local:h,uri:p};d&&"xmlns"!=d&&!p&&(y(e,"Unbound namespace prefix: "+JSON.stringify(d)),m.uri=d),e.tag.attributes[l]=m,f(e,"onattribute",m)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),f(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=H.TEXT:e.state=H.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function C(e){if(!e.tagName)return y(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=H.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=H.SCRIPT);f(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var a=n;t--;){var i=e.tags[t];if(i.name===a)break;y(e,"Unexpected close tag")}if(0>t)return y(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=H.TEXT);e.tagName=n;for(var o=e.tags.length;o-- >t;){var r=e.tag=e.tags.pop();e.tagName=e.tag.name,f(e,"onclosetag",e.tagName);var s={};for(var l in r.ns)s[l]=r.ns[l];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&r.ns!==c.ns&&Object.keys(r.ns).forEach(function(t){var n=r.ns[t];f(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=H.TEXT}function L(e){var t,n=e.entity,a=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[a]?e.ENTITIES[a]:(n=a,"#"===n.charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),t=parseInt(n,16),i=t.toString(16)):(n=n.slice(1),t=parseInt(n,10),i=t.toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(y(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function I(e){var t=this;if(this.error)throw this.error;if(t.closed)return _(t,"Cannot write after close. Assign an onready handler.");if(null===e)return v(t);for(var n=0,a="";t.c=a=e.charAt(n++);)switch(t.trackPosition&&(t.position++,"\n"===a?(t.line++,t.column=0):t.column++),t.state){case H.BEGIN:"<"===a?(t.state=H.OPEN_WAKA,t.startTagPosition=t.position):h(j,a)&&(y(t,"Non-whitespace before first tag."),t.textNode=a,t.state=H.TEXT);continue;case H.TEXT:if(t.sawRoot&&!t.closedRoot){for(var o=n-1;a&&"<"!==a&&"&"!==a;)a=e.charAt(n++),a&&t.trackPosition&&(t.position++,"\n"===a?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(o,n-1)}"<"===a?(t.state=H.OPEN_WAKA,t.startTagPosition=t.position):(!h(j,a)||t.sawRoot&&!t.closedRoot||y(t,"Text data outside of root node."),"&"===a?t.state=H.TEXT_ENTITY:t.textNode+=a);continue;case H.SCRIPT:"<"===a?t.state=H.SCRIPT_ENDING:t.script+=a;continue;case H.SCRIPT_ENDING:"/"===a?t.state=H.CLOSE_TAG:(t.script+="<"+a,t.state=H.SCRIPT);continue;case H.OPEN_WAKA:if("!"===a)t.state=H.SGML_DECL,t.sgmlDecl="";else if(d(j,a));else if(d($,a))t.state=H.OPEN_TAG,t.tagName=a;else if("/"===a)t.state=H.CLOSE_TAG,t.tagName="";else if("?"===a)t.state=H.PROC_INST,t.procInstName=t.procInstBody="";else{if(y(t,"Unencoded <"),t.startTagPosition+1<t.position){var r=t.position-t.startTagPosition;a=Array(r).join(" ")+a}t.textNode+="<"+a,t.state=H.TEXT}continue;case H.SGML_DECL:(t.sgmlDecl+a).toUpperCase()===B?(f(t,"onopencdata"),t.state=H.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+a==="--"?(t.state=H.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+a).toUpperCase()===F?(t.state=H.DOCTYPE,(t.doctype||t.sawRoot)&&y(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===a?(f(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=H.TEXT):d(D,a)?(t.state=H.SGML_DECL_QUOTED,t.sgmlDecl+=a):t.sgmlDecl+=a;continue;case H.SGML_DECL_QUOTED:a===t.q&&(t.state=H.SGML_DECL,t.q=""),t.sgmlDecl+=a;continue;case H.DOCTYPE:">"===a?(t.state=H.TEXT,f(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=a,"["===a?t.state=H.DOCTYPE_DTD:d(D,a)&&(t.state=H.DOCTYPE_QUOTED,t.q=a));continue;case H.DOCTYPE_QUOTED:t.doctype+=a,a===t.q&&(t.q="",t.state=H.DOCTYPE);continue;case H.DOCTYPE_DTD:t.doctype+=a,"]"===a?t.state=H.DOCTYPE:d(D,a)&&(t.state=H.DOCTYPE_DTD_QUOTED,t.q=a);continue;case H.DOCTYPE_DTD_QUOTED:t.doctype+=a,a===t.q&&(t.state=H.DOCTYPE_DTD,t.q="");continue;case H.COMMENT:"-"===a?t.state=H.COMMENT_ENDING:t.comment+=a;continue;case H.COMMENT_ENDING:"-"===a?(t.state=H.COMMENT_ENDED,t.comment=g(t.opt,t.comment),t.comment&&f(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+a,t.state=H.COMMENT);continue;case H.COMMENT_ENDED:">"!==a?(y(t,"Malformed comment"),t.comment+="--"+a,t.state=H.COMMENT):t.state=H.TEXT;continue;case H.CDATA:"]"===a?t.state=H.CDATA_ENDING:t.cdata+=a;continue;case H.CDATA_ENDING:"]"===a?t.state=H.CDATA_ENDING_2:(t.cdata+="]"+a,t.state=H.CDATA);continue;case H.CDATA_ENDING_2:">"===a?(t.cdata&&f(t,"oncdata",t.cdata),f(t,"onclosecdata"),t.cdata="",t.state=H.TEXT):"]"===a?t.cdata+="]":(t.cdata+="]]"+a,t.state=H.CDATA);continue;case H.PROC_INST:"?"===a?t.state=H.PROC_INST_ENDING:d(j,a)?t.state=H.PROC_INST_BODY:t.procInstName+=a;continue;case H.PROC_INST_BODY:if(!t.procInstBody&&d(j,a))continue;"?"===a?t.state=H.PROC_INST_ENDING:t.procInstBody+=a;continue;case H.PROC_INST_ENDING:">"===a?(f(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=H.TEXT):(t.procInstBody+="?"+a,t.state=H.PROC_INST_BODY);continue;case H.OPEN_TAG:d(U,a)?t.tagName+=a:(b(t),">"===a?x(t):"/"===a?t.state=H.OPEN_TAG_SLASH:(h(j,a)&&y(t,"Invalid character in tag name"),t.state=H.ATTRIB));continue;case H.OPEN_TAG_SLASH:">"===a?(x(t,!0),C(t)):(y(t,"Forward-slash in opening tag not followed by >"),t.state=H.ATTRIB);continue;case H.ATTRIB:if(d(j,a))continue;">"===a?x(t):"/"===a?t.state=H.OPEN_TAG_SLASH:d($,a)?(t.attribName=a,t.attribValue="",t.state=H.ATTRIB_NAME):y(t,"Invalid attribute name");continue;case H.ATTRIB_NAME:"="===a?t.state=H.ATTRIB_VALUE:">"===a?(y(t,"Attribute without value"),t.attribValue=t.attribName,w(t),x(t)):d(j,a)?t.state=H.ATTRIB_NAME_SAW_WHITE:d(U,a)?t.attribName+=a:y(t,"Invalid attribute name");continue;case H.ATTRIB_NAME_SAW_WHITE:if("="===a)t.state=H.ATTRIB_VALUE;else{if(d(j,a))continue;y(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",f(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===a?x(t):d($,a)?(t.attribName=a,t.state=H.ATTRIB_NAME):(y(t,"Invalid attribute name"),t.state=H.ATTRIB)}continue;case H.ATTRIB_VALUE:if(d(j,a))continue;d(D,a)?(t.q=a,t.state=H.ATTRIB_VALUE_QUOTED):(y(t,"Unquoted attribute value"),t.state=H.ATTRIB_VALUE_UNQUOTED,t.attribValue=a);continue;case H.ATTRIB_VALUE_QUOTED:if(a!==t.q){"&"===a?t.state=H.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=a;continue}w(t),t.q="",t.state=H.ATTRIB_VALUE_CLOSED;continue;case H.ATTRIB_VALUE_CLOSED:d(j,a)?t.state=H.ATTRIB:">"===a?x(t):"/"===a?t.state=H.OPEN_TAG_SLASH:d($,a)?(y(t,"No whitespace between attributes"),t.attribName=a,t.attribValue="",t.state=H.ATTRIB_NAME):y(t,"Invalid attribute name");continue;case H.ATTRIB_VALUE_UNQUOTED:if(h(N,a)){"&"===a?t.state=H.ATTRIB_VALUE_ENTITY_U:t.attribValue+=a;continue}w(t),">"===a?x(t):t.state=H.ATTRIB;continue;case H.CLOSE_TAG:if(t.tagName)">"===a?C(t):d(U,a)?t.tagName+=a:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=H.SCRIPT):(h(j,a)&&y(t,"Invalid tagname in closing tag"),t.state=H.CLOSE_TAG_SAW_WHITE);else{if(d(j,a))continue;h($,a)?t.script?(t.script+="</"+a,t.state=H.SCRIPT):y(t,"Invalid tagname in closing tag."):t.tagName=a}continue;case H.CLOSE_TAG_SAW_WHITE:if(d(j,a))continue;">"===a?C(t):y(t,"Invalid characters in closing tag");continue;case H.TEXT_ENTITY:case H.ATTRIB_VALUE_ENTITY_Q:case H.ATTRIB_VALUE_ENTITY_U:switch(t.state){case H.TEXT_ENTITY:var s=H.TEXT,l="textNode";break;case H.ATTRIB_VALUE_ENTITY_Q:var s=H.ATTRIB_VALUE_QUOTED,l="attribValue";break;case H.ATTRIB_VALUE_ENTITY_U:var s=H.ATTRIB_VALUE_UNQUOTED,l="attribValue"}";"===a?(t[l]+=L(t),t.entity="",t.state=s):d(R,a)?t.entity+=a:(y(t,"Invalid character entity"),t[l]+="&"+t.entity+a,t.entity="",t.state=s);continue;default:throw Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&i(t),t}n.parser=function(e,t){return new a(e,t)},n.SAXParser=a,n.SAXStream=l,n.createStream=s,n.MAX_BUFFER_LENGTH=65536;var T=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){this.__proto__=e}return t.prototype=e,new t}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),a.prototype={end:function(){v(this)},write:I,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){r(this)}};try{var S=e("stream").Stream}catch(E){var S=function(){}}var P=n.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});l.prototype=Object.create(S.prototype,{constructor:{value:l}}),l.prototype.write=function(n){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(n)){if(!this._decoder){var a=e("string_decoder").StringDecoder;this._decoder=new a("utf8")}n=this._decoder.write(n)}return this._parser.write(""+n),this.emit("data",n),!0},l.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},l.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===P.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),S.prototype.on.call(n,e,t)};var j="\r\n	 ",M="0124356789",A="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",D="'\"",R=M+A+"#",N=j+">",B="[CDATA[",F="DOCTYPE",O="http://www.w3.org/XML/1998/namespace",z="http://www.w3.org/2000/xmlns/",q={xml:O,xmlns:z};j=c(j),M=c(M),A=c(A);var $=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,U=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;D=c(D),R=c(R),N=c(N);var H=0;n.STATE={BEGIN:H++,TEXT:H++,TEXT_ENTITY:H++,OPEN_WAKA:H++,SGML_DECL:H++,SGML_DECL_QUOTED:H++,DOCTYPE:H++,DOCTYPE_QUOTED:H++,DOCTYPE_DTD:H++,DOCTYPE_DTD_QUOTED:H++,COMMENT_STARTING:H++,COMMENT:H++,COMMENT_ENDING:H++,COMMENT_ENDED:H++,CDATA:H++,CDATA_ENDING:H++,CDATA_ENDING_2:H++,PROC_INST:H++,PROC_INST_BODY:H++,PROC_INST_ENDING:H++,OPEN_TAG:H++,OPEN_TAG_SLASH:H++,ATTRIB:H++,ATTRIB_NAME:H++,ATTRIB_NAME_SAW_WHITE:H++,ATTRIB_VALUE:H++,ATTRIB_VALUE_QUOTED:H++,ATTRIB_VALUE_CLOSED:H++,ATTRIB_VALUE_UNQUOTED:H++,ATTRIB_VALUE_ENTITY_Q:H++,ATTRIB_VALUE_ENTITY_U:H++,CLOSE_TAG:H++,CLOSE_TAG_SAW_WHITE:H++,SCRIPT:H++,SCRIPT_ENDING:H++},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,
lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(e){var t=n.ENTITIES[e],a="number"==typeof t?String.fromCharCode(t):t;n.ENTITIES[e]=a});for(var H in n.STATE)n.STATE[n.STATE[H]]=H;H=n.STATE,String.fromCodePoint||!function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,a,i=16384,o=[],r=-1,s=arguments.length;if(!s)return"";for(var l="";++r<s;){var c=+arguments[r];if(!isFinite(c)||0>c||c>1114111||t(c)!=c)throw RangeError("Invalid code point: "+c);65535>=c?o.push(c):(c-=65536,n=(c>>10)+55296,a=c%1024+56320,o.push(n,a)),(r+1==s||o.length>i)&&(l+=e.apply(null,o),o.length=0)}return l};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()}(void 0===n?sax={}:n)}).call(this,e("buffer").Buffer)},{buffer:388,stream:416,string_decoder:417}],474:[function(e,t,n){function a(){return+new Date}function i(e,t,n){if(o(e),c[e]={value:t},null!=n){var i=setTimeout(function(){delete c[e]},n);c[e].expires=a()+n,c[e].timer=i}}function o(e){e in c&&(c[e].timer&&clearTimeout(c[e].timer),delete c[e])}function r(e){return e in c&&(!c[e].expires||c[e].expires>a())}function s(e){return r(e)?c[e].value:void 0}function l(){for(var e in c)c.hasOwnProperty(e)&&o(e)}var c={};n.set=i,n.del=o,n.exists=r,n.get=s,n.clear=l},{}],475:[function(e,t,n){function a(){r.call(this),this.transitions=[],this.transitionsEnded=l(),this._transitionsAreRunning=!1,this.queue=[],this._queueAreRunning=!1}function i(e){return"#module-"+e}var o=e("lodash"),r=e("./index"),s=e("../lib/namer"),l=e("../lib/defer"),c=e("inherits"),u=e("morphdom");e("./jquery.mod"),t.exports=a,c(a,r),a.prototype.bind=function(){this._stage="bind",this.emit("bind"),this.bindEvents(this.mainModule.id)},a.prototype.runInQueue=function(e){function t(){var e=n.queue.shift();void 0!==e?e(t):n._queueAreRunning=!1}var n=this;n.queue.push(e),n._queueAreRunning||t()},a.prototype.addTransition=function(e,t){e.purpose=t,this.transitions.push(e)},a.prototype.runTransitions=function(e){function t(){var a=n.transitions.shift();void 0!==a?a(t):(n._transitionsAreRunning=!1,n.transitionsEnded.resolve(),n.transitionsEnded=l(),e&&e())}var n=this;this._transitionsAreRunning||(this._transitionsAreRunning=!0,this.transitionSort(this.transitions),t())},a.prototype.onTransitionEnd=function(e){this.transitionsEnded.then(e)},a.prototype.block=function(e){var t=i(e);return $(t)},a.prototype.rerender=function(e){var t=this.getModuleDescriptorById(e),n=t.instance.render();this.unbindEvents(e),$(i(e)).replaceWith(n),this.bindEvents(e)},a.prototype.morph=function(e){var t=$(i(e))[0];if(t){var n=this.getModuleDescriptorById(e),a=n.instance.render();u(t,a,{getNodeKey:function(){return null}})}},a.prototype.element=function(e,t){var n=this.getModuleDescriptorById(e),a=n.moduleConf.elements&&n.moduleConf.elements[t],o=n.moduleConf.block||n.type,r=a&&a.selector||"."+s.elementClass(o,t);return $(r,i(e))},a.prototype.processEvents=function(e,t,n){if("init"!=this._stage){var a=this.getModuleDescriptorById(e),i=a.moduleConf.elements;n&&a.instance.isEventsBound||(a.instance.isEventsBound=n,t&&(i=o.pick(a.moduleConf.elements,t)),o.each(i,function(t,i){var r=t.selector||"."+s.elementClass(a.moduleConf.block||a.type,i),l=this.block(e),c=o.omit(t,"selector");o.each(c,function(e,t){o.isFunction(this.customBindElementEvents)?this.customBindElementEvents(r,i,l,t,e,n):this._bindElementEvents(r,i,l,t,e,n)},this)},this),n&&(a.instance.clientInit(),a.instance.bind()),o.each(a.children,function(e){this.processEvents(e,null,n)},this))}},a.prototype.bindEvents=function(e,t){this.processEvents(e,t,!0)},a.prototype.unbindEvents=function(e,t){this.processEvents(e,t,!1)},a.prototype._bindElementEvents=function(e,t,n,a,i,r){var s=["scroll","block","error"],l=r?"on":"off",c="block"==t?null:e;o.contains(s,a)?$(e,n)[l](a,i):n[l](a,c,i)}},{"../lib/defer":489,"../lib/namer":493,"./index":476,"./jquery.mod":477,inherits:447,lodash:"lodash",morphdom:503}],476:[function(e,t,n){function a(){l.call(this),this._moduleDescriptors={},this._ids={},this.modules={},this.components={},this.config=o.cloneDeep(m),this.registry=new _,this.queryModules=p(this._moduleDescriptors),this._setupPlugins(this.config.plugins);var e=d.get("handlebars");this.handlebars=e.create(),g(this)}function i(t,n){var a,i=t+"/"+n;try{a=d.require(i+"/"+n)}catch(o){a=e(d.isClient?"slot/"+i:"../"+i)}return a}var o=e("lodash"),r=e("async"),s=e("ua-parser-js"),l=e("async.emitter"),c=e("inherits"),u=e("../lib/injector"),d=e("../env"),h=e("../lib/templateProvider"),p=e("../lib/modulesQuering"),f=e("../lib/namer"),m=e("../config"),g=e("../lib/templateHelpers"),_=e("../lib/registry");t.exports=a,c(a,l),a.prototype.isServer=d.isServer,a.prototype.isClient=d.isClient,a.prototype.getModificators=function(e){var t=e.block()[0];return t?f.parseMods(t.className):{}},a.prototype.isBound=function(){return"bind"==this._stage},a.prototype.require=d.require,a.prototype.resolveDevPage=function(e){var t;if(o.isString(e)&&m.devPages){var n=o.compact(e.split("/"))[0],a=m.devPages[n];if(a&&(t=a.module,a.history===!1)){var i=this.requireComponent("stateTracker");i.disable()}}return t},a.prototype.resolveEntryPoint=function(e){e=e||{};var t=m.mainModule;if(!t)throw Error("mainModule not configured");if(t.startsWith("::")){if(t=t.substr(2),!this[t])throw Error("App method "+t+" for mainModule not implemented");t=this[t](e)}return t},a.prototype.init=function(e,t){function n(e){o.isFunction(e)&&(0==e.length?i.push(function(t){e(),t()}):i.push(e))}if(t=t||o.noop,!e)throw Error("[app.init]: param req must not be undefined");this._stage="init";var a=this;e.ua="string"==typeof e.ua?s(e.ua):e.ua,this.registry.setup(e),this.cookies=e.cookies;var i=[],l=this.resolveDevPage(this.registry.get("url"));this.emit("initStart",{waitFor:n}),r.parallel(i,function(n){n&&t(n);try{l||(l=a.resolveEntryPoint(e));var i=a.mainModule=a.loadModule({type:l});i.init(e,function(e){a.emit("initEnd",i),t(e,i)})}catch(o){t(o)}})},a.prototype.mod=function(e,t,n){var a=this.getModuleDescriptorById(e);if(o.isString(t)){var i=t;if(void 0===n)return a.mods[i];t={},t[i]=n}if(o.isObject(t)){var r,s=o.clone(a.mods),l=o.clone(t);o.extend(a.mods,l),this.isClient&&o.each(l,function(t,n){var a=s[n];if(a!==t){r=this.block(e);var i=f.modificatorClass(n,a);i&&r.removeClass(i);var o=f.modificatorClass(n,t);o&&r.addClass(o)}},this),o.each(l,function(e,t){var n=s[t];if(n!==e){var i=a.moduleConf.modHandlers;i&&i[t]&&o.isFunction(i[t])&&i[t].call(a.moduleConf,e)}},this)}return a.mods},a.prototype.element=function(e,t){var n=this.getModuleDescriptorById(e);return{mod:function(e){var a=n.elementsMods[t]=n.elementsMods[t]||{};return null!=e&&o.extend(a,e),a}}},a.prototype.notify=function(e,t){var n=[].slice.call(arguments,2),a=this._moduleDescriptors[e];if(!a)throw Error("app.notify: module with id "+e+" doesn't exists, message: "+t);for(var i,r,s=a.parentId,l=!1,c={sender:a,stop:function(){l=!0}};s;){r=this._moduleDescriptors[s];var u=r.moduleConf,d=u.dispatcher;if(d){r.slot.sender=a;var h=o.flatten(o.compact([d["*:"+t],d[a.type+":"+t]]));o.each(h,function(e){var t=e.apply(c,n);void 0===i&&(i=t)})}if(l)break;s=r.parentId}return i},a.prototype.loadComponent=o(i).partial("components").memoize().value(),a.prototype.newComponent=function(e,t){t=t||[];var n=this.loadComponent(e);return this.invoke(n,[this].concat(t))},a.prototype.requireComponent=function(e,t){var n=this.loadComponent(e),a=e;return n.identity&&(a=n.identity.apply(n,[e].concat(t))),this.components[a]||(this.components[a]=this.newComponent(e,t)),this.components[a]},a.prototype.processModules=function(e,t,n,a){var i=this.queryModules(e,t,a);o.each(i,function(e){n(e.instance,e)})},a.prototype.broadcast=function(e,t){var n,a=[].slice.call(arguments,2),i=t.lastIndexOf(":"),o=t.substr(0,i),r=t.substr(i+1);return this.processModules(e,o,function(e){if(e["interface"]){var t=e["interface"][r];t&&(n=t.apply(e["interface"],a))}}),n},a.prototype.requireModuleJs=function(e,t){t=t||e;var n="modules/"+e+"/"+t;return this.require(n)},a.prototype.invoke=function(e,t,n,a){return n=n||o.bind(this.requireComponent,this),u.invoke(e,t,n,a)},a.prototype.loadModule=function(t){var n=this,a=t.parentId,i=t.id||this._nextModuleId(a),r=t.type,s=e("../slot"),l=this.requireModuleJs(r),c=new s(n,{moduleId:i,moduleName:r,templates:h.forModule(r,this.handlebars)});if(!o.isFunction(l))throw Error("Bad moduleJs: "+r);var u=this.invoke(l,[c],o.bind(c.requireComponent,c));u.uniqueId=i,u.type=r;var d={id:i,moduleConf:u,slot:c,type:r,parentId:a,children:t.children||[],container:t.container,mods:t.mods||{},elementsMods:{}};this._moduleDescriptors[i]=d,a&&this._moduleDescriptors[a].children.push(i);var p=e("../moduleConstructor"),f=p(this,u,c);return d.instance=f,this.isClient&&c.mod(this.getModificators(f)),u.block&&c.mod({module:f.type}),this.emit("moduleLoaded",d),f},a.prototype.killModule=function(e){var t=this._moduleDescriptors[e];if(t){var n=t.slot,a=t.instance;if(n.stage!=n.STAGE_KILLED){n.stage=n.STAGE_KILLED,n.clearTimers(),n.clearRequests(),this.isBound()&&this.unbindEvents(e);var i=t.parentId;if(i){var r=this._moduleDescriptors[i],s=r.slot.modules[a.type];o.isArray(s)?(o.remove(s,function(t){return t.id==e}),0==s.length&&delete r.slot.modules[a.type]):delete r.slot.modules[a.type]}o.each(t.children,function(e){this.killModule(e)},this)}}},a.prototype.removeModule=function(e,t){var n=this._moduleDescriptors[e];if(n){var a=n.moduleConf,i=n.slot,r=n.parentId;a.dispose&&a.dispose(),this.isClient&&!o.get(t,"keepDOM")&&i.block().remove(),i.stage=i.STAGE_DISPOSED,o.each(n.children,function(e){this.removeModule(e)},this),this.emit("moduleDisposed",n),r&&(this._moduleDescriptors[r].children=o.without(this._moduleDescriptors[r].children,e)),delete this._moduleDescriptors[e]}},a.prototype.disposeModule=function(e,t){this.killModule(e),this.removeModule(e,t)},a.prototype.getModuleDescriptorById=function(e){var t=this._moduleDescriptors[e];if(!t)throw Error("[slot getModuleDescriptorById] No module with moduleId "+e+" found.");return t},a.prototype.getChildModuleWrapperById=function(e,t){var n=this.getModuleDescriptorById(t);return n.parentId==e?n.instance:void 0},a.prototype.setTimeout=function(e,t){return this.isServer?void e():setTimeout(e,t)},a.prototype.setInterval=function(e,t){return setInterval(e,t)},a.prototype.transitionSort=function(e){},a.prototype.raise=function(e){this.raised=e},a.prototype.cookie=function(e,t,n){return n=n||{},o.defaults(n,{path:"/",expires:365}),this.isClient?$.cookie(e,t,n):(void 0!==t?(n.expires&&(n.expires=new Date(Date.now()+24*n.expires*60*60*1e3)),this.cookies[e]=t,this.emit("cookie",e,t,n)):t=this.cookies[e],t)},a.prototype.removeCookie=function(e,t){return this.isClient?$.removeCookie(e,t):(delete this.cookies[e],void this.emit("removeCookie",e,t))},a.prototype._nextModuleId=function(e){var t=e||"root";t in this._ids||(this._ids[t]=1);var n=this._ids[t]++;return o.compact([e,n]).join("-")},a.prototype._setupPlugins=function(e){o.each(e,function(e){var t=i("plugins",e);try{this[e]=t(this)}catch(n){throw Error('Error invoke plugin "'+e+'": '+n.message)}},this)}},{"../config":"slot/config","../env":"slot/env","../lib/injector":491,"../lib/modulesQuering":492,"../lib/namer":493,"../lib/registry":494,"../lib/templateHelpers":497,"../lib/templateProvider":498,"../moduleConstructor":500,"../slot":509,async:502,"async.emitter":501,inherits:447,lodash:"lodash","ua-parser-js":"ua-parser-js"}],477:[function(e,t,n){var a=e("../lib/namer"),i=e("lodash");"undefined"!=typeof $&&($.fn.mod=function(e){var t=this[0];return void 0===t?t:e?(this.each(function(t,n){var o=n.className.match(/\S+/g)||[],r=$(n).mod();i.each(e,function(e,t){var n=r[t];e!=n&&(null==n||0==n||"number"==typeof n&&isNaN(n)||o.splice(o.indexOf(a.modificatorClass(t,n)),1),null==e||0==e||"number"==typeof e&&isNaN(e)||o.push(a.modificatorClass(t,e)),r[t]=e)}),n.className=o.join(" ")}),a.parseMods(t.className)):a.parseMods(t.className)},$.fn.toggleMod=function(e){return e&&this.each(function(t,n){var i=$(n),o=a.modificatorClass(e,!0);i.toggleClass(o)}),this})},{"../lib/namer":493,lodash:"lodash"}],478:[function(e,t,n){function a(){this.state={}}var i=e("lodash"),o=e("deep-equal");a.prototype.assign=function(e){this.state=e||{}},a.prototype.clear=function(){this.assign(null,!0)},a.prototype.getState=function(){return this.state},a.prototype.defaults=function(e){return i.defaults(this.state,e)},a.prototype.get=function(e){return this.state[e]},a.prototype.del=function(e){delete this.state[e]},a.prototype.set=function(e,t){this.state[e]=t},a.prototype.toggle=function(e,t){void 0===t&&(t=!this.state[e]),t?this.set(e,t):this.del(e)},a.prototype.isEqual=function(e,t){function n(e){return i.omit(e.getState(),t)}var a=n(this),r=n(e);return o(r,a)},a.prototype.getShareState=function(){return this.state},t.exports=a},{"deep-equal":428,lodash:"lodash"}],479:[function(e,t,n){function a(e,t){return this instanceof a?(r.call(this),i(),m.call(this,this.app),this.app=e,this.comparator=p.states,this.configure({}),this.lockCounter=0,this.lastAddType=null,this.prevState={},this.actualState={},this.uriAliases=[],this.bind(t),void 0):new a(e,t)}function i(e){if(!m){m=e||s;for(var t in m.prototype)a.prototype[t]=m.prototype[t]}}var o=e("lodash"),r=e("async.emitter"),s=e("./api"),l=e("./uri/helpers").makeAlias,c=e("./uri/parser"),u=e("./uri/resolver"),d=(e("../../lib/stuff"),e("inherits")),h=e("deep-equal"),p=e("../../lib/cmp"),f=e("./stateConf"),m=null;d(a,r),a.prototype.getActualState=function(){return this.actualState},a.prototype.getPrevState=function(){return this.prevState},a.prototype.setComparator=function(e){this.comparator=e},a.prototype.configure=function(e){e instanceof f?(this.stateConf=e,this.stateTracker.init(this.stateConf.get("queryParamName"))):this.stateConf=new f(e)},a.prototype.bind=function(e){var t=this;this.stateTracker=e,e.bind(),e.on("statechange",function(e){t.assign(o.cloneDeep(e)),t.emit("beforestatechange"),t.prevState=t.actualState;var n=t.comparator(t.actualState,e);t.lastAddType=null,t.actualState=o.cloneDeep(e),t.emit("statechange",n,e)})},a.prototype.parse=function(e,t){function n(){return c.parse(s,e,l,r.get("queryParamName"))}function a(){var e={},t=n();return r.invokeInjectors(t,e),e}var i=this,r=this.stateConf,s=r.patterns,l=this.uriAliases,u=new m(this.app);u.parse=n,u.addUriAlias=o.bind(this.addUriAlias,this),this.emitSeries("parse",u,function(){var e=a();u.defaults(e),t.call(i,u.state,u)})},a.prototype.init=function(e,t){var n=this;this.parse(e,function(e,a){this.emitSeries("init",a,function(){n.assign(e,!0),n.stateTracker.replace(e,n.getUri()),n.actualState=o.cloneDeep(e),t.call(n,e)})})},a.prototype.getUri=function(e){return e=e||this.getShareState(),"/"+u(this.stateConf,e,this.uriAliases)},a.prototype.addUriAlias=function(e,t,n){this.uriAliases.push(l(e,t,n))},a.prototype.begin=function(){this.lockCounter++},a.prototype.end=function(){0!=this.lockCounter&&this.lockCounter--},a.prototype.add=function(e,t,n){if("function"!=typeof t&&(n=t,t=null),t&&(this.begin(),t(),this.end()),this.lockCounter)return!1;var a=this.getState(),i=this.comparator(this.getActualState(),a);return n||o.size(i)?(this.lastAddType=e,this.emit("beforeadd",e,i),this.stateTracker.add(e,this.getState(),this.getUri()),!0):!1},a.prototype.push=function(e,t){return this.add("push",e,t)},a.prototype.replace=function(e,t){return this.add("replace",e,t)},a.prototype.actualize=function(e){var t=this.get(e);return h(this.actualState[e],t)?!1:(this.actualState[e]=o.cloneDeep(t),!0)},a.setStateApi=i,t.exports=a},{"../../lib/cmp":488,"../../lib/stuff":496,"./api":478,"./stateConf":480,"./uri/helpers":481,"./uri/parser":482,"./uri/resolver":484,"async.emitter":501,"deep-equal":428,inherits:447,lodash:"lodash"}],480:[function(e,t,n){function a(e){this.conf=e,this.patterns=this.compile()}function i(e,t,n,a){var i=o.map(t,function(e){return e+"="+a[e]}).join(",");this.message="Parameters ["+i+"] from "+o.keys(a).join(",")+" not validate for making url "+e+" by pattern "+n,this.badParams=t,this.entity=e,this.pattern=n,this.params=a}var o=e("lodash"),r=e("./uri/pattern"),s=e("../../lib/stuff"),l=e("../../lib/expandString"),c=e("./uri/helpers");a.prototype.get=function(e){return this.conf[e]},a.prototype.keyMapping=function(){return this._keyMapping||(this._keyMapping=o.invert(this.slugMapping())),this._keyMapping},a.prototype.slugMapping=function(){return this.conf.slugMapping||{}},a.prototype.lookupStateKey=function(e){return this.slugMapping()[e]||e},a.prototype.lookupSlug=function(e){return this.keyMapping()[e]||e},a.prototype.compile=function(){var e=[],t=this.conf.validatorsMap;return o.each(this.conf.urls,function(n,a){o.each(l(a),function(a){var i=new r(a,t);i.injector=n,e.push(i)})}),e},a.prototype.inject=function(e,t){var n=this.lookupStateKey(e.slug),a=t[n]=e.params;return[a,n]},a.prototype.injectTrue=function(e,t){var n=this.lookupStateKey(e.slug),a=t[n]=!0;return[a,n]},a.prototype.flattenEntry=function(e){return e.params.type=this.lookupStateKey(e.slug),e.params},a.prototype.injectInArray=function(e,t,n){n[e]=n[e]||[];var a=this.flattenEntry(t);return n[e].push(a),[a,e]},a.prototype.invokeInjector=function(e,t){var n=e.injector;if(n){if("string"==typeof n&&(e.injector=this[n]),"function"!=typeof e.injector)throw new TypeError("Invalid injector for state:"+n);var a=e.injector.call(this,e,t);return this.conf.onEntryInjected&&this.conf.onEntryInjected.call(this,a[0],a[1]),a}},a.prototype.invokeInjectors=function(e,t){var n=[];o.each(e,function(e){var a=this.invokeInjector(e,t);a&&n.push(a)},this);var a=this.conf.stateRelations;o.each(n,function(e){var n=e[0],i=e[1],r=n.type||i;if(a&&r in a){var l=a[r];o.each(l,function(e,a){n[a]=s.getByPath(t,e)})}})},a.prototype.resolvePattern=function(e,t){var n=this.lookupSlug(e);return o.find(this.patterns,function(e){return e.slug==n&&e.dataMatch(t)})},a.PermalinkNotFound=a.prototype.PermalinkNotFound=i,a.prototype.permalink=function(e,t,n,a){if(!(this.conf.seoUrls&&e in this.conf.seoUrls))return null;var s,u,d=this.conf.seoUrls[e],h=this.conf.validatorsMap;if(o.defaults(t,this.conf.seoDefaults),o.some(l(d),function(e){return u=new r(e,h),s=u.checkData(t),s?void 0:!0}),s){if(!a)return"";throw new i(e,s,d,t)}var p=u.inject(t);return(n||"")+c.transform(p,this)},t.exports=a},{"../../lib/expandString":490,"../../lib/stuff":496,"./uri/helpers":481,"./uri/pattern":483,lodash:"lodash"}],481:[function(e,t,n){var a=e("lodash"),i=e("./pattern"),o=e("./resolver"),r=e("./parser");n.makeAlias=function(e,t,n){var a=new i(e);return{pattern:a,params:t,getUri:function(e){return a.inject(t,e)},alias:n}},n.transform=function(e,t){var n=r.parse(t.patterns,e,[],t.get("queryParamName")),i={};t.invokeInjectors(n,i);var s=a.compact(n.notParsed.join("/").split("/")).join("/"),l=a.compact([s,o(t,i)]).join("/");return"/"!=l.charAt(0)?"/"+l:l}},{"./parser":482,"./pattern":483,"./resolver":484,lodash:"lodash"}],482:[function(e,t,n){function a(e){c.each(e.params,function(t,n){var a=e.pattern.validatorFor(n);a&&a.fromUrl&&(e.params[n]=a.fromUrl(t))})}function i(e,t){return{str:e,parsed:!0,entry:t}}function o(e){return{str:e}}function r(e){return!e.parsed}function s(e){return c.filter(e,r)}function l(e){var t=[];return c.each(e,function(e){e.parsed||(t.push(e.str),e.parsed=!0,e.dirty=!0)}),t}var c=e("lodash"),u=e("url-parse"),d=e("./serializer");n.parse=function(e,t,n,r){function h(){var t,n=/^\/+$/;do{var r=s(g);t=c.some(e,function(e){return c.some(r,function(t){var r=c.indexOf(g,t),s=e.match(t.str);if(s){s.pattern=e,a(s),s.injector=e.injector;var l=t.str.substring(0,s.index),u=t.str.substr(s.index+s.string.length);n.test(l)&&(l=""),n.test(u)&&(u="");var d=[r,1];return l&&d.push(o(l)),d.push(i(s.string,s)),u&&d.push(o(u)),[].splice.apply(g,d),!0}})})}while(t)}function p(e){var t=[];return c.each(e,function(e){var n=e.str,a=c.indexOf(g,e);if(-1!=n.indexOf("/")){var i=c.map(c.compact(n.split("/")),o);t.push.apply(t,i);var r=[a,1].concat(i);g.splice.apply(g,r)}else t.push(e)}),t}function f(){var e=!1,t=s(g);return t.length&&n&&(t=p(t),c.each(n,function(n){c.each(t,function(t){var a=t.str,i=c.indexOf(g,t);a==n.alias&&(e=!0,g[i]=o(n.getUri(!1)))})})),e}t=d.decode(t),t="/"+c.compact(t.split("/")).join("/");var m=u(t,!0);t=m.pathname,r&&m.query[r]&&(t+="/"+m.query[r]);var g=t?[o(t)]:[];h(),f()&&h();var _=l(g),v=[];return c.each(g,function(e){e.entry&&v.push(e.entry)}),v.notParsed=_,v}},{"./serializer":485,lodash:"lodash","url-parse":505}],483:[function(e,t,n){function a(e){if(!(e in d)){var t=e.split("/"),n=r.escapeRegExp(t[0])+(t.length>1?"/":"")+t.slice(1).join("/");n=n.replace(l,"([^/]+)"),d[e]=RegExp(n)}return d[e]}function i(e,t){this.pattern=e,this.patternRe=a(e);var n=e.split("/");this.slug=n[0],this.validators=t;for(var i=[],r=1,s=n.length;s>r;r++){var u=n[r],d=u.match(l);d&&o.each(d,function(e){var t=c.exec(e),n=t[1];i.push(n)})}this.params=i}var o=e("lodash"),r=e("../../../lib/stuff"),s=e("./slugEntry"),l=/:(\w+)/g,c=/:(\w+)/,u=e("./serializer"),d={};i.prototype.validatorFor=function(e){var t=this.slug+"/"+e;return this.validators&&(this.validators[t]||this.validators[e])},i.prototype.checkData=function(e){var t=[];return o.each(this.params,function(n){if(n in e){var a=e[n],i=this.validatorFor(n);i&&i.toUrl&&(a=i.toUrl(a)),i&&!i(a)&&t.push(n)}else t.push(n)},this),t.length?t:null},i.prototype.dataMatch=function(e){return null==this.checkData(e)},i.prototype.match=function(e){var t=this.pattern,n=this.slug,a=t.match(l),i=e.match(this.patternRe);if(i){for(var o={},r=1,c=i.length;c>r;r++){var d=a[r-1].substr(1),h=u.decodeSlashes(i[r]),p=this.validatorFor(d);if(p&&!p(h))return;o[d]=h}return new s(n,o).matchedFrom(i[0],i.index)}},i.prototype.inject=function(e,t){t=null==t?!0:t;var n=this,a=this.pattern.replace(l,function(a,i){var o=null!=e[i]?e[i]:"",r=n.validatorFor(i);return r&&r.toUrl&&(o=r.toUrl(o)),t&&(o=u.encodeSlashes(o)),o});return t?u.encode(a):a},t.exports=i},{"../../../lib/stuff":496,"./serializer":485,"./slugEntry":486,lodash:"lodash"}],484:[function(e,t,n){var a=e("lodash"),i=e("./serializer");t.exports=function(e,t,n,o){function r(t,r){var s=e.resolvePattern(r,t);if(s){var l=s.inject(t,o);return a.some(n,function(e){if(e.alias){var t=e.getUri();return l==t||l.startsWith(t+"/")?(l=l.replace(t,i.encode(e.alias)),!0):void 0}}),l}}function s(e){var n=[];return a.each(e,function(e){var i=t[e];a.isArray(i)?a.each(i,function(e){var t=e.type,i=a.omit(e,"type");n.push(r(i,t))}):n.push(r(i,e))}),a.compact(n).join("/")}n=n||[];var l=e.get("priorityList")||[],c=a.keys(t);c.sort(function(e,t){var n=a.indexOf(l,e),i=a.indexOf(l,t);return n-i});var u=e.get("queryParamsList")||[],d=a.groupBy(c,function(e){return a.contains(u,e)?"query":"main"}),h=s(d.main),p=s(d.query);return h+(p?"?"+e.get("queryParamName")+"="+p:"")}},{"./serializer":485,lodash:"lodash"}],485:[function(e,t,n){function a(e){if(null==e)throw Error("null value for serialization");return encodeURI(e).replace(/[@*?#,]/g,function(e){return encodeURIComponent(e)}).replace(/['()]/g,function(e){return escape(e)})}function i(e){if(null==e)throw Error("null value for serialization");return d.map(e.split(h),a).join(h)}function o(e){if(null==e)throw Error("null value for serialization");return(e+"").replace(/\//g,h)}function r(e){if(null==e)throw Error("null value for serialization");return i(o(e))}function s(e){return e.replace(RegExp(h,"g"),"/").replace(/\xA6/g,"/")}function l(e){return d.map(e.split("/"),function(e){return u("/",h,decodeURIComponent(e))}).join("/")}function c(e){return s(decodeURIComponent(e))}function u(e,t,n){return(n||"").split(e).join(t)}var d=e("lodash"),h="%2F";n.encode=i,n.encodeComponent=r,n.encodeSlashes=o,n.decode=l,n.decodeComponent=c,n.decodeSlashes=s},{lodash:"lodash"}],486:[function(e,t,n){function a(e,t){this.slug=e,this.params=t}a.prototype.matchedFrom=function(e,t){return this.string=e,this.index=t,this},t.exports=a},{}],487:[function(e,t,n){function a(e){return this instanceof a?void o.call(this):new a(e)}var i=e("lodash"),o=e("events").EventEmitter,r=e("inherits"),s=e("../lib/stuff");t.exports=a,r(a,o),a.prototype.init=function(e){return this.forcedRenewParam=e,this},a.prototype.resolveURL=function(e){return this.disabled?void 0:(e=e||document.location.pathname,history.emulate||(e=s.extendQuery(location.href,e,this.forcedRenewParam)),e)},a.prototype.add=function(e,t,n){if(!this.disabled){var a=!1,o={method:e,state:i.extend({},t||{},{isFromHistory:!1}),url:n,title:"undefined"!=typeof document?document.title:null,cancel:function(){a=!0}};if(this.emit("beforeAdd",o),a||"undefined"==typeof history)return!1;n=this.resolveURL(o.url),history[e+"State"](i.cloneDeep(o.state),o.title,n),this.emit("afterAdd",o),this.applyState()}},a.prototype.applyState=function(){var e=history.state||{};this.emit("statechange",e)},a.prototype.push=function(e,t){this.add("push",e,t)},a.prototype.replace=function(e,t){this.add("replace",e,t)},a.prototype.bind=function(){if("undefined"==typeof window)return!1;var e=this;return $(window).on("popstate",function(){e.disabled||(i.extend(history.state||{},{isFromHistory:!0}),e.applyState())}),!0},a.prototype.disable=function(){this.disabled=!0}},{"../lib/stuff":496,events:394,inherits:447,lodash:"lodash"}],488:[function(e,t,n){function a(e,t,n){var a={};for(var i in e)if(e.hasOwnProperty(i)){var o=e[i],r=t[i],s=n(i,o,r);s[0]&&(a[i]=s[1])}return a}function i(e,t,n){n=n||c;var i=a(t,e,function(e,t,a){return[!n(t,a,e),t]}),o=a(e,t,function(e,t,n){return[void 0===n,null]});return l.extend(i,o)}function o(e,t){return c(e,t)}function r(e,t){for(var n={},a=e.length,i=t.length,r=Math.max(a,i),s=[],l=[],c=0;r>c;c++){var u=e[c],d=t[c],h=o(u,d);h||(i>c&&s.push(d),a>c&&l.push(u))}return s.length&&(n.added=s),l.length&&(n.removed=l),n.isEqual=!s.length&&!l.length,n.value=t,n}function s(e,t){var n=function(e,t){return l.isArray(e)&&l.isArray(t)?r(t,e).isEqual:c(e,t)},a=i(e,t,n);return l.each(a,function(t,n,a){if(l.isArray(t)){var i=e[n]||[];a[n]=r(i,t)}}),a}var l=e("lodash"),c=e("deep-equal");n.dicts=i,n.arrays=r,n.states=s},{"deep-equal":428,lodash:"lodash"}],489:[function(e,t,n){var a=e("lodash"),i=e("../env");t.exports=function(){function t(){var e=n.Deferred();return e.toCallback=a.partial(t.toCallback,e),e}var n=i.isClient?jQuery:e("jquery-deferred");return t.when=function(){var e=a.compact(a.flatten(arguments)),i=n.when.apply(n,e);return i.nodeify=a.partial(t.nodeify,i),i},t.nodeify=function(e,t,n){return e.then(function(){var e=[].slice.call(arguments);e=[null].concat(e),t.apply(n,e)},function(e){t(e)})},t.toCallback=function(e){return function(t){var n=[].slice.call(arguments,1);t?e.reject(t):e.resolve.apply(e,n)}},t}()},{"../env":"slot/env","jquery-deferred":387,lodash:"lodash"}],490:[function(e,t,n){function a(e){return e.replace(/\/+$/,"").replace(/^\/+/,"")}function i(e){return s.chain(e).map(a).compact().value().join("/")}function o(e,t,n){return i([e.substring(0,t.index),n,e.substr(t.index+t[0].length)])}function r(e){function t(e){var t=e.match(l);return t?[a+o(e,t,t[1]),a+o(e,t,"")]:[e]}function n(e){var a=t(e);return a.length>1?s.flatten(s.map(a,n)):a}var a="/"==e.charAt(0)?"/":"";return n(e)}var s=e("lodash"),l=/\[([^\]]+)\]/;t.exports=r},{lodash:"lodash"}],491:[function(e,t,n){function a(e){e=e.replace(h,"");for(var t,n=s.clone(l);t=n.exec(e);)if(d.test(t[1]))return t}function i(e){var t=a(e);if(t){var n=[];return s.each(t[1].split(c),function(e){e.replace(u,function(e,t){n.push(t)})}),n}return null}function o(e){if("function"!=typeof e)throw new TypeError("injector.annotate: fn must be a function");return void 0===e._args&&(e._args=i(""+e)),e._args}function r(e,t,n,a){if("function"!=typeof e)throw new TypeError("injector.invoke: fn must be a function, got"+e);var i=o(e);if(null==i)return e.apply(a,t);for(var r=[],s=0,l=0,c=i.length;c>l;l++){var u,d=i[l];u="$"==d.charAt(0)?n(d.substr(1)):t[s++],r.push(u)}return e.apply(a,r)}var s=e("lodash"),l=/function\s*[^\(]*\(\s*([^\)]*)\)/gm,c=/,/,u=/^\s*(\S+?)\s*$/,d=/\$\S+/,h=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;n.getArgs=i,n.annotate=o,n.invoke=r},{lodash:"lodash"}],492:[function(e,t,n){var a=e("lodash"),i={MOD:1,ATOM:2,METHOD:4};t.exports=function(e){function t(t,n,o,r){function s(e){return"*"==n||n==e}function l(e,t,n,r){return a.every(o,function(o){if(o.type&i.METHOD){if(!e["interface"]||!a.isFunction(e["interface"][o.name]))return!1;var s=null==o.ref?!0:o.ref;return e["interface"][o.name].apply(e,o.args)==s}if(o.type&i.MOD){var l=t.slot.mod(),c=l[o.name];return o.ref?"*"==o.ref?null!=c&&0!=c:c==o.ref:c===!0}if(o.type&i.ATOM)switch(o.name){case"first-child":return 0==n;case"last-child":return n==r.length-1;case"first":case"last":return!0}})}function c(t,n,i){var o=e[t];s(o.type)&&l(o.moduleConf,o,n,i)&&d.push(t),a.each(o.children,c)}var u=e[t],d=[];r?c(t,0,[]):a.each(u.children,c);var h=a.last(o);if(d.length&&h&&h.type&i.ATOM)switch(h.name){case"first":return d.slice(0,1);case"last":return d.slice(-1)}return d}function n(n,o,r){function s(e){var t=e,n=i.MOD;":"==e.charAt(0)&&(n=i.ATOM,t=e.substr(1),":"==e.charAt(1)&&(n=i.METHOD,t=t.substr(1)));var a=t.indexOf("="),o=null;-1!=a&&(o=t.substr(a+1),t=t.substr(0,a));var r=[],s=t.match(d);return n&i.METHOD&&s&&(t=s[1],r=s[2].match(u)||[],r=r.map(function(e){return e.replace(h,"")})),{name:t,ref:o,type:n,args:r}}for(var l=o.split(/\s+/),c=/([\w\*]+)((?:\[[^\]]+\])*)/,u=/(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|[^"'\s\,]+)+/g,d=/(\w+)\(([^\)]*)\)/,h=/^['"]+|['"]+$/g,p=[n],f=0,m=l.length;m>f;f++){var g=/\[([^\]]+?)\]/g,_=c.exec(l[f]);if(!_)throw Error("Invalid selector "+o);for(var v,y=_[1],b=_[2],k=[];v=g.exec(b);)k.push(s(v[1]));for(var w=[],x=0,C=p.length;C>x;x++){var L=p[x];w=w.concat(t(L,y,k,r))}if(r=!1,p=w.slice(),!p.length)break}return a.at(e,p)}return n}},{lodash:"lodash"}],493:[function(e,t,n){function a(e){return"boolean"==typeof e?e:null==e||o(e).isNaN()?!1:""+e}function i(e){var t=+e;return isNaN(t)?e:t}var o=e("lodash"),r=/^_([\-0-9a-zA-Z]+)(?:_(\S+))?$/,s="__",l="_",c=RegExp("^([-0-9a-zA-Z]+)"+s+"([-0-9a-zA-Z]+)");n.moduleClass=function(e){return e},n.elementClass=function(e,t){return e+s+t},n.modificatorClass=function(e,t){if(!o.isString(e)||0==e.length)throw Error("Name must be a non-empty string");return t=a(t),t===!1?"":l+e+(t===!0?"":l+t)},n.parseElementClass=function(e){o.isString(e)&&(e=e.match(/\S+/g)||[]);var t=[];return o.any(e,function(e){return t=c.exec(e),!!t}),o.isEmpty(t)?void 0:{block:t[1],element:t[2]}},n.parseMods=function(e){return o.isString(e)&&(e=e.match(/\S+/g)||[]),o.reduce(e,function(e,t){return r.test(t)&&(e[RegExp.$1]=""==RegExp.$2?!0:i(RegExp.$2)),e},{})},n.stringifyMods=function(e){if(!o.isObject(e))throw new TypeError("Mods must be an Object");var t=[];return o.each(e,function(e,a){var i=n.modificatorClass(a,e);t.push(i)}),o.compact(t)}},{lodash:"lodash"}],494:[function(e,t,n){function a(){this.data={}}t.exports=a,a.prototype.has=function(e){return this.data.hasOwnProperty(e)},a.prototype.get=function(e,t){return this.has(e)?this.data[e]:t},a.prototype.set=function(e,t){return this.data[e]=t,this},a.prototype.remove=function(e){delete this.data[e]},a.prototype.setup=function(e){for(var t in e)e.hasOwnProperty(t)&&(this.data[t]=e[t]);return this}},{}],495:[function(e,t,n){e("setimmediate"),function(){function e(e){return e=+e,isNaN(e)?0:0!=e&&isFinite(e)?(0>e?-1:1)*Math.floor(Math.abs(e)):e}var t=String.prototype;Object.isExtensible||(Object.isExtensible=function(e){return!1}),Object.preventExtensions||(Object.preventExtensions=function(e){return e}),
Object.isSealed||(Object.isSealed=function(e){return!1}),Object.seal||(Object.seal=function(e){return e}),Object.isFrozen||(Object.isFrozen=function(e){return!1}),Object.freeze||(Object.freeze=function(e){return e}),"function"!=typeof Object.assign&&(Object.assign=function(e){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var a=arguments[n];if(void 0!==a&&null!==a)for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t}),t.contains||(t.contains=function(e,t){if(null==this)throw new TypeError("Can't convert "+this+" to object");return String.prototype.indexOf.apply(this,arguments)>-1}),t.startsWith||(t.startsWith=function(t,n){if(null==this)throw new TypeError("Can't convert "+this+" to object");t+="",n=arguments.length>=2?e(n):0;var a=this+"",i=Math.min(Math.max(n,0),a.length);return t==a.slice(i,i+t.length)}),t.endsWith||(t.endsWith=function(t,n){if(null==this)throw new TypeError("Can't convert "+this+" to object");t+="";var a=this+"",i=a.length;n=arguments.length>=2?e(n):i;var o=Math.min(Math.max(n,0),i);return t==a.substring(o-t.length,o)});var n=function(){};if("undefined"==typeof console){var a={group:n,groupCollapsed:n,groupEnd:n,log:n,warn:n,info:n,error:n};window.console=a}else console.group&&console.groupCollapsed||(console.group=console.groupCollapsed=function(){Function.prototype.apply.call(console.log,console,arguments)},console.groupEnd=n);console.groupCollapsed||(console.groupCollapsed=console.group)}()},{setimmediate:504}],496:[function(e,t,n){function a(e){return!1}function i(e,t,n){t=t||"debug"}var o=e("lodash");n.format=function(e){var t=arguments;return e.replace(/%(\d+)/g,function(e,n){return n=parseInt(n,10),t[n]})},n.escapeRegExp=function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},n.log=function(e,t){t=[].slice.call(arguments),t.splice(1,0,"log"),i.apply(this,t)},n.logEnabledFor=a,n.warn=function(e){e=[].slice.call(arguments),e.unshift("warn","warn"),i.apply(this,e)},n.error=function(e){e=[].slice.call(arguments),e.unshift("error","error"),i.apply(this,e)},n.capitalize=function(e){return e=null==e?"":e+"",e.charAt(0).toUpperCase()+e.slice(1)},n.pop=function(e,t){var n=o.lastIndexOf(e,t);-1!=n&&e.splice(n,1)},n.getByPath=function(e,t,n){n=n||".";for(var a=t.split(n);a.length&&e;)e=e[a.shift()];return e},n.state2uri=function(e){var t=[];for(var n in e){var a=encodeURIComponent(e[n]);t.push(n+"="+a)}return t.join("&")},n.uri2state=function(e){var t={};if(!e)return t;"?"==e.charAt(0)&&(e=e.substr(1));var n=e.split("&");return o.each(n,function(e){e&&e.replace(/([^=]+)\=?(.*)/g,function(e,n,a){t[n]=decodeURIComponent(a)})}),t},n.extendQuery=function(t,n,a){if(!t&&!n)return"";if(!t)return n;if(!n)return t;var i=e("url-parse"),r=i(n,!0),s=i(t,!0);return a&&delete s.query[a],r.protocol||r.set("protocol",s.protocol),r.host||r.set("host",s.host),r.hostname||r.set("hostname",s.hostname),""+r.set("query",o.extend(s.query,r.query))}},{"../config":"slot/config",lodash:"lodash","url-parse":505}],497:[function(e,t,n){function a(e){var t=r.getStorage("helpers");o.each(t,function(t,n){e.registerHelper(l.capitalize(n),function(){var a=s.require("helpers/blocks/"+n+"/"+n+".js"),i=a.apply(this,arguments),o=e.template(t);return new e.SafeString(o(i))})})}function i(e){var t=function(t,n){var a=e.ua();return c(t,a&&a.browser)?n.fn(this):n.inverse(this)};e.handlebars.registerHelper("browser",t),a(e.handlebars)}var o=e("lodash"),r=e("./templateProvider"),s=e("../env"),l=e("./stuff"),c=e("./uaConditional");t.exports=i},{"../env":"slot/env","./stuff":496,"./templateProvider":498,"./uaConditional":499,lodash:"lodash"}],498:[function(e,t,n){function a(e){if(e="jst_"+e,!r.isServer)return window[e]||{};try{return r.requirePrivate(e)[e]}catch(t){if("MODULE_NOT_FOUND"==t.code)return{};throw t}}function i(e,t){if(!e)return{};t=t||r.get("handlebars"),t._compiledTemplates=t._compiledTemplates||{};var n=e.id=e.id||l++;if(!(n in t._compiledTemplates)){var a={};o.each(e,function(e,n){a[n]=t.template(e)}),t._compiledTemplates[n]=a}return t._compiledTemplates[n]}var o=e("lodash"),r=e("../env"),s=e("./stuff");n.getStorage=a;var l=0;n.compileTemplates=i,n.forModule=function(e,t){var n=a("modules")[e];return i(n,t)},n.resolve=function(e,t,n){n=n||r.get("handlebars"),n._compiledTemplates=n._compiledTemplates||{};var i=e+t;if(!(i in n._compiledTemplates)){var o=a(e),l=s.getByPath(o,t);n._compiledTemplates[i]=n.template(l)}return n._compiledTemplates[i]}},{"../env":"slot/env","./stuff":496,lodash:"lodash"}],499:[function(e,t,n){function a(e,t){if("string"!=typeof e||!e.length)return!1;var n=/([a-z\s]+[a-z])\s?([><=!]+)?\s?([0-9]+)?/i,a=t.name&&t.name.toLowerCase(),i=+t.major;if(e=e.match(n).slice(1),e[0]=e[0]&&e[0].toLowerCase(),e[2]=+e[2],e[0]!=a)return!1;if(!e[1]&&!e[2])return!0;switch(e[1]){case"<":return i<e[2];case"<=":return i<=e[2];case">":return i>e[2];case">=":return i>=e[2];case"!=":return i!=e[2];default:return i==e[2]}}t.exports=a},{}],500:[function(e,t,n){var a=e("lodash"),i=e("./lib/namer");t.exports=function(e,t,n){function o(e,t,n){function i(e,t,n){return e+" "+n+'="'+t+'"'}var o=a.reduce(t,i,"");return"<"+e+o+">"+n+"</"+e+">"}var r=!1,s={init:function(e,a){function i(e){e||n.stage!=n.STAGE_INITING||(n.stage=n.STAGE_INITED),a&&a(e)}n.stage=n.STAGE_INITING,t.init?t.init.length>=2?t.init(e,i):(t.init(e),i()):i()},clientInit:function(){r||(t.clientInit&&t.clientInit.apply(t,arguments),r=!0)},bind:function(){t.bind&&t.bind()},changeState:function(){t.changeState&&t.changeState.apply(t,arguments)},render:function(r){var s=t.block||t.type,l=t.viewContext?t.viewContext(r):n.viewContext;if(l=r||l||{},!a.isObject(l))throw new TypeError("viewContext must be an object, but а "+l);var c=this.id,u=e.getModuleDescriptorById(c),d=t.type||t.template,h=t.tag||"div",p={};if(!u)throw Error("Module with id "+c+" not found");t.viewAttrs&&(p=a.isFunction(t.viewAttrs)?t.viewAttrs():t.viewAttrs);var f=u.mods||{},m=n.templates[d],g="function"==typeof m?m(l,n.templateOptions()):"";p.id="module-"+c,p["data-module"]=t.type;var _=i.moduleClass(s),v=p["class"]||"",y=v.split(/\s+/);return y.push(_),y=y.concat(i.stringifyMods(f)),p["class"]=a.uniq(a.compact(y)).join(" "),o(h,p,g)},id:t.uniqueId,"interface":t["interface"],dispatcher:t.dispatcher,elements:t.elements,viewContext:t.viewContext,kill:a.bind(n.kill,n),remove:a.bind(n.remove,n),dispose:a.bind(n.dispose,n),slot:n,isEventsBound:!1,type:t.type};return e.isClient&&(s.block=a.bind(e.block,e,t.uniqueId),s.bindEvents=a.bind(e.bindEvents,e,t.uniqueId),s.unbindEvents=a.bind(e.unbindEvents,e,t.uniqueId)),s}},{"./lib/namer":493,lodash:"lodash"}],501:[function(e,t,n){function a(){o.EventEmitter.call(this)}var i=e("inherits"),o=e("events"),r=e("async");i(a,o.EventEmitter),a.prototype._emitAsync=function(e,t,n,a){var i=this.listeners(t),o=[i].concat(n).concat(a),s=e?r.applyEachSeries:r.applyEach;s.apply(r,o)},a.prototype.emitParallel=function(e){var t=[].slice.call(arguments,1),n=t.pop();this._emitAsync(!1,e,t,n)},a.prototype.emitSeries=function(e){var t=[].slice.call(arguments,1),n=t.pop();this._emitAsync(!0,e,t,n)},t.exports=a},{async:502,events:394,inherits:447}],502:[function(e,t,n){(function(e){!function(){function n(e){var t=!1;return function(){if(t)throw Error("Callback was already called.");t=!0,e.apply(a,arguments)}}var a,i,o={};a=this,null!=a&&(i=a.async),o.noConflict=function(){return a.async=i,o};var r=Object.prototype.toString,s=Array.isArray||function(e){return"[object Array]"===r.call(e)},l=function(e,t){for(var n=0;n<e.length;n+=1)t(e[n],n,e)},c=function(e,t){if(e.map)return e.map(t);var n=[];return l(e,function(e,a,i){n.push(t(e,a,i))}),n},u=function(e,t,n){return e.reduce?e.reduce(t,n):(l(e,function(e,a,i){n=t(n,e,a,i)}),n)},d=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};void 0!==e&&e.nextTick?(o.nextTick=e.nextTick,"undefined"!=typeof setImmediate?o.setImmediate=function(e){setImmediate(e)}:o.setImmediate=o.nextTick):"function"==typeof setImmediate?(o.nextTick=function(e){setImmediate(e)},o.setImmediate=o.nextTick):(o.nextTick=function(e){setTimeout(e,0)},o.setImmediate=o.nextTick),o.each=function(e,t,a){function i(t){t?(a(t),a=function(){}):(o+=1,o>=e.length&&a())}if(a=a||function(){},!e.length)return a();var o=0;l(e,function(e){t(e,n(i))})},o.forEach=o.each,o.eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var a=0,i=function(){t(e[a],function(t){t?(n(t),n=function(){}):(a+=1,a>=e.length?n():i())})};i()},o.forEachSeries=o.eachSeries,o.eachLimit=function(e,t,n,a){var i=h(t);i.apply(null,[e,n,a])},o.forEachLimit=o.eachLimit;var h=function(e){return function(t,n,a){if(a=a||function(){},!t.length||0>=e)return a();var i=0,o=0,r=0;!function s(){if(i>=t.length)return a();for(;e>r&&o<t.length;)o+=1,r+=1,n(t[o-1],function(e){e?(a(e),a=function(){}):(i+=1,r-=1,i>=t.length?a():s())})}()}},p=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[o.each].concat(t))}},f=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[h(e)].concat(n))}},m=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[o.eachSeries].concat(t))}},g=function(e,t,n,a){if(t=c(t,function(e,t){return{index:t,value:e}}),a){var i=[];e(t,function(e,t){n(e.value,function(n,a){i[e.index]=a,t(n)})},function(e){a(e,i)})}else e(t,function(e,t){n(e.value,function(e){t(e)})})};o.map=p(g),o.mapSeries=m(g),o.mapLimit=function(e,t,n,a){return _(t)(e,n,a)};var _=function(e){return f(e,g)};o.reduce=function(e,t,n,a){o.eachSeries(e,function(e,a){n(t,e,function(e,n){t=n,a(e)})},function(e){a(e,t)})},o.inject=o.reduce,o.foldl=o.reduce,o.reduceRight=function(e,t,n,a){var i=c(e,function(e){return e}).reverse();o.reduce(i,t,n,a)},o.foldr=o.reduceRight;var v=function(e,t,n,a){var i=[];t=c(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&i.push(e),t()})},function(e){a(c(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};o.filter=p(v),o.filterSeries=m(v),o.select=o.filter,o.selectSeries=o.filterSeries;var y=function(e,t,n,a){var i=[];t=c(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||i.push(e),t()})},function(e){a(c(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};o.reject=p(y),o.rejectSeries=m(y);var b=function(e,t,n,a){e(t,function(e,t){n(e,function(n){n?(a(e),a=function(){}):t()})},function(e){a()})};o.detect=p(b),o.detectSeries=m(b),o.some=function(e,t,n){o.each(e,function(e,a){t(e,function(e){e&&(n(!0),n=function(){}),a()})},function(e){n(!1)})},o.any=o.some,o.every=function(e,t,n){o.each(e,function(e,a){t(e,function(e){e||(n(!1),n=function(){}),a()})},function(e){n(!0)})},o.all=o.every,o.sortBy=function(e,t,n){o.map(e,function(e,n){t(e,function(t,a){t?n(t):n(null,{value:e,criteria:a})})},function(e,t){if(e)return n(e);var a=function(e,t){var n=e.criteria,a=t.criteria;return a>n?-1:n>a?1:0};n(null,c(t.sort(a),function(e){return e.value}))})},o.auto=function(e,t){t=t||function(){};var n=d(e),a=n.length;if(!a)return t();var i={},r=[],c=function(e){r.unshift(e)},h=function(e){for(var t=0;t<r.length;t+=1)if(r[t]===e)return void r.splice(t,1)},p=function(){a--,l(r.slice(0),function(e){e()})};c(function(){if(!a){var e=t;t=function(){},e(null,i)}}),l(n,function(n){var a=s(e[n])?e[n]:[e[n]],r=function(e){var a=Array.prototype.slice.call(arguments,1);if(a.length<=1&&(a=a[0]),e){var r={};l(d(i),function(e){r[e]=i[e]}),r[n]=a,t(e,r),t=function(){}}else i[n]=a,o.setImmediate(p)},f=a.slice(0,Math.abs(a.length-1))||[],m=function(){return u(f,function(e,t){return e&&i.hasOwnProperty(t)},!0)&&!i.hasOwnProperty(n)};if(m())a[a.length-1](r,i);else{var g=function(){m()&&(h(g),a[a.length-1](r,i))};c(g)}})},o.retry=function(e,t,n){var a=5,i=[];"function"==typeof e&&(n=t,t=e,e=a),e=parseInt(e,10)||a;var r=function(a,r){for(var s=function(e,t){return function(n){e(function(e,a){n(!e||t,{err:e,result:a})},r)}};e;)i.push(s(t,!(e-=1)));o.series(i,function(e,t){t=t[t.length-1],(a||n)(t.err,t.result)})};return n?r():r},o.waterfall=function(e,t){if(t=t||function(){},!s(e)){var n=Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();var a=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),r=e.next();r?i.push(a(r)):i.push(t),o.setImmediate(function(){e.apply(null,i)})}}};a(o.iterator(e))()};var k=function(e,t,n){if(n=n||function(){},s(t))e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var a={};e.each(d(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),a[e]=i,n(t)})},function(e){n(e,a)})}};o.parallel=function(e,t){k({map:o.map,each:o.each},e,t)},o.parallelLimit=function(e,t,n){k({map:_(t),each:h(t)},e,n)},o.series=function(e,t){if(t=t||function(){},s(e))o.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var n={};o.eachSeries(d(e),function(t,a){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[t]=i,a(e)})},function(e){t(e,n)})}},o.iterator=function(e){var t=function(n){var a=function(){return e.length&&e[n].apply(null,arguments),a.next()};return a.next=function(){return n<e.length-1?t(n+1):null},a};return t(0)},o.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var w=function(e,t,n,a){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){a(e,i)})};o.concat=p(w),o.concatSeries=m(w),o.whilst=function(e,t,n){e()?t(function(a){return a?n(a):void o.whilst(e,t,n)}):n()},o.doWhilst=function(e,t,n){e(function(a){if(a)return n(a);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?o.doWhilst(e,t,n):n()})},o.until=function(e,t,n){e()?n():t(function(a){return a?n(a):void o.until(e,t,n)})},o.doUntil=function(e,t,n){e(function(a){if(a)return n(a);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?n():o.doUntil(e,t,n)})},o.queue=function(e,t){function a(e,t,n,a){return e.started||(e.started=!0),s(t)||(t=[t]),0==t.length?o.setImmediate(function(){e.drain&&e.drain()}):void l(t,function(t){var i={data:t,callback:"function"==typeof a?a:null};n?e.tasks.unshift(i):e.tasks.push(i),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),o.setImmediate(e.process)})}void 0===t&&(t=1);var i=0,r={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){a(r,e,!1,t)},kill:function(){r.drain=null,r.tasks=[]},unshift:function(e,t){a(r,e,!0,t)},process:function(){if(!r.paused&&i<r.concurrency&&r.tasks.length){var t=r.tasks.shift();r.empty&&0===r.tasks.length&&r.empty(),i+=1;var a=function(){i-=1,t.callback&&t.callback.apply(t,arguments),r.drain&&r.tasks.length+i===0&&r.drain(),r.process()},o=n(a);e(t.data,o)}},length:function(){return r.tasks.length},running:function(){return i},idle:function(){return r.tasks.length+i===0},pause:function(){r.paused!==!0&&(r.paused=!0)},resume:function(){if(r.paused!==!1){r.paused=!1;for(var e=1;e<=r.concurrency;e++)o.setImmediate(r.process)}}};return r},o.priorityQueue=function(e,t){function n(e,t){return e.priority-t.priority}function a(e,t,n){for(var a=-1,i=e.length-1;i>a;){var o=a+(i-a+1>>>1);n(t,e[o])>=0?a=o:i=o-1}return a}function i(e,t,i,r){return e.started||(e.started=!0),s(t)||(t=[t]),0==t.length?o.setImmediate(function(){e.drain&&e.drain()}):void l(t,function(t){var s={data:t,priority:i,callback:"function"==typeof r?r:null};e.tasks.splice(a(e.tasks,s,n)+1,0,s),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),o.setImmediate(e.process)})}var r=o.queue(e,t);return r.push=function(e,t,n){i(r,e,t,n)},delete r.unshift,r},o.cargo=function(e,t){var n=!1,a=[],i={tasks:a,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(e,n){s(e)||(e=[e]),l(e,function(e){a.push({data:e,callback:"function"==typeof n?n:null}),i.drained=!1,i.saturated&&a.length===t&&i.saturated()}),o.setImmediate(i.process)},process:function r(){if(!n){if(0===a.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var o="number"==typeof t?a.splice(0,t):a.splice(0,a.length),s=c(o,function(e){return e.data});i.empty&&i.empty(),n=!0,e(s,function(){n=!1;var e=arguments;l(o,function(t){t.callback&&t.callback.apply(null,e)}),r()})}},length:function(){return a.length},running:function(){return n}};return i};var x=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&l(n,function(t){console[e](t)}))}]))}};o.log=x("log"),o.dir=x("dir"),o.memoize=function(e,t){var n={},a={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),r=i.pop(),s=t.apply(null,i);s in n?o.nextTick(function(){r.apply(null,n[s])}):s in a?a[s].push(r):(a[s]=[r],e.apply(null,i.concat([function(){n[s]=arguments;var e=a[s];delete a[s];for(var t=0,i=e.length;i>t;t++)e[t].apply(null,arguments)}])))};return i.memo=n,i.unmemoized=e,i},o.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},o.times=function(e,t,n){for(var a=[],i=0;e>i;i++)a.push(i);return o.map(a,t,n)},o.timesSeries=function(e,t,n){for(var a=[],i=0;e>i;i++)a.push(i);return o.mapSeries(a,t,n)},o.seq=function(){var e=arguments;return function(){var t=this,n=Array.prototype.slice.call(arguments),a=n.pop();o.reduce(e,n,function(e,n,a){n.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);a(e,t)}]))},function(e,n){a.apply(t,[e].concat(n))})}},o.compose=function(){return o.seq.apply(null,Array.prototype.reverse.call(arguments))};var C=function(e,t){var n=function(){var n=this,a=Array.prototype.slice.call(arguments),i=a.pop();return e(t,function(e,t){e.apply(n,a.concat([t]))},i)};if(arguments.length>2){var a=Array.prototype.slice.call(arguments,2);return n.apply(this,a)}return n};o.applyEach=p(C),o.applyEachSeries=m(C),o.forever=function(e,t){function n(a){if(a){if(t)return t(a);throw a}e(n)}n()},void 0!==t&&t.exports?t.exports=o:"undefined"!=typeof define&&define.amd?define([],function(){return o}):a.async=o}()}).call(this,e("_process"))},{_process:396}],503:[function(e,t,n){function a(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function i(e){!u&&document.createRange&&(u=document.createRange(),u.selectNode(document.body));var t;return u&&u.createContextualFragment?t=u.createContextualFragment(e):(t=document.createElement("body"),t.innerHTML=e),t.childNodes[0]}function o(){}function r(e,t){var n,a,i,o,r=t.attributes,s={};for(n=r.length-1;n>=0;n--)a=r[n],a.specified!==!1&&(i=a.name,o=a.value,s[i]=!0,e.getAttribute(i)!==o&&e.setAttribute(i,o));for(r=e.attributes,n=r.length-1;n>=0;n--)a=r[n],a.specified!==!1&&(i=a.name,s.hasOwnProperty(i)||e.removeAttribute(i))}function s(e,t){for(var n=e.firstChild;n;){var a=n.nextSibling;t.appendChild(n),n=a}return t}function l(e){return e.id}function c(e,t,n){function c(e,t){var n=g(e);if(n?f[n]=e:t||_(e),1===e.nodeType)for(var a=e.firstChild;a;)c(a,t||n),a=a.nextSibling}function u(e){if(1===e.nodeType)for(var t=e.firstChild;t;)g(t)||(_(t),u(t)),t=t.nextSibling}function d(e,t,n){b(e)!==!1&&(t.removeChild(e),n?g(e)||(_(e),u(e)):c(e))}function h(e,t,n,a){var i=g(t);if(i&&delete f[i],!a){if(v(e,t)===!1)return;if(r(e,t),y(e,t)===!1)return}if("TEXTAREA"!=e.tagName){var o,s,l,c,u,_=t.firstChild,b=e.firstChild;e:for(;_;){for(l=_.nextSibling,o=g(_);b;){var k=g(b);if(s=b.nextSibling,!n&&k&&(u=m[k]))u.parentNode.replaceChild(b,u),h(b,u,n),b=s;else{var x=b.nodeType;if(x===_.nodeType){var C=!1;if(1===x?(b.tagName===_.tagName&&(k||o?o===k&&(C=!0):C=!0),C&&h(b,_,n)):3===x&&(C=!0,b.nodeValue=_.nodeValue),C){_=l,b=s;continue e}}d(b,e,n),b=s}}o&&((c=f[o])?(h(c,_,!0),_=c):m[o]=_),e.appendChild(_),1===_.nodeType&&(o||_.firstChild)&&w.push(_),_=l,b=s}for(;b;)s=b.nextSibling,d(b,e,n),b=s}var L=p[e.tagName];L&&L(e,t)}n||(n={}),"string"==typeof t&&(t=i(t));var f={},m={},g=n.getNodeKey||l,_=n.onNodeDiscarded||o,v=n.onBeforeMorphEl||o,y=n.onBeforeMorphElChildren||o,b=n.onBeforeNodeDiscarded||o,k=n.childrenOnly===!0,w=[],x=e,C=x.nodeType,L=t.nodeType;if(!k)if(1===C)1===L?e.tagName!==t.tagName&&(_(e),x=s(e,document.createElement(t.tagName))):x=t;else if(3===C){if(3===L)return x.nodeValue=t.nodeValue,x;x=t}if(x===t)_(e);else{h(x,t,!1,k);var I=function(e){for(var t=e.firstChild;t;){var n=t.nextSibling,i=g(t);if(i){var o=f[i];if(o&&t.tagName===o.tagName){if(t.parentNode.replaceChild(o,t),h(o,t,!0),t=n,a(f))return!1;continue}}1===t.nodeType&&I(t),t=n}};if(!a(f))e:for(;w.length;){var T=w;w=[];for(var S=0;S<T.length;S++)if(I(T[S])===!1)break e}for(var E in f)if(f.hasOwnProperty(E)){var P=f[E];_(P),u(P)}}return!k&&x!==e&&e.parentNode&&e.parentNode.replaceChild(x,e),x}var u,d,h="undefined"!=typeof document?document.body||document.createElement("div"):{};d=h.hasAttribute?function(e,t){return e.hasAttribute(t)}:function(e,t){return e.getAttributeNode(t)};var p={OPTION:function(e,t){(e.selected=t.selected)?e.setAttribute("selected",""):e.removeAttribute("selected","")},INPUT:function(e,t){e.checked=t.checked,e.value!=t.value&&(e.value=t.value),d(t,"checked")||e.removeAttribute("checked"),d(t,"value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!=n&&(e.value=n),e.firstChild&&(e.firstChild.nodeValue=n)}};t.exports=c},{}],504:[function(e,t,n){(function(e,t){!function(t,n){"use strict";function a(e){return m[f]=i.apply(n,e),f++}function i(e){var t=[].slice.call(arguments,1);return function(){"function"==typeof e?e.apply(n,t):Function(""+e)()}}function o(e){if(g)setTimeout(i(o,e),0);else{var t=m[e];if(t){g=!0;try{t()}finally{r(e),g=!1}}}}function r(e){delete m[e]}function s(){p=function(){var t=a(arguments);return e.nextTick(i(o,t)),t}}function l(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function c(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&o(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),p=function(){var n=a(arguments);return t.postMessage(e+n,"*"),n}}function u(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;o(t)},p=function(){var t=a(arguments);return e.port2.postMessage(t),t}}function d(){var e=_.documentElement;p=function(){var t=a(arguments),n=_.createElement("script");return n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n),t}}function h(){p=function(){var e=a(arguments);return setTimeout(i(o,e),0),e}}if(!t.setImmediate){var p,f=1,m={},g=!1,_=t.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(t);v=v&&v.setTimeout?v:t,"[object process]"==={}.toString.call(t.process)?s():l()?c():t.MessageChannel?u():_&&"onreadystatechange"in _.createElement("script")?d():h(),v.setImmediate=p,v.clearImmediate=r}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:396}],505:[function(e,t,n){"use strict";function a(e,t,n){if(!(this instanceof a))return new a(e,t,n);var c,u,d,h,p=s.test(e),f=typeof t,m=this,g=0;for("object"!==f&&"string"!==f&&(n=t,t=null),n&&"function"!=typeof n&&(n=r.parse),t=o(t);g<l.length;g++)u=l[g],c=u[0],h=u[1],c!==c?m[h]=e:"string"==typeof c?~(d=e.indexOf(c))&&("number"==typeof u[2]?(m[h]=e.slice(0,d),e=e.slice(d+u[2])):(m[h]=e.slice(d),e=e.slice(0,d))):(d=c.exec(e))&&(m[h]=d[1],e=e.slice(0,e.length-d[0].length)),m[h]=m[h]||(u[3]||"port"===h&&p?t[h]||"":""),u[4]&&(m[h]=m[h].toLowerCase());n&&(m.query=n(m.query)),i(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.auth&&(u=m.auth.split(":"),m.username=u[0]||"",m.password=u[1]||""),m.href=""+m}var i=e("requires-port"),o=e("./lolcation"),r=e("querystringify"),s=/^\/(?!\/)/,l=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];a.prototype.set=function(e,t,n){var a=this;return"query"===e?("string"==typeof t&&t.length&&(t=(n||r.parse)(t)),a[e]=t):"port"===e?(a[e]=t,i(t,a.protocol)?t&&(a.host=a.hostname+":"+t):(a.host=a.hostname,a[e]="")):"hostname"===e?(a[e]=t,a.port&&(t+=":"+a.port),a.host=t):"host"===e?(a[e]=t,/\:\d+/.test(t)&&(t=t.split(":"),a.hostname=t[0],a.port=t[1])):a[e]=t,a.href=""+a,a},a.prototype.toString=function(e){e&&"function"==typeof e||(e=r.stringify);var t,n=this,a=n.protocol+"//";return n.username&&(a+=n.username,n.password&&(a+=":"+n.password),a+="@"),a+=n.hostname,n.port&&(a+=":"+n.port),a+=n.pathname,t="object"==typeof n.query?e(n.query):n.query,t&&(a+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(a+=n.hash),a},a.qs=r,a.location=o,t.exports=a},{"./lolcation":506,querystringify:507,"requires-port":508}],506:[function(e,t,n){(function(n){"use strict";var a,i={hash:1,query:1};t.exports=function(t){t=t||n.location||{},a=a||e("./");var o,r={},s=typeof t;if("blob:"===t.protocol)r=new a(unescape(t.pathname),{});else if("string"===s){r=new a(t,{});for(o in i)delete r[o]}else if("object"===s)for(o in t)o in i||(r[o]=t[o]);return r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":505}],507:[function(e,t,n){"use strict";function a(e){for(var t,n=/([^=?&]+)=([^&]*)/g,a={};t=n.exec(e);a[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return a}function i(e,t){t=t||"";var n=[];"string"!=typeof t&&(t="?");for(var a in e)o.call(e,a)&&n.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return n.length?t+n.join("&"):""}var o=Object.prototype.hasOwnProperty;n.stringify=i,n.parse=a},{}],508:[function(e,t,n){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],509:[function(e,t,n){function a(e,t){this.app=e,this._moduleId=t.moduleId,this._moduleName=t.moduleName,this.templates=t.templates,this.timers=[],this.requests=[],this.modules={},this.config=e.config,this.registry=e.registry,this.stage=this.STAGE_INITING,this.initTemplates(),this.initPlugins(),e.emit("slotInit",this)}function i(e,t){return function(){var n=t?[this._moduleId].concat(r.toArray(arguments)):arguments;return this.app[e].apply(this.app,n)}}var o=e("async"),r=e("lodash"),s=e("./../env"),l=e("./templateHelpers"),c=(a.prototype.STAGE_INITING=1,a.prototype.STAGE_INITED=2),u=(a.prototype.STAGE_KILLED=4,a.prototype.STAGE_DISPOSED=8,a.prototype.STAGE_ALIVE=3),d=a.prototype.STAGE_NOT_ALIVE=12;t.exports=a,a.prototype.initTemplates=function(){this._templatePartials=r.omit(this.templates,this._moduleName),this._templateHelpers=l(this,this.app.handlebars)},a.prototype.extendTmplHelpers=function(e){r.extend(this._templateHelpers,e),this._tmplOptions=null},a.prototype.renderPartial=function(e,t){var n=this.templates[e];if(!n)throw Error('slot.renderPartial: partial "'+e+'" not found');return n(t,this.templateOptions())},a.prototype.hasPartial=function(e){return e in this._templatePartials},a.prototype.templateOptions=function(){if(!this._tmplOptions){var e=this.app.getModuleDescriptorById(this._moduleId),t=e.moduleConf,n={},a=t.partials||{},i=t.helpers||{};return n.partials=r.defaults(a,this._templatePartials),n.helpers=r.defaults(i,this._templateHelpers),n}return this._tmplOptions},a.prototype.initPlugins=function(){r.each(this.app.config.plugins,function(e){this[e]=this.app[e]},this)},a.prototype.loadModule=function(e){return e.parentId=this._moduleId,this.app.loadModule(e)},a.prototype.init=function(e,t,n){var a=this;if(!(a.stage&d)){if(r.isObject(e)){n=t;var i=e;e=i.type,t=i.data}else r.isFunction(t)&&(n=t,t={});var o=a.loadModule({type:e,data:t});return o.init(t,function(t){var i=e;if(t)o.dispose();else if(o.slot.stage&c){var s=a.modules[i];s?(r.isArray(s)||(a.modules[i]=[s]),a.modules[i].push(o)):a.modules[i]=o}n&&n(t,o)}),o}},a.prototype.initModules=function(e,t){o.map(e,r.bind(this.init,this),t||r.noop)},a.prototype.initModulesSeries=function(e,t){o.mapSeries(e,r.bind(this.init,this),t)},a.prototype.requireComponent=function(e,t){var n,a=this,i=a.app,o=i.loadComponent(e);return o.emitAbortablesBy?(n=i.newComponent(e,t),n.on(o.emitAbortablesBy,function(e){a.requests.push(e)}),n.on("done",function(e){a.requests=r.without(a.requests,e)})):n=i.requireComponent(e,t),n},a.prototype.clearRequests=function(){r.each(this.requests,function(e){r.isFunction(e.abort)?e.abort():r.isFunction(e.cancel)&&e.cancel()}),this.requests=[]},a.prototype.invoke=i("invoke"),a.prototype.notify=i("notify",!0),a.prototype.broadcast=i("broadcast",!0),a.prototype.queryModules=i("queryModules",!0),a.prototype.kill=i("killModule",!0),a.prototype.remove=i("removeModule",!0),a.prototype.dispose=i("disposeModule",!0),a.prototype.domBound=i("isBound"),a.prototype.element=i("element",!0),a.prototype.mod=i("mod",!0),a.prototype.raise=i("raise"),a.prototype.cookie=i("cookie"),a.prototype.moduleById=i("getChildModuleWrapperById",!0),a.prototype.isServer=s.isServer,a.prototype.isClient=s.isClient,a.prototype.rebind=function(){this.isClient&&(this.unbindEvents(),this.bindEvents())},a.prototype.moduleId=function(){return this._moduleId},a.prototype.setTimeout=function(e,t){if(!(this.stage&d)){var n=this.app.setTimeout(e,t);return this.timers.push(n),n}},a.prototype.setInterval=function(e,t){var n=this.app.setInterval(e,t);return this.timers.push(n),n},a.prototype.clearTimers=function(){r.each(this.timers,clearTimeout)},a.prototype.self=function(){var e=this.app.getModuleDescriptorById(this._moduleId);return e&&e.instance},a.prototype.ifAlive=function(e){var t=this;return function(){t.stage&u&&e.apply(this,arguments)}},s.isClient&&(a.prototype.addTransition=i("addTransition"),a.prototype.onTransitionEnd=i("onTransitionEnd"),a.prototype.runInQueue=i("runInQueue"),a.prototype.block=i("block",!0),a.prototype.rerender=i("rerender",!0),a.prototype.morph=i("morph",!0),a.prototype.bindEvents=i("bindEvents",!0),a.prototype.unbindEvents=i("unbindEvents",!0))},{"./../env":"slot/env","./templateHelpers":510,async:502,lodash:"lodash"}],510:[function(e,t,n){var a=e("lodash"),i=e("../lib/namer");t.exports=function(e,t){return{module:function(n,i){var o=a.isString(n)?e.modules[n]:n;if(a.isArray(o))throw Error("Module helper: unable to render array of modules");if(!o)return"";var r=new t.SafeString(o.render());return i&&i.fn&&(r=i.fn(r)),r},p:function(){for(var n,i=null,o=arguments[arguments.length-1],r=0,s=arguments.length;s-1>r&&(n=arguments[r],!(i="function"==typeof n?n:e.templates[n]));r++);if(!i)throw new TypeError("Unable to render first partial of this: "+a.toArray(arguments).slice(0,arguments.length-1).join(", "));return new t.SafeString(i(o.hash.context||this,e.templateOptions()))},mods:function(){for(var t={},n=0,o=arguments.length;o-1>n;n++)e.element(arguments[n])&&(t=a.extend(t,e.element(arguments[n]).mod()));return a.map(t,function(e,t){return i.modificatorClass(t,e)}).join(" ")}}}},{"../lib/namer":493,lodash:"lodash"}],511:[function(e,t,n){"use strict";function a(e,t){function n(e){if(r[e])return r[e];var n=t.filter(function(t){return RegExp(t.pattern,"g").test(e)})[0]||null;return r[e]=n,n}function a(e){return e===Object(e)}var o=e.Request,r=Object.create(null),s={},l=o.prototype.set,c=o.prototype.send,u=o.prototype.end,d=o.prototype.abort;
return o.prototype.send=function(e){var t=n(this.url);return t?(this.params=e,this):c.call(this,e)},o.prototype.set=function(e,t){var i=n(this.url);if(i){if(a(e))for(var o in e)this.set(o,e[o]);else this.headers=this.headers||{},this.headers[e]=t;return this}return l.apply(this,arguments)},o.prototype.end=function(t){var a=this.url,o="";this._query?o+=this._query.join("&"):(this.qs&&(o+=i.stringify(this.qs)),this.qsRaw&&(o+=this.qsRaw.join("&"))),o.length&&(a+=(~a.indexOf("?")?"&":"?")+o);var l=n(this.url);if(l){var c=RegExp(l.pattern,"g").exec(a);try{var d=l.fixtures(c,this.params,this.headers),h=this.method.toLocaleLowerCase(),p=r[this.url][h]?r[this.url][h]:r[this.url].callback;t(null,p(c,d))}catch(f){s=new e.Response({res:{headers:{},setEncoding:function(){},on:function(){}},req:{method:function(){}},xhr:{responseType:"",getAllResponseHeaders:function(){return"a header"},getResponseHeader:function(){return"a header"}}}),s.setStatusProperties(f.message),t(f,s)}}else u.call(this,t)},o.prototype.abort=function(){this.xhr={abort:function(){}},this.req={abort:function(){}},d.bind(this)()},{unset:function(){o.prototype.send=c,o.prototype.set=l,o.prototype.end=u,o.prototype.abort=d}}}var i=e("qs");t.exports=a},{qs:512}],512:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":513}],513:[function(e,t,n){var a=e("./stringify"),i=e("./parse");t.exports={stringify:a,parse:i}},{"./parse":514,"./stringify":515}],514:[function(e,t,n){var a=e("./utils"),i={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};i.parseValues=function(e,t){for(var n={},i=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),o=0,r=i.length;r>o;++o){var s=i[o],l=-1===s.indexOf("]=")?s.indexOf("="):s.indexOf("]=")+1;if(-1===l)n[a.decode(s)]="";else{var c=a.decode(s.slice(0,l)),u=a.decode(s.slice(l+1));Object.prototype.hasOwnProperty.call(n,c)?n[c]=[].concat(n[c]).concat(u):n[c]=u}}return n},i.parseObject=function(e,t,n){if(!e.length)return t;var a=e.shift(),o={};if("[]"===a)o=[],o=o.concat(i.parseObject(e,t,n));else{var r="["===a[0]&&"]"===a[a.length-1]?a.slice(1,a.length-1):a,s=parseInt(r,10),l=""+s;!isNaN(s)&&a!==r&&l===r&&s>=0&&s<=n.arrayLimit?(o=[],o[s]=i.parseObject(e,t,n)):o[r]=i.parseObject(e,t,n)}return o},i.parseKeys=function(e,t,n){if(e){var a=/^([^\[\]]*)/,o=/(\[[^\[\]]*\])/g,r=a.exec(e);if(!Object.prototype.hasOwnProperty(r[1])){var s=[];r[1]&&s.push(r[1]);for(var l=0;null!==(r=o.exec(e))&&l<n.depth;)++l,Object.prototype.hasOwnProperty(r[1].replace(/\[|\]/g,""))||s.push(r[1]);return r&&s.push("["+e.slice(r.index)+"]"),i.parseObject(s,t,n)}}},t.exports=function(e,t){if(""===e||null===e||void 0===e)return{};t=t||{},t.delimiter="string"==typeof t.delimiter||a.isRegExp(t.delimiter)?t.delimiter:i.delimiter,t.depth="number"==typeof t.depth?t.depth:i.depth,t.arrayLimit="number"==typeof t.arrayLimit?t.arrayLimit:i.arrayLimit,t.parameterLimit="number"==typeof t.parameterLimit?t.parameterLimit:i.parameterLimit;for(var n="string"==typeof e?i.parseValues(e,t):e,o={},r=Object.keys(n),s=0,l=r.length;l>s;++s){var c=r[s],u=i.parseKeys(c,n[c],t);o=a.merge(o,u)}return a.compact(o)}},{"./utils":516}],515:[function(e,t,n){var a=e("./utils"),i={delimiter:"&",arrayPrefixGenerators:{brackets:function(e,t){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e,t){return e}}};i.stringify=function(e,t,n){if(a.isBuffer(e)?e=""+e:e instanceof Date?e=e.toISOString():null===e&&(e=""),"string"==typeof e||"number"==typeof e||"boolean"==typeof e)return[encodeURIComponent(t)+"="+encodeURIComponent(e)];var o=[];if(void 0===e)return o;for(var r=Object.keys(e),s=0,l=r.length;l>s;++s){var c=r[s];o=Array.isArray(e)?o.concat(i.stringify(e[c],n(t,c),n)):o.concat(i.stringify(e[c],t+"["+c+"]",n))}return o},t.exports=function(e,t){t=t||{};var n=void 0===t.delimiter?i.delimiter:t.delimiter,a=[];if("object"!=typeof e||null===e)return"";var o;o=t.arrayFormat in i.arrayPrefixGenerators?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":"indices";for(var r=i.arrayPrefixGenerators[o],s=Object.keys(e),l=0,c=s.length;c>l;++l){var u=s[l];a=a.concat(i.stringify(e[u],u,r))}return a.join(n)}},{"./utils":516}],516:[function(e,t,n){n.arrayToObject=function(e){for(var t={},n=0,a=e.length;a>n;++n)void 0!==e[n]&&(t[n]=e[n]);return t},n.merge=function(e,t){if(!t)return e;if("object"!=typeof t)return Array.isArray(e)?e.push(t):e[t]=!0,e;if("object"!=typeof e)return e=[e].concat(t);Array.isArray(e)&&!Array.isArray(t)&&(e=n.arrayToObject(e));for(var a=Object.keys(t),i=0,o=a.length;o>i;++i){var r=a[i],s=t[r];e[r]?e[r]=n.merge(e[r],s):e[r]=s}return e},n.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},n.compact=function(e,t){if("object"!=typeof e||null===e)return e;t=t||[];var a=t.indexOf(e);if(-1!==a)return t[a];if(t.push(e),Array.isArray(e)){for(var i=[],o=0,r=e.length;r>o;++o)void 0!==e[o]&&i.push(e[o]);return i}var s=Object.keys(e);for(o=0,r=s.length;r>o;++o){var l=s[o];e[l]=n.compact(e[l],t)}return e},n.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},n.isBuffer=function(e){return null===e||void 0===e?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},{}],517:[function(e,t,n){function a(e,t){function n(){e.Request.apply(this,arguments)}n.prototype=Object.create(e.Request.prototype),n.prototype.end=function(n){var a=e.Request.prototype.end,i=this;return new t(function(e,t){a.call(i,function(a,i){n&&n(a,i),a?(a.response=i,t(a)):e(i)})})},n.prototype.then=function(n,a){var i=e.Request.prototype.end,o=this;return new t(function(e,t){i.call(o,function(n,a){n?(n.response=a,t(n)):e(a)})}).then(n,a)};var a=function(e,t){return new n(e,t)};return a.options=function(e){return a("OPTIONS",e)},a.head=function(e,t){var n=a("HEAD",e);return t&&n.send(t),n},a.get=function(e,t){var n=a("GET",e);return t&&n.query(t),n},a.post=function(e,t){var n=a("POST",e);return t&&n.send(t),n},a.put=function(e,t){var n=a("PUT",e);return t&&n.send(t),n},a.patch=function(e,t){var n=a("PATCH",e);return t&&n.send(t),n},a.del=function(e){return a("DELETE",e)},a}t.exports=a},{}],518:[function(e,t,n){function a(){}function i(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(e){if(!y(e))return e;var t=[];for(var n in e)null!=e[n]&&r(t,n,e[n]);return t.join("&")}function r(e,t,n){return Array.isArray(n)?n.forEach(function(n){r(e,t,n)}):void e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}function s(e){for(var t,n,a={},i=e.split("&"),o=0,r=i.length;r>o;++o)n=i[o],t=n.split("="),a[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return a}function l(e){var t,n,a,i,o=e.split(/\r?\n/),r={};o.pop();for(var s=0,l=o.length;l>s;++s)n=o[s],t=n.indexOf(":"),a=n.slice(0,t).toLowerCase(),i=k(n.slice(t+1)),r[a]=i;return r}function c(e){return/[\/+]json\b/.test(e)}function u(e){return e.split(/ *; */).shift()}function d(e){return _(e.split(/ *; */),function(e,t){var n=t.split(/ *= */),a=n.shift(),i=n.shift();return a&&i&&(e[a]=i),e},{})}function h(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=l(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function p(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new h(n)}catch(a){return e=Error("Parser is unable to parse the response"),e.parse=!0,e.original=a,e.rawResponse=n.xhr&&n.xhr.responseText?n.xhr.responseText:null,e.statusCode=n.xhr&&n.xhr.status?n.xhr.status:null,n.callback(e)}if(n.emit("response",t),e)return n.callback(e,t);if(t.status>=200&&t.status<300)return n.callback(e,t);var i=Error(t.statusText||"Unsuccessful HTTP response");i.original=e,i.response=t,i.status=t.status,n.callback(i,t)})}function f(e,t){var n=b("DELETE",e);return t&&n.end(t),n}var m,g=e("emitter"),_=e("reduce"),v=e("./request-base"),y=e("./is-object");m="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var b=t.exports=e("./request").bind(null,p);b.getXHR=function(){if(!(!m.XMLHttpRequest||m.location&&"file:"==m.location.protocol&&m.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var k="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};b.serializeObject=o,b.parseString=s,b.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},b.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},b.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},h.prototype.get=function(e){return this.header[e.toLowerCase()]},h.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=u(t);var n=d(t);for(var a in n)this[a]=n[a]},h.prototype.parseBody=function(e){var t=b.parse[this.type];return!t&&c(this.type)&&(t=b.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null},h.prototype.setStatusProperties=function(e){1223===e&&(e=204);var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=4==t||5==t?this.toError():!1,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},h.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,a="cannot "+t+" "+n+" ("+this.status+")",i=Error(a);return i.status=this.status,i.method=t,i.url=n,i},b.Response=h,g(p.prototype);for(var w in v)p.prototype[w]=v[w];p.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},p.prototype.type=function(e){return this.set("Content-Type",b.types[e]||e),this},p.prototype.responseType=function(e){return this._responseType=e,this},p.prototype.accept=function(e){return this.set("Accept",b.types[e]||e),this},p.prototype.auth=function(e,t,n){switch(n||(n={type:"basic"}),n.type){case"basic":var a=btoa(e+":"+t);this.set("Authorization","Basic "+a);break;case"auto":this.username=e,this.password=t}return this},p.prototype.query=function(e){return"string"!=typeof e&&(e=o(e)),e&&this._query.push(e),this},p.prototype.attach=function(e,t,n){return this._getFormData().append(e,t,n||t.name),this},p.prototype._getFormData=function(){return this._formData||(this._formData=new m.FormData),this._formData},p.prototype.send=function(e){var t=y(e),n=this._header["content-type"];if(t&&y(this._data))for(var a in e)this._data[a]=e[a];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+e:e:this._data=(this._data||"")+e):this._data=e;return!t||i(e)?this:(n||this.type("json"),this)},h.prototype.parse=function(e){return m.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0"),this.serialize(e),this},h.prototype.serialize=function(e){return this._parser=e,this},p.prototype.callback=function(e,t){var n=this._callback;this.clearTimeout(),n(e,t)},p.prototype.crossDomainError=function(){var e=Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},p.prototype.timeoutError=function(){var e=this._timeout,t=Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},p.prototype.withCredentials=function(){return this._withCredentials=!0,this},p.prototype.end=function(e){var t=this,n=this.xhr=b.getXHR(),o=this._query.join("&"),r=this._timeout,s=this._formData||this._data;this._callback=e||a,n.onreadystatechange=function(){if(4==n.readyState){var e;try{e=n.status}catch(a){e=0}if(0==e){if(t.timedout)return t.timeoutError();if(t.aborted)return;return t.crossDomainError()}t.emit("end")}};var l=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction="download",t.emit("progress",e)};this.hasListeners("progress")&&(n.onprogress=l);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=l)}catch(u){}if(r&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},r)),o&&(o=b.serializeObject(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof s&&!i(s)){var d=this._header["content-type"],h=this._parser||b.serialize[d?d.split(";")[0]:""];!h&&c(d)&&(h=b.serialize["application/json"]),h&&(s=h(s))}for(var p in this.header)null!=this.header[p]&&n.setRequestHeader(p,this.header[p]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send(void 0!==s?s:null),this},b.Request=p,b.get=function(e,t,n){var a=b("GET",e);return"function"==typeof t&&(n=t,t=null),t&&a.query(t),n&&a.end(n),a},b.head=function(e,t,n){var a=b("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&a.send(t),n&&a.end(n),a},b.del=f,b["delete"]=f,b.patch=function(e,t,n){var a=b("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&a.send(t),n&&a.end(n),a},b.post=function(e,t,n){var a=b("POST",e);return"function"==typeof t&&(n=t,t=null),t&&a.send(t),n&&a.end(n),a},b.put=function(e,t,n){var a=b("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&a.send(t),n&&a.end(n),a}},{"./is-object":519,"./request":521,"./request-base":520,emitter:522,reduce:523}],519:[function(e,t,n){function a(e){return null!=e&&"object"==typeof e}t.exports=a},{}],520:[function(e,t,n){var a=e("./is-object");n.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},n.parse=function(e){return this._parser=e,this},n.timeout=function(e){return this._timeout=e,this},n.then=function(e,t){return this.end(function(n,a){n?t(n):e(a)})},n.use=function(e){return e(this),this},n.get=function(e){return this._header[e.toLowerCase()]},n.getHeader=n.get,n.set=function(e,t){if(a(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},n.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},n.field=function(e,t){return this._getFormData().append(e,t),this}},{"./is-object":519}],521:[function(e,t,n){function a(e,t,n){return"function"==typeof n?new e("GET",t).end(n):2==arguments.length?new e("GET",t):new e(t,n)}t.exports=a},{}],522:[function(e,t,n){function a(e){return e?i(e):void 0}function i(e){for(var t in a.prototype)e[t]=a.prototype[t];return e}void 0!==t&&(t.exports=a),a.prototype.on=a.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},a.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},a.prototype.off=a.prototype.removeListener=a.prototype.removeAllListeners=a.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a,i=0;i<n.length;i++)if(a=n[i],a===t||a.fn===t){n.splice(i,1);break}return this},a.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var a=0,i=n.length;i>a;++a)n[a].apply(this,t)}return this},a.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},a.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],523:[function(e,t,n){t.exports=function(e,t,n){for(var a=0,i=e.length,o=3==arguments.length?n:e[a++];i>a;)o=t.call(null,o,e[a],++a,e);return o}},{}],524:[function(e,t,n){(function(a){toGeoJSON=function(){"use strict";function t(e){if(!e||!e.length)return 0;for(var t=0,n=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t)|0;return n}function i(e,t){return e.getElementsByTagName(t)}function o(e,t){return e.getAttribute(t)}function r(e,t){var n=i(e,t);return n.length?n[0]:null}function s(e){return e.normalize&&e.normalize(),e}function l(e){for(var t=0,n=[];t<e.length;t++)n[t]=parseFloat(e[t]);return n}function c(e){return e&&s(e),e&&e.firstChild&&e.firstChild.nodeValue||""}function u(e){return l(e.replace(g,"").split(","))}function d(e){for(var t=e.replace(_,"").split(v),n=[],a=0;a<t.length;a++)n.push(u(t[a]));return n}function h(){return{type:"FeatureCollection",features:[]}}function p(e){return{name:c(r(e,"name"))}}function f(e){return m.serializeToString(e)}var m,g=/\s*/g,_=/^\s*|\s*$/g,v=/\s+/;"undefined"!=typeof XMLSerializer?m=new XMLSerializer:"object"!=typeof n||"object"!=typeof a||a.browser||(m=new(e("xmldom").XMLSerializer));var y={kml:function(e){function n(e){var t=[],a=[];if(!e.length)return!1;for(var s={},l=0;l<e.length;l++){var u=e[l];if(u){var d=n(i(u,"Folder")),h=p(u),f=c(r(u,"styleUrl")),m=_(f);m&&(h.icon=m),d&&d.folders?(h.type="folder",h.subfolders=d.folders,a=a.concat(d.layersContain)):(h.type="folderNode",h.node=u),s[o(u,"id")]=h,t.push(o(u,"id"))}}return a.forEach(function(e){s[e]&&delete s[e]}),{folders:s,layersContain:t.concat(a)}}function a(e){switch(e.type){case"folderNode":for(var t=i(e.node,"Placemark"),n=[],o=0;o<t.length;o++)n=n.concat(b(t[o]));e.geometries=h(),e.geometries.features=n,delete e.node;break;default:for(var r in e.subfolders)a(e.subfolders[r])}}function s(e){var t,n;if(e=e||"","#"===e.substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length){n=parseInt(e.substr(0,2),16)/255;var a=e.substr(2,2),i=e.substr(4,2),o=e.substr(6,2);t=o+i+a}return[t,isNaN(n)?void 0:n]}function m(e){return l(e.split(" "))}function g(e){var t=i(e,"coord","gx"),n=[];0===t.length&&(t=i(e,"gx:coord"));for(var a=0;a<t.length;a++)n.push(m(c(t[a])));return n}function _(e){if(e){var t=I[e];if(t){var n=r(t,"ItemIcon");if(n)return c(r(n,"href"))}}return null}function v(e){if(e){var t=I[e];if(t){var n=r(t,"Icon");if(n)return c(r(n,"href"))}}return null}function y(e){var t,n,a,o,s,l=[];if(r(e,"MultiGeometry"))return y(r(e,"MultiGeometry"));if(r(e,"MultiTrack"))return y(r(e,"MultiTrack"));if(r(e,"gx:MultiTrack"))return y(r(e,"gx:MultiTrack"));for(a=0;a<x.length;a++)if(n=i(e,x[a]))for(o=0;o<n.length;o++)if(t=n[o],"Point"==x[a])l.push({type:"Point",coordinates:u(c(r(t,"coordinates")))});else if("LineString"==x[a])l.push({type:"LineString",coordinates:d(c(r(t,"coordinates")))});else if("Polygon"==x[a]){var h=i(t,"LinearRing"),p=[];for(s=0;s<h.length;s++)p.push(d(c(r(h[s],"coordinates"))));l.push({type:"Polygon",coordinates:p})}else"Track"!=x[a]&&"gx:Track"!=x[a]||l.push({type:"LineString",coordinates:g(t)});return l}function b(e){var t,n=y(e),a={},l=c(r(e,"name")),u=c(r(e,"styleUrl")),d=c(r(e,"description")),h=r(e,"TimeSpan"),p=r(e,"ExtendedData"),f=r(I[u],"LineStyle"),m=r(I[u],"PolyStyle"),g=v(u);if(a.featureId=o(e,"id"),g&&(a.icon=g),!n.length)return[];if(l&&(a.name=l),u&&w[u]&&(a.styleUrl=u,a.styleHash=w[u]),d&&(a.description=d),h){var _=c(r(h,"begin")),b=c(r(h,"end"));a.timespan={begin:_,end:b}}if(f){var k=s(c(r(f,"color"))),x=k[0],C=k[1],L=parseFloat(c(r(f,"width")));x&&(a["stroke-color"]=x),isNaN(C)||(a["stroke-opacity"]=C),isNaN(L)||(a["stroke-width"]=L)}if(m){var T=s(c(r(m,"color"))),S=T[0],E=T[1],P=c(r(m,"fill")),j=c(r(m,"outline"));a.fill=!!parseInt(P,10),S&&(a["fill-color"]=S),isNaN(E)||(a["fill-opacity"]=E),a.outline=!!parseInt(j,10)}if(p){var M=i(p,"Data"),A=i(p,"SimpleData");for(t=0;t<M.length;t++)a[M[t].getAttribute("name")]=c(r(M[t],"value"));for(t=0;t<A.length;t++)a[A[t].getAttribute("name")]=c(A[t])}return[{type:"Feature",geometry:1===n.length?n[0]:{type:"GeometryCollection",geometries:n},properties:a}]}for(var k,w={},x=["Polygon","LineString","Point","Track","gx:Track"],C=i(e,"Folder"),L=i(e,"Style"),I={},T=0;T<L.length;T++){var S=o(L[T],"id");I["#"+S]=L[T],w["#"+S]=t(f(L[T])).toString(16)}if(C.length>1)k={type:"root",subfolders:n(C).folders},a(k);else{var E=i(e,"Placemark");k=h();for(var P=0;P<E.length;P++)k.features=k.features.concat(b(E[P]))}return k}};return y}(),void 0!==t&&(t.exports=toGeoJSON)}).call(this,e("_process"))},{_process:396,xmldom:387}],525:[function(e,t,n){(function(){"use strict";var t;t=e("../lib/xml2js"),n.stripBOM=function(e){return"\ufeff"===e[0]?e.substring(1):e}}).call(this)},{"../lib/xml2js":527}],526:[function(e,t,n){(function(){"use strict";var e;e=RegExp(/(?!xmlns)^.*:/),n.normalize=function(e){return e.toLowerCase()},n.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},n.stripPrefix=function(t){return t.replace(e,"")},n.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},n.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e="true"===e.toLowerCase()),e}}).call(this)},{}],527:[function(e,t,n){(function(){"use strict";var t,a,i,o,r,s,l,c,u,d,h,p=function(e,t){function n(){this.constructor=e}for(var a in t)f.call(t,a)&&(e[a]=t[a]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty,m=function(e,t){return function(){return e.apply(t,arguments)}};u=e("sax"),o=e("events"),a=e("xmlbuilder"),t=e("./bom"),l=e("./processors"),d=e("timers").setImmediate,r=function(e){return"object"==typeof e&&null!=e&&0===Object.keys(e).length},s=function(e,t){var n,a,i;for(n=0,a=e.length;a>n;n++)i=e[n],t=i(t);return t},c=function(e){return e.indexOf("&")>=0||e.indexOf(">")>=0||e.indexOf("<")>=0},h=function(e){return"<![CDATA["+i(e)+"]]>"},i=function(e){return e.replace("]]>","]]]]><![CDATA[>")},n.processors=l,n.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}},n.ValidationError=function(e){function t(e){this.message=e}return p(t,e),t}(Error),n.Builder=function(){function e(e){var t,a,i;this.options={},a=n.defaults[.2];for(t in a)f.call(a,t)&&(i=a[t],this.options[t]=i);for(t in e)f.call(e,t)&&(i=e[t],this.options[t]=i)}return e.prototype.buildObject=function(e){var t,i,o,r,s;return t=this.options.attrkey,i=this.options.charkey,1===Object.keys(e).length&&this.options.rootName===n.defaults[.2].rootName?(s=Object.keys(e)[0],e=e[s]):s=this.options.rootName,o=function(e){return function(n,a){var r,s,l,u,d,p;if("object"!=typeof a)e.options.cdata&&c(a)?n.raw(h(a)):n.txt(a);else for(d in a)if(f.call(a,d))if(s=a[d],d===t){if("object"==typeof s)for(r in s)p=s[r],n=n.att(r,p)}else if(d===i)n=e.options.cdata&&c(s)?n.raw(h(s)):n.txt(s);else if(Array.isArray(s))for(u in s)f.call(s,u)&&(l=s[u],n="string"==typeof l?e.options.cdata&&c(l)?n.ele(d).raw(h(l)).up():n.ele(d,l).up():o(n.ele(d),l).up());else"object"==typeof s?n=o(n.ele(d),s).up():"string"==typeof s&&e.options.cdata&&c(s)?n=n.ele(d).raw(h(s)).up():(null==s&&(s=""),n=n.ele(d,""+s).up());return n}}(this),r=a.create(s,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),o(r,e).end(this.options.renderOpts)},e}(),n.Parser=function(e){function a(e){this.parseString=m(this.parseString,this),this.reset=m(this.reset,this),this.assignOrPush=m(this.assignOrPush,this),this.processAsync=m(this.processAsync,this);var t,a,i;if(!(this instanceof n.Parser))return new n.Parser(e);this.options={},a=n.defaults[.2];for(t in a)f.call(a,t)&&(i=a[t],this.options[t]=i);for(t in e)f.call(e,t)&&(i=e[t],this.options[t]=i);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(l.normalize)),this.reset()}return p(a,e),a.prototype.processAsync=function(){var e,t,n;try{return this.remaining.length<=this.options.chunkSize?(e=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(e),this.saxParser.close()):(e=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(e),d(this.processAsync))}catch(n){if(t=n,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(t)}},a.prototype.assignOrPush=function(e,t,n){return t in e?(e[t]instanceof Array||(e[t]=[e[t]]),e[t].push(n)):this.options.explicitArray?e[t]=[n]:e[t]=n},a.prototype.reset=function(){var e,t,n,a;return this.removeAllListeners(),this.saxParser=u.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(e){return function(t){return e.saxParser.resume(),e.saxParser.errThrown?void 0:(e.saxParser.errThrown=!0,e.emit("error",t))}}(this),this.saxParser.onend=function(e){return function(){return e.saxParser.ended?void 0:(e.saxParser.ended=!0,e.emit("end",e.resultObject))}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,a=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(n){return function(i){var o,r,l,c,u;if(l={},l[t]="",!n.options.ignoreAttrs){u=i.attributes;for(o in u)f.call(u,o)&&(e in l||n.options.mergeAttrs||(l[e]={}),r=n.options.attrValueProcessors?s(n.options.attrValueProcessors,i.attributes[o]):i.attributes[o],c=n.options.attrNameProcessors?s(n.options.attrNameProcessors,o):o,n.options.mergeAttrs?n.assignOrPush(l,c,r):l[e][c]=r)}return l["#name"]=n.options.tagNameProcessors?s(n.options.tagNameProcessors,i.name):i.name,n.options.xmlns&&(l[n.options.xmlnskey]={uri:i.uri,local:i.local}),a.push(l)}}(this),this.saxParser.onclosetag=function(e){return function(){var n,i,o,l,c,u,d,h,p,m,g,_;if(h=a.pop(),d=h["#name"],e.options.explicitChildren&&e.options.preserveChildrenOrder||delete h["#name"],h.cdata===!0&&(n=h.cdata,delete h.cdata),g=a[a.length-1],h[t].match(/^\s*$/)&&!n?(i=h[t],delete h[t]):(e.options.trim&&(h[t]=h[t].trim()),e.options.normalize&&(h[t]=h[t].replace(/\s{2,}/g," ").trim()),h[t]=e.options.valueProcessors?s(e.options.valueProcessors,h[t]):h[t],1===Object.keys(h).length&&t in h&&!e.EXPLICIT_CHARKEY&&(h=h[t])),r(h)&&(h=""!==e.options.emptyTag?e.options.emptyTag:i),null!=e.options.validator){_="/"+function(){var e,t,n;for(n=[],e=0,t=a.length;t>e;e++)u=a[e],n.push(u["#name"]);return n}().concat(d).join("/");try{h=e.options.validator(_,g&&g[d],h)}catch(l){o=l,e.emit("error",o)}}if(e.options.explicitChildren&&!e.options.mergeAttrs&&"object"==typeof h)if(e.options.preserveChildrenOrder){if(g){g[e.options.childkey]=g[e.options.childkey]||[],p={};for(c in h)f.call(h,c)&&(p[c]=h[c]);g[e.options.childkey].push(p),delete h["#name"],1===Object.keys(h).length&&t in h&&!e.EXPLICIT_CHARKEY&&(h=h[t])}}else u={},e.options.attrkey in h&&(u[e.options.attrkey]=h[e.options.attrkey],delete h[e.options.attrkey]),!e.options.charsAsChildren&&e.options.charkey in h&&(u[e.options.charkey]=h[e.options.charkey],delete h[e.options.charkey]),Object.getOwnPropertyNames(h).length>0&&(u[e.options.childkey]=h),h=u;return a.length>0?e.assignOrPush(g,d,h):(e.options.explicitRoot&&(m=h,h={},h[d]=m),e.resultObject=h,e.saxParser.ended=!0,e.emit("end",e.resultObject))}}(this),n=function(e){return function(n){var i,o;return o=a[a.length-1],o?(o[t]+=n,e.options.explicitChildren&&e.options.preserveChildrenOrder&&e.options.charsAsChildren&&""!==n.replace(/\\n/g,"").trim()&&(o[e.options.childkey]=o[e.options.childkey]||[],i={"#name":"__text__"},i[t]=n,o[e.options.childkey].push(i)),o):void 0}}(this),this.saxParser.ontext=n,this.saxParser.oncdata=function(e){return function(e){var t;return t=n(e),t?t.cdata=!0:void 0}}(this)},a.prototype.parseString=function(e,n){var a,i;null!=n&&"function"==typeof n&&(this.on("end",function(e){return this.reset(),n(null,e)}),this.on("error",function(e){return this.reset(),n(e)}));try{return e=""+e,""===e.trim()?(this.emit("end",null),!0):(e=t.stripBOM(e),this.options.async?(this.remaining=e,d(this.processAsync),this.saxParser):this.saxParser.write(e).close())}catch(i){if(a=i,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",a),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw a}},a}(o.EventEmitter),n.parseString=function(e,t,a){var i,o,r;return null!=a?("function"==typeof a&&(i=a),"object"==typeof t&&(o=t)):("function"==typeof t&&(i=t),o={}),r=new n.Parser(o),r.parseString(e,i)}}).call(this)},{"./bom":525,"./processors":526,events:394,sax:473,timers:418,xmlbuilder:544}],528:[function(e,t,n){(function(){var n,a;a=e("lodash/create"),t.exports=n=function(){function e(e,t,n){if(this.stringify=e.stringify,null==t)throw Error("Missing attribute name of element "+e.name);if(null==n)throw Error("Missing attribute value for attribute "+t+" of element "+e.name);this.name=this.stringify.attName(t),this.value=this.stringify.attValue(n)}return e.prototype.clone=function(){return a(e.prototype,this)},e.prototype.toString=function(e,t){return" "+this.name+'="'+this.value+'"'},e}()}).call(this)},{"lodash/create":641}],529:[function(e,t,n){(function(){var n,a,i,o,r;r=e("./XMLStringifier"),a=e("./XMLDeclaration"),i=e("./XMLDocType"),o=e("./XMLElement"),t.exports=n=function(){function e(e,t){var n,a;if(null==e)throw Error("Root element needs a name");null==t&&(t={}),this.options=t,this.stringify=new r(t),a=new o(this,"doc"),n=a.element(e),n.isRoot=!0,n.documentObject=this,this.rootObject=n,t.headless||(n.declaration(t),null==t.pubID&&null==t.sysID||n.doctype(t))}return e.prototype.root=function(){return this.rootObject},e.prototype.end=function(e){return this.toString(e)},e.prototype.toString=function(e){var t,n,a,i,o,r,s,l;return i=(null!=e?e.pretty:void 0)||!1,t=null!=(r=null!=e?e.indent:void 0)?r:"  ",a=null!=(s=null!=e?e.offset:void 0)?s:0,n=null!=(l=null!=e?e.newline:void 0)?l:"\n",o="",null!=this.xmldec&&(o+=this.xmldec.toString(e)),null!=this.doctype&&(o+=this.doctype.toString(e)),o+=this.rootObject.toString(e),i&&o.slice(-n.length)===n&&(o=o.slice(0,-n.length)),o},e}()}).call(this)},{"./XMLDeclaration":536,"./XMLDocType":537,"./XMLElement":538,"./XMLStringifier":542}],530:[function(e,t,n){(function(){var n,a,i,o=function(e,t){function n(){this.constructor=e}for(var a in t)r.call(t,a)&&(e[a]=t[a]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},r={}.hasOwnProperty;i=e("lodash/create"),a=e("./XMLNode"),
t.exports=n=function(e){function t(e,n){if(t.__super__.constructor.call(this,e),null==n)throw Error("Missing CDATA text");this.text=this.stringify.cdata(n)}return o(t,e),t.prototype.clone=function(){return i(t.prototype,this)},t.prototype.toString=function(e,t){var n,a,i,o,r,s,l,c,u;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(l=null!=e?e.offset:void 0)?l:0,a=null!=(c=null!=e?e.newline:void 0)?c:"\n",t||(t=0),u=Array(t+i+1).join(n),r="",o&&(r+=u),r+="<![CDATA["+this.text+"]]>",o&&(r+=a),r},t}(a)}).call(this)},{"./XMLNode":539,"lodash/create":641}],531:[function(e,t,n){(function(){var n,a,i,o=function(e,t){function n(){this.constructor=e}for(var a in t)r.call(t,a)&&(e[a]=t[a]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},r={}.hasOwnProperty;i=e("lodash/create"),a=e("./XMLNode"),t.exports=n=function(e){function t(e,n){if(t.__super__.constructor.call(this,e),null==n)throw Error("Missing comment text");this.text=this.stringify.comment(n)}return o(t,e),t.prototype.clone=function(){return i(t.prototype,this)},t.prototype.toString=function(e,t){var n,a,i,o,r,s,l,c,u;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(l=null!=e?e.offset:void 0)?l:0,a=null!=(c=null!=e?e.newline:void 0)?c:"\n",t||(t=0),u=Array(t+i+1).join(n),r="",o&&(r+=u),r+="<!-- "+this.text+" -->",o&&(r+=a),r},t}(a)}).call(this)},{"./XMLNode":539,"lodash/create":641}],532:[function(e,t,n){(function(){var n,a;a=e("lodash/create"),t.exports=n=function(){function e(e,t,n,a,i,o){if(this.stringify=e.stringify,null==t)throw Error("Missing DTD element name");if(null==n)throw Error("Missing DTD attribute name");if(!a)throw Error("Missing DTD attribute type");if(!i)throw Error("Missing DTD attribute default");if(0!==i.indexOf("#")&&(i="#"+i),!i.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");if(o&&!i.match(/^(#FIXED|#DEFAULT)$/))throw Error("Default value only applies to #FIXED or #DEFAULT");this.elementName=this.stringify.eleName(t),this.attributeName=this.stringify.attName(n),this.attributeType=this.stringify.dtdAttType(a),this.defaultValue=this.stringify.dtdAttDefault(o),this.defaultValueType=i}return e.prototype.toString=function(e,t){var n,a,i,o,r,s,l,c,u;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(l=null!=e?e.offset:void 0)?l:0,a=null!=(c=null!=e?e.newline:void 0)?c:"\n",t||(t=0),u=Array(t+i+1).join(n),r="",o&&(r+=u),r+="<!ATTLIST "+this.elementName+" "+this.attributeName+" "+this.attributeType,"#DEFAULT"!==this.defaultValueType&&(r+=" "+this.defaultValueType),this.defaultValue&&(r+=' "'+this.defaultValue+'"'),r+=">",o&&(r+=a),r},e}()}).call(this)},{"lodash/create":641}],533:[function(e,t,n){(function(){var n,a;a=e("lodash/create"),t.exports=n=function(){function e(e,t,n){if(this.stringify=e.stringify,null==t)throw Error("Missing DTD element name");n||(n="(#PCDATA)"),Array.isArray(n)&&(n="("+n.join(",")+")"),this.name=this.stringify.eleName(t),this.value=this.stringify.dtdElementValue(n)}return e.prototype.toString=function(e,t){var n,a,i,o,r,s,l,c,u;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(l=null!=e?e.offset:void 0)?l:0,a=null!=(c=null!=e?e.newline:void 0)?c:"\n",t||(t=0),u=Array(t+i+1).join(n),r="",o&&(r+=u),r+="<!ELEMENT "+this.name+" "+this.value+">",o&&(r+=a),r},e}()}).call(this)},{"lodash/create":641}],534:[function(e,t,n){(function(){var n,a,i;a=e("lodash/create"),i=e("lodash/isObject"),t.exports=n=function(){function e(e,t,n,a){if(this.stringify=e.stringify,null==n)throw Error("Missing entity name");if(null==a)throw Error("Missing entity value");if(this.pe=!!t,this.name=this.stringify.eleName(n),i(a)){if(!a.pubID&&!a.sysID)throw Error("Public and/or system identifiers are required for an external entity");if(a.pubID&&!a.sysID)throw Error("System identifier is required for a public external entity");if(null!=a.pubID&&(this.pubID=this.stringify.dtdPubID(a.pubID)),null!=a.sysID&&(this.sysID=this.stringify.dtdSysID(a.sysID)),null!=a.nData&&(this.nData=this.stringify.dtdNData(a.nData)),this.pe&&this.nData)throw Error("Notation declaration is not allowed in a parameter entity")}else this.value=this.stringify.dtdEntityValue(a)}return e.prototype.toString=function(e,t){var n,a,i,o,r,s,l,c,u;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(l=null!=e?e.offset:void 0)?l:0,a=null!=(c=null!=e?e.newline:void 0)?c:"\n",t||(t=0),u=Array(t+i+1).join(n),r="",o&&(r+=u),r+="<!ENTITY",this.pe&&(r+=" %"),r+=" "+this.name,this.value?r+=' "'+this.value+'"':(this.pubID&&this.sysID?r+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.sysID&&(r+=' SYSTEM "'+this.sysID+'"'),this.nData&&(r+=" NDATA "+this.nData)),r+=">",o&&(r+=a),r},e}()}).call(this)},{"lodash/create":641,"lodash/isObject":655}],535:[function(e,t,n){(function(){var n,a;a=e("lodash/create"),t.exports=n=function(){function e(e,t,n){if(this.stringify=e.stringify,null==t)throw Error("Missing notation name");if(!n.pubID&&!n.sysID)throw Error("Public or system identifiers are required for an external entity");this.name=this.stringify.eleName(t),null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID))}return e.prototype.toString=function(e,t){var n,a,i,o,r,s,l,c,u;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(l=null!=e?e.offset:void 0)?l:0,a=null!=(c=null!=e?e.newline:void 0)?c:"\n",t||(t=0),u=Array(t+i+1).join(n),r="",o&&(r+=u),r+="<!NOTATION "+this.name,this.pubID&&this.sysID?r+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.pubID?r+=' PUBLIC "'+this.pubID+'"':this.sysID&&(r+=' SYSTEM "'+this.sysID+'"'),r+=">",o&&(r+=a),r},e}()}).call(this)},{"lodash/create":641}],536:[function(e,t,n){(function(){var n,a,i,o,r=function(e,t){function n(){this.constructor=e}for(var a in t)s.call(t,a)&&(e[a]=t[a]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e("lodash/create"),o=e("lodash/isObject"),a=e("./XMLNode"),t.exports=n=function(e){function t(e,n,a,i){var r;t.__super__.constructor.call(this,e),o(n)&&(r=n,n=r.version,a=r.encoding,i=r.standalone),n||(n="1.0"),this.version=this.stringify.xmlVersion(n),null!=a&&(this.encoding=this.stringify.xmlEncoding(a)),null!=i&&(this.standalone=this.stringify.xmlStandalone(i))}return r(t,e),t.prototype.toString=function(e,t){var n,a,i,o,r,s,l,c,u;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(l=null!=e?e.offset:void 0)?l:0,a=null!=(c=null!=e?e.newline:void 0)?c:"\n",t||(t=0),u=Array(t+i+1).join(n),r="",o&&(r+=u),r+="<?xml",r+=' version="'+this.version+'"',null!=this.encoding&&(r+=' encoding="'+this.encoding+'"'),null!=this.standalone&&(r+=' standalone="'+this.standalone+'"'),r+="?>",o&&(r+=a),r},t}(a)}).call(this)},{"./XMLNode":539,"lodash/create":641,"lodash/isObject":655}],537:[function(e,t,n){(function(){var n,a,i,o,r,s,l,c,u,d;u=e("lodash/create"),d=e("lodash/isObject"),n=e("./XMLCData"),a=e("./XMLComment"),i=e("./XMLDTDAttList"),r=e("./XMLDTDEntity"),o=e("./XMLDTDElement"),s=e("./XMLDTDNotation"),c=e("./XMLProcessingInstruction"),t.exports=l=function(){function e(e,t,n){var a,i;this.documentObject=e,this.stringify=this.documentObject.stringify,this.children=[],d(t)&&(a=t,t=a.pubID,n=a.sysID),null==n&&(i=[t,n],n=i[0],t=i[1]),null!=t&&(this.pubID=this.stringify.dtdPubID(t)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}return e.prototype.element=function(e,t){var n;return n=new o(this,e,t),this.children.push(n),this},e.prototype.attList=function(e,t,n,a,o){var r;return r=new i(this,e,t,n,a,o),this.children.push(r),this},e.prototype.entity=function(e,t){var n;return n=new r(this,!1,e,t),this.children.push(n),this},e.prototype.pEntity=function(e,t){var n;return n=new r(this,!0,e,t),this.children.push(n),this},e.prototype.notation=function(e,t){var n;return n=new s(this,e,t),this.children.push(n),this},e.prototype.cdata=function(e){var t;return t=new n(this,e),this.children.push(t),this},e.prototype.comment=function(e){var t;return t=new a(this,e),this.children.push(t),this},e.prototype.instruction=function(e,t){var n;return n=new c(this,e,t),this.children.push(n),this},e.prototype.root=function(){return this.documentObject.root()},e.prototype.document=function(){return this.documentObject},e.prototype.toString=function(e,t){var n,a,i,o,r,s,l,c,u,d,h,p,f;if(l=(null!=e?e.pretty:void 0)||!1,i=null!=(u=null!=e?e.indent:void 0)?u:"  ",s=null!=(d=null!=e?e.offset:void 0)?d:0,r=null!=(h=null!=e?e.newline:void 0)?h:"\n",t||(t=0),f=Array(t+s+1).join(i),c="",l&&(c+=f),c+="<!DOCTYPE "+this.root().name,this.pubID&&this.sysID?c+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.sysID&&(c+=' SYSTEM "'+this.sysID+'"'),this.children.length>0){for(c+=" [",l&&(c+=r),p=this.children,a=0,o=p.length;o>a;a++)n=p[a],c+=n.toString(e,t+1);c+="]"}return c+=">",l&&(c+=r),c},e.prototype.ele=function(e,t){return this.element(e,t)},e.prototype.att=function(e,t,n,a,i){return this.attList(e,t,n,a,i)},e.prototype.ent=function(e,t){return this.entity(e,t)},e.prototype.pent=function(e,t){return this.pEntity(e,t)},e.prototype.not=function(e,t){return this.notation(e,t)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.up=function(){return this.root()},e.prototype.doc=function(){return this.document()},e}()}).call(this)},{"./XMLCData":530,"./XMLComment":531,"./XMLDTDAttList":532,"./XMLDTDElement":533,"./XMLDTDEntity":534,"./XMLDTDNotation":535,"./XMLProcessingInstruction":540,"lodash/create":641,"lodash/isObject":655}],538:[function(e,t,n){(function(){var n,a,i,o,r,s,l,c,u=function(e,t){function n(){this.constructor=e}for(var a in t)d.call(t,a)&&(e[a]=t[a]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("lodash/create"),c=e("lodash/isObject"),l=e("lodash/isFunction"),s=e("lodash/every"),i=e("./XMLNode"),n=e("./XMLAttribute"),o=e("./XMLProcessingInstruction"),t.exports=a=function(e){function t(e,n,a){if(t.__super__.constructor.call(this,e),null==n)throw Error("Missing element name");this.name=this.stringify.eleName(n),this.children=[],this.instructions=[],this.attributes={},null!=a&&this.attribute(a)}return u(t,e),t.prototype.clone=function(){var e,n,a,i,o,s,l,c;a=r(t.prototype,this),a.isRoot&&(a.documentObject=null),a.attributes={},l=this.attributes;for(n in l)d.call(l,n)&&(e=l[n],a.attributes[n]=e.clone());for(a.instructions=[],c=this.instructions,i=0,o=c.length;o>i;i++)s=c[i],a.instructions.push(s.clone());return a.children=[],this.children.forEach(function(e){var t;return t=e.clone(),t.parent=a,a.children.push(t)}),a},t.prototype.attribute=function(e,t){var a,i;if(null!=e&&(e=e.valueOf()),c(e))for(a in e)d.call(e,a)&&(i=e[a],this.attribute(a,i));else l(t)&&(t=t.apply()),this.options.skipNullAttributes&&null==t||(this.attributes[e]=new n(this,e,t));return this},t.prototype.removeAttribute=function(e){var t,n,a;if(null==e)throw Error("Missing attribute name");if(e=e.valueOf(),Array.isArray(e))for(n=0,a=e.length;a>n;n++)t=e[n],delete this.attributes[t];else delete this.attributes[e];return this},t.prototype.instruction=function(e,t){var n,a,i,r,s;if(null!=e&&(e=e.valueOf()),null!=t&&(t=t.valueOf()),Array.isArray(e))for(n=0,s=e.length;s>n;n++)a=e[n],this.instruction(a);else if(c(e))for(a in e)d.call(e,a)&&(i=e[a],this.instruction(a,i));else l(t)&&(t=t.apply()),r=new o(this,e,t),this.instructions.push(r);return this},t.prototype.toString=function(e,t){var n,a,i,o,r,l,c,u,h,p,f,m,g,_,v,y,b,k,w,x;for(m=(null!=e?e.pretty:void 0)||!1,o=null!=(_=null!=e?e.indent:void 0)?_:"  ",f=null!=(v=null!=e?e.offset:void 0)?v:0,p=null!=(y=null!=e?e.newline:void 0)?y:"\n",t||(t=0),x=Array(t+f+1).join(o),g="",b=this.instructions,i=0,c=b.length;c>i;i++)r=b[i],g+=r.toString(e,t);m&&(g+=x),g+="<"+this.name,k=this.attributes;for(h in k)d.call(k,h)&&(n=k[h],g+=n.toString(e));if(0===this.children.length||s(this.children,function(e){return""===e.value}))g+="/>",m&&(g+=p);else if(m&&1===this.children.length&&null!=this.children[0].value)g+=">",g+=this.children[0].value,g+="</"+this.name+">",g+=p;else{for(g+=">",m&&(g+=p),w=this.children,l=0,u=w.length;u>l;l++)a=w[l],g+=a.toString(e,t+1);m&&(g+=x),g+="</"+this.name+">",m&&(g+=p)}return g},t.prototype.att=function(e,t){return this.attribute(e,t)},t.prototype.ins=function(e,t){return this.instruction(e,t)},t.prototype.a=function(e,t){return this.attribute(e,t)},t.prototype.i=function(e,t){return this.instruction(e,t)},t}(i)}).call(this)},{"./XMLAttribute":528,"./XMLNode":539,"./XMLProcessingInstruction":540,"lodash/create":641,"lodash/every":643,"lodash/isFunction":653,"lodash/isObject":655}],539:[function(e,t,n){(function(){var n,a,i,o,r,s,l,c,u,d,h,p={}.hasOwnProperty;h=e("lodash/isObject"),d=e("lodash/isFunction"),u=e("lodash/isEmpty"),r=null,n=null,a=null,i=null,o=null,l=null,c=null,t.exports=s=function(){function t(t){this.parent=t,this.options=this.parent.options,this.stringify=this.parent.stringify,null===r&&(r=e("./XMLElement"),n=e("./XMLCData"),a=e("./XMLComment"),i=e("./XMLDeclaration"),o=e("./XMLDocType"),l=e("./XMLRaw"),c=e("./XMLText"))}return t.prototype.element=function(e,t,n){var a,i,o,r,s,l,c,f,m,g;if(l=null,null==t&&(t={}),t=t.valueOf(),h(t)||(m=[t,n],n=m[0],t=m[1]),null!=e&&(e=e.valueOf()),Array.isArray(e))for(o=0,c=e.length;c>o;o++)i=e[o],l=this.element(i);else if(d(e))l=this.element(e.apply());else if(h(e)){for(s in e)if(p.call(e,s))if(g=e[s],d(g)&&(g=g.apply()),h(g)&&u(g)&&(g=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===s.indexOf(this.stringify.convertAttKey))l=this.attribute(s.substr(this.stringify.convertAttKey.length),g);else if(!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===s.indexOf(this.stringify.convertPIKey))l=this.instruction(s.substr(this.stringify.convertPIKey.length),g);else if(!this.options.separateArrayItems&&Array.isArray(g))for(r=0,f=g.length;f>r;r++)i=g[r],a={},a[s]=i,l=this.element(a);else h(g)?(l=this.element(s),l.element(g)):l=this.element(s,g)}else l=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(n):this.node(e,t,n);if(null==l)throw Error("Could not create any elements with: "+e);return l},t.prototype.insertBefore=function(e,t,n){var a,i,o;if(this.isRoot)throw Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i),a=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,o),a},t.prototype.insertAfter=function(e,t,n){var a,i,o;if(this.isRoot)throw Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i+1),a=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,o),a},t.prototype.remove=function(){var e,t;if(this.isRoot)throw Error("Cannot remove the root element");return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat(t=[])),t,this.parent},t.prototype.node=function(e,t,n){var a,i;return null!=e&&(e=e.valueOf()),null==t&&(t={}),t=t.valueOf(),h(t)||(i=[t,n],n=i[0],t=i[1]),a=new r(this,e,t),null!=n&&a.text(n),this.children.push(a),a},t.prototype.text=function(e){var t;return t=new c(this,e),this.children.push(t),this},t.prototype.cdata=function(e){var t;return t=new n(this,e),this.children.push(t),this},t.prototype.comment=function(e){var t;return t=new a(this,e),this.children.push(t),this},t.prototype.raw=function(e){var t;return t=new l(this,e),this.children.push(t),this},t.prototype.declaration=function(e,t,n){var a,o;return a=this.document(),o=new i(a,e,t,n),a.xmldec=o,a.root()},t.prototype.doctype=function(e,t){var n,a;return n=this.document(),a=new o(n,e,t),n.doctype=a,a},t.prototype.up=function(){if(this.isRoot)throw Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},t.prototype.root=function(){var e;if(this.isRoot)return this;for(e=this.parent;!e.isRoot;)e=e.parent;return e},t.prototype.document=function(){return this.root().documentObject},t.prototype.end=function(e){return this.document().toString(e)},t.prototype.prev=function(){var e;if(this.isRoot)throw Error("Root node has no siblings");if(e=this.parent.children.indexOf(this),1>e)throw Error("Already at the first node");return this.parent.children[e-1]},t.prototype.next=function(){var e;if(this.isRoot)throw Error("Root node has no siblings");if(e=this.parent.children.indexOf(this),-1===e||e===this.parent.children.length-1)throw Error("Already at the last node");return this.parent.children[e+1]},t.prototype.importXMLBuilder=function(e){var t;return t=e.root().clone(),t.parent=this,t.isRoot=!1,this.children.push(t),this},t.prototype.ele=function(e,t,n){return this.element(e,t,n)},t.prototype.nod=function(e,t,n){return this.node(e,t,n)},t.prototype.txt=function(e){return this.text(e)},t.prototype.dat=function(e){return this.cdata(e)},t.prototype.com=function(e){return this.comment(e)},t.prototype.doc=function(){return this.document()},t.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},t.prototype.dtd=function(e,t){return this.doctype(e,t)},t.prototype.e=function(e,t,n){return this.element(e,t,n)},t.prototype.n=function(e,t,n){return this.node(e,t,n)},t.prototype.t=function(e){return this.text(e)},t.prototype.d=function(e){return this.cdata(e)},t.prototype.c=function(e){return this.comment(e)},t.prototype.r=function(e){return this.raw(e)},t.prototype.u=function(){return this.up()},t}()}).call(this)},{"./XMLCData":530,"./XMLComment":531,"./XMLDeclaration":536,"./XMLDocType":537,"./XMLElement":538,"./XMLRaw":541,"./XMLText":543,"lodash/isEmpty":652,"lodash/isFunction":653,"lodash/isObject":655}],540:[function(e,t,n){(function(){var n,a;a=e("lodash/create"),t.exports=n=function(){function e(e,t,n){if(this.stringify=e.stringify,null==t)throw Error("Missing instruction target");this.target=this.stringify.insTarget(t),n&&(this.value=this.stringify.insValue(n))}return e.prototype.clone=function(){return a(e.prototype,this)},e.prototype.toString=function(e,t){var n,a,i,o,r,s,l,c,u;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(l=null!=e?e.offset:void 0)?l:0,a=null!=(c=null!=e?e.newline:void 0)?c:"\n",t||(t=0),u=Array(t+i+1).join(n),r="",o&&(r+=u),r+="<?",r+=this.target,this.value&&(r+=" "+this.value),r+="?>",o&&(r+=a),r},e}()}).call(this)},{"lodash/create":641}],541:[function(e,t,n){(function(){var n,a,i,o=function(e,t){function n(){this.constructor=e}for(var a in t)r.call(t,a)&&(e[a]=t[a]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},r={}.hasOwnProperty;i=e("lodash/create"),n=e("./XMLNode"),t.exports=a=function(e){function t(e,n){if(t.__super__.constructor.call(this,e),null==n)throw Error("Missing raw text");this.value=this.stringify.raw(n)}return o(t,e),t.prototype.clone=function(){return i(t.prototype,this)},t.prototype.toString=function(e,t){var n,a,i,o,r,s,l,c,u;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(l=null!=e?e.offset:void 0)?l:0,a=null!=(c=null!=e?e.newline:void 0)?c:"\n",t||(t=0),u=Array(t+i+1).join(n),r="",o&&(r+=u),r+=this.value,o&&(r+=a),r},t}(n)}).call(this)},{"./XMLNode":539,"lodash/create":641}],542:[function(e,t,n){(function(){var e,n=function(e,t){return function(){return e.apply(t,arguments)}},a={}.hasOwnProperty;t.exports=e=function(){function e(e){this.assertLegalChar=n(this.assertLegalChar,this);var t,i,o;this.allowSurrogateChars=null!=e?e.allowSurrogateChars:void 0,this.noDoubleEncoding=null!=e?e.noDoubleEncoding:void 0,i=(null!=e?e.stringify:void 0)||{};for(t in i)a.call(i,t)&&(o=i[t],this[t]=o)}return e.prototype.eleName=function(e){return e=""+e||"",this.assertLegalChar(e)},e.prototype.eleText=function(e){return e=""+e||"",this.assertLegalChar(this.elEscape(e))},e.prototype.cdata=function(e){if(e=""+e||"",e.match(/]]>/))throw Error("Invalid CDATA text: "+e);return this.assertLegalChar(e)},e.prototype.comment=function(e){if(e=""+e||"",e.match(/--/))throw Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},e.prototype.raw=function(e){return""+e||""},e.prototype.attName=function(e){return""+e||""},e.prototype.attValue=function(e){return e=""+e||"",this.attEscape(e)},e.prototype.insTarget=function(e){return""+e||""},e.prototype.insValue=function(e){if(e=""+e||"",e.match(/\?>/))throw Error("Invalid processing instruction value: "+e);return e},e.prototype.xmlVersion=function(e){if(e=""+e||"",!e.match(/1\.[0-9]+/))throw Error("Invalid version number: "+e);return e},e.prototype.xmlEncoding=function(e){if(e=""+e||"",!e.match(/^[A-Za-z](?:[A-Za-z0-9._-]|-)*$/))throw Error("Invalid encoding: "+e);return e},e.prototype.xmlStandalone=function(e){return e?"yes":"no"},e.prototype.dtdPubID=function(e){return""+e||""},e.prototype.dtdSysID=function(e){return""+e||""},e.prototype.dtdElementValue=function(e){return""+e||""},e.prototype.dtdAttType=function(e){return""+e||""},e.prototype.dtdAttDefault=function(e){return null!=e?""+e||"":e},e.prototype.dtdEntityValue=function(e){return""+e||""},e.prototype.dtdNData=function(e){return""+e||""},e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e.prototype.assertLegalChar=function(e){var t,n;if(t=this.allowSurrogateChars?/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uFFFE-\uFFFF]/:/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uD800-\uDFFF\uFFFE-\uFFFF]/,n=e.match(t))throw Error("Invalid character ("+n+") in string: "+e+" at index "+n.index);return e},e.prototype.elEscape=function(e){var t;return t=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},e.prototype.attEscape=function(e){var t;return t=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},e}()}).call(this)},{}],543:[function(e,t,n){(function(){var n,a,i,o=function(e,t){function n(){this.constructor=e}for(var a in t)r.call(t,a)&&(e[a]=t[a]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},r={}.hasOwnProperty;i=e("lodash/create"),n=e("./XMLNode"),t.exports=a=function(e){function t(e,n){if(t.__super__.constructor.call(this,e),null==n)throw Error("Missing element text");this.value=this.stringify.eleText(n)}return o(t,e),t.prototype.clone=function(){return i(t.prototype,this)},t.prototype.toString=function(e,t){var n,a,i,o,r,s,l,c,u;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(l=null!=e?e.offset:void 0)?l:0,a=null!=(c=null!=e?e.newline:void 0)?c:"\n",t||(t=0),u=Array(t+i+1).join(n),r="",o&&(r+=u),r+=this.value,o&&(r+=a),r},t}(n)}).call(this)},{"./XMLNode":539,"lodash/create":641}],544:[function(e,t,n){(function(){var n,a;a=e("lodash/assign"),n=e("./XMLBuilder"),t.exports.create=function(e,t,i,o){return o=a({},t,i,o),new n(e,o).root()}}).call(this)},{"./XMLBuilder":529,"lodash/assign":640}],545:[function(e,t,n){var a=e("./_getNative"),i=e("./_root"),o=a(i,"DataView");t.exports=o},{"./_getNative":596,"./_root":628}],546:[function(e,t,n){function a(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}var i=e("./_hashClear"),o=e("./_hashDelete"),r=e("./_hashGet"),s=e("./_hashHas"),l=e("./_hashSet");a.prototype.clear=i,a.prototype["delete"]=o,a.prototype.get=r,a.prototype.has=s,a.prototype.set=l,t.exports=a},{"./_hashClear":601,"./_hashDelete":602,"./_hashGet":603,"./_hashHas":604,"./_hashSet":605}],547:[function(e,t,n){function a(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}var i=e("./_listCacheClear"),o=e("./_listCacheDelete"),r=e("./_listCacheGet"),s=e("./_listCacheHas"),l=e("./_listCacheSet");a.prototype.clear=i,a.prototype["delete"]=o,a.prototype.get=r,a.prototype.has=s,a.prototype.set=l,t.exports=a},{"./_listCacheClear":615,"./_listCacheDelete":616,"./_listCacheGet":617,"./_listCacheHas":618,"./_listCacheSet":619}],548:[function(e,t,n){var a=e("./_getNative"),i=e("./_root"),o=a(i,"Map");t.exports=o},{"./_getNative":596,"./_root":628}],549:[function(e,t,n){function a(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}var i=e("./_mapCacheClear"),o=e("./_mapCacheDelete"),r=e("./_mapCacheGet"),s=e("./_mapCacheHas"),l=e("./_mapCacheSet");a.prototype.clear=i,a.prototype["delete"]=o,a.prototype.get=r,a.prototype.has=s,a.prototype.set=l,t.exports=a},{"./_mapCacheClear":620,"./_mapCacheDelete":621,"./_mapCacheGet":622,"./_mapCacheHas":623,"./_mapCacheSet":624}],550:[function(e,t,n){var a=e("./_getNative"),i=e("./_root"),o=a(i,"Promise");t.exports=o},{"./_getNative":596,"./_root":628}],551:[function(e,t,n){var a=e("./_getNative"),i=e("./_root"),o=a(i,"Set");t.exports=o},{"./_getNative":596,"./_root":628}],552:[function(e,t,n){function a(e){var t=-1,n=e?e.length:0;for(this.__data__=new i;++t<n;)this.add(e[t])}var i=e("./_MapCache"),o=e("./_setCacheAdd"),r=e("./_setCacheHas");a.prototype.add=a.prototype.push=o,a.prototype.has=r,t.exports=a},{"./_MapCache":549,"./_setCacheAdd":629,"./_setCacheHas":630}],553:[function(e,t,n){function a(e){this.__data__=new i(e)}var i=e("./_ListCache"),o=e("./_stackClear"),r=e("./_stackDelete"),s=e("./_stackGet"),l=e("./_stackHas"),c=e("./_stackSet");a.prototype.clear=o,a.prototype["delete"]=r,a.prototype.get=s,a.prototype.has=l,a.prototype.set=c,t.exports=a},{"./_ListCache":547,"./_stackClear":632,"./_stackDelete":633,"./_stackGet":634,"./_stackHas":635,"./_stackSet":636}],554:[function(e,t,n){var a=e("./_root"),i=a.Symbol;t.exports=i},{"./_root":628}],555:[function(e,t,n){var a=e("./_root"),i=a.Uint8Array;t.exports=i},{"./_root":628}],556:[function(e,t,n){var a=e("./_getNative"),i=e("./_root"),o=a(i,"WeakMap");t.exports=o},{"./_getNative":596,"./_root":628}],557:[function(e,t,n){function a(e,t,n){var a=n.length;switch(a){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}t.exports=a},{}],558:[function(e,t,n){function a(e,t){for(var n=-1,a=e?e.length:0;++n<a;)if(!t(e[n],n,e))return!1;return!0}t.exports=a},{}],559:[function(e,t,n){function a(e,t){for(var n=-1,a=e?e.length:0;++n<a;)if(t(e[n],n,e))return!0;return!1}t.exports=a},{}],560:[function(e,t,n){function a(e,t,n){var a=e[t];r.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||(e[t]=n)}var i=e("./eq"),o=Object.prototype,r=o.hasOwnProperty;t.exports=a},{"./eq":642}],561:[function(e,t,n){function a(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}var i=e("./eq");t.exports=a},{"./eq":642}],562:[function(e,t,n){function a(e,t){return e&&i(t,o(t),e)}var i=e("./_copyObject"),o=e("./keys");t.exports=a},{"./_copyObject":585,"./keys":660}],563:[function(e,t,n){function a(e){return i(e)?o(e):{}}var i=e("./isObject"),o=Object.create;t.exports=a},{"./isObject":655}],564:[function(e,t,n){var a=e("./_baseForOwn"),i=e("./_createBaseEach"),o=i(a);t.exports=o},{"./_baseForOwn":567,"./_createBaseEach":588}],565:[function(e,t,n){function a(e,t){var n=!0;return i(e,function(e,a,i){return n=!!t(e,a,i)}),n}var i=e("./_baseEach");t.exports=a},{"./_baseEach":564}],566:[function(e,t,n){var a=e("./_createBaseFor"),i=a();t.exports=i},{"./_createBaseFor":589}],567:[function(e,t,n){function a(e,t){return e&&i(e,t,o)}var i=e("./_baseFor"),o=e("./keys");t.exports=a},{"./_baseFor":566,"./keys":660}],568:[function(e,t,n){function a(e,t){t=o(t,e)?[t]:i(t);for(var n=0,a=t.length;null!=e&&a>n;)e=e[r(t[n++])];return n&&n==a?e:void 0}var i=e("./_castPath"),o=e("./_isKey"),r=e("./_toKey");t.exports=a},{"./_castPath":583,"./_isKey":610,"./_toKey":638}],569:[function(e,t,n){function a(e,t){return null!=e&&(r.call(e,t)||"object"==typeof e&&t in e&&null===i(e))}var i=e("./_getPrototype"),o=Object.prototype,r=o.hasOwnProperty;t.exports=a},{"./_getPrototype":597}],570:[function(e,t,n){function a(e,t){return null!=e&&t in Object(e)}t.exports=a},{}],571:[function(e,t,n){function a(e,t,n,s,l){return e===t?!0:null==e||null==t||!o(e)&&!r(t)?e!==e&&t!==t:i(e,t,a,n,s,l)}var i=e("./_baseIsEqualDeep"),o=e("./isObject"),r=e("./isObjectLike");t.exports=a},{"./_baseIsEqualDeep":572,"./isObject":655,"./isObjectLike":656}],572:[function(e,t,n){function a(e,t,n,a,g,v){var y=c(e),b=c(t),k=f,w=f;y||(k=l(e),k=k==p?m:k),b||(w=l(t),w=w==p?m:w);var x=k==m&&!u(e),C=w==m&&!u(t),L=k==w;if(L&&!x)return v||(v=new i),y||d(e)?o(e,t,n,a,g,v):r(e,t,k,n,a,g,v);if(!(g&h)){var I=x&&_.call(e,"__wrapped__"),T=C&&_.call(t,"__wrapped__");if(I||T){var S=I?e.value():e,E=T?t.value():t;return v||(v=new i),n(S,E,a,g,v)}}return L?(v||(v=new i),s(e,t,n,a,g,v)):!1}var i=e("./_Stack"),o=e("./_equalArrays"),r=e("./_equalByTag"),s=e("./_equalObjects"),l=e("./_getTag"),c=e("./isArray"),u=e("./_isHostObject"),d=e("./isTypedArray"),h=2,p="[object Arguments]",f="[object Array]",m="[object Object]",g=Object.prototype,_=g.hasOwnProperty;t.exports=a},{"./_Stack":553,"./_equalArrays":590,"./_equalByTag":591,"./_equalObjects":592,"./_getTag":598,"./_isHostObject":607,"./isArray":648,"./isTypedArray":659}],573:[function(e,t,n){function a(e,t,n,a){var l=n.length,c=l,u=!a;if(null==e)return!c;for(e=Object(e);l--;){var d=n[l];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++l<c;){d=n[l];var h=d[0],p=e[h],f=d[1];if(u&&d[2]){if(void 0===p&&!(h in e))return!1}else{var m=new i;if(a)var g=a(p,f,h,e,t,m);if(!(void 0===g?o(f,p,a,r|s,m):g))return!1}}return!0}var i=e("./_Stack"),o=e("./_baseIsEqual"),r=1,s=2;t.exports=a},{"./_Stack":553,"./_baseIsEqual":571}],574:[function(e,t,n){function a(e){if(!s(e)||r(e))return!1;var t=i(e)||o(e)?f:u;return t.test(l(e))}var i=e("./isFunction"),o=e("./_isHostObject"),r=e("./_isMasked"),s=e("./isObject"),l=e("./_toSource"),c=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,d=Object.prototype,h=Function.prototype.toString,p=d.hasOwnProperty,f=RegExp("^"+h.call(p).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=a},{"./_isHostObject":607,"./_isMasked":612,"./_toSource":639,"./isFunction":653,"./isObject":655}],575:[function(e,t,n){function a(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?s(e)?o(e[0],e[1]):i(e):l(e)}var i=e("./_baseMatches"),o=e("./_baseMatchesProperty"),r=e("./identity"),s=e("./isArray"),l=e("./property");t.exports=a},{"./_baseMatches":577,"./_baseMatchesProperty":578,"./identity":646,"./isArray":648,"./property":662}],576:[function(e,t,n){function a(e){return i(Object(e))}var i=Object.keys;t.exports=a},{}],577:[function(e,t,n){function a(e){var t=o(e);return 1==t.length&&t[0][2]?r(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}}var i=e("./_baseIsMatch"),o=e("./_getMatchData"),r=e("./_matchesStrictComparable");t.exports=a},{"./_baseIsMatch":573,"./_getMatchData":595,"./_matchesStrictComparable":626}],578:[function(e,t,n){function a(e,t){return s(e)&&l(t)?c(u(e),t):function(n){var a=o(n,e);return void 0===a&&a===t?r(n,e):i(t,a,void 0,d|h)}}var i=e("./_baseIsEqual"),o=e("./get"),r=e("./hasIn"),s=e("./_isKey"),l=e("./_isStrictComparable"),c=e("./_matchesStrictComparable"),u=e("./_toKey"),d=1,h=2;t.exports=a},{"./_baseIsEqual":571,
"./_isKey":610,"./_isStrictComparable":614,"./_matchesStrictComparable":626,"./_toKey":638,"./get":644,"./hasIn":645}],579:[function(e,t,n){function a(e){return function(t){return null==t?void 0:t[e]}}t.exports=a},{}],580:[function(e,t,n){function a(e){return function(t){return i(t,e)}}var i=e("./_baseGet");t.exports=a},{"./_baseGet":568}],581:[function(e,t,n){function a(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a}t.exports=a},{}],582:[function(e,t,n){function a(e){if("string"==typeof e)return e;if(o(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-r?"-0":t}var i=e("./_Symbol"),o=e("./isSymbol"),r=1/0,s=i?i.prototype:void 0,l=s?s.toString:void 0;t.exports=a},{"./_Symbol":554,"./isSymbol":658}],583:[function(e,t,n){function a(e){return i(e)?e:o(e)}var i=e("./isArray"),o=e("./_stringToPath");t.exports=a},{"./_stringToPath":637,"./isArray":648}],584:[function(e,t,n){function a(e){return e&&e.Object===Object?e:null}t.exports=a},{}],585:[function(e,t,n){function a(e,t,n,a){n||(n={});for(var o=-1,r=t.length;++o<r;){var s=t[o],l=a?a(n[s],e[s],s,n,e):e[s];i(n,s,l)}return n}var i=e("./_assignValue");t.exports=a},{"./_assignValue":560}],586:[function(e,t,n){var a=e("./_root"),i=a["__core-js_shared__"];t.exports=i},{"./_root":628}],587:[function(e,t,n){function a(e){return o(function(t,n){var a=-1,o=n.length,r=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(r=e.length>3&&"function"==typeof r?(o--,r):void 0,s&&i(n[0],n[1],s)&&(r=3>o?void 0:r,o=1),t=Object(t);++a<o;){var l=n[a];l&&e(t,l,a,r)}return t})}var i=e("./_isIterateeCall"),o=e("./rest");t.exports=a},{"./_isIterateeCall":609,"./rest":663}],588:[function(e,t,n){function a(e,t){return function(n,a){if(null==n)return n;if(!i(n))return e(n,a);for(var o=n.length,r=t?o:-1,s=Object(n);(t?r--:++r<o)&&a(s[r],r,s)!==!1;);return n}}var i=e("./isArrayLike");t.exports=a},{"./isArrayLike":649}],589:[function(e,t,n){function a(e){return function(t,n,a){for(var i=-1,o=Object(t),r=a(t),s=r.length;s--;){var l=r[e?s:++i];if(n(o[l],l,o)===!1)break}return t}}t.exports=a},{}],590:[function(e,t,n){function a(e,t,n,a,l,c){var u=l&s,d=e.length,h=t.length;if(d!=h&&!(u&&h>d))return!1;var p=c.get(e);if(p)return p==t;var f=-1,m=!0,g=l&r?new i:void 0;for(c.set(e,t);++f<d;){var _=e[f],v=t[f];if(a)var y=u?a(v,_,f,t,e,c):a(_,v,f,e,t,c);if(void 0!==y){if(y)continue;m=!1;break}if(g){if(!o(t,function(e,t){return g.has(t)||_!==e&&!n(_,e,a,l,c)?void 0:g.add(t)})){m=!1;break}}else if(_!==v&&!n(_,v,a,l,c)){m=!1;break}}return c["delete"](e),m}var i=e("./_SetCache"),o=e("./_arraySome"),r=1,s=2;t.exports=a},{"./_SetCache":552,"./_arraySome":559}],591:[function(e,t,n){function a(e,t,n,a,i,w,C){switch(n){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!a(new o(e),new o(t)));case d:case h:return+e==+t;case p:return e.name==t.name&&e.message==t.message;case m:return e!=+e?t!=+t:e==+t;case g:case v:return e==t+"";case f:var L=s;case _:var I=w&u;if(L||(L=l),e.size!=t.size&&!I)return!1;var T=C.get(e);return T?T==t:(w|=c,C.set(e,t),r(L(e),L(t),a,i,w,C));case y:if(x)return x.call(e)==x.call(t)}return!1}var i=e("./_Symbol"),o=e("./_Uint8Array"),r=e("./_equalArrays"),s=e("./_mapToArray"),l=e("./_setToArray"),c=1,u=2,d="[object Boolean]",h="[object Date]",p="[object Error]",f="[object Map]",m="[object Number]",g="[object RegExp]",_="[object Set]",v="[object String]",y="[object Symbol]",b="[object ArrayBuffer]",k="[object DataView]",w=i?i.prototype:void 0,x=w?w.valueOf:void 0;t.exports=a},{"./_Symbol":554,"./_Uint8Array":555,"./_equalArrays":590,"./_mapToArray":625,"./_setToArray":631}],592:[function(e,t,n){function a(e,t,n,a,s,l){var c=s&r,u=o(e),d=u.length,h=o(t),p=h.length;if(d!=p&&!c)return!1;for(var f=d;f--;){var m=u[f];if(!(c?m in t:i(t,m)))return!1}var g=l.get(e);if(g)return g==t;var _=!0;l.set(e,t);for(var v=c;++f<d;){m=u[f];var y=e[m],b=t[m];if(a)var k=c?a(b,y,m,t,e,l):a(y,b,m,e,t,l);if(!(void 0===k?y===b||n(y,b,a,s,l):k)){_=!1;break}v||(v="constructor"==m)}if(_&&!v){var w=e.constructor,x=t.constructor;w!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x)&&(_=!1)}return l["delete"](e),_}var i=e("./_baseHas"),o=e("./keys"),r=2;t.exports=a},{"./_baseHas":569,"./keys":660}],593:[function(e,t,n){var a=e("./_baseProperty"),i=a("length");t.exports=i},{"./_baseProperty":579}],594:[function(e,t,n){function a(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}var i=e("./_isKeyable");t.exports=a},{"./_isKeyable":611}],595:[function(e,t,n){function a(e){for(var t=o(e),n=t.length;n--;){var a=t[n],r=e[a];t[n]=[a,r,i(r)]}return t}var i=e("./_isStrictComparable"),o=e("./keys");t.exports=a},{"./_isStrictComparable":614,"./keys":660}],596:[function(e,t,n){function a(e,t){var n=o(e,t);return i(n)?n:void 0}var i=e("./_baseIsNative"),o=e("./_getValue");t.exports=a},{"./_baseIsNative":574,"./_getValue":599}],597:[function(e,t,n){arguments[4][467][0].apply(n,arguments)},{dup:467}],598:[function(e,t,n){function a(e){return _.call(e)}var i=e("./_DataView"),o=e("./_Map"),r=e("./_Promise"),s=e("./_Set"),l=e("./_WeakMap"),c=e("./_toSource"),u="[object Map]",d="[object Object]",h="[object Promise]",p="[object Set]",f="[object WeakMap]",m="[object DataView]",g=Object.prototype,_=g.toString,v=c(i),y=c(o),b=c(r),k=c(s),w=c(l);(i&&a(new i(new ArrayBuffer(1)))!=m||o&&a(new o)!=u||r&&a(r.resolve())!=h||s&&a(new s)!=p||l&&a(new l)!=f)&&(a=function(e){var t=_.call(e),n=t==d?e.constructor:void 0,a=n?c(n):void 0;if(a)switch(a){case v:return m;case y:return u;case b:return h;case k:return p;case w:return f}return t}),t.exports=a},{"./_DataView":545,"./_Map":548,"./_Promise":550,"./_Set":551,"./_WeakMap":556,"./_toSource":639}],599:[function(e,t,n){function a(e,t){return null==e?void 0:e[t]}t.exports=a},{}],600:[function(e,t,n){function a(e,t,n){t=l(t,e)?[t]:i(t);for(var a,h=-1,p=t.length;++h<p;){var f=d(t[h]);if(!(a=null!=e&&n(e,f)))break;e=e[f]}if(a)return a;var p=e?e.length:0;return!!p&&c(p)&&s(f,p)&&(r(e)||u(e)||o(e))}var i=e("./_castPath"),o=e("./isArguments"),r=e("./isArray"),s=e("./_isIndex"),l=e("./_isKey"),c=e("./isLength"),u=e("./isString"),d=e("./_toKey");t.exports=a},{"./_castPath":583,"./_isIndex":608,"./_isKey":610,"./_toKey":638,"./isArguments":647,"./isArray":648,"./isLength":654,"./isString":657}],601:[function(e,t,n){function a(){this.__data__=i?i(null):{}}var i=e("./_nativeCreate");t.exports=a},{"./_nativeCreate":627}],602:[function(e,t,n){function a(e){return this.has(e)&&delete this.__data__[e]}t.exports=a},{}],603:[function(e,t,n){function a(e){var t=this.__data__;if(i){var n=t[e];return n===o?void 0:n}return s.call(t,e)?t[e]:void 0}var i=e("./_nativeCreate"),o="__lodash_hash_undefined__",r=Object.prototype,s=r.hasOwnProperty;t.exports=a},{"./_nativeCreate":627}],604:[function(e,t,n){function a(e){var t=this.__data__;return i?void 0!==t[e]:r.call(t,e)}var i=e("./_nativeCreate"),o=Object.prototype,r=o.hasOwnProperty;t.exports=a},{"./_nativeCreate":627}],605:[function(e,t,n){function a(e,t){var n=this.__data__;return n[e]=i&&void 0===t?o:t,this}var i=e("./_nativeCreate"),o="__lodash_hash_undefined__";t.exports=a},{"./_nativeCreate":627}],606:[function(e,t,n){function a(e){var t=e?e.length:void 0;return s(t)&&(r(e)||l(e)||o(e))?i(t,String):null}var i=e("./_baseTimes"),o=e("./isArguments"),r=e("./isArray"),s=e("./isLength"),l=e("./isString");t.exports=a},{"./_baseTimes":581,"./isArguments":647,"./isArray":648,"./isLength":654,"./isString":657}],607:[function(e,t,n){arguments[4][468][0].apply(n,arguments)},{dup:468}],608:[function(e,t,n){function a(e,t){return t=null==t?i:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&t>e}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=a},{}],609:[function(e,t,n){function a(e,t,n){if(!s(n))return!1;var a=typeof t;return("number"==a?o(n)&&r(t,n.length):"string"==a&&t in n)?i(n[t],e):!1}var i=e("./eq"),o=e("./isArrayLike"),r=e("./_isIndex"),s=e("./isObject");t.exports=a},{"./_isIndex":608,"./eq":642,"./isArrayLike":649,"./isObject":655}],610:[function(e,t,n){function a(e,t){if(i(e))return!1;var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e||o(e)?!0:s.test(e)||!r.test(e)||null!=t&&e in Object(t)}var i=e("./isArray"),o=e("./isSymbol"),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=a},{"./isArray":648,"./isSymbol":658}],611:[function(e,t,n){function a(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}t.exports=a},{}],612:[function(e,t,n){function a(e){return!!o&&o in e}var i=e("./_coreJsData"),o=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();t.exports=a},{"./_coreJsData":586}],613:[function(e,t,n){function a(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||i;return e===n}var i=Object.prototype;t.exports=a},{}],614:[function(e,t,n){function a(e){return e===e&&!i(e)}var i=e("./isObject");t.exports=a},{"./isObject":655}],615:[function(e,t,n){function a(){this.__data__=[]}t.exports=a},{}],616:[function(e,t,n){function a(e){var t=this.__data__,n=i(t,e);if(0>n)return!1;var a=t.length-1;return n==a?t.pop():r.call(t,n,1),!0}var i=e("./_assocIndexOf"),o=Array.prototype,r=o.splice;t.exports=a},{"./_assocIndexOf":561}],617:[function(e,t,n){function a(e){var t=this.__data__,n=i(t,e);return 0>n?void 0:t[n][1]}var i=e("./_assocIndexOf");t.exports=a},{"./_assocIndexOf":561}],618:[function(e,t,n){function a(e){return i(this.__data__,e)>-1}var i=e("./_assocIndexOf");t.exports=a},{"./_assocIndexOf":561}],619:[function(e,t,n){function a(e,t){var n=this.__data__,a=i(n,e);return 0>a?n.push([e,t]):n[a][1]=t,this}var i=e("./_assocIndexOf");t.exports=a},{"./_assocIndexOf":561}],620:[function(e,t,n){function a(){this.__data__={hash:new i,map:new(r||o),string:new i}}var i=e("./_Hash"),o=e("./_ListCache"),r=e("./_Map");t.exports=a},{"./_Hash":546,"./_ListCache":547,"./_Map":548}],621:[function(e,t,n){function a(e){return i(this,e)["delete"](e)}var i=e("./_getMapData");t.exports=a},{"./_getMapData":594}],622:[function(e,t,n){function a(e){return i(this,e).get(e)}var i=e("./_getMapData");t.exports=a},{"./_getMapData":594}],623:[function(e,t,n){function a(e){return i(this,e).has(e)}var i=e("./_getMapData");t.exports=a},{"./_getMapData":594}],624:[function(e,t,n){function a(e,t){return i(this,e).set(e,t),this}var i=e("./_getMapData");t.exports=a},{"./_getMapData":594}],625:[function(e,t,n){function a(e){var t=-1,n=Array(e.size);return e.forEach(function(e,a){n[++t]=[a,e]}),n}t.exports=a},{}],626:[function(e,t,n){function a(e,t){return function(n){return null==n?!1:n[e]===t&&(void 0!==t||e in Object(n))}}t.exports=a},{}],627:[function(e,t,n){var a=e("./_getNative"),i=a(Object,"create");t.exports=i},{"./_getNative":596}],628:[function(e,t,n){(function(n){var a=e("./_checkGlobal"),i=a("object"==typeof n&&n),o=a("object"==typeof self&&self),r=a("object"==typeof this&&this),s=i||o||r||Function("return this")();t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_checkGlobal":584}],629:[function(e,t,n){function a(e){return this.__data__.set(e,i),this}var i="__lodash_hash_undefined__";t.exports=a},{}],630:[function(e,t,n){function a(e){return this.__data__.has(e)}t.exports=a},{}],631:[function(e,t,n){function a(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}t.exports=a},{}],632:[function(e,t,n){function a(){this.__data__=new i}var i=e("./_ListCache");t.exports=a},{"./_ListCache":547}],633:[function(e,t,n){function a(e){return this.__data__["delete"](e)}t.exports=a},{}],634:[function(e,t,n){function a(e){return this.__data__.get(e)}t.exports=a},{}],635:[function(e,t,n){function a(e){return this.__data__.has(e)}t.exports=a},{}],636:[function(e,t,n){function a(e,t){var n=this.__data__;return n instanceof i&&n.__data__.length==r&&(n=this.__data__=new o(n.__data__)),n.set(e,t),this}var i=e("./_ListCache"),o=e("./_MapCache"),r=200;t.exports=a},{"./_ListCache":547,"./_MapCache":549}],637:[function(e,t,n){var a=e("./memoize"),i=e("./toString"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,r=/\\(\\)?/g,s=a(function(e){var t=[];return i(e).replace(o,function(e,n,a,i){t.push(a?i.replace(r,"$1"):n||e)}),t});t.exports=s},{"./memoize":661,"./toString":668}],638:[function(e,t,n){function a(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}var i=e("./isSymbol"),o=1/0;t.exports=a},{"./isSymbol":658}],639:[function(e,t,n){function a(e){if(null!=e){try{return i.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var i=Function.prototype.toString;t.exports=a},{}],640:[function(e,t,n){var a=e("./_assignValue"),i=e("./_copyObject"),o=e("./_createAssigner"),r=e("./isArrayLike"),s=e("./_isPrototype"),l=e("./keys"),c=Object.prototype,u=c.hasOwnProperty,d=c.propertyIsEnumerable,h=!d.call({valueOf:1},"valueOf"),p=o(function(e,t){if(h||s(t)||r(t))return void i(t,l(t),e);for(var n in t)u.call(t,n)&&a(e,n,t[n])});t.exports=p},{"./_assignValue":560,"./_copyObject":585,"./_createAssigner":587,"./_isPrototype":613,"./isArrayLike":649,"./keys":660}],641:[function(e,t,n){function a(e,t){var n=o(e);return t?i(n,t):n}var i=e("./_baseAssign"),o=e("./_baseCreate");t.exports=a},{"./_baseAssign":562,"./_baseCreate":563}],642:[function(e,t,n){function a(e,t){return e===t||e!==e&&t!==t}t.exports=a},{}],643:[function(e,t,n){function a(e,t,n){var a=s(e)?i:o;return n&&l(e,t,n)&&(t=void 0),a(e,r(t,3))}var i=e("./_arrayEvery"),o=e("./_baseEvery"),r=e("./_baseIteratee"),s=e("./isArray"),l=e("./_isIterateeCall");t.exports=a},{"./_arrayEvery":558,"./_baseEvery":565,"./_baseIteratee":575,"./_isIterateeCall":609,"./isArray":648}],644:[function(e,t,n){function a(e,t,n){var a=null==e?void 0:i(e,t);return void 0===a?n:a}var i=e("./_baseGet");t.exports=a},{"./_baseGet":568}],645:[function(e,t,n){function a(e,t){return null!=e&&o(e,t,i)}var i=e("./_baseHasIn"),o=e("./_hasPath");t.exports=a},{"./_baseHasIn":570,"./_hasPath":600}],646:[function(e,t,n){function a(e){return e}t.exports=a},{}],647:[function(e,t,n){function a(e){return i(e)&&s.call(e,"callee")&&(!c.call(e,"callee")||l.call(e)==o)}var i=e("./isArrayLikeObject"),o="[object Arguments]",r=Object.prototype,s=r.hasOwnProperty,l=r.toString,c=r.propertyIsEnumerable;t.exports=a},{"./isArrayLikeObject":650}],648:[function(e,t,n){var a=Array.isArray;t.exports=a},{}],649:[function(e,t,n){function a(e){return null!=e&&r(i(e))&&!o(e)}var i=e("./_getLength"),o=e("./isFunction"),r=e("./isLength");t.exports=a},{"./_getLength":593,"./isFunction":653,"./isLength":654}],650:[function(e,t,n){function a(e){return o(e)&&i(e)}var i=e("./isArrayLike"),o=e("./isObjectLike");t.exports=a},{"./isArrayLike":649,"./isObjectLike":656}],651:[function(e,t,n){var a=e("./_root"),i=e("./stubFalse"),o="object"==typeof n&&n,r=o&&"object"==typeof t&&t,s=r&&r.exports===o,l=s?a.Buffer:void 0,c=l?function(e){return e instanceof l}:i;t.exports=c},{"./_root":628,"./stubFalse":664}],652:[function(e,t,n){function a(e){if(s(e)&&(r(e)||d(e)||c(e.splice)||o(e)||l(e)))return!e.length;if(u(e)){var t=i(e);if(t==p||t==f)return!e.size}for(var n in e)if(g.call(e,n))return!1;return!(v&&h(e).length)}var i=e("./_getTag"),o=e("./isArguments"),r=e("./isArray"),s=e("./isArrayLike"),l=e("./isBuffer"),c=e("./isFunction"),u=e("./isObjectLike"),d=e("./isString"),h=e("./keys"),p="[object Map]",f="[object Set]",m=Object.prototype,g=m.hasOwnProperty,_=m.propertyIsEnumerable,v=!_.call({valueOf:1},"valueOf");t.exports=a},{"./_getTag":598,"./isArguments":647,"./isArray":648,"./isArrayLike":649,"./isBuffer":651,"./isFunction":653,"./isObjectLike":656,"./isString":657,"./keys":660}],653:[function(e,t,n){function a(e){var t=i(e)?l.call(e):"";return t==o||t==r}var i=e("./isObject"),o="[object Function]",r="[object GeneratorFunction]",s=Object.prototype,l=s.toString;t.exports=a},{"./isObject":655}],654:[function(e,t,n){function a(e){return"number"==typeof e&&e>-1&&e%1==0&&i>=e}var i=9007199254740991;t.exports=a},{}],655:[function(e,t,n){function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=a},{}],656:[function(e,t,n){arguments[4][469][0].apply(n,arguments)},{dup:469}],657:[function(e,t,n){function a(e){return"string"==typeof e||!i(e)&&o(e)&&l.call(e)==r}var i=e("./isArray"),o=e("./isObjectLike"),r="[object String]",s=Object.prototype,l=s.toString;t.exports=a},{"./isArray":648,"./isObjectLike":656}],658:[function(e,t,n){function a(e){return"symbol"==typeof e||i(e)&&s.call(e)==o}var i=e("./isObjectLike"),o="[object Symbol]",r=Object.prototype,s=r.toString;t.exports=a},{"./isObjectLike":656}],659:[function(e,t,n){function a(e){return o(e)&&i(e.length)&&!!P[M.call(e)]}var i=e("./isLength"),o=e("./isObjectLike"),r="[object Arguments]",s="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Function]",h="[object Map]",p="[object Number]",f="[object Object]",m="[object RegExp]",g="[object Set]",_="[object String]",v="[object WeakMap]",y="[object ArrayBuffer]",b="[object DataView]",k="[object Float32Array]",w="[object Float64Array]",x="[object Int8Array]",C="[object Int16Array]",L="[object Int32Array]",I="[object Uint8Array]",T="[object Uint8ClampedArray]",S="[object Uint16Array]",E="[object Uint32Array]",P={};P[k]=P[w]=P[x]=P[C]=P[L]=P[I]=P[T]=P[S]=P[E]=!0,P[r]=P[s]=P[y]=P[l]=P[b]=P[c]=P[u]=P[d]=P[h]=P[p]=P[f]=P[m]=P[g]=P[_]=P[v]=!1;var j=Object.prototype,M=j.toString;t.exports=a},{"./isLength":654,"./isObjectLike":656}],660:[function(e,t,n){function a(e){var t=c(e);if(!t&&!s(e))return o(e);var n=r(e),a=!!n,u=n||[],d=u.length;for(var h in e)!i(e,h)||a&&("length"==h||l(h,d))||t&&"constructor"==h||u.push(h);return u}var i=e("./_baseHas"),o=e("./_baseKeys"),r=e("./_indexKeys"),s=e("./isArrayLike"),l=e("./_isIndex"),c=e("./_isPrototype");t.exports=a},{"./_baseHas":569,"./_baseKeys":576,"./_indexKeys":606,"./_isIndex":608,"./_isPrototype":613,"./isArrayLike":649}],661:[function(e,t,n){function a(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(o);var n=function(){var a=arguments,i=t?t.apply(this,a):a[0],o=n.cache;if(o.has(i))return o.get(i);var r=e.apply(this,a);return n.cache=o.set(i,r),r};return n.cache=new(a.Cache||i),n}var i=e("./_MapCache"),o="Expected a function";a.Cache=i,t.exports=a},{"./_MapCache":549}],662:[function(e,t,n){function a(e){return r(e)?i(s(e)):o(e)}var i=e("./_baseProperty"),o=e("./_basePropertyDeep"),r=e("./_isKey"),s=e("./_toKey");t.exports=a},{"./_baseProperty":579,"./_basePropertyDeep":580,"./_isKey":610,"./_toKey":638}],663:[function(e,t,n){function a(e,t){if("function"!=typeof e)throw new TypeError(r);return t=s(void 0===t?e.length-1:o(t),0),function(){for(var n=arguments,a=-1,o=s(n.length-t,0),r=Array(o);++a<o;)r[a]=n[t+a];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,n[0],r);case 2:return e.call(this,n[0],n[1],r)}var l=Array(t+1);for(a=-1;++a<t;)l[a]=n[a];return l[t]=r,i(e,this,l)}}var i=e("./_apply"),o=e("./toInteger"),r="Expected a function",s=Math.max;t.exports=a},{"./_apply":557,"./toInteger":666}],664:[function(e,t,n){function a(){return!1}t.exports=a},{}],665:[function(e,t,n){function a(e){if(!e)return 0===e?e:0;if(e=i(e),e===o||e===-o){var t=0>e?-1:1;return t*r}return e===e?e:0}var i=e("./toNumber"),o=1/0,r=1.7976931348623157e308;t.exports=a},{"./toNumber":667}],666:[function(e,t,n){function a(e){var t=i(e),n=t%1;return t===t?n?t-n:t:0}var i=e("./toFinite");t.exports=a},{"./toFinite":665}],667:[function(e,t,n){function a(e){if("number"==typeof e)return e;if(r(e))return s;if(o(e)){var t=i(e.valueOf)?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(l,"");var n=u.test(e);return n||d.test(e)?h(e.slice(2),n?2:8):c.test(e)?s:+e}var i=e("./isFunction"),o=e("./isObject"),r=e("./isSymbol"),s=NaN,l=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,d=/^0o[0-7]+$/i,h=parseInt;t.exports=a},{"./isFunction":653,"./isObject":655,"./isSymbol":658}],668:[function(e,t,n){function a(e){return null==e?"":i(e)}var i=e("./_baseToString");t.exports=a},{"./_baseToString":582}],669:[function(e,t,n){"use strict";t.exports={"branch.get":"/branch/get","media.get":"/branch/get","branch.search":"/branch/search","geo.search":"/geo/search","geo.get":"/geo/get","station.search":"/station/search","station.get":"/station/get","route.search":"/route/search","route.get":"/route/get","marker.search":"/marker/search",awards:"/awards/api/",discount:"/discounts","photo.count":"/photo/count","reviews.get":"/reviews/get",carrouting:"/carrouting/",busrouting:"/ctx/",layers:"/layers/"}},{}],670:[function(e,t,n){"use strict";var a=e("./apiList"),i=e("lodash");t.exports=i.reduce(a,function(e,t,n){var a=[{pattern:t,fixtures:function(){return null},get:function(){return null},post:function(){return null}}];return i.set(e,n,a)},{})},{"./apiList":669,lodash:"lodash"}],671:[function(e,t,n){"use strict";var a=e("lodash"),i=e("./unavailable"),o=e("./emptyResponse"),r={unavailable:i,empty:o};t.exports=function(e){return a.get(r,e)}},{"./emptyResponse":670,"./unavailable":672,lodash:"lodash"}],672:[function(e,t,n){"use strict";var a=e("./apiList"),i=e("lodash");t.exports=i.reduce(a,function(e,t,n){var a=[{pattern:t,fixtures:function(){return null},get:function(){throw Error(500)},post:function(){throw Error(500)}}];return i.set(e,n,a)},{})},{"./apiList":669,lodash:"lodash"}],"/l10n/variants.js":[function(e,t,n){var a=e("lodash"),i=e("slot/config"),o=i["i18n.locales"],r=i["i18n.aliases"];n.getSupportedLocale=function(e){if(a.contains(o,e))return e;if(r[e])return r[e];var t=e.split("_")[0];return"ru"==t.toLowerCase()?"ru_ru":null}},{lodash:"lodash","slot/config":"slot/config"}],"/lib/asyncCSS.js":[function(e,t,n){t.exports=function(e){$("body").append('<link rel="stylesheet" href="'+e+'">')}},{}],"/lib/asyncRequest.js":[function(e,t,n){function a(e){function t(e){return function(){if(!i){var t=e.apply(this,arguments);t&&a.push(t)}}}function n(){i=!0,o.each(a,function(e){e.cancel()})}var a=[],i=!1;return{tasks:o.mapValues(e,t),canceled:n}}var i=e("async"),o=e("lodash");n.parallel=function(e,t){var n=a(e);return i.parallel(n.tasks,t),{cancel:n.canceled}}},{async:383,lodash:"lodash"}],"/lib/authorizationApi.js":[function(e,t,n){var a=e("lodash"),i=e("slot/env"),o=req("lib/request2"),r=req("helpers/string"),s=e("slot/lib/stuff");t.exports=function(t,n,l,c){function u(e,n,i){var r=m["authApi.url"]+e;return n.output="json",n.ip=t,n=f(e,n),o("post",r).withCredentials().type("form").send(n).then(function(e){var t=a.get(e,"body.meta.code"),o=a.get(e,"body.result");if(200==t)i(null,o?o:!0,200);else{if(401!=t){var s=a.get(e,"body.meta.error",o||{});p(r,n,{responseCode:t,response:s})}i(a.get(e,"body.meta",{}),null,t)}})["catch"](function(e){p(r,n,e),i(e)})}function d(e,t,n){t=t||{};var i=m["authApi20.url"];switch(e){case"users/recovery":var s={client_id:"online",locale:t.locale};i+=e+"?"+r.stringifyParams(s),t=a.pick(t,"email","grant_type");break;case"password_change":i+="l/"+t.token+"/password_change",t=a.pick(t,"password");break;default:i+=e}return o("post",i).type("form").send(t).then(function(e){var t=a.isEmpty(e.body)||200==e.statusCode;t?n(!1,!0):(a.has(e,"body.error")&&(e.body.type=e.body.error),n(e.body||{}))})["catch"](function(e){a.has(e,"response.body.error")&&(e.response.body.type=e.response.body.error);var o=a.get(e,"response.body",{status:e.status});404!=e.status&&p(i,t,a.cloneDeep(o)),n(o)})}function h(e,t,n){var i=["users/recovery","password_change"];a.contains(i,e)?d(e,t,n):u(e,t,n)}function p(e,t,i){i=i||{};var o=a.clone(t);o.password&&o.password.length&&(o.password="*HIDDEN*"),i.url=e,i.query=o,n("Authorization component error",i)}function f(e,t){var n=["login","confirmRegistration","logout","logoutAll","trustedLogin","social/login"];return a.contains(n,e)&&(t.source=m.isGrym?"desktop":"online",t.bss_user=l),t}n=n||req("lib/sendError");var m=c||e("slot/config");return{register:function(e,t,n){var i={};return a.extend(i,{email:e,password:t}),h("register",i,n)},confirmRegistration:function(e,t,n,i){var o={};return a.extend(o,{email:e,registration_token:t}),n!==!1&&a.extend(o,{"captcha[response]":n.response,"captcha[challenge]":n.challenge}),h("confirmRegistration",o,i)},generateRegistrationToken:function(e,t){var n={};return a.extend(n,{email:e}),h("generateRegistrationToken",n,t)},login:function(e,t,n,i){var o={};return a.extend(o,{email:e,password:t}),n!==!1&&a.extend(o,{"captcha[response]":n.response,"captcha[challenge]":n.challenge}),h("login",o,i)},logout:function(e,t){var n={};return a.extend(n,{session_token:e}),h("logout",n,t)},logoutAll:function(e,t){var n={};return a.extend(n,{session_token:e}),h("logoutAll",n,t)},getSessionInfo:function(e,t){var n={};return e&&a.extend(n,{session_token:e}),h("getSessionInfo",n,t)},changePassword:function(e,t,n,i,o,r){var s={};return a.extend(s,{session_token:e,current_password:t,new_password:n,reset_sessions:i===!1?"false":"true"}),o!==!1&&a.extend(s,{"captcha[response]":o.response,"captcha[challenge]":o.challenge}),h("changePassword",s,r)},recoveryChange:function(e,t,n,i){var o={};return a.extend(o,{email:e,token:t,password:n}),h("password_change",o,i)},recovery:function(e,t,n){var i={};return a.extend(i,{grant_type:"email",email:e,locale:t}),h("users/recovery",i,n)},socialLogin:function(e,t){if(!i.isServer){var n={provider:e,return_url:t};n=f("social/login",n);var a=s.state2uri(n,!0),o=window.open(m["authApi.socialUrl"]+"?"+a,"_blank");o.focus()}}}}},{lodash:"lodash","slot/config":"slot/config","slot/env":"slot/env","slot/lib/stuff":496}],"/lib/dumbModule.js":[function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){function t(e){return function(){return l.get(e,u,o)}}function n(e){return"function"==typeof i?i(e):i}var i=arguments.length<=1||void 0===arguments[1]?d:arguments[1],o=void 0,r=l.curry(function(t,n){o=s({},o,n),e.rerenderDumb(t)});return function(e){var i;return o=l.get(e,u,o||n(e)),s({},e,(i={},a(i,u,o),a(i,"getState",t(e)),a(i,"setState",r(e)),i))}}function o(e,t){return s({},e,t)}function r(e,t,n){return n}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=e("lodash"),c=e("./lazyModule"),u="__DUMB_LOCAL_STATE-DONT_TOUCH_IT__",d={};n.localState=i,n.setDefaultProps=l.curry(o),n.checkPropTypes=l.curry(r),n.dumb=function(e){return l.compose(c,e)}},{"./lazyModule":"/lib/lazyModule.js",lodash:"lodash","prop-types":457}],"/lib/eventify.js":[function(e,t,n){var a=e("events").EventEmitter,i=e("lodash");t.exports=function(e,t){return a.call(e),e.off=a.prototype.removeListener,i.extend(e,a.prototype),void 0!==t&&e.setMaxListeners(t),e}},{events:394,lodash:"lodash"}],"/lib/geo/bound.js":[function(e,t,n){function a(e){var t=req("lib/wkt")(),n=r.flatten((t.parseObject(e)||{}).geometry),a={};a.lat=Math.min.apply(this,r.pluck(n,"lat")),a.lon=Math.min.apply(this,r.pluck(n,"lon"));var i={};return i.lat=Math.max.apply(this,r.pluck(n,"lat")),i.lon=Math.max.apply(this,r.pluck(n,"lon")),{sw:a,ne:i}}function i(e,t){var n=a(t),i=n.sw,o=n.ne;return e.lat>=i.lat&&e.lat<=o.lat&&e.lon>=i.lon&&e.lon<=o.lon}function o(e){var t=a(e),n=[t.sw.lon,t.ne.lat].join(" "),i=[t.ne.lon,t.ne.lat].join(" "),o=[t.ne.lon,t.sw.lat].join(" "),r=[t.sw.lon,t.sw.lat].join(" ");return"POLYGON(("+[n,i,o,r,n].join(",")+"))"}var r=e("lodash");t.exports.getBound=a,t.exports.pointInBound=i,t.exports.getWktBound=o},{lodash:"lodash"}],"/lib/geo/lonlat.js":[function(e,t,n){function a(e,t,n){if(!(this instanceof a))return a.parse.apply(this,arguments);if(void 0!=n&&(this.is3D=!0),isNaN(e)||isNaN(t)||this.is3D&&isNaN(n))throw Error("Invalid LonLat object: ("+e+", "+t+", "+n+")");this.lon=+e,this.lat=+t,this.is3D&&(this.alt=+n)}function i(e,t){return+parseFloat(e).toFixed(t)}var o=e("lodash");a.parse=function(e,t,n){return e instanceof a?e:o.isArray(e)&&"object"!=typeof e[0]?new a(e[0],e[1],e[2]):void 0===e||null===e?e:"object"==typeof e&&"lat"in e?new a("lng"in e?e.lng:e.lon,e.lat,e.alt):void 0===t||null===t?null:new a(e,t,n)},a.prototype={equals:function(e,t){if(!e)return!1;e=a(e);var n=[Math.abs(this.lat-e.lat),Math.abs(this.lon-e.lon)];this.is3D&&n.push(Math.abs(this.alt-e.alt));var i=Math.max.apply(this,n);return(void 0===t?1e-9:t)>=i&&this.is3D==e.is3D},toArray:function(){return o.compact([this.lon,this.lat,this.alt])},join:function(e){return e=void 0===e||null===e?",":e,this.toArray().join(e)},toLatLng:function(){return L&&L.LatLng?new L.LatLng(this.lat,this.lon):[this.lat,this.lon]},toPlainObject:function(){var e={lon:this.lon,lat:this.lat};return this.is3D&&(e.alt=this.alt),e},extend:function(e){return e.lon=this.lon,e.lat=this.lat,this.is3D&&(e.alt=this.alt),e},clone:function(){return new a(this.lon,this.lat,this.alt)},add:function(e,t,n){return this.lon+=e,this.lat+=t,this.is3D&&(this.alt+=n),this},subtract:function(e,t){return this.add(-e,-t),this},toFixed:function(e){e=e||6;var t=i(this.lon,e),n=i(this.lat,e),o=this.is3D?i(this.alt,e):void 0;return new a(t,n,o)}},t.exports=a},{lodash:"lodash"}],"/lib/hashmultikey.js":[function(e,t,n){function a(e,t){this.storage=t||{},this.concator=e||"[[Ꝏ]]",this.keyMap={}}function i(e){var t=e.split(this.concator);this.keyMap=r.omit(this.keyMap,t)}function o(e){var t=e.join(this.concator);r.each(e,function(e){this.keyMap[e]=t},this)}var r=e("lodash");a.prototype.set=function(e,t){r.isArray(e)||(e=[e]),r.isEmpty(e)||(r.each(e,this.remove,this),o.call(this,e),this.storage[e.join(this.concator)]=t)},a.prototype.addKeyInKeyset=function(e,t,n){if(r.isArray(e)||(e=[e]),!r.isEmpty(e)&&t){var a=this.get(e);n?(this.remove(e),this.set(t,a)):(e.push(t),this.set(e,a))}},a.prototype.get=function(e){r.isArray(e)||(e=[e]);var t,n=r.keys(this.storage);return r.each(n,function(n){r.isEmpty(r.intersection(n.split(this.concator),e))||(t=this.storage[n])},this),t},a.prototype.remove=function(e){var t,n=this.keyMap[e];return void 0!==n&&(t=this.storage[n],delete this.storage[n],i.call(this,n)),t},a.prototype.getAllKeys=function(){var e=r.map(r.keys(this.storage),function(e){return e.split(this.concator)},this);return r.flatten(e)},a.prototype.hasSavedKey=function(e){r.isArray(e)||(e=[e]);var t=r.intersection(this.getAllKeys(),e);return!r.isEmpty(t)},a.prototype.clear=function(){this.storage={},this.keyMap={}},t.exports=a},{lodash:"lodash"}],"/lib/hashmultivalue.js":[function(e,t,n){function a(){this.hash={}}var i=e("lodash");a.prototype.add=function(e,t){e in this.hash||(this.hash[e]=[]),this.hash[e].push(t)},a.prototype.remove=function(e){this.hash[e]=[]},a.prototype.each=function(e,t,n){i.each(this.hash[e],t,n)},a.prototype.rejectSome=function(e){return i.some(this.hash,function(t,n){var a=i.reject(t,e);return a.length!=t.length?(a.length?this.hash[n]=a:delete this.hash[n],!0):!1},this)},a.prototype.get=function(e){return this.hash[e]},a.prototype.has=function(e,t){var n=e in this.hash&&this.hash[e].length;return void 0===t?n:i.contains(this.hash[e],t)},a.prototype.getLast=function(e){return i.last(this.hash[e])},a.prototype.clear=function(){this.hash={}},t.exports=a},{lodash:"lodash"}],"/lib/l10nExtractor.js":[function(e,t,n){function a(t){t=t||[];var n=s.first(t);if(n)try{return"./"==n.substr(0,2)?e(n):req(n)}catch(i){return t.shift(),a(t)}return{}}function i(t,n){n=n.toUpperCase();var i=t+"_"+n;s.each(["supplemental/likelySubtags","supplemental/currencyData","main/"+t+"/numbers","main/"+t+"/delimiters","main/"+t+"/currencies"],function(t){l.load(e("cldr-data/"+t+".json"))});var o=new l(i),r=o.main("numbers/decimalFormats-numberSystem-latn/standard")||"",c=o.main("numbers/symbols-numberSystem-latn/decimal"),u=o.get("supplemental/currencyData/region/"+n),d=u&&s.last(u)||{},h=s.first(s.keys(d))||"",p=o.main("numbers/currencies/"+h).symbol,f=o.main("numbers/currencyFormats-numberSystem-latn/standard")||"",m=f,g=RegExp("["+c+"]0*").exec(f);
if(g[0]){for(var _=c,v=0;v<g[0].length-1;v++)_+="#";m=m.replace(g[0],_)}var y={quotationStart:"«",quotationEnd:"»"},b=s.pick(o.main("delimiters")||y,"quotationStart","quotationEnd"),k={time:{weekFirstDayOffset:1,"short":"HH:mm",is12h:!1,dashboard:"HH:mm, dddd, D MMMM",zone:"Z"},currency:{id:h,symbol:p,standard:f,"short":m},number:{standard:r,"short":r},address:{order:"straight"},string:b},w=a(["l10n/"+i+"/formats.js","l10n/"+t+"/formats.js"]),x=a(["l10n/country/"+n.toLowerCase()+"/formats.js"]);for(var C in k)k.hasOwnProperty(C)&&(k[C]=s.extend({},k[C],w[C],x[C]));return k}function o(){var e=d(c);if(!e)throw Error("Default settings are not compatible with JSON schema. Fix settings file, or update schema.\n"+JSON.stringify(d.errors,void 0,4))}function r(e){h(),e=e.toLowerCase();var t=a(["l10n/country/"+e+"/settings.js"]),n=s.merge({},c,t,function(e,t){return s.isArray(t)?t:void 0});if(d(n))return n;throw Error("Settings for locale "+e+" are not compatible with JSON schema. Fix settings file, or update schema.\n"+JSON.stringify(d.errors,void 0,4))}var s=e("lodash"),l=e("cldrjs"),c=req("l10n/country/settings.js"),u=e("is-my-json-valid"),d=u(req("l10n/country/settings.schema.js")),h=s.once(o);n.getSettings=r,n.getFormats=i},{cldrjs:427,"is-my-json-valid":449,lodash:"lodash"}],"/lib/lazyModule.js":[function(e,t,n){"use strict";t.exports=function(e){var t={init:function(n){Object.assign(t,e(n))}};return t}},{}],"/lib/mailer.js":[function(e,t,n){function a(e){var t='<?xml version="1.0" encoding="utf-8" ?>';return t+='<LetterSendRequest EmailFromName="'+e.fromName+'" EmailFrom="'+e.from+'" Subject="'+e.subject+'" Text="'+e.text+'" Name="'+e.mailName+'" IsAutoSend="'+e.autoSend+'" >',t+="<Recipients>",i.each(e.to,function(e){t+='<Recipient EmailTo="'+e.email+'" />'}),t+="</Recipients>",t+="</LetterSendRequest>"}var i=e("lodash"),o=e("slot/env"),r=e("slot/config"),s=req("lib/request2"),l=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,c="./logger",u=e(c),d=r["mailer.url"],h=r["mailer.key"];t.exports={send:function(e){function t(t){-1!==t.text.indexOf("<success>1</success>")?(e.callback(!0,t.text),r["mailer.logSuccess"]&&u.info("Succesfully send email to "+e.email,{options:e,xml:c,response:t.text})):(u.error("Error send email to "+e.email,{options:e,xml:c,response:t.text}),e.callback(!1,t.text))}function n(t){u.error("Error send email to "+e.email,{options:e,xml:c,error:t}),e.callback(!1,t)}if(!o.isServer)throw Error("Mailer component must be used on server only");if(!e)return!1;if(i.defaults(e,{subject:"2GIS Online",from:r.getCountryParam("mailer.replay",r.defaultCountry),fromName:"2GIS",text:"",autoSend:!0,mailName:"OnlineUserRegistred",callback:function(){}}),!e.to)return e.callback(!1),!1;if("string"==typeof e.to&&(e.to=[{email:e.to,name:""}]),i.each(e.to,function(t,n){return l.test(t.email)?void(t.name||(t.name="")):void e.to.splice(n,1)}),0===e.to.length)return e.callback(!1),!1;var c=a(e);return s("post",d+"&key="+h).set("Content-Type","text/xml").send(c).then(t)["catch"](n)}}},{lodash:"lodash","slot/config":"slot/config","slot/env":"slot/env"}],"/lib/markerDataManager.js":[function(e,t,n){function a(e,t,n){if(!e||!e.point)return null;var a={};return i.each(o,function(n,i){var o=n(e,t);o&&(a[i]=o)}),n&&i.extend(a,n),a}var i=e("lodash"),o={id:function(e){return e.id},lon:function(e){return e.point.lon},lat:function(e){return e.point.lat},building_id:function(e){return e.address&&e.address.building_id},branch_id:function(e){return e.id},is_advertising:function(e,t){return"recovery"==t||!!e.ads},name_ex:function(e){var t=e.name_ex;return t||(t={brand:e.name}),t},stop_factors:function(e){return e.context&&e.context.stop_factors},recovery:function(e,t){return"recovery"==t}};t.exports={makeByList:function(e,t,n){return i.compact(i.map(e,function(e){return a(e,t,n)}))},extendMarkers:function(e,t){return i.map(e,function(e){return i.extend(e,t)})}}},{lodash:"lodash"}],"/lib/offlineApi/callbackify.js":[function(e,t,n){function a(e,t,n){"use strict";return function(){var a,i=[].slice.call(arguments);"function"==typeof i[i.length-1]&&(a=i.pop());var o,r=e[n],s=e[t],l=function(e){if(o==e||void 0===o||null===o){r.disconnect(l);var t=void 0===o||null===o?0:1,n=[].slice.call(arguments,t);a&&a.apply(this,n)}};return r.connect(l),o=s.apply(e,i)}}t.exports=a},{}],"/lib/offlineApi/database.js":[function(e,t,n){var a=e("./callbackify");n.attach=function(e){"use strict";n.resolveObjectData=a(e,"resolveObjectData","resolveObjectDataDone"),n.resolveReference=a(e,"resolveReference","resolveReferenceDone"),n.getObjectMarkerPosition=e?e.getObjectMarkerPosition:function(){return null}},n.detach=function(){"use strict"}},{"./callbackify":"/lib/offlineApi/callbackify.js","slot/env":"slot/env"}],"/lib/offlineApi/directoryModule.js":[function(e,t,n){var a=e("./callbackify"),i=req("lib/eventify");n.attach=function(e){"use strict";n.searchByQuery=a(e,"searchByQuery","searchDone"),n.searchByObject=a(e,"searchByObject","searchDone"),n.searchByObjects=a(e,"searchByObjects","searchDone"),n.cancelSearch=e.cancelSearch,n.resolveObjectData=a(e,"resolveDirectoryObjectData","resolveDirectoryObjectDataDone"),n.suggest=a(e,"suggest","suggestDone"),n.cancelSuggest=e.cancelSuggest,n.searchBySuggest=a(e,"searchBySuggest","searchDone"),n.analyze=a(e,"analyze","analyzeDone"),n.cancelAnalyze=e.cancelAnalyze,n.filter=a(e,"filter","filterDone"),n.findAdvertisers=e.findAdvertisers,n.cancelFilter=e.cancelFilter},n.detach=function(){"use strict";n.cancelSuggest=null,n.cancelSearch=null,n.emit("detach")},i(n)},{"./callbackify":"/lib/offlineApi/callbackify.js","slot/env":"slot/env"}],"/lib/offlineApi/dynamicGeometry.js":[function(e,t,n){var a;n.attach=function(e){a=e,n.hide=a?a.hide:null,n.show=a?a.show:null},n.detach=function(){}},{}],"/lib/offlineApi/integrate.js":[function(e,t,n){var a=e("./directoryModule"),i=e("./database"),o=e("./markerManager"),r=e("./mapObjectsHoverHandler"),s=e("./mapMovement"),l=e("./mapSelection"),c=e("./dynamicGeometry");t.exports=function(e){var t=e.requireComponent("regionManager");e.registry("offlineApi").bound||(t.on("dispose region",function(){a.detach(),i.detach(),o.detach(),r.detach(),s.detach(),c.detach(),l.detach()}),t.onInit(function(t,n){t.id!=e.config.universeId&&(s.attach(n.resolve("mapMovementControl")),a.attach(n.resolve("directoryModule")),i.attach(n.resolve("regionDatabase")),o.attach(n.resolve("mainMapMarkerManager")),r.attach(n.resolve("mainMapObjectsHoverHandler")),c.attach(n.resolve("dynamicGeometryManager")),l.attach(n.resolve("mapSelectionControl")))}),e.registry("offlineApi").bound=!0)}},{"./database":"/lib/offlineApi/database.js","./directoryModule":"/lib/offlineApi/directoryModule.js","./dynamicGeometry":"/lib/offlineApi/dynamicGeometry.js","./mapMovement":"/lib/offlineApi/mapMovement.js","./mapObjectsHoverHandler":"/lib/offlineApi/mapObjectsHoverHandler.js","./mapSelection":"/lib/offlineApi/mapSelection.js","./markerManager":"/lib/offlineApi/markerManager.js"}],"/lib/offlineApi/mapMovement.js":[function(e,t,n){var a=e("./callbackify");n.attach=function(e){n.moveToObjects=e?a(e,"moveToObjects","movementFinished"):null,n.zoomOutToObjects=e?a(e,"zoomOutToObjects","movementFinished"):null,n.jumpToDefaultPosition=e?e.jumpToDefaultPosition:null},n.detach=function(){}},{"./callbackify":"/lib/offlineApi/callbackify.js"}],"/lib/offlineApi/mapObjectsHoverHandler.js":[function(e,t,n){var a;n.attach=function(e){a=e,n.mapObjectHoverEnter=e?e.mapObjectHoverEnter:null,n.mapObjectHoverLeave=e?e.mapObjectHoverLeave:null},n.detach=function(){}},{}],"/lib/offlineApi/mapSelection.js":[function(e,t,n){var a;n.attach=function(e){a=e,n.resetSelection=a?a.resetSelection:null,n.setSelection=a?a.setSelection:null},n.detach=function(){}},{}],"/lib/offlineApi/markerManager.js":[function(e,t,n){function a(e,t){function n(){var n={},a=l.strings();i.each(a,function(e){n[e]=[]});for(var o=0,r=t.length;r>o;o++){var c=t[o].id,d=u[c];if(d){for(var h,p=0,f=s.length;f>p;p++){var m=s[p];if(m&d){h=l.asString(m);break}}if(!h){var g=Math.floor(Math.log(d)/Math.log(2)),_=1<<g;h=l.asString(_)}h&&n[h].push({id:c})}}i.forOwn(n,function(t,n){"hidden"==n?e.resetHiddenMarkers(t):e.resetMarkerStateGroup(n,t)})}function a(e,a,i){var o=l.asInt(a);i=i||t,i="string"==typeof i?[i]:i;for(var r=0,s=i.length;s>r;r++){var c=i[r].id||i[r];u[c]=u[c]||0,e?u[c]|=o:u[c]&=~o}n(t)}for(var o={},r=0,c=t.length;c>r;r++)o[t[r].id]=1;e.hasObjectId=function(e){return e in o};var u={};e.addState=i.partial(a,!0),e.removeState=i.partial(a,!1),e.toggleState=a}var i=e("lodash"),o=req("lib/stringFlags"),r=e("./callbackify"),s=[],l=new o;n.attach=function(e){var t=r(e,"createMarkerGroup","createMarkerGroupDone");n.createMarkerGroup=function(n,i,o,r){var s=[].slice.call(arguments);r=s.pop();var l=function(e){a(e,n),r(e)};return s.push(l),t.apply(e,s)},n.setStatesPriority=function(e){l.add(e),s=i.map(e,l.asInt,l)}},n.detach=function(){}},{"./callbackify":"/lib/offlineApi/callbackify.js",lodash:"lodash"}],"/lib/offlineStorage/offlineStorage.js":[function(e,t,n){function a(e,t){var n=e.city&&e.city.id,a=g.universeId,i=DGOfflineAPI.activeRegionContext,o=i.resolve("regionHeader");if(o.id&&n!=o.id)return void t({city:{id:o.id}});if(n==a)return void t(e);var r=[];if(e&&e.panels){var s=u.reduce(e.panels,function(e,t){return t.id&&e.push({id:t.id,type:"panel"}),e},[]);r=u.union(r,s)}n&&o.id==n&&(d.attach(i.resolve("regionDatabase")),d.resolveObjectData&&d.resolveObjectData(r,"full",function(n){u.each(r,function(t){var a=u.findWhere(n,{id:t.id});a||"panel"==t.type&&(e.panels=u.reject(e.panels,function(e){return e.id==t.id}))}),t(e)}))}function i(e){c||(e=e||{},c=e.storage||h.get("localStorage"),u.each(m,function(e){c[e]||(c[e]=JSON.stringify({}))}))}function o(e,t,n){if(t=t||p,n){var a=JSON.parse(c[t]||"{}");a[n]=e,c[t]=JSON.stringify(a)}else c[t]=JSON.stringify(e)}function r(e,t){e=e||p;var n=JSON.parse(c[e]||"{}");return t?n[t]:n}function s(){return c[f]}function l(e){c[f]=e}var c,u=e("lodash"),d=req("lib/offlineApi/database"),h=req("lib/storageWrapper/storageWrapper"),p="positions",f="url",m=[p,f],g=e("slot/config");t.exports=function(e){return i(e),{getUrl:s,setUrl:l,prepareState:a,get:r,set:o}}},{lodash:"lodash","slot/config":"slot/config"}],"/lib/partialString.js":[function(e,t,n){function a(e){var t;for(this.str=e,this.partials=[];t=o.exec(e);){var n={match:t[0],prefix:t[1],name:t[2],value:t[3],index:t.index,length:t[0].length};this.partials.push(n)}}function i(e){return new a(e)}var o=/%(\w+)?\{(\w+)\s+([^}]+)\}/g;a.prototype.replace=function(e,t){return this.str=this.str.replace(e.match,t),this},a.prototype.p=function(e){return void 0===e||null===e?this.partials:this.partials[e]},a.prototype.toString=function(){return this.str},t.exports=i},{}],"/lib/readFileLazy.js":[function(e,t,n){function a(e){return o[e]||(o[e]=i.readFileSync(e)),o[e]}var i=e("fs"),o={};t.exports=a},{fs:385}],"/lib/request2.js":[function(e,t,n){"use strict";function a(e){return e.timeout(h.isClient?p.clientNetworkTimeout:p.networkTimeout),"undefined"==typeof window&&p["server.referer"]&&e.set("Referer",p["server.referer"]),e}function i(e){var t=void 0;return e.on("request",function(){t=(new Date).getTime()}),e.on("end",function(){var n=(new Date).getTime(),a=n-t;a>v&&e.url!=p["log.url"]&&f("Slow query",{duration:a,url:e.url,data:s(e.url)})}),e}function o(e){return"undefined"!=typeof window&&(e.on("request",function(){window.TestHandles=window.TestHandles||{},window.TestHandles.XHRActive=window.TestHandles.XHRActive||[],window.TestHandles.XHRActive.push(e.url)}),e.on("end",function(){d.some(window.TestHandles.XHRActive,function(t,n){return e.url==t?(window.TestHandles.XHRActive.splice(n,1),!0):!1})})),e}function r(e){"undefined"!=typeof window&&e.on("request",function(){window.TestHandles.apilog.sign("request",{url:e.url,data:s(e.url)})})}function s(e){return m(e,!0).query}function l(){y&&(y.unset(),y=null)}function c(t){e.cache&&delete e.cache[e.resolve("superagent")];var n=e("superagent");t&&(y=u(t,n)),_=e("superagent-promise")(n,g)}function u(t,n){var a=e("../spec/mock/api")(t);return l(),d.isArray(a)?e("superagent-mock")(n,a):null}var d=e("lodash"),h=e("slot/env"),p=e("slot/config"),f=e("./sendError"),m=e("url").parse,g=e("bluebird"),_=e("superagent-promise")(e("superagent"),g);t.exports=function(e,t){return _(e,t).use(a).use(i).use(r).use(o)};var v=p["log.slowQuery"];e("../lib/requestAnalysis");var y=void 0;t.exports.mockSuperagentIfNeed=c,"undefined"!=typeof window&&(window.TestHandles=window.TestHandles||{},window.TestHandles.mockApi=c,window.TestHandles.unMockApi=l)},{"../lib/requestAnalysis":"/lib/requestAnalysis.js","../spec/mock/api":671,"./sendError":"/lib/sendError.js",bluebird:384,lodash:"lodash","slot/config":"slot/config","slot/env":"slot/env",superagent:518,"superagent-mock":511,"superagent-promise":517,url:419}],"/lib/requestAnalysis.js":[function(e,t,n){var a=e("lodash"),i=!1,o=[],r={enabled:i,requests:o,sign:function(){this.enabled===!0&&this.requests.push(a.toArray(arguments))},clear:function(){this.requests=[]}};t.exports=r,"undefined"!=typeof window&&(window.TestHandles=window.TestHandles||{},window.TestHandles.apilog=window.TestHandles.apilog||r,$.cookie("_log_requests")&&(window.TestHandles.apilog.enabled=!0))},{lodash:"lodash"}],"/lib/resolvingQueue.js":[function(e,t,n){function a(){this.q=[]}var i=e("slot/lib/defer"),o={};a.prototype.enqueue=function(){var e=i();return this.q.push(e),e},a.prototype.dequeue=function(){if(this.q.length){var e=this.q.shift();this.q.length?e.reject():e.resolve()}},t.exports=function(e){return o[e]||(o[e]=new a),o[e]}},{"slot/lib/defer":489}],"/lib/sendError.js":[function(e,t,n){var a=e("slot/env"),i=e("slot/config");t.exports=function(t,n,o){var r=e("./request2");if(t=(a.isServer?"Server":"Client")+" error: "+t,!a.isServer){var s=i["log.url"];if(t=="Client error: AJAX request error - "+s)return null;i.isGrym&&(n.isGrym=1,n.date=new Date+"");try{n=JSON.stringify(n)}catch(l){n=null}return r("post",s).accept("text/plain").send({title:t,error:n}).end(function(e,t){"function"==typeof o&&o(!e&&t.ok?t.text:t&&t.text||e.message||"loggerError")})}var c="./logger",u=e(c);return u.error(t,n),o&&o(),null}},{"./request2":"/lib/request2.js","slot/config":"slot/config","slot/env":"slot/env"}],"/lib/storage/circularBufferQueue.js":[function(e,t,n){t.exports={enqueue:function(e){var t=+this.storage[this.readIndexKey],n=+this.storage[this.writeIndexKey];this.storage[this.name+"_"+n]=JSON.stringify(e),this.storage[this.writeIndexKey]=(n+1)%this.size,(0>t||n==t)&&(this.storage[this.readIndexKey]=(t+1)%this.size)},dequeue:function(){var e=+this.storage[this.readIndexKey],t=this.name+"_"+e,n=this.storage[t];return n?(n=JSON.parse(n),delete this.storage[t],this.storage[this.readIndexKey]=(e+1)%this.size,this.storage[this.readIndexKey]==this.storage[this.writeIndexKey]&&(this.storage[this.readIndexKey]=-1,this.storage[this.writeIndexKey]=0),n):null}}},{}],"/lib/storage/storage.js":[function(e,t,n){function a(e,t){t=t||{},this.storage=t.storage||{},this.name=e,this.readIndexKey=e+"_read",this.writeIndexKey=e+"_write",this.size=t.size&&t.size<r?t.size:s,this.storage[this.readIndexKey]=this.storage[this.readIndexKey]||-1,this.storage[this.writeIndexKey]=this.storage[this.writeIndexKey]||0}var i=e("lodash"),o=e("./circularBufferQueue"),r=3900,s=200,l={};i.extend(a.prototype,o),t.exports=function(e,t){return l[e]||(l[e]=new a(e,t)),l[e]},t.exports.clear=function(e){delete l[e]}},{"./circularBufferQueue":"/lib/storage/circularBufferQueue.js",lodash:"lodash"}],"/lib/storageWrapper/storageWrapper.js":[function(e,t,n){function a(){return"undefined"!=typeof window?window:null}function i(){var e={};return Object.defineProperty(e,"key",{value:function(e){return Object.keys(this)[e]}}),Object.defineProperty(e,"getItem",{value:function(e){return this[e]}}),Object.defineProperty(e,"setItem",{value:function(e,t){this[e]=t}}),Object.defineProperty(e,"removeItem",{value:function(e){delete this[e]}}),Object.defineProperty(e,"length",{get:function(){return Object.keys(this).length}}),Object.defineProperty(e,"clear",{value:function(){s.each(this,function(e){delete this[e]})}}),Object.create(e)}function o(e){try{if(e.setItem("testStorageItem",1),1!=e.getItem("testStorageItem"))throw Error();return e.removeItem("testStorageItem"),!0}catch(t){return!1}}function r(e){return l&&o(l[e])?l[e]:i()}var s=e("lodash"),l=a();t.exports={get:r},t.exports._reset=function(e){l=e||a()}},{lodash:"lodash"}],"/lib/stringFlags.js":[function(e,t,n){function a(e){this.flags={},this.bits={},this.nextFlag=1,e&&this.add(e)}var i=e("lodash");a.prototype.add=function(e){"string"==typeof e&&(e=[e]);for(var t=0,n=e.length;n>t;t++){var a=e[t];this.flags[a]=this.nextFlag,this.bits[this.nextFlag]=a,this.nextFlag<<=1}},a.prototype.asInt=function(e){return this.flags[e]},a.prototype.asString=function(e){return this.bits[e]},a.prototype.strings=function(){return i.keys(this.flags)},t.exports=a},{lodash:"lodash"}],"/lib/webApi.js":[function(e,t,n){function a(t,n,a,r){"function"==typeof a&&(r=a,a={});var s=e("slot/config"),l=s["WebApi.catalogUrl"],c=req("lib/request2");i.isObject(n)&&(n=i(n.valueOf()).omit("includeDeleted").defaults({key:s["WebApi.key"]||"1"}).value()),a=i.defaults(a,{url:t.startsWith("http")?t:l+t,data:n,withCredentials:s["WebApi.sendCookies"],timeout:s[o.isClient?"WebApi.clientTimeout":"WebApi.timeout"]});var u=c(a.method||"get",a.url);return a.withCredentials&&(u=u.withCredentials()),a.timeout&&(u=u.timeout(a.timeout)),u=i.contains(["get","head"],(a.method||"get").toLowerCase())?u.query(a.data):u.send(a.data),u.then(function(e){var t=e.body,n=t.response||t.meta||{};200==n.code?r(null,t.result,n):r(t,null,n)})["catch"](function(e){r(e||{code:500},null,{})})}var i=e("lodash"),o=e("slot/env");t.exports=a},{lodash:"lodash","slot/config":"slot/config","slot/env":"slot/env"}],"/lib/whatsNewLoader.js":[function(e,t,n){"use strict";function a(e,t,n){var a=i.chunk(e,n),o=a[t-1];return o||[]}var i=e("lodash"),o=e("slot/env");t.exports=function(e){var t=void 0,n=void 0;try{t=o.requirePrivate("/whatsNew/"+e.countryCode+"/general/news_"+e.language+".json")}catch(r){t={}}try{n=o.requirePrivate("/whatsNew/"+e.countryCode+"/"+e.regionCode+"/news_"+e.language+".json")}catch(r){n={}}var s=i.union(t.news,n.news),l=i.sortByOrder(s,"date","desc"),c=+e.pageNumber,u=+e.limit,d=Math.ceil(l.length/u),h={totalGeneralNewsCount:i.size(t.news),totalRegionNewsCount:i.size(n.news),pageNumber:c,totalPageCount:d,limit:u,newsItems:a(l,c,u)};return h}},{lodash:"lodash","slot/env":"slot/env"}],"/lib/wkt.js":[function(e,t,n){var a=req("lib/geo/lonlat"),i=e("lodash");t.exports=function(e){function t(t,n){e(t,{wkt:n})}function n(e){return e=(""+e).replace(/, /g,","),e=e.replace(" (","(")}function o(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}function r(e){var n;return f(e)?(n=/([A-Z]+).+/.exec(e),n[1]):(t("Can't get type of geometry",e),null)}function s(e,t){return e>=-180&&180>=e&&t>=-90&&90>=t}function l(e){return e=n(e),/^POINT\([-?\d|\.]+ [-?\d|\.]+\)/.test(e)}function c(e){return e=n(e),/^MULTIPOINT\(([-?\d|\.]+ [-?\d|\.]+,)*([-?\d|\.]+ [-?\d|\.]+)\)$/.test(e)}function u(e){return e=n(e),/^LINESTRING\(([-?\d|\.]+ [-?\d|\.]+,)*[-?\d|\.]+ [-?\d|\.]+\)/.test(e)}function d(e){return e=n(e),/^POLYGON\((\(([-?\d|\.]+ [-?\d|\.]+,)+[-?\d|\.]+ [-?\d|\.]+\),?)+\)/.test(e)}function h(e){return e=n(e),/^MULTILINESTRING\((\(([-?\d|\.]+ [-?\d|\.]+,)+[-?\d|\.]+ [-?\d|\.]+\),?)+\)/.test(e)}function p(e){return e=n(e),/^MULTIPOLYGON\((\((\(([-?\d|\.]+\s+[-?\d|\.]+,?){2,}\),?)*\),?)+\)/.test(e)}function f(e){var t,a=["POINT","MULTIPOINT","LINESTRING","POLYGON","MULTILINESTRING","MULTIPOLYGON"];return e=n(e),t=/^([A-Z]+).+/.exec(e),o(t[1],a)}function m(e){return-1!=e.indexOf("EMPTY")}function g(e,t){if(m(e))return!1;switch(t){case"Point":return l(e);case"Multipoint":return c(e);case"Polyline":return u(e);case"Polygon":return d(e);case"Multipolyline":return h(e);case"Multipolygon":return p(e);default:return!1}}function _(e,n){t("Geometry is not valid or empty",n);var a={lat:null,lon:null},i={Point:a,Multipoint:[a],Polyline:[a],Polygon:[[a]],Multipolyline:[[a]],Multipolygon:[[a]]};return i[e]}return e=e||req("lib/sendError"),{parseObject:function(e){var t,n,a={POINT:"Point",MULTIPOINT:"Points",LINESTRING:"Polyline",POLYGON:"Polygon",MULTILINESTRING:"Polyline",MULTIPOLYGON:"Polygon"};switch(t=r(e)){case"POINT":n=this.parsePoint(e);break;case"MULTIPOINT":n=this.parseMultipoint(e);break;case"LINESTRING":n=this.parsePolyline(e);break;case"POLYGON":n=this.parsePolygon(e);break;case"MULTILINESTRING":n=this.parseMultipolyline(e);break;case"MULTIPOLYGON":n=this.parseMultipolygon(e)}return{type:a[t],geometry:n}},parsePoint:function(e){var t,o;return e?i.isObject(e)&&i.has(e,"lat")&&i.has(e,"lon")?e:g(e,"Point")?(e=n(e),t=/^POINT\((.*)\)/.exec(e),o=t[1].split(" "),s(parseFloat(o[0]),parseFloat(o[1]))?a(o):_("Point",e)):_("Point",e):void 0},parseMultipoint:function(e){var t,i,o,r=[];if(!g(e,"Multipoint"))return _("Multipoint",e);e=n(e),t=/^MULTIPOINT\((.*)\)/.exec(e),i=t[1].split(",");for(var l=0;l<i.length;l++){if(o=i[l].split(" "),!s(parseFloat(o[0]),parseFloat(o[1])))return _("Multipoint",e);r.push(a(o))}return r},parsePolyline:function(e){var t,i,o,r=[];if(!g(e,"Polyline"))return _("Polyline",e);e=n(e),t=/^LINESTRING\((.*)\)/.exec(e),i=t[1].split(",");for(var l=0;l<i.length;l++){if(o=i[l].split(" "),!s(parseFloat(o[0]),parseFloat(o[1])))return _("Polyline",e);r.push(a(o))}return r},parsePolygon:function(e){var t,i,o,r,l,c=[],u=[];if(!g(e,"Polygon"))return _("Polygon",e);for(e=n(e),t=/^POLYGON\((.*)\)/.exec(e),l=/\((.*?)\)/g;null!==(r=l.exec(t[1]));){c=[],i=r[1].split(",");for(var d=0;d<i.length;d++){if(o=i[d].split(" "),!s(parseFloat(o[0]),parseFloat(o[1])))return _("Polygon",e);c.push(a(o))}u.push(c)}return u},parseMultipolyline:function(e){var t,i,o,r,l=[],c=[];if(!g(e,"Multipolyline"))return _("Multipolyline",e);e=n(e),t=/^MULTILINESTRING\((.*)\)/.exec(e);for(var u=/\((.*?)\)/g;null!==(i=u.exec(t[1]));){o=i[1].split(","),l=[];for(var d=0;d<o.length;d++){if(r=o[d].split(" "),!s(parseFloat(r[0]),parseFloat(r[1])))return _("Multipolyline",e);l.push(a(r))}c.push(l)}return c},parseMultipolygon:function(e){var t,i,o,r,l,c=[],u=[];if(!g(e,"Multipolygon")){if(!(e.indexOf("),(")>-1))return _("Multipolygon",e);e=e.split("),(")[0]+")))"}e=n(e),t=/^MULTIPOLYGON\((.*)\)/.exec(e);for(var d=/\((\(.*?\))\)/g;null!==(i=d.exec(t[1]));)for(var h=/\((.*?)\)/g;null!==(r=h.exec(i[1]));){o=r[1].split(","),c=[];for(var p=0;p<o.length;p++){if(l=o[p].split(" "),!s(parseFloat(l[0]),parseFloat(l[1])))return _("Multipolygon",e);c.push(a(l))}u.push(c)}return u}}}},{lodash:"lodash"}],"/modules/apartmentsList/apartmentsList.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/geo"),o=req("helpers/link"),r=req("helpers/request");t.exports=function(e,t,n,s){function l(){return{id:v.id,point:s.parseObject(v.geometry.centroid).geometry,type:"apartment",name:v.address}}function c(n){function i(t,i){if(t)return n(t);var o=i.property_count,s=e.config["apartments.types"],l=a.compact(a.map(s,function(e){var t=a.get(o,e,0);return t>0?{id:e,number:t}:null}));return l.length?n(null,{geometry:i.geometry,address:i.address,availableTypes:l}):r.emitError(500,"no apartments types available",n)}var o=y.house,s=y.orgId;s?t.geoHaveApartmentsByOrg(o,s,i):t.geoHaveApartments(o,i)}function u(e,n,i){var o=e+a.values(n).join(".");return x[o]?void i(null,x[o]):(y.orgId&&(n.org_id=y.orgId),void t.getList(e,n,function(e,t){return e?i(e):(x[o]=t,i(null,t))}))}function d(e,t){var n=t.split(".");return a.extend(e||{},{property_type:n[0],service_type:n[1]})}function h(e,t){var n=d({page:w.current},k.id);u(e,n,function(e,n){t(e,n)})}function p(t){e.mod({busy:!0});var n=d({page:1},t);u(v.id,n,function(n,i){n||(k=a.find(v.available,{id:t}),v.active=k,v.items=i.items,w.current=1,w.total=g(i.total_count),e.rerender(),e.mod({busy:!1}))})}function f(e){return i.getApartments(e,n)}function m(){a.each(e.element("listItem"),function(t){var n=$(t).data("index");if(!v.items[n].shown&&$(t).seeable(.5)){v.items[n].shown=!0;var a=o.getDomainFromUrl($(t).attr("href"));e.notify("apartmentViewed",a,"apartmentsList")}})}function g(e){return Math.ceil(e/w.pageSize)}function _(){e.mod({busy:!0}),w.current++,h(v.id,function(t,n){if(!t){var a=n.items;e.element("list").append(e.renderPartial("list",f({items:a}))),v.items=v.items.concat(a),e.mod({busy:!1})}})}var v,y,b,k,w={current:1,pageSize:e.config["apartments.pageSize"]},x={},C=a.throttle(function(t){if(w.current<w.total){var n=t.scrollTop+t.clientHeight>t.scrollHeight-1e3;n&&!e.mod().busy&&_()}m()},100);return{init:function(e,t){y=e,c(function(n,i){return n?void t(n):(b=i.availableTypes,k=a.first(b),void h(e.house,function(n,o){if(n)return void t(n);var r=a.reduce(b,function(e,t){return e+t.number},0);v={items:o.items,id:e.house,geometry:i.geometry,address:i.address,available:b,active:k,total_count:r},w.total=g(o.total_count),t(n)}))})},viewContext:function(){return f(v)},bind:function(){e.element("scroller").baron()},elements:{scroller:{scroll:function(){C(this)}},listItem:{click:function(){var t=o.getDomainFromUrl($(this).attr("href"));e.notify("apartmentClicked",t,"apartmentsList")}},wizardLink:{click:function(){p($(this).data("type"))}}},"interface":{tabType:"firms",tabCount:function(){return v.total_count},drawOnMap:function(){e.notify("mapDataReady",l())},clearMap:function(){e.notify("clearMap",l())},activateContent:function(){m()}}}},t.exports._args=["slot","$apartmentsApi","$i18n","$wkt"]},{lodash:"lodash"}],"/modules/apartmentsMapList/apartmentsMapList.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t){function n(e){i=a.map(e,function(e){return{id:e.building_id,firmId:o,building_id:e.building_id,geometry:e.geometry,name:e.address}})}var i=[],o="";return{init:function(e,a){o=e.firmId,t.getCoverage(e.firmId,function(e,t){n(t),a()})},"interface":{drawOnMap:function(){e.notify("mapDataReady",{result:{data:i},mode:"apartment"})},clearMap:function(){e.notify("clearMap")}}}},t.exports._args=["slot","$apartmentsApi"]},{lodash:"lodash"}],"/modules/apps/apps.js":[function(e,t,n){var a=req("helpers/link");t.exports=function(t,n,i,o){function r(){var e=t.ua();return e&&e.os&&e.os.name?e.os.name.replace(/[^A-Za-z0-9_-]/g,"").toLowerCase():null}function s(){var e=r(),n=l.desktop&&"windows"==e,a=l.mobile.length,i={};!t.isGrym&&e&&(i[e]=!0,t.mod(i)),t.mod({compact:l.mobile.length<4}),(n&&2>a||!n&&3>a)&&t.mod({shortRow:!0})}var l,c,u=e("./viewModel.js"),d={init:function(){c=n.getRegion(),l=u(t.config,{region:c,i18n:o,isGrym:t.isGrym,isTablet:t.ua().isTablet}),s()},viewContext:function(){return l},changeState:function(e){if(e.city){var n=a.getPcLink(e.city.id),i=t.block().find("._desktop a");i.attr("href",n)}},elements:{itemLink:{click:function(){var e=$(this).data("platform"),t={desktop:"Desktop",android:"Android",ios:"iOS",windowsphone:"WP",blackberry:"Blackberry"},n=t[e];"desktop"==e?(i.trackEvent("google",["Dashboard","PC","Click"]),i.trackEvent("yandex",["DASHBOARD_DESKTOP"])):n&&(i.trackEvent("google",["Dashboard","Mobile",n]),i.trackEvent("yandex",["DASHBOARD_MOBILE_"+n.toUpperCase()]))}}},"interface":{}};return d},t.exports._args=["slot","$regionManager","$analytics","$i18n"]},{"./viewModel.js":158}],"/modules/articleCard/articleCard.js":[function(e,t,n){var a=req("helpers/firm"),i=e("lodash");t.exports=function(t,n,o,r,s,l){var c,u,d,h=e("./viewModel.js"),p={tag:"article",init:function(e,t){var n=e&&e.id;s.firms.profile(n,function(e,n){return e||i.isEmpty(n)?void t(e||{}):(c=n,d=h(n,{region:r.getRegion(),i18n:l}),void t())})},bind:function(){u=t.element("scroller").baron().fix(),t.setTimeout(function(){u.update()},100)},viewContext:function(){return d},elements:{closeButton:{click:function(){t.notify("closeButtonClicked")}},minimizeButton:{click:function(){t.notify("minimizeViewer")}},bugReport:{click:function(){n.showFeedback({feedbackType:"dataError",filialId:c.id,filialName:c.name,filialAddress:c.address_name}),n.push()}},scroller:{},container:{},scrollBar:{},header:{},footer:{}},"interface":{updateScroll:function(){u.update()},activateContent:function(){p["interface"].deactivatedOnce||(o.trackEvent("google",["Cards","Article"]),o.trackEvent("yandex",["CARD_ARTICLE"]))},setSeoParams:function(){if(!c)return!1;var e=a.prepareForSeo(c,r);return e.linkType="firmMoreInfo",t.notifySeoParams(e),!0}}};return p},t.exports._args=["slot","$appState","$analytics","$regionManager","$dgApi","$i18n"]},{"./viewModel.js":159,lodash:"lodash"}],"/modules/auth/auth.js":[function(e,t,n){var a=e("lodash"),i=e("slot/lib/loadScript"),o={login:{email:"",password:""},signup:{email:"",password:""}};t.exports=function(t,n,r,s,l){function c(e,n){if(t.isServer)return"";var a=o[e];return a&&a[n]}function u(e,n,a){t.isServer||(o[e]||(o[e]={}),o[e][n]=a)}function d(){var e=t.element("formFieldEmail"),n=t.element("formFieldPassword");e.length>0&&n.length>0&&(u(E.type,"email",e.val()),u(E.type,"password",n.val()))}function h(){a.each(o,function(e){a.each(e,function(t,n){e[n]=""})})}function p(e){P||(P=t.init("errorMsg")),$(e.elemWithError).mod({error:!0}),t.broadcast("errorMsg:show",{module:P,elemWithError:e.elemWithError,msg:e.msg,fullWidth:e.fullWidth})}function f(e,t){"captchaIsRequired"!=e.error.type&&"invalidCaptcha"!=e.error.type||(A=!0,_(),t())}function m(e){"signup"==E.type&&t.notify("signupSocial",e)}function g(){t.mod({validation:!1}),delete E.title,delete E.text,delete E.authConfirmCode}function _(){Recaptcha.create(t.config["authApi.recaptchaPublicKey"],"auth__formCaptcha",{theme:"custom"})}function v(){t.element("formCaptchaFieldInput").val(""),Recaptcha.destroy()}function y(){return!t.element("formSubmitBtn").hasClass("_disabled")}function b(e,a,i,o){n.confirmRegistration(e,a,i,function(e,n){e?(o(!0),t.notify("loggedIn",e),g()):o(!1,n)})}function k(e,n){var a;n||(n=t.element("popup"),a=!0),p({elemWithError:n,msg:e,fullWidth:a})}function w(e){return e?a.find(["email","password"],function(t){return-1!=e.indexOf(t)})||"":""}function x(e){if(e.type&&a.contains(["paramIsIncorrect","paramIsRequired"],e.type)){var t=w(e.message),n="unavailable";switch(t){case"email":n="signup"==E.type?e.type+"EmailSignup":e.type+"Email";break;case"password":n=e.type+"Password"}return R[n]}if(e.type&&"ValidationFailed"==e.type){var i=a.find(e.error_fields,function(e){return e&&e.field&&e.error});return n=i.error+a.capitalize(i.field),R[n]}return e.type?R[e.type]:R[e.message]}function C(e){e=e||{authType:"login"},d(),t.dispose(),r.closeAuth(),r.showAuth(e),r.push()}function L(){M.changeHandler(A,E.type)}function I(e){var t=e.element.val();t!=e.prevValue&&(e.prevValue=t,e.element.trigger("change"))}function T(e,t){return e?"success":t&&t.error?"error":"unavailable"}function S(e,n,a){g(),E.type="response",E.title=e,E.text=n,E.showRetry=a,t.rerender()}var E,P,j=e("./viewModel.js"),M=e("./utils/formValidators.js")(t),A=!1,D={AlreadyConfirmed:l._t("Авторизуйтесь, пожалуйста."),emailIsAlreadyConfirmedText:l._t("Авторизуйтесь, пожалуйста."),successChangeTitle:l._t("Пароль изменен"),successChangeText:l._t("Теперь вы можете авторизоваться с новым паролем."),ServiceUnavailable:l._t("Что-то пошло не так. Попробуйте перейти по ссылке ещё раз или отправьте новое письмо с подтверждением."),InvalidToken:l._t("Что-то пошло не так. Попробуйте перейти по ссылке ещё раз или отправьте новое письмо с подтверждением.")},R={unauthorized:l._t("Неверный логин или пароль."),captchaIsRequired:l._t("Заполните капчу."),captchaIsInvalid:l._t("Неверно заполнена капча."),unconfirmed:l._t("Пожалуйста, подтвердите свою электронную почту."),AlreadyConfirmed:l._t("Электронная почта уже подтверждена."),emailIsAlreadyConfirmed:l._t("Электронная почта уже подтверждена."),emailIsAlreadyRegistered:l._t("Электронная почта уже зарегистрирована."),
unavailable:l._t("Сервис авторизации недоступен."),regUnavailable:l._t("Сервис регистрации недоступен."),licenseIsRequired:l._t("Вы должны принять лицензионное соглашение."),ValueIsNotValidEmail:l._ht("Этот адрес электронной почты нам не знаком. Попробуйте другой адрес или %{Link зарегистрируйте} этот.",{link:{"class":"errorMsg__link","data-action":"signup"}}),paramIsIncorrectEmail:l._ht("Этот адрес электронной почты нам не знаком. Попробуйте другой адрес или %{Link зарегистрируйте} этот.",{link:{"class":"errorMsg__link","data-action":"signup"}}),EntityDoesNotExist:l._ht("Этот адрес электронной почты нам не знаком. Попробуйте другой адрес или %{Link зарегистрируйте} этот.",{link:{"class":"errorMsg__link","data-action":"signup"}}),ValueIsTooShortPassword:l._t("Пароль должен быть не менее 6 символов."),paramIsIncorrectPassword:l._t("Пароль должен быть не менее 6 символов."),paramIsRequiredEmail:l._t("Укажите адрес электронной почты."),paramIsRequiredPassword:l._t("Придумайте пароль."),unknownMethod:l._t("Что-то пошло не так. Пожалуйста, повторите попытку."),sessionIsNotFound:l._t("Что-то пошло не так. Пожалуйста, повторите попытку."),emailNotFound:l._t("Электронная почта не зарегистрирована."),emailNotSend:l._t("Ошибка отправки почты."),uncaught:l._t("Что-то пошло не так. Пожалуйста, повторите попытку."),InvalidToken:l._t("Неверный код подтверждения."),invalidToken:l._t("Неверный код подтверждения."),invalidCaptcha:l._t("Неверно заполнена капча."),serviceUnavailable:l._t("Что-то пошло не так. Пожалуйста, повторите попытку."),ServiceUnavailable:l._t("Ошибка")},N={init:function(e,o){function s(){o(),t.notify("inited")}E=a.clone(e),E.ua=t.ua(),E.type=E.authType,E.email=E.email||c(E.type,"email"),E.password=E.password||c(E.type,"password"),t.mod({mode:E.type}),t.notify("opened",E.type),t.isClient?("error"==E.type&&S(R[E.errorType],D[E.errorType]),n.isAuthorized()&&"responseConfirm"!=E.type&&(t.element("formFieldConfirm").trigger("click"),r.replace()),i(t.config.recaptchaUrl,t.ifAlive(function(){"responseConfirm"==E.type&&E.authConfirmCode?b(E.email,E.authConfirmCode,!1,function(e,t){var n=T(e,t);switch(n){case"error":"emailIsAlreadyConfirmed"==t.error.type?S(R[t.error.type],D.emailIsAlreadyConfirmedText):S(R.ServiceUnavailable,D.ServiceUnavailable,!0)}s()}):s()}))):s()},clientInit:function(){var e=t.element("formFieldInput").get(0);e&&!t.ua().isPhone&&e.focus(),L();var n=[{element:t.element("formFieldEmail"),prevValue:""},{element:t.element("formFieldPassword"),prevValue:""},{element:t.element("formFieldClone"),prevValue:""}];t.setInterval(function(){a.each(n,I)},1e3),r.get("routeTab")&&t.mod({routeTab:!!r.get("routeTab")})},viewContext:function(){return j(E,s.getRegion(),l)},elements:{overlay:{click:function(){t.notify("close")}},signup:{click:function(){C({authType:"signup"})}},license:{click:function(e){e.stopPropagation()}},recovery:{click:function(){C({authType:"recovery"})}},signin:{click:function(){C({authType:"login"})}},popupClose:{click:function(){h(),t.notify("popupClose"),r.get("auth")?t.notify("close"):t.dispose()}},formLoginSubmitBtn:{click:function(){var e=t.element("formFieldEmail").val(),i=t.element("formFieldPassword").val(),o=!1;return y()?(A&&(o={response:Recaptcha.get_response(),challenge:Recaptcha.get_challenge()},A=!1,v()),t.mod({loading:!0}),n.login(e,i,o,function(n,i){t.mod({loading:!1});var o=T(n,i);switch(t.notify("login",o),o){case"success":t.notify("loggedIn",n),t.getLoyaltyState()?(g(),a.extend(E,{loyalty:!0,type:"loyalty"}),t.rerender()):(r.closeAuth(),r.push());break;case"error":if(f(i,L),"unconfirmed"==i.error.type)return void C({authType:"confirm",email:e});var s=w(i.error.message),l="password"==s?t.element("formFieldPassword"):t.element("formFieldEmail");k(x(i.error),l.parent());break;case"unavailable":k(R.unavailable)}}),null):!1}},formSignupSubmitBtn:{click:function(){var e=t.element("formFieldEmail").val(),a=t.element("formFieldPassword").val(),i=!!t.element("formFieldLicense").is(":checked");return y()?i?(t.mod({loading:!0}),n.register(e,a,function(n,a){t.mod({loading:!1});var i=T(n,a);switch(t.notify("signup",i),i){case"success":C({authType:"confirm",email:e});break;case"error":var o=w(a.error.message),r="password"==o?t.element("formFieldPassword"):t.element("formFieldEmail");k(x(a.error),r.parent());break;case"unavailable":k(R.regUnavailable)}}),null):(t.notify("signup","failValidation"),k(R.licenseIsRequired,t.element("formFieldLabel")),null):!1}},formConfirmSubmitBtn:{click:function(){var e=t.element("formFieldConfirm").val(),n=!1;return y()?(A&&(n={response:Recaptcha.get_response(),challenge:Recaptcha.get_challenge()},A=!1,v()),t.mod({loading:!0}),b(E.email,e,n,function(e,n){t.mod({loading:!1});var a=T(e,n);switch(t.notify("confirm",a),a){case"error":f(n,L),k(x(n.error));break;case"unavailable":k(R.unavailable)}}),null):!1}},formSubmitRetry:{click:function(){t.mod({loading:!0}),n.generateRegistrationToken(E.email,function(e,n){t.mod({loading:!1});var a=T(e,n);switch(a){case"success":C({authType:"confirm",email:E.email});break;case"error":k(x(n.error));break;case"unavailable":k(R.unavailable)}})}},formRecoverySubmitBtn:{click:function(){var e=t.element("formFieldEmail").val();return y()?(t.notify("recoveryBegin"),t.mod({loading:!0}),n.recovery(e,function(n,a){t.mod({loading:!1});var i=T(n,a);switch(t.notify("recovery"),i){case"success":S(l._t("Восстановление пароля"),l._pt("Восстановление пароля","На %1 было выслано письмо. Воспользуйтесь ссылкой в письме, чтобы задать новый пароль.",e));break;case"error":k(x(a.error),t.element("formFieldEmail").parent());break;case"unavailable":k(R.unavailable)}}),null):!1}},formChangeSubmitBtn:{click:function(){var e=t.element("formFieldPassword").val(),a=t.element("formFieldConfirm").val();return y()?(t.notify("recoveryEnd"),t.mod({loading:!0}),n.recoveryChange(E.email,a,e,function(e,n){t.mod({loading:!1});var a=T(e,n);switch(t.notify("change"),a){case"success":S(D.successChangeTitle,D.successChangeText);break;case"error":f(n,L),k(x(n.error));break;case"unavailable":k(R.unavailable)}}),null):!1}},formFieldInput:{keyup:L,change:L},formFieldCheckbox:{change:L},formFieldEmail:{},formFieldPassword:{},formFieldClone:{},formFieldLicense:{},formCaptchaRefresh:{click:function(){return Recaptcha.reload(),!1}},formCaptchaFieldInput:{keyup:L,change:L},formFieldConfirm:{},formSubmitBtn:{},formFieldShowpassword:{change:function(){var e=this.checked,n=e?t.element("formFieldPassword"):t.element("formFieldClone"),a=e?t.element("formFieldClone"):t.element("formFieldPassword");t.mod({showPasswords:e}),a.val(n.val()),a[0].focus()}},popupSocialVkontakte:{click:function(){m("vkontakte"),n.socialLogin("vkontakte"),r.closeAuth(),r.push()}},popupSocialFacebook:{click:function(){m("facebook"),n.socialLogin("facebook"),r.closeAuth(),r.push()}},popupSocialTwitter:{click:function(){m("twitter"),n.socialLogin("twitter"),r.closeAuth(),r.push()}},form:{submit:function(){return!1}},scroller:{},container:{}},"interface":{close:function(){h(),t.dispose()},setError:p}};return N},t.exports._args=["slot","$authorization","$appState","$regionManager","$i18n"]},{"./utils/formValidators.js":160,"./viewModel.js":161,lodash:"lodash","slot/lib/loadScript":"slot/lib/loadScript"}],"/modules/autoResults/autoResults.js":[function(e,t,n){"use strict";var a=e("lodash"),i=e("./viewModel"),o=req("helpers/request"),r=req("helpers/routeSearch");t.exports=function(e,t,n,s,l,c,u,d){function h(t){var n=0;t&&(n=e.element("routeHeader").index(t)),e.mod({route:n}),e.element("routeHeader").each(function(e){var t=e==n;$(this).parent().mod({begin:n>=e?e:null,end:n>=e?null:e,current:t,down:e>n})})}function p(e,t){return g=t,_=e&&e.paths&&e.paths[t]&&e.waypoints?{items:a.cloneDeep([e.paths[t]]),waypoints:a.cloneDeep(e.waypoints),searchType:"car"==v.rsType?"auto":v.rsType}:{},e}function f(e){var t=a.first(e.waypoints),n=a.last(e.waypoints);return t.platform_name=a.get(v,"from.text"),n.platform_name=a.get(v,"to.text"),t.isKeypoint=n.isKeypoint=!0,e}function m(n){return n&&n.paths&&e.mod({count:n.paths.length}),i(n,{region:t.getRegion().name,i18n:c,type:v&&v.rsType})}var g,_,v,y,b=d.ppna(),k={init:function(t,n){return t=a.cloneDeep(t),c.getSettings().traffic.isLeftHand&&e.mod({traffic:"leftHand"}),r.checkInitData(t)?(v=t||{},e.notify("resetSuggestError"),void b.findRoutes(t.from,t.to,t.waypoints,t.rsType).then(f).then(a.partialRight(p,0)).then(function(e){y=e}).then(function(){return n()})["catch"](function(e){n(e,null)})):void o.emitError(404,"bad init data",{params:t},n)},clientInit:function(){h(),e.notify("clientInit",y)},bind:function(){e.mod({free:e.ua().isIE(8)}),e.element("scroller").baron()},viewContext:function(){return m(y)},elements:{block:{resize:function(){var t=0;e.element("routeHeader").each(function(){t+=this.offsetHeight}),e.ua().isIE(8)||e.mod({free:t>e.block().height()-100})}},point:{click:function(){var t=$(this).data("type");t&&e.notify("focusPoint",v[t],t)},mouseenter:function(){var t=$(this).data("type");"from"==t&&e.notify("segmentHover",{isHover:!0,segmentId:0,stepId:0})},mouseleave:function(){var t=$(this).data("type");"from"==t&&e.notify("segmentHover",{segmentId:0,stepId:0})}},scroller:{},step:{click:function(){var n=$(this).data("routeId"),i=$(this).data("legId"),o=$(this).data("stepId"),r=b.getGeometryForFocusByIndexes(n,i,o);if(r){var s=t.getRegion();e.notify("focusPoint",r,{zoom:a.get(s,"zoom_level.max")})}}},routeHeader:{click:function(){h(this);var t=$(this).data("routeId");g!=t&&(p(y,t),e.notify("routeClicked",v,_))}}},"interface":{tabType:"rs",drawOnMap:function(){e.notify("mapDataReady",v,_)},clearMap:function(){e.notify("clearMap",v,_)},setSeoParams:function(){return e.notifySeoParams({type:"routeResults"}),!0},getPrintData:function(){var t=e.mod().route||0,n=this.viewContext().routes[t];return{analyticsLabel:"RouteSearch_Auto",layout:"full","static":e.renderPartial("print",n),externalPrintParams:{selectedRoute:t,mod:"_far"}}},prepareForPrint:function(t){e.notify("preparedForPrint"),g!==t.selectedRoute&&p(y,t.selectedRoute),v.printAutoRoute=!0,e.notify("routeClicked",v,_)}}};return k},t.exports._args=["slot","$regionManager","$dgApi","$appState","$requestGroups","$i18n","$featureSwitcher","$models"]},{"./viewModel":162,lodash:"lodash"}],"/modules/avatar/avatar.js":[function(e,t,n){"use strict";function a(){return{style:o()}}function i(e){return{size:e.oneOf([20,30,40,80,260]).isRequired,user:e.shape({display_name:e.string,avatar:e.string}).isRequired}}function o(){var e=["#ee8888","#ee8866","#eecc55","#77cc88","#66bbcc","#6699cc","#cc88dd"];return"background: "+e[l.random(e.length-1)]+";"}function r(e){var t=l.get(e,"user.avatar");return{viewAttrs:{"class":"_x"+e.size,style:t?"":e.getState().style},viewContext:function(){var n=e.size,a=e.user;return{size:n,avatar:t,letter:l.get(a,"display_name.0")}}}}function s(e){return l.compose(r,h(e,a),d(i,"avatar"))}var l=e("lodash"),c=req("lib/dumbModule"),u=c.dumb,d=c.checkPropTypes,h=c.localState;t.exports=u(s)},{lodash:"lodash"}],"/modules/award/award.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/request");t.exports=function(t,n,o,r,s,l,c){function u(e){var n=a.find(a.get(_,"data.items"),"name",e),i=t.element("categories");_.groups=a.map(a.get(n,"children.items"),function(e){return{title:e.name,code:e.code,items:e.orgs}}),_.text=n.text,d(_),t.element("mainIntro").text(_.text),i.html(""),a.each(_.groups,function(e){i.append(t.renderPartial("group",e))}),a.each(a.get(t,"modules.awardCard"),function(e){e.bindEvents()})}function d(e){a.each(e.groups,function(e){a.each(a.get(e,"items.items"),function(e){e.voted=a.includes(v,e.id),e.module=h(e)})})}function h(e){return t.init("awardCard",e)}function p(){y&&y.update()}function f(e){e&&s.trackEvent("google",["Awards_2015","Share_Award","facebook"])}function m(e){var i=a.includes(["ae","cl","cz"],b.domain)?b.domain:"ru";return s.trackEvent("google",["Awards_2015","Share_Award",e]),{title:n._t("Открытия года 2015"),desc:n._t("За год в %1 открылись много новых компаний. Мы выбрали самые популярные из них, но кого назовём настоящим открытием года, зависит от вас. Смотрите новые компании %2 и голосуйте за лучших. Победителей назовём 30 декабря.",_.regionPrepositionalName,_.regionGenitiveName),image:t.config["share.image.award2015"][i],callbackFb:f}}function g(e){var n=$(e).mod().social;t.notify("shareClicked",n),s.trackEvent("google",["Awards_2015","Share",n])}var _,v,y,b,k,w=e("./viewModel"),x=o.award({regionId:c.getRegion().id}),C=null;return{init:function(e,n){k=n,x.loadData(r.getAuthorizedUserSync().authorizationToken).then(function(e){return e?e.error?k(e.error):(_=e,v=a.get(_,"user.already_voted")||[],b=c.getRegion()||{},_=w(_,{region:b,openedRubric:l.panels.get("award2015").awardRubricId}),d(_),t.mod({local:b.domain,"final":_.is_final}),t.registry.get("isInit")&&s.trackEvent("google",["Awards_2015","Open","Direct"]),k()):i.emitError(404,"empty api response",k)})["catch"](k)},viewContext:function(){return _},clientInit:function(){},bind:function(){y=t.element("scroller").baron(),r.on("loginComplete",function(){x.loadData(r.getAuthorizedUserSync().authorizationToken).then(function(e){v=a.get(e,"user.already_voted")||[],a.each(t.modules.awardCard,function(e){e["interface"].checkVotedState(v,C)}),v.push(C),_=e,C=null})["catch"](k)})},changeState:function(e){e.panels&&e.panels.added&&p()},"interface":{getShareContent:m,updateScroll:p,resize:p,rerender:function(){t.rerender()},dispose:function(){t.dispose()},setVotedCardId:function(e){C=e}},elements:{rubricsItemLink:{click:function(){if(!$(this).mod().current){var e=$(this).data("rubric");t.element("rubricsItemLink").mod({current:!1}),$(this).mod({current:!0}),u(e),s.trackEvent("google",["Awards_2015","Filters",e]),l.panels.replace(l.panels.get("award2015").panelId,{awardRubricId:e}),l.push()}}},headerSponsorshipLinksItem:{click:function(){s.trackEvent("google",["Awards_2015","Sponsor",$(this).text()])}},footerSocialItem:{click:function(e){e.preventDefault(),g($(this))}}}}},t.exports._args=["slot","$i18n","$models","$authorization","$analytics","$appState","$regionManager"]},{"./viewModel":163,lodash:"lodash"}],"/modules/awardBadge/awardBadge.js":[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e,t){var n=void 0;return{init:function(t){n=a.get(t,"target"),e.mod({direction:a.get(t,"direction")||"right"})},clientInit:function(){t.trackEvent("google",[n,"Awards","Show"])},elements:{block:{mouseenter:function(){t.trackEvent("google",[n,"Awards","Hover"])},click:function(){e.notify("showEvent","Badge","award2015"),t.trackEvent("google",[n,"Awards","Click"])}}}}},t.exports._args=["slot","$analytics"]},{lodash:"lodash"}],"/modules/awardCard/awardCard.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/firm");t.exports=function(e,t,n,o,r,s){var l,c=o.getRegion(),u=r.award({regionId:c.id}),d={init:function(t){l=t,e.mod({hasVotes:l.is_voting_enabled,voted:l.voted,nomination:l.nomination,"final":l["final"]})},viewContext:function(){var e=l.profile,t=a.get(i.getPhotoAlbumCommon(e),"main_photo_url");return t?l.image=t:l.image=l.photo_stub,l.rating=a.get(i.getRating(e),"value"),l},elements:{block:{click:function(){e.notify("eventElemClicked",{id:l.filial_id}),s.trackEvent("google",["Awards_2015","Card_Click",c.name+" "+l.profile.name_ex.primary])}},votes:{click:function(t){if(t.stopPropagation(),!e.mod().voted){var i=n.getAuthorizedUserSync(),o=a.get(i,"authorizationToken"),r=a.get(l,"profile.name_ex.primary"),d=l.id;o&&($(this).attr("data-votes",l.votes+1),e.mod({voted:!0}),u.registerVote(d,o)),e.notify("voted",!!o,r,d),s.trackEvent("google",["Awards_2015","Like",c.name+" "+r])}}},like:{click:function(t){t.stopPropagation();var n=a.get(l,"profile.name_ex.primary");e.notify("like",n),s.trackEvent("google",["Awards_2015","Like_without_votes",c.name+" "+n])}},footerShareWrap:{click:function(t){t.stopPropagation();var n=a.get(l,"profile.name_ex.primary");e.notify("like",n,!0),s.trackEvent("google",["Awards_2015","Card_Footer_Share",c.name+" "+n])}}},"interface":{checkVotedState:function(t,i){var o=l.id,r=a.includes(t,o);if(e.mod({voted:r}),!r&&i==o){var s=n.getAuthorizedUserSync();e.element("votes").first().attr("data-votes",l.votes+1),e.mod({voted:!0}),u.registerVote(l.id,a.get(s,"authorizationToken"))}}}};return d},t.exports._args=["slot","$dgApi","$authorization","$regionManager","$models","$analytics"]},{lodash:"lodash"}],"/modules/awardPopup/awardPopup.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t,n,i,o,r){function s(){n.removeAwardPopup(),n.push(),i.trackEvent("google",["Awards_2015","Share_Close"])}function l(){return window.location.href.replace("/awardPopup","")}var c,u=r.getRegion(),d=[t._gg("Засчитано! Продолжайте!"),t._gg("Отлично! У вас есть вкус."),t._gg("Есть. Но это было ожидаемо!"),t._gg("Хм… странно, но это ваш выбор."),t._gg("Записали. Ещё?"),t._gg("У вас отлично получается!"),t._gg("Ну, а почему бы и нет."),t._gg("Бог вам судья."),t._gg("А вот это было сильно!"),t._gg("Отлично! Видно руку профи!"),t._gg("Дело ваше, конечно."),t._gg("Супер. Не останавливайтесь."),t._gg("Вы набрали отличную скорость."),t._gg("Ещё."),t._gg("Ещё."),t._gg("А вы азартны."),t._gg("Может, себе?"),t._gg("Вскрываемся?"),t._gg("Жмите клавиш снова!"),t._gg("Вы прям марафонец")],h={init:function(t){c=t,e.mod({type:c.type})},viewContext:function(){if(a.includes(["ru","ua","kz","kg"],u.domain)){var t=e.registry.get("awardPopupPhraseCount")||0;e.registry.set("awardPopupPhraseCount",(t+1)%d.length),c.title=d[t]}return c},elements:{socialsItem:{click:function(){var t=$(this).mod().social;"login"==c.type?(e.notify("signupSocial",t),o.socialLogin(t),c.type="voted",e.mod({type:"voted"}),e.rerender(),i.trackEvent("google",["Awards_2015","Auth_Ok",t])):(e.notify("shareClicked",t,l(),null,"awardPopup"),i.trackEvent("google",["Awards_2015","Share_Firm",t]))}},overlay:{click:s},close:{click:s},btn:{click:function(){s(),i.trackEvent("google",["Awards_2015","One_more"])}}},"interface":{dispose:function(){e.dispose()},getShareContent:function(){var n=t._t("Конечно же, новая лучшая компания в своей сфере — %1",c.name),i=t._t("#2ГИС_Открытия"),o=a.includes(["ae","cl","cz"],u.domain)?u.domain:"ru";return{title:n,desc:i,image:e.config["share.image.award2015"][o]}}}};return h},t.exports._args=["slot","$i18n","$appState","$analytics","$authorization","$regionManager"]},{lodash:"lodash"}],"/modules/booklet/booklet.js":[function(e,t,n){var a=req("helpers/request");t.exports=function(e,t,n,i,o,r,s){function l(e){function t(){var t=o.getAuthorizedUserSync();t&&n.setAccessToken(t.authorizationToken),e()}o.isAuthorized()?t():o.startup(t)}var c,u={},d={init:function(t,i){t=t||{};var o=t.bookletId,r={bookletId:o},d={},h={saunas:"bookletSaunas",buildings:"bookletBuildings",net:"bookletProviders"};l(function(){"providers"==o?(d.bookletId=t.bookletId,t.geoid&&(d.geoid=t.geoid),e.init({type:h.net,data:d},function(e,t){u.title=s._gg("Интернет-провайдеры"),c=t,i(e)})):n.getBooklet(r,function(n,o){if(n)return void i(n);if(u=d=o,!d.is_active)return void a.emitError(404,"provider is not active",i);d.bookletId=t.bookletId,d.subpageName=t.subpageName,t.geoid&&(d.geoid=t.geoid);var r=h[d.template_name];e.init(r,d,function(e,t){c=t,i(e)})})})},viewContext:function(){return{activeBooklet:c}},dispose:function(){t.get("luxuryUrl")&&t.del("luxuryUrl")},dispatcher:{"bookletBuildings:bookletEvent":function(t,n){e.notify(t,n)},"bookletHeader:coverPositionChanged":function(t){e.broadcast("bookletEditor:setCoverPosition",t)},"bookletEditor:coverSelected":function(t){e.broadcast("bookletHeader:setCover",t)},"bookletEditor:setCoverPosition":function(t){e.broadcast("bookletHeader:setCoverPosition",t)},"bookletEditor:logoSelected":function(t){e.broadcast("bookletHeader:setLogo",t)},"bookletHeader:save":function(){e.broadcast("bookletEditor:save")},"bookletHeader:cancel":function(){e.broadcast("bookletEditor:cancel")}},"interface":{tabType:"firms",deactivateContent:function(){e.notify("deactivated")},dissolve:function(){e.notify("minimized")},appear:function(){e.stage==e.STAGE_INITED&&e.notify("activated")},drawOnMap:function(){e.broadcast("*:drawOnMap")},clearMap:function(){e.broadcast("*:clearMap")},setSeoParams:function(){return e.broadcast("*:setSeoParams"),!0}}};return d},t.exports._args=["slot","$appState","$bookletApi","$analytics","$authorization","$regionManager","$i18n"]},{}],"/modules/bookletBuildings/bookletBuildings.js":[function(e,t,n){var a=e("lodash"),i=e("moment"),o=req("lib/geo/lonlat"),r=e("bluebird");t.exports=function(t,n,s,l,c,u,d,h,p){function f(){return new r(function(e){return D.makeup?void e():void l.firms.profiles(D.filials_ids,{},function(n,i){if(n)return void e();var o=i.markers[0]||{},r={lon:o.lon||null,lat:o.lat||null},s={markers:i.markers,geo:r,address:null},l=a.uniq(a.pluck(i.data,"address_name"));if(l.length)if(1===l.length)s.address=a.first(l),e(s);else{var c=a.chain(l).map(function(e){return a.first(e.split(","))}).uniq().value();if(1===c.length)s.address=d._gg("ул. %1",a.first(c)),e(s);else{if(t.isGrym){var u=req("lib/offlineApi/database.js"),h=u.getObjectMarkerPosition(o,"full");o.lon=h.lon,o.lat=h.lat}var p={type:"adm_div.district",zoom_level:17},f=t.requireComponent("dgApi","web");f.geo.inPoint(o.lon+","+o.lat,p,function(t,n){var o="district"===a.get(n,"subtype");if(o)s.address=d._gg("%1 район",n.name);else{var r=a.find(a.first(i.data).adm_div,function(e){return a.includes(["city","settlement"],e.type)});s.address=a.get(r,"name")}e(s)})}}else e(s)})})}function m(e){return new r(function(n){p.getList(e,{limit:t.config["apartments.bookletMaxPageSize"],service_type:"sale",property_type:"apartment"},function(e,t){n(t)})})}function g(){N=t.element("baronScroller").baron({bar:".track._booklet .track__bar"}).fix({elements:".bookletBuildings__footerContainer",outside:"_state_fixed",before:"_position_top",after:"_position_bottom",limiter:!1,radius:1,clickable:!1}),t.setTimeout(function(){N.update()},300)}function _(){N&&N.update(),O&&O.update()}function v(e){var n=t.element("baronWrapper").height(),a=t.element("baronWrapper").width(),i=t.element("baronScroller"),o=t.element("header").height();o>=Math.floor(n/2)&&a>740&&t.ua().isDesktop&&e>0&&i.scrollTop(e)}function y(e){if("covers"===e||"logos"===e){if(D.is_owner)return void b();e="about"}k(),A.subpageName=e,t.element("main").html(t.renderPartial(e,A)),E(),t.notify("tabShown",e),"apartments"==e&&Y()}function b(){t.element("editor").mod({state:"visible"}),t.element("main").mod({state:"hidden"})}function k(){t.element("editor").mod({state:"hidden"}),t.element("main").mod({state:"visible"})}function w(){if(u.isAuthorized()){var e=u.getAuthorizedUserSync();n.setAccessToken(e.authorizationToken)}}function x(e,n){var i=t.element("mapLayer"),o=t.config["static.api.url"],r=i.width()>50?i.width():50,s=i.height()>50?i.height():50;return o+="?center="+e.lon+","+e.lat+"&zoom=14&size="+r+","+s,n&&n.length&&(o+="&markers=",a.each(n,function(e,t){o+=0===t?"":"~",o+=e.type+","+e.lon+","+e.lat})),o}function C(e){if(B){var n=D.computed&&D.computed.point,a=D.computed&&D.computed.markers,i=x(n,a);e||t.element("mapLayer").mod({animated:!1}),t.element("mapLayer").css("background-image","url("+i+")").mod({hidden:!1})}}function L(){return-1!==a.indexOf(V,R)}function I(e,n){if(-1==a.indexOf(Z[e],n)){var i={show:"apartmentShown",click:"apartmentClicked"};t.notify(i[e],n),Z[e].push(n)}}function T(){var e=t.element("apartmentLink").filter(":not(._shown)");a.each(e,function(e){e=$(e),e.seeable(.8)&&(e.mod({shown:!0}),I("show",e.data("org")))})}function S(e){var n;e.filterElement.rader({trackActive:e.filterElement.find(".bookletBuildings__filtersRaderTrackActive"),runners:e.filterElement.find(".bookletBuildings__filtersRaderRunner"),points:e.filterElement.find(""),values:[parseInt(e.minMax[0],10),parseInt(e.minMax[1],10)],bumpRadius:24,collapseVals:!0,change:function(a){clearTimeout(n),n=t.setTimeout(function(){z[e.filterName]={min:parseInt(a.minVal,10),max:parseInt(a.maxVal,10)},P()},300)},move:function(t){e.minTextElement.text(parseInt(t.minVal,10)),e.maxTextElement.text(parseInt(t.maxVal,10))}})}function E(){var e=t.element("filterArea");e.length&&S({filterName:"area",minMax:[A.apartmentLayouts.minArea,A.apartmentLayouts.maxArea],filterElement:e,minTextElement:t.element("filterAreaMin"),maxTextElement:t.element("filterAreaMax")});var n=t.element("filterPrice");n.length&&S({filterName:"price",minMax:[A.apartmentLayouts.minPrice,A.apartmentLayouts.maxPrice],filterElement:n,minTextElement:t.element("filterPriceMin"),maxTextElement:t.element("filterPriceMax")})}function P(){z.apartmentTypes=[];var e=t.element("filtersRadio").filter(":checked");if(e.length){var n=e.data("filter");if("apartment"===n){var i=t.element("filtersCheckbox").filter(":checked");a.each(i,function(e){var t=$(e).data("filter");"4plus"===t?(z.apartmentTypes.push("4"),z.apartmentTypes.push("5")):z.apartmentTypes.push(t)})}else z.apartmentTypes.push(n)}var o=[];a.each(A.apartmentLayouts.albums,function(e){a.each(e.photos,function(e){z.apartmentTypes.length&&!a.contains(z.apartmentTypes,e.details.apartmentType)||z.area&&(e.details.totalArea<z.area.min||e.details.totalArea>z.area.max)||z.price&&(e.details.minPrice<z.price.min||e.details.minPrice>z.price.max)||o.push(e)})});var r={photos:o};t.element("albumsList").html(t.renderPartial("album",r))}function j(){for(var e={name:"\\S{3}",phone:"\\d{5}"},n=t.element("requestInput"),a=!0,i=0;i<n.length;i++){var o=$(n[i]),r=o.attr("name");if(e[r]){var s=RegExp(e[r]);if(!s.test(o.val())){a=!1;break}}}t.element("requestSubmit").attr("disabled",!a)}function M(e,n){A=A||n.viewContext(),t.init({type:"bookletHeader",data:A},e)}var A,D,R,N,B,F,O,z={},q=e("./viewModel.js"),U="landingPage"==t.registry.get("appMode"),H=e("./seoHelper.js")(t.location.origin(),d,s,c),G=t.location.uri("/assets/bookletBuildings/default_cover.jpg"),W=t.location.uri("/assets/bookletBuildings/default_logo.png"),V=["infrastructure","about"],Z={show:[],click:[]},Y=a.debounce(t.ifAlive(T),300),K={inheritBssHash:!0,init:function(e,n){D=e,R=D.subpageName||"about",B=D.computed&&D.computed.point,D.configDomain=d._config("defaultAccount"),D.mapsDomain=d._config("mapsDomain"),w(),D.defaultCover=G,D.defaultLogo=W;var o=c&&c.getRegion()&&c.getRegion().time_zone,s=o?o.offset:0;if(D.now=i().add(time.userTimeOffset,"seconds").utcOffset(s).toDate(),D.subpageName||(D.subpageName="about"),e.makeup)return M(n,K);var l=[f()];if(t.config["features.bookletApartments"]&&D.has_apartments){var u=a.get(D,"computed.buildings");l.push(m(u))}return r.all(l).then(function(e){var t=e[0];a.extend(D,t);var i=e[1];i&&(D.apartmentsData=i),M(n,K)})["catch"](function(){M(n,K)}),null},clientInit:function(){D.is_owner?t.init({type:"bookletEditor",data:A},function(){t.element("editor").html(t.renderPartial("editor",A)),y(D.subpageName)}):y(D.subpageName),C(!0),T()},bind:function(){g()},viewContext:function(e){return A=e||q(D,t,d),void 0!==R&&(A.firstRoom=a.find(A.rooms,function(e){return e.id===R})),A},elements:{map:{click:function(){if(!U&&!t.isGrym){var e=$(this),n=e.data("value");if(n){var i=e.data("value").split(","),r=o(D.geo).toFixed().extend({type:"rubricsNear",rubrics:i,typeFit:"focus"});t.bssContext.startNewChain({pr:"infrastructure"}),t.notify("bookletEvent","bookletRubricClicked",r)}else t.notify("bookletEvent","mapClicked",a.pick(D,"bookletId","firm_id","filials_ids","geo"))}}},sendRequest:{click:function(e){e.preventDefault(),t.element("requestFormContainer").html(t.renderPartial("requestForm",A)).mod({visible:!0}),O=t.element("requestClipper").baron({bar:t.element("request").find(".track__bar"),barOnCls:"_scrollbar"})}},request:{click:function(){t.element("requestFormContainer").html("").mod({visible:!1})}},requestClose:{click:function(){t.element("requestFormContainer").html("").mod({visible:!1})}},requestForm:{click:function(e){e.stopPropagation()}},requestInputPhone:{keydown:function(e){var t=e.which||e.keyCode,n=-1!==a.indexOf([46,8,9,27,13,190],t)||65===t&&e.ctrlKey===!0||t>=35&&39>=t;n||(e.shiftKey||(48>t||t>57)&&(96>t||t>105))&&e.preventDefault()}},requestSubmit:{click:function(e){e.preventDefault();var i=t.element("requestForm").serializeArray(),o=a.object(a.pluck(i,"name"),a.pluck(i,"value")),r=t.element("requestForm").find("input, textarea");r.attr("disabled",!0),o.id=D.code,n.sendClaim(o,function(e){return e?void r.attr("disabled",!1):(t.element("requestClipper").html(t.renderPartial("requestSuccess",A)),void h.trackEvent("googleBooklets",["Booklet_Buildings","Request","Sent"]))})}},requestInput:{keyup:function(){j()}},subpage:{click:function(e){e.preventDefault();var t=$(this).data("page");s.changeBookletPage(t),s.push()}},photoAlbum:{click:function(){var e=$(this).data(),n=A[e.section],i=a.findWhere(n.albums,{id:e.album});t.element("page").html(t.renderPartial("album",{photos:i.photos,title:i.title,albumsTemplate:n.albumsTemplate}))}},albumList:{click:function(){var e=$(this).data("partial");t.element("main").html(t.renderPartial(e,A)),"layouts"===e&&E()}},photos:{click:function(e){e.preventDefault();var n=$(this).data(),a={section:n.section,albumId:n.album,photoId:n.photo};t.notify("bookletEvent","photosClicked",a)}},bankItem:{click:function(){U||t.notify("bookletEvent","branchesClick",{bookletId:D.bookletId,id:$(this).data("id"),mute:!0})}},rubric:{click:function(){if(!U&&!t.isGrym){var e=$(this).data("rubrics").split(","),n=o(D.geo).toFixed().extend({type:"rubricsNear",rubrics:e,typeFit:"focus"});t.bssContext.startNewChain({pr:"infrastructure"}),t.notify("bookletEvent","bookletRubricClicked",n)}}},othersItemLink:{click:function(){var e=$(this).data("code");t.notify("bookletButtonClicked",e)}},stop:{click:function(){U||t.notify("bookletEvent","stationSelected",{station_type:"stop",id:$(this).data("id")})}},infrastructureMore:{click:function(){t.element("infrastructureItem").hasClass("_type_social")&&(t.element("infrastructure").mod({collapsed:!1}),t.element("infrastructureMore").mod({collapsed:!0}))}},buyMore:{click:function(){var e=t.element("gridCollapsed"),n=t.element("buyItem").length;n>5&&e.mod({collapsed:!1}),t.element("buyMore").mod({collapsed:!0})}},flatsMore:{click:function(){var e=t.element("flatItem").length;e>4&&t.element("flatItem").mod({collapsed:!1}),t.element("flatsMore").mod({collapsed:!0})}},othersMore:{click:function(){var e=t.element("othersItem").length;e>3&&t.element("othersItem").mod({collapsed:!1}),t.element("othersMore").mod({collapsed:!0})}},feedbackLink:{click:function(){s.showFeedback({feedbackType:"bookletError"}),s.push()}},filtersRadio:{click:function(e){var n=$(this);if(n.is(":disabled"))return void e.preventDefault();var a=t.element("filtersCheckbox"),i=t.element("filtersRadio");return"checked"===n.data("previousValue")?(n.data("previousValue",!1),n.prop("checked",!1),a.prop("checked",!1),a.filter(":not(._filter_disabled)").prop("disabled",!1),void P()):(i.data("previousValue",!1),n.data("previousValue","checked"),"apartment"===n.data("filter")?(a.filter(":not(._filter_disabled)").prop("disabled",!1),a.filter(":enabled").eq(0).prop("checked",!0)):a.prop({disabled:!0,checked:!1}),void P())}},filtersCheckbox:{click:function(e){if($(this).is(":disabled"))return void e.preventDefault();var n=t.element("filtersCheckbox").filter(":checked"),a=t.element("filtersRadio"),i=n.length>0;a.filter("[data-filter=apartment]").prop("checked",i).data("previousValue",i?"checked":!1),P()}},filtersRaderRunner:{mousedown:function(){var e,n=$(this),i=t.element("filtersRaderLimitValue"),o=n.data("label");e=a.filter(i,function(e){return e.getAttribute("data-runner")===o?e:!1}),$(e).mod({highlight:!0}),t.block().one("mouseup mouseleave",function(){$(e).mod({highlight:!1}),n.trigger("mouseup")})}},apartmentsGroupExpandLink:{click:function(){$(this).closest(t.element("apartmentsGroup")).mod({expanded:!0}),N.update(),Y()}},baronScroller:{scroll:Y},apartmentLink:{click:function(){I("click",$(this).data("org"))}}},"interface":{
updateScroll:_,resize:function(){_(),Y(),L()&&(clearTimeout(F),F=t.setTimeout(C,600))},activateContent:function(){K["interface"].deactivatedOnce||(h.trackEvent("googleBooklets",["Booklet_Buildings","Page_View"]),h.trackEvent("yandexBooklets",["BOOKLET_OPEN"]))},drawOnMap:function(){var e;D.computed&&D.computed.stops&&D.computed.stops.length&&(e=a.flatten(a.pluck(D.computed.stops,"platforms"),!0)),t.notify("mapDataReady",{platforms:e,markers:D.markers,subtype:"stop",type:"station"})},clearMap:function(){t.notify("clearMap")},setSeoParams:function(){t.notify("setSeoParams",H.getSeoParams(D,A))}},dispatcher:{"bookletHeader:getScrollOffset":function(e){v(e)},"bookletHeader:showPhone":function(){h.trackEvent("googleBooklets",["Booklet_Buildings","Phone_View"])},"bookletHeader:save":function(){s.changeBookletPage("about"),s.push()},"bookletHeader:cancel":function(){s.changeBookletPage("about"),s.push()},"bookletHeader:tabClicked":function(e){"apartments"==e&&t.notify("apartmentsTabClicked")}},changeState:function(e){if(e.panels&&e.panels.changed){_();var t=a.find(e.panels.changed,function(e){return"booklet"===e.diff.type});t&&void 0!==t.diff.subpageName&&(R=t.diff.subpageName,R&&(y(R),L()&&C()),_())}}};return K},t.exports._args=["slot","$bookletApi","$appState","$dgApi","$regionManager","$authorization","$i18n","$analytics","$apartmentsApi"]},{"./seoHelper.js":165,"./viewModel.js":166,bluebird:384,lodash:"lodash",moment:"moment"}],"/modules/bookletEditor/bookletEditor.js":[function(e,t,n){var a=e("lodash");t.exports=function(t,n,i,o){function r(e,n){var a;return"logo"===n?a=t.element("logos"):"cover"===n&&(a=t.element("covers")),a.find('.bookletEditor__uploadListItem[data-url="'+e+'"]')}function s(){t.element("coversListItem").mod({selected:!1})}function l(){t.element("logosListItem").mod({selected:!1})}function c(){t.element("coversListItem").mod({selected:!1}),$('.bookletEditor__coversListItem[data-url="'+k+'"]').mod({selected:!0}),t.notify("coverSelected",k)}function u(){t.element("logosListItem").mod({selected:!1}),$('.bookletEditor__logosListItem[data-url="'+w+'"]').mod({selected:!0})}function d(e,n){if(e){var a=r(e,"cover");t.notify("coverSelected",e);var i=n?n:L;t.notify("setCoverPosition",i),s(),a.mod({selected:!0}),x.cover="default"===e?null:e,x.cover_top=i}}function h(e){if(e){var n=r(e,"logo");t.notify("logoSelected",e),l(),n.mod({selected:!0}),x.logo="default"===e?null:e}}function p(e){t.element("pageContainer").each(function(){var t=$(this);t.data("type")===e?t.mod({state:"visible"}):t.mod({state:"hidden"})}),t.broadcast("bookletHeader:changeEditorState",e)}function f(e){var n,a=e.url,i="";"logo"===e.type?(x.logos_collection||(x.logos_collection=[]),x.logos_collection.unshift(a),n=t.element("logos"),i=t.renderPartial("logoItem",{url:a})):"cover"===e.type&&(x.covers_collection||(x.covers_collection=[]),x.covers_collection.unshift(a),n=t.element("covers"),i=t.renderPartial("coverItem",{url:a})),n.find(t.element("itemUpload")).after(i)}function m(e,n){var a=n||o._gg("Не удалось загрузить изображение");"logo"===e?(t.element("logos").find(t.element("upload")).mod({error:!0}),t.element("logos").find(t.element("uploadErrorDescription")).text(a)):"cover"===e?(t.element("covers").find(t.element("upload")).mod({error:!0}),t.element("covers").find(t.element("uploadErrorDescription")).text(a)):(t.element("upload").mod({error:!0}),t.element("upload").find(t.element("uploadErrorDescription")).text(a))}function g(){t.element("upload").mod({error:!1}),t.element("upload").find(t.element("uploadErrorDescription")).text("")}function _(e,t){if("undefined"!=typeof FileReader&&""!==t.value){var n=t.size||t.fileSize,i=t.type||t.mediaType,r=5242880;if(i=i.toLowerCase(),!a.contains(["image/gif","image/jpeg","image/jpg","image/png","image/bmp"],i))return m(e,o._gg("Файл не является изображением")),!1;if(n>r)return m(e,o._gg("Файл слишком большой")),!1}return g(),!0}function v(){if(0!==a.size(x)){x.logo&&(w=x.logo),x.cover&&(k=x.cover);var e={id:y.bookletCode||y.bookletId,data:{properties:x}};y.properties=a.cloneDeep(x),n.update(e,a.noop)}}var y,b,k,w,x={},C=e("./viewModel.js"),L=t.config["booklet.coverTop"],I={init:function(e){y=e||{},x=a.cloneDeep(y.properties)||{},k=y.properties&&y.properties.cover||"default",w=y.properties&&y.properties.logo||"default"},clientInit:function(){y.subpageName&&p(y.subpageName),c(),u()},viewContext:function(){return C(y)},elements:{coversItem:{click:function(){var e=$(this),n=e.parent(t.element("coversListItem")),a=n.attr("data-url");s(),n.mod({selected:!0}),d(a)}},logosListItem:{click:function(){var e=$(this),t=e.attr("data-url");l(),e.mod({selected:!0}),h(t)}},uploadItemDelete:{click:function(){var e=$(this).closest(t.element("uploadListItem")),n=e.attr("data-url"),i=e.closest(t.element("pageContainer")).attr("data-type"),o=e.hasClass("_selected"),r=t.element("covers").find("._defaultCover"),s=t.element("logos").find("._defaultLogo"),l=r.attr("data-url"),c=s.attr("data-url");return e.remove(),"covers"===i?(x.covers_collection=a.without(x.covers_collection,n),o&&d(l)):"logos"===i&&(x.logos_collection=a.without(x.logos_collection,n),o&&h(c)),!1}},uploadInput:{click:function(){t.element("upload").each(function(e,t){t.reset()})},change:function(){var e=this.files[0],a=y.firm_id,i=$(this).closest(t.element("pageContainer")).attr("data-type"),o="";"covers"===i?o="cover":"logos"===i&&(o="logo");var r=_(o,e);r&&($(this).closest(t.element("upload")).mod({uploadBusy:!0}),n.addFile(e,a,function(e,n){if(t.element("upload").mod({uploadBusy:!1}),!e){var a=n.message[0].ok.original;f({type:o,url:a})}}))}}},"interface":{changeEditorState:function(e){i.changeBookletPage(e),i.push()},exitGlobal:function(){p(b||y.subpageName)},setCoverPosition:function(e){x=a.defaultsDeep(x,y.properties||{}),x.cover_top=e.top},save:function(){v()},cancel:function(){x=a.cloneDeep(y.properties)||{},d(k,a.get(y,"properties.cover_top")),h(w),v()}},changeState:function(e){if(e.panels&&e.panels.changed){var t=a.find(e.panels.changed,function(e){return"booklet"===e.diff.type});t&&void 0!==t.diff.subpageName&&(b=t.diff.subpageName,p(b))}}};return I},t.exports._args=["slot","$bookletApi","$appState","$i18n"]},{"./viewModel.js":168,lodash:"lodash"}],"/modules/bookletHeader/bookletHeader.js":[function(e,t,n){var a=e("lodash");t.exports=function(t,n){function i(){var e=t.element("coverSandboxCover").height(),n=t.element("wrap").height();u(!!(e>n+100&&v))}function o(e){t.element("wrap").css("background-position","50% "+e+"%"),i()}function r(){var e=t.element("title").height(),n=t.element("wrap").height(),a=t.element("caption").position().top,i=n-a-e,o=a-i;t.notify("getScrollOffset",o)}function s(e){t.element("wrap").mod({edit:e})}function l(e){t.element("container").mod({modeEditor:e})}function c(e){t.element("navigationLink").mod({active:!1}),t.element("navigationDropdownLink").mod({active:!1}),t.element("navigation").find('[data-id="'+e+'"]').mod({active:!0})}function u(e){t.element("coverSandbox").mod({active:e})}function d(e){t.notify("tabClicked",e),n.changeBookletPage(e),n.push()}function h(){w=t.element("navigationWrapper").baron({direction:"h",bar:".bookletHeader__track .track__bar",freeze:!0,root:t.element("navigation")}),t.setTimeout(function(){w.update()},300)}function p(){w&&w.update()}function f(){var e=t.element("navigationDropdownList"),n=e.mod().collapsed;e.mod({collapsed:!n,active:n})}function m(){var e=t.element("navigation").filter("._view_menu"),n=e.find(t.element("navigationItem")),a=0,i=[];n.each(function(){a+=$(this).outerWidth(!0),i.push(a)}),x.menuItemsWidth=a,x.menuItemsWidthSums=i,x.headerDropdownWidth=t.element("navigationDropdown").outerWidth(!0)}function g(){x.menuItemsWidth||m();var e=t.block().outerWidth(!0),n=$(t.element("navigationDropdown"));if(x.menuItemsWidth<e)return n.mod({hidden:!0}),t.element("navigationDropdownList").mod({active:!1,collapsed:!0}),void t.element("navigationItem").mod({hidden:!1});e-=x.headerDropdownWidth;var a=t.element("navigation").filter("._view_menu"),i=a.find(t.element("navigationItem")),o=t.element("navigationDropdownItem");if(i.length==o.length){for(var r=x.menuItemsWidthSums,s=0,l=r.length-1;l>=0;l--)if(r[l]<=e){s=l;break}n.mod({hidden:!1}),i.each(function(e){s>=e?($(i[e]).mod({hidden:!1}),$(o[e]).mod({hidden:!0})):($(i[e]).mod({hidden:!0}),$(o[e]).mod({hidden:!1}))}),t.element("navigationWrapper").mod({toggled:!0})}}var _,v,y,b,k,w,x,C=e("./viewModel"),L=t.config["booklet.coverTop"];return x={tag:"header",init:function(e){_=e||{},v=_.isEditor,y=_.templateName},viewContext:function(){return C(_,t)},clientInit:function(){if(v){var e=C(_,t);t.element("coverEditor").html(t.renderPartial("coverEditor",e)),t.element("editorNavigation").html(t.renderPartial("editorNavigation",e)),t.element("logo").mod({logoEdit:!0})}t.ua().isMobile||"saunas"!==y||m()},bind:function(){"buildings"===y&&h(),r()},elements:{navigationDropdownToggle:{click:f},hiddenPhoneOverlay:{click:function(){var e=$(this).closest(t.element("hiddenPhone"));e.mod({visible:!0}),t.notify("showPhone")}},navigationLink:{click:function(e){e.preventDefault(),d($(this).data("id"))}},navigationDropdownLink:{click:function(e){e.preventDefault(),d($(this).data("id")),f()}},coverEdit:{click:a.partial(d,"covers")},logo:{click:function(){$(this).mod().logoEdit&&d("logos")}},saveBtn:{click:function(){t.notify("save"),u("false")}},cancelBtn:{click:function(){t.notify("cancel"),u("false")}},coverSandboxDragarea:{mousedown:function(e){var n,i,r,s,l=$(this),c=e.clientY||e.touches&&e.touches[0].clientY,u=c;if(void 0===b){var d=_.properties&&a.isNumber(_.properties.cover_top);b=d?_.properties.cover_top:L}void 0===k&&(k=parseInt(t.element("coverSandbox").height()/100,10)),e.preventDefault(),e.stopPropagation(),l.mod({drag:!0}),l.on("mousemove",function(e){e.pageY!==u&&(n=e.pageY<u,i=n?u-e.pageY:e.pageY-u,r=parseInt(i/k,10),r>=1&&(s=n?b+r:b-r,s>=0&&100>=s&&(b=s,u=e.pageY,o(b))))}),$(window).one("mouseup",function(){t.notify("coverPositionChanged",{top:b}),l.off("mousemove"),l.mod({drag:!1})})}}},"interface":{updateScroll:p,resize:function(){p(),t.ua().isMobile||g()},setCover:function(e){"default"===e&&(e=_.defaultCover);var n=t.element("coverSandboxCover");t.element("wrap").attr("data-src",e).css("background-image","url("+e+")"),n.attr("src",e)},setCoverPosition:o,updateCoverPosition:function(){i()},setLogo:function(e){var n="default"==e,a=e,i="url("+e+")";n&&(a=!1,i=""),t.element("logo").attr("data-src",a).css("background-image",i),t.element("logo").mod({"default":n})}},changeState:function(e){if(e.panels&&e.panels.changed){var t=a.find(e.panels.changed,function(e){return"booklet"===e.diff.type});if(t&&void 0!==t.diff.subpageName){var n=t.diff.subpageName,o="covers"===n||"logos"===n;s(o),l(o),c(n),"covers"===n&&i()}}}}},t.exports._args=["slot","$appState"]},{"./viewModel":169,lodash:"lodash"}],"/modules/bookletProviders/bookletProviders.js":[function(e,t,n){var a=e("lodash"),i=e("async"),o=req("helpers/string"),r=req("helpers/request");t.exports=function(t,n,s,l,c,u,d,h,p){function f(e,n,a){var i=t.element("container").outerHeight(),o=t.element("fixedSidebar").outerHeight(),r=e>n,s=i>o+a,l=r&&s&&!q;t.element("fixedSidebar").mod({fixed:l}),t.element("compilationTitle").mod({hidden:l})}function m(){var e=t.element("checkAddress").find("[name=street]"),n=t.element("checkAddress").find("[name=building]"),a=!e.val()||!n.val();t.element("checkAddressBtn").mod({disabled:a})}function g(e){var n=[{type:"bookletSuggest",data:{name:"street",value:O.address&&O.address.street||"",placeholder:p._gg("Улица")}}];if(O.provider){var a,i,o=O.is_owner,r=O.properties||{};a=r.cover||W,i=r.logo||null,B={title:O.provider.name,subtitle:O.provider.nameAddition||p._gg("Интернет-провайдер"),templateName:"net",defaultCover:W,cover:a,logo:i,isEditor:o,firm_id:O.firm_id,bookletId:O.code,properties:O.properties},n.push({type:"bookletHeader",data:B})}t.initModules(n,e)}function _(){t.element("editor").mod({hidden:!1}),t.element("main").mod({hidden:!0})}function v(){t.element("editor").mod({hidden:!0}),t.element("main").mod({hidden:!1})}function y(){var e,n=t.element("header").outerHeight(),a=t.element("footer").outerHeight();e=t.element("baronScroller").scrollTop(),f(e,n,a),t.element("baronScroller").on("scroll",function(){e=t.element("baronScroller").scrollTop(),f(e,n,a)}),t.element("checkAddress").on("keyup cut paste","input",m)}function b(e,n){var a=e.clone();a.mod({hidden:!0}),n?a.insertAfter(n):t.element("tariffsList").prepend(a),t.setTimeout(function(){e.mod({hidden:!0}),a.mod({hidden:!1})},150),t.setTimeout(function(){e.remove()},300)}function k(){var e=t.element("tariff"),n=null;return a.each(e,function(e){e=$(e),e.hasClass("_marked")&&(n=e)}),n}function w(e,t){e.mod({marked:!0}),t.marked=!0,0!==e.index()&&b(e,!1)}function x(e,t){var n,a;a=k(),e.mod({marked:!1}),t.marked=!1,n=a&&a.index()===e.index(),a&&!n&&b(e,a)}function C(e){if(!O||!a.values(O.tariffs).length)return!1;e=parseInt(e,10);var t=a.where(O.tariffs,{id:e});return t.length?t[0]:!1}function L(e){var n;e.filterElement.rader({trackActive:e.filterElement.find(".bookletProviders__filterTrackActive"),runners:e.filterElement.find(".bookletProviders__runner"),points:e.filterElement.find(""),values:e.minMax,bumpRadius:24,change:function(a){e.filterName&&(clearTimeout(n),n=t.setTimeout(function(){T(e.filterName,{min:parseInt(a.minVal,10),max:parseInt(a.maxVal,10)})},300))},move:function(t){e.minTextElement&&e.maxTextElement&&(e.minTextElement.text(parseInt(t.minVal,10)),e.maxTextElement.text(parseInt(t.maxVal,10)))}})}function I(e){var n,i,o,r,s,l,u=50,d=10;e&&t.element("filtersContainer").html(t.renderPartial("filters",U(O,p,c)));var h=t.element("filterPrice");h.length&&(n=a.map(O.tariffs,function(e){return e.price?parseInt(e.price,10):null}),n=a.compact(n),o=a.min(n),r=a.max(n),n.length&&r-o>u&&L({filterName:"price",minMax:[o,r],filterElement:h,minTextElement:t.element("filterPriceMin"),maxTextElement:t.element("filterPriceMax")}));var f=t.element("filterSpeed");f.length&&(i=a.map(O.tariffs,function(e){return e.speed&&e.speed["in"]?parseInt(e.speed["in"],10):null}),i=a.compact(i),s=a.min(i),l=a.max(i),i.length&&l-s>d&&L({filterName:"speed",minMax:[s,l],filterElement:f,minTextElement:t.element("filterSpeedMin"),maxTextElement:t.element("filterSpeedMax")}))}function T(e,t){h.trackEvent("googleBooklets",["Booklet_Providers","Filters","Use"]),G[e]=t;var n,i=O.tariffs||[],o=[],r=G.price,s=G.speed,l=G.freeConnecting,c=G.tv,u=G.hd,d=!1;a.each(i,function(e){d=!0,r&&r.min&&r.max&&(e.price<r.min||e.price>r.max)&&(d=!1),s&&s.min&&s.max&&(n=e.speed&&e.speed["in"]?e.speed["in"]:0,(n<s.min||n>s.max)&&(d=!1)),(l||c||u)&&(l&&0!==e.connecting_cost&&(d=!1),c&&!e.tv_channels&&(d=!1),u&&!e.hd_channels&&(d=!1)),d&&o.push(""+e.id)}),S(o)}function S(e){var n,i,o,r=t.element("tariff");a.each(r,function(t){t=$(t),n=t.data("tariffId"),i=-1===a.indexOf(e,n),t.mod({hidden:i})}),o=!!e.length,t.element("tariffsNotFound").mod({hidden:o}),t.setTimeout(function(){z.update()},300)}function E(e){for(var n,a=t.element("tariff"),i=0,o=a.length;o>i;i++)if(n=$(a[i]),n.data("tariff-id")===e)return n;return!1}function P(e){var t=E(e);t&&t.length&&t.mod({minimized:!0})}function j(e){var t=E(e);t&&t.length&&t.mod({minimized:!1})}function M(){t.element("tariffsContainer").html(t.renderPartial("tariffs",U(O,p,c))),O.providerId||I(!0)}function A(e,t){if(O.geoid&&O.address&&e.street==O.address.street&&e.building==O.address.building)return t(null,e);O.address=e;var n=e.street+", "+e.building;return l.geo.search(n,{page_size:1},function(n,a){return n?(O.geoid=null,t(n)):(O.geoid=a.data[0].id,e=a.data[0].address.components[0],t(null,e))}),null}function D(){if(t.element("address").mod({connected:!1,notConnected:!1}),O.address){var e=t.element("checkAddress");e.find('[name="street"]').val(O.address.street),e.find('[name="building"]').val(O.address.building)}}function R(){if(t.element("address").mod({connected:O.connected,notConnected:O.notConnected}),O.address){var e=O.address.street+", "+O.address.building;t.element("checkAddressAddress").html(e)}t.element("checkAddressBtn").mod({preloader:!1}),t.element("checkAddress").find("input").prop("disabled",!1)}function N(){if(u.isAuthorized()){var e=u.getAuthorizedUserSync();n.setAccessToken(e.authorizationToken)}}var B,F,O,z,q,U=e("./viewModel"),H=e("./apiHelper")(l,n,c),G={},W=t.location.uri("/assets/bookletProviders/default_cover.jpg");return F={init:function(e,t){if(O=e||{},1==O.makeup)return g(t),void t();if(!d.get("bookletProviders"))return void r.emitError(404,"bookletProviders feature is disabled",t);N();var n=[];O.firm_id?(O.providerId=O.firm_id,n.push(a.partial(H.loadProvider,O))):n.push(a.partial(H.loadProviders,O)),e.geoid&&n.push(a.partial(H.loadAddress,O)),i.parallel(n,function(e){return e?void t(e):void g(t)})},clientInit:function(){h.trackEvent("googleBooklets",["Booklet_Providers","Show_booklet",O.providerId?"Firm":"Aggreg"]),O.providerId||(I(),h.trackEvent("googleBooklets",["Booklet_Providers","Filters","Show"]),t.block().mod({mode:"agregator"})),y(),z=t.element("baronScroller").baron(),m(),t.setTimeout(function(){z.update()},150),O.is_owner&&t.init("bookletEditor",B,function(){t.element("editor").html(t.renderPartial("editor",B)),"covers"!=O.subpageName&&"logos"!=O.subpageName||_()})},viewContext:function(e){return e||U(O,p,c)},"interface":{updateScroll:function(){z.update()},resize:function(){var e=t.element("baronScroller").scrollTop(),n=t.element("header").outerHeight(),a=t.element("footer").outerHeight();f(e,n,a),z&&z.update()},setSeoParams:function(){var e;if(O.provider)e={bookletId:O.bookletId,type:"booklet",bookletType:"provider",firmName:O.provider.name,firmDescription:O.provider.nameAddition&&o.capitalize(O.provider.nameAddition)||p._gg("Интернет-провайдер")};else{var n=a.map(O.tariffs,function(e){return e.provider_name.replace(/,.*$/,"")});n=a.take(a.uniq(n),5).join(", "),e={type:"bookletProvidersAggregator",providers:n}}t.notifySeoParams(e)}},elements:{checkAddress:{submit:function(e){e.preventDefault();var n=t.element("checkAddress").serializeArray(),i=a.object(a.pluck(n,"name"),a.pluck(n,"value"));t.element("checkAddressBtn").mod({preloader:!0}),t.element("checkAddress").find("input").prop("disabled",!0),A(i,function(e,t){if(e)return O.connected=null,O.notConnected=!0,void R();var n=O.provider&&O.provider.gis_firm_id;H.getTariffs(n,O.geoid,function(e,n){var i=!(!n||!n.length);i&&(t&&t.street&&t.number&&(O.address=a.extend(O.address,{street:t.street,building:t.number})),O.tariffs=n),O.connected=i,O.notConnected=!i,M(),R()})})}},inputReset:{click:function(){O.geoid=null,O.address=null,O.connected=null,O.notConnected=null,t.element("form").find('input[type="text"]').val("").trigger("keyup"),R(),m();var e=this;H.loadAllTariffs(O,function(){M.call(e,!0),O.provider||I(!0)})}},checkAddressBtn:{click:function(){var e=$(this).mod();e.disabled||t.element("checkAddress").trigger("submit")}},inputText:{},checkAddressAddress:{click:function(){D()}},showAllProviders:{click:function(e){e.preventDefault();var n={};O.geoid&&(n.geoid=O.geoid,O.address.apartment&&(n.apartment=O.address.apartment)),t.notify("showProviderBooklet",n),h.trackEvent("googleBooklets",["Booklet_Providers","All_providers"])}},runner:{mousedown:function(){var e,n=$(this),i=t.element("filterLabel"),o=n.data("label");e=a.filter(i,function(e){return e.getAttribute("data-runner")==o?e:!1}),$(e).mod({highlight:!0}),t.block().one("mouseup mouseleave",function(){$(e).mod({highlight:!1}),n.trigger("mouseup")})}},filterButtonInput:{click:function(e){var t=$(e.target),n=t.attr("name"),a=t.prop("checked");T(n,a)}},tariffTitle:{click:function(e){var t=$(e.target),n=t.closest(".bookletProviders__tariff"),a=n.data("tariffId"),i=n.hasClass("_minimized");i?j(a):P(a)}},tariffMinimize:{click:function(e){var t=$(e.target),n=t.closest(".bookletProviders__tariff"),a=n.data("tariffId");P(a)}},tariffPurchase:{click:function(e){var n=$(e.target),i=n.closest(".bookletProviders__tariff"),o=i.data("tariffId"),r=a.find(O.tariffs,function(e){return e.id==o});e.preventDefault();var s=a.pick(O,"address","geoid","connected","notConnected");if(s.tariff=r,O.firm_id)s.phone=O.provider.phone,t.notify("connect",s);else{var l={gis_firm_id:r.provider_gis_firm_id};H.loadProviderData(l,function(){s.phone=l.phone,t.notify("connect",s)})}}},tariffMark:{click:function(e){var t=$(e.target),n=t.closest(".bookletProviders__tariff"),a=n.data("tariffId"),i=C(a);i&&i.marked?x(n,i):i&&!i.marked&&w(n,i)}},feedbackLink:{click:function(){s.showFeedback({feedbackType:"bookletError"}),s.push()}}},dispatcher:{"bookletHeader:pageActivated":function(e){s.changeBookletPage(e),s.push()},"bookletHeader:save":function(){s.changeBookletPage(null),s.push()},"bookletHeader:cancel":function(){s.changeBookletPage(null),s.push()}},changeState:function(e){if(e.panels&&e.panels.changed){var t=a.find(e.panels.changed,function(e){return"booklet"==e.diff.type});if(t&&void 0!==t.diff.subpageName){var n=t.diff.subpageName;"covers"==n||"logos"==n?_():v()}}}}},t.exports._args=["slot","$bookletApi","$appState","$dgApi","$regionManager","$authorization","$featureSwitcher","$analytics","$i18n"]},{"./apiHelper":170,"./viewModel":171,async:383,lodash:"lodash"}],"/modules/bookletSaunas/bookletSaunas.js":[function(e,t,n){var a=e("lodash"),i=e("moment");t.exports=function(t,n,o,r,s,l,c,u){function d(){x&&x.update()}function h(){var e=I(b,u);return w&&"main"!==w&&(e.subpageName=w,e.rooms=a.map(e.rooms,function(e){return e.isActive=e.id===w,e})),e}function p(e){if("covers"===e||"logos"===e){if(b.is_owner)return void f();e="main"}else m();L=h();var n=b.modules&&b.modules.rooms||[],a=n.length>2,i="main"===e||!e,o=i&&a?"main":"room";t.element("main").html(t.renderPartial(o,L)),"room"===o&&v(),d(),y()}function f(){t.element("editor").mod({state:"visible"}),t.element("main").mod({state:"hidden"})}function m(){t.element("editor").mod({state:"hidden"}),t.element("main").mod({state:"visible"})}function g(){var e=b.modules&&b.modules.rooms;!e||e.length>2?o.changeBookletPage("main"):o.changeBookletPage(a.first(e).id),o.push()}function _(){if(l.isAuthorized()){var e=l.getAuthorizedUserSync();n.setAccessToken(e.authorizationToken)}}function v(){var e=t.element("photos");if(e.length){var n=!0;t.element("photos").photor({delay:0,loop:!0,control:"bookletSaunas__photosControl",next:"bookletSaunas__photosControlNext",prev:"bookletSaunas__photosControlPrev",thumbs:"bookletSaunas__photosThumbs",thumbsLayer:"bookletSaunas__photosThumbsWrap",thumb:"bookletSaunas__photosThumbsWrapItem",thumbImg:"bookletSaunas__photosThumbsWrapItemImg",thumbFrame:"bookletSaunas__photosThumbsWrapFrame",viewport:"bookletSaunas__photosViewport",layer:"bookletSaunas__photosViewportLayer",slide:"bookletSaunas__photosViewportLayerSlide",slideImg:"bookletSaunas__photosViewportLayerSlideImg",slideCaption:"bookletSaunas__photosViewportLayerSlideCaption",showThumbs:null,onShow:function(){var e=".bookletSaunas__photosCounterInnerCurrent",a=".bookletSaunas__photosCounterInnerCount",i=this.viewport||$(this.bViewport);i.find(e).html(this.current+1),i.find(a).html(this.slides.length),n?(t.setTimeout(function(){t.element("photosContainer").mod({preloader:"transparent"})},300),t.setTimeout(function(){t.element("photosContainer").mod({preloader:!1})},600)):c.trackEvent("googleBooklets",["Booklet_Sauna","Flip_photo"]),n=!1}}),C=t.element("photos").data("photor-id")}}function y(){var e=t.element("params"),n=e.find(t.element("section"));n.each(function(){var e=$(this),n=e.find("._more"),a=e.find(t.element("optionsItem")).length;a>4&&(n.mod({state_visible:!0}),n.on("click",function(){var n=e.find(t.element("options"));n.removeClass("_collapsed"),$(this).remove()}))}),t.element("room").each(function(){var e=$(this),n=e.find(t.element("info"));t.setTimeout(function(){var a=e.find(n).innerHeight();100>a?e.find(t.element("readMore")).hide():n.mod({active:!0})},500)}),t.element("roomTabsContentItem").each(function(){var e=$(this);e.hasClass("_now")?e.show():e.hide()}),t.element("roomTabsContainer").each(function(){var e=$(this),n=e.find(t.element("roomTabsContent")),a=e.find(t.element("roomTab"));a.each(function(e){var i=$(this);i.on("click",function(o){o.stopPropagation(),a.find("._active").mod({active:!1}),i.find(t.element("roomTime")).mod({active:!0});var r=n.find(t.element("roomTabsContentItem"));r.hide(),r.each(function(n){if(n===e){$(this).show();var a=$(this).find(t.element("roomTabsContentTime")).first();return a.trigger("click"),!1}return null})})})})}var b,k,w,x,C,L,I=e("./viewModel.js"),T=t.location.uri("/assets/bookletSaunas/default_cover.jpg"),S={init:function(e,n){b=e||{},k=u.getFormats().currency,w=b.subpageName,_(),b.defaultCover=T;var o=s&&s.getRegion()&&s.getRegion().time_zone,l=o?o.offset:0;if(b.now=i().add(time.userTimeOffset,"seconds").utcOffset(l).toDate(),!b.subpageName){var c=b.modules&&b.modules.rooms;!a.values(c).length||c.length>2?b.subpageName="main":b.subpageName=a.first(c).id}var d=a.first(b.filials_ids);r.firms.profile(d,{},function(e,a){return e?void n(e):(b.firm=a,L=L||h(),void t.init("bookletHeader",L,n))})},clientInit:function(){x=t.element("baronScroller").baron(),t.setTimeout(function(){x.update()},100),b.is_owner?t.init("bookletEditor",L,function(){t.element("editor").html(t.renderPartial("editor",L)),p(b.subpageName)}):p(b.subpageName)},viewContext:function(){return h()},elements:{wrap:{click:function(e){var n=$(e.target);if(!n.is(t.element("roomTabsContainer"))&&!n.is(t.element("roomCurrentTime"))){e.stopPropagation();var a=t.element("roomDetailsText"),i=a.find(t.element("roomDropdown"));i.addClass("_collapsed"),t.element("room").removeClass("_clickable")}}},room:{click:function(){if(!t.element("room").hasClass("_clickable")){var e=$(this).data("id");o.changeBookletPage(e),o.push()}}},roomCurrentTime:{click:function(e){e.stopPropagation();var n=$(this),a=t.element("room"),i=n.closest(a),o=n.closest(t.element("roomDetailsText")),r=o.find(t.element("roomDropdown"));r.toggleClass("_collapsed"),a.toggleClass("_clickable"),i.toggleClass("_clickable"),c.trackEvent("googleBooklets",["Booklet_Sauna","Time_click"])}},roomDropdownCloseButton:{click:function(e){e.stopPropagation();var n=$(this).closest(t.element("roomDetailsText")),a=n.find(t.element("roomDropdown"));a.toggleClass("_collapsed"),t.element("room").removeClass("_clickable")}},roomTabsContentTime:{click:function(e){e.stopPropagation();var n=$(this),a=n.parent(t.element("roomTabsContentItem")),i=a.parent(t.element("roomTabsContent")),o=i.find(t.element("roomTabsContentTime"));o.removeClass("_currentTime"),n.addClass("_currentTime");var r=n.data("from"),s=n.data("to"),l=n.data("price"),c=n.data("formatted"),u=$(this).closest(t.element("room")),d=u.find(t.element("saunasCurrentRange")),h=u.find(t.element("saunasSelectedRange"));d.hide(),h.find(t.element("saunasSelectedRangeFrom")).text(r),h.find(t.element("saunasSelectedRangeTo")).text(s),h.show(),u.find("._timeCost").text(c),u.find(t.element("roomDetailsCost")).text(l+" "+k.symbol)}},pageLink:{click:function(e){e.preventDefault();var t=$(this).data("id");o.changeBookletPage(t),o.push()}},feedbackLink:{click:function(){o.showFeedback({feedbackType:"bookletError"}),o.push()}}},"interface":{updateScroll:d,resize:function(){d(),t.element("photos").photor("update",C)},activateContent:function(){S["interface"].deactivatedOnce||(c.trackEvent("googleBooklets",["Booklet_Sauna","Open_booklet"]),c.trackEvent("yandexBooklets",["BOOKLET_OPEN"]))},setSeoParams:function(){function e(e){return a.flatten(a.map(a.union(e.aquas,e.entertainments,e.rest),function(e){return e.text?e.text:e}),!0)}var n,i=L.rooms,o=w||b.subpageName;n="covers"==o||"logos"==o||i.length<2?"sauna":"main"==o?"saunaRooms":"saunaRoom";var r,s,l;"saunaRoom"==n&&(s=a.findKey(i,{id:o}),s&&(r=i[s],l=r.title));var c;c=r?e(r):a.uniq(a.map(i,e)),c=c.join(", ");var u=b.extra&&b.extra.sauna_hour_price&&b.extra.sauna_hour_price.min,d=b.extra&&b.extra.sauna_capacity,h=1==i.length||"main"==o||2==i.length&&0==s;t.notifySeoParams({type:"saunaRoom"!=n||h?"booklet":"bookletPage",bookletType:n,bookletId:b.bookletId,firmName:b.firm.name_ex.primary,price:u,capacity:d,address:b.firm.address_name,subpageName:o,room:l,details:c})}},dispatcher:{"bookletHeader:showPhone":function(){c.trackEvent("googleBooklets",["Booklet_Sauna","Show_phone"])},"bookletHeader:save":g,"bookletHeader:cancel":g},changeState:function(e){if(e.panels&&e.panels.changed){d();var t=a.find(e.panels.changed,function(e){return"booklet"===e.diff.type});t&&void 0!==t.diff.subpageName&&(w=t.diff.subpageName,p(w),d())}}};return S},t.exports._args=["slot","$bookletApi","$appState","$dgApi","$regionManager","$authorization","$analytics","$i18n"]},{"./viewModel.js":174,lodash:"lodash",moment:"moment"}],"/modules/bookletSuggest/bookletSuggest.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t){function n(){o.set({suggest:[]})}function i(){return $.trim(e.element("suggestInput").val())}var o,r,s,l,c,u=!1,d=!1,h=!1,p={block:"suggest",init:function(e){e=e||{},s=e.name,l=e.value,c=e.placeholder},viewContext:function(){return{inputName:s,value:l,autofocus:u,placeholder:c}},clientInit:function(){o=e.block().surt({input:e.element("suggestInput"),inputMode:"text",suggest:e.element("suggests"),clone:e.element("cloneMain"),hint:e.element("cloneHint"),autocompleteCls:"_autocomplete",readyCls:"_ready",suggestItemCls:"suggest__suggestsItem",suggestCls:"_dropdown",tokenCls:"suggest__token",textCls:"suggest__text",stateFocusCls:"_focus",suggestItemCurrentCls:"_current",suggestItemCountCls:"_count_",delimiter:",",selectionCls:"suggest__highlightedText",aunt:30,events:["enter","click"],placeholder:c,placeholderCls:"_placeholder",change:function(e,s){var l=a.debounce(function(){d=!0,r&&r.cancel(),r=t(s.text,"streets",function(e,t){if(r=null,d&&!e&&t&&t.kits){var a=i();a?o.set({suggest:t.kits}):n()}})},50);s.text?l():n()},pick:function(e,t){t&&e&&e.length&&(n(),d=!1,h=t)},submit:function(){return h||""===i()?void(h=!1):(o.invalidate(),n(),void(d=!1))},$:$})},elements:{suggestInput:{},suggests:{},input:{},cloneMain:{},cloneHint:{}}};return p},t.exports._args=["slot","$suggestApi"]},{lodash:"lodash"}],"/modules/card/card.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/contact"),o=req("helpers/discount"),r=req("lib/markerDataManager"),s=req("helpers/analytics"),l=req("helpers/firm"),c=e("../../helpers/booklet"),u=req("helpers/string"),d=e("bluebird"),h=req("helpers/link"),p=req("helpers/geo");t.exports=function(t,n,f,m,g,_,v,y,b,k,w,x,C,L,I,T,S){function E(e,t){var n=a.get(e,"components[0]");return n?a(n).pick(["street","number"]).values().value().join(","):t||""}function P(e,t,n){if("building"==ye.geo_type){var i=void 0;i=void 0!==n?["Mixed_Card_event",e,t,+n]:a.compact(["Mixed_Card_event",e,t]),g.trackEvent("google",i)}}function j(){t.registry.get("offline")||(t.notify("allReviewsClicked",ye),ye.reviews&&ye.reviews.reg_bc_url&&t.notify("firmReviewClicked",{place:Ce,reg_bc_url:ye.reg_bc_url},be.bss),Pe&&g.trackEvent("googleFloors",["Mixed_Card","Review_Click"]))}function M(e){f.floors.isActive()||(e=e||{},ye.links&&ye.links.entrances&&(e.analyticsPlace=Ce,be.bss&&t.notify("pathFinderEntranceClickedWithBc",ye,a.extend(e,be.bss)),t.notify("pathFinderEntranceClicked",ye,e)))}function A(){var e=l.getMainRubric(ye);t.element("plusOne").length&&g.trackEvent("google",["Mixed_Card_event","Plusone_Show",e]),t.element("booklet").length&&g.trackEvent("google",["Mixed_Card_event","Booklet_Show",e]),t.element("discounts").length&&g.trackEvent("googleBooklets",["Discount","Card_Button","Show"])}function D(){var e=void 0,n=m.getRegion();Ie="discovery"==t.searchContext.read("requestType");var i=l.checkFloors(ye,_,C);i&&(e=h.getFirmInFloorsLink(ye,C,m));var o={place:Ce,sid:g.session,user:g.user,ill:a.get(be,"bss.ill")},r=Oe(be,{i18n:y,plusOneFeature:_.get("plusOne"),hasFloors:i,floorsSeoLink:e}),s=Fe(be.get("data"),{region:n,formats:y.getFormats(),
settings:y.getSettings(),lang:y.getLang(),plusOneFeature:_.get("plusOne"),contextRubricId:a.map(t.searchContext.read("contextRubrics"),"id"),isDiscovery:Ie,dontPreloadPhoto:t.isServer,postponeRecoveryAds:t.isServer,favoritesFeature:_.get("favorites"),isPhone:t.ua().isPhone,doNotCutAttrs:t.Mausoleum,hasFloors:i,floorsSeoLink:e,generatedTitle:p.getTitle(ye,y),geoAdvLink:h.getAdvLink(n,"geoCard",{},y),shownInFloors:Pe,floorName:ye.floorName,photosUploaderControl:_.get("photosUploader"),isCarPark:be.hasRubric(409),mediaButtons:r,bss:o,hasParking:!a.isEmpty(p.getParkings(ye,n.code,y))});return s.schedule=!!t.modules.schedule,s}function R(e){return!!i.firstByType("phone",e.contact_groups)}function N(e){return!!i.firstByType("website",e.contact_groups)}function B(e){return y.getSettings("landmarksEnabled")&&a.has(e,"links.landmarks")}function F(e){var t=e.links&&e.links.nearest_stations;return!a.isEmpty(t)&&!B(e)}function O(){g.trackEvent("google",["Mixed_Card_event","Time"]),ye.reg_bc_url&&t.notify("scheduleOpened",{place:Ce,reg_bc_url:ye.reg_bc_url},be.bss),Te.update()}function z(){var e=t.element("photosImg");if(e.length&&!e.mod().loaded){var n=e.data("src"),a=new Image;a.onload=function(){e.css("background-image","url("+n+")").mod({loaded:!0})},a.src=n}}function q(){Te&&Te.update()}function U(){L.getDiscounts({branchId:ye.id}).then(function(e){if(e&&e.length){var n=a.first(e),i=m.getRegion(),r=o.isInternationalDiscountsRegion(i),s=!l.checkAds(ye)&&r?1:e.length;t.element("discountsTitle").text(o.getDiscountTitleWithPercent(n)),t.element("discountsText").text(u.getSynopsis(n.description,48)),t.element("discountsMore").text(o.getDiscountsMoreText(s,y))}})["catch"](function(e){t.sendError("An error occurred while getting discounts for combinedCard.",e)})}function H(){var e=275,n=603,a=be.hasRubricsFromList([e,n]);_.get("apartments")&&a&&be.loadApartments().then(function(e){if(e){var n=K(be);t.rerenderPartial("buttons","mediaButtons",n)}})}function G(){var e=$(this),t=e.mod(),n=t.collapsed;return t.expandable&&(n=!n,e.mod({collapsed:n})),n}function W(){s.changeTimeParam($(this))}function V(e){k.getBranchInfo(e).then(function(t){if(200==a.get(t,"body.meta.code")){var n=a.get(t,"body.result.counters",{}),i=n.goods_owner>0,o=n.goods_vendor>0&&!l.checkAds(ye);i&&Y(e),o&&Z(e)}})}function Z(e){k.getBranchProposals(e).then(function(e){var n=a.get(e,"result.items",[]);if(n.length){var i=a.first(n),o=t.init("proposals",i);Ee=i.title,t.element("proposals").append(o.render()),t.element("recoveryAds").mod({hidden:!0}),o.bindEvents(),X()}})}function Y(e){Se=e;var n=K(be);t.rerenderPartial("buttons","mediaButtons",n),t.notify("proposalsButtonShown",ye.name)}function K(e){return Oe(e,{i18n:y,plusOneFeature:_.get("plusOne"),offline:!!t.registry.get("offline"),hasFloors:l.checkFloors(ye,_,C),proposals:Se})}function X(){Ee&&t.element("proposals").seeable(.7)&&(t.notify("proposalShown",Ee),Ee=null)}function J(e){var n=Object.assign({},e,{reg_bc_url:ye.reg_bc_url,ill:a.get(be,"bss.ill")});t.notify("contactClicked",n,Ce,"mixedCard")}function Q(e){this.stop(),J(e)}function ee(e){t.notify("pathActionClicked",e,{id:ye.id,text:ye.name,lat:a.get(ye,"point.lat"),lon:a.get(ye,"point.lon")}),ye.reg_bc_url&&t.notify("routeSearchClicked",{place:Ce,reg_bc_url:ye.reg_bc_url},be.bss),g.trackEvent("google",["Mixed_Card_event","Route","Click"]),g.trackEvent("yandex",["BRNCH_CRD_RT_CLCK_T"]),Pe&&g.trackEvent("googleFloors",["Mixed_Card","Route_Action_Click"])}function te(){g.trackEvent("yandex",["SITE_CLCK_IMG"]),g.trackEvent("google",["Mixed_Card_event","Site","Control"])}function ne(){M(),g.trackEvent("google",["Mixed_Card_event","Enter","Click"])}function ae(){t.notify("floorNameSelected",ye),g.trackEvent("googleFloors",["Mixed_Card","Floor_Action_Click"])}function ie(){var e=t.element("phonesDropdown");Ue||(Ue=t.init("contact",{bss:a.get(ye,"bss"),analyticsPlace:Ce,model:ye.contact_groups,cardModel:a.extend(ye,a.pick(be,"bss")),mode:"dropdown",mainAnalyticsLabel:"Mixed_Card_event"}),e.html(Ue.render()),Ue.bindEvents())}function oe(e){var n=t.element("phonesDropdown");n.mod({shown:e})}function re(){oe(!0)}function se(){oe(!1)}function le(e,t){$e=ze.setPhoneActionState($e,e,t),He.slot.rerenderDumb($e)}function ce(e){if(g.trackEvent("google",["Mixed_Card_event","Phone","Action"]),Pe&&g.trackEvent("googleFloors",["Mixed_Card","Phone_Action_Click"]),t.ua().isPhone&&a.find($e,"type","phone").isLink){var n=i.firstByType("phone",ye.contact_groups)||i.firstByType("fax",ye.contact_groups);if(!n)return;return void J(n)}e.preventDefault(),le(!0,ue),ie(),re(),t.broadcast("contact:showPhones")}function ue(e){e.preventDefault(),le(!1,ce),se()}function de(){var e=a.find(ye.photoAlbums,{type:"common"});return e?e.count:0}function he(){return qe.getInfrastructureProps({buildingId:a.get(ye,"address.building_id"),id:ye.id,links:ye.links,point:ye.point,type:ye.type},{i18n:y,regionCode:m.getRegion().code,hasProvidersButton:ye.hasProvidersButton,onClickItem:pe,onClickProvidersButton:fe})}function pe(e){switch(e){case"firms":return P("Firms","Title_firms"),t.bssContext.startNewChain({pr:"allorganisation",gs:{building:{id:a.get(ye,"address.building_id")}}}),t.notify("firmsInBuildClicked",a.get(ye,"address.building_id"));case"servicing":return P("Servicing","Title_servicing"),t.bssContext.startNewChain({pr:"service",gs:{building:{id:a.get(ye,"address.building_id")}}}),t.notify("showServicingFirmsInBuild",a.get(ye,"address.building_id"),ye.point);case"providers":return P("Provider_Title",ye.purpose_name),t.bssContext.startNewChain({pr:"provider",gs:{building:{id:a.get(ye,"address.building_id")}}}),t.notify("showProvidersInBuilding",a.get(ye,"address.building_id"),E(ye.address,ye.address_name));default:return null}}function fe(){P("Provider_Button",ye.purpose_name),t.bssContext.startNewChain({pr:"provider",gs:{building:{id:a.get(ye,"address.building_id")}}}),_.get("mediaCard.providers")?t.notify("showProvidersInBuilding",a.get(ye,"address.building_id"),E(ye.address,ye.address_name)):t.notify("showProviderBooklet",{geoid:a.get(ye,"address.building_id")})}function me(e,a){return new d(function(i){var o=_.get("bookletProviders")&&!t.registry.get("offline")&&a;if(o){var r={house:e,servicing_group:"internet",mutedForBssSearch:!0};n.searchByType("servicing",r,t.ifAlive(function(e){var t=e&&c.haveProvidersBooklets(e.data);i(t)}))}else i(!1)})}function ge(e,n,a,i){t.notify("landmarkClicked",{id:e,type:n,subtype:a,stationId:i,reg_bc_url:ye.reg_bc_url,place:Ce},be.bss),g.trackEvent("google",["Mixed_Card_event","Landmarks","Click"])}function _e(e,i){e&&(g.trackEvent("google",["Mixed_Card_event","Stop",i]),Pe&&g.trackEvent("googleFloors",["Mixed_Card","Stop_Click"]),n.transport.station(e,function(e,n){t.notify("nearStationSelected",a.extend(ye,a.pick(be,"bss")),n)}))}function ve(e){P("Parking"),t.notify("openCard",{type:"geo",id:e})}var ye=void 0,be=void 0,ke=void 0,we=void 0,xe=void 0,Ce=void 0,Le=void 0,Ie=void 0,Te=void 0,Se=void 0,Ee=void 0,Pe=void 0,je=void 0,Me=void 0,Ae=void 0,De=void 0,Re=y.getSettings(),Ne=Re&&Re.firms||{},Be=w.award({regionId:m.getRegion().id}),Fe=e("./viewModel"),Oe=e("./viewModelMediaButtons.js"),ze=e("./actionsList"),qe=e("./prepareDataForDumpModules"),$e=void 0,Ue=void 0,He=void 0,Ge=a.throttle(function(){t.broadcast("recoveryAds:sendImpressions"),X()},50),We={inheritBssHash:!0,networkDepend:!0,init:function(e,n){function i(){$e=t.invoke(ze,[ye,{analyticsPlace:Ce,ua:t.ua(),clickHandlers:{website:te,phone:ce,pathFrom:a.partial(ee,"from"),pathTo:a.partial(ee,"to"),entrance:ne,floor:ae},websiteOtherHandlers:{mouseenter:W,focus:W},shownInFloors:Pe}]),He=t.initDumb("cardActions",$e);var e=[];if(ye.contact_groups&&e.push({type:"contact",data:{bss:a.get(ye,"bss"),analyticsPlace:Ce,model:ye.contact_groups,masterSchedule:ye.schedule,cardModel:a.extend(ye,a.pick(be,"bss")),mainAnalyticsLabel:"Mixed_Card_event"}}),ye.schedule&&e.push({type:"schedule",data:{model:ye.schedule,ctx:"firmCard"}},{type:"microSchedule",data:{model:ye.schedule}}),I.get("isSearchBot")&&"branch"==ye.type&&e.push({type:"jsonld",data:{model:ye,type:"firmcard"}}),e.push({type:"cardHeader",data:ye}),t.init("promoMobile",{module:"firmCard"}),"branch"==ye.type||"building"==ye.type){var n=he();a.isEmpty(n)||(je=t.init("cardInfrastructure",n));var i=qe.getFirmsInBuildingProps({buildingId:a.get(ye,"address.building_id"),links:ye.links,point:ye.point},{i18n:y,regionCode:m.getRegion().code,onClickItem:pe});a.isEmpty(i)||t.initDumb("cardInfrastructureItem",i)}var o=qe.getFeatureProps(ye,{i18n:y,cityCode:m.getRegion().code,parkingFeatureClickHandler:ve});if(a.contains(["geoPlace","parking","adm_div"],ye.geo_type)||a.isEmpty(o)||t.initDumb("cardFeatures",o),y.getSettings("landmarksEnabled")&&a.has(ye,"links.landmarks")){var r=qe.getLandmarksProps(ye,{cityCode:m.getRegion().code,numberFormat:y.getFormats("number"),landmarksClickHandler:ge});a.isEmpty(r)||t.initDumb("cardLandmarks",r)}else{var s=qe.getNearStopsProps(ye,{cityCode:m.getRegion().code,numberFormat:y.getFormats("number"),nearStopsLinkClickHandler:_e});a.isEmpty(s)||t.initDumb("cardNearStops",s)}var l=qe.getAttractionsProps(ye,{isMausoleum:t.isMausoleum,expanderLabels:{expand:y._t("Все достопримечательности"),rollup:y._t("Свернуть достопримечательности")}});a.isEmpty(l)||t.initDumb("cardAttractions",l,"attractions"),t.initModules(e)}function o(){var e=!!f.get("query");e&&(ye.seeAlsoGeometries=r.makeByList(ye.see_also,"recovery"));var n={adFirms:ye.see_also};ye.recoveryAds=t.init("recoveryAds",n),t.mod({hasRecoveryAds:!!ye.recoveryAds})}function s(e,n){ye=e,ye.bss=e.bss,n.lon&&n.lat&&(ye.point={lon:n.lon,lat:n.lat}),t.isMausoleum&&ye.reg_bc_url&&t.registry.set("firmRegBcUrl",ye.reg_bc_url),ye.see_also&&(ye.see_also=a.take(ye.see_also,t.config["firmCard.seeAlsoSize"])),ye.enableProviders=_.get("bookletProviders");var r=a.get(ye,"rubrics[0].name");x.set(r,"panels"),i(),a.isArray(ye.see_also)&&ye.see_also.length>0&&o()}ke=e.entranceOptions,we=e.entrance,Ce=e.analyticsPlace,Pe=!!e.floors,De=e.initedId||a.get(e,"data.id"),xe=e.contextId,be=w.meta(e.data,{group:e.group,bss:e.bss,is_poi:e.is_poi});var l={cardData:be.promise(),awardWinners:Be.getWinnersIds()["catch"](function(e){t.sendError("Error in init awardBadge in card",e)})},c=void 0;Pe&&(c=w.floors(f.get("floors").buildingId),l.floorsModel=c.loadBuilding()),d.props(l).then(function(i){var o=i.cardData,r=i.awardWinners;if(Pe){var l=f.get("floors").buildingId;o.floors=!0,o.complexId=l,o.mallName=C.getByBuildingId(l).fullName,o.floorName=c.getFloorName(o.id)}switch(a.includes(r,o.id)&&!t.isMausoleum&&t.init("awardBadge",{direction:"left",target:"Mixed_Card_event"}),be.is_poi&&(g.getFromPoiHash(o.id)||g.setNewPoiHash(o.id,o._hash),v.processQueue()),e.isParkingsFromFloors&&(o.isOpenedFromFloors=!0),o.type){case"building":case"adm_div":case"attraction":Me="view",Ae="geo";break;case"branch":default:Me="common",Ae="view"}return s(o,e),t.viewContext=D(),_.get("reviews")&&!a.isEmpty(o.reviews)?t.init("firmCardReview",{id:ye.id,point:ye.point,reviews:o.reviews,analyticsPlace:Ce,analyticsLabel:"Mixed_Card_event"},function(){n()}):n(),e.isParkingsFromFloors&&(Le=!0),null})["catch"](function(e){t.sendError("Error in combinedCard init",e),n(e)}),g.trackEvent("inspectlet",[{Firm_Card:"Mixed"}])},clientInit:function(){t.element("recoveryAds").data("rerender")&&t.element("recoveryAds").html(ye.recoveryAds.render());var e=!!l.getDiscounts(ye,m.getRegion());e&&U(),H(),t.config["features.proposals"]&&V(ye.id),A(ye),t.element("scroller").mod({overflow:"touch"}),M({onInit:!0,mute:!0,movingType:we?"onEntranceFocus":"notMove"}),_.get("businessLandingDemoMode")&&t.setTimeout(function(){t.notify("focusPoint",ye.point,{notChangeZoom:!0,checkBounds:!1})},0),_.get("floors")||t.element("floors").mod({hidden:!0}),z(),T.getItem("photosUploaderTooltipFirmCard")||0!=de()||(t.notify("showPhotosUploaderTooltip",{type:"firm",tooltipData:{sourceElement:t.element("addPhotoControl"),clickHandler:function(){t.notify("photosUploaderControlClicked",{id:ye.id,albumName:Me})}}}),T.setItem("photosUploaderTooltipFirmCard",!0)),"building"==ye.geo_type&&(t.googletag(),me(a.get(ye,"address.building_id"),a.get(ye,"links.providers")).then(function(e){ye.hasProvidersButton=e,a.get(ye,"links.providers")&&P("Provider_Show",ye.purpose_name,e),e&&(je?je.slot.rerenderDumb(he()):je=t.init("cardInfrastructure",he()))})["catch"](function(e){t.sendError("An error occurred while getting additional data (providers) for combinedCard.",e)}))},bind:function(){Te=t.element("scroller").baron().fix(),t.setTimeout(function(){Te.update()},100)},dispose:function(){be.dispose(),x.deleteLastByType("panels")},viewAttrs:function(){if(t.isMausoleum){var e=be.get("data");return{"data-mausoleum-lon":a.get(e,"point.lon")||"","data-mausoleum-lat":a.get(e,"point.lat")||""}}return{}},elements:{photos:{click:function(e){e.preventDefault(),t.notify("photosClicked",{id:ye.id,albumName:Me}),g.trackEvent("google",["Mixed_Card_event","Photos",be.get("mainRubricName")]),Pe&&g.trackEvent("googleFloors",["Mixed_Card","Photos","Click"]);var n=l.getPhotoAlbumCommon(ye);n&&t.notify("firmPhotoPreviewsClicked",{reg_bc_url:ye.reg_bc_url,place:Ce},be.bss)}},addPhotoControl:{click:function(){t.notify("photosUploaderControlClicked",{id:ye.id,albumName:Me,photosType:Ae}),g.trackEvent("google",["Mixed_Card_event","Photos_Add",be.get("mainRubricName"),a.get(t.viewContext,"photos.count")?0:1])}},facilitiesLink:{click:function(e){e.preventDefault(),g.trackEvent("google",["Mixed_Card_event","Accssblt","Click"]),Pe&&g.trackEvent("googleFloors",["Mixed_Card","Accssblt_Click"]),t.notify("photosClicked",{id:ye.id,albumName:"facilities"})}},contactSection:{selector:".card__section._contact"},rubric:{click:function(){var e=G.call(this);e||g.trackEvent("google",["Mixed_Card_event","Attribute_more",be.get("mainRubricName")])}},rubricTitleLink:{click:function(e){e.preventDefault();var n=$(this).data("id"),a=$(this).text();a&&n&&(g.trackEvent("google",["Mixed_Card_event","Rubric_click",a]),t.bssContext.startNewChain({pr:"rubric"}),t.notify("rubricClicked",{name:a,id:n}))}},rubricsItemLink:{click:function(e){e.preventDefault();var n=$(this).parent().data("id"),a=$(this).text();a&&n&&(g.trackEvent("google",["Mixed_Card_event","Rubric_click",a]),Pe&&g.trackEvent("googleFloors",["Mixed_Card","Rubric_Click"]),t.bssContext.startNewChain({pr:"rubric"}),t.notify("rubricClicked",{name:a,id:n}))}},filialsLink:{click:function(e){t.bssContext.startNewChain({pr:"filial"}),t.notify("branchesClick",{id:ye.org&&ye.org.id,branch:[ye.id],place:Ce,reg_bc_url:ye.reg_bc_url},be.bss),g.trackEvent("google",["Mixed_Card_event","Branches"]),e.preventDefault()}},addressLink:{click:function(e){e.preventDefault(),$(this).parent().mod().notClickable||(t.notify("addressSelected",ye),g.trackEvent("google",["Mixed_Card_event","Address"]),ye.address&&ye.address.reg_bc_url&&t.notify("addressClicked",{place:Ce,reg_bc_url:ye.reg_bc_url},be.bss))}},footerBugReportLink:{click:function(){"branch"==ye.type?t.notify("bugReportLinkClicked",ye):(f.showFeedback({feedbackType:"mapError",lon:a.get(ye,"point.lon"),lat:a.get(ye,"point.lat"),placeTitle:p.getTitle(ye,y)}),f.push()),Pe&&g.trackEvent("googleFloors",["Mixed_Card","Error_Click"])}},footerContent:{},booklet:{click:function(e){var n=l.getBooklet(ye,y);n&&n.value&&(t.notify("bookletButtonClicked",n.value,{regBc:n.reg_bc_url,analyticsPlace:Ce}),g.trackEvent("google",["Mixed_Card_event","Booklet_click",be.get("mainRubricName")]),g.trackEvent("yandex",["BOOKLET_OPEN"]),Pe&&g.trackEvent("googleFloors",["Mixed_Card","Booklet","Click"])),e.preventDefault()}},apartments:{click:function(e){t.notify("showApartmentsOnMapButtonClicked",ye.org.id),e.preventDefault()}},floors:{click:function(e){e.preventDefault();var n=a.get(ye,"address.building_id");t.bssContext.continueChain(),t.notify("floors",C.getByBuildingId(n),{branchId:xe}),t.notify("showInFloorsClicked",{place:Ce,reg_bc_url:ye.reg_bc_url},be.bss),C.hasBranch(l.getStaticId(ye.id))?g.trackEvent("googleFloors",["Floors_Enter","Mixed_Mall_Card_Button","Click"]):g.trackEvent("googleFloors",["Floors_Enter","Mixed_Card_Button","Click"])}},proposalsButton:{click:function(){t.notify("proposalsCoverageClicked",Se,ye.name)}},plusOne:{click:function(e){var n=l.getPlusOne(ye);e.stopPropagation(),e.preventDefault(),t.notify("plusOne",ye.id,n),g.trackEvent("google",["Mixed_Card_event","Plusone_click",be.get("mainRubricName")]),t.notify("plusOneClicked",{place:Ce,reg_bc_url:ye.reg_bc_url},be.bss)}},discounts:{click:function(e){e.preventDefault(),t.notify("discountsButtonClicked",{branchId:l.getStaticId(ye.id),place:Ce,reg_bc_url:ye.reg_bc_url},be.bss),Pe&&g.trackEvent("googleFloors",["Mixed_Card","Discounts_Preview_Click"])}},footerOwnerLink:{click:function(e){Ne.showOwner&&(t.notify("showPromoOwner","firm_profile",ye.org&&ye.org.id),e.preventDefault()),g.trackEvent("google",["Mixed_Card_event","Owner"]),Pe&&g.trackEvent("googleFloors",["Mixed_Card","Owner_Click"])}},adsIn:{click:function(e){e.preventDefault(),ye.ads&&ye.ads.article&&(t.notify("ownerInfoClick",{id:xe||ye.id,place:Ce,reg_bc_url:ye.reg_bc_url},be.bss),g.trackEvent("google",["Mixed_Card_event","Additional_Info",be.get("mainRubricName")]),Pe&&g.trackEvent("googleFloors",["Mixed_Card","Additional_Info_Click"]))}},adsLinkIn:{mouseenter:W,focus:W,click:function(){Pe&&g.trackEvent("googleFloors",["Mixed_Card","Adv_Link_Click"])}},footerAdvLink:{click:function(){g.trackEvent("google",["Mixed_Card_event","Advertisement","Your_adv"]),Pe&&g.trackEvent("googleFloors",["Mixed_Card","Adv_Click"])}},nearParkingsLink:{click:function(){Le=!0;var e=a.merge({},be.bss);e.bssContext=t.bssContext,e.isPoi=be.is_poi,"branch"==ye.type&&t.notify("parkingsShownWithBc",ye,e),t.notify("parkingsShown",ye),Pe&&g.trackEvent("googleFloors",["Mixed_Card","Parking_Click"])}},scroller:{scroll:function(){Ge(this)}}},"interface":{tabType:"firms",getMapOptions:function(){ke&&t.notify("takeMapOptions",ye,ke)},updateScroll:q,drawOnMap:function(){var e=Object.assign({},ye,{id:De});t.notify("mapDataReady",e,Le)},clearMap:function(){t.notify("clearMap",Object.assign({},ye,{id:De}),Le)},parkingsResult:function(e){if(!e){var n=t.element("nearParkings");n&&n.text(y._t("Нет информации о парковках"))}var a=Ie?"Discovery":"Recovery";g.trackEvent("google",["Mixed_Card_event","Parking_near",a,+e])},activateContent:function(){if(!We["interface"].deactivatedOnce&&!We["interface"].activatedOnce){if(g.trackEvent("google",["Cards","Firm","Mixed"]),g.trackEvent("yandex",["CARD_FIRM_MIXED"]),ye){if(t.broadcast("contact:shown"),(ye.reg_bc_url||xe)&&t.setTimeout(function(){t.notify("combinedCardOpened",{place:Ce,reg_bc_url:ye.reg_bc_url,id:xe},be.bss)},0),a.isArray(ye.see_also)&&ye.see_also.length>0){var e=!!a.find(ye.see_also,function(e){return e.ads});e&&g.trackEvent("google",["Recovery","Show","Card_recovery"])}ye.links&&ye.links.entrances&&ye.links.entrances.length&&g.trackEvent("google",["Mixed_Card_event","Enter","Show"]),ye.reviews||g.trackEvent("google",["Mixed_Card_event","Reviews","No_Up_reviews"]),ye.ads&&ye.ads.article&&g.trackEvent("google",["Mixed_Card_event","Additional_Info_Show",be.get("mainRubricName")]),ye.point||g.trackEvent("google",["Mixed_Card_event","Address_Null"]),R(ye)||g.trackEvent("google",["Mixed_Card_event","Phone_Null"]),N(ye)||g.trackEvent("google",["Mixed_Card_event","Site_Null"]),F(ye)&&g.trackEvent("google",["Mixed_Card_event","Stop_Show",be.get("stopType")]),B(ye)&&g.trackEvent("google",["Mixed_Card_event","Landmarks","Show"]),ye.schedule||g.trackEvent("google",["Mixed_Card_event","Time_Null"]),ye.org&&ye.org.branch_count>1&&g.trackEvent("google",["Mixed_Card_event","Branches_Show"]),a.findWhere(ye.external_content,{type:"photo_album",subtype:"common"})&&(g.trackEvent("google",["Mixed_Card_event","Photos_Show",be.get("mainRubricName")]),Pe&&g.trackEvent("googleFloors",["Mixed_Card","Photos","Show"])),a.findWhere(ye.external_content,{type:"photo_album",subtype:"facilities"})&&g.trackEvent("google",["Mixed_Card_event","Accssblt","Show"]),a.findWhere(ye.external_content,{type:"photo_album",subtype:"view"})&&g.trackEvent("google",["Mixed_Card_event","Build_photos","Show"]),a.find($e,"type","path")&&g.trackEvent("yandex",["BRNCH_CRD_RT_SH"]),l.getBooklet(ye,y)&&Pe&&g.trackEvent("googleFloors",["Mixed_Card","Booklet","Show"]),!Pe&&l.checkFloors(ye,_,C)&&(C.hasBranch(l.getStaticId(ye.id))?g.trackEvent("googleFloors",["Floors_Enter","Mixed_Mall_Card_Button","Show"]):g.trackEvent("googleFloors",["Floors_Enter","Mixed_Card_Button","Show"]))}We["interface"].activatedOnce=!0}We["interface"].setSeoParams()},pathfinderEntrance:M,setSeoParams:function(){var e=void 0;return e="branch"!=ye.type?p.getSeoParams(ye,y,S):l.prepareForSeo(ye),t.notifySeoParams(e),!0},"orientationСhange":function(){var e=t.element("scroller");e.mod({overflow:"auto"}),setTimeout(function(){e.mod({overflow:"touch"})},100)},getPrintData:function(){var e=a.clone(t.viewContext),n=t.modules.contact,i=t.modules.schedule;if(n){var o=n["interface"].printContext.call(n);e.contact=o&&o.html}if(i){var r=i["interface"].printContext.call(i);e.schedule=r&&r.html}return{analyticsLabel:"Mixed_Card",layout:"full","static":t.renderPartial("print",e),externalPrintParams:{singleMarker:!0}}},getAnalyticsPlace:function(){return Ce},prepareForPrint:function(){t.notify("addressSelected",ye)},openSendEmailForm:function(){t.notify("openSendEmailForm",ye)}},dispatcher:{"contact:expand":q,"contact:collapse":q,"schedule:toggled":O,"recoveryAds:firmDisplayed":function(e){this.stop(),We["interface"].deactivatedOnce||t.notify("firmDisplayed",e,g.PLACE_CATALOG)},"firmCardReview:reviewsLinkClicked":j,"firmCardReview:reviewClicked":function(){t.notify("firmReviewClicked",{place:Ce,reg_bc_url:ye.reg_bc_url},be.bss)},"contact:expanded":function(){ye.reg_bc_url&&t.notify("allContactsClicked",{place:Ce,reg_bc_url:ye.reg_bc_url},be.bss)},"contact:dial":Q,"contact:phonesShown":a.once(Q),"contact:contactClick":Q,"favoritesButton:favorite":function(){Pe&&g.trackEvent("googleFloors",["Mixed_Card","Favorites_Add"])},"favoritesButton:unfavorite":function(){Pe&&g.trackEvent("googleFloors",["Mixed_Card","Favorites_Remove"])},"contact:sendEmailLinkClicked":function(){t.notify("sendEmailClicked",{place:Ce,reg_bc_url:ye.reg_bc_url,analyticsLabel:"Mixed_Card_event"},be.bss)}}};return We},t.exports._args=["slot","$dgApi","$appState","$regionManager","$analytics","$featureSwitcher","$bssContext","$i18n","$bookletApi","$proposalsApi","$models","$contextStorage","$floorsManager","$discountsApi","$syncRegistry","$localStorage","$wkt"]},{"../../helpers/booklet":"/helpers/booklet.js","./actionsList":175,"./prepareDataForDumpModules":176,"./viewModel":178,"./viewModelMediaButtons.js":179,bluebird:384,lodash:"lodash"}],"/modules/cardActions/cardActions.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("lib/lazyModule");t.exports=function(e){function t(t){return t.module?e.init(t.module.type,t.module.data):e.initDumb("cardActionsItem",t,t.type)}return i(function(e){var n=e.map(function(e){return{module:t(e),isDouble:a.get(e,"buttons.length")>1}});return{viewContext:function(){return n}}})}},{lodash:"lodash"}],"/modules/cardActionsButton/cardActionsButton.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule");t.exports=function(){return a(function(e){return{viewContext:function(){return{icon:e.icon,type:e.type,href:e.href,tag:e.href?"a":"span",active:e.active,disabled:e.disabled}},elements:{btn:{click:!e.disabled&&e.onClick,mouseenter:e.onMouseenter,focus:e.onFocus}}}})}},{}],"/modules/cardActionsItem/cardActionsItem.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule");t.exports=function(e){return a(function(t){var n=t.buttons.map(function(t){return e.initDumb("cardActionsButton",t,t.type)});return{viewContext:function(){return{buttons:n}},viewAttrs:{"data-text":t.text,"class":t.disabled?"_disabled":""}}})}},{}],"/modules/cardAttractions/cardAttractions.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule");t.exports=function(e){function t(t){return e.initDumb("cardAttractionsItem",t,t.header)}var n={collapsed:!0};return a(function(a){var i=t(a.firstAttractionItem),o=a.isCollapsable,r=o&&n.collapsed,s=void 0;return a.additionalAttractionsList&&(s=a.additionalAttractionsList.map(t)),{viewContext:function(){return{initedFirstAttractionItem:i,initedAdditionalAttractionsList:s,expanderLabel:r?a.expanderLabels.expand:a.expanderLabels.rollup,isCollapsed:r,isCollapsable:o}},elements:{more:{click:function(t){t.preventDefault(),n.collapsed=!n.collapsed,e.rerenderDumb(a)}}}}})}},{}],"/modules/cardAttractionsItem/cardAttractionsItem.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("lib/lazyModule");t.exports=function(e){var t={collapsed:!0};return i(function(n){var i=!!a.size(n.preview),o=i&&t.collapsed;return e.mod({collapsable:i,collapsed:o}),{viewContext:function(){return{text:n.text,preview:n.preview,header:n.header}},elements:{block:{click:function(){t.collapsed=!t.collapsed,e.rerenderDumb(n)}}}}})}},{lodash:"lodash"}],"/modules/cardFeatures/cardFeatures.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule");t.exports=function(e){function t(t){return e.initDumb("cardFeaturesItem",t,t.purpose)}return a(function(e){var n=e.map(t);return{viewContext:function(){return n}}})}},{}],"/modules/cardFeaturesItem/cardFeaturesItem.js":[function(e,t,n){"use strict";var a=e("../../lib/lazyModule");t.exports=function(){return a(function(e){return{viewContext:function(){return{seoLink:e.seoLink,text:e.text,additional:e.additional,comment:e.comment}},viewAttrs:{"class":e.purpose?"_purpose_"+e.purpose:""},elements:{link:{click:function(t){t.preventDefault(),e.onParkingFeatureClick&&e.onParkingFeatureClick(e.id)}}}}})}},{"../../lib/lazyModule":"/lib/lazyModule.js"}],"/modules/cardHeader/cardHeader.js":[function(e,t,n){var a=e("./viewModel"),i=e("lodash");t.exports=function(e){function t(e){var t=e.substr(1);if("fff"==t)return!0;if(6>t)return!1;var a=parseInt(t,16);return a>=n}var n=16711422,o={init:function(n){e.viewContext=e.invoke(a,[n])||{},e.viewContext.logo||e.mod({defaultLogo:!0}),e.viewContext.showLogo||e.viewContext.logo||e.mod({simple:!0});var o=e.viewContext.firmColor;o&&t(o)&&e.mod({underline:!0}),i.get(n,"mods")&&e.mod(n.mods)},elements:{},"interface":{}};return o}},{"./viewModel":181,lodash:"lodash"}],"/modules/cardInfrastructure/cardInfrastructure.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule");t.exports=function(e){function t(t){return e.initDumb("cardInfrastructureItem",t,t.type)}return a(function(e){var n=e.map(t);return{viewContext:function(){return n}}})}},{}],"/modules/cardInfrastructureApartmentsList/cardInfrastructureApartmentsList.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule");t.exports=function(e){return a(function(t){return{viewContext:function(){return{items:t.items,type:t.type}},bind:function(){t.onInitApartmentsList(e.element("listItem"))},elements:{listItem:{click:function(){var e=$(this).attr("href");t.onClickListItem(e)}}}}})}},{}],"/modules/cardInfrastructureFirmsList/cardInfrastructureFirmsList.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule");t.exports=function(e){return a(function(t){return{viewContext:function(){return{items:t.items,type:t.type}},bind:function(){t.onInitFirmsList(e.element("listItem"))},elements:{listItem:{click:function(){var e=$(this).data("id");t.onClickListItem(e)}},listItemNameLink:{click:function(e){e.preventDefault()}}}}})}},{}],"/modules/cardInfrastructureItem/cardInfrastructureItem.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule"),i=e("lodash");t.exports=function(e){return a(function(t){var n=void 0;return"firms"==t.type&&i.size(t.items)?n=e.initDumb("cardInfrastructureFirmsList",{type:t.type,items:t.items,onClickListItem:t.onClickListItem&&t.onClickListItem.firms,onInitFirmsList:t.onInitFirmsList},t.type):"apartments"==t.type&&i.size(t.items)&&(n=e.initDumb("cardInfrastructureApartmentsList",{type:t.type,items:t.items,onClickListItem:t.onClickListItem.apartments,onInitApartmentsList:t.onInitApartmentsList},t.type)),{viewAttrs:{"class":"_type_"+t.type},viewContext:function(){return{seoLinkUrl:t.seoLinkMore,type:t.type,more:t.more,title:t.title,count:t.count,hasProvidersButton:t.hasProvidersButton,description:t.description,initedInfrastructureList:n}},elements:{link:{click:function(e){e.preventDefault(),t.more&&t.onClick(t.type)}},providersButton:{click:t.onClickProvidersButton}}}})}},{lodash:"lodash"}],"/modules/cardLandmarks/cardLandmarks.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule");t.exports=function(e){function t(t){return e.initDumb("cardLandmarksItem",t,t.id)}return a(function(e){var n=e.map(t);return{viewContext:function(){return n}}})}},{}],"/modules/cardLandmarksItem/cardLandmarksItem.js":[function(e,t,n){"use strict";var a=e("../../lib/lazyModule");t.exports=function(){return a(function(e){return{viewContext:function(){return{id:e.id,type:e.type,subtype:e.subtype,stationId:e.stationId,name:e.name,distance:e.distance,fallback:e.fallback,rotateStyle:e.rotateStyle,seoLink:e.seoLink}},elements:{link:{click:function(t){e.onLandmarksLinkClick(e.id,e.type,e.subtype,e.stationId),t.preventDefault()}}}}})}},{"../../lib/lazyModule":"/lib/lazyModule.js"}],"/modules/cardNearStops/cardNearStops.js":[function(e,t,n){"use strict";var a=e("../../lib/lazyModule");t.exports=function(){return a(function(e){return{viewContext:function(){return{name:e.name,seoLink:e.seoLink,distance:e.distance}},viewAttrs:{style:"border-color: "+(e.color||"#666")},elements:{link:{click:function(t){e.onNearStopsLinkClick(e.id,e.type),t.preventDefault()}}}}})}},{"../../lib/lazyModule":"/lib/lazyModule.js"}],"/modules/cardParking/cardParking.js":[function(e,t,n){"use strict";var a=e("../../lib/lazyModule");t.exports=function(){return a(function(e){return{viewContext:function(){return{properties:{type:e.subtype,levelCount:e.levelCount,accessType:e.accessType,accessPaidType:e.accessPaidType,places:e.places}}}}})}},{"../../lib/lazyModule":"/lib/lazyModule.js"}],"/modules/cardRoutes/cardRoutes.js":[function(e,t,n){"use strict";t.exports=function(e){var t=void 0;return{init:function(n){var a=n.list,i=n.header;e.mod({type:i.type}),t={list:a.map(function(t){return e.init("cardRoutesListItem",t)}),type:i.type,header:{counter:a.length,text:i.text,type:i.type,city:i.city}}},viewContext:function(){return t}}}},{}],"/modules/cardRoutesListItem/cardRoutesListItem.js":[function(e,t,n){"use strict";var a=req("helpers/route");t.exports=function(){function e(e){return e.preventDefault(),t.onClick()}var t=void 0;return{init:function(e){t=e;var n=a.splitRouteName(t.name);t.name=n.name,t.note=n.note},viewContext:function(){return t},elements:{block:{click:e}}}}},{}],"/modules/chat/chat.js":[function(e,t,n){t.exports=function(e){function t(){function t(){i.sandbox="allow-scripts allow-same-origin";var t=i.contentWindow,n=i.contentDocument,o=n.createElement("script");o.type="text/javascript",o.async=!0,o.src=r,n.getElementsByTagName("head")[0].appendChild(o),o.onload=o.onreadystatechange=function(){var i=n.createElement("style");i.innerHTML="body .intercom-sheet-header-button.intercom-sheet-header-minimize-button  { display: none !important; } ",n.body.appendChild(i),t.Intercom.public_api.boot({app_id:s}),t.Intercom.public_api.show(),t.Intercom.public_api.onShow(function(){e.mod({fakeChatShowed:!1,loading:!1})}),t.Intercom.public_api.onHide(function(){t.Intercom.public_api.shutdown(),a()}),t.Intercom.public_api.trackEvent("user-page",{url:l})},o.onerror=function(){e.mod({loading:!1,error:!0})}}return"undefined"==typeof window?!1:(i=document.createElement("iframe"),i.className="chat__containerIframe",i.name=o,i.width="100%",i.height="100%",i.style="","ie"==e.ua().browser.name.toLowerCase()?i.src="javascript:false;":i.src="about:blank",i.addEventListener?i.addEventListener("load",t,!1):i.attachEvent("onload",t),e.element("container")[0].appendChild(i),
null)}function n(){e.notify("chatShowed"),e.mod({fakeChatShowed:!0,loading:!0}),t()}function a(){i&&i.length&&i.parentElement.removeChild(i),e.dispose()}var i,o="iframeChat",r=e.config["chat.src"],s=e.config["chat.apiId"],l=window.location.href,c={init:function(){},clientInit:function(){n()},elements:{fakeChatHeaderClose:{click:function(){a()}}},"interface":{openChat:n,closeChat:a}};return c}},{}],"/modules/checkConnectionWidget/checkConnectionWidget.js":[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e,t,n,i){function o(e){l(),b&&b.cancel(),e&&(b=t(e,"streets",function(e,t){b=null,!e&&a.has(t,"kits")&&(k=a.map(t.kits,function(e){return a.get(e,"[0].text")}),s(k))}))}function r(t){e.element("inputGroup").mod({dropdown:!!t})}function s(t){x=null,e.element("suggestItems").html(e.renderPartial("suggestList",{suggestions:t})),r(!0)}function l(){k=[],x=null,e.element("suggestItems").html(""),r(!1)}function c(t){x=t,e.element("suggestItem").mod({selected:!1}),e.element("suggestItem:nth-child("+(x+1)+")").mod({selected:!0})}function u(e){if(!a.isEmpty(k)){var t;t="prev"==e?a.isNull(x)?k.length-1:x-1:a.isNull(x)?0:x+1,0>t&&(t=k.length-1),t>k.length-1&&(t=0),c(t)}}function d(t){var n=e.element("suggestItem:nth-child("+(t+1)+")").children().text();n&&(e.element("suggestInput").val(n),l(),h())}function h(){var t=e.block().find("[name=street]"),n=e.block().find("[name=building]"),a=!t.val()||!n.val();e.element("btn").mod({disabled:a})}function p(e,t){n.geo.search(e,{page_size:1},function(e,n){if(e)return t(e);var a=n.data[0].id;return t(null,a)})}function f(e,t,i){var o={house:t,servicing_group:"internet",enableMarkers:!1,page:1,page_size:e?2e3:1};n.searchByType("servicing",o,function(t){var n,o=a.get(t,"data");n=e?a.some(o,function(e){return C.getStaticId(e.id)==a.get(y,"provider.id")}):!a.isEmpty(o),i(n)})}function m(){var t=e.element("btn");t.mod({disabled:!0});var n={street:e.block().find("[name=street]").val(),building:e.block().find("[name=building]").val(),apartment:e.block().find("[name=apartment]").val()};w=null,e.notify("checkConnection"),p(n.street+", "+n.building,function(a,i){return a?(v({connected:!1}),void e.notify("addressNotFound")):(w=i,void f(y.providerId,i,function(a){v({connected:!!a,otherProvidersLink:!!y.providerId}),a?(t.mod({disabled:!1}),e.notify("addressFound",{address:n,geoid:i})):e.notify("addressNotFound")}))})}function g(){e.element("btn").mod().disabled||m()}function _(t){e.element("input").val(""),e.element("suggestInput").val("").trigger("focus"),l(),h(),t||e.notify("reset"),e.element("result").mod({hidden:!0}),"requestForm"!=y.type&&e.element("btn").mod({hidden:!1})}function v(t){t.connected||e.element("btn").mod({hidden:!1}),"mediaCard"!=y.type&&t.connected||e.element("result").html(e.renderPartial("resultMessage",{connected:t.connected,otherProvidersLink:!!t.otherProvidersLink,providerName:a.get(y,"provider.name")})).mod({hidden:!1})}var y,b,k,w,x=null,C=req("helpers/firm");return{init:function(t){y=t||{},e.mod({type:y.type})},viewContext:function(){var e="filters"==y.type;return a.extend(y,{showTitle:e})},bind:function(){var t;$(document).on("mousedown.street",function(e){t=e.target}),$(document).on("mouseup.street",function(){$(t).closest(e.block()).length||e.ifAlive(function(){return r(!1)})()})},dispose:function(){$(document).off("mousedown.street","mouseup.street")},elements:{suggestInput:{input:a.throttle(function(){h(),o($(this).val())},350),focus:function(){r(!0)},keydown:function(e){switch(e.keyCode){case 38:u("prev");break;case 40:u("next");break;case 13:d(x);break;case 9:r(!1)}}},suggestItem:{click:function(){var t=$(this).children().text();e.element("suggestInput").val(t),l()}},input:{input:h,keydown:function(e){13==e.keyCode&&g()}},reset:{click:function(){_()}},btn:{click:function(){g(),"mediaCard"!=y.type&&"requestForm"!=y.type||i.trackEvent("google",["Media_Card_event","Providers","Check"]),"filters"==y.type&&i.trackEvent("google",["Search","Media_Filters_Providers","Check"])}},showAllProviders:{click:function(){var t=[e.block().find("[name=street]").val(),e.block().find("[name=building]").val(),e.block().find("[name=apartment]").val()].join(",");e.notify("showProvidersInBuilding",w,t),i.trackEvent("google",["Media_Card_event","Providers","Show_All"])}}},"interface":{checkConnection:m,reset:_,showResultMessage:function(e){v({connected:e,otherProvidersLink:!0})},focus:function(){e.element("suggestInput").trigger("focus")},hideSubmit:function(){e.element("btn").mod({hidden:!0}),e.element("result").mod({hidden:!0})},setAddress:function(t,n){if(a.isString(t)){var i=t.split(",");y.address={},a.each(["street","building","apartment"],function(e,t){i[t]&&(y.address[e]=i[t].trim())}),n&&e.notify("addressFound",{address:y.address,geoid:n})}},mediaResize:function(t){e.mod({columns:t})}}}},t.exports._args=["slot","$suggestApi","$dgApi","$analytics"]},{lodash:"lodash"}],"/modules/cityQuora/cityQuora.js":[function(e,t,n){var a=e("lodash");t.exports=function(t,n,i,o){function r(){return t.element("formQuestion").val().trim().length>0&&t.element("formName").val().trim().length>0&&/.+@.+\..+/i.test(t.element("formMail").val().trim())}function s(){var e=r();t.element("formSubmit").prop("disabled",!e)}function l(){t.element("formQuestion").val(""),s()}function c(e,t){if(!t)return"";var n=a.find(e,function(e){return e.short_id==t});return n?n.name:""}var u,d,h,p={init:function(e){h=e||{},u=o.get("isSeoTraffic")?"seo":"notSeo",d=h.rubricShortId},clientInit:function(){t.notify("cityQuoraFormShow",u)},bind:function(){t.element("source").val(u),t.element("project").val(i.getRegion().code),t.element("rubric").val(c(t.searchContext.read("contextRubrics"),d)),t.element("scroller").baron()},viewContext:function(){var a={i18n:n,isMausoleum:t.isMausoleum},i=e("./viewModel");return t.invoke(i,[h,a])},elements:{formName:{keyup:a.debounce(s,300)},formMail:{keyup:a.debounce(s,300)},formQuestion:{keyup:a.debounce(s,300)},formSubmit:{click:function(){t.element("form").mod({hidden:!0}),t.element("success").mod({hidden:!1}),t.notify("cityQuoraFormSend",u)}},formAnother:{click:function(){l(),t.element("form").mod({hidden:!1}),t.element("success").mod({hidden:!0})}}},"interface":{}};return p},t.exports._args=["slot","$i18n","$regionManager","$syncRegistry"]},{"./viewModel":182,lodash:"lodash"}],"/modules/citySelect/citySelect.js":[function(e,t,n){var a=e("lodash");t.exports=function(t,n,i,o,r,s){function l(e){var n=t.element("groupItemLink").filter('[data-id="'+e+'"]').parent();t.element("groupItem").mod({current:!1}),n.mod({current:!0})}function c(e){t.notify("changeRegion",e)}function u(){d&&(d.update(),t.ua().isIE(8)||t.element("suggest")[0].focus())}var d,h,p={},f=req("helpers/string").toLocal,m=n.getRegion()||{},g=e("./viewModel"),_=10,v=s(),y=!1;n.on("changeRegion",c);var b={init:function(e,i){t.mod({visible:e.visible}),n.loadRegions(function(){p=n.getNativeRegions(),y=a.keys(p).length<=_,y&&(t.notify("simpleView"),t.mod({simpleView:!0})),i()})},clientInit:function(){},bind:function(){d=t.element("scroller").baron(),l(m.id),v.resolve()},viewContext:function(){return g(p,m,r)},elements:{block:{click:function(){b["interface"].activate(!0)}},group:{},groupItem:{},groupItemLink:{click:function(e){var t=$(this).data("id");c(t),e.preventDefault()}},scroller:{},scrollBar:{},suggest:{input:function(){var e=f(t.element("suggest").val()),n=a.size(p);t.element("groupItemLink").parent().mod({hl:!1});for(var o=0;n>o;o++)if(p[o]){var r,s=p[o].name.toLowerCase(),l=e&&0==s.indexOf(e.toLowerCase());l&&(r=t.element("groupItemLink").filter('[data-id="'+o+'"]'),$(r).parent().mod({hl:!0}))}var c=e[0]&&e[0].toUpperCase(),u=t.element("group").filter('[data-letter="'+c+'"]')[0],d=u&&+u.offsetTop;t.element("scroller")[0].scrollTop=d+5,clearTimeout(h),h=t.setTimeout(function(){t.element("suggest").val(""),i.trackEvent("google",["Cityselect","Typein"])},1e3)}}},"interface":{activate:function(e){t.setTimeout(function(){t.mod({visible:!!e}),e&&v.then(function(){u()})},t.mod().visible!=e?500:0)},setSeoParams:function(){function e(){var e={ru:r._gg("России"),kz:r._gg("Казахстана"),ua:r._gg("Украины"),ae:r._gg("UAE"),cy:r._gg("Cyprus"),cz:r._gg("České republiky"),it:r._gg("italiane"),cl:r._gg("Chile")};return e[m.country_code]||""}return t.notifySeoParams({type:"cities",countryNameGenitive:e()}),!0},invalidateUI:u,changeRegion:c,selectCurrentRegion:l}};return b},t.exports._args=["slot","$regionManager","$analytics","$appState","$i18n","$defer"]},{"./viewModel":183,lodash:"lodash"}],"/modules/citySelectPhone/citySelectPhone.js":[function(e,t,n){var a=e("moment"),i=req("helpers/link");t.exports=function(t,n,o,r,s){function l(e){t.notify("changeRegion",e)}function c(){var e=a().add(time.userTimeOffset,"seconds"),n=e.utcOffset(p&&p.time_zone?p.time_zone.offset:0).format(s.getFormats().time.dashboard);t.element("time").text(n)}function u(){p=n.getRegion();var e=p.code||"default";t.element("coa").attr("src",t.location.uri("/assets/cities/logo_"+e+".svg")),t.element("title").text(p.name),c()}function d(){var e=t.ua().osName;e||(e="android");var n={ios:"iOS",android:"Android",windowsphone:"Windows Phone",blackberry:"Blackberry"};return{osName:e,osReadable:n[e]}}var h={},p=n.getRegion()||{},f=e("./viewModel"),m=[],g={};n.on("changeRegion",l);var _={changeState:function(e){(e.panels&&e.panels.added||e.mapcenter||"hidden"==e.dashboard)&&(t.mod({hidden:!0}),t.notify("hid")),"visible"==e.dashboard&&t.mod({hidden:!1})},init:function(e,a){n.loadRegions(function(){h=n.getNativeRegions(),t.mod({multiple:n.count()>1}),g=f(t,h,p,s,d().osName),m=g.list||[],a()})},clientInit:function(){u();var e=d();i.getMobileLinks(s,"phoneDashboard")[e.osName]&&o.trackEvent("google",["Mobile_vers","Dashboard_Show",e.osReadable]),t.element("list").append(t.renderPartial("citySelectList",{list:m}))},viewContext:function(){var e=p.code||"default";return m=g.list||[],g.logoPath=t.location.uri("/assets/cities/logo_"+e+".svg"),g},elements:{header:{click:function(){t.mod({expanded:!t.mod().expanded&&t.mod().multiple})}},title:{},coa:{},time:{},item:{click:function(){var e=$(this).data("id");l(e),t.mod({expanded:!1})}},ads:{click:function(){o.trackEvent("google",["Mobile_vers","Dashboard_Click",d().osReadable])}}},"interface":{showMobileDashboard:function(){t.mod({hidden:!1})},changeRegion:l,selectCurrentRegion:function(e){u(e)},updateTime:c}};return _},t.exports._args=["slot","$regionManager","$analytics","$appState","$i18n"]},{"./viewModel":184,moment:"moment"}],"/modules/collections/collections.js":[function(e,t,n){"use strict";function a(e){return{tabs:e.arrayOf(e.shape({type:e.string.isRequired,loaded:e.bool,loading:e.bool,count:e.number}).isRequired).isRequired,list:e.arrayOf(e.shape({id:e.string.isRequired}).isRequired),loaded:e.bool,loading:e.bool,loadError:e.string,added:e.bool,adding:e.bool,addError:e.string,hasAdd:e.bool,addValue:e.string,addMode:e.bool,addDisabled:e.bool,handlerTabChange:e.func.isRequired,onAddClickHandler:e.func.isRequired,onAddBlurHandler:e.func.isRequired,onAddChangeHandler:e.func.isRequired,onAddSubmitHandler:e.func.isRequired,onClickHandler:e.func.isRequired}}function i(e){return o.compose(f(e),c(p),l(a,"collections"))}var o=e("lodash"),r=req("lib/dumbModule"),s=r.dumb,l=r.checkPropTypes,c=r.setDefaultProps,u="favorites",d="subscribed",h="recommended",p={list:[],loaded:!1,loading:!0,loadError:"",added:!1,adding:!0,addError:"",showSoother:!1,hasAdd:!1,addValue:"",addMode:!1,addItemFailure:!0},f=o.curry(function(e,t){var n=o.map(t.list,function(t){return e.initDumb("collectionsItem",t,t.id)}),a=t.tabs,i=t.showSoother&&e.initDumb("favoritesEmpty");return{viewContext:function(){return{tabs:a,favoritesEmpty:i,list:n,loaded:t.loaded,loading:t.loading,loadError:t.loadError,added:t.added,adding:t.adding,addError:t.addError,hasAdd:t.hasAdd,addMode:t.addMode,addValue:t.addValue,addDisabled:t.addDisabled}},bind:function(){var n=e.element("input"),a=n.get(0);a&&!n.is(":focus")&&t.addMode&&(a.focus(),a.value=a.value)},elements:{block:{click:function(e){/\bcollections__(addButton|add|input)\b/.test(e.target.className)||(t.onClickHandler(),t.addMode&&t.onAddBlurHandler())}},favoritesTab:{selector:".collections__tabsItem._"+u,click:function(){var e=o.find(a,function(e){return e.type===u});e.onClick()}},subscribedTab:{selector:".collections__tabsItem._"+d,click:function(){var e=o.find(a,function(e){return e.type===d});e.onClick()}},interestingTab:{selector:".collections__tabsItem._"+h,click:function(){var e=o.find(a,function(e){return e.type===h});e.onClick()}},add:{click:function(){t.onAddClickHandler()},submit:function(e){t.onAddSubmitHandler(),e.preventDefault()}},input:{keyup:function(e){t.onAddChangeHandler(e.target.value)}}}}});t.exports=s(i)},{lodash:"lodash"}],"/modules/collectionsContainer/collectionsContainer.js":[function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t,n){switch(e){case p:return!1;case f:return n||!t;case m:return!t;default:return!0}}function o(e,t,n){var a=e.list,i=void 0===a?[]:a,o=e.loaded,r=void 0===o?!1:o;return n&&t!==m?!0:r?i.length?!l.some(i,function(e){return!!e.favorites_count}):!0:!1}function r(e,t){switch(t){case p:return e._t("Мои подборки");case f:return e._t("Подписки");case m:return e._t("Интересное");default:return""}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=e("lodash"),c=req("helpers/favoriteShare"),u=c.makeSocialShare,d=e("../../helpers/string"),h=d.capitalize,p="favorites",f="subscribed",m="recommended";t.exports=function(e,t,n,c,d,g){function _(e){b=function(){e(),b=l.noop}}function v(){var v=t.needsAuth(),y=t.getState().collections,b=y.active,w=y.addValue,x=void 0===w?"":w,C=l.get(y,b,{}),L=x.trim().length<1||C.adding,I=[p,f,m],T=l.map(I,function(e){var n,o=y[e]||{},s=o.loaded,l=o.loading,c=o.list,u=void 0===c?[]:c,_=u.filter(function(t){return e==f?!t.deleted&&t.is_subscribed:!t.deleted}).length,k=i(e,_,v),w=e===b,x=r(d,e),C=(n={},a(n,p,t.loadCollectionListOfFavorites),a(n,f,t.loadCollectionListOfSubscribed),a(n,m,t.loadCollectionListOfIntresting),n);return{type:e,title:x,loaded:s,loading:l,disabled:k,active:w,count:_,onClick:function(){if(!w&&!k){if(g.trackEvent("google",["Collections","Tab",h(e)]),e===p&&v)return void t.changeActiveCollection(e);t.changeActiveCollection(e),C[e]()}}}});return{tabs:T,loaded:C.loaded,loading:C.loading,loadError:C.loadError,showSoother:o(C,b,v),added:C.added,adding:C.adding,addError:C.addError,hasAdd:b==p,addValue:x,addMode:y.addMode,addDisabled:x.trim().length<1||C.loading,onClickHandler:function(){y.showedCoveredToolsItem>=0&&t.setCollectionShowedCoverToolsItem(-1),l.some(C.list,function(e){return e.showShare})&&t.setCollectionShowedShareToolsItem("")},onAddClickHandler:function(){var n=t.needsAuth();return n?(k=!0,e.notify("needsAuth"),void g.trackEvent("google",["Collections","Auth","Show"])):void(y.addMode||C.adding||t.changeAddCollectionMode(!0))},onAddBlurHandler:function(){t.changeAddCollectionMode(!1)},onAddChangeHandler:function(e){x.trim()!=e.trim()&&t.changeAddCollectionValue(e)},onAddSubmitHandler:function(){L||(t.addCollectionItemToFavorites(x),g.trackEvent("google",["Collections","Collection","Add"]))},list:l.map(C.list,function(a,i){var o=a.deleted,r=a.deleting,m=a.updating,v=a.restoring,k=r||m||v,w=y.renamedItem===i,x=y.showedCoveredToolsItem===i,C=!!a.showShare;return s({},a,{busy:k,uploadedCover:void 0===a.uploadedCover?!0:a.uploadedCover,showCoverUploader:y.showedCoverUploader,isRenameMode:w,isCoverMode:x,isSharedMode:C,renameValue:y.renamedValue,hasTools:!(o||k||w||x||C),onClickHandler:function(){if(!k&&!w){if(o)return void t.restoreCollectionItemFromFavorites(i);if(a.favorites_count>0){n.panels.add("favorites"),n.panels.get("favorites").collectionID=a.id,n.push();var e=l.get(l.find(T,{active:!0}),"type","");return void g.trackEvent("google",["Collections","Open",h(e)])}}},onDeleteClickHandler:function(){if(!a.deleting)switch(b){case p:t.deleteCollectionItemFromFavorites(i),g.trackEvent("google",["Collections","Collection","Remove"])}},onRenameClickHandler:function(){t.setCollectionRenamedItem(i,a.title)},onChangeTitleHandler:function(e){y.renamedValue!==e&&t.changeCollectionRenamedValue(e)},onTitleUpdateHandler:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],n=e.trim();n.length>0&&n!==a.title&&(t.updateCollectionItemFromFavorites(i,{title:n}),g.trackEvent("google",["Collections","Collection","Edit"])),t.setCollectionRenamedItem(-1)},onDescriptionUpdateHandler:function(e){t.updateCollectionItemFromFavorites(i,{description:e})},onChangeCoverClickHandler:function(){t.setCollectionShowedCoverToolsItem(i)},onShowCoverUploaderClickHandler:function(){t.showCollectionCoverUploaderItem(!0)},onCloseClickHandler:function(){y.showedCoveredToolsItem>=0&&t.setCollectionShowedCoverToolsItem(-1),C&&t.setCollectionShowedShareToolsItem("")},onCoverLoad:function(e){t.loadCollectionItemCover(i,e[0])},onCoverUpload:function(e){t.uploadCollectionItemCover(i,e),g.trackEvent("google",["Collections","Collection","Photo_Add"])},onCoverDeleteClickHandler:function(){t.deleteCollectionItemCover(i),g.trackEvent("google",["Collections","Collection","Photo_Delete"])},onShareClickHandler:function(){a.is_owned&&!a.sharing?t.shareCollectionItem(a,!0):t.setCollectionShowedShareToolsItem(a.id)},onSharedClickHandler:function(){t.setCollectionShowedShareToolsItem(a.id)},onSubscribeClickHandler:function(){return t.needsAuth()?(_(function(){var e=t.getState(),n=l.get(e,"collections."+f+".list",[]),i=l.some(n,function(e){return e.id==a.id});i||t.subscribeCollection(a.id,!0)}),void e.notify("needsAuth")):void(a.subscribing||(t.subscribeCollection(a.id,b!=f),g.trackEvent("google",["Collections","List","Subscribe"])))},onUnsubscribeClickHandler:function(){a.subscribing||(t.unsubscribeCollection(a.id,b!=f),g.trackEvent("google",["Collections","List","Unsubscribe"]))},makeSocialShare:u(e,c,d,"favoriteShare")})})}}function y(e){return e?t.loadCollectionListOfIntresting():Promise.all([t.loadCollectionListOfFavorites(),t.loadCollectionListOfSubscribed(),t.loadCollectionListOfIntresting()])}var b=l.noop,k=!1,w=void 0,x=void 0;return{init:function(){w=e.initDumb("collections",v()),g.trackEvent("google",["Collections","Open_Panel"])},clientInit:function(){var e=t.needsAuth();x=t.subscribe(function(){w.slot.rerenderDumb(v())}),y(e)},dispose:function(){x&&x(),g.trackEvent("google",["Collections","Close_Panel"])},"interface":{tabType:"favorite",loggedIn:function(){y(!1).then(b),k&&(g.trackEvent("google",["Collections","Auth","Success"]),k=!1)},loggedOut:function(){t.resetCollections(),y(!0)},setSeoParams:function(){return e.notify("setSeoParams",{title:d._t("Избранное")+" – "+c.getName()+" - "+d._t("2ГИС")}),!0}}}},t.exports._args=["slot","$favorites","$appState","$regionManager","$i18n","$analytics"]},{"../../helpers/string":"/helpers/string.js",lodash:"lodash"}],"/modules/collectionsItem/collectionsItem.js":[function(e,t,n){"use strict";function a(e){return{showDeleteDialog:!1,description:e.description}}function i(e){return e.deleted?"Восстановить":""}function o(e,t){switch(t){case"gallery":return[].concat(e,{type:t,icon:"favorites_gallery"});case"upload":return[].concat(e,{type:t,icon:"favorites_upload"});case"delete":return[].concat(e,{type:t,icon:"favorites_trash"});default:return e}}function r(e){function t(t){var n=t.is_owned?[["changeCover","rename","description","delete"],[t.is_shared?"shared":"share"]]:[["share",t.is_subscribed?"unsubscribe":"subscribe"]];return e.initDumb("favoriteTools",l({},t,{config:n,onDeleteClickHandler:function(){return t.setState({showDeleteDialog:!0})},onDescriptionClickHandler:function(){return t.setState({descriptionEdit:!0})}}))}function n(t){return e.initDumb("deleteDialog",{compact:!t.mediaMode,onYesClickHandler:function(){return t.onDeleteClickHandler()},onNoClickHandler:function(){return t.setState({showDeleteDialog:!1})}})}function a(t){return e.init("photosUploader",{id:t.id,album:"collection",type:"collection",onFileUpload:t.onCoverUpload,onFileLoad:t.onCoverLoad,blockType:"favorite"})}function r(t){return e.initDumb("favoriteShare",l({},t,{config:["vkontakte","twitter","facebook","odnoklassniki"],compactMode:!t.cover}))}return function(s){function l(){var e=s.getState(),t=(e.description||"").trim();t&&(s.onDescriptionUpdateHandler(t),s.setState({descriptionEdit:!1}))}var u=s.getState(),d=["upload",s.cover&&"delete"].reduce(o,[]),h=1==d.length,p=(h||s.showCoverUploader)&&!s.uploadingCover,f=p&&a(s),m=s.isSharedMode&&r(s),g=u.showDeleteDialog&&n(s),_=s.hasTools&&!u.showDeleteDialog&&t(s),v=s.coverSize?c.get(s,"cover.url_"+s.coverSize,!1):c.get(s,"cover.url",!1),y=v||s.isCoverMode;return{tag:s.tag,viewContext:function(){return{tools:_,coverTools:d,coverUploader:f,busy:s.busy,updated:s.updated,updating:s.updating,updateError:s.updateError,deleted:s.deleted,deleting:s.deleting,deleteError:s.deleteError,restored:s.restored,restoring:s.restoring,restoreError:s.restoreError,shareModule:m,isSharedMode:s.isSharedMode,isShared:s.is_owned&&s.is_shared&&!s.isSharedMode&&!u.showDeleteDialog,shared:s.shared,sharing:s.sharing,shareError:s.shareError,uploadCoverName:s.uploadCoverName,uploadedCover:s.uploadedCover,uploadingCover:s.uploadingCover,uploadCoverError:s.uploadCoverError,showCoverUploader:p,title:s.title,updatedTitle:s.updatedTitle,renameValue:s.renameValue,description:u.description,descriptionEdit:u.descriptionEdit,count:s.favorites_count,isRenameMode:s.isRenameMode,covered:y,coverUrl:v,isCoverMode:s.isCoverMode,deleteDialog:g}},viewAttrs:{"class":[s.favorites_count<1&&!s.deleted?"_empty":"",s.deleted?"_type_deleted":"",s.isRenameMode?"_editable":"",s.cover?"_type_covered":"",s.busy?"_type_busy":"",s.theme?"_theme_"+s.theme:""].join(" "),title:i(s)},bind:function(){var t=e.element("titleInput"),n=t.get(0),a=e.element("descriptionInput");n&&!t.is(":focus")&&s.isRenameMode&&t.cursor(),a[0]&&(a.css("height",a[0].scrollHeight),a.cursor())},elements:{block:{click:function(){s.onClickHandler()}},stopBublingCover:{selector:".collectionsItem__cover._stopBubling",click:function(e){e.stopPropagation()}},titleForm:{submit:function(e){e.preventDefault(),s.onTitleUpdateHandler(s.renameValue)}},titleInput:{keyup:function(e){s.onChangeTitleHandler(e.target.value)},blur:function(){s.onTitleUpdateHandler(s.renameValue)}},descriptionForm:{submit:function(e){e.preventDefault(),l()}},descriptionInput:{click:function(e){e.stopPropagation()},keyup:function(e){s.setState({description:e.target.value})},keypress:function(e){13==e.keyCode&&(e.preventDefault(),l())},blur:function(){l()}},close:{click:function(e){e.stopPropagation(),s.onCloseClickHandler()}},showCoverUploader:{selector:".collectionsItem__coverToolsItem._type_upload",click:function(){s.onShowCoverUploaderClickHandler()}},deleteCover:{selector:".collectionsItem__coverToolsItem._type_delete",click:function(){s.onCoverDeleteClickHandler()}},share:{click:function(e){e.stopPropagation()}}}}}}function s(e){return c.compose(r(e),h(e,a),p(f))}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=e("lodash"),u=req("lib/dumbModule"),d=u.dumb,h=u.localState,p=u.setDefaultProps,f={descriptionEdit:!1};t.exports=d(s)},{lodash:"lodash"}],"/modules/congestion/congestion.js":[function(e,t,n){"use strict";var a=e("bluebird");t.exports=function(e,t,n,i,o){function r(){s().then(h)["catch"](function(t){return e.sendError("error in congestion module",t)})}function s(){return i.inGlobal()?a.resolve(!0):(v=e.setTimeout(s,_),l().then(c).spread(d))}function l(){return new a(function(e,n){t.getDimension(function(t,a){return t?n(t):e(a)})})}function c(e){var t=u(e),n=g.getSoHard(t),a=!0;return[a,n,t]}function u(e){return e=(e+"").split("'")[1],parseInt(e,10)}function d(t,n,a){return e.mod({pressed:t,level:n}),e.block().attr("data-value",a),e.notify("traffic",t),t}function h(t){y=t,e.notify("switched",t)}function p(){clearTimeout(v),d(!1,!1,null),h(!1)}function f(){e.mod({visible:o.get("traffic")&&!i.inGlobal()})}function m(){f(),y&&s()}var g=req("helpers/traffic"),_=e.config["traffic.updateInterval"],v=void 0,y=!1;return{init:function(t){t=t||{},e.isClient&&t.isActive&&r()},clientInit:function(){n.onInit(f)},changeState:function(e){"traffic"in e&&(e.traffic?r():p())},elements:{control:{click:function(){e.notify("clicked",e.mod().pressed)}}},"interface":{enterGlobal:m,exitGlobal:m,display:function(t){e.mod({visible:t})}}}},t.exports._args=["slot","$trafficApi","$regionManager","$appState","$featureSwitcher"]},{bluebird:384}],"/modules/congestion2/congestion2.js":[function(e,t,n){t.exports=function(t){function n(e){return 10>e?"0"+e:""+e}function a(e){return n(Math.floor(e/60))+":"+n(Math.floor(e%60))}function i(e){var t=e.split(":");return 60*+t[0]+ +t[1]}function o(e){t.element("detailsForecastTimeRunner").attr("data-val",e)}function r(e){var n=t.element("detailsForecastWeekItem");n.mod({active:!1}),n.filter("[data-key="+e+"]").mod({active:!0})}function s(){var e=t.mod();return e.active&&"forecast"===e.mode}function l(){if(!c&&s())try{c=t.element("detailsForecastTimeTrack").rader({root:t.element("detailsForecastTime"),runners:t.element("detailsForecastTimeRunner"),runnersVal:[i(h.selectedTime)],values:[0,1439],pointsPos:[0,1439],$:$,click:!0,onUpdate:function(e){o(a(e.minVal))}})}catch(e){}}var c,u,d=e("./viewModel"),h={},p={init:function(){t.mod({visible:!0})},bind:function(){t.mod({mode:h.mode})},clientInit:function(){l(),r(h.selectedDay)},viewContext:function(){return d(u)},"interface":{switched:function(e,n,a){t.mod({level:n}),t.element("control").attr("data-value",a),t.notify("switched",e)}},elements:{control:{click:function(){var e=t.mod().active;t.mod({active:!e})}},detailsModeNow:{click:function(){t.mod({mode:"now"})}},detailsModeForecast:{click:function(){t.mod({mode:"forecast"})}},detailsForecast:{},detailsForecastTime:{},detailsForecastTimeTrack:{},detailsForecastTimeRunner:{},detailsForecastWeek:{},detailsForecastWeekItem:{click:function(){r($(this).attr("data-key"))}},detailsClose:{click:function(){t.mod({active:!1})}}},modHandlers:{active:l,mode:l}};return p}},{"./viewModel":185}],"/modules/contact/contact.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/contact"),o=req("helpers/analytics");t.exports=function(t,n,r){function s(e){"website"==e.type&&(n.trackEvent("google",[b,"Site","Contact"]),n.trackEvent("yandex",["SITE_CLCK_CNTCTS"])),y&&("website"==e.type?n.trackEvent("googleFloors",[k,"Site_Click"]):"email"==e.type?n.trackEvent("googleFloors",[k,"Email_Click"]):i.isSocial(e)&&n.trackEvent("googleFloors",[k,"Social_Click"])),t.notify("contactClick",e)}function l(e){return e&&e.other&&e.other.groups&&a.each(e.other.groups,function(e){e.schedule&&(e.schedule=t.init("schedule",{model:e.schedule,firmModel:f}))}),e}function c(e){var t=$(e).data("group"),n=$(e).data("index");return f&&f[t]&&f[t].contacts&&f[t].contacts[n]}function u(){var e=c(this);if("website"==e.type){var t=$(this).find("a");o.changeTimeParam(t)}}function d(e){var a=e||{},i=t.element("other"),o=i.mod().expanded;i.mod({expanded:a.noToggle||!o}),o||a.noTracked||n.trackEvent("google",[b,"Contacts","Click"]),t.notify("expanded")}function h(){var e=t.viewContext.phones;if(t.element("phones").mod({shown:!0}),e){var n=c(t.element("phonesItemLink").get(1));n&&t.notify("phonesShown",n)}else d({noToggle:!0,noTracked:!0})}function p(e){var a=e||t.element("phonesItemLink").filter("[href]").first(),i=c(a);if(i){v=v||t.init("push2dialCaller",function(e,n){e||(t.block().append(n.render()),n.bindEvents())});var o=i.value||i.text,r=m.name;o&&v["interface"].dial(a,o,r),t.notify("dial",i),n.trackEvent("google",[b,"P2D"])}}var f=void 0,m=void 0,g=void 0,_=e("./viewModel"),v=void 0,y=void 0,b=void 0,k=void 0;return{init:function(e){f=e.model,"dropdown"==e.mode&&(f=a.map(f,function(e){return{name:e.name,contacts:a.filter(e.contacts,i.isPhone)}})),g=e.analyticsPlace||null,m=e.firmModel||e.cardModel,b=e.mainAnalyticsLabel||"Firm_Card_event",k=e.floorsAnalyticsLabel||k,y=m.floors;var n="dropdown"!=e.mode&&r.get("claimToFirm")&&a.get(m,"email_for_sending.allowed"),o=t.invoke(_,[f,{masterSchedule:e.masterSchedule,expandEverything:t.isMausoleum||"dropdown"==e.mode,dropdownMode:"dropdown"==e.mode,analyticsPlace:g,firmModel:m,claimToFirm:n,ill:a.get(m,"bss.ill"),isUserFromPhone:t.ua().isPhone,userOS:t.ua().osName}]);t.mod({dropdownMode:"dropdown"==e.mode}),t.viewContext=l(o)||{}},elements:{phonesItemLink:{click:function(e){var a=$(this);a.attr("href")&&!t.ua().isPhone&&r.get("p2d")&&(y&&n.trackEvent("googleFloors",[k,"Phone","Click"]),p(this),e.preventDefault())}},claimToFirmButton:{click:function(){t.notify("sendEmailLinkClicked",m),n.trackEvent("google",[b,"Email","Click"])}},link:{click:function(){var e=c(this);e&&s(e)},mouseenter:u,focus:u},phonesFade:{click:function(){t.mod().dropdownMode||n.trackEvent("google",[b,"Phone","Click"]),y&&n.trackEvent("googleFloors",[k,"Phone","Show"]),h()}},otherHeader:{click:function(){d()}}},"interface":{printContext:function(){var e=a(f).map("contacts").flatten().filter(i.isPhone).value();return{html:t.renderPartial("print",{phones:e})}},shown:function(){t.viewContext.other||t.mod().dropdownMode||n.trackEvent("google",[b,"Contacts","Null"])},showPhones:h}}},t.exports._args=["slot","$analytics","$featureSwitcher"]},{"./viewModel":186,lodash:"lodash"}],"/modules/contextPromo/contextPromo.js":[function(e,t,n){t.exports=function(t,n){var a,i=e("./viewModel.js"),o={init:function(e){a=e||{}},clientInit:function(){return o.viewContext?void t.notify("contextPromoButton","Show",a.subType):void t.mod({disabled:!0})},viewContext:function(){return i(a,t,n)},elements:{btn:{click:function(){t.notify("contextPromoButton","Click",a.subType)}}},"interface":{appear:function(){}}};return o},t.exports._args=["slot","$i18n"]},{"./viewModel.js":187}],"/modules/dashboard/dashboard.js":[function(e,t,n){var a=e("lodash"),i=e("bluebird"),o=req("helpers/time");t.exports=function(t,n,r,s,l,c,u,d,h,p){function f(){return o.getFormattedTime(T,u.getFormats().time.dashboard)}function m(){var e=f(),n=t.element("cityTime");n&&n.text(e)}function g(e){t.element("cityNameText").mod({link:e}),t.element("cityTime").mod({link:e})}function _(e){var n=T.country_code!=e.country_code,i=T.id!=e.id;if(i){if(T=a.clone(e),m(),t.element("cityNameText").text(T.name),g(w()),j)v(T.code);else{var o=t.element("cityNameLogo"),r=T.code||"default",s=t.location.uri("/assets/cities/logo_"+r+"."+P);o.attr("src")!=s&&(o.hide(),o.one("load",function(){o.show()}),o.attr("src",s))}n&&t.setTimeout(t.rerender,0),x()}}function v(e){var n="dashboard__cityNameLogo",a='<img src="'+t.location.uri("/assets/cities/logo_"+e+".png")+'" class="'+n+'">',i=$("."+n);i.off().remove(),t.element("cityName").prepend(a),i.on("error",function(){v("default")})}function y(){t.registry.get("isInit")||t.notifySeoParams({type:"city"})}function b(){y(),t.broadcast("googleTagAds:cityChanged")}function k(){var e=n.getNativeRegions();return t.config.universeId!=T.id&&a.keys(e).length>1}function w(){return k()||h.get("globalMap")}function x(){var e={region:T,isGrym:t.isGrym},n=t.invoke(R,[{},e]);t.rerenderPartial("metarubrics","meta",n)}function C(){return new i(function(e,n){return t.modules[M]?void e():void t.init(M,{visible:!0},function(a,i){return a?n(a):(t.mod({citySelect:!0}),B.resolve(i),e())})})}function L(e){return new i(function(n){t.init("weather",e,function(){n()})})}var I,T,S,E,P,j,M,A,D,R=e("./viewModel"),N="visible",B=d(),F=d(),O={init:function(e,o){e=e||{};var r=[],u=t.registry("ua").browser||{},d=!("IE"==u.name&&u.major<9);n.loadRegions(function(){F.resolve()}),P=d?"svg":"png",j="Opera"==u.name&&u.major<15,t.mod({
socialWelcome:!!l.get("socialReferer")}),T=a.clone(n.getRegion()),t.isGrym&&t.init("cityFilter");var p=!t.isGrym&&!c.queryString.has("printmode");p&&(A=t.init("googleTagAds",{type:"start"})),D=t.init("googleTagAds",{type:"teaser"}),t.init("apps");var m=k();h.get("dashboardWeather")&&r.push(L({showLink:m})),M=t.isGrym?"citySelect2":"citySelect";var g=T.code||"default",_={region:T,showAds:p,citySelectName:M,time:f(),showCityLink:w(),showThisCityLink:c.get("citySelect"),showOtherCityLink:m,city:{logoPath:t.location.uri("/assets/cities/logo_"+g+"."+P)},isGrym:t.isGrym};I={p2dIsBound:s.isBound()},S=t.invoke(R,[I,_]),c.get("citySelect")&&r.push(C()),i.all(r).then(function(){o()})["catch"](o)},clientInit:function(){n.onInit(_),n.on("init region",b),t.mod({citySelect:!!c.get("citySelect")}),t.element("cityTime").mod({hidden:c.get("dashboardAtUniverse/hidden")}),t.mod({universe:n.getRegion().id==t.config.universeId}),F.then(function(){g(w())}),t.ifAdBlockDetected(function(){p.getItem("teaserGapClosed")?t.element("promo").remove():(t.element("promo").html(t.renderPartial("teaserGap")),r.trackEvent("google",["Promo","Please","Show"]))})},bind:function(){g(w())},viewContext:function(){return S.ads=A,S.teaser=D,S},changeState:function(e){"citySelect"in e&&(t.modules[M]||(C(),B.then(function(e){t.element("cityselect").append(e.render()),e.bindEvents()})),t.mod({citySelect:e.citySelect}),e.citySelect?(t.broadcast(M+":invalidateUI"),r.trackEvent("google",["Cityselect","Open"])):(t.broadcast(M+":disableReporting"),e.city||r.trackEvent("google",["Cityselect","Close"]))),e.city&&t.mod({universe:e.city.id==t.config.universeId}),"dashboardAtUniverse/hidden"in e&&t.element("cityTime").mod({hidden:e["dashboardAtUniverse/hidden"]})},"interface":{setMode:function(e){switch(N=e){case"hidden":t.broadcast("googleTagAds:stopRotation");break;case"visible":t.mod().citySelect&&t.broadcast(M+":invalidateUI"),t.broadcast("googleTagAds:startRotation")}},rerender:t.rerender,setSeoParams:y,updateTime:m},elements:{cityNameLogo:{dblclick:function(){32==T.id?t.notify("changeRegion",1):t.notify("changeRegion",32)},error:function(){if(j)v("default");else{var e=t.element("cityNameLogo")[0];e.src!=E&&(e.src=t.location.uri("/assets/cities/logo_default."+P),E=e.src)}}},cityNameLink:{selector:".dashboard__cityNameText._link",click:function(e){t.notify("cityLinkClicked",t.mod().citySelect),e.preventDefault()},mouseenter:function(){t.element("cityselectLink").mod({mouseHover:!0})},mouseleave:function(){t.element("cityselectLink").mod({mouseHover:!1})}},cityselectLink:{click:function(e){t.notify("cityLinkClicked",t.mod().citySelect),e.preventDefault()}},cityTimeLink:{selector:".dashboard__cityTime._link",click:function(e){t.notify("cityLinkClicked",t.mod().citySelect),e.preventDefault()},mouseenter:function(){t.element("cityselectLink").mod({mouseHover:!0})},mouseleave:function(){t.element("cityselectLink").mod({mouseHover:!1})}},metarubricsItem:{click:function(e){e.preventDefault();var n=$(this).hasClass("_type_all");if(n)t.notify("allRubricsClicked");else{var a=$(this).data("rubric-query");r.trackEvent("google",["Dashboard","Meta",a]),r.trackEvent("yandex",["DASHBOARD_META"]),t.bssContext.startNewChain({pr:"dashboard_metarubric",tx:a}),t.notify("rubricClicked",{name:a})}}},close:{click:function(){t.notify("closeClicked",t.mod().citySelect)}},teaserGapClose:{click:function(){t.element("promo").remove(),p.setItem("teaserGapClosed",!0),r.trackEvent("google",["Promo","Please","Close"])}}},modHandlers:{citySelect:function(e){B.then(function(t){t["interface"].activate(e)})}},dispatcher:{"citySelect:simpleView":function(){t.mod({simpleView:!0})},"weather:hidden":function(){t.mod({weather:!1})},"weather:shown":function(){t.mod({weather:!0})}}};return O},t.exports._args=["slot","$regionManager","$analytics","$p2d","$syncRegistry","$appState","$i18n","$defer","$featureSwitcher","$localStorage"]},{"./viewModel":188,bluebird:384,lodash:"lodash"}],"/modules/dataViewer/dataViewer.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/panels"),o=req("helpers/discreteFrame"),r=e("async");t.exports=function(t,n,s,l,c,u){function d(e){function t(e){return e.conf&&e.conf.booked&&0!=e.index||l.get("businessLandingDemoMode")?"book":null}function n(){return l.get("floors")?"floorList":null}var i={filters:"book",booklet:"booklet",providerRequestForm:"booklet",award2015:"award",victory:"victory",eventCard:"eventCard",gallery:"gallery",products:"products",productCard:"products",floorList:n,firmCard:t,card:t},o=i[e.contentType];return a.isFunction(o)?o(e):o}function h(e){e=e||g();var n=["mediaResults","mediaCard","products","productCard"],i=e&&a.contains(n,e.contentType),o=a.pluck(W,"contentType"),r=["mediaResults","products","productCard"],s=a.intersection(o,r).length>0;G=!(!i||!s||c.state.routeTab||c.floors.isActive()),t.notify("updateMediaMode",G),t.broadcast("frame:updateMediaMode",G)}function p(e){var n=d(e);return G?"media":"gallery"==n?"gallery":"floorList"==n?"floorList":"victory"==n?"victory":t.registry.get("isInit")||"book"==n?n:null}function f(e){if(e.specialMode)return e.specialMode;var t=e.index+1;return Math.min(t,Z)+""}function m(e){var t;return"book"==e.specialMode?t="last":G||(t="center"),t}function g(){var e=a.last(W);return"last"==t.registry.get("framePosition")&&e&&e.conf?e.conf.booked=!0:("center"==t.registry.get("framePosition")&&e&&e.conf||1==W.length)&&(e.conf.booked=!1),e}function _(){return W.length>=2?a.takeRight(W,2)[0]:null}function v(){return t.mod().minimized?null:t.broadcast("frame[::hasPrintableModule][:last]:getContentModule")}function y(){}function b(e){function t(){if(!l)throw new y}var o=a.omit(e,"type","panelId","booked"),r=i.getModuleName(e),s=i.getFrameType(e.type),l=g(),c=["searchResults","mixedResults","mediaResults","floorsResults","products"],u=a.contains(c,r);if(u&&(o.type=e.type),"filters"==e.type?(t(),o=n(),l["interface"].whenContentInited().then(function(e){var t=e["interface"].getFiltersData(),n=e.slot.queryModules("searchResults[::isMode(firms)]")[0];!n&&"searchResults"==e.type&&e["interface"].isMode("firms")&&(n=e);var i={mods:{context:"book"},contextId:n&&n.id};a.extend(i,t),o.resolve(i)}).fail(function(){o.reject()})):"stationEntrance"==e.type&&(o.mode="metroEntrance"),!r)throw Error("Couldn't find moduleName for panel type "+e.type);return(a.includes(K,r)||"mixedResults"==r)&&(o.columns=$("mixedResults"==r?"mediaResults":r,!0)),{frameType:s,moduleName:r,moduleData:o}}function k(e,t){var n=x(e);C(n,function(e,n){w(),t(e,n)})}function w(){W.length>0?t.notify("activated"):t.mod({appearing:!0})}function x(e){function n(e){var n,i=e.booked||"filters"==e.type;try{n=b(e)}catch(o){if(o instanceof y)return null;throw o.message="[dataViewer] resolveModuleConf thrown an error. Original message: "+o.message,o}n.index=W.length;var r=!!c.get("photos");n.isNoindexFrame=!e.isIndexedFrame||r;var s=E(n);if(c.floors.isActive()?(s.specialMode=p(s),e.booked=!1):"last"==t.registry.get("framePosition")?(s.specialMode="book",e.booked=!0):"center"==t.registry.get("framePosition")?(s.specialMode=p(s),e.booked=!1):(s.specialMode=i?"book":p(s),i="book"===s.specialMode),"invisibleFrame"!=s.type&&a.each(W,function(e,t){t==W.length-1&&e["interface"].pos(f(e)),t==W.length-1&&i||e["interface"].deactivate()}),s.index=W.length,s.conf=e,s.panelId=e.panelId,W.push(s),t.shouldRender()){var l=s.render();t.element("frames").append(l),t.domBound()&&s.bindEvents()}return s}a.isEmpty(e)||(a.last(e).isIndexedFrame=!0);var i=e.length;return i>1&&"filters"==a.last(e).type&&(e[i-2].isIndexedFrame=!0),a.compact(a.map(e,n))}function C(e,i){r.map(e,P,function(o,r){var s=a.compact(r);if(s&&s.length){var l=a.pluck(s,"frame");W=a.without.apply(a,[W].concat(l)),e=a.without.apply(a,[e].concat(l)),t.notify("framesFailed",s)}L();var c=a.map(e,function(e){return e["interface"].whenContentRendered()});n.when(c).then(function(){i(null,e)})})}function L(e){var n=g(),a=_();h(),q(),n&&(n.specialMode=p(n),"book"==n.specialMode&&a&&a["interface"].activate(),e||n["interface"].pos(m(n)),"invisibleFrame"==n.type&&a&&(a["interface"].activate(),a["interface"].pos("center")),t.domBound()&&n["interface"].show(),n["interface"].activate()),t.mod({mediaMode:G})}function I(e,t){if(!(1>t)){var n=W.splice(e,t);a.each(n,function(e){e.dispose()}),z()}}function T(e,a,i){var o=W.length-e-2;I(e,o);var r=n(),s=W[e],l=W[e-1],c=W[e-2];if(s&&l&&"book"==s.specialMode){var u=s["interface"].getContentModule();l["interface"].pass("*:onCloseBookFrame",u)}if(l){h(l),l["interface"].activate();var d=l.moverClicked||m(l);l["interface"].pos(d),"last"==d&&c&&c["interface"].activate()}var p=function(){I(e,W.length),r.resolve(),L(!0),A(),i&&i()};if(W.length>0)if(t.broadcast("frame:hideFramesAfter",e-1),t.ua().isPhone)p();else{var f=a?t.config["animations.frameKill"]:t.config["animations.frameHide"];t.setTimeout(p,f)}else p();return r.promise()}function S(e){return T(W.length-1,!1,e)}function E(e){var n=t.init(e.frameType,e);return n["interface"].right(!!t.mod().minimized),n.contentType=e.moduleName,n["interface"].updateMediaMode(G),n["interface"].show(),n}function P(e,t){return e["interface"].initContentModule(function(n){n&&(n.frame=e),t(null,n)})}function j(e){return a.find(W,function(t){return t.panelId==e})}function M(e){if(W.length<2||G)return t.broadcast("frame:toggleMover",!1),void e();var n=a.first(a.takeRight(W,2)),o=a.last(W),r=["searchResults","mixedResults","floorsResults"],s=["searchResults","mixedResults","floorsResults","filters","favoritesList","apartmentsList"];!a.contains(r,n.contentType)||a.contains(s,o.contentType)||i.isRouteSearchModule(o.contentType)||i.isFullWidthPanel(o.contentType)?t.broadcast("frame:toggleMover",!1):(o["interface"].toggleMover(!0),n["interface"].toggleMover(!1)),e()}function A(){if(t.isServer||t.mod().isLandingPage)return null;R()&&U();var e=D();if(e){var n=e.width,a=e.offset,i=a?a.left:0,o=202,r=window.innerWidth,s=r-2*i;"iPad"===t.ua().device.model&&c.shouldBeMediaMode()&&(s=r),o>=s-n?t.notify("fullWidth"):t.notify("wideWidth"),t.broadcast("*:resize")}else t.notify("defaultWidth");return t.broadcast("searchResults:windowResized",{delta:{h:window.innerHeight-Y.height,w:window.innerWidth-Y.width}}),Y.height=window.innerHeight,Y.width=window.innerWidth,null}function D(e){var n=(e||{}).doNotIncludeFilters,a=t.block(),i=n?a.find(".frame:not(._cont_filters)").last():a.find(".frame").last();if(!i.length)return null;var o=a.offset(),r=i.offset(),s=i.width(),l=i.height();return{top:o.top,left:o.left,width:r.left+s-o.left,heiht:r.top+l-o.top}}function R(e){e=e||(g()||{}).contentType;var n=!1;return a.contains(K,e)&&(n=!0),G&&n?!0:!(t.ua().isMobile||!n)}function N(){t.mod({minimized:!0,width:null}),a.each(W,function(e){e["interface"].dissolve()})}function B(e,n){c.inGlobal()||(e=e||c.panels.drawInMap()||[],a.each(e,function(e){n?t.addTransition(function(t){F(e),t()},"map"):F(e)}))}function F(e){var t=j(e.panelId);t&&t["interface"].drawOnMap(e)}function O(e){e=e||c.panels.drawInMap()||[],a.each(e,function(e){t.addTransition(function(t){var n=j(e.panelId);n&&n["interface"].clearMap(e),t()},"map")})}function z(){for(var e,n=W.length;!e&&n>0;)e=t.broadcast("frame[num="+n+"]:activateSearchContext"),n--;return e}function q(){if(t.isClient){var e=t.broadcast("frame[::isTabable][:last]:whenContentInited");e&&e.then(function(){var e=t.broadcast("frame[::isTabable][:last]:getTab")||{},n=e.type,i=a.contains(["rs","ar","forecast"],n)?null:e.count;t.element("tab").text(i).mod({type:n||"firms"})})}}function $(e,n){if(!n&&!R(e)||t.isServer)return null;var a=H(e);return G||"mediaCard"==a?o.getColumnsNumberToShow(a,t.ua(),u,window):o.getViewportColumnsNumber(a,window)}function U(e,n){R()&&!t.isServer&&(e=e||$(),n&&G&&o.saveColumnsNumber(u,e),t.broadcast("*:mediaResize",e),t.broadcast("frame:setColumnsLength",e),G||t.broadcast("*:resize"))}function H(e){switch(e||a.get(g(),"contentType","mediaCard")){case"gallery":return"gallery";case"mediaCard":case"mediaResults":return"mediaCard";case"products":case"productCard":return"products";default:return"mediaCard"}}var G,W=[],V=e("./behaviours/miniCardHighlight")(t),Z=1,Y={height:"undefined"!=typeof window&&window.innerHeight,width:"undefined"!=typeof window&&window.innerWidth},K=["gallery","mediaCard","mediaResults"],X={init:function(e,n){t.mod(e&&e.mods),k(e.panels||[],function(){z(),t.isClient&&B(),V.processNew(W),e.minimized&&N(),M(function(){t.mod({isLandingPage:"landingPage"==t.registry.get("appMode")}),n()})})},bind:U,clientInit:function(){t.notify("changePanels"),q()},changeState:function(e){e.mapPanels&&e.mapPanels.removed&&O(e.mapPanels.removed),"dataViewer/minimized"in e&&(e["dataViewer/minimized"]?X["interface"].minimize():X["interface"].maximize()),void 0!==e.panels&&(e.panels?(e.panels.changed&&t.addTransition(function(t){a.each(e.panels.changed,function(e){var t=W[e.index];a.has(t,"interface.pass")&&t["interface"].pass("searchResults:applyChange",e.diff)}),t()},"panels"),e.panels.replaced&&t.addTransition(function(t){var n=function(e,t){var n=W[e.index];n.panelId=e.value.panelId;var a=b(e.value);a.specialMode=n.specialMode,n["interface"].replaceContent(a,t)};r.map(e.panels.replaced,n,t)},"panels"),e.panels.removed&&t.addTransition(function(t){var n=e.panels.removed.length,a=W.length-n,i=!!e.panels.added;T(a,i,t)},"panels"),e.panels.added&&t.addTransition(function(n){var a=e.panels.added,i=e.dashboard&&"visible"==e.dashboard;i&&t.mod({minimized:!0});var o=x(a);C(o,function(){n()}),i||(w(),L(),l.get("performance")&&W.length>1&&t.fpsMeter&&t.fpsMeter.start&&(t.fpsMeter.start(),t.setTimeout(function(){var e=t.fpsMeter.end(.9);s.trackEvent("google",["Performance","FrameFps",e+""])},400)))},"panels"),t.addTransition(M,"panels")):t.addTransition(a.partial(T,0,!1),"panels"),t.mod({visible:!!W.length}),t.onTransitionEnd(function(){e.panels&&t.notify("changePanels"),W.length||t.notify("closed")})),V.processDiff(e),e.mapPanels&&e.mapPanels.added&&B(e.mapPanels.added,!0),"tab"in e&&q()},elements:{summary:{click:function(){t.notify("summaryClick")}},mobileMaximize:{click:function(){t.notify("summaryClick")}}},viewContext:function(){return{views:W}},"interface":{enterGlobal:function(){t.isClient&&(t.mod({noFrames:!0,busy:!1}),O())},exitGlobal:function(){c.get("panels")&&c.get("panels").length!=W.length?k(c.get("panels"),function(){z(),t.isClient&&B()}):(t.mod({noFrames:!W.length,busy:!1,visible:!0}),t.isClient&&B(null,!0))},enterFloors:function(){t.mod({floorsOpen:!0})},exitFloors:function(){c.get("panels")&&c.get("panels").length!=W.length&&k(c.get("panels"),function(){z(),t.isClient&&B()}),t.mod({floorsOpen:!1})},setSeoParams:function(){var e,n=W.length;if(c.floors.isInitialFloorState())return!1;for(;!e&&n>0;)e=t.broadcast("frame[num="+n+"]:setSeoParams"),n--;return e},getPrintableModule:v,initPrint:function(e){t.broadcast("frame[::hasPrintableModule][:last] *:prepareForPrint",e)},addFrame:function(e,n,i){if(!t.mod().busy){var o=a.extend({type:e},n);k([o],function(){t.mod({busy:null}),i&&i()})}},clearFrames:function(){t.mod({searching:!0}),I(0,W.length),t.mod({noFrames:!0,busy:!1}),t.rerender()},removeLastFrame:function(e){t.mod().busy||(t.mod({busy:!0}),S(function(){t.mod({busy:null}),e&&e()}),t.mod({width:null}))},blinkLastFrame:function(){t.mod().minimized?t.mod({minimized:!1}):t.broadcast("frame[:last]:blink")},minimize:function(){t.notify("minimize",!0),t.broadcast("frame:minimize"),W.length&&N()},maximize:function(){t.notify("minimize",null),t.broadcast("frame:maximize"),W.length&&(t.mod({minimized:!1}),a.each(W,function(e){e["interface"].appear()}),t.broadcast("frame[:last]:activate"),X["interface"].restoreInitial())},restoreInitial:function(){t.mod({minimized:null})},resize:function(){U(),A()},hide:function(){t.mod({visible:null})},show:function(){t.mod({visible:!0})},updateMediaMode:h,updateLastFrame:L,setDestinationFromLastFrame:function(){t.broadcast("frame[:last]:setDestination")},setColumnsLength:function(e){U(e,!0)},findLastFrameByType:function(e){return a.findLast(W,{contentType:e})},getSize:D,_setWidthForFrames:A},dispatcher:{"*:mediaColumnsWasSet":function(){t.mod({visible:!0})},"*:isMediaMode":function(){return!!G},"*:invalidateFilters":function(){t.broadcast("frame[:last]:pass","filters:invalidateUIValues")},"filters:updateSlider":function(e,n){t.broadcast("filters:updateSlider",e,n)},"*:appearingEnded":function(){t.mod({appearing:null})},"frame:moverClick":function(e){var t=W[e.index];t&&(t.moverClicked=e.pos)},"frame:booked":function(e){var n=W.length&&W[W.length-2];n&&(e?(t.setTimeout(function(){t.notify("framesSizeChanged")},t.config["animations.dataViewerExpand"]),n["interface"].activate()):(n["interface"].deactivate(),t.notify("framesSizeChanged")))},"frame:appearingEnded":function(){A()},"frame:noResults":function(){W[W.length-1].specialMode=null,L(!0)},"*:isBook":function(){return"book"==t.mod().size},"frame:shiftTo":function(e){var t=g();t["interface"].pos(e)},"frame:replaceContent":function(e){var t=a.find(W,{id:this.sender.id}),n=t.contentType==e.moduleName;t.contentType=e.moduleName,L(n)},"frame:contentRendered":function(e){a.contains(["mixedResults","floorsResults","firmCard","card","mediaCard"],e)&&t.mod({visible:!0})},"frame:initContent":function(e){var n=["mixedResults","mediaResults","floorsResults","mediaCard","products","productCard","firmCard","card"];a.contains(n,e)||t.mod({visible:!0})},"searchResults:summaryChanged":function(){q()},"*:isMinimized":function(){return!!t.mod().minimized}},modHandlers:{minimized:function(e){if(void 0!==e&&null!==e){var n=e?"minimized":"maximized";t.notify(n),t.broadcast("frame:right",!G&&e)}else t.notify("maximized"),t.broadcast("frame:right",!1)},count:function(){a.each(W,function(e,t){var n=2>t||t>W.length-4;e["interface"].invalidateVisibility(n)})}}};return X},t.exports._args=["slot","$defer","$analytics","$featureSwitcher","$appState","$localStorage"]},{"./behaviours/miniCardHighlight":189,async:383,lodash:"lodash"}],"/modules/deleteDialog/deleteDialog.js":[function(e,t,n){"use strict";function a(e){return{compact:e.bool,name:e.string,onYesClickHandler:e.func.isRequired,onNoClickHandler:e.func.isRequired}}function i(e){return{viewAttrs:{"class":e.compact?"_compact":""},viewContext:function(){return{name:e.name,text:e.text}},elements:{yes:{click:function(t){t.stopPropagation(),e.onYesClickHandler()}},no:{click:function(t){t.stopPropagation(),e.onNoClickHandler()}}}}}function o(){return r.compose(i,c(a,"deleteDialog"),u(d))}var r=e("lodash"),s=req("lib/dumbModule"),l=s.dumb,c=s.checkPropTypes,u=s.setDefaultProps,d={compact:!1,name:"",onYesClickHandler:r.noop,onNoClickHandle:r.noop};t.exports=l(o)},{lodash:"lodash"}],"/modules/discountRating/discountRating.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/discount"),o=req("helpers/firm");t.exports=function(e,t,n,r,s){function l(e){var t={votingError:{title:r._gg("Что-то пошло не так"),body:r._gg("попробуйте ещё раз через пару минут")},alreadyVoted:{body:r._gg("Вы уже проголосовали")}};return t[e]||null}function c(t){v&&u();var n=l(t),a=e.renderPartial("tooltip",{title:n.title,body:n.body}),i=e.element("tooltip");i.html(a).mod({visible:!0}),v=!0,k()}function u(){var t=e.element("tooltip");t.mod({highlighted:!0}),e.setTimeout(function(){t.mod({highlighted:!1})},g)}function d(t){e.block().mod({rated:!0}),e.element("button").filter('[data-action="'+t+'"]').mod({userVote:!0})}function h(n,a){y=n,_.votes=a,i.setDiscountUserVote(t,_.id,n),e.rerender(),d(n)}function p(){y=i.getDiscountUserVote(t,_.id),y&&(e.block().mod({rated:!0}),d(y))}function f(){if(s.isAuthorized()){var e=s.getAuthorizedUserSync()||{};b=e.authorizationToken}}var m=5e3,g=300,_=void 0,v=void 0,y=void 0,b=null,k=a.debounce(function(){var t=e.element("tooltip");t.mod({visible:!1,highlighted:!1}),v=!1},m);return{init:function(e){_=e,_.branchId=o.getStaticId(_.branchId)},bind:function(){f(),p()},viewContext:function(){return _},elements:{button:{click:function(){if(y)return void c("alreadyVoted");e.block().mod({busy:!0});var t=$(this).data("action");n.vote(_.branchId,_.id,t,b).then(function(e){h(t,e)})["catch"](function(){c("votingError"),e.block().mod({busy:!1})})}}}}},t.exports._args=["slot","$localStorage","$discountsApi","$i18n","$authorization"]},{lodash:"lodash"}],"/modules/discountsCard/discountsCard.js":[function(e,t,n){t.exports=function(t,n,a,i,o,r,s,l,c){function u(e){var t=window.location.href;s.reduceLink(t,function(t){e(t)})}function d(){g&&g.update()}function h(){var e=$(this).closest(t.element("discount")),n=e.mod().minimized;e.mod({minimized:!n,expanded:n}),d()}function p(){t.element("discountShareSection").mod({error:!1,hidden:!0,visible:!1}),t.element("discountShareLink").mod({active:!1})}function f(e,n,i){var o=parseInt(n.data("id"),10),r=e.mod().active,s=n.find(t.element("discountShareUrlInput")),l=y.find(i,function(e){return"social"===$(e).mod().type});v=null,p(),r?(s.val(a._t("Загружаю...")),t.notify("clickActiveDiscount")):(t.notify("clickDiscount",o),u(function(e){n.mod().current&&(v=e,s.val(e),t.setTimeout(function(){n.mod().current&&(s[0].focus(),s[0].select())},0))})),$(l).mod({hidden:r,visible:!r}),e.mod({active:!r})}function m(e){return t.invoke(x,[t,e])}var g,_,v,y=e("lodash"),b={},k=req("helpers/social"),w=req("helpers/firm"),x=e("./viewModel.js");return{init:function(e,a){b=y.pick(e,"rubrics","branchId"),i.getDiscounts({branchId:e.branchId,sortBy:"order"}).then(function(i){var r=n.getRegion();i[0].project_id!=r.id&&(c.set("city",{id:i[0].project_id}),c.replace()),b.activeDiscountId=e.discountId,b.activeDiscountId&&(_=parseInt(b.activeDiscountId,10)),b.discounts=y.map(i,function(e){return e.votes&&y.extend(e,{discountRating:t.init("discountRating",{branchId:b.branchId,id:e.id,votes:e.votes})}),e});var s={purpose:"minimal"};o.firms.profile(e.branchId,s,function(e,t){return e?a(e):(b.firm=t,b.isAdvertiser=w.checkAds(b.firm),a())})})["catch"](function(e){a(e)})},clientInit:function(){l.trackEvent("googleBooklets",["Discount","Show_Card",b.firm.name])},bind:function(){if(_){var e=t.element("discount"),n=y.find(e,function(e){return $(e).data("id")==_});if(n=$(n)){var a=t.block().offset().top,i=n.offset().top;t.element("scroller").scrollTop(i-a)}}if(!g){var o=t.element("scroller");g=o.baron().fix().fix({elements:t.element("footerIn"),inside:"_state_fixed",outside:"_state_unfixed"}),o.mod({overflow:"touch"})}t.setTimeout(function(){g.update()},150)},viewContext:function(){return t.viewContext=m(b),t.viewContext},elements:{sendError:{click:function(){t.notify("sendErrorClicked",b.firm.id)}},discountDescriptionMore:{click:h},discountDescriptionLess:{click:h},discountShareUrlInput:{click:function(){var e=this;t.setTimeout(function(){e.select()},0)}},discountShareLink:{click:function(){var e=$(this).mod().type,n=$(this).closest(t.element("discount")),a={social:f},i=n.find(t.element("discountShareSection"));a[e]&&a[e]($(this),n,i),t.setTimeout(function(){d()},150)}},discountShareSocialItem:{click:function(){var e=v||window.location.href,t=y.find(b.discounts,{id:_}),n=b.firm.name_ex&&b.firm.name_ex.primary||b.firm.name,a=n+" – "+t.title,i=$(this).data("social"),o="https:"+t.cover;switch(i){case"vkontakte":k.openSocialPopup(k.getVkontakteUrl(e,o,a,t.description));break;case"facebook":r.shareWithFb(a,t.description,e,o);break;case"twitter":k.openSocialPopup(k.getTwitterUrl(e,a+" #2gis"));break;case"odnoklassniki":k.openSocialPopup(k.getOdnoklassnikiUrl(e,a))}l.trackEvent("googleBooklets",["Discount","Sharing_Social",i])}}},"interface":{updateScroll:d,resize:d,"orientationСhange":function(){var e=t.element("scroller");e.mod({overflow:"auto"}),t.setTimeout(function(){e.mod({overflow:"touch"})},100)},setSeoParams:function(){var e;if(_){var n=y.find(b.discounts,{id:_});e={type:"discount",firmName:y.get(b,"firm.name_ex.primary"),title:n.title,description:n.description},n.cover&&(e.ogImage=n.cover)}else e={branchId:b.branchId,type:"discounts",firmName:b.firm.name},y.values(b.rubrics).length&&(e.type="discountsForRubrics",e.rubrics=b.rubrics);return t.notifySeoParams(e),!0},getPrintData:function(){return{analyticsLabel:"Discounts","static":t.renderPartial("print",t.viewContext||m(b)),layout:"simple"}}},changeState:function(e){if(e.panels&&e.panels.changed){var n=y.find(e.panels.changed,function(e){return"discounts"===e.diff.type});if(n&&_&&(_=null,t.element("discount").mod({current:!1})),n&&n.diff.discountId){var a=n.diff.discountId,i=t.element("discount"),o=y.find(i,function(e){return $(e).data("id")==a});_=a,$(o).mod({current:!0})}}}}},t.exports._args=["slot","$regionManager","$i18n","$discountsApi","$dgApi","$social","$shortonizerApi","$analytics","$appState"]},{"./viewModel.js":190,lodash:"lodash"}],"/modules/discountsPromo/discountsPromo.js":[function(e,t,n){t.exports=function(e,t){var n={inheritBssHash:!0,init:function(){},elements:{block:{mousedown:function(){e.dispose()}}},"interface":{show:function(){t.trackEvent("googleBooklets",["Discount","Promo","Show_Promo"]),e.setTimeout(function(){function t(e){var t=$(e).offset();return{top:Math.round(t.top+e.offsetHeight/2),left:Math.round(t.left+e.offsetWidth/2)}}var n=$('[name="food_service_discount"]').next(),a=$(".miniCard__discounts")[1];if(a){n.length&&e.element("filterPointer").css(t(n[0]));var i=t(a);i.top-=300,e.element("buttonPointer").css(i),e.mod({visible:!0}),e.setTimeout(function(){e.mod({cardbutton:!0})},1e3)}},e.config["animations.frameShow"])}}};return n},t.exports._args=["slot","$analytics"]},{}],"/modules/discountsPromoEntry/discountsPromoEntry.js":[function(e,t,n){t.exports=function(e,t,n,a){function i(){return e.setTimeout(function(){e.dispose()},s)}function o(){a.setItem(e.config["promoTooltip.discounts"].promoStorageKey,!0)}var r,s=2e4,l={init:function(){e.registry.set("discountsPromo",!0)},viewContext:function(e){if(e)return e;var n={linkText:t._gg("Посмотреть")};return n},clientInit:function(){clearTimeout(r),r=i(),n.trackEvent("googleBooklets",["Discount","Promo","Show_Tooltip"])},elements:{close:{click:function(t){n.trackEvent("googleBooklets",["Discount","Promo","Close_Tooltip"]),o(),t.stopPropagation(),e.dispose()}},block:{click:function(){n.trackEvent("googleBooklets",["Discount","Promo","Click_Tooltip"]),e.notify("clickBlock"),o(),e.dispose()},mouseenter:function(){clearTimeout(r)},mouseleave:function(){r=i()}}}};return l},t.exports._args=["slot","$i18n","$analytics","$localStorage"]},{}],"/modules/download/download.js":[function(e,t,n){var a=req("helpers/link"),i=e("lodash");t.exports=function(e,t,n,o){function r(){if(!c||!c.os||!c.os.name)return!1;switch(c.os.name){case"Windows":return{titleBtn:n._t("Скачать версию для Windows"),desktopLink:a.getPcLink(l.id),type:"pc"};default:return!1}}var s,l,c,u,d={init:function(){c=e.ua(),l=o.getRegion(),u=r();var t=n.getSettings().tools.downloadBetaVersion;s=u&&!e.isGrym&&t||"pc"===u.type&&!t},clientInit:function(){var n=e.registry("download").pos;e.mod({pos:n}),e.element("button").mod({type:u.type}),t.trackEvent("google",["Dashboard","Download","Show_Download"])},viewContext:function(){var e,t=n.getSettings().isCIS;return t&&(e=a.getMobileLandingLink(l.domain,"download")),i.extend({showDownload:s,mobile:a.getMobileLinks(n,"downloadBtn"),href:e,mobilePromo:t},u)},elements:{mobilePromoLink:{click:function(){t.trackEvent("google",["Mobile4","Download","Click"])}},overlay:{click:function(){e.notify("close")}},productsItemLink:{click:function(){var e=$(this).mod();if(e){var n={ios:"AppStore_Click",android:"GooglePlay_Click",windowsphone:"Marketplace_Click",blackberry:"AppWorld_Click"},a=n[i.keys(e)[0]];a&&t.trackEvent("google",["Dashboard","Download",a])}}},button:{click:function(){$(this).mod().type&&t.trackEvent("google",["Dashboard","Download",$(this).mod().type.toUpperCase()+"_Click"])}}},"interface":{reposition:function(t){e.mod({pos:t})}}};return d},t.exports._args=["slot","$analytics","$i18n","$regionManager"]},{lodash:"lodash"}],"/modules/errorMsg/errorMsg.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t){function n(){e.mod({visible:!1})}var i=t._t("Что-то пошло не так"),o=[],r={init:function(){},elements:{link:{click:function(){var t=$(this).data("action");"signup"==t&&e.notify("signupClicked")}}},bind:function(){document.addEventListener("click",n,!0)},dispose:function(){document.removeEventListener("click",n,!0)},viewContext:function(){return{errMessagesArray:o}},"interface":{show:function(t){e.block().remove(),o=a.isArray(t.msg)?t.msg:[t.msg||i];var n=t.module.render();$(t.elemWithError).first().prepend(n),t.module.bindEvents(),e.mod({visible:!0,fullWidth:t.fullWidth}),t.context&&e.mod({context:t.context})},hide:function(){e.mod({visible:!1})}}};return r},t.exports._args=["slot","$i18n"]},{lodash:"lodash"}],"/modules/eventCard/eventCard.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/linkURL"),o=req("helpers/request");t.exports=function(t,n,r,s,l,c,u,d){function h(e){return i(e?"moscowCityDay":"event",{city:r.getRegion().code,eventId:e},d._config("projectURL"))}function p(e){if(e&&e[0]){var n=t.element("scroller"),a=e.offset().top,i=n.offset().top;n[0].scrollTop+=a-i}}function f(e){t.element("headerSubTitle").html(y[e].mainTitle)}function m(e){var n=t.element("paginationItem").filter('[data-date="'+e+'"]');t.element("paginationItem").mod({current:!1}),$(n).mod({current:!0}),t.viewContext=t.invoke(x,[y,{actuallyDate:e},d]),t.element("content").html(t.renderPartial("content",t.viewContext)),k=e,f(k),g(),_(t.viewContext.events)}function g(){t.viewContext.parks&&(v=t.viewContext.currentDistrict,t.element("districtsItemLink").first().mod({current:!0}),t.element("parksItem").first().mod({current:!0}))}function _(e){if(e){var n=(new Date).getTime();a.each(e,function(e){if(e.timeEnd){var a=new Date(e.timeEnd).getTime();t.setTimeout(function(){t.element("eventsItem").filter('[data-date="'+e.name+'"]').mod({finished:!0})},a-n)}})}}var v,y,b,k=e("moment")(new Date).format("YYYY-MM-DD"),w="2015-09-05",x=e("./viewModel"),C=e("./utils"),L={init:function(e,n){return l.get("moscowCityDay")?void u.get(r.getRegion().code,"events",function(e,i){if(e)return void n(e);var o=a.sortBy(a.keys(i),function(e){return new Date(e).getTime()}),r=o[0],l=o[o.length-1];k=(new Date).getTime()<new Date(r).getTime()?r:k,k=new Date(k).getTime()>new Date(l).getTime()?l:k,y=i,t.viewContext=t.invoke(x,[y,{actuallyDate:k,holiday:w},d]),v=t.viewContext.currentDistrict,t.registry.get("isInit")&&s.trackEvent("google",["Cityday","Open","Direct"]),n()}):void o.emitError(404,"moscowCityDay feature is disabled",n)},bind:function(){t.setTimeout(function(){b=t.element("scroller").baron()},500)},clientInit:function(){g(),_(t.viewContext.events)},elements:{block:{resize:function(){t.setTimeout(function(){t.element("scroller").baron().update()},300)}},headerSubTitleLink:{click:function(){s.trackEvent("google",["Cityday","Navigation",k]),m(w)}},headerSocialsItem:{click:function(){t.notify("shareClicked",$(this).mod().social,h()),s.trackEvent("google",["Cityday","Share_main",a.capitalize($(this).mod().social)])}},paginationItem:{click:function(){var e=$(this).data("date");s.trackEvent("google",["Cityday","Navigation",k+"-"+e]),m(e)}},transportLink:{click:function(){t.notify("transportLinkClicked",$(this).data("layerName")),s.trackEvent("google",["Cityday","Transport",$(this).data("type")])}},sectionTitleLink:{click:function(e){var n=t.element("section").filter('[name="'+this.href.split("#")[1]+'"]');p(n),s.trackEvent("google",[a.capitalize($(this).data("linkType")),"Fast_link"]),e.preventDefault()}},sectionParaLink:{click:function(){t.notify("rubricClicked",{name:$(this).data("query")})}},placesItemAddress:{click:function(e){var n=$(this).closest(t.element("placesItem"));t.notify("eventElemClicked",{id:n.data("objectId"),type:n.data("resultView")}),e.preventDefault()}},eventsItem:{click:function(e){t.notify("eventElemClicked",{id:$(this).data("objectId"),type:$(this).data("resultView")}),s.trackEvent("google",["Events","Click"]),e.preventDefault();
}},districtsItemLink:{click:function(){var e=$(this).data("district"),n=C.createParksList(y[k],e);t.viewContext.parksIds=n.parksIds,v=e,t.element("parksWrap").html(t.renderPartial("parks",{parks:n.parks,parkEvents:n.events})),t.element("districtsItemLink").mod({current:!1}),t.element("parksItem").first().mod({current:!0}),$(this).mod({current:!0})}},parksItem:{click:function(){var e=y[k].parks[v][$(this).data("name")];t.element("parksItem").mod({current:!1}),$(this).mod({current:!0}),t.element("parksEvents").html(""),a.each(e,function(e){t.element("parksEvents").append(t.renderPartial("parkEvent",e))})}},parksItemPointer:{click:function(e){var n=$(this).closest(t.element("parksItem")).data("name");t.notify("eventElemClicked",{id:t.viewContext.parksIds[n],type:"geo"}),e.stopPropagation()}}},"interface":{getShareContent:function(){var e=d._gg("Программа дня города Москвы: афиша праздника, программа гуляний в парках, время салюта и идеи, как провести выходные."),n=d._gg("День города в Москве: афиша праздника, программа гуляний в парках, время салюта и идеи, как провести выходные.");return{title:e,desc:n,image:t.config["share.image.eventday"]}},setSeoParams:function(){return t.notify("setSeoParams",{title:"Москва, программа мероприятий на день города 2015 — 2ГИС",description:"День города Москвы в 2ГИС: афиша мероприятий, время салюта и информация о перекрытых улицах. Насыщенная неделя интересных событий до Дня города, подробная афиша праздника, программа гуляний в парках и идеи, как провести выходные. Данные о перекрытых улицах и остановках городского транспорта."}),!0},resize:function(){b&&t.setTimeout(function(){b.update()},500)}}};return L},t.exports._args=["slot","$appState","$regionManager","$analytics","$featureSwitcher","$dgApi","$eventuallyApi","$i18n"]},{"./utils":191,"./viewModel":192,lodash:"lodash",moment:"moment"}],"/modules/extraLayers/extraLayers.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/extraLayers"),o=e("bluebird"),r=e("./utils"),s=e("moment");t.exports=function(t,n,l,c,u,d,h,p){function f(e){g();var t=l.getLang()||c.getRegion().currentLanguage;return n.getLayers({projectId:e,lang:t}).then(function(e){return O.layers=e,e})}function m(e){return i.getResourceUrl(c.getRegion().id,e,t.config)}function g(){O.layers=null,O.sublayers=null}function _(){t.mod({visible:!a.isEmpty(O.layers)&&!l.inGlobal()})}function v(e,t){return n.getLayer({projectId:t,id:e}).then(function(t){return{data:t,parentId:e}})}function y(){var e=a.partialRight(r.isNewLayer,q);return a.chain(O.layers).filter(function(t){return e(t)}).map("layer_id").value()}function b(){return a.map(O.layers,"layer_id")}function k(e){var n=a.difference(e,q);a.each(n,function(e){var n=t.element("layer").filter('[data-id="'+e+'"]');n.closest(t.element("listItem")).mod({"new":!1})}),q=q.concat(n),d.setItem("seenLayersIds",q);var i=a.size(y());t.setTimeout(function(){t.element("control").mod({notification:i>0}),t.element("controlButton").attr("data-new-layers",i)},200)}function w(e,t){var n=["ExtraLayers",e];t&&n.push(t),u.trackEvent("google",n)}function x(e,t){var n=a.get(O.sublayers,t);return n?{resourceUrl:m(t),layerId:t,geomsList:i.getGeomListByData(n,e)}:null}function C(e){if(!l.inGlobal()){var n=a.map(e,function(e,t){var n=a.map(e,function(e){return"#"+t+"-"+e}).join(","),i="#"+t;return n?i+","+n:i}).join(","),i=t.block();i.find("input").prop("checked",!1),i.find(""+n).prop("checked",!0),t.broadcast("extraLayersGinza:updateStateCheckbox"),t.broadcast("extraLayersGinza:close")}}function L(e){if(!l.inGlobal()){var n=a.chain(e).map(x).compact().value();t.notify("drawExtraLayers",n)}}function I(e){return a.chain(O.layers).find("layer_id",e).get("readable_name").value()}function T(e,t){return a.get(O.sublayers,t+".subfolders."+e+".name")}function S(e){var t=c.getRegion();return t.name+", "+e}function E(e){var t=I(e);w("Click1",S(t))}function P(e,t){var n=T(e,t);w("Click2",S(n))}function j(e){"layer"==e.type?E(e.layerId):P(e.subLayerId,e.layerId),A(e)}function M(e){return a.chain(O.sublayers).get(e).get("subfolders").keys().value()}function A(e){if("layer"==e.type){var t=M(e.layerId);l.extraLayers.toggleLayer(e.layerId,t)}else l.extraLayers.toggleSublayer(e.layerId,e.subLayerId);l.push()}function D(e){return a.chain(b()).concat(e).uniq().value()}function R(){h.get("victory")&&t.isClient?setImmediate(function(){var e=p.getPixelBound(!0);if(a.has(e,"bottomRight","topLeft")){var n=e.bottomRight[0]-e.topLeft[0];t.mod({hiddenTooltip:F>n})}}):t.mod({hiddenTooltip:!0})}function N(e){var n=c.getRegion(),i=b();t.mod({loading:!0}),V(i,n.id).then(function(n){O.sublayers=n,t.rerender();var i=l.extraLayers.get();C(i),a.isFunction(e)&&e()})["finally"](function(){t.mod({loading:!1})})}function B(e,t){var n=W+"_"+e.layerName,i=a.get(e,"sublayers."+n+".subfolders"),o=a.findKey(i,{name:e.subLayerName});if(o&&!l.extraLayers.hasSublayer(n,o)){if(j({layerId:n,subLayerId:o,type:"sublayer"}),e.forcedUpdateMap){var r={};r[n]=[o],L(r)}a.isFunction(t)&&t()}}var F=210,O={},z=d.getItem("ginzaTooltipClosed"),q=a.compact((d.getItem("seenLayersIds")||"").split(",")),U=void 0,H=void 0,G=void 0,W=void 0,V=a.memoize(function(e,t){var n=a.map(e,function(e){return v(e,t)});return o.all(n).then(function(e){return a.reduce(e,function(e,t){return e[t.parentId]=a.cloneDeep(t.data),e},{})})}),Z={init:function(){function e(e,n){var i=t.config["extralayers.onlyActive"]?b():D(a.keys(e));return V(i,n).then(function(t){return O.sublayers=t,L(e),t})}_(),t.isClient&&c.onInit(t.ifAlive(function(n){var i=h.get("ginzaProject");i&&(H=t.init("extraLayersGinza",{type:"extralayer"}),G=t.init("extraLayersGinza",{type:"tooltip"})),W=n.code,f(n.id)["finally"](function(){var o=l.extraLayers.get(),r=h.get("victory");t.rerender(),a.isEmpty(o)&&!r||e(o,n.id).then(function(e){if(!r)return null;var n=!!t.element("tooltip").length,a=i&&!z;return s().isAfter("2016-05-09")&&B({layerName:"victory",subLayerName:"Перекрытые улицы",sublayers:e,forcedUpdateMap:!0}),n||a||t.block().append(t.renderPartial("tooltip")),!0}),k(),_()})}))},bind:function(){t.element("menu").menuAim({rowSelector:"._menuRow",submenuDirection:"left",activate:function(e){$(e).mod({submenuActive:!0})},deactivate:function(e){$(e).mod({submenuActive:!1})}})},viewContext:function(){if(t.isClient){var n=e("./viewModel.js"),a=n(O,{resourceUrl:m(),isIe8:t.ua().isIE(8),seenLayersIds:q});return h.get("ginzaProject")&&(a.extraLayersGinza=H,!z&&t.isInitialState(["extraLayers","zoom","city"])&&(a.extraLayersGinzaPromo=G)),a}return{}},clientInit:R,changeState:function(e){if(t.isClient){if("extraLayers"in e){var n=l.extraLayers.get();L(n),C(n)}R()}},elements:{control:{mouseout:function(){t.mod().active&&(U=t.setTimeout(function(){k(y()),t.mod({active:!1})},700))},mouseover:function(){clearTimeout(U)}},controlButton:{click:function(){t.mod().active?(k(y()),t.mod({active:!1})):(N(function(){t.mod({active:!0})}),w("Show1"))}},listItem:{click:function(){var e=$(this).find(".extraLayers__layerSwitcherInput").eq(0),t=e.data("layer"),n=e.data("type"),a=e.data("sublayer");return j({layerId:t,subLayerId:a,type:n}),k([t]),!1}},tooltip:{click:function(){t.notify("tooltipClicked"),N(function(){t.mod({active:!0}),t.element("tooltip").remove()})},mouseleave:function(){$(this).remove()}}},"interface":{enterGlobal:function(){t.isClient&&(_(),t.notify("drawExtraLayers"))},exitGlobal:function(){if(t.isClient){_();var e=l.extraLayers.get();a.isEmpty(e)||(L(e),C(e))}},shouldHideTooltip:R,close:function(){t.mod({active:!1})},trackExtraLayersCard:function(e){w("More_Click",S(I(e)))},trackMarkerClick:function(e){w("Icon_Click",S(I(e)))},listItemClick:function(e){N(function(){j({layerId:e,type:"layer"}),k([e])})},openSublayer:function(e,t){B({layerName:e,subLayerName:t,sublayers:a.get(O,"sublayers")},function(){k([W+"_"+e])})}}};return Z},t.exports._args=["slot","$extraLayersApi","$appState","$regionManager","$analytics","$localStorage","$featureSwitcher","$viewport"]},{"./utils":193,"./viewModel.js":194,bluebird:384,lodash:"lodash",moment:"moment"}],"/modules/extraLayersCard/extraLayersCard.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/extraLayers"),o=req("helpers/actions"),r=req("helpers/request");t.exports=function(t,n,s,l,c,u){function d(){t.notify("focusPoint",g.focusPoint)}function h(e){t.notify("pathActionClicked",e,{text:g.name,lon:g.lon,lat:g.lat})}function p(){if(t.ua().isPhone)return null;var e=!g.lon||!g.lat;return o.getPathAction(e,{from:a.partial(h,"from"),to:a.partial(h,"to")},o.getPathActionLocaleParams(l))}function f(){var e=t.element("photosImg");if(e.length&&!e.mod().loaded){var n=e.data("src"),a=new Image;a.onload=function(){e.css("background-image",'url("'+n+'")').mod({loaded:!0})},a.src=n}}function m(e){for(var t=/<img.*?src=['"](.*?)['"]>/gi,n=[],a=void 0;null!==(a=t.exec(e));){var i={thumbnailUrl:a[1],originalUrl:a[1]};n.push(i)}return n}var g={},_=void 0,v={init:function(e,i){if(!e)return r.emitError(500,"empty init data",i);var o=s.getRegion().id;return o?(n.getFeatureById({projectId:o,layerId:e.layerId,featureId:e.featureId}).then(function(n){if(!n)return r.emitError(404,"empty api response",i);a.assign(g,n.properties,{layerId:e.layerId});var o=n.geometry||{};"Point"!=o.type||a.isEmpty(o.coordinates)||(g.lon=o.coordinates[0],g.lat=o.coordinates[1],g.focusPoint={lon:g.lon,lat:g.lat});var s=p();return s&&t.initDumb("cardActions",[s]),_=m(g.description),i()})["catch"](i),null):(t.sendError("strange no region init in extraLayersCard",{region:s.getRegion()}),r.emitError(404,"no region id",i))},viewContext:function(){var n=e("./viewModel.js");return n(g,{region:s.getRegion(),i18n:l,dontPreloadPhoto:t.isServer,photos:_})},clientInit:function(){f()},bind:function(){t.element("scroller").baron().fix()},"interface":{tabType:"firms",setSeoParams:function(){return t.notifySeoParams(i.prepareForSeo(g,s)),!0}},elements:{adressTitle:{click:d},advLink:{selector:".extraLayersCard__footerItemLink._type_adv",click:function(){c.trackEvent("google",["ExtraLayers","Card","Adv_Click"])}},bugReportLink:{selector:".extraLayersCard__footerItemLink._type_bugReport",click:function(){var e=n.getReadableLayerName(g.layerId),t=e?e+". ":"";u.showFeedback({feedbackType:"mapError",place:g.lon+","+g.lat,placeTitle:t+g.name}),u.push()}},photos:{click:function(e){e.preventDefault();var n={title:g.name,photosUrls:_.map(function(e){return e.originalUrl})};t.notify("photosClicked",n)}}}};return v},t.exports._args=["slot","$extraLayersApi","$regionManager","$i18n","$analytics","$appState"]},{"./viewModel.js":195,lodash:"lodash"}],"/modules/extraLayersGinza/extraLayersGinza.js":[function(e,t,n){t.exports=function(e,t,n){function a(){var t=n.getItem("hiddenGinzaMarkers");e.element("switcherInput").prop("checked","true"!=t)}var i={init:function(t){"tooltip"==t.type&&e.mod({type:"tooltip"})},changeState:function(t){t.panels&&e.mod({hidden:!0})},elements:{block:{click:function(t){if("ginzaID"==t.target.id||"tooltip"==e.mod().type)return!1;var a=e.element("switcherInput"),i=a.get(0).checked;return n.setItem("hiddenGinzaMarkers",i),a.prop("checked",!i),i?e.notify("ginzaDestroyYourMarkers"):e.notify("ginzaGiveMeMarkers"),!1}},ginzaLink:{click:function(e){e.preventDefault(),t.search({query:"Ginza Project"}),t.push()}},close:{click:function(){n.setItem("ginzaTooltipClosed",!0),e.mod({hidden:!0})}}},"interface":{updateStateCheckbox:a,close:function(){e.mod({hidden:!0})}}};return i},t.exports._args=["slot","$appState","$localStorage"]},{}],"/modules/extras/extras.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/link"),o=req("helpers/linkURL");t.exports=function(e,t,n,r,s,l,c,u){function d(n,a){if(n)switch(t.showExtrasMenu(a),a){case"languages":e.element("menu").html(e.renderPartial("menuLanguages",p()));break;case"more":e.element("menu").html(e.renderPartial("menuMore",f()))}else t.closeExtrasMenu(),b();t.push()}function h(n,a){var i=t.getShareState();return n==a?delete i.lang:i.lang={locale:n},e.location.href(i)}function p(){if(!l.get("languageSwitcher"))return{};var n=r.getRegion();return n.availableLanguages?{languages:a.map(n.availableLanguages,function(a){var i=t.getLang();return{title:e.config.langTitles[a],code:a,href:h(a,n.defaultLanguage),active:i==a||n.defaultLanguage==a&&!i}})}:{}}function f(){var t=r.getRegion(),n=e.ua(),o=void 0;return n.isDesktop&&!e.isGrym&&(o=i.getExtensionLink({ua:n},s)),{extensionLink:a.get(o,"href"),regionAddFirmLink:i.getAddLink(t,"start",s)}}function m(){if(!l.get("languageSwitcher"))return{};var n=r.getRegion();return n.availableLanguages?{languageSwitcher:{activeLanguage:e.config.langAbbreviations[t.getLang()||n.defaultLanguage]}}:{}}function g(){w>0?(e.element("whatsNew").attr("data-news-count",w>9?"9+":w),e.element("whatsNew").mod({hasNotifications:!0})):e.element("whatsNew").mod({hasNotifications:!1})}function _(){u.loadNewsList().then(function(e){w=u.getNewNewsItemsCount(e)})["catch"](function(){w=0})["finally"](g)}function v(){var n=r.getRegion();l.get("floors")&&!t.floors.isActive()&&!t.panels.has("floorList")&&c.regionHasFloors(n)?e.mod({floorsIsHidden:!1}):e.mod({floorsIsHidden:!0})}function y(){_(),v()}function b(){e.rerender(),l.get("whatsNewExtrasButton")&&g()}var k={},w=void 0;return{networkDepend:!0,init:function(n){k=a.cloneDeep(n)||{},k.mods&&e.mod(a.assign(k.mods,{giftsIsOpened:t.panels.has("presents2015"),awardIsOpened:t.panels.has("award2015"),summerIsOpened:t.panels.has("summer2016"),victoryIsOpened:t.panels.has("9may"),hiddenEvents:t.floors.isActive()})),e.mod({floorsIsHidden:!0})},viewContext:function(){var e=r.getRegion(),t={presents2015:l.get("presents2015"),award2015:l.get("award2015"),summer:l.get("summer"),victory:l.get("victory")},n=a.find(t,function(e){return e}),i=o("floorList",{city:e.code}),c=a.assign({showDownloadBtn:s.getSettings().tools.downloadBtn,events:n?t:null,showPrint:k.printFeature||!1,floors:l.get("floors"),floorListSeoLink:i,whatsNew:l.get("whatsNewExtrasButton")},m());return c},clientInit:function(){var n=t.panels[0];if(n)switch(n.type){case"presents2015":e.element("gifts").mod({giftsIsOpend:!0});break;case"award2015":e.element("award").mod({awardIsOpend:!0});break;case"summer2016":e.element("summer").mod({summerIsOpend:!0});break;case"victory":e.element("victory").mod({victoryIsOpened:!0})}v(),r.onInit(y)},elements:{feedback:{selector:".extras__btn._type_feedback",click:function(){e.notify("feedbackModeSet"),e.notify("popupOpened"),$(this).remove()}},share:{selector:".extras__btn._type_share",click:function(){e.notify("shareModeSet"),e.notify("popupOpened"),$(this).remove(),t.floors.isActive()&&n.trackEvent("googleFloors",["Control","Share"])}},download:{selector:".extras__btn._type_download",click:function(){e.notify("downloadModeSet"),e.notify("popupOpened"),$(this).remove()}},more:{selector:".extras__btn._type_more",click:function(){d(!0,"more"),n.trackEvent("google",["Extras","Show"]),$(this).remove()}},overlay:{click:function(){d(!1)}},menuItem:{click:function(){d(!1)}},print:{selector:".extras__btn._type_print",click:function(){e.notify("print",{analyticsAction:"Click"}),t.floors.isActive()&&n.trackEvent("googleFloors",["Control","Print"])}},menuExtension:{selector:".extras__menuItem._extension",click:function(){n.trackEvent("google",["Extras","Extension_click"])}},menuAddFirm:{selector:".extras__menuItem._addFirm",click:function(){n.trackEvent("google",["Extras","Add_click"])}},whatsNew:{selector:".extras__btn._type_whatsNew",click:function(){t.set("whatsNew",{}),t.push(),n.trackEvent("google",["Extras","Whatsnew"])}},gifts:{selector:".extras__btn._type_gifts",click:function(){e.notify("showEvent","Extras","presents2015")}},summer:{selector:".extras__btn._type_summer",click:function(){e.notify("showEvent","Extras","summer2016")}},award:{selector:".extras__btn._type_award",click:function(){e.notify("showEvent","Extras","award2015")}},victory:{selector:".extras__btn._type_victory",click:function(){e.notify("showEvent","Extras","9may")}},langSwitcher:{selector:".extras__btn._type_langSwitcher",click:function(){d(!0,"languages")}},languageMenuItem:{selector:".extras__menuItem._language",click:function(t){return $(this).mod().active?void t.preventDefault():(e.cookie(e.config.multilangCookie,$(this).data("lang-code"),{path:"/",expires:367}),void n.trackEvent("google",["Extras","Language",$(this).data("lang-code")]))}},floors:{selector:".extras__btn._type_floors",click:function(t){t.preventDefault(),e.notify("showFloorList")}}},changeState:function(n){if("share"in n&&(e.mod({shareIsOpened:!!n.share}),n.share||(e.notify("popupClosed"),b())),"feedback"in n&&(e.mod({feedbackIsOpened:!!n.feedback}),n.feedback||(e.notify("popupClosed"),b())),"download"in n&&(e.mod({downloadIsOpened:!!n.download}),n.download||(e.notify("popupClosed"),b())),"city"in n&&b(),"extras/menu"in n){if(n["extras/menu"])switch(e.notify("popupOpened"),n["extras/menu"].type){case"more":e.mod({more:!0});break;case"languages":e.mod({languages:!0})}else{switch(e.notify("popupClosed"),t.prevState["extras/menu"].type){case"more":e.mod({more:!1});break;case"languages":e.mod({languages:!1})}b()}e.mod({opened:!!n["extras/menu"]})}"panels"in n&&(e.mod({giftsIsOpened:t.panels.has("presents2015"),awardIsOpened:t.panels.has("award2015"),summerIsOpened:t.panels.has("summer2016"),victoryIsOpened:t.panels.has("9may")}),v()),"floors"in n&&v(),"whatsNew"in n&&(w=0,g())},"interface":{vertical:function(t){e.mod({vertical:!!t})},hidden:function(t){e.mod({hidden:!!t})},hideWhenFlying:function(){e.mod({hiddenEvents:!1})},enterFloors:function(){e.mod({hiddenEvents:!0})},exitFloors:function(){e.mod({hiddenEvents:!1})},enterGlobal:function(){e.mod({floorsIsHidden:!0,hiddenEvents:!0})},exitGlobal:function(){v()}},modHandlers:{vertical:function(t){e.notify("vertical",t)}}}},t.exports._args=["slot","$appState","$analytics","$regionManager","$i18n","$featureSwitcher","$floorsManager","$whatsNewApi"]},{lodash:"lodash"}],"/modules/favoriteShare/favoriteShare.js":[function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return e.stopPropagation(),e}function o(e){return{config:e.arrayOf(e.oneOf(s.values(p)).isRequired).isRequired,shortUrl:e.string.isRequired,compactMode:e.bool,makeSocialShare:e.func,onCloseClickHandler:e.func}}function r(e){return s.compose(m(e),d(f),u(o,"favoriteShare"))}var s=e("lodash"),l=req("lib/dumbModule"),c=l.dumb,u=l.checkPropTypes,d=l.setDefaultProps,h=req("helpers/favoriteShare"),p=h.socials,f={compactMode:!0,makeSocialShare:s.noop,onCloseClickHandler:s.noop},m=s.curry(function(e,t){return{viewAttrs:{"class":t.compactMode?"_mode_compact":""},viewContext:function(){return{socials:s.map(t.config,function(e){return a({},e,!0)}),shortUrl:t.shortUrl,compactMode:t.compactMode}},bind:function(){var t=e.element("linkInput"),n=t.get(0);n&&!t.is(":focus")&&(n.focus(),n.select())},elements:{close:{click:s.compose(t.onCloseClickHandler,i)},linkInput:{focus:function(e){e.target.select()}},vk:{selector:".favoriteShare__item._type_"+p.vk,click:function(e){t.makeSocialShare(p.vk,t),e.stopPropagation()}},tw:{selector:".favoriteShare__item._type_"+p.tw,click:function(e){t.makeSocialShare(p.tw,t),e.stopPropagation()}},fb:{selector:".favoriteShare__item._type_"+p.fb,click:function(e){t.makeSocialShare(p.fb,t),e.stopPropagation()}},ok:{selector:".favoriteShare__item._type_"+p.ok,click:function(e){t.makeSocialShare(p.ok,t),e.stopPropagation()}}}}});t.exports=c(r)},{lodash:"lodash"}],"/modules/favoriteTools/favoriteTools.js":[function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return e.stopPropagation(),e}function o(e){return c.map(e,function(e){return c.map(e,function(e){return a({},e,!0)})})}function r(e){return{modifiers:e.string,config:e.arrayOf(e.arrayOf(e.oneOf([f,m,g,_,v,y,b,k,w]).isRequired).isRequired).isRequired,onDeleteClickHandler:e.func,onRenameClickHandler:e.func,onShareClickHandler:e.func,onSharedClickHandler:e.func,onUnshareClickHandler:e.func,onChangeCoverClickHandler:e.func,onDescriptionClickHandler:e.func,onSubscribeClickHandler:e.func,onUnsubscribeClickHandler:e.func}}function s(e){return{viewContext:function(){return{groups:o(e.config)}},viewAttrs:{"class":e.modifiers},elements:{"delete":{selector:".favoriteTools__item._type_"+v,click:c.compose(e.onDeleteClickHandler,i)},rename:{selector:".favoriteTools__item._type_"+y,click:c.compose(e.onRenameClickHandler,i)},share:{selector:".favoriteTools__item._type_"+m,click:c.compose(e.onShareClickHandler,i)},shared:{selector:".favoriteTools__item._type_"+g,click:c.compose(e.onSharedClickHandler,i)},unshare:{selector:".favoriteTools__item._type_"+_,click:c.compose(e.onUnshareClickHandler,i)},changeCover:{selector:".favoriteTools__item._type_"+f,click:c.compose(e.onChangeCoverClickHandler,i)},description:{selector:".favoriteTools__item._type_"+b,click:c.compose(e.onDescriptionClickHandler,i)},subscribe:{selector:".favoriteTools__item._type_"+k,click:c.compose(e.onSubscribeClickHandler,i)},unsubscribe:{selector:".favoriteTools__item._type_"+w,click:c.compose(e.onUnsubscribeClickHandler,i)}}}}function l(){return c.compose(s,p(x),h(r,"favoriteTools"))}var c=e("lodash"),u=req("lib/dumbModule"),d=u.dumb,h=u.checkPropTypes,p=u.setDefaultProps,f="changeCover",m="share",g="shared",_="unshare",v="delete",y="rename",b="description",k="subscribe",w="unsubscribe",x={modifiers:"",onDeleteClickHandler:c.noop,onRenameClickHandler:c.noop,onShareClickHandler:c.noop,onSharedClickHandler:c.noop,onUnshareClickHandler:c.noop,onChangeCoverClickHandler:c.noop,onDescriptionClickHandler:c.noop,onSubscribeClickHandler:c.noop,onUnsubscribeClickHandler:c.noop};t.exports=d(l)},{lodash:"lodash"}],"/modules/favorites/favorites.js":[function(e,t,n){"use strict";function a(e){return{mediaMode:e.bool,mediaModeChanged:e.bool,mediaModeChanging:e.bool,mediaModeError:e.string,collectionLoaded:e.bool,collectionLoading:e.bool,collectionError:e.string,collection:e.shape({tittle:e.string,subscriptions_count:e.number,user:e.object.isRequired,is_subscribed:e.bool.isRequired,is_owned:e.bool.isRequired,is_shared:e.bool.isRequired,description:e.string}),list:e.arrayOf(e.shape({id:e.string}).isRequired),listLoaded:e.bool,listLoading:e.bool,onClickMediaToggleHandler:e.func,onClickDeleteHandler:e.func,onClickLockHandler:e.func,onClickSubscribeHandler:e.func,onClickUnsubscribeHandler:e.func,onClickShareHandler:e.func}}function i(e){return r.compose(h(e),p(e),m(e),f(e),g(e),u(d),c(a,"favorites"))}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=e("lodash"),s=req("lib/dumbModule"),l=s.dumb,c=s.checkPropTypes,u=s.setDefaultProps,d={onClickMediaToggleHandler:r.noop},h=r.curry(function(e,t){return{viewAttrs:{"class":r.compact([t.mediaMode?"_mode_media":"_mode_simple",t.favoritesEmpty?"_isEmpty":"",t.isBranded?"_branded":"",t.theme]).join(" ").trim()},elements:{mediaToggle:{click:t.onClickMediaToggleHandler},"delete":{click:t.onClickDeleteHandler},lock:{click:t.onClickLockHandler},share:{click:t.onClickShareHandler},subscribe:{selector:".favorites__subscribe._subscribe",click:t.onClickSubscribeHandler},unsubscribe:{selector:".favorites__subscribe._unsubscribe",click:t.onClickUnsubscribeHandler}},bind:function(){e.element("scroll").baron()},viewContext:function(){return{mediaMode:t.mediaMode,mediaModeChanged:t.mediaModeChanged,mediaModeChanging:t.mediaModeChanging,mediaModeError:t.mediaModeError,collection:t.collection,collectionLoaded:t.collectionLoaded,collectionLoading:t.collectionLoading,favoritesEmpty:t.favoritesEmpty,list:t.list,listLoaded:t.listLoaded,listLoading:t.listLoading,error:t.error}}}}),p=r.curry(function(e,t){return o({},t,{error:(t.listError||t.collectionError)&&e.initDumb("favorites404")})}),f=r.curry(function(e,t){return o({},t,{list:t.list.map(function(t){return e.initDumb("favoritesItem",t,t.favorite.id)})})}),m=r.curry(function(e,t){return r.isEmpty(t.collection.user)?t:o({},t,{collection:o({},t.collection,{user:o({},t.collection.user,{avatar:e.initDumb("avatar",{user:t.collection.user,size:20})})})})}),g=r.curry(function(e,t){return o({},t,{favoritesEmpty:r.isEmpty(t.list)&&e.initDumb("favoritesEmpty",{isFavorites:!0,isOwn:t.collection.is_owned})})});t.exports=l(i)},{lodash:"lodash"}],"/modules/favorites404/favorites404.js":[function(e,t,n){"use strict";var a=req("lib/dumbModule"),i=a.dumb;t.exports=i(function(){return function(){return{}}})},{}],"/modules/favoritesContainer/favoritesContainer.js":[function(e,t,n){"use strict";function a(e,t,n,a,u,f,m,g){function _(n){t.afterAuth(function(){t.getFavoritesCollection(n).then(function(){var e=o.get(t.getState(),"favorites.collection");e.is_subscribed||e.is_owned||(t.subscribeCollection(e.id,!0),g.trackEvent("google",["Collections","Collection","Subscribe"]))})}),e.notify("needsAuth")}function v(e,t){if(o.isEmpty(t))return e;var n={city:f.getRegion(),profile:i({},t,{type:l.typeIsGeo(t.type)?l.getGeoTypeHumanReadable(t,a):""})},r={i18n:a,regionManager:f,wkt:u},s=c(t,n,r).getHelperByType();s&&s.prepareData();var d=o.pick(n,["additionalText","desc","name","transportColor"]);return d.address=o.get(d,"desc.address"),d.desc=o.get(d,"desc.text"),i({},e,d)}function y(e,t){if(o.isEmpty(t))return e;var n=o.includes(["station","station_platform","station_entrance"],e.type),c=l.typeIsGeo(e.type),u=r.getRating(t),d={extension:o.capitalize(o.get(t,"name_ex.extension")),link:o.get(t,"links.entrances"),address:t.address_name,reviewsCount:o.get(u,"count"),rating:o.get(u,"value"),attrs:t.attribute_groups&&r.separateAttributes(t).all.reduce(function(e,t){return e.concat(t.attributes.map(function(e){return e.name}))},[])};return o.isEmpty(e.name)&&(d.name=t.name),o.isEmpty(e.desc)?(n&&(d.desc=s.getStationDesc(t,a)),c&&(d.desc=l.getGeoTypeHumanReadable(t,a))):n&&(d.additionalText=s.getStationDesc(t,a)),i({},e,d)}function b(e){return"point"!=e.type?e:i({},e,{name:e.name?e.name:a._t("Место на карте"),desc:a._t("Точка")})}function k(e){var t=e.name,n=void 0===t?"":t,a=e.address,r=void 0===a?"":a,s=e.additionalText,l=void 0===s?"":s,c=e.desc,u=void 0===c?"":c,d=o.curry(h.replaceAll)("&nbsp;"," "),p=d(n)==d(r)||d(r)==d(u),f=d(n)==d(l)||d(u)==d(l);return i({},e,{additionalText:f?"":l,address:p?"":r})}function w(e){return o.includes(["kg","kz"],e.country_code)||"moscow"==e.code}function x(e){var t=f.getRegion();return!(!m.get("summer")||e!=p||!w(t))}function C(){var n=I(),a=n.collection.is_media_mode_enabled,i=o.get(n,"collection.user_id"),r=x(i),s=f.getRegion();return{onClickMediaToggleHandler:function(){n.mediaModeChanging||(t.changeFavoritesMediaMode(!a,n.collection.is_owned),g.trackEvent("google",["Collections","List","Change_View",a?"0":"1"]))},onClickSubscribeHandler:function(){return t.needsAuth()?void _(n.collection.id):void(n.collection.subscribing||(t.subscribeCollection(n.collection.id,!0),g.trackEvent("google",["Collections","Collection","Subscribe"])))},onClickUnsubscribeHandler:function(){n.collection.subscribing||(t.unsubscribeCollection(n.collection.id,!0),g.trackEvent("google",["Collections","Collection","Unsubscribe"]))},mediaMode:a,mediaModeChanged:n.mediaModeChanged,mediaModeChanging:n.mediaModeChanging,mediaModeError:n.mediaModeError,collectionLoaded:n.collectionLoaded,collectionLoading:n.collectionLoading,collectionError:n.collectionError,collection:n.collection,theme:r?"_summer_"+s.domain:!1,isBranded:r,listLoaded:n.listLoaded,listLoading:n.listLoading,listError:n.listError,list:o.map(n.list,function(i,o){return{mediaMode:a,hovered:i.hovered,titleChanging:i.titleChanging,descriptionChanging:i.descriptionChanging,titleError:i.titleError,showTools:n.collection.is_owned,favorite:T(i),onClickHandler:function(){e.bssContext.startNewChain({pr:"favorite"}),e.notify("click",i),g.trackEvent("google",["Collections","Card","Click"])},onMouseEnterHandler:function(){e.notify("highlight",i)},onMouseLeaveHandler:function(){e.notify("unhighlight",i)},onDeleteClickHandler:function(e){t.removeFromCollection(e,n.collection.id),g.trackEvent("google",["Collections","Card","Remove"])},onSubmitItemTitle:function(e){t.updateFavoriteItemTitle(o,e),g.trackEvent("google",["Collections","Card","Edit"])},onSubmitItemDescription:function(e){t.updateFavoriteItemDescription(o,e),g.trackEvent("google",["Collections","Card","Comment"])},onShareClickHandler:function(){}}})}}function L(){var e=n.panels.get("favorites").collectionID;return t.getFavorites(e)}var I=function(){return t.getState().favorites},T=o.memoize(function(e){var t=o.get(e,"item.objectData"),n={id:e.id,title:e.title,description:e.description,objectId:o.get(t,"id"),photo:o.get(e,"item.photo.360x120"),type:o.get(e,"item.object_type",e.type)};return o.compose(k,b,o.partialRight(y,t),o.partialRight(v,t))(n)},function(e){return""+[e.id,e.title,e.description]}),S=void 0,E=void 0;return{inheritBssHash:!0,init:function(t,n){L().then(function(){S=e.initDumb("favorites",C()),e.isServer&&g.trackEvent("google",["Collections","Open","Direct"]),n()})},clientInit:function(){E=t.subscribe(function(){S.slot.rerenderDumb(C())})},dispose:function(){E&&E(),t.cleanFavoritesList()},"interface":{tabType:"favorite",highlightItem:function(t){e.block().find('.favoritesItem[data-favorite-id="'+t.id+'"]').addClass("_hover")},unhighlightItem:function(t){e.block().find('.favoritesItem[data-favorite-id="'+t.id+'"]').removeClass("_hover")},clearMap:function(){I().hideMarkers||t.hideFavoritesMarkers(!0)},drawOnMap:function(){I().hideMarkers&&t.hideFavoritesMarkers(!1)},loggedIn:function(){L()},loggedOut:function(){L()},setSeoParams:function(){var n=o.get(t.getState(),"favorites.collection");return n?(e.notify("setSeoParams",d(f,a,n)),!0):!0}}}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=e("lodash"),r=req("helpers/firm"),s=req("helpers/station"),l=req("helpers/geo"),c=req("helpers/miniCard"),u=e("../../helpers/favoriteShare"),d=u.makeCollectionSeoParams,h=req("helpers/string"),p=3488300;t.exports=a,t.exports._args=["slot","$favorites","$appState","$i18n","$wkt","$regionManager","$featureSwitcher","$analytics"]},{"../../helpers/favoriteShare":"/helpers/favoriteShare.js",lodash:"lodash"}],"/modules/favoritesEmpty/favoritesEmpty.js":[function(e,t,n){"use strict";function a(e){return{isFavorites:e.bool,isOwn:e.bool}}function i(e){return{viewContext:function(){return{isFavorites:e.isFavorites,isOwn:e.isOwn}}}}function o(){return r.compose(i,c(a,"favoritesEmpty"),u(d))}var r=e("lodash"),s=req("lib/dumbModule"),l=s.dumb,c=s.checkPropTypes,u=s.setDefaultProps,d={isFavorites:!1,isOwn:!1};t.exports=l(o)},{lodash:"lodash"}],"/modules/favoritesItem/favoritesItem.js":[function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return{showDeleteDialog:!1,titleEdit:!1,descriptionEdit:!1,title:e.favorite.title||u(e.favorite.name),description:e.favorite.description||""}}function o(e){return{hovered:e.bool,onClickHandler:e.func.isRequired,onMouseEnterHandler:e.func,onMouseLeaveHandler:e.func,onSubmitItemTitle:e.func,onSubmitItemDescription:e.func,showTools:e.bool.isRequired,descriptionChanging:e.bool,favorite:e.shape({id:e.string.isRequired,title:e.string,name:e.string,extention:e.string,address:e.string,desc:e.string,description:e.string,rating:e.number,photo:e.string,reviewsCount:e.number,attrs:e.arrayOf(e.string)}).isRequired}}function r(e,t){function n(e){e.stopPropagation(),t.setState({titleEdit:!1,newTitle:y.title}),t.onSubmitItemTitle(y.title)}function i(e){e.stopPropagation(),t.setState({descriptionEdit:!1,newDescription:y.description}),t.onSubmitItemDescription(y.description)}function o(e){
var n=e.target,i=n.name,o=n.value;t.setState(a({},i,o))}function r(e){var a=e.target.name,o={title:n,description:i};switch(e.keyCode){case 13:o[a](e);break;case 27:t.setState({descriptionEdit:!1,titleEdit:!1});break;default:return}e.preventDefault(),e.stopPropagation()}function s(e){e.style.height=e.scrollHeight+"px"}function c(e){e.stopPropagation(),t.setState({descriptionEdit:!1,titleEdit:!1})}function d(){return e.initDumb("roundButtons",{buttons:["save","cancel"],onSaveClickHandler:n,onCancelClickHandler:c},"description")}function h(){return e.initDumb("roundButtons",{buttons:["save","cancel"],onSaveClickHandler:i,onCancelClickHandler:c},"title")}function p(){return e.initDumb("favoriteTools",{modifiers:"_shadow",config:[["rename","description","delete"]],onRenameClickHandler:function(){return t.setState({titleEdit:!0})},onDeleteClickHandler:function(){return t.setState({showDeleteDialog:!0})},onDescriptionClickHandler:function(){return t.setState({descriptionEdit:!0})}})}function f(){var n=v.title,a=v.description,i=v.address,o=v.desc,r=v.additionalText,s=v.name,c=v.attrs,u=v.photo,d=v.rating,h=[n,a,i,o,r],p=[n,a,i,o,r,c,u,d],f=function(e){return l.reduce(e,function(e,t){return e+!!t},0)},m=f(h),g=f(p);return e.initDumb("deleteDialog",{compact:t.mediaMode?2>g:2>m,name:n||s,onYesClickHandler:function(){return t.onDeleteClickHandler(v.id)},onNoClickHandler:function(){return t.setState({showDeleteDialog:!1})}})}function m(){return y.titleEdit?"":t.titleChanging?y.newTitle:v.title||u(v.name)}function g(){return y.titleEdit||v.title?v.name:""}function _(){return y.descriptionEdit?"":t.descriptionChanging?y.newDescription:v.description}var v=t.favorite,y=t.getState(),b=y.titleEdit&&d(),k=y.descriptionEdit&&h(),w=t.showTools&&!y.titleEdit&&!y.descriptionEdit&&p(),x=y.showDeleteDialog&&f();return{tag:"li",viewAttrs:{"class":[t.hovered?"_hover":"",t.mediaMode?"_media":"",t.favorite.photo?"_has_photo":""].join(" ").trim(),"data-favorite-id":l.get(t,"favorite.objectId","")},bind:function(){var t=e.element("inputSelf").get(0);t&&(s(t),t.focus())},elements:{block:{click:t.onClickHandler,mouseenter:t.onMouseEnterHandler,mouseleave:t.onMouseLeaveHandler},inputSelf:{input:o,keyup:r,click:function(e){return e.stopPropagation()},keypress:function(e){13==e.keyCode&&e.preventDefault()}}},viewContext:function(){return{titleButtons:b,descriptionButtons:k,tools:w,deleteDialog:x,mediaMode:t.mediaMode,photo:v.photo,reviewsCount:v.reviewsCount,rating:v.rating,title:m(),name:g(),address:v.address,desc:v.desc,additionalText:v.additionalText,description:_(),attrs:!l.isEmpty(v.attrs)&&v.attrs,titleEdit:y.titleEdit,titleInputValue:y.title,descriptionEdit:y.descriptionEdit,descriptionInputValue:y.description}}}}function s(e){return l.compose(function(t){return r(e,t)},m(e,i),p(o,"favoritesItem"),f(g))}var l=e("lodash"),c=req("helpers/string"),u=l.curry(c.replaceAll)("&nbsp;"," "),d=req("lib/dumbModule"),h=d.dumb,p=d.checkPropTypes,f=d.setDefaultProps,m=d.localState,g={hovered:!1,descriptionChanging:!1,onMouseEnterHandler:l.noop,onMouseLeaveHandler:l.noop};t.exports=h(s)},{lodash:"lodash"}],"/modules/favoritesTooltip/favoritesTooltip.js":[function(e,t,n){t.exports=function(e){function t(t){var n={width:e.block().outerWidth(!0),height:e.block().outerHeight(!0)},a=$(window).width(),o=t.offset(),r={width:t.outerWidth(!0),left:o.left,top:o.top},s={top:Math.max(r.top-l-n.height,c)},u=r.left+r.width/2-n.width/2;s.left=Math.floor(u),c>u&&(s.left=c);var d=a-s.left-n.width;return c>d&&(s.left=a-c-n.width),i.offset&&(s.left+=i.offset.x,s.top+=i.offset.y),s}function n(){o||(o=(new Date).getTime());var t=Math.max(u-((new Date).getTime()-o),d);return e.setTimeout(function(){e.dispose()},t)}var a,i,o,r={auth:{icon:"favorites_auth",textPartial:"auth"},overflow:{icon:"favorites_overflow",textPartial:"overflow"},overflowRemote:{icon:"favorites_overflow",textPartial:"overflowRemote"}},s=500,l=16,c=8,u=4500,d=200;return{init:function(t){e.viewContext=r[t.type],i=t.tooltipData,e.mod({type:t.type})},clientInit:function(){e.setTimeout(function(){e.block().css(t(i.sourceElement)),e.mod({shown:!0}),a=n()},s)},elements:{block:{click:function(){e.notify("showAuthPopup"),e.dispose()},mouseenter:function(){clearTimeout(a)},mouseleave:function(){a=n()}},close:{click:function(t){e.notify("close"),e.dispose(),t.stopPropagation()}}},"interface":{close:function(){e.dispose()}},changeState:function(){e.dispose()}}}},{}],"/modules/favoritesWidget/favoritesWidget.js":[function(e,t,n){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=e("lodash"),o=e("../../helpers/firm");t.exports=function(e,t,n,r){function s(e){var t=$(e.target),a=t.closest(".favoritesWidget");if(!a.length){var i=n.getState().widget.showDropDown;i&&n.widgetShowDropDown(!1)}}function l(e){var n=t.panels.last();return n?"stationPlatform"===n.type?n.platformId&&n.platformId===i.get(e,"platforms.[0].id"):"platform"===n.type?n.platformId&&n.platformId===e.id:"unknown"!==e.type&&"adm_div"!==e.type||"geo"!==n.type?o.getStaticId(n.id)===o.getStaticId(e.id):n.lat==e.point.lat&&n.lon==e.point.lon:null}function c(t){var i=n.getState().widget.showDropDown,o=!!n.getState().widget.favorite;return a({opened:i,checked:o,onClick:function(a){var o=n.needsAuth();return o?void e.notify("needsAuth",{moduleName:"favoritesWidget",entity:t.entity,element:a}):n.isFull()?void e.notify("showFavoritesFullTooltip",a):(n.widgetCreatingMode(!1),void(i?n.widgetShowDropDown(!1):(e.notify("addToFavorites",t.entity),n.widgetComplicatedAddToCollection(t.entity))))}},t)}function u(e){var t=n.getState().widget.showDropDown,i=n.getState().widget.creatingMode,o=d(e.entity);return a({items:o,opened:t,creatingMode:i,handlerSetCreateMod:function(){n.widgetCreatingMode(!0)},handlerCreation:function(e){var t=e.trim();t.length&&(n.widgetCreatingMode(!1),n.addCollectionItemToFavorites(t),f&&r.trackEvent("google",[f,"Favorites","New"]))},handlerCancelCreation:function(){n.widgetCreatingMode(!1)},handlerClose:function(){n.widgetShowDropDown(!1)}},e)}function d(t){var a=n.getState().collections.favorites||{},o=a.list,s=void 0===o?[]:o,l=n.getState().widget.favorite,c=l?l.collections||[]:[],u=n.isFull();return s.map(function(a){var o=i.some(c,function(e){return e.id===a.id});return{id:a.id,checked:o,title:a.title,onClick:function(i){if(o){if(n.widgetRemoveFromCollection(l.id,a.id),f){var s=1==c.length?"Remove":"Uncheck";r.trackEvent("google",[f,"Favorites",s])}}else{if(u)return void e.notify("showFavoritesFullTooltip",i);if(e.notify("addToFavorites",t),n.widgetAddToCollection(t,a.id),f){var d=0==c.length?"Add":"Check";r.trackEvent("google",[f,"Favorites",d])}}}}})}function h(){document.removeEventListener("click",s,!0),m&&(m(),m=null)}function p(){m||(m=n.subscribe(function(){_.slot.rerenderDumb(c(g)),v.slot.rerenderDumb(u(g))}),n.widgetInit(g.entity),document.addEventListener("click",s,!0))}var f=void 0,m=void 0,g=void 0,_=void 0,v=void 0;return{inheritBssHash:!0,init:function(t){g=t,_=e.initDumb("favoritesWidgetToggle",c(g)),v=e.initDumb("favoritesWidgetDropDown",u(g)),f=t.gaCategory},clientInit:function(){l(g.entity)&&p()},viewAttrs:function(){return{"class":"_"+g.type}},changeState:function(e){e.panels&&(l(g.entity)?p():h())},dispose:function(){h()},"interface":{loggedIn:function(){n.widgetInit(g.entity)},loggedOut:function(){n.widgetReset()}}}},t.exports._args=["slot","$appState","$favorites","$analytics"]},{"../../helpers/firm":"/helpers/firm.js",lodash:"lodash"}],"/modules/favoritesWidgetDropDown/favoritesWidgetDropDown.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule");t.exports=function(e){return a(function(t){var n={collectionTitle:""},a=t.creatingMode,i=t.items.map(function(t){return e.initDumb("favoritesWidgetDropDownItem",t,t.id)});return{viewAttrs:{"class":[t.opened?"_opened":"",t.dropDownPosition?"_"+t.dropDownPosition:""].join(" ")},viewContext:function(){return{items:i,creatingMode:a}},elements:{btnSetCreatingMode:{click:t.handlerSetCreateMod},createCollectionForm:{submit:function(a){a.preventDefault(),t.handlerCreation(n.collectionTitle);var i=e.element("content");i&&i.scrollTop(0)}},createCollectionInput:{keyup:function(e){n.collectionTitle=e.target.value||""}},createCollectionCancel:{click:function(){t.handlerCancelCreation()}},glass:{click:t.handlerClose}},bind:function(){var t=e.element("createCollectionInput").get(0);t&&t.focus()}}})}},{}],"/modules/favoritesWidgetDropDownItem/favoritesWidgetDropDownItem.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule");t.exports=function(){return a(function(e){var t=e.title,n=e.onClick,a=e.checked;return{viewContext:function(){return{title:t,checked:a}},elements:{block:{click:function(){n($(this))}}}}})}},{}],"/modules/favoritesWidgetToggle/favoritesWidgetToggle.js":[function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=req("lib/lazyModule");t.exports=function(){return i(function(e){var t=e.type,n=e.opened,i=e.checked,o=e.onClick;return{viewAttrs:function(){var e=["_"+t];return n&&(e=[].concat(a(e),["_opened"])),i&&(e=[].concat(a(e),["_checked"])),{"class":e.join(" ")}},viewContext:function(){return{template:t,checked:i,opened:n}},elements:{btn:{click:function(){o($(this))}}}}})}},{}],"/modules/feedback/feedback.js":[function(e,t,n){var a=e("lodash");t.exports=function(t,n,i,o,r,s,l,c,u){function d(){var e=n.getShareState();return delete e.feedback,t.location.href(e)}function h(){return t.element("formFieldText").val()||""}function p(){return t.element("formFieldName").val()||""}function f(){return t.element("formFieldEmail").val()||""}function m(e){e&&t.element("formFieldRating").find('[value="'+e+'"]').attr("checked",!0)}function g(){var e,n={city:S.name};if(t.isGrym){var i=DGOfflineAPI.systemContext.resolve("applicationSettings");n.product="v4desktop",n.versionDb=S.issue_date||"beta",n.versionShell=i.readValue("ApplicationVersion")+" ("+i.readValue("ProductId")+")"}else n.product="online";switch(e={sourceUrl:d(),screenWidth:window.innerWidth,screenHeight:window.innerHeight,message:h(),lang:s.getLang(),type:w.type},a.each(n,function(t,n){e["special["+n+"]"]=t}),w.type){case"dataError":e.filialId=w.filialId,e.filialName=w.filialName,e.filialAddress=w.filialAddress;break;case"mapError":e.place=w.lon+","+w.lat,e.placeTitle=w.placeTitle;break;case"publicTransportRouteError":e.routeType=w.routeType,e.routeNumber=w.routeNumber;break;case"photoError":e.type="photo",e.photoId=w.photoId,w.authorizationToken&&(e.sessionId=w.authorizationToken),w.objectType&&w.objectId&&(e.objectType=w.objectType,e.objectId=w.objectId);break;case"bookletError":e.type="product",e.special.product="booklet";break;case"discountError":e.type="product",e.special.product="discount";break;case"app":e.type="product",C&&(e.message=s._t("Оценка: ")+C+"\n"+e.message);break;case"claimToFirm":e.type="emailToCompany",e.filialId=w.filialId}return w.nameIsFromAuth&&(e.name=w.name),w.emailIsFromAuth&&(e.email=w.email),e}function _(){D=[],"claimToFirm"!=w.type||w.nameIsFromAuth||D.push("name"),!w.emailIsFromAuth&&a.includes(["photoError","claimToFirm"],w.type)&&D.push("email"),P||D.push("message")}function v(e){var n=N[e.errorCode],a=y(n);if($(a).mod({error:!0}),e.showMessage){var i=x[e.errorCode]||x.error;L||(L=t.init("errorMsg")),t.broadcast("errorMsg:show",{module:L,elemWithError:a,msg:i,fullWidth:!n})}}function y(e){return e?"file"==e?t.element("formFieldFiledescName"):t.block().find('[name="'+e+'"]').closest(".feedback__formField"):t.element("popup")}function b(e){function n(e){v({errorCode:e,showMessage:!s}),s=!0}var i=!0,o=$("input[name=feedback_rating]:checked").val(),r=t.element("formSubmitBtn"),s=!1;t.broadcast("errorMsg:hide"),a.each(D,function(a){var o=t.block().find('[name="'+a+'"]');o.val()?y(a).mod({error:!1}):(e&&e.name==a&&n(R[a]),i=!1)}),t.element("formFieldText").val().length>2e3?(n("tooLargeMessage"),I=!0):I&&(t.element("formFieldText").parent().mod({error:!1}),t.broadcast("errorMsg:hide"),I=!1);var l=t.element("formFile")[0];if(l&&"undefined"!=typeof FileReader&&""!=l.value){var c=l.files[0],u=c.size||c.fileSize,d=c.type||c.mediaType||"";d=d.toLowerCase(),a.contains(["image/gif","image/jpeg","image/jpg","image/png","image/bmp"],d)?u>1024*t.config["feedbackApi.maxFileSize"]*1024&&n("bigFile"):n("incorrectFileFormat")}!P||t.element("formFieldText").val()||o||(i=!1),i?r.mod({disabled:!1}):r.mod({disabled:!0})}function k(e){return{click:function(n){A.showOwner&&(t.notify("showPromoOwner",e,w.firmId),n.preventDefault())}}}var w,x,C,L,I,T,S=o.getRegion(),E=e("./viewModel.js"),P=!1,j="landingPage"==t.registry.get("appMode"),M=s.getSettings(),A=M&&M.firms||{},D=[],R={name:"emptyName",email:"emptyEmail",message:"emptyMessage"},N={emptyName:"name",emptyEmail:"email",invalidEmail:"email",emptyMessage:"message",tooLargeMessage:"message",incorrectFileFormat:"file",bigFile:"file"};x={emptyName:s._t("Введите ваше имя"),emptyEmail:s._t("Введите адрес электронной почты"),invalidEmail:s._t("Неверный формат электронной почты"),emptyMessage:s._t("Пустое сообщение"),tooLargeMessage:s._t("Слишком длинное сообщение"),incorrectFileFormat:s._t("Неверный формат файла"),bigFile:s._t("Файл слишком большой"),error:s._t("Ошибка отправки формы")};var B={init:function(e,n){t.mod({type:e.feedbackType}),w=a.clone(e),w.type=w.feedbackType,w.city=S,w.name="",w.email="",w.text=l.getItem("feedback"+w.feedbackType)||"",w.name=l.getItem("feedbackName")||"",w.email=l.getItem("feedbackEmail")||"","app"==w.type&&(P=!0),i.trackEvent("google",["Feedback","Open",w.type]),r.isAuthorized()?r.getAuthorizedUser(function(e,t){w.name=e.display_name||w.name||"",w.email=e.email||w.email||"",w.nameIsFromAuth=!!w.name,w.emailIsFromAuth=!!w.email,w.authorizationToken=t,_(),n()},!1):(_(),n())},clientInit:function(){t.element("formSubmitBtn").mod({disabled:!0}),t.ua().isPhone||t.element("formFieldName").trigger("focus"),j&&t.mod({isLandingPage:!0}),w.text&&b();var e=t.registry("feedback").pos;t.mod({pos:e}),C=l.getItem("feedbackMark"),m(C)},viewContext:function(){return E(w,{i18n:s,region:S,isLoyaltyState:t.getLoyaltyState(),ua:t.ua(),config:t.config,isEmailRequired:a.includes(D,"email")})},elements:{overlay:{click:function(){t.notify("close")}},popupClose:{click:function(){t.notify("close")}},ownerFb:k("feedback"),ownerEr:k("edit_data"),form:{submit:function(e){if(e.preventDefault(),b(),!t.element("formSubmitBtn").mod().disabled){t.mod({loading:!0}),t.element("formSubmitBtn").mod({disabled:!0});var o=new FormData(t.element("form")[0]),r=g();a.each(r,function(e,t){o.append(t,e)}),u.send(o).then(function(){t.notify("sentFeedback",w.type,w.bss),t.element("formSubmitBtn").mod({disabled:!1}),w.type="response",t.rerender()})["catch"](function(e){v({errorCode:e,showMessage:!0})})["finally"](function(){t.mod({loading:!1})}),t.notify("submit",w.type,C),C=null,i.trackEvent("yandex",["FEEDBACK_SUBMIT"]),n.floors.isActive()&&i.trackEvent("googleFloors",["Control","Feedback_Submit"])}}},formFieldInput:{keyup:function(e){9!=e.keyCode&&b(e.target)}},formFieldText:{keyup:function(e){9!=e.keyCode&&b(e.target)}},formRatingLabel:{click:function(){P&&(C=$(this).prev().val()),t.setTimeout(b,0)}},formFile:{change:function(){var e=$(this).val().split("\\"),n=t.element("formAttach"),a="";e.length?(a=e[e.length-1],t.element("formFieldFiledescName").text(a),n.mod({attached:!0})):(t.element("formFieldFiledescName").text(""),n.mod({attached:!1})),b()}},chatLink:{click:function(e){e.preventDefault(),t.notify("openChatLinkClicked")}},formFieldFiledescClear:{click:function(){var e=t.element("formFile");e.replaceWith(e.clone(!0)),t.element("formAttach").mod({attached:!1}),t.element("formFieldFiledescName").text("").mod({error:!1}),b()}},addFirmBtn:{click:function(){i.trackEvent("google",["Add_Firm","Feedback_Add_firm",w.filialName])}},phoneLink:{click:function(e){if(!t.ua().isPhone&&c.get("p2d")){e.preventDefault();var n=$(this);T||t.init("push2dialCaller",function(e,n){e||(t.block().append(n.render()),n.bindEvents(),T=n)});var a=n.text();a&&(t.broadcast("push2dialCaller:dial",this,a),t.notify("close"))}}}},"interface":{close:function(){l.setItem("feedback"+w.feedbackType,h()),w.nameIsFromAuth||l.setItem("feedbackName",p()),w.emailIsFromAuth||l.setItem("feedbackEmail",f()),P&&l.setItem("feedbackMark",C),t.dispose()},reposition:function(e){t.mod({pos:e})}}};return B},t.exports._args=["slot","$appState","$analytics","$regionManager","$authorization","$i18n","$sessionStorage","$featureSwitcher","$feedbackApi"]},{"./viewModel.js":196,lodash:"lodash"}],"/modules/filters/filters.js":[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(t,n,i,o,r,s){function l(){return"mediaCard"===t.mod().context}function c(e,i,o){a.contains(["work_time_mode","work_day","work_hour"],e)&&(i="",e="work_time");var r=e+(i?":"+i:"");return l()?void(o?t.notify("shownMediaFilters",r,e):n.trackEvent("google",["Search","Media_Filters",r])):void(o?F.snippet&&n.trackEvent("google",["Search","Filters_Show",r]):F.snippet?n.trackEvent("google",["Search","Filters",r]):n.trackEvent("google",["Search","Advanced",r]))}function u(e){h();var n=N.read("onFilterValuesChange");a.isFunction(n)&&n(e||t.moduleId())}function d(e){N.setFilters(v()),a.each(e,function(e,t){if(null!==e){var n=a.isArray(e)?e.join(","):""+e;N.setFilterValue(t,n)}else N.delFilterValue(t);N.write("lastChangedFilter",t)}),u(),I(!0)}function h(){var e=k(),n=N.read("forcedValues");F.activeCount=z.countWidgets(F.allwidgets,e,n),t.element("primaryExtendedCount").text(F.activeCount),t.mod({hasActiveFilters:!!F.activeCount}),t.notify("hasActiveFilters",!!F.activeCount)}function p(e){var n=$(e).closest(t.element("group")),a=n.seeable(1);if(!a){var i=n.position().top,o=n.outerHeight();t.notify("scrollToGroupRequested",i,o)}}function f(){function e(e,t,n){switch(t=a.isUndefined(t)?a.first(e.values):t,n=a.isUndefined(n)?a.last(e.values):n,e.type){case"time":return t;case"enum_slider":var i=a.indexOf(e.values,t),o=a.lastIndexOf(e.values,n);return e.values.slice(i,o+1);default:return[t,n].join("-")}}z.eachControl(F,function(n){var i=$("#"+n.id,t.block()[0]);if(i.length&&z.isSlider(n.type)){var r={root:i,track:$(".filters__raderTrack",i),trackActive:$(".filters__raderTrackActive",i),points:$(".filters__raderPoint",i),runners:$(".filters__raderRunner",i),pointInRangeCls:"_range_in",click:!0,stickingRadius:20,bumpRadius:20,values:n.values,scale:n.scale,pointsPos:n.points,runnersVal:n.initValues,change:function(t){var i=Math.round(t.minVal),o=Math.round(t.maxVal),r=e(n,i,o);if("enum_slider"==n.type){var s=r.length==n.points.length;a.each(n.points,function(e){var t=[n.name,e].join("_");-1===r.indexOf(e)||s?N.delFilterValue(t):N.setFilterValue(t,"true")})}else i==n.points[0]&&o==a.last(n.points)?N.delFilterValue(n.name):N.setFilterValue(n.name,r);N.write("lastChangedFilter",n.name),u(),c(n.name)},move:function(e){var a=z.sliderRange(n,{minVal:Math.round(e.minVal,10),maxVal:Math.round(e.maxVal,10)},o),i=t.renderPartial("range",a);g(n,i),t.notify("updateSlider",n,{html:i,event:e,contextId:R,sender:t.moduleId()})}};"mediaCard"===F.context&&(a.extend(r,{stickingRadius:0,bumpRadius:0,onUpdate:function(e){var a=o.getFormats("number"),r=H.numberString(Math.round(e.maxVal),a);i.find(t.element("raderRunnerLabelNumber")).html(r),_(n,i,e.minVal)}}),"time"===n.type?a.extend(r,{stickingRadius:20,pointsPos:n.points}):r.runnersFreeze=[1,0]),n.rader=i.rader(r),c(n.name,null,!0)}})}function m(){t.block().find(".checkbox, .radiogroup__input").on("change",function(e){var t=e.target,n=t.value,i=$(t).mod().disabled,o=t.checked;if("checkbox"==t.type){var r=t.name.split(",");a.each(r,function(e){var a;i?(t.checked=!1,$(t).mod({disabled:!1})):o&&(a=n),a?N.setFilterValue(e,a):N.delFilterValue(e)})}else{var s=U.getDefaultValue(t.name);o&&n&&n!=s?N.setFilterValue(t.name,n):N.delFilterValue(t.name)}N.write("lastChangedFilter",t.name),"radio"==t.type&&"work_time_mode"==t.name&&(y(),l()&&p(t)),u(),c(t.name,t.value)}),z.eachControl(F,function(e){if(!z.isSlider(e.type))if(l()){var n=$("#"+e.id);L(n)&&(V.push(e.id),c(e.name,(e.values||[]).join(","),!0))}else c(e.name,(e.values||[]).join(","),!0);if(e.allowOff){var a=$('.radiogroup__input[name="'+e.name+'"][value="'+e.value+'"]',t.block());q.makeUncheckable(a.parents(".radiogroup, .filters__radiogroup"))}})}function g(e,t){$(".filters__raderDesc[data-rader-id="+e.id+"]").html(t)}function _(e,t,n){"time"==e.type&&(n=Math.round(n),t.find(".filters__raderScalePoint").mod({active:!1}),t.find('.filters__raderScalePoint[data-val="'+n+'"]').mod({active:!0}))}function v(){var e=i.getRegion(),t=W().add(time.userTimeOffset,"seconds");t.utcOffset(e&&e.time_zone?e.time_zone.offset:0);var n=["sun","mon","tue","wed","thu","fri","sat"];return{work_day:n[t.day()],work_hour:[t.hour()]}}function y(){var e=t.element("workHoursSlider"),n=t.element("weekDaysGroup"),a="specified"==k().work_time_mode;b(e,a),q.switchRadioGroup(n,a)}function b(e,t){e.mod({disabled:!t})}function k(){return a.extend(v(),N.getFilters())}function w(){if(l()&&$(this).mod().disabled){var e=$('.radiogroup__input[name="work_time_mode"][value="specified"]',t.block());e.is(":disabled")||e.trigger("click")}}function x(e){e.mod({expanded:!0}),t.setTimeout(function(){t.notify("filterExpand"),Y()},450)}function C(e){var n=e.closest(t.element("section")),a=e.find(t.element("expanderTitle"));n.mod().expanded?(n.mod({expanded:!1}),a.text(Z.expand)):(n.mod({expanded:!0}),a.text(Z.rollup)),t.setTimeout(function(){B.update(),n.mod({opened:!n.mod().opened})},450)}function L(e){var t=e.parent();return"none"!==t.css("display")&&t.seeable(.6)&&-1===a.indexOf(V,e.attr("id"))}function I(e){var n=k(),a=N.read("forcedValues");(e||N.read("initiatorId")!=t.moduleId())&&(z.eachControl(F,function(e){z.applyValue2UI(e,n,a,t.block()[0],$),z.isSlider(e.type)&&e.rader&&e.rader.invalidate()}),y(),h())}function T(){t.mod().hasAdditionalFilters&&r.panels.panels.length<2&&F.snippet&&t.setTimeout(function(){r.panels.show("filters"),n.trackEvent("inspectlet",["Filter"]),r.push()},500)}function S(){N.delFilterValue("work_time_mode"),t.setTimeout(function(){I(!0)})}function E(e){var n=a.findIndex(F.widgets,{name:e});n&&(t.element("group").filter(function(e){return e>n}).mod({hidden:!0}),t.block().mod({fixed:!0}),t.notify("toggled"))}function P(){t.block().mod({fixed:!1}),t.element("group").mod({hidden:!1}),t.notify("toggled")}function j(e,t,n){return a.has(e,n)?{key:t,value:n}:null}function M(){var e=a.union(a.get(D,"widgets.actions"),a.get(D,"widgets.main"));return!!a.find(a.compact(e),function(e){return"combobox"==e.widget&&a.startsWith(e.tag,"carspares")})}function A(e){return"work_round_the_clock"==e?"alltime":e}var D,R,N,B,F={},O=e("./viewModel"),z=e("./utils"),q=e("./radioUtils"),U=req("helpers/filters"),H=req("helpers/string"),G=req("helpers/mediaCard"),W=e("moment"),V=[],Z={expand:o._t("Посмотреть все"),rollup:o._t("Скрыть")},Y=a.throttle(function(){var e=t.element("flagInput");a.each(e,function(e){if(e=$(e),L(e)){var t=e.attr("name"),n=e.attr("value");V.push(e.attr("id")),c(t,n,!0)}})},300),K={init:function(e){D=a.cloneDeep(e)||{},R=D.contextId,N=t.searchContext.getById(R),D.forcedValues?(D.forcedValues=a.map(D.forcedValues,A),N.write("forcedValues",D.forcedValues)):D.forcedValues=N.read("forcedValues"),D.values=k(),D.contextRubricsIds=a.pluck(N.read("contextRubrics")||D.contextRubricsIds,"short_id"),D.mediaRubric=N.read("mediaRubric");var n=a.curry(j)(D.values);a.chain(D.widgets).values().flatten().filter({widget:"buttons"}).pluck("items").flattenDeep().map(function(e){return a.map(e.values,n(e.key))}).flattenDeep().each(function(e){e&&(N.delFilterValue(e.value),N.setFilterValue("key:"+e.key,e.value))}).value(),D.isAutoParts=s.get("autoparts")&&M(D.contextRubricsIds),N.setFilters(D.values),F=O(D,o,i.getRegion(),s),a.size(F.primaryAdditional)&&t.mod({hasAdditionalFilters:!0}),z.eachControl(F,function(e){if(z.isSelectbox(e.type)){var n=a.extend(a.pick(e,"name","items","forced","tag"),e.params);e.selectBox=t.init("selectBox",n),delete e.items}e.checkConnection&&(e.checkConnectionWidget=t.init("checkConnectionWidget",{type:"filters"}))}),N.on("filtersUpdate",function(e){D.values=k(),D.filters=e;var n=O(D,o,i.getRegion(),s);z.eachControl(n,function(e){if(z.isSelectbox(e.type)){var n=a.find(t.modules.selectBox,function(t){return t["interface"].getName()==e.name});if(n){var i=n["interface"].getValue();i&&!a.find(e.items,i)||n["interface"].setItems(e.items)}}})}),t.mod({context:F.context,hasActiveFilters:!!F.activeCount,loading:!0})},clientInit:function(){f(),m(),y(),t.mod({loading:!1}),a.each(F.widgets,function(e){e.expandedOnInit&&t.element("group[data-name="+e.name+"]").mod({expanded:!0})})},bind:function(){var e;"catalog"!=t.mod().context&&(e=t.element("scroller"),B=e.baron({bar:e.children(".track").children(".track__bar")}).fix(),t.setTimeout(function(){B.update()},100))},viewContext:function(){return F},elements:{primaryExtended:{click:function(e){t.notify("extendedSearchClicked"),e.stopPropagation()}},headerClear:{click:function(e){N.setFilters(v()),I(!0),u(),e.preventDefault(),n.trackEvent("google",["Search","Click","Parameters_Search_clear"])}},raderRunner:{mousemove:function(){var e=$(this),n=e.closest(t.element("rader")),a=e.hasClass("_pos_left")?"_hover_min":"_hover_max";n.addClass(a)},mouseleave:function(){var e=$(this),n=e.closest(t.element("rader")),a=e.hasClass("_pos_left")?"_hover_min":"_hover_max";n.removeClass(a)}},workHoursSlider:{selector:".filters__rader._hours",click:w},weekDaysGroup:{selector:".radiogroup._week, .filters__radiogroup._week",click:w},openedCheckbox:{selector:".filters__flag._type_now",click:S},alltimeCheckbox:{selector:".filters__flag._type_alltime",click:S},openedRadio:{selector:'.radiogroup__input[name="work_time_mode"]',click:function(){l()&&t.setTimeout(function(){I(!0)})}},expand:{click:function(){x($(this).closest(".filters__group"))}},expander:{click:function(){C($(this))},mouseenter:function(){$(this).closest(t.element("section")).mod({hovered:!0})},mouseleave:function(){$(this).closest(t.element("section")).mod({hovered:!1})}},linkItem:{click:function(e){var n,i,o=$(this).data("id");a.get(F,"primaryAdditional.length")&&(n=a.find(F.primaryAdditional,"id",o),i=a.get(n,"action")),i&&(i(t),e.preventDefault())}}},"interface":{activateContent:function(){if(!K["interface"].deactivatedOnce&&l()){var e=a.pluck(N.read("contextRubrics")||[],"short_id"),t=G.getMediaFirmRubric(e,i);n.trackEvent("google",["Search","Media_Filters_show",t])}},resize:Y,scrolled:Y,toggleTextMode:function(e){t.mod({displayMode:e?"text":"widgets"})},applyValues:function(e){u(e)},updateSlider:function(e,n){var a;n.sender!=t.moduleId()&&R==n.contextId&&(z.eachControl(F,function(t){t.name==e.name&&(a=t)}),a&&a.rader&&a.id&&(g(a,n.html),a.rader.val(0,n.event.minVal),a.rader.val(1,n.event.maxVal)))},invalidateUIValues:I,getWidgets:function(){return F.widgets},expandGroup:function(e){var n=t.element("group").filter('[data-name="'+e+'"]');x(n)},hideGroupsAfter:E,showAllGroups:P,setValues:d,getDefaultValues:v,finalActions:T},dispatcher:{"selectBox:changed":function(e){a.startsWith(e.current,"car_spares_")||a.startsWith(e.prev,"car_spares_")?(N.delFilterValue(e.prev),e.current&&N.setFilterValue(e.current,!0)):(N.delFilterValue(e.name),e.current&&N.setFilterValue(e.name,e.current)),u(),c(e.current,!0)},"*:animationCompleted":function(){B.update()}}};return K},t.exports._args=["slot","$analytics","$regionManager","$i18n","$appState","$featureSwitcher"]},{"./radioUtils":200,"./utils":201,"./viewModel":202,lodash:"lodash",moment:"moment"}],"/modules/firmCard/firmCard.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/contact"),o=req("helpers/discount"),r=req("lib/markerDataManager"),s=req("helpers/analytics"),l=req("helpers/firm"),c=req("helpers/string"),u=e("bluebird"),d=req("helpers/link"),h=req("helpers/mediaCard");t.exports=function(t,n,p,f,m,g,_,v,y,b,k,w,x,C,L,I){function T(){t.registry.get("offline")||(t.notify("allReviewsClicked",ue),ue.reviews&&ue.reviews.reg_bc_url&&t.notify("firmReviewClicked",{place:me,reg_bc_url:ue.reg_bc_url},de.bss),ke&&m.trackEvent("googleFloors",["Firm_Card","Review_Click"]))}function S(e){p.floors.isActive()||(e=e||{},ue.links&&ue.links.entrances&&(e.analyticsPlace=me,t.notify("pathFinderEntranceClicked",ue,a.extend(e,de.bss))))}function E(){var e=l.getMainRubric(ue);t.element("plusOne").length&&m.trackEvent("google",["Firm_Card_event","Plusone_Show",e]),t.element("booklet").length&&m.trackEvent("google",["Firm_Card_event","Booklet_Show",e]),t.element("discounts").length&&m.trackEvent("googleBooklets",["Discount","Card_Button","Show"])}function P(){var e,n=f.getRegion();_e="discovery"==t.searchContext.read("requestType");var i=l.checkFloors(ue,g,x);i&&(e=d.getFirmInFloorsLink(ue,x,f));var o={place:me,sid:m.session,user:m.user,ill:a.get(de,"bss.ill")},r=xe(de,{i18n:v,plusOneFeature:g.get("plusOne"),hasFloors:i,floorsSeoLink:e}),s=we(de.get("data"),{region:n,formats:v.getFormats(),settings:v.getSettings(),lang:v.getLang(),plusOneFeature:g.get("plusOne"),contextRubricId:a.map(t.searchContext.read("contextRubrics"),"id"),isDiscovery:_e,dontPreloadPhoto:t.isServer,postponeRecoveryAds:t.isServer,favoritesFeature:g.get("favorites"),isPhone:t.ua().isPhone,doNotCutAttrs:t.Mausoleum,hasFloors:i,floorsSeoLink:e,shownInFloors:ke,floorName:ue.floorName,photosUploaderControl:g.get("photosUploader"),isCarPark:de.hasRubric(409),mediaButtons:r,bss:o});return s.schedule=!!t.modules.schedule,s}function j(e){return!!i.firstByType("phone",e.contact_groups)}function M(e){return!!i.firstByType("website",e.contact_groups)}function A(e){return v.getSettings("landmarksEnabled")&&a.has(e,"links.landmarks")}function D(e){var t=e.links&&e.links.nearest_stations;return!a.isEmpty(t)&&!A(e)}function R(){m.trackEvent("google",["Firm_Card_event","Time"]),t.notify("scheduleOpened",{place:me,reg_bc_url:ue.reg_bc_url},de.bss),ve.update()}function N(){var e=t.element("photosImg");if(e.length&&!e.mod().loaded){var n=e.data("src"),a=new Image;a.onload=function(){e.css("background-image","url("+n+")").mod({loaded:!0})},a.src=n}}function B(){ve&&ve.update()}function F(e,n){var i=a.extend({},e,n);i.id=fe,t.notify("showMediaCard"),t.notify("replaceFrame",{moduleName:"mediaCard",moduleData:i})}function O(){C.getDiscounts({branchId:ue.id}).then(function(e){if(e&&e.length){var n=a.first(e),i=f.getRegion(),r=o.isInternationalDiscountsRegion(i),s=!l.checkAds(ue)&&r?1:e.length;t.element("discountsTitle").text(o.getDiscountTitleWithPercent(n)),t.element("discountsText").text(c.getSynopsis(n.description,48)),t.element("discountsMore").text(o.getDiscountsMoreText(s,v))}})["catch"](function(e){})}function z(){var e=275,n=603,a=de.hasRubricsFromList([e,n]);g.get("apartments")&&a&&de.loadApartments().then(function(e){if(e){var n=V(de);t.rerenderPartial("buttons","mediaButtons",n)}})["catch"](function(e){})}function q(){var e=$(this),t=e.mod(),n=t.collapsed;return t.expandable&&(n=!n,e.mod({collapsed:n})),n}function U(){s.changeTimeParam($(this))}function H(e){b.getBranchInfo(e).then(function(t){if(200==a.get(t,"body.meta.code")){var n=a.get(t,"body.result.counters",{}),i=n.goods_owner>0,o=n.goods_vendor>0&&!l.checkAds(ue);i&&W(e),o&&G(e)}})["catch"](function(e){})}function G(e){b.getBranchProposals(e).then(function(e){var n=a.get(e,"body.result.items",[]);if(n.length){var i=a.first(n),o=t.init("proposals",i);be=i.title,t.element("proposals").append(o.render()),t.element("recoveryAds").mod({hidden:!0}),o.bindEvents(),Z()}})["catch"](function(e){})}function W(e){ye=e;var n=V(de);t.rerenderPartial("buttons","mediaButtons",n),t.notify("proposalsButtonShown",ue.name)}function V(e){return xe(e,{i18n:v,plusOneFeature:g.get("plusOne"),offline:!!t.registry.get("offline"),hasFloors:l.checkFloors(ue,g,x),
proposals:ye})}function Z(){be&&t.element("proposals").seeable(.7)&&(t.notify("proposalShown",be),be=null)}function Y(e){var n=Object.assign({},e,{reg_bc_url:ue.reg_bc_url,ill:a.get(de,"bss.ill")});t.notify("contactClicked",n,me)}function K(e){this.stop(),Y(e)}function X(e){t.notify("pathActionClicked",e,{id:ue.id,text:ue.name,lat:a.get(ue,"point.lat"),lon:a.get(ue,"point.lon")}),t.notify("routeSearchClicked",{place:me,reg_bc_url:ue.reg_bc_url},de.bss),m.trackEvent("google",["Firm_Card_event","Route","Click"]),m.trackEvent("yandex",["BRNCH_CRD_RT_CLCK_T"]),ke&&m.trackEvent("googleFloors",["Firm_Card","Route_Action_Click"])}function J(){m.trackEvent("yandex",["SITE_CLCK_IMG"]),m.trackEvent("google",["Firm_Card_event","Site","Control"])}function Q(){S(),m.trackEvent("google",["Firm_Card_event","Enter","Click"])}function ee(){t.ua().isMobile&&t.notify("minimizeViewer"),t.notify("floorNameSelected",ue),m.trackEvent("googleFloors",["Firm_Card","Floor_Action_Click"])}function te(){var e=t.element("phonesDropdown");Ee||(Ee=t.init("contact",{bss:a.get(ue,"bss"),analyticsPlace:me,model:ue.contact_groups,firmModel:a.extend(ue,a.pick(de,"bss")),mode:"dropdown"}),e.html(Ee.render()),Ee.bindEvents())}function ne(e){var n=t.element("phonesDropdown");n.mod({shown:e})}function ae(){ne(!0)}function ie(){ne(!1)}function oe(e,t){Se=je.setPhoneActionState(Se,e,t),Pe.slot.rerenderDumb(Se)}function re(e){if(m.trackEvent("google",["Firm_Card_event","Phone","Action"]),ke&&m.trackEvent("googleFloors",["Firm_Card","Phone_Action_Click"]),t.ua().isPhone&&a.find(Se,"type","phone").isLink){var n=i.firstByType("phone",ue.contact_groups)||i.firstByType("fax",ue.contact_groups);if(!n)return;return void Y(n)}e.preventDefault(),oe(!0,se),te(),ae(),t.broadcast("contact:showPhones")}function se(e){e.preventDefault(),oe(!1,re),ie()}function le(){var e=a.find(ue.photoAlbums,{type:"common"});return e?e.count:0}function ce(e,n){return a.isEmpty(e.group)?!1:(t.notify("replaceFrame",{moduleName:"card",moduleData:{bss:de.bss,is_poi:de.is_poi,group:e.group,data:e,lon:parseFloat(n.lon),lat:parseFloat(n.lat),entranceOptions:n.entranceOptions,entrance:n.entrance,analyticsPlace:me,shownInFloors:!!n.floors,contextId:n.id,initedId:n.initedId}}),!0)}var ue,de,he,pe,fe,me,ge,_e,ve,ye,be,ke,we=e("./viewModel"),xe=e("./viewModelMediaButtons.js"),Ce=v.getSettings(),Le=Ce&&Ce.firms||{},Ie=L.get("isSearchBot"),Te=k.award({regionId:f.getRegion().id}),Se=void 0,Ee=void 0,Pe=void 0,je=e("./actionsList"),Me=a.throttle(function(){t.broadcast("recoveryAds:sendImpressions"),Z()},50),Ae={networkDepend:!0,inheritBssHash:!0,init:function(e,n){function i(){Se=t.invoke(je,[ue,{analyticsPlace:me,ua:t.ua(),clickHandlers:{website:J,phone:re,pathFrom:a.partial(X,"from"),pathTo:a.partial(X,"to"),entrance:Q,floor:ee},websiteOtherHandlers:{mouseenter:U,focus:U},shownInFloors:ke}]),Pe=t.initDumb("cardActions",Se);var e=[];ue.contact_groups&&e.push({type:"contact",data:{bss:a.get(ue,"bss"),analyticsPlace:me,model:ue.contact_groups,masterSchedule:ue.schedule,firmModel:a.extend(ue,a.pick(de,"bss"))}}),ue.schedule&&e.push({type:"schedule",data:{model:ue.schedule,ctx:"firmCard"}},{type:"microSchedule",data:{model:ue.schedule}}),Ie&&e.push({type:"jsonld",data:{model:ue,type:"firmcard"}}),e.push({type:"cardHeader",data:ue}),t.init("promoMobile",{module:"firmCard"}),t.initModules(e)}function o(){var e=!!p.get("query");e&&(ue.seeAlsoGeometries=r.makeByList(ue.see_also,"recovery"));var n={adFirms:ue.see_also};ue.recoveryAds=t.init("recoveryAds",n),t.mod({hasRecoveryAds:!!ue.recoveryAds})}function s(e){ue=e,t.isMausoleum&&ue.reg_bc_url&&t.registry.set("firmRegBcUrl",ue.reg_bc_url),ue.see_also&&(ue.see_also=a.take(ue.see_also,t.config["firmCard.seeAlsoSize"])),ue.enableProviders=g.get("bookletProviders");var n=a.get(ue,"rubrics[0].name");w.set(n,"panels"),i(),a.isArray(ue.see_also)&&ue.see_also.length>0&&o()}he=e.entranceOptions,pe=e.entrance,me=e.analyticsPlace||m.getPlace()||m.PLACE_CATALOG,ke=!!e.floors,fe=e.id;var c;!t.registry.get("bssFromOtherTab")&&t.registry.get("isInit")?(t.bssContext.startNewChain({pr:"link"}),c=!0):a.get(p,"state.isFromHistory")&&fe==l.getStaticId(fe)&&t.bssContext.startNewChain({pr:"back_in_browser",updateContext:!0});var d=a.cloneDeep(e.bss||{});d.poiHash=m.getFromPoiHash(l.getStaticId(fe));var v=m.getFromPoiHash(e.id+"_floors");v?(t.bssContext.setHash(v),t.bssContext.continueChain(),d.poiHash=v):p.floors.isActive()&&!c&&e.is_poi&&t.bssContext.startNewChain({pr:"poi",updateContext:!0});var y={is_poi:e.is_poi,bss:d,includeDeleted:ke};de=k.firm(e.id,y);var b,C=Te.getWinnersIds()["catch"](function(e){t.sendError("Error in init awardBadge in firmCard",e)}),L={firmData:de.promise(),awardWinners:C};ke&&(b=k.floors(p.get("floors").complexId),L.floorsModel=b.loadComplex()),u.props(L).then(function(i){var o=i.firmData,r=i.awardWinners,l=h.isMediaFirm(g,f,o);if(!l&&!ke&&ce(o,e))return n();if(ke){var c=p.get("floors").complexId;o.floors=!0,o.complexId=c,o.mallName=x.getByComplexId(c).name,o.floorName=b.getFloorName(o.id)}return a.includes(r,o.id)&&!t.isMausoleum&&t.init("awardBadge",{direction:"left",target:"Firm_Card_event"}),de.is_poi&&(m.getFromPoiHash(o.id)||m.setNewPoiHash(o.id,o._hash),_.processQueue()),e.isParkingsFromFloors&&(o.isOpenedFromFloors=!0),l&&!ke?(F(e,o),n()):(s(o),t.viewContext=P(),g.get("reviews")?t.init("firmCardReview",{id:ue.id,point:ue.point,reviews:o.reviews,analyticsPlace:me},function(){n()}):n(),e.isParkingsFromFloors&&(ge=!0),null)})["catch"](n),m.trackEvent("inspectlet",[{Firm_Card:"Regular"}])},clientInit:function(){t.element("recoveryAds").data("rerender")&&t.element("recoveryAds").html(ue.recoveryAds.render());var e=!!l.getDiscounts(ue,f.getRegion());e&&O(),z(),t.config["features.proposals"]&&H(ue.id),E(ue),t.element("scroller").mod({overflow:"touch"}),S({onInit:!0,mute:!0,movingType:pe?"onEntranceFocus":"notMove"}),g.get("businessLandingDemoMode")&&t.setTimeout(function(){t.notify("focusPoint",ue.point,{notChangeZoom:!0,checkBounds:!1})},0),g.get("floors")||t.element("floors").mod({hidden:!0}),N(),I.getItem("photosUploaderTooltipFirmCard")||0!=le()||(t.notify("showPhotosUploaderTooltip",{type:"firm",tooltipData:{sourceElement:t.element("addPhotoControl"),clickHandler:function(){t.notify("photosUploaderControlClicked",{id:ue.id,albumName:"common"})}}}),I.setItem("photosUploaderTooltipFirmCard",!0))},bind:function(){ve=t.element("scroller").baron().fix(),t.setTimeout(function(){ve.update()},100)},dispose:function(){de&&de.dispose(),w.deleteLastByType("panels")},viewAttrs:function(){if(t.isMausoleum){var e=de.get("data");return{"data-mausoleum-lon":a.get(e,".point.lon")||"","data-mausoleum-lat":a.get(e,".point.lat")||""}}return{}},elements:{photos:{click:function(e){e.preventDefault(),t.notify("photosClicked",{id:ue.id,albumName:"common"}),m.trackEvent("google",["Firm_Card_event","Photos",de.get("mainRubricName")]),ke&&m.trackEvent("googleFloors",["Firm_Card","Photos","Click"]);var n=l.getPhotoAlbumCommon(ue);n&&t.notify("firmPhotoPreviewsClicked",{reg_bc_url:ue.reg_bc_url,place:me},de.bss)}},addPhotoControl:{click:function(){t.notify("photosUploaderControlClicked",{id:ue.id,albumName:"common"}),m.trackEvent("google",["Firm_Card_event","Photos_Add",de.get("mainRubricName"),a.get(t.viewContext,"photos.count")?0:1])}},facilitiesLink:{click:function(e){e.preventDefault(),m.trackEvent("google",["Firm_Card_event","Accssblt","Click"]),ke&&m.trackEvent("googleFloors",["Firm_Card","Accssblt_Click"]),t.notify("photosClicked",{id:ue.id,albumName:"facilities"})}},geoPhotos:{click:function(e){e.preventDefault(),m.trackEvent("google",["Firm_Card_event","Build_photos","Click"]),ke&&m.trackEvent("googleFloors",["Firm_Card","Build_Photos_Click"]),t.notify("photosClicked",{id:ue.id,albumName:"view"})}},contactSection:{selector:".firmCard__section._contact"},rubric:{click:function(){var e=q.call(this);e||m.trackEvent("google",["Firm_Card_event","Attribute_more",de.get("mainRubricName")])}},rubricTitleLink:{click:function(e){e.preventDefault();var n=$(this).data("id"),a=$(this).text();a&&n&&(m.trackEvent("google",["Firm_Card_event","Rubric_click",a]),t.bssContext.startNewChain({pr:"rubric"}),t.notify("rubricClicked",{name:a,id:n}))}},rubricsItemLink:{click:function(e){e.preventDefault();var n=$(this).parent().data("id"),a=$(this).text();a&&n&&(m.trackEvent("google",["Firm_Card_event","Rubric_click",a]),ke&&m.trackEvent("googleFloors",["Firm_Card","Rubric_Click"]),t.bssContext.startNewChain({pr:"rubric"}),t.notify("rubricClicked",{name:a,id:n}))}},advFirmLink:{click:function(){var e=$(this).closest(".card__adv"),n=e.data("profile-id"),a=e.data("profile-hash"),i=n+"_"+a;t.notify("advSelected",{id:i})}},filialsLink:{click:function(e){t.bssContext.startNewChain({pr:"filial"}),t.notify("branchesClick",{id:ue.org&&ue.org.id,branch:[ue.id],place:me,reg_bc_url:ue.reg_bc_url},de.bss),m.trackEvent("google",["Firm_Card_event","Branches"]),e.preventDefault()}},addressLink:{click:function(e){e.preventDefault(),$(this).parent().mod().notClickable||(t.notify("addressSelected",ue),m.trackEvent("google",["Firm_Card_event","Address"]),ue.address&&ue.address.reg_bc_url&&t.notify("addressClicked",{place:me,reg_bc_url:ue.reg_bc_url},de.bss))}},geoNameLink:{click:function(e){e.preventDefault(),$(this).data("noclick")||(t.notify("addressSelected",ue),m.trackEvent("google",["Firm_Card_event","Address"]),ue.address&&ue.address.reg_bc_url&&t.notify("addressClicked",{place:me,reg_bc_url:ue.reg_bc_url},de.bss))}},footerBugReportLink:{click:function(){t.notify("bugReportLinkClicked",ue),ke&&m.trackEvent("googleFloors",["Firm_Card","Error_Click"])}},footerContent:{},booklet:{click:function(e){var n=l.getBooklet(ue,v);n&&n.value&&(t.notify("bookletButtonClicked",n.value,{regBc:n.reg_bc_url,analyticsPlace:me}),m.trackEvent("google",["Firm_Card_event","Booklet_click",de.get("mainRubricName")]),m.trackEvent("yandex",["BOOKLET_OPEN"]),ke&&m.trackEvent("googleFloors",["Firm_Card","Booklet","Click"])),e.preventDefault()}},apartments:{click:function(e){t.notify("showApartmentsOnMapButtonClicked",ue.org.id),e.preventDefault()}},floors:{click:function(e){e.preventDefault();var n=a.get(ue,"address.building_id");t.bssContext.continueChain(),t.notify("floors",x.getByBuildingId(n),{branchId:fe}),t.notify("showInFloorsClicked",{place:me,reg_bc_url:ue.reg_bc_url},de.bss),x.hasBranch(l.getStaticId(ue.id))?m.trackEvent("googleFloors",["Floors_Enter","Firm_Mall_Card_Button","Click"]):m.trackEvent("googleFloors",["Floors_Enter","Firm_Card_Button","Click"])}},proposalsButton:{click:function(){t.notify("proposalsCoverageClicked",ye,ue.name)}},plusOne:{click:function(e){var n=l.getPlusOne(ue);e.stopPropagation(),e.preventDefault(),t.notify("plusOne",ue.id,n),m.trackEvent("google",["Firm_Card_event","Plusone_click",de.get("mainRubricName")]),t.notify("plusOneClicked",{place:me,reg_bc_url:ue.reg_bc_url},de.bss)}},discounts:{click:function(e){e.preventDefault(),t.notify("discountsButtonClicked",{branchId:l.getStaticId(ue.id),place:me,reg_bc_url:ue.reg_bc_url},de.bss),ke&&m.trackEvent("googleFloors",["Firm_Card","Discounts_Preview_Click"])}},footerOwnerLink:{click:function(e){Le.showOwner&&(t.notify("showPromoOwner","firm_profile",ue.org&&ue.org.id),e.preventDefault()),m.trackEvent("google",["Firm_Card_event","Owner"]),ke&&m.trackEvent("googleFloors",["Firm_Card","Owner_Click"])}},adsIn:{click:function(e){e.preventDefault(),ue.ads&&ue.ads.article&&(t.notify("ownerInfoClick",{id:fe||ue.id,place:me,reg_bc_url:ue.reg_bc_url},de.bss),m.trackEvent("google",["Firm_Card_event","Additional_Info",de.get("mainRubricName")]),ke&&m.trackEvent("googleFloors",["Firm_Card","Additional_Info_Click"]))}},adsLinkIn:{mouseenter:U,focus:U,click:function(){ke&&m.trackEvent("googleFloors",["Firm_Card","Adv_Link_Click"])}},footerAdvLink:{click:function(){m.trackEvent("google",["Firm_Card_event","Advertisement","Your_adv"]),ke&&m.trackEvent("googleFloors",["Firm_Card","Adv_Click"])}},landmarkLink:{click:function(e){e.preventDefault();var n=$(this);t.notify("landmarkClicked",{id:n.data("id"),type:n.data("type"),subtype:n.data("subtype"),stationId:n.data("station-id"),reg_bc_url:ue.reg_bc_url,place:me},de.bss),m.trackEvent("google",["Firm_Card_event","Landmarks","Click"])}},nearStopLink:{click:function(e){e.preventDefault();var i=$(this).data("id"),o=$(this).data("type");i&&(m.trackEvent("google",["Firm_Card_event","Stop",o]),ke&&m.trackEvent("googleFloors",["Firm_Card","Stop_Click"]),n.transport.station(i,function(e,n){t.notify("nearStationSelected",a.extend(ue,a.pick(de,"bss")),n)}))}},parkingsLink:{click:function(){ge=!0;var e=a.merge({},de.bss);e.bssContext=t.bssContext,e.isPoi=de.is_poi,t.notify("parkingsShown",ue,e),ke&&m.trackEvent("googleFloors",["Firm_Card","Parking_Click"])}},scroller:{scroll:function(){Me(this)}}},"interface":{tabType:"firms",getMapOptions:function(){he&&t.notify("takeMapOptions",ue,he)},updateScroll:B,drawOnMap:function(){ue.address&&ue.address.building_id&&t.notify("mapDataReady",ue,ge)},clearMap:function(){t.notify("clearMap",ue,ge)},parkingsResult:function(e){if(!e){var n=t.element("parkings");n&&n.text(v._t("Нет информации о парковках"))}var a=_e?"Discovery":"Recovery";m.trackEvent("google",["Firm_Card_event","Parking_near",a,+e])},activateContent:function(){if(!Ae["interface"].deactivatedOnce&&(m.trackEvent("google",["Cards","Firm","Regular"]),m.trackEvent("yandex",["CARD_FIRM_REGULAR"]),ue)){if(t.broadcast("contact:shown"),(ue.reg_bc_url||fe)&&t.setTimeout(function(){t.notify("firmCardOpened",{place:me,reg_bc_url:ue.reg_bc_url,id:fe},de.bss)},0),a.isArray(ue.see_also)&&ue.see_also.length>0){var e=!!a.find(ue.see_also,function(e){return e.ads});e&&m.trackEvent("google",["Recovery","Show","Card_recovery"])}ue.links&&ue.links.entrances&&ue.links.entrances.length&&m.trackEvent("google",["Firm_Card_event","Enter","Show"]),ue.reviews&&t.element("rating").css("display")&&"none"!=t.element("rating").css("display")||m.trackEvent("google",["Firm_Card_event","Reviews","No_Up_reviews"]),ue.ads&&ue.ads.article&&m.trackEvent("google",["Firm_Card_event","Additional_Info_Show",de.get("mainRubricName")]),ue.point||m.trackEvent("google",["Firm_Card_event","Address_Null"]),j(ue)||m.trackEvent("google",["Firm_Card_event","Phone_Null"]),M(ue)||m.trackEvent("google",["Firm_Card_event","Site_Null"]),D(ue)&&m.trackEvent("google",["Firm_Card_event","Stop_Show",de.get("stopType")]),A(ue)&&m.trackEvent("google",["Firm_Card_event","Landmarks","Show"]),ue.schedule||m.trackEvent("google",["Firm_Card_event","Time_Null"]),ue.org&&ue.org.branch_count>1&&m.trackEvent("google",["Firm_Card_event","Branches_Show"]),a.findWhere(ue.external_content,{type:"photo_album",subtype:"common"})&&(m.trackEvent("google",["Firm_Card_event","Photos_Show",de.get("mainRubricName")]),ke&&m.trackEvent("googleFloors",["Firm_Card","Photos","Show"])),a.findWhere(ue.external_content,{type:"photo_album",subtype:"facilities"})&&m.trackEvent("google",["Firm_Card_event","Accssblt","Show"]),a.findWhere(ue.external_content,{type:"photo_album",subtype:"view"})&&m.trackEvent("google",["Firm_Card_event","Build_photos","Show"]),a.find(Se,"type","path")&&m.trackEvent("yandex",["BRNCH_CRD_RT_SH"]),l.getBooklet(ue,v)&&ke&&m.trackEvent("googleFloors",["Firm_Card","Booklet","Show"]),!ke&&l.checkFloors(ue,g,x)&&(x.hasBranch(l.getStaticId(ue.id))?m.trackEvent("googleFloors",["Floors_Enter","Firm_Mall_Card_Button","Show"]):m.trackEvent("googleFloors",["Floors_Enter","Firm_Card_Button","Show"]))}},pathfinderEntrance:S,setSeoParams:function(){return t.notifySeoParams(l.prepareForSeo(ue)),!0},"orientationСhange":function(){var e=t.element("scroller");e.mod({overflow:"auto"}),setTimeout(function(){e.mod({overflow:"touch"})},100)},getPrintData:function(){var e=a.clone(t.viewContext),n=t.modules.contact,i=t.modules.schedule;if(n){var o=n["interface"].printContext.call(n);e.contact=o&&o.html}if(i){var r=i["interface"].printContext.call(i);e.schedule=r&&r.html}return{analyticsLabel:"Firm_Card",layout:"full","static":t.renderPartial("print",e),externalPrintParams:{singleMarker:!0}}},getAnalyticsPlace:function(){return me},prepareForPrint:function(){t.notify("addressSelected",ue)},openSendEmailForm:function(){t.notify("openSendEmailForm",ue)}},dispatcher:{"contact:expand":B,"contact:collapse":B,"schedule:toggled":R,"recoveryAds:firmDisplayed":function(e){this.stop(),Ae["interface"].deactivatedOnce||t.notify("firmDisplayed",e,m.PLACE_CATALOG)},"firmCardReview:reviewsLinkClicked":T,"firmCardReview:reviewClicked":function(){t.notify("firmReviewClicked",{place:me,reg_bc_url:ue.reg_bc_url},de.bss)},"contact:expanded":function(){t.notify("allContactsClicked",{place:me,reg_bc_url:ue.reg_bc_url},de.bss)},"contact:dial":K,"contact:phonesShown":a.once(K),"contact:contactClick":K,"contact:sendEmailLinkClicked":function(){t.notify("sendEmailClicked",{place:me,reg_bc_url:ue.reg_bc_url},de.bss)}}};return Ae},t.exports._args=["slot","$dgApi","$appState","$regionManager","$analytics","$featureSwitcher","$bssContext","$i18n","$bookletApi","$proposalsApi","$models","$contextStorage","$floorsManager","$discountsApi","$syncRegistry","$localStorage"]},{"./actionsList":204,"./viewModel":206,"./viewModelMediaButtons.js":207,bluebird:384,lodash:"lodash"}],"/modules/firmCardReview/firmCardReview.js":[function(e,t,n){var a=e("lodash");t.exports=function(t,n,i,o,r,s){function l(e){return!!a.find(e.items,"is_reviewable",!0)}function c(e){var t=a.find(e.items,"tag","flamp");return a.get(t,"is_reviewable")}function u(e){return e.general_review_count}var d,h,p,f,m,g=s(),_={init:function(e,i){if(p=a.cloneDeep(e.reviews||{}),!l(p))return void i(!0);d=e.id,h=e.point,m=e.analyticsLabel||"Firm_Card_event";var o=u(p);!t.isClient&&o||i(),o&&n.getLastReview(d,function(e,n){e||(f=n,g.resolve()),t.isServer&&i(e)}),t.isMausoleum&&t.mod({expanded:!0})},clientInit:function(){g.done(a.bind(t.rerender,t))},viewContext:function(){var t=i.getRegion(),n=e("./viewModel"),a=n(f,{id:d,point:h,total:u(p),region:t,i18n:o,canShowWriteButton:c(p)});return a},elements:{review:{click:function(){t.mod({expanded:!t.mod().expanded}),t.mod().expanded&&(r.trackEvent("google",[m,"Reviews","Last_review_click"]),t.notify("reviewClicked"))}},reviewFooterLink:{click:function(e){e.preventDefault(),t.notify("reviewsLinkClicked"),r.trackEvent("google",[m,"Reviews","Down_reviews_click"])}}}};return _},t.exports._args=["slot","$reviewsApi","$regionManager","$i18n","$analytics","$defer"]},{"./viewModel":208,lodash:"lodash"}],"/modules/floorList/floorList.js":[function(e,t,n){"use strict";var a=e("bluebird"),i=e("lodash"),o=req("helpers/request");t.exports=function(e,t,n,r,s,l,c){function u(e){return i(_).pluck("branchId").chunk(x).get(e-1)}function d(e){return{id:e.branchId,lon:e.centroid[1],lat:e.centroid[0],name:e.name}}function h(e){return new a(function(t,n){r.firms.floorsProfiles(u(e),function(e,a){e?n(e):t(a.data)})})}function p(){i.invoke(b,"dispose")}function f(t){b=i(t).map(function(t){var n=i.find(_,function(e){return e.branchId==t.id});return t.ads=null,t.org=null,t.parentType="floorList",t.context||(t.context={}),t.context.stop_factors||(t.context.stop_factors=[]),t.context.stop_factors.push({name:s._nt("%1 организация в здании","%1 организации в здании","%1 организаций в здании",n.branchCount)},{name:s._nt("%1 этаж","%1 этажа","%1 этажей",n.floorCount)}),e.init("mediaMiniCard",{model:t})}).value()}function m(t){return t=t||1,y.current=t,e.broadcast("pagination:invalidate",y),e.element("scroller").scrollTop(0),e.mod({loading:!0}),h(t).then(function(t){p(),f(t),e.mod({loading:!1}),e.rerender()})}function g(t){e.mod("paginationHidden",t.count<=1)}var _,v,y,b=[],k=[],w=l.getRegion(),x=e.config["WebApi.mediaPageSize"];return{inheritBssHash:!0,init:function(a,r){if(!t.get("floors")&&e.ua().isPhone)return void o.emitError(404,"floors feature is disabled on phone",{msgType:"floorsNotAllowedOnPhone"},r);if(_=n.getList()||[],_=i(_).filter(function(e){return e.regionId==w.id&&"mall"==e.type}).sort(function(e,t){return t.branchCount-e.branchCount}).value(),!_.length)return e.notify("close"),void r();k=_.map(d),y={current:a.page||1,count:Math.ceil(_.length/x)};var s={city:w.code,type:"floorList"};e.init("pagination",{page:y,seoParams:s,context:"media"}),g(y),h(y.current).then(f).then(r)},clientInit:function(){return t.get("floors")||e.ua().isPhone?void(v=!0):(e.notify("clientNotSupported",{msgType:"floorsWithoutWebGl"}),void(v=!1))},bind:function(){v&&setTimeout(function(){e.element("scroller").baron()},0)},viewContext:function(){return{cards:b}},elements:{},"interface":{tabType:"geo",tabCount:function(){return b.length},drawOnMap:function(){t.get("floors")&&e.notify("mapDataReady",{markers:k})},clearMap:function(){e.notify("clearMap")},setSeoParams:function(){return e.notifySeoParams({type:"floorList"}),!0}},dispatcher:{"mediaMiniCard:clicked":function(a){var i=a.buildingId;t.get("floors")&&(e.bssContext.startNewChain({pr:"promo"}),e.notify("floors",n.getByBuildingId(i)),c.trackEvent("googleFloors",["Floors_Enter","Floors_List","Click"]))}},changeState:function(e){if(e.panels&&e.panels.changed){var t=i.find(e.panels.changed,function(e){return"floorList"==e.diff.type});t&&void 0!==t.diff.page&&m(t.diff.page)}}}},t.exports._args=["slot","$featureSwitcher","$floorsManager","$dgApi","$i18n","$regionManager","$analytics"]},{bluebird:384,lodash:"lodash"}],"/modules/floorSelect/floorSelect.js":[function(e,t,n){var a=e("lodash");t.exports=function(e){function t(t){return a.isArray(t)||(t=[t]),e.element("item").filter(function(){return a.includes(t,parseInt($(this).data("index"),10))})}var n=[];return{init:function(t){t=t||[];var a=t.length;n=t.slice().reverse().map(function(e,t){return{index:a-t-1,name:e,isLong:e.length>1}}),a>5&&e.mod({scrollable:!0,scrollPosition:"top"})},viewContext:function(){return{floors:n}},elements:{item:{click:function(){e.notify("floorSelected",parseInt($(this).data("index"),10))}},container:{scroll:function(){var t=e.element("container");0==t.scrollTop()?e.mod({scrollPosition:"top"}):t[0].scrollHeight-t.scrollTop()==t.outerHeight()?e.mod({scrollPosition:"bottom"}):e.mod({scrollPosition:null})}}},"interface":{rerender:function(){e.rerender()},highlightFloor:function(n){e.element("item").mod({selected:!1}),t(n).mod({selected:!0})},indicateResults:function(e){t(e).mod({hasResults:!0})},clearResults:function(){e.element("item").mod({hasResults:!1})}},dispatcher:{}}}},{lodash:"lodash"}],"/modules/floors/floors.js":[function(e,t,n){"use strict";var a=e("bluebird"),i=req("helpers/floors"),o=req("helpers/firm"),r=e("lodash");t.exports=function(e,t,n,s,l,c,u,d,h,p){function f(){var t=K.getCurrentFloor();K.floorUpAvailable()?e.element("floorUp").attr("data-number",Y.getFloorName(t+1)).mod({enabled:!0}):e.element("floorUp").mod({enabled:!1}),K.floorDownAvailable()?e.element("floorDown").attr("data-number",Y.getFloorName(t-1)).mod({enabled:!0}):e.element("floorDown").mod({enabled:!1}),e.broadcast("floorSelect:highlightFloor",t),X&&(n.floors.setFloorNum(t),n.push(),j())}function m(){var t=r.round(Z.getZoom(),2),n=r.round(Z.getMinZoom(),2),a=r.round(Z.getMaxZoom(),2);n>=t?e.broadcast("zoom:minZoomLevel"):t>=a?e.broadcast("zoom:maxZoomLevel"):e.broadcast("zoom:intermediateZoomLevel")}function g(){var t=r.round(Z.getRotation(),2)-r.round(Y.getViewAngle(),2);e.broadcast("rotate:rotateToAngle",180*t/Math.PI)}function _(){var e=Z.getCenter();n.floors.setCenter({xPos:e[0],yPos:e[1]});var t=Z.getRotation();n.floors.setRotation(t);var a=K.getCurrentFloor();n.floors.setFloorNum(a);var i=Z.getZoom();n.floors.setZoom(i),X&&!J?n.pushFromMap():(n.replace(),J=!1)}function v(t){e.notify("roomClicked",r.get(t,"data"))}function y(t){e.notify("markerClicked",r.get(t,"data"))}function b(){oe&&(e.broadcast("floorsTooltip:hide"),e.notify("tooltipHidden"),oe=!1,re=null)}function k(t){var n=r.get(t,"data");if(n.firmIds.length){K.rooms.hover(n.id);var a=n.firmIds.filter(function(e){return r.includes(le,e)});a.length?a.forEach(function(e){return K.markers.hover(e)}):K.markers.hover(n.firmIds[0]),e.notify("firmsHovered",n.firmIds),ne={type:"firms",ids:n.firmIds,data:{}}}}function w(t){var n=r.get(t,"data");n.firmIds.length&&(K.rooms.unhover(n.id),n.firmIds.forEach(function(e){K.markers.unhover(e)}),e.notify("firmsUnhovered"),ne=null),b()}function x(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function C(t){if(!e.ua().isMobile){var n={x:r.get(t,"originalEvent.clientX"),y:r.get(t,"originalEvent.clientY")};oe?x(n,re)>se&&(b(),de(n)):de(n)}}function L(t){var n=r.get(t,"data.firmId"),a=r.get(t,"data.iconId");n?(e.notify("firmsHovered",[n]),ne={type:"firms",ids:[n],data:{}}):a&&(ne={type:"entity",ids:[a],label:t.data.text}),T(t.data)}function I(t){ne=null;var n=r.get(t,"data.firmId");n&&e.notify("firmsUnhovered"),S(t.data),b()}function T(e){e.firmId&&(K.markers.hover(e.firmId),e.areaId&&K.rooms.hover(e.areaId))}function S(e){e.firmId&&(K.markers.unhover(e.firmId),e.areaId&&K.rooms.unhover(e.areaId))}function E(){j()}function P(){_()}function j(){e.notify("mapInteractionHappened")}function M(e){switch(e.originalEvent.keyCode){case 38:H();break;case 40:G()}}function A(){Z.on({movestart:E,move:b,mousemove:C,zoomend:m,rotate:g,moveend:P,markermouseover:L,markermouseout:I,markerclick:y,roommouseover:k,roommouseout:w,roomclick:v,zoom:D,keydown:M}),Z.once("zoomexit",R)}function D(e){e.inExitZone&&(V.style.opacity=1-e.exitFactor)}function R(){e.notify("zoomExit",Q)}function N(){return new a(function(t){e.setTimeout(t,400)})}function B(e,t){var n=Y.getFloorIndices(e);return n.length?r.min(n,function(e){return Math.abs(e-t)}):null}function F(e){K.showFloor(e),f()}function O(e){$(z(le,e)),F(e)}function z(e,t){return e.map(function(e){return Y.getEntity(e)}).filter(function(e){return e&&e.floorIndex==t}).map(function(e){return e.coordinates})}function q(){return l.getPixelBoundMargins().left}function $(e,t){e.length&&(t=Object.assign({left:q(),zoomOffset:-.2,maxZoom:Z.getMaxZoom()-1.75,animate:!0},t),Z.fitPoints(e,t))}function U(){e.notify("closeStarted"),Z.off(),e.mod({hidden:!0}),e.setTimeout(function(){e.notify("closeAnimationFinished")},400),X=!1}function H(){O(K.getCurrentFloor()+1)}function G(){O(K.getCurrentFloor()-1)}function W(t){K.floorUpAvailable()&&e.element("floorUp").mod({enabled:t}),K.floorDownAvailable()&&e.element("floorDown").mod({enabled:t})}var V,Z,Y,K,X,J,Q,ee,te,ne,ae,ie,oe=!1,re=null,se=25,le=[],ce=!1,ue=s(),de=r.debounce(function(t){ne&&(e.broadcast("floorsTooltip:move",t),e.broadcast("floorsTooltip:show",ne),e.notify("tooltipShown",ne),oe=!0,re=t)},100),he=r.once(function(){d.trackEvent("googleFloors",["Control","Floors_Switch","Elevator"])}),pe=r.once(function(){d.trackEvent("googleFloors",["Control","Floors_Switch","Up_Down"])}),fe=r.once(function(){d.trackEvent("googleFloors",["Control","Rotate_Map"])});return{init:function(n,o){if(!h.get("floors"))return void o();if(te=n.complexId,e.mod({hidden:!0}),Q=t.getByComplexId(te),e.isServer)return e.init("zoom",{context:"floors"}),e.init("rotate"),e.init("floorSelect"),void o();ae=e.setTimeout(function(){ce=!0,e.notify("loadingIsLong")},1e3);var r=c.floors(te);a.all([r.loadComplex(),t.loadLib(),N()]).then(function(){return clearTimeout(ae),ce?(e.notify("longLoadingEnded"),new a(function(e){return setTimeout(e,100)})):null}).then(function(){Y=r.getLibModel(),n.initialBranchId&&(ee=Y.getEntity(n.initialBranchId)),K=new floors.Controller(Y,{baseUrl:i.getLibPath()}),e.init("zoom",{context:"floors"}),e.init("rotate"),e.init("floorSelect",Y.getFloorNames()),o()},function(t){e.sendError("Floors client init error",t),ie=!0,e.notify("initFailed"),e.notify("showNoResults"),o()})},clientInit:function(){if(ie)return n.floors.exit(),void n.push();if(h.get("floors")){V=e.element("canvasWrapper")[0],Z=K.initView(e.element("canvas")[0]),n.floors.setIsLoaded(!0);var t=e.init("floorsTooltip",{showHidden:!0});e.block().append(t.render()),A(),e.broadcast("floorSelect:rerender");var a=n.floors.getCenter();a&&(a={xPos:r.round(a.xPos,3),yPos:r.round(a.yPos,3)},Z.setCenter([a.xPos,a.yPos],{animate:!1}));var i=n.floors.getRotation();i&&(i=r.round(i,3),Z.setRotation(i,{animate:!1}));var o=n.floors.getZoom();o&&(o=r.round(o,3),o=Math.max(o,Z.getZoom()),Z.setZoom(o,{animate:!1}));var s=n.floors.getFloorNum();s?(s=+s,K.showFloor(s)):ee?K.showFloor(ee.floorIndex):K.showFloor(Y.getDefaultFloor()),ee&&$([ee.coordinates],{animate:!1}),_(),m(),g(),f(),W(!1),ue.resolve(),e.mod({hidden:!1}),d.trackEvent("googleFloors",["Floors_Show",Q.name+", "+u.getRegion().name]),X=!0,"undefined"!=typeof window&&(window.TestHandles=window.TestHandles||{},window.TestHandles.floors=n.floors)}},viewContext:function(){},elements:{close:{click:function(){n.floors.exit(),n.push(),e.notify("closeClicked"),d.trackEvent("googleFloors",["Control","Exit","Control"])}},floorUp:{click:function(){H(),pe()}},floorDown:{click:function(){G(),pe()}}},changeState:function(e){if(e.flCenter){var t=n.floors.getCenter();Z.setCenter([t.xPos,t.yPos],{animate:!1})}if(e.flRotation){var a=n.floors.getRotation();Z.setRotation(a,{animate:!1})}if(e.flZoom){var i=n.floors.getZoom();Z.setZoom(i,{animate:!1})}if(e.flNum){var o=n.floors.getFloorNum();r.isUndefined(o)?K.showFloor(Y.getDefaultFloor()):K.showFloor(o),f()}if(e.floors){var s=r.get(e.floors,"complexId");s!=te&&U()}"floorsDashboard/minimized"in e&&W(!!e["floorsDashboard/minimized"])},dispose:function(){K&&K.remove()},"interface":{close:U,setSeoParams:function me(){var me=!1;return h.get("floors")&&(e.notifySeoParams({floors:!0,type:"floors",complexId:Q.id,mallName:Q.name,address:Q.address,ogImage:p._config("floors.ogImage"),twitterImage:p._config("floors.ogImage")}),me=!0),me},focusOnFirms:function(e){ue.done(function(){J=!0;var t=K.getCurrentFloor(),n=B(e,t);null!==n&&n!=t&&F(n),$(z(e,n))})},highlight:function(t){ue.done(function(){var n=t.map(function(e){return e.id});le=n,K.markers.highlight(t),e.broadcast("floorSelect:indicateResults",Y.getFloorIndices(n))})},unhighlight:function(){ue.done(function(){le=[],K.markers.unhighlight(),e.broadcast("floorSelect:clearResults")})},hoverRoom:function(e){ue.done(function(){var t=Y.getEntity(e);t&&T(t)})},unhoverRoom:function(e){ue.done(function(){var t=Y.getEntity(e);t&&S(t)})},highlightFirm:function(e){ue.done(function(){var t=o.getStaticId(e.id),n=r.get(Y.getEntity(t),"areaId");n&&(K.rooms.highlight(n),K.markers.select({id:t,hasAds:!!e.ads}))})},unhighlightFirm:function(e){ue.done(function(){var t=r.get(Y.getEntity(e),"areaId");t&&(K.rooms.unhighlight(),K.markers.unselect(e))})},focus:function(t){ue.done(function(){var n=Y.getEntity(t);if(n){var a=e.ua().isMobile?Z.getMaxZoom()-2:Z.getMaxZoom()-.8;$([n.coordinates],{maxZoom:a}),F(n.floorIndex)}})},floorDown:G,floorUp:H},dispatcher:{"zoom:in":function(){this.stop();var e=l.getPixelCenter();Z.zoomIn(.75,{centerPoint:[e.x,e.y],duration:500})},"zoom:out":function(){this.stop();var e=l.getPixelCenter(),t=-.75,n=Z.getZoom()+t;if(n<Z.getZoomExitThreshold()){var a=Math.min(0,Z.getZoomExitThreshold()-Z.getZoom()),i=n-Math.min(Z.getZoomExitThreshold(),Z.getZoom());t=a+.4*i,n=Z.getZoom()+t}Z.setZoom(n,{centerPoint:[e.x,e.y],duration:500})},"rotate:rotate":function(e){this.stop();var t=l.getPixelCenter();e["default"]?Z.setRotation(Y.getViewAngle(),{centerPoint:[t.x,t.y],duration:500}):e.cw?Z.rotateRight(Math.PI/4,{centerPoint:[t.x,t.y],duration:500}):Z.rotateLeft(Math.PI/4,{centerPoint:[t.x,t.y],duration:500}),fe()},"floorSelect:floorSelected":function(e){O(e),he()}}}},t.exports._args=["slot","$floorsManager","$appState","$defer","$viewport","$models","$regionManager","$analytics","$featureSwitcher","$i18n"]},{bluebird:384,lodash:"lodash"}],"/modules/floorsDashboard/floorsDashboard.js":[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(t,n,i,o,r,s,l,c,u,d,h,p,f){function m(e,t){v(e,function(e,n){return e?t(e):(z=n,g(function(){return _(t)}),null)})}function g(e){var t=!!a.find(a.get(z,"reviews.items"),"is_reviewable",!0),i=a.get(z,"reviews.general_review_count");
if(z.canShowReviews=t,!t||!i)return e();var o=n.reviews(z.id);return o.loadData({omitFirmData:!0}).then(function(t){var n=a.get(t,"reviews");return a.isEmpty(n)?e():(z.reviewsItems=n,e())},function(){return e()}),null}function _(e){var t="firm",i={id:z.staticId||z.id};a.extend(i,{firmData:z,albumName:"common"});var o=n.photos({dataProvider:t});o.request(i).done(function(){z.photoModel=o,z.photos=o.photos.items,z.photosBcUrl=o.photos.reg_bc_url,e()}).fail(function(){e()})}function v(e,t){var n,a=l.get("floors").bssHash;n=a?U+"_"+a:U;var o={},r=l.get("floors").isOpenedFromPoi;r&&(o.is_poi="true"),e.name?t(null,e):i.firms.profile(n,o,t)}function y(){O&&O.update()}function b(e){t.element("navigationItemName").mod({active:!1}),(a.find(z.menuItems,{active:!0})||{}).active=!1,t.element("navigation").find('[data-tab="'+e+'"]').mod({active:!0}),(a.find(z.menuItems,{id:e})||{}).active=!0}function k(e){var n=t.element("block").filter('[data-type="'+e+'"]'),a=t.element("content").offset().top,i=t.element("navigationWrapper").height(),o=t.element("scroller");o.scrollTop(n.offset().top-a-i)}function w(e){q.hideAllVisibleBlocks(),t.element("photosUploaderControl").mod({active:!1}),q.initTab(e,ie,function(n){n&&t.sendError("floorsDashboard tab init failed",n),t.setTimeout(function(){var i,o;if(!n){i=t.element("tabs").find('[data-id="'+e+'"]'),o=q.getActiveTab();var r=a.has(o,"columnsLength")&&o.columnsLength!==ie;i.length&&!r||q.renderTab(e,ie),o.columnsLength=ie}i=t.element("tabs").find('[data-id="'+e+'"]');var s=a.has(o,"needToLoadMore")&&o.needToLoadMore();if(s||J.changeHeight(i,H),t.element("photosUploader").mod({hidden:!ee}),ee=!1,q.showTab(e),"photos"!==e&&!a.get(z,"photos.length")){(a.find(z.menuItems,{id:"photos"})||{}).disabled=!0;var l=t.renderPartial("navigation",z);t.element("navWrapper").html(l)}J.doCalcForCutting(),ae.scrolled&&ae.moduleId&&(k(ae.moduleId),ae={scrolled:!1,moduleId:""}),y()},200)})}function x(){t.init("mediaCardHeader",{model:z,columns:ie})}function C(){t.notify("clickAddress"),t.setTimeout(function(){t.notify("pathFinderEntranceClicked",z)},400)}function L(e,n,i){a.isFunction(e.onScroll)&&e.onScroll(n,i),a.result(e,"needToLoadMore")&&!t.mod().preloader&&n.scrollTop+n.clientHeight>n.scrollHeight-500&&(t.mod({preloader:!0}),e.loadMore(function(){q.renderNewBlocks(e.id),t.mod({preloader:!1})}))}function I(){q.switchTab("discount"),z.reg_bc_url&&t.notify("mediaDiscountsClicked",{reg_bc_url:z.reg_bc_url}),p.trackEvent("googleFloors",["Indoor_Card","Discounts_Preview_Click"])}function T(e){switch(q.getActiveTab().columnsLength=ie,q.switchTab(e),e){case"reviews":t.notify("firmReviewClicked",{reg_bc_url:z.reg_bc_url});break;case"discount":t.notify("mediaDiscountsClicked",{reg_bc_url:z.reg_bc_url});break;case"photos":t.notify("switchToPhotosTab",{reg_bc_url:z.reg_bc_url});break;case"advantages":t.notify("ownerInfoClick",{reg_bc_url:z.reg_bc_url})}a.contains(["reviews","discount"],e)&&t.notify("trackedAnalyticsTabClicked",e)}function S(e){var t={about:["Indoor_Card","About_Click"],photos:["Indoor_Card","Photo_Click"],reviews:["Indoor_Card","Reviews_Click"],discount:["Indoor_Card","Discounts_Click"],advantages:["Indoor_Card","Additional_Info","Click"]},n=t[e];n&&p.trackEvent("googleFloors",n)}function E(e){if(e.floorsDashboard){var n="visible"==e.floorsDashboard;t.mod({display:n}),n?t.notify("shown"):t.notify("hidden")}if(e.flTab){var a=e.flTab.floorsDashboardTab||"about";b(a),q.changeActiveTab(a),w(a)}"floorsDashboard/minimized"in e&&t.mod("minimized",!!e["floorsDashboard/minimized"])}function P(){var e=!!Q.getReviewsNumber(z),t=!!a.find(z.external_content,{type:"discount"});t=!0,z.menuItems=[{id:"about",title:r._t("Информация")},{id:"photos",title:r._t("Фото"),disabled:!a.has(z,"photos.length"),amount:a.get(z,"photos.length")},{id:"reviews",title:r._t("Отзывы"),disabled:!e,amount:Q.getReviewsNumber(z)},{id:"discount",title:r._t("Скидки"),disabled:!t}],a.has(z,"ads.article")&&z.menuItems.push({id:"advantages",title:r._t("Преимущества")})}function j(e){return a.find(z.menuItems,{id:e,disabled:!1})}function M(e){var n=t.renderPartial("navigation",z);t.element("navWrapper").html(n),D(!0),e&&(t.element("photosUploaderControl").mod({active:!1}),k("photosUploader"))}function A(e){f.isAuthorized()?M(e):(te=!0,ne=e,t.notify("showPhotosAuthPopup"))}function D(e){return e?void("photos"==q.getActiveTab().id?t.element("photosUploader").mod({hidden:!1}):(ee=!0,t.ua().isMobile&&(ae={scrolled:!0,moduleId:"photosUploader"}),q.switchTab("photos"))):(ee=!1,void t.element("photosUploader").mod({hidden:!0}))}function R(){te&&(te=!1,M(ne),p.trackEvent("google",["Photos","Auth","Success"]))}function N(){te=!1}function B(){D(!1)}var F,O,z,q,U,H,G,W,V,Z,Y,K=e("./viewModel.js"),X=e("./tabsManager"),J=e("./tabHeightHelper.js")(t),Q=req("helpers/firm"),ee=!1,te=!1,ne=!1,ae={scrolled:!1,moduleId:""},ie=2,oe=a.once(function(){z&&z.reg_bc_url&&(t.notify("firmDisplayed",[{id:U,url:z.reg_bc_url}]),t.notify("firmClicked",{reg_bc_url:z.reg_bc_url}))}),re=a.throttle(function(e){t.broadcast("mediaActions:checkDiscountsSeeability"),e.scrollTop>0?t.notify("addTopBarFixedMode"):t.notify("removeTopBarFixedMode");var n=q.getActiveTab();J.cut(n),y(),L(n,e,{contentTopHeight:Y,trackOffset:V,contentTopOffset:Z})},50),se={init:function(e,i){W=e.complexId||l.get("floors").complexId,U=h.getByComplexId(W).branchId,t.mod({display:"hidden"!=l.get("floorsDashboard")}),F=n.floors(W);var o=F.loadComplex();t.registry.get("isInit")?t.bssContext.startNewChain({pr:"link"}):a.get(l,"state.isFromHistory")?t.bssContext.startNewChain({pr:"back_in_browser",updateContext:!0}):l.get("floors").initialBranchId&&t.bssContext.startNewChain({pr:"dashboard_floors"}),m(e,function(e){if(e)return i(e);z.floors=!0,z.complexId=W,P();var n=l.floors.getDashboardTab();return n&&!j(n)&&(n=void 0),s.get("photosUploader")&&(z.photosUploaderAvailable=!0),o.then(function(){z.metaRubrics=F.getMetaRubrics(),t.mod({columns:ie}),q=t.invoke(X,[t,z]),q.initTab(n,ie,function(e){e&&t.sendError("floorsDashboard tab init failed",e),z.activeTab=q.getActiveTab();var n=l.floors.getDashboardTab();n&&n!=z.activeTab&&(l.floors.changeDashboardTab(z.activeTab.id),l.push()),t.notify("inited"),x(),i()});var e=a.get(z,"rubrics[0].name");return d.set(e,"panels"),null})["catch"](function(e){return G=!0,t.sendError("Error during floorsDashboard init",e),i(e)}),null})},viewContext:function(){return G?null:t.invoke(K,[z,t])},bind:function(){O=t.element("scroller").baron({bar:".floorsDashboard__track .track__bar"}),V=t.element("track").offset().top,Z=t.element("contentTop").offset().top,Y=t.element("contentTop").outerHeight();var e=q.getActiveTab();a.isFunction(e.onRender)&&e.onRender()},clientInit:function(){if(G)return null;var e=q.getActiveTab();return a.includes(["rooms","discount"],e.id)||e.doMasonry(ie),e.clientInit&&e.clientInit(),t.mod({visible:!0}),t.setTimeout(oe,0),z.ads&&z.ads.article&&p.trackEvent("googleFloors",["Indoor_Card","Additional_Info","Show"]),f.on("loginComplete",R),f.on("logoutComplete",B),null},dispose:function(){d.deleteLastByType("panels"),f.off("loginComplete",R),f.off("logoutComplete",B)},"interface":{tabType:"firms",activateContent:function(){t.mod({hidden:!1}),t.notify("activated"),t.notify("updateTabsData"),t.isClient&&oe()},setSeoParams:function(){var e=Q.prepareForSeo(z,o),n=q.getActiveTab();return n.id!=q.getDefaultTab()&&(e.tab=n.id),t.notifySeoParams(e),t.notify("updateSeo"),!0},dissolve:function(){t.mod({visible:!1})},appear:function(){t.mod({visible:!0})},authCancel:N},elements:{block:{click:function(){t.mod().minimized&&t.notify("minimized",!1)}},filtersItem:{click:function(e){var n=$(this).data("rubric-title");n?(t.bssContext.startNewChain({pr:"dashboard_metarubric",tx:n}),t.notify("rubricClicked",{name:n}),p.trackEvent("googleFloors",["Indoor_Card","Metarubrics",n])):(t.bssContext.startNewChain({pr:"allorganisation",gs:{building:{id:W}}}),t.notify("firmListClicked"),p.trackEvent("googleFloors",["Indoor_Card","Metarubrics","Firm_List"])),e.preventDefault()}},scroller:{scroll:function(){re(this)}},workingPeriod:{click:function(){var e=q.getActiveTab();"about"!==e.id?q.switchTab("about",function(){ae={scrolled:!0,moduleId:"mediaSchedule"}}):k("mediaSchedule")}},photosArrayItem:{click:function(){T("photos",!0),p.trackEvent("googleFloors",["Indoor_Card","Photo_Preview_Click"])}},photosUploaderControl:{click:function(){$(this).mod().active&&(p.trackEvent("google",["Photos","Controls","Add"]),A(!0))}},photosUploader:{selector:".floorsDashboard__tab [data-type='photosUploader']"},photosCount:{click:function(){T("photos",!0),p.trackEvent("googleFloors",["Indoor_Card","Photo_Preview_Click"])}},navigationItemName:{click:function(e){e.preventDefault();var n=$(this).data("tab");$(this).mod().disabled||(H=t.element("wrapper").offset().top,T(n),S(n))}},activeTab:{selector:".floorsDashboard__tab._active"},footerOwnerLink:{click:function(){p.trackEvent("googleFloors",["Indoor_Card","Owner_Click"])}},footerAdvLink:{click:function(){p.trackEvent("googleFloors",["Indoor_Card","Adv_Click"])}},footerBugReportLink:{click:function(){t.notify("bugReportLinkClicked",z),p.trackEvent("googleFloors",["Indoor_Card","Error_Click"])}},closeButton:{selector:".floorsDashboard__controlsButton._close",click:function(e){var n=l.get("floorsDashboard/minimized");t.notify("minimized",!n),e.stopPropagation()}}},dispatcher:{"mediaAddress:clickAddress":function(){C(!0,{mute:!0}),p.trackEvent("googleFloors",["Indoor_Card","Address_Click"])},"mediaAddress:parkingsClicked":function(){var e=a.merge({},z.bss);e.bssContext=t.bssContext,e.isPoi=l.get("floors").isOpenedFromPoi,t.notify("parkingsShown",z,e),this.stop()},"mediaActions:gotDiscounts":function(e){z.actionsAmount=e.length},"mediaCardHeader:navigateToPhotos":A,"mediaReview:clickReviewsTotal":function(){q.switchTab("reviews"),z.reviews&&z.reviews.reg_bc_url&&t.notify("firmReviewClicked",{reg_bc_url:z.reg_bc_url}),p.trackEvent("googleFloors",["Indoor_Card","Reviews_Preview_Click","All"])},"mediaReview:lastTextMoreClicked":function(){z.reviews&&z.reviews.reg_bc_url&&t.notify("firmReviewClicked",{reg_bc_url:z.reg_bc_url})},"mediaReview:reviewTextMoreClicked":function(){p.trackEvent("googleFloors",["Indoor_Card","Reviews_Preview_Click","More"])},"mediaReview:leaveReviewClicked":function(){p.trackEvent("googleFloors",["Indoor_Card","Reviews_Preview_Click","Flamp"])},"mediaActions:clickShowAll":I,"mediaActions:actionsItemClick":I,"mediaDiscount:sendSmsClicked":function(){t.notify("sendBySmsClicked",{reg_bc_url:z.reg_bc_url})},"patchwork:itemClicked":function(e){t.notify("photoClicked",{id:z.id,photoId:e})},"mediaContacts:phoneShown":function(){p.trackEvent("googleFloors",["Indoor_Card","Phone","View"])},"mediaContacts:phoneClicked":function(){p.trackEvent("googleFloors",["Indoor_Card","Phone","Click"])},"mediaContacts:socialClicked":function(){p.trackEvent("googleFloors",["Indoor_Card","Social_Click"])},"mediaContacts:websiteClicked":function(){p.trackEvent("googleFloors",["Indoor_Card","Site_Click"])},"mediaContacts:emailClicked":function(){p.trackEvent("googleFloors",["Indoor_Card","Email_Click"])},"mediaAddress:nearStationClicked":function(){p.trackEvent("googleFloors",["Indoor_Card","Stop_Click"])},"mediaCardHeader:adsLinkClicked":function(){p.trackEvent("googleFloors",["Indoor_Card","Adv_Link_Click"])},"mediaCardHeader:routeSearchClicked":function(e){var t="to"==e.direction?"To":"From";p.trackEvent("googleFloors",["Indoor_Card","Route",t])},"photosUploader:previewsLoaded":function(e){t.broadcast("patchwork:previewsLoaded",e)},"photosUploader:photoUploadFinished":function(e){e.isUploadedFailed||z.photos.push(e),t.broadcast("patchwork:photoUploadFinished",e)},"patchwork:updateDimensions":function(e){var t=q.getActiveTab();"photos"==t.id&&t.updateDimensions(e)}},changeState:t.ifAlive(E)};return se},t.exports._args=["slot","$models","$dgApi","$regionManager","$i18n","$featureSwitcher","$appState","$localStorage","$bookletApi","$contextStorage","$floorsManager","$analytics","$authorization"]},{"./tabHeightHelper.js":211,"./tabsManager":217,"./viewModel.js":218,lodash:"lodash"}],"/modules/floorsResults/floorsResults.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/firm"),o=e("bluebird"),r=req("helpers/request");t.exports=function(e,t,n,s,l,c,u){function d(e){return a.filter(e.getItems(),function(e){return"contextPromo"!=e.type})}function h(){S=[],a(T).forEach(function(t){t.org=null,t.recoveryAd||(t.floors={floorName:x.getFloorName(i.getStaticId(t.id))}),S.push(e.init("miniCard",{model:t,analyticsPlace:L,searchType:w.get("type")}))}).value()}function p(){a.invoke(S,"dispose")}function f(t){e.broadcast("pagination:setHidden",t.count<=1)}function m(t){e.mod({preloader:t})}function g(t){t=t||1,e.element("scroller").scrollTop(0),e.bssContext.continueChain(),E.current=t,e.broadcast("pagination:invalidate",E),m(!0),p(),w.reset().loadPage(E.current).then(function(){T=d(w),m(!1),h(),e.rerender(),v()})}function _(){return a(w.get("mapData").markers).map(function(e){return{id:i.getStaticId(e.id),hasAds:e.is_advertising}}).value()}function v(){if(e.isClient){var t=a.filter(S,function(e){return"miniCard"==e.type&&e.block().seeable(.5)});a.each(t,function(e){e["interface"].trackBssImpression(),e["interface"].trackShowEvent()})}}function y(e,t,n){switch(e){case"find":return{query:t.query,building_id:n.buildings.join(","),region_id:c.getRegion().id};case"profiles":return{profiles:t.profiles,region_id:c.getRegion().id,includeDeleted:!0};case"flFirmList":return{house:n.buildings.join(",")};default:return null}}var b,k,w,x,C,L,I=!1,T=[],S=[],E={current:1},P={find:"search",profiles:"profiles",flFirmList:"firmList"},j=a.once(function(){e.setTimeout(function(){v()})});return{inheritBssHash:!0,init:function(n,a){if(!t.floors.isActive())return e.notify("close"),void a();b=t.get("floors").complexId,k=l.getByComplexId(b),C=n.type;var i=y(C,n,k);n.bss&&(i.bss=n.bss);var c={find:"query/firms",profiles:"profiles",flFirmList:"inbuild"};w=s.results({type:c[C],params:i}),x=s.floors(b),E.current=n.page||1;var p=[w.loadPage(E.current),x.loadComplex()];"find"===C&&e.isClient&&p.push(w.loadMarkers()),L=e.isClient&&w.get("rubricId")?u.PLACE_CATALOG:u.getPlace(),o.all(p).then(function(){T=d(w);var n=T.filter(function(e){return!e.recoveryAd});return h(),1==n.length&&e.isClient?(I=!0,t.panels.remove("find"),e.notify("floorsResultsReplaced",n[0]),u.trackEvent("googleFloors",["Firm_Card_Open","Search"]),void a()):(E.count=w.get("pagesCount"),e.init("pagination",{page:E,seoParams:{floors:!0,type:P[C],query:t.getQuery(),complexId:b}}),f(E),e.notify("searchResultsReady"),void(0==T.length?r.emitError(404,"catalog floors not found",{msgType:"catalogFloorsNotFound",params:{metarubrics:x.getMetaRubrics()}},a):a()))})},bind:function(){e.element("scroller").baron()},viewContext:function(){return{miniCards:S,title:w.get("title"),total:w.get("total")}},elements:{scroller:{scroll:function(){v(),e.broadcast("pagination:checkSeeability")}}},"interface":{tabType:"firms",tabCount:function(){return w.get("total")},setSeoParams:function(){return e.notifySeoParams({floors:!0,type:P[C],query:t.getQuery(),page:E,complexId:b,mallName:k.name,address:k.address}),!0},drawOnMap:function(){"find"!=C||I||e.notify("highlight",_())},clearMap:function(){"find"!=C||I||e.notify("clearMap")},activateContent:function(){j()}},dispatcher:{"miniCard:clicked":function(){"find"==C||"flFirmList"==C?u.trackEvent("googleFloors",["Firm_Card_Open","Search"]):"profiles"==C&&u.trackEvent("googleFloors",["Firm_Card_Open","Room_List"])},"miniCard:miniCardBookletButtonClicked":function(t,n){w.get("buildingId")&&(n.geoid=w.get("buildingId")),e.notify("bookletButtonClicked",t,n)}},changeState:function(e){if(e.panels&&e.panels.changed){var t=a.find(e.panels.changed,function(e){return"find"==e.diff.type||"flFirmList"==e.diff.type});t&&void 0!==t.diff.page&&g(t.diff.page)}}}},t.exports._args=["slot","$appState","$i18n","$models","$floorsManager","$regionManager","$analytics"]},{bluebird:384,lodash:"lodash"}],"/modules/floorsTooltip/floorsTooltip.js":[function(e,t,n){"use strict";var a=req("helpers/floors");t.exports=function(t,n,i){function o(e){var n=t.invoke(p,[e]);return w=n&&!!n.title&&e.data,n}function r(e){return w?(t.mod({hidden:!e}),_=!!e,void(_||m.stop())):(t.mod({hidden:!0}),_=!1,void m.stop())}function s(){var e=l(v);t.block().css({left:v.x+e+h.x+"px",top:v.y+h.y+"px"})}function l(e){var t=0;return e.x+b+g>k&&(t=k-e.x-b-g),t}function c(){t.rerender(),s(),r(!0)}function u(){var e=document.documentElement,n=document.body;k=window.innerWidth||e.clientWidth||n.clientWidth,b=parseInt(t.block().outerWidth(),10)}function d(e){var t=o(e);t&&(y=t,u(),c())}var h={x:12,y:15},p=e("./viewModel"),f=a.getEntityLabels(i),m=n.tooltips(),g=40,_=!1,v={x:0,y:0},y=void 0,b=void 0,k=void 0,w=void 0;return{init:function(e){e.vc&&(y=e.vc),e.showHidden&&r(!1)},viewContext:function(){return y},"interface":{show:function(e){var n;n="entity"==e.type?Promise.resolve({data:{name_ex:{primary:e.label||f[e.ids[0]]}}}):m.get(e,!1),n.then(function(n){return t.mod("double",e.ids.length>1),n}).then(d)["catch"](function(e){})},isVisible:function(){return _},move:function(e){v=e||{x:0,y:0}},hide:function(){r(!1)}}}},t.exports._args=["slot","$models","$i18n"]},{"./viewModel":219}],"/modules/forecast/forecast.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/time");t.exports=function(t,n,o,r,s){function l(e,a){function i(){a&&t.rerender(),e()}function r(n){t.sendError("Forecast component error",n),e(n)}h=n.getRegion();var s=h&&h.id;p=o.weather({regionId:s}),p.getForecast().then(i,r)}function c(){return i.getFormattedTime(h,s.getFormats().time.dashboard)}function u(){var e=c(),n=t.element("today");n&&n.text(s._t("Сейчас %1",e))}var d,h,p,f,m,g={},_={},v=300,y={};return g={inheritBssHash:!0,init:function(e,n){var a=t.ua(),i="Mac OS X"==a.os.name&&"Firefox"==a.browser.name;i&&t.mod("macff",!0),l(n),t.registry("isInit")&&r.trackEvent("google",["Weather","Open","Direct"])},bind:function(){d=t.element("scroller").baron()},clientInit:function(){t.setTimeout(function(){r.trackEvent("google",["Weather","View","Long"])},15e3),t.setInterval(function(){l(a.noop,!0)},t.config["weather.timeUpdate"]),f=+new Date,m&&r.trackEvent("google",["Weather","Promo_Show",m])},viewContext:function(){var n,i=e("./forecastVm");return _=i(p.getData(),h,y,s),n=a.get(_,"promo.meta.type"),t.mod({promoType:n}),m=a.get(_,"promo.meta.linkText"),_},dispose:function(){p.dispose()},elements:{weekDay:{click:function(){var e=$(this),n=e.mod().show?null:"details",a=e.mod().dayNum;e.mod({show:n}),y[a]="details"==n,t.setTimeout(function(){d.update()},v),"details"==n?r.trackEvent("google",["Weather","Forecast","Open"]):r.trackEvent("google",["Weather","Forecast","Close"])}},promoLink:{click:function(e){var n=t.mod().promoType,i=s.getSettings().weather,o=a.find(i.promoLinks,{type:n});o&&(t.bssContext.startNewChain({pr:"weather",tx:o.searchText}),t.notify("search",{query:o.searchText,filters:o.filters}),r.trackEvent("google",["Weather","Promo_Click",o.linkText]),e.preventDefault())}},copyrightLink:{click:function(){r.trackEvent("google",["Weather","Copyright",t.config["online.weatherProvider"]])}}},"interface":{tabType:"forecast",updateTime:u,setSeoParams:function(){return t.notifySeoParams({type:"forecast"}),!0},getModuleBirthTime:function(){return f}}}},t.exports._args=["slot","$regionManager","$models","$analytics","$i18n"]},{"./forecastVm":220,lodash:"lodash"}],"/modules/frame/frame.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t,n,i,o,r){function s(e){var t=e.response||e.meta;return{reason:e.reason||"noResults",type:e.type||a.get(t,"error.type"),msgType:e.msgType,code:e.code||a.get(t,"code"),message:e.message||a.get(t,"error.message"),model:e.model,query:e.query,errorModuleData:a.extend(e.params||{},{name:v})}}function l(n,i){clearTimeout(b),e.mod({busy:!0,ready:null}),x.reject(),C.reject(),x=t(),C=t(),v=n.moduleName,y=n.moduleData||{},k||(k=n.specialMode),e.mod({cont:v}),a.includes(I,v)&&e.mod({columns:y.columns||2}),e.notify("replaceContent",n),m&&(m.dispose(),m=null),_["interface"].initContentModule(function(t){e.notify("appearingEnded"),e.mod({busy:null,ready:!0}),e.broadcast("*:getMapOptions"),e.isClient&&m&&e.broadcast("*:activateContent"),"mediaCard"!=v||"book"!=k&&"last"!=e.registry.get("framePosition")||e.notify("shiftTo","center"),i&&i(t,m)})}function c(){return e.block().width()}function u(t,n){m&&e.domBound()&&(t?!e.mod().right&&e.mod().ready&&e.broadcast("*:activateContent"):(e.broadcast("*:deactivateContent"),!n&&m["interface"]&&(m["interface"].deactivatedOnce=!0)),e.broadcast("*:changeVisibility",d()))}function d(){return!e.mod().right&&e.mod().active}function h(t){e.notify("mediaResizeStart",t)}function p(){e.notify("close",m)}function f(){i.search({query:"Ginza Project"}),i.del("clickedGinzaMarker"),i.push()}var m,g,_,v,y,b,k,w,x=t(),C=t(),L="landingPage"==e.registry.get("appMode"),I=["mediaResults","mediaCard","gallery","products","productCard"];return _={init:function(t){g=t.index,v=t.moduleName,y=t.moduleData||{},w=t.isNoindexFrame,e.mod({num:g+1,isLandingPage:L}),a.includes(I,v)&&e.mod({cont:v,columns:y.columns}),C.then(function(){e.setTimeout(function(){e.notify("appearingEnded")},e.config["animations.frameShow"]+30),e.broadcast("*:getMapOptions"),e.mod({cont:v,columns:y.columns})})},viewContext:function(){var t=e.ua().isPhone;return{activeModule:m,isNoindexFrame:w,isPhone:t,isMinimizableOnPhone:t&&a.includes(["firmCard","geoCard2","metroCard","routeCard","mediaCard","stopCard","card","mixedResults","routeResults","autoResults","noResults","booklet"],v)}},dispose:function(){if(m){if("booklet"==m.type){var t=m.viewContext().activeBooklet.type,a={bookletBuildings:"Booklet_Buildings",bookletSaunas:"Booklet_Sauna"};a[t]&&n.trackEvent("googleBooklets",[a[t],"Close"])}if("photos"==m.type&&n.trackEvent("google",["Photos","Close_Photo"]),"routeResults"==m.type||"autoResults"==m.type){e.broadcast("searchBar:checkState");var r=i.getRouteSearchType(),s="car"==r?"Card_auto":"Card_"+r;n.trackEvent("google",["RouteSearch",s,"Close"])}if("extraLayersCard"==m.type&&(i.set("extraLayersCard",{}),i.push()),"award"==m.type){var l=o.getRegion();n.trackEvent("google",["Awards_2014","Close_Award",l.code])}}x.reject("dispose"),C.reject("dispose"),e.notify("framesSizeChanged")},elements:{block:{click:function(){e.notify("isMinimized")&&e.mod().media&&(e.notify("maximizeViewer"),e.mod({shifted:!1}))}},clipper:{},content:{},glass:{click:function(t){if("closed"!=e.mod().state){var n=t.pageX-$(this).offset().left;e.notify("glassClicked",{id:g,x:n,y:t.pageY})}}},backBtn:{selector:".frame__controlsButton._back",click:function(e){e.stopPropagation(),r.get("ginzaProject")&&i.get("clickedGinzaMarker")?f():p()}},closeButton:{selector:".frame__controlsButton._close",click:function(e){e.stopPropagation(),r.get("ginzaProject")&&i.get("clickedGinzaMarker")?f():p()}},minimizeButton:{selector:".frame__controlsButton._minimize",click:function(t){"mediaCard"===e.mod().cont&&(t.stopPropagation(),e.mod({shifted:!0})),e.notify("minimizeViewer")}},mobileMinimize:{click:function(t){t.stopPropagation(),e.notify("minimizeViewer")}},mobileClose:{click:function(e){e.stopPropagation(),p()}},mover:{click:function(){var t=e.mod().pos;"last"==t?(t="center",e.registry.set("framePosition",t)):(t="last",e.registry.set("framePosition",t)),e.mod({pos:t,pa:t+"1",blink:!1}),e.notify("moverClick",{index:g,pos:t});var a=e.searchContext.read("requestType")||"";"last"==t?n.trackEvent("google",["Interface","Clip","Clip_"+a]):n.trackEvent("google",["Interface","Unclip","Unlcip_"+a])}},resize:{mousedown:h}},bind:function(){C.then(e.ifAlive(function(){u(e.mod().active,!0)}))},"interface":{whenContentInited:function(){return x},whenContentRendered:function(){return C},initContentModule:function(n){var a=(new Date).getTime(),i=e.shouldRender();e.notify("initContent",v),t.when(y).then(e.ifAlive(function(t){return e.init(v,t,e.ifAlive(function(t,o){if(o.type!=v)return void n();if(t){var r=s(t);if(e.notify("error",!0),e.notify("frameFailed",v,r),"noResults"==r.reason){var c={moduleName:"noResults",moduleData:r};l(c,function(t,a){e.notify("noResults"),n(t,a)})}else e.dispose(),n(r)}else{e.notify("frameSuccess",v,t),m=o;var u=(new Date).getTime()-a;b=e.setTimeout(function(){if(i){var t=m.render();e.element("content").append(t),e.domBound()&&m.bindEvents()}e.mod({busy:null,ready:!0}),e.notify("contentRendered",v),C.resolve(m)},Math.max(e.config["animations.frameShow"]+30-u,0)),x.resolve(m),n&&n()}}))})).fail(function(){n({error:"noData"})})},replaceContent:l,getTab:function(){if(!m)return null;switch(v){case"mixedResults":return{type:i.getActiveTab(),count:(m["interface"].getHeaderInfo(i.getActiveTab())||{}).count};case"searchResults":return{type:m["interface"].getMode(),count:(m["interface"].getHeaderInfo()||{}).count};default:var e;return m["interface"]&&m["interface"].tabCount&&(e=m["interface"].tabCount()),{type:m["interface"]&&m["interface"].tabType,count:e||1}}},isTabable:function(){return"filters"!=v},pass:function(t){var n=[].slice.call(arguments,1);x.then(function(){e.broadcast.apply(e,[t].concat(n))})},drawOnMap:function(){x.then(function(){m["interface"]&&m["interface"].drawOnMap&&m["interface"].drawOnMap()})},clearMap:function(){x.then(function(){m["interface"]&&m["interface"].clearMap&&m["interface"].clearMap()})},setDestination:function(){e.broadcast("fromTo:setDestination")},setSeoParams:function(){return m&&m["interface"]&&m["interface"].setSeoParams?m["interface"].setSeoParams():null},activateSearchContext:function(){return e.broadcast("searchResults:activateSearchContext")},show:function(){e.setTimeout(function(){e.mod({state:"visible",busy:!0})},10)},dissolve:function(){e.mod().active&&m&&m["interface"]&&m["interface"].dissolve&&m["interface"].dissolve(),g>0?e.mod({appear:!1}):e.broadcast("mixedResults:shrink")},appear:function(){e.mod().active&&m&&m["interface"]&&m["interface"].appear&&m["interface"].appear(),g>0?e.mod({appear:!0}):e.broadcast("mixedResults:expand")},activate:function(){e.mod({active:!0}),e.notify("activated")},deactivate:function(){e.mod({active:!1})},pos:function(t){e.mod({pos:t})},isFrameId:function(e){return g==e},getContentModule:function(){return m},getNoResultsError:function(){return"noResults"==v?y:null},hasPrintableModule:function(){return!(!m["interface"]||!m["interface"].getPrintData)},hideFramesAfter:function(t){g>t?(e.mod({active:!1,state:"closed"}),e.kill()):g==t&&e.mod({active:!0})},hideMaximizeBtn:function(){e.notify("isMinimized")&&"mediaCard"==e.mod().cont&&e.mod({shifted:!1})},updateScroll:function(){e.broadcast("searchResults:updateScroll"),e.broadcast("firmCard:updateScroll"),e.broadcast("card:updateScroll")},blink:function(){e.mod({blink:"reset"}),e.setTimeout(function(){e.mod({blink:!0})},10)},invalidateVisibility:function(t){e.mod({show:t})},invalidateFilters:function(){e.broadcast("filters:invalidateUIValues")},disableControls:function(){e.mod({controls:"none"})},getWidth:c,getShareContent:function(t){return e.broadcast(v+":getShareContent",t)},increaseRepostCount:function(t){return e.broadcast(v+":increaseRepostCount",t)},toggleMover:function(t){e.mod({mover:t})},updateMediaMode:function(t){e.mod({media:t});var n=t?"media":null;e.broadcast("*:updatedFrameSpecialMode",n)},right:function(t){e.mod({right:t}),e.broadcast("*:changeVisibility",d())},setContentType:function(t){e.mod({cont:t})},close:p,setColumnsLength:function(t){e.mod({columns:t})},minimize:function(){e.mod("minimized",!0)},maximize:function(){e.mod("minimized",!1)}},dispatcher:{"*:close":p,"*:updateScroll":function(){e.broadcast("*:updateScroll")},"searchResults:isVisible":d,"*:isFrameActive":function(){return e.mod().active},"*:replaceFrame":function(e,t){l(e,t),this.sender.instance.dispose(),this.sender=null},"mediaCard:addTopBarFixedMode":function(){e.mod({fixed:!0})},"mediaCard:removeTopBarFixedMode":function(){e.mod({fixed:!1})},"mediaCard:hideMaximizeBtn":function(){e.mod({shifted:!1})},"mediaCard:showMaximizeBtn":function(){e.mod({shifted:!0})}},modHandlers:{active:u,pos:function(t){e.mod({moverDir:"last"==t?"left":"right"}),e.notify("booked","last"==t)},busy:function(t){t&&e.setTimeout(function(){e.mod({busy:null})},1e3)},pa:function(t){t&&e.setTimeout(function(){e.mod({pa:null})},500)}}}},t.exports._args=["slot","$defer","$analytics","$appState","$regionManager","$featureSwitcher"]},{lodash:"lodash"}],"/modules/fromTo/fromTo.js":[function(e,t,n){var a=req("helpers/string");t.exports=function(e,t,n,i){function o(t){r(t);var n=l.geoPoint;e.notify("clicked",t,{text:a.replaceAll("&nbsp;"," ",l.text),lon:n&&n.lon,lat:n&&n.lat,id:l.id,context:l.context})}function r(e){i.trackEvent("google",["RouteSearch","Enter",l.context+"_"+e])}function s(){var e=l.geoPoint;return e&&e.lon&&e.lat&&l.text}var l,c={init:function(t){l=t||{};var a=l.templateName||"default";e.viewContext={templateName:a},e.mod({context:l.context,template:a}),s()&&n.get("routeSearch")||e.dispose()},elements:{btn:{click:function(){$(this).hasClass("_from")?o("from"):$(this).hasClass("_to")&&o("to"),i.trackEvent("yandex",["ROUTE_BUTTON_CLICK"])}}},"interface":{setDestination:function(e){e=e||"to",o(e)}}};return c},t.exports._args=["slot","$wkt","$featureSwitcher","$analytics"]},{}],"/modules/gallery/gallery.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/photo");t.exports=function(e,t,n,o,r,s){function l(){if(e.broadcast("patchwork:loadVisible",y-b+g[0].scrollTop),n.get("photosUploader")&&!e.element("photosUploaderWrapper").mod().hidden){var t=e.element("photosUploaderWrapper"),a=t.offset().top,i=t.height(),o=a-g.offset().top+2*i/3<0;e.element("addPhotoControl").mod({hidden:!o})}}function c(t){k&&(_.update(),y=g.outerHeight(),b=v[0].offsetTop,e.broadcast("patchwork:updateSize",v.width(),null,t),l())}function u(t){e.element("photosUploaderWrapper").mod({hidden:!1}),t&&g.scrollTop(e.element("photosUploaderWrapper")[0].offsetTop)}function d(){x&&(x=!1,u(!0),r.trackEvent("google",["Photos","Auth","Success"]))}function h(){x=!1}function p(){e.element("photosUploaderWrapper").mod({hidden:!0})}var f,m,g,_,v,y,b,k,w=!1,x=!1;return{init:function(i,o){m=i,e.isMausoleum||e.mod({unready:!0});var r=e.ua();"Opera"==a.get(r,"browser.name")&&12==a.get(r,"browser.major")&&e.mod({opera12:!0}),f=t.photos({dataProvider:i.photosType}),f.request({id:i.id,albumName:i.albumName,section:i.section,albumId:i.albumId}).done(function(){a.assign(f,{id:i.id,albumName:i.albumName}),e.init("patchwork",f),n.get("photosUploader")&&e.init("photosUploader",{id:f.objectId,album:i.albumName,type:f.objectType}),o()}).fail(function(e){o(e)})},viewContext:function(){return{title:f.title,subtitle:f.subtitle,rating:f.rating,photosUploaderAvailable:n.get("photosUploader")}},clientInit:function(){var t=e.ua(),i="Mac OS X"==t.os.name&&"Firefox"==t.browser.name;i&&e.mod("macff",!0),r.trackEvent("google",["Photos","Show_Gallery"]),e.mod({unready:!1}),g=e.element("scroller"),v=e.element("list"),_=g.baron(),k=!0,c();var o=m.showPhotosUploader||!a.get(f,"photos.items.length");e.element("addPhotoControl").mod({hidden:o}),n.get("photosUploader")&&o&&(s.isAuthorized()?u(!0):(x=!0,e.notify("showPhotosAuthPopup"))),s.on("loginComplete",d),s.on("logoutComplete",p)},elements:{scroller:{scroll:a.throttle(l,200)},close:{click:function(){e.notify("close")}},addPhotoControl:{click:function(){r.trackEvent("google",["Photos","Controls","Add"]),s.isAuthorized()?u(!0):(x=!0,e.notify("showPhotosAuthPopup"))}}},"interface":{tabType:"firms",resize:c,dispose:function(){e.dispose()},setSeoParams:function(){return e.notifySeoParams(i.getSeoParams(f,m,"gallery")),!0},appear:c,doNotTrackDispose:function(){w=!0},authCancel:h},dispatcher:{"patchwork:itemClicked":function(t){e.notify("photoClicked",{id:m.id,photosType:m.photosType,albumName:m.albumName,section:m.section,albumId:m.albumId,photoId:t})},"patchwork:updateDimensions":function(e){
c(e)},"photosUploader:previewsLoaded":function(t){e.broadcast("patchwork:previewsLoaded",t)},"photosUploader:photoUploadFinished":function(t){e.broadcast("patchwork:photoUploadFinished",t)}},dispose:function(){w||r.trackEvent("google",["Photos","Close_Gallery","Close"]),s.off("loginComplete",d),s.off("logoutComplete",p)}}},t.exports._args=["slot","$models","$featureSwitcher","$appState","$analytics","$authorization"]},{lodash:"lodash"}],"/modules/generalPhotos/generalPhotos.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/string"),o=req("helpers/photo");t.exports=function(t,n,r,s,l,c,u){function d(){var n=s.getRegion(),a=e("./viewModel.js");return t.invoke(a,[t,w,n,k,t.isMausoleum])}function h(e){var n=k.photoId;f(n,!1),t.isClient&&(x=d()),a.isFunction(e)&&e()}function p(e){var t=a.find(x.photos,function(t){return t.id==e});return t&&t.order||0}function f(e,t){w.activatePhotoById(e),n.changePhoto(e),t&&n.push()}function m(e){var t,n=e,a=60,o=195;return t=x.isPhone?a:o,e.length>t&&(n=i.getSynopsis(e,t)),n}function g(){if(t.stage==t.STAGE_INITED){var e=this;S?l.trackEvent("google",["Photos","Controls","Change_Photo"]):(S=!0,l.trackEvent("google",["Photos","Show_Photo"]));var n=x.photos[e.current],i=t.element("copyright"),o=e.slides[e.current].caption||k.photosComment;t.element("counterInnerCurrent").html(e.current+1),t.element("counterInnerCount").html(e.slides.length),t.element("descriptionText").html(o?m(o):""),t.mod({noDescriptionText:!o});var r=u.getAuthorizedUserSync().authorizedUser;r&&r.id==n.ownerId?(t.mod({noFeedback:!0}),t.element("deletePhoto").mod({hidden:!1})):(t.mod({noFeedback:void 0}),t.element("deletePhoto").mod({hidden:!0}));var s=a.get(n,"copyright.code");s&&c.getCopyrightSvgByUrl(s,n.copyright.icon,function(a,o){n.copyright.svg=o,t.mod({type:s?s:!1}),i.mod({clickable:!1});var r=t.renderPartial("copyright",n);n.copyright&&r&&(i.html(r),n.copyright.url&&i.mod({clickable:!0}));var l=0===e.current;t.element("controlPrev").mod({hidden:l});var c=e.current===e.slides.length-1;t.element("controlNext").mod({hidden:c}),w.getActivePhoto().id==n.id||k.makeup||f(n.id,!0),_(e.current)})}}function _(e){var n=x.photos[e-1]||{},a=x.photos[e+1]||{};t.element("controlPrev").attr("href",n.seoLink),t.element("controlNext").attr("href",a.seoLink)}function v(e){w.request(a.pick(k,"id","albumName","section","albumId","room","bookletId")).done(function(){h(e)}).fail(function(){t.isClient&&(n.del("photos"),n.push()),e({meta:{code:404}}),E["interface"].dispose()})}function y(e){var t=e.photosType;return"booklets"==e.photosType&&(t="booklet"),e.bookletId&&(t="firmAndBooklet"),t}function b(e,t){if("firm"==e.photosType&&"view"==e.albumName)return{objectId:t.getBuildingId(),objectType:"geo"};var n=!e.albumName||"common"==e.albumName;return"firm"==e.photosType&&n?{objectId:e.id,objectType:"branch"}:"geo"==e.photosType&&"view"==e.albumName?{objectId:e.id,objectType:"geo"}:null}var k,w,x,C,L,I=req("helpers/firm"),T="landingPage"==t.registry.get("appMode"),S=!1,E={init:function(e,n){switch(k=e||{},k.photosType=k.photosType||"firm",t.mod({mode:k.photosType}),w=r.photos({dataProvider:y(k)}),a.contains(["multiple","single"],k.photosType)&&t.mod({noFeedback:!0}),k.photosType){case"firm":case"geo":case"booklet":v(n);break;case"booklets":k.albumName=k.albumName||"common",v(n);break;case"single":case"multiple":var i=a.isArray(k.photosUrls)?k.photosUrls:[k.photosUrls];w.set({photos:{items:a.map(i,function(e){return{url:e}})}}),h(n);break;default:w.set(k),h(n)}},clientInit:function(){L=n.dataViewer.getSize(),t.notify("fullScreen"),t.notify("clientInited"),T&&(t.element("container").mod({isLandingPage:!0}),t.mod({isLandingPage:!0}))},bind:function(){var e=p(k.photoId);C=t.element("container").photor({control:"generalPhotos__control",next:"generalPhotos__controlNext",prev:"generalPhotos__controlPrev",viewport:"generalPhotos__viewport",layer:"generalPhotos__viewportLayer",slide:"generalPhotos__viewportLayerSlide",slideImg:"generalPhotos__viewportLayerSlideImg",slideCaption:"generalPhotos__viewportLayerSlideCaption",showThumbs:!1,data:x.photos,onShow:g,current:e}),document.activeElement.blur()},viewContext:function(){return t.isServer&&(x=d()),x},elements:{controlNext:{click:function(e){t.isGrym&&document.activeElement.blur(),e.preventDefault()}},controlPrev:{click:function(e){t.isGrym&&document.activeElement.blur(),e.preventDefault()}},copyright:{click:function(){var e=w.getActivePhoto();e.copyright&&(l.trackEvent("google",["Photos","Copyright",e.copyright.code]),e.copyright.url&&window.open(e.copyright.url))}},feedback:{click:function(){var e=a.extend({feedbackType:"photoError",photoId:w.getActivePhoto().id},b(k,w));n.showFeedback(e),n.push(),l.trackEvent("google",["Photos","Claim"])}},close:{click:function(){l.trackEvent("google",["Photos","Close_Photo"]),t.notify("closeButtonClicked")}},deletePhoto:{click:function(){var e=w.getActivePhoto().id,i=b(k,w),o=i.objectType,r=I.getStaticId(i.objectId),s=u.getAuthorizedUserSync().authorizationToken,l=a.get(k,"albumName","common");c.deletePhoto(s,o,r,e,l,function(i){if(!i){C.photor("destroy");var o=a.findIndex(x.photos,{id:e});a.remove(x.photos,{id:e}),a.isEmpty(x.photos)&&(t.notify("photoDeleted",x.photos),n.leavePhotoSlider(),n.push(),t.dispose()),C=t.element("container").photor({control:"generalPhotos__control",next:"generalPhotos__controlNext",prev:"generalPhotos__controlPrev",viewport:"generalPhotos__viewport",layer:"generalPhotos__viewportLayer",slide:"generalPhotos__viewportLayerSlide",slideImg:"generalPhotos__viewportLayerSlideImg",slideCaption:"generalPhotos__viewportLayerSlideCaption",showThumbs:!1,data:x.photos,onShow:g,current:x.photos[o]?o:o-1}),t.notify("photoDeleted",x.photos)}})}}},dispose:function(){t.isClient&&(C&&C.photor&&C.photor("destroy"),t.notify("deactivated"),t.notify("closed",a.pick(k,"id")),t.notify(L))},changeState:function(e){var n;e.photos&&(n=e.photos.photoId),void 0!==n&&n!=w.getActivePhoto().id&&(w.activatePhotoById(n),t.element("container").photor("go",p(n)))},"interface":{activateContent:function(){E["interface"].deactivatedOnce||l.trackEvent("yandex",["TARGET_PHOTOS"])},deactivateContent:function(){t.notify("deactivated")},setSeoParams:function(){return a.get(n.panels.findLast("firm"),"media")?t.notifySeoParams(o.getSeoParams(w,k,"mediaCard")):t.notifySeoParams(o.getSeoParams(w,k)),!0},dispose:function(){n.leavePhotoSlider(),n.push(),t.dispose()},dissolve:function(){t.notify("deactivated")}}};return E},t.exports._args=["slot","$appState","$models","$regionManager","$analytics","$photoApi","$authorization"]},{"./viewModel.js":223,lodash:"lodash"}],"/modules/geoCard2/geoCard2.js":[function(e,t,n){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=e("../../helpers/actions"),o=e("lodash"),r=e("../../helpers/booklet"),s=e("../../helpers/geo"),l=e("../../helpers/string"),c=e("../../helpers/link"),u=e("bluebird"),d=e("../../helpers/firm");t.exports=function(t,n,h,p,f,m,g,_,v,y,b,k,w){function x(e){return new u(function(t,a){n.geo.profile(e,{},function(e,n){return e?a(e):(n=n||{},t(n))})})}function C(e){return new u(function(t){h.getGeoInfo(e,function(e,n){var a=o.get(n,"[0].albums");return e||!a?t():t(a)})})}function L(e){return new u(function(t){return m.get("apartments")&&e?void p.getList(e,{service_type:"sale"},function(e,n){return e?void t(!1):void t(n)}):void t(!1)})}function I(e){return new u(function(a){var i=m.get("bookletProviders")&&!t.registry.get("offline")&&o.get(e,"links.providers");if(i){var s={house:e.id,servicing_group:"internet",mutedForBssSearch:!0};n.searchByType("servicing",s,t.ifAlive(function(e){var t=e&&r.haveProvidersBooklets(e.data);a(t)}))}else a(!1)})}function T(e){t.notify("pathActionClicked",e,{id:ae.id,text:l.replaceAll("&nbsp;"," ",s.getTitle(ae,_)),lat:o.get(ae,"point.lat"),lon:o.get(ae,"point.lon")})}function S(){t.notify("pathFinderEntranceClicked",ae),g.trackEvent("google",["Build_Card_event","Enter_Click",ae.purpose_name])}function E(){if(t.ua().isPhone)return null;var e=!o.get(ae,"point.lon")||!o.get(ae,"point.lat");return i.getPathAction(e,{from:o.partial(T,"from"),to:o.partial(T,"to")},i.getPathActionLocaleParams(_))}function P(){if("building"!=ae.type)return null;var e=!o.get(ae,"links.entrances");return{type:"entrance",text:_._t("Вход"),disabled:e,buttons:[{type:"entrance",icon:"action-entrance",disabled:e,onClick:S}]}}function j(){var t="building"===ae.type?"halfRight":"center",n={path:E(),entrance:P(),favorite:{module:{type:"favoritesWidget",data:{type:"action",entity:ae,dropDownPosition:t,gaCategory:"Build_Card_event"}}}},a=e("../../helpers/distributeActions")(n);return a([["path"],["entrance"],["favorite"]])}function M(){if(t.initDumb("cardActions",j(ae)),t.init("promoMobile",{module:"geoCard"}),"parking"==ae.type){var n=ee.getParkingProps(ae,{i18n:_});o.isEmpty(n)||t.initDumb("cardParking",n)}ae.schedule&&t.init("schedule",{model:ae.schedule,ctx:"geoCard"});var a=N();o.isEmpty(a)||(le=t.init("cardInfrastructure",a));var i=e("./prepareAttractionData")(ae,{isMausoleum:t.isMausoleum,expanderLabels:{expand:_._t("Все достопримечательности"),rollup:_._t("Свернуть достопримечательности")}});o.isEmpty(i)||t.initDumb("cardAttractions",i,"attractions");var r=ee.getFeatureProps(ae,{i18n:_,cityCode:y.getRegion().code,parkingFeatureClickHandler:R});if(o.contains(["geoPlace","parking","adm_div"],ae.type)||o.isEmpty(r)||t.initDumb("cardFeatures",r),te){var s=ee.getLandmarksProps(ae,{cityCode:y.getRegion().code,numberFormat:_.getFormats("number"),landmarksClickHandler:A});o.isEmpty(s)||t.initDumb("cardLandmarks",s)}else{var l=ee.getNearStopsProps(ae,{cityCode:y.getRegion().code,numberFormat:_.getFormats("number"),nearStopsLinkClickHandler:D});o.isEmpty(l)||t.initDumb("cardNearStops",l)}}function A(e,n,a,i){t.notify("landmarkClicked",{id:e,type:n,subtype:a,stationId:i}),g.trackEvent("google",["Build_Card_event","Landmarks","Click"])}function D(e,a){U("Stop",a),n.transport.station(e,{},function(e,n){t.notify("nearStationSelected",ae,n)})}function R(e){U("Parking"),t.notify("openCard",{type:"geo",id:e})}function N(){return t.invoke(Q,[ae,{hasProvidersButton:ae.hasProvidersButton,onInitApartmentsList:K,onInitFirmsList:X,onClickItem:z,onClickListItem:{firms:O,apartments:F},onClickProvidersButton:B}])}function B(){U("Provider_Button",ae.purpose_name),t.bssContext.startNewChain({pr:"provider",gs:{building:{id:ae.id}}}),m.get("mediaCard.providers")?t.notify("showProvidersInBuilding",ae.id,Z(ae)):t.notify("showProviderBooklet",{geoid:ae.id})}function F(e){t.notify("apartmentClicked",c.getDomainFromUrl(e),"geoCard2")}function O(e){t.notify("firmSelected",{id:e}),U("Firms","Item_firms")}function z(e){switch(e){case"firms":return U("Firms","Title_firms"),t.bssContext.startNewChain({pr:"allorganisation",gs:{building:{id:ae.id}}}),t.notify("firmsInBuildClicked",ae.id);case"servicing":return U("Servicing","Title_servicing"),t.bssContext.startNewChain({pr:"service",gs:{building:{id:ae.id}}}),t.notify("showServicingFirmsInBuild",ae.id,ae.point);case"providers":return U("Provider_Title",ae.purpose_name),t.bssContext.startNewChain({pr:"provider",gs:{building:{id:ae.id}}}),t.notify("showProvidersInBuilding",ae.id,Z(ae));case"apartments":return t.notify("apartmentsHeaderClicked"),t.notify("showApartments",ae.id);default:return null}}function q(){if(!t.isServer){var e=[];o.each(ue,function(t){var n=$(t),a=n.data(),i=o.find(o.get(ae,"links[branches].items",{}),{id:a.id});i&&!i.shown&&n.seeable(.5)&&(i.shown=!0,e.push(a.id),g.writeBssInfoInCookie(a))}),o.isEmpty(e)||t.notify("firmListDisplayed",e,g.getPlace())}}function U(e,t,n){if("building"==ae.type){var a=void 0;a=void 0!==n?["Build_Card_event",e,t,+n]:o.compact(["Build_Card_event",e,t]),g.trackEvent("google",a)}}function H(){U("Address"),t.notify("addressSelected",ae.point||ae.id,{historyAction:"push"})}function G(){var e=t.element("photosImg");if(!e.length||e.mod().loaded)return e;var n=e.data("src"),a=new Image;return a.onload=function(){e.css("background-image","url("+n+")").mod({loaded:!0})},a.src=n,e}function W(){ae.apartments&&!o.last(ae.apartments.items).shown&&o.each(ce,function(e){var n=$(e).data("index");if(!ae.apartments.items[n].shown&&$(e).seeable(.5)){ae.apartments.items[n].shown=!0;var a=c.getDomainFromUrl($(e).attr("href"));t.notify("apartmentViewed",a,"geoCard2")}})}function V(e,n){ae=e,n&&(ae.photoAlbums=n),ne.lon&&ne.lat&&(ae.point={lon:parseFloat(ne.lon),lat:parseFloat(ne.lat)}),"building"==ae.type&&t.isClient&&(se=u.props({hasProvidersButton:I(ae),apartments:L(ae.id)})),te=_.getSettings("landmarksEnabled")&&o.has(ae,"links.landmarks"),M(ae)}function Z(e){var t=o.get(e,"address.components[0]");return t?o(t).pick(["street","number"]).values().value().join(","):o.get(e,"address_name","")}function Y(){var e=o.find(ae.photoAlbums,{type:"view"});return e?e.count:0}function K(e){ce=e,t.notify("apartmentsShown"),W()}function X(e){ue=e,q()}function J(e){var n=e.profile;if(o.isEmpty(n.group))return!1;var i=o.find(n.group,{type:"branch"});return i?(v.panels.remove("geo"),v.panels.show("firm",{id:i.id,lon:ne.lon,lat:ne.lat}),v.replace(),t.raise({code:301}),!0):(t.notify("replaceFrame",{moduleName:"card",moduleData:{group:n.group,data:a({},n,{photoAlbums:e.photos}),lon:parseFloat(ne.lon),lat:parseFloat(ne.lat)}}),!0)}var Q=e("./prepareInfrastructureData"),ee=e("./utils"),te=void 0,ne=void 0,ae=void 0,ie=void 0,oe=void 0,re=void 0,se=void 0,le=void 0,ce=void 0,ue=void 0,de={tag:"article",inheritBssHash:!0,networkDepend:!0,init:function(e,n){if(ne=o.cloneDeep(e)||{},t.registry.get("isInit")?t.bssContext.startNewChain({pr:"link"}):o.get(v,"state.isFromHistory")&&t.bssContext.startNewChain({pr:"back_in_browser",updateContext:!0}),ne.id)u.props({profile:x(ne.id),photos:C(ne.id)}).then(function(e){if(J(e))return ae={},void n();var t=e.profile,a=e.photos;o.has(t,"geometry.centroid")&&(t.point=f.parsePoint(t.geometry.centroid)),t.title=s.getTitle(t,_),V(t,a),n()})["catch"](n);else{var a=s.createSomePlace(_);V(a),n()}},viewContext:function(){return e("./viewModel")(ae,{isPhone:t.ua().isPhone,doNotCollapseArticle:t.isMausoleum,dontPreloadPhoto:t.isServer},_,y,m,k)},bind:function(){t.element("scroller").baron().fix()},clientInit:function(){var e=G();e.length&&U("Build_Photos","Show"),t.googletag(),m.get("floors")||t.element("floors").mod({hidden:!0}),w.getItem("photosUploaderTooltipGeoCard")||0!=Y()||(t.notify("showPhotosUploaderTooltip",{type:"geo",tooltipData:{sourceElement:t.element("addPhotoControl"),clickHandler:function(){t.notify("photosUploaderControlClicked",{id:ae.id,albumName:"view",photosType:"geo"})}}}),w.setItem("photosUploaderTooltipGeoCard",!0)),se&&se.then(function(e){ae.hasProvidersButton=e.hasProvidersButton,ae.apartments=e.apartments,o.get(ae,"links.providers")&&U("Provider_Show",ae.purpose_name,e.hasProvidersButton),(o.get(e,"apartments.total_count")>0||e.hasProvidersButton)&&(le?le.slot.rerenderDumb(N()):le=t.init("cardInfrastructure",N()))})["catch"](function(e){t.sendError("An error occurred while getting additional data (apartments, providers) for geoCard.",e)})},viewAttrs:function(){return t.isMausoleum?{"data-mausoleum-lon":o.get(ae,"point.lon")||"","data-mausoleum-lat":o.get(ae,"point.lat")||""}:{}},"interface":{tabType:"geo",getMapOptions:function(){ne.entranceOptions&&t.notify("takeMapOptions",ae,ne.entranceOptions)},drawOnMap:function(){t.notify("mapDataReady",ae,ie)},getAnalyticsPlace:function(){return g.getPlace()},clearMap:function(){t.notify("clearMap",ae,ie)},parkingsResult:function(e){if(!e){var n=t.element("nearParkings");n&&n.text(_._t("Нет информации о парковках"))}oe||(U("Parking_near","Click",!!e),oe=!0,re=!!e)},activateContent:function(){if(!de["interface"].deactivatedOnce&&ae){g.trackEvent("google",["Cards","Geo",ae.type]),g.trackEvent("yandex",["CARD_GEO_HOUSE"]);var e=t.config["animations.frameHide"]+50;t.setTimeout(function(){q(),W()},e),o.size(o.get(ae,"links.entrances"))&&g.trackEvent("google",["Build_Card_event","Enter_Show",ae.purpose_name]),te&&g.trackEvent("google",["Build_Card_event","Landmarks","Show"]),s.checkFloors(ae,m,k)&&g.trackEvent("googleFloors",["Floors_Enter","Geo_Card_Button","Show"])}},setSeoParams:function(){var e=s.getSeoParams(ae,_,f);return t.notifySeoParams(e),!0},getPrintData:function(){var e=o.clone(this.viewContext());return{analyticsLabel:"Geo_Card",layout:"full","static":t.renderPartial("print",e),externalPrintParams:{singleMarker:!0}}},prepareForPrint:function(){t.notify("preparedForPrint",ae.point)},_testInit:function(e){ae=e.model}},elements:{addressLink:{click:function(e){H(),e.preventDefault()}},nearParkingsLink:{click:function(){ie=!0,t.notify("parkingsShown",ae),void 0!==re&&U("Parking_near","Click",re)}},floors:{click:function(e){e.preventDefault(),t.bssContext.startNewChain({pr:"dashboard_floors"}),t.notify("floors",k.getByBuildingId(ae.id)),g.trackEvent("googleFloors",["Floors_Enter","Geo_Card_Button","Click"])}},photos:{click:function(e){e.preventDefault(),U("Build_Photos","Click"),t.notify("photosClicked",{id:ae.id,albumName:"view"})}},addPhotoControl:{click:function(){t.notify("photosUploaderControlClicked",{id:ae.id,albumName:"view",photosType:"geo"});var e=o.get(d.getPhotoAlbum(ae,"view","800x176"),"count");g.trackEvent("google",["Build_Card_event","Photos_Add",ae.type,e?0:1])}},searchInput:{keydown:function(e){if(13==e.which){var n=$(this).val();t.notify("searchNear",ae,n)}}},metarubricsItem:{click:function(){t.notify("searchNear",ae,$(this).data("query"))}},footerBugReport:{click:function(){v.showFeedback({feedbackType:"mapError",lon:o.get(ae,"point.lon"),lat:o.get(ae,"point.lat"),placeTitle:ae.title}),v.push()}},footerAdvLink:{click:function(){U("Your_adv")}},scroller:{scroll:o.throttle(function(){q(),W()},100)}}};return de},t.exports._args=["slot","$dgApi","$photoApi","$apartmentsApi","$wkt","$featureSwitcher","$analytics","$i18n","$appState","$regionManager","$defer","$floorsManager","$localStorage"]},{"../../helpers/actions":"/helpers/actions.js","../../helpers/booklet":"/helpers/booklet.js","../../helpers/distributeActions":"/helpers/distributeActions.js","../../helpers/firm":"/helpers/firm.js","../../helpers/geo":"/helpers/geo.js","../../helpers/link":"/helpers/link.js","../../helpers/string":"/helpers/string.js","./prepareAttractionData":224,"./prepareInfrastructureData":225,"./utils":226,"./viewModel":227,bluebird:384,lodash:"lodash"}],"/modules/geoLocation/geoLocation.js":[function(e,t,n){var a=e("lodash"),i=5e3,o="default",r=3e4,s=null,l=null;t.exports=function(t,n,c,u,d,h,p){function f(e){e&&T[e]?t.element("tooltipText").html(T[e]):t.element("tooltipText").html(null)}function m(e,t){var n=S[o]&&-1!==S[o].nextStates.indexOf(e);(n||t)&&(S[o].onLeave&&S[o].onLeave(),S[e].onEnter&&S[e].onEnter(),o=e)}function g(){setTimeout(function(){m("default"),t.mod({errorGlobal:!1})},i)}function _(e,t){return e.distanceTo(t)>r}function v(e){return{lon:e.latlng.lng,lat:e.latlng.lat,zoom:e.zoom}}function y(e,n){var a=v(e);return s&&!_(e.latlng,s)?(b(),m("active"),void n()):void u.region.search(a,{fields:"items.domain"},function(e,a,i){return 200==i.code&&a.items.length?void(a.items[0].domain!=d.getRegion().domain?(c.setGeolocationState(!0),c.replace(),setTimeout(function(){t.notify("changeRegion",a.items[0].id)},300)):a.items[0].id!=d.getRegion().id?(m("waiting"),n(a.items[0].id)):(b(),m("active"),n())):void w({code:"out_of_range"})})}function b(){"active"==o?t.notify("updateMarker",l):t.notify("drawMarker",l)}function k(e){h.trackEvent("google",["Geolocation","On","Success"]),t.notify("disableMapCentering",!1),l=v(e),y(e,function(n){s=e.latlng,!p.get("globalMap")&&n?t.notify("changeRegion",n,!0,l):t.notify("updatedGeoPosition",l,!0)})}function w(e){switch(h.trackEvent("google",["Geolocation","On","Fail"]),t.notify("disableMapCentering",!1),e.code){case 1:m("disabled");break;default:m("error")}}function x(){}function C(){"default"==o?m("waiting"):"active"==o&&(h.trackEvent("google",["Geolocation","Off"]),m("default"))}var L={watch:p.get("geoLocation.watchPosition"),setView:!0,enableHighAccuracy:!0,maximumAge:100,timeout:6e4},I=e("./orientationWatcher")(t,p,x),T={error:n._t("Мы не смогли вас найти"),disabled:n._t("Определить местоположение невозможно"),disabledGM:n._ht("К сожалению, мы не смогли определить ваш город<br>%{Link Воспользуйтесь поиском}",{link:{"class":"_scheme_dark geolocation__focusLink"}})},S={"default":{nextStates:["waiting","disabled","hidden"]},waiting:{nextStates:["active","error","disabled","default"],onEnter:function(){t.mod({waiting:!0}),a.debounce(function(){t.notify("disableMapCentering",!0),p.get("geoLocation.location")?t.notify("enableGeolocation",{positionOptions:L}):w({code:"feature_disabled"})},300)()},onLeave:function(){t.mod({waiting:!1})}},active:{nextStates:["default"],onEnter:function(){t.mod({active:!0}),I.init()},onLeave:function(){t.notify("updatedGeoPosition",null),t.notify("clearMarker"),t.mod({active:!1}),I.dispose(),t.notify("disableGeolocation")}},error:{nextStates:["default"],onEnter:function(){t.mod({error:!0}),f("error"),g()},onLeave:function(){t.mod({error:!1}),f(null)}},disabled:{nextStates:["default"],onEnter:function(){t.mod({disabled:!0}),f("disabled"),g()},onLeave:function(){f(null),t.mod({disabled:!1})}},hidden:{nextStates:[],onEnter:function(){t.mod({hidden:!0})}}};return{init:function(){},clientInit:function(){var e=navigator.geolocation&&navigator.geolocation.getCurrentPosition,t=p.get("geoLocation.control");e&&t?c.get("geolocation")&&(c.del("geolocation"),c.replace(),m("waiting")):m("hidden")},changeState:function(e){"city"in e&&("waiting"==o?m("active"):(m("default"),s=null))},elements:{control:{click:C},errorGlobalTooltip:{selector:".geoLocation._errorGlobal .geoLocation__tooltipText",click:function(){h.trackEvent("google",["Global_autolocation","Error","Click_search"]),t.notify("useSearchClicked")}}},"interface":{setState:m,getState:function(){return o},showAutoLocationError:function(){h.trackEvent("google",["Global_autolocation","Error","Show"]),t.mod({errorGlobal:!0}),f("disabledGM"),g()},locationFound:k,locationError:w}}},t.exports._args=["slot","$i18n","$appState","$dgApi","$regionManager","$analytics","$featureSwitcher"]},{"./orientationWatcher":228,lodash:"lodash"}],"/modules/ginzaProject/ginzaProject.js":[function(e,t,n){var a=e("./dataForGinza");t.exports=function(e,t,n){function i(){o=n.getItem("hiddenGinzaMarkers"),"true"!=o&&e.notify("addGinzaMarker",a)}var o;return{init:function(){e.isInitialState(["extraLayers","zoom","city"])&&i()},changeState:function(t){t.ginzaMarkers&&"visible"!=t.ginzaMarkers&&e.notify("clearGinzaMarker")},"interface":{addMarkers:function(){var e=t.getState().panels.length;return e?!1:(i(),!0)},clearMarkers:function(){var n=t.getState().panels.length;return n?!1:(e.notify("clearGinzaMarker"),!0)},enterGlobal:function(){e.isClient&&e.notify("clearGinzaMarker")},exitGlobal:function(){e.isClient&&i()}}}},t.exports._args=["slot","$appState","$localStorage"]},{"./dataForGinza":229}],"/modules/googleTagAds/googleTagAds.js":[function(e,t,n){var a=e("lodash"),i=e("slot/lib/loadScript");t.exports=function(e,t,n,o,r,s,l){function c(){L=!0}function u(){L=!1}function d(){return s.get("googleTag.stopEmptyRotation")}function h(){var t=e.getInterests();!a.isEmpty(t)&&_()&&x.setTargeting("interest",y(t))}function p(){var t=e.searchContext.read("query");t&&("results"==w||"mediaResults"==w)&&_()&&(t=y(t.toLowerCase()),x.setTargeting("query",t))}function f(){!a.isEmpty(k)&&_()&&x.setTargeting("shortrubrics",k)}function m(){"teaser"==w&&(x.setTargeting("Extension",""+req("helpers/extension").isInstalled()),x.setTargeting("browser",e.registry("ua").browser?e.registry("ua").browser.name:""))}function g(){return"undefined"!=typeof googletag&&googletag&&a.isFunction(googletag.defineSlot)&&a.isFunction(googletag.pubads)&&a.isFunction(googletag.enableServices)&&a.isFunction(googletag.display)}function _(){return g()&&!!x}function v(i){function s(e){return a.includes(["start","teaser"],i)&&e&&I&&L&&d()}function l(){"hidden"!=n.getActualState().dashboard&&!n.get("video")&&_()&&("start"==i&&googletag.pubads().clear([x]),googletag.pubads().refresh([x]))}if(g()){e.ifAdBlockDetected(function(){o.trackEvent("google",["DoubleClick","AdBlock",i])}),x=googletag.defineSlot(S[i].url,S[i].size,"module-"+e.moduleId()),_()&&(x.addService(googletag.pubads()),x.setTargeting("Project",t.getRegion().id),x.setTargeting("Lang",r.getLang()),f(),h(),p(),m()),googletag.pubads().addEventListener("slotRenderEnded",function(t){t.slot===x&&_()&&(s(t.isEmpty)&&u(),t.isEmpty?e.notify("bannerIsEmpty"):(e.mod({type:i}),T=!0),I=!0,a.each(P,function(e){e(t.isEmpty)}))}),googletag.pubads().enableAsyncRendering(),"free"!=i&&"results"!=i&&_()&&x.setCollapseEmptyDiv(!0,!0),googletag.enableServices(),googletag.display("module-"+e.moduleId());var c,v;switch(i){case"start":c=r.getSettings().ads.dashboard.intervalRotation,v=l;break;case"teaser":c=r.getSettings().ads.teaser.intervalRotation,v=l;break;default:return}e.setInterval(function(){E||L&&v()},c)}}function y(e){return e=a.isString(e)?[e]:a.compact(e),a.map(e,function(e){return e.replace(/["'=\!\+#\*~;\^()<>\[\]]/g,"")})}function b(){if(!C&&(C=!0,a.contains(["start","free","results","mediaResults","recoveryResults","teaser","global"],w))){var t=e.config["googletag.url"];window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(e.ifAlive(function(){v(w)})),i(t)}}var k,w,x,C,L=!0,I=!1,T=!1,S={start:{url:"/45140520/Banner_start",size:[460,160]},discovery:{url:"/45140520/Banner_media_context",size:[400,80]},recovery:{url:"/45140520/Banner_media_context_recovery",size:[400,80]},free:{url:"/45140520/Banner_empty_space",size:[300,250]},results:{url:"/45140520/MKB",size:[392,64]},recoveryResults:{url:"/45140520/MKB_recovery",size:[392,64]},mediaResults:{url:"/45140520/Media_search_results",size:[304,530]},teaser:{url:"/45140520/Dashboard_product",size:[460,118]},global:{url:"/45140520/1x1_global",size:[1,1]}},E=!1,P=[],j={init:function(t){return n.queryString.has("printmode")||s.get("businessLandingDemoMode")?void e.dispose():(w=t.type,k=t.rubrics,void e.mod({type:"hide"}))},clientInit:function(){b()},elements:{block:{mouseenter:function(){E=!0;var t=$(this).find("iframe")[0].contentDocument;$(t).on("mouseup",function(){l.manualAdd("click",{module:"googleTagAds"}),e.notify("mouseup")})},mouseleave:function(){E=!1;var e=$(this).find("iframe")[0].contentDocument;$(e).off("mouseup")}}},"interface":{enterGlobal:function(){e.isClient&&("global"==w&&_()&&googletag.pubads().refresh([x]),u())},exitGlobal:function(){e.isClient&&("global"==w?u():(c(),b()))},visibility:function(e){e?u():c()},cityChanged:function(){_()&&(x.setTargeting("Project",t.getRegion().id),googletag.pubads().refresh([x]),c())},refresh:function(){"results"!=w&&"mediaResults"!=w&&"recoveryResults"!=w||!_()||googletag.pubads().refresh([x])},hasAds:function(){return T},onBannerRender:function(e){P.push(e)},startRotation:function(){I=!1,c()},stopRotation:u}};return j},t.exports._args=["slot","$regionManager","$appState","$analytics","$i18n","$featureSwitcher","$userActivity"]},{lodash:"lodash","slot/lib/loadScript":"slot/lib/loadScript"}],"/modules/holidayWarning/holidayWarning.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/time");t.exports=function(t,n,o,r){function s(e,t){var n=i.getFormattedTime(o.getRegion(),"YYYY-MM-DD");return e?t?i.isBetween(e.period.start,e.period.end,n):!0:!1}var l={};return{init:function(e){l=a.cloneDeep(e)||{},n.getHolidays(function(e){if(!e)return void t.dispose();var a=t.config.canGetHolidaysDateFromURL&&r.get("holidaysDate")||{};return l.holidayData=n.getActiveHoliday(e,a.date),s(l.holidayData,l.initOnHoliday)?void(t.isClient&&t.rerender()):void t.dispose()})},viewContext:function(){if(!l.holidayData)return{};var n=t.invoke(e("./viewModel"),[l]);return t.mod({type:n.type,project:n.project}),n}}},t.exports._args=["slot","$holidaysApi","$regionManager","$appState"]},{"./viewModel":230,lodash:"lodash"}],"/modules/invisibleFrame/invisibleFrame.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t){var n,i,o,r,s=t(),l=t();return i={init:function(e){o=e.moduleName,r=e.moduleData||{}},"interface":{right:a.noop,updateMediaMode:a.noop,show:a.noop,pos:a.noop,invalidateVisibility:a.noop,replaceContent:a.noop,setSeoParams:a.noop,dissolve:a.noop,appear:a.noop,deactivate:a.noop,toggleMover:a.noop,activate:function(){e.notify("activated")},drawOnMap:function(){s.then(function(){n["interface"]&&n["interface"].drawOnMap&&n["interface"].drawOnMap()})},clearMap:function(){s.then(function(){n["interface"]&&n["interface"].clearMap&&n["interface"].clearMap()})},whenContentInited:function(){return s},whenContentRendered:function(){return l},initContentModule:function(a){return e.notify("initContent",o),e.isServer?(e.notify("frameSuccess",o),e.notify("contentRendered",o),l.resolve(),s.resolve(),void a()):void t.when(r).then(e.ifAlive(function(t){return e.init(o,t,e.ifAlive(function(t,i){return i.type!=o?void a():t?(e.notify("frameFailed",o,t),e.dispose(),void a(t)):(e.notify("frameSuccess",o,t),n=i,e.notify("appearingEnded"),e.notify("contentRendered",o),l.resolve(n),s.resolve(n),void(a&&a()))}))})).fail(function(){a({error:"noData"})})}}}},t.exports._args=["slot","$defer"]},{lodash:"lodash"}],"/modules/jsonld/jsonld.js":[function(e,t,n){"use strict";var a=e("./viewModel"),i=e("lodash");t.exports=function(e,t,n){return{init:function(o){var r=i.get(o,"model",{}),s={currency:n.getFormats().currency,regionData:t.getRegion(),ratingType:n.getSettings("firms.ratingType")};e.mod({type:o.type}),e.viewContext=e.invoke(a,[{model:r,localData:s,type:o.type}])}}},t.exports._args=["slot","$regionManager","$i18n"]},{"./viewModel":241,lodash:"lodash"}],"/modules/landingPage/landingPage.js":[function(e,t,n){var a=e("lodash"),i=e("async"),o=req("lib/request2"),r=req("helpers/firm");t.exports=function(t,n,s){function l(){var e={"*:frameFailed":function(e,n){t.raise({code:n.code})},"generalPhotos:closed":function(e){var n=s.getRegion();t.isClient&&(location.href=r.getSeoUrl(e,n))}};return a.extend(p(t),e)}function c(){return o("get",t.location.absoluteUri(t.config["symbols.url"])).then(function(e){return e.text})}var u,d,h=t.requireComponent("appState"),p=e("../online/actions"),f=req("helpers/exchange"),m=f.changeState,g={init:function(e,n){function a(n){var a=t.requireComponent("regionManager"),i=h.getRegionId()||e.city;a.loadRegion(i).then(function(e){i!=e.id&&(i=e.id),a.initRegion(i,function(){n()})})}function o(){var e=[];e.push({type:"dataViewer",data:{panels:h.get("panels")}}),h.get("photos")&&e.push({type:"generalPhotos",data:h.get("photos")}),t.initModules(e,function(){t.broadcast("frame[::isFrameId(0)]:disableControls"),n()})}(t.isClient||t.isMausoleum)&&(u=c().then(function(e){return d=e,e})),t.registry.set("appMode","landingPage"),i.series([a,o],n)},clientInit:function(){var e=h.get("feedback");e&&f.initFeedback(t,e),$("html").addClass("_isLandingPage"),u.then(function(e){var n=t.ua().browser;return t.block().append(e),"Opera"==n.name&&n.major<=12&&$("svg.icon").each(function(){$(this).append(" ")}),e}),$(window).on("resize",a.debounce(function(){t.broadcast("dataViewer:resize")},400))},changeState:function(e){m.resolveFeedbackDiff(t,e)},viewContext:function(){return{symbols:d}},dispatcher:l()};return g},t.exports._args=["slot","$appState","$regionManager"]},{"../online/actions":334,async:383,lodash:"lodash"}],"/modules/lightboxMobile/lightboxMobile.js":[function(e,t,n){var a=req("helpers/link");t.exports=function(e,t,n){function i(t){t.stopPropagation(),n.trackEvent("google",["Mobile4","Fullscreen","Click"]),e.dispose()}var o={clientInit:function(){n.trackEvent("google",["Mobile4","Fullscreen","Show"])},viewContext:function(){return{href:a.getMobileLandingLink(t.getRegion().domain,"fullscreen")
}},elements:{block:{click:function(){n.trackEvent("google",["Mobile4","Fullscreen","Close"]),e.dispose()}},icon:{click:function(e){i(e)},mouseenter:function(){e.mod({hover:!0})},mouseleave:function(){e.mod({hover:!1})}},text:{click:function(e){i(e)},mouseenter:function(){e.mod({hover:!0})},mouseleave:function(){e.mod({hover:!1})}},icons:{click:function(e){i(e)},mouseenter:function(){e.mod({hover:!0})},mouseleave:function(){e.mod({hover:!1})}}}};return o},t.exports._args=["slot","$regionManager","$analytics"]},{}],"/modules/map/map.js":[function(e,t,n){var a=e("lodash"),i=req("lib/geo/lonlat"),o=req("helpers/firm");t.exports=function(t,n,r,s,l,c,u,d,h,p,f,m,g,_,v){function y(e){var t;return 13>e?t="xs":16>e?t="s":18>e?t="m":e>=18&&(t="l"),t}function b(){clearTimeout(ee),ee=!1}function k(e,t){t||(t=e.type,"adm_div"==e.type&&(t=e.subtype)),u.trackEvent("google",["Map","Click",t])}function w(e){t.isGrym?e():ee||(ee=t.setTimeout(function(){e(),ee=!1},t.config["map.dblClickTimeout"]))}function x(e){L()||(u.setPlaceMap(),w(function(){ae.showCircle(e),E(e)||(t.bssContext.startNewChain({pr:"map",gs:{circle:{lat:e.lat,lon:e.lon,radius:.1}}}),p.geoClicker({action:"simple",point:e,isPhone:t.ua().isPhone,zoom:ae.getZoom()}).then(function(e){k(e),t.notify("openCard",e)}))}))}function C(e,t){var i=a.reject(e,function(t,n){return 0==n||n==e.length-1});d.setWaypoints(i,t),n.push()}function L(){return n.get("global")||n.get("ruler")||!ae.isGeocoderEnabled()}function I(){L()||b()}function T(e){return"inside"==e.type?e.total:e.ids&&e.ids.length}function S(e){if(e)if(e.direction){var t="Tooltip_"+e.direction,n="Map_"+e.searchType;u.trackEvent("google",["RouteSearch",n,t])}else"bus"==e.searchType&&u.trackEvent("google",["RouteSearch","Map_bus","Tooltip_stop"])}function E(e){return Q?(ce.setRsKeypointByGeoPoint(e,ae.getZoom(),null,"fastSearch"),!0):!1}function P(e){return"poi"==a.get(e,"type")&&"branch"==a.get(e,"data.type")}function j(e){if(ae.isTooltipEnabled()){M();var n=a.first(e.ids);if(P(e)){var i=u.getFromPoiHash(n);i?e.poiHash=i:t.bssContext.startNewChain({pr:"poi"})}oe.get(e).then(function(i){if(t.broadcast("tooltip25:show",i),"firms"==i.type&&n)u.trackEvent("impression",[{branch_id:n,url:a.get(i,"data.reg_bc_url"),place:u.PLACE_MAP}]);else if(P(e)&&!u.getFromPoiHash(n)){var o=a.get(i,"data._hash");u.setNewPoiHash(n,o),m.processQueue(),u.trackEvent("impression",[{isPoi:!0,url:a.get(i,"data.reg_bc_url"),place:u.PLACE_MAP}])}})["catch"](a.noop)}}function M(){oe.stop(),t.broadcast("tooltip25:hide")}function A(e){return""+e.getLatLng()}function D(e){var n=A(e);clearTimeout(ie[n]),ie[n]=t.setTimeout(function(){ae.unfoldMarkerAd(e),u.trackEvent("google",["Map_Ads","Ad_BC",t.searchContext.read("query")]);var n=e.data||{};t.notify("firmAdUnfolded",[n.ad.reg_bc_url],u.PLACE_MAP)},330)}function R(e){var n=A(e);clearTimeout(ie[n]),ie[n]=t.setTimeout(function(){ae.foldMarkerAd(e)},150)}function N(e,t){var n=["building","branch","attraction"];ae.highlightGeo&&-1==n.indexOf(t)&&ae.highlightGeo(e)}function B(e){ae.unhighlightGeo&&ae.unhighlightGeo(e)}function F(){if(!g.get("onlyAdsMushrooms"))return!1;var e=f.getSettings();return!(!e.map||!e.map.onlyAdsMushrooms)}function O(){ae.unhighlightAll&&ae.unhighlightAll()}function z(){var e=f.getSettings();return e.map&&e.map.mapAdsEnabled}function q(e){a.each(de,a.partialRight(ae.unsuperizeMarker,e))}function U(e){function i(n){M(),a.each(de,function(t){a.contains(_,t)||ae.unsuperizeMarker(t,e)});var i=a.filter(n,"ads"),r=[],s=t.searchContext.read("query");a.each(_,function(e){var n,l=e.data,c=a.find(l.ids,function(e){return n=a.find(i,{id:o.getStaticId(e)}),n?e:!1});if(n){var d=ae.superizeMarker(c,n);d&&(r.push(e),a.contains(de,e)||(u.trackEvent("google",["Map_Ads","Ad_Show",s]),t.notify("firmAdDisplayed",[c],u.PLACE_MAP)))}}),de=r}function r(e,t){function n(e,i){for(var o=a.filter(e,function(e){var t=a.any(i,function(t){return ae.markersCanOverlap(e,t,"super")});return!t}),r=i,s=0;r.length<t&&s<o.length;){var l=a.compact(i.concat(o[s]));if(l.length<t&&s+1<o.length){var c=n(a.drop(o,s+1),l);l=c}r.length<l.length&&(r=l),s++}return r}return n(e,[])}if(g.get("mapAds")&&z()&&!F()&&"profiles"!=t.searchContext.read("type")){var l=n.panels.findLast("find");if(l&&l.house)return void q(e);var c=[405,207,205,192,347,356,384,526,508,15502,390],d=a.pluck(t.searchContext.read("contextRubrics")||[],"short_id");if(!a.intersection(d,c).length)return void q(e);var p=t.searchContext.read("closedMapAds"),f=ae.filterMarkerGroup("firms",function(e){var t=e.data,n=a.contains(p,t.id);if(n)return!1;var i=$(e._icon).hasClass("_general_commercial");return i}),m=ae.getVisibleMarkers(f,"super"),_=r(m,2),v=a.map(_,function(e){var t=e.data;return o.getStaticId(t.id)}),y=t.searchContext.read("firmAds")||{},b=a.keys(y),k=a.filter(v,function(e){return!a.contains(b,o.getStaticId(e))});if(k.length){var w=s.firms.profilesAds(k,{},function(e,n){e||(y=a.reduce(n.data,function(e,t){return e[t.id]=t,e},y),t.searchContext.write("firmAds",y),i(a.values(y)))});h.add(w,"mapAds",!0)}else i(a.values(y))}}function H(e){if(!e.group)return null;var t=a.find(e.group,{type:"branch"});return t}function G(e){var i=n.shouldBeMediaMode();if(g.get("ginzaProject")){var o=a.get(e.marker,"data.projectGinza");o&&(n.set("clickedGinzaMarker",{}),t.bssContext.startNewChain({pr:"special"}))}u.setPlaceMap();var r=e.marker&&e.marker.data&&e.marker.data.markerType;"recovery"==r&&u.trackEvent("google",["Recovery","Marker","Click"]);var l=H(e.data);if(1==a.size(e.ids)&&l)t.notify("trackMarkerClick",e),t.regInterests(),t.bssContext.continueChain(),t.notify("firmDetails",{id:l.id,media:i,bss:e.bss,lon:a.get(e,"data.lon"),lat:a.get(e,"data.lat"),initedId:e.ids[0]});else if("firms"==e.type||"booklet"==e.type||"branch"==a.get(e,"data.type"))if(t.notify("trackMarkerClick",e),t.regInterests(),1===e.ids.length){a.get(e,"data.isFavoriteMarker")&&t.bssContext.startNewChain({pr:"favorite"});var c={id:e.ids[0],name:e.data.name_ex&&e.data.name_ex.primary,media:i,bss:e.bss};a.isEmpty(e.data.group)||(c.lon=a.get(e,"data.lon"),c.lat=a.get(e,"data.lat")),t.notify("firmDetails",c)}else e.data&&e.data.isInbuild?t.notify("firmsInBuildClicked",e.data.building_id):e.data&&s.firms.bare(e.ids[0],{},function(n,a){n?t.notify("showNoResults"):t.notify("showFirmList",a.address.building_id,e.ids)});else t.notify("markerClick",e)}function W(){t.isClient&&(n.get("from")||n.get("to"))&&ce.setRsKeypointByState({from:null,to:null})}function V(){t.isClient&&ce.setRsKeypointByState({from:n.get("from"),to:n.get("to")})}function Z(e){ne.done(function(){ae.showGeolocationMarker(e)})}function Y(){ne.done(function(){ae.hideGeolocationMarker()})}function K(){ae.on("markerAdClose click",function(e){var n=t.searchContext.read("closedMapAds")||[];n.push(e.data.id),t.searchContext.write("closedMapAds",a.uniq(n)),u.trackEvent("google",["Map_Ads","Ad_Close",t.searchContext.read("query")]),ae.unsuperizeMarker(e.marker)}),ae.on("markerAd click",function(e){var n=e;e.data&&e.data.ad&&(n=a.extend({},e,{ids:[e.data.id],bss:{ill:1}}),u.trackEvent("google",["Map_Ads","Ad_Click",t.searchContext.read("query")])),G(n)}),ae.on("marker click",function(e){t.notify("imitationInputBlur"),e.data&&e.data.ad&&u.trackEvent("google",["Map_Ads","Ad_Click_Marker",t.searchContext.read("query")]),G(e)}),ae.on("markerAdHovered",function(e){D(e.marker),t.notify("markerHovered",e)}),ae.on("markerAdUnhovered",function(e){R(e.marker),t.notify("markerUnhovered",e)}),ae.on("markerHovered",function(e){e.count||(e.count=T(e.marker)),t.notify("markerHovered",e),j(e)}),ae.on("markerUnhovered",function(e){t.notify("markerUnhovered",e),M()}),ae.on("somethingHovered",j),ae.on("somethingUnhovered",M),ae.on("hideAllMarkers",function(){M()}),ae.on("showAllMarkers",function(){t.onNextFrame(U),t.notify("visibleMarkersChanged")}),ae.on("legMouseover",function(e){j(e),t.notify("legMouseover",e.layer.data)}),ae.on("legMouseout",function(e){M(),t.notify("legMouseout",e.layer.data)}),ae.on("waypointMouseover",function(e){j(e),S(e.data)}),ae.on("waypointMouseout",M),ae.on("locationfound",function(e){t.notify("geoLocationFound",e)}),ae.on("locationerror",function(e){t.notify("geoLocationError",e)}),ae.on("dgPoiClick",function(e,n){u.setPlaceMap(),M(),w(function(){if(!E(n)){u.trackEvent("google",["Map","Click","POI"]),u.trackEvent("yandex",["MAP_POI"]);var i=a.get(e,"meta.linked",{});return"building"==i.type&&g.get("floors")&&v.hasBuilding(i.id)?(u.setPlaceMap(),t.bssContext.startNewChain({pr:"poi"}),t.notify("floors",v.getByBuildingId(i.id),{isOpenedFromPoi:!0}),void u.trackEvent("googleFloors",["Floors_Enter","POI_Click"])):void p.geoClicker({action:"poi",data:i,point:n,isPhone:t.ua().isPhone,zoom:ae.getZoom()}).then(function(e){"branch"==e.type&&(u.getFromPoiHash(e.id)||t.bssContext.startNewChain({pr:"poi"})),t.notify("openCard",e)})}})}),ae.on("routeSearchKeypointDragEnd",function(e,t){ce.setRsKeypointByGeoPoint(e,ae.getZoom(),t,"move")}),ae.on("map click",x),ae.on("map unclick",I),ae.on("mousedown",function(){t.notify("mousedown")}),ae.on("zoomstart",function(){M()}),ae.on("zoomChange",function(e,t){re.checkLevel(t),ae.redrawRoutes(),ae.redrawParking(e),X()}),ae.on("positionChanged",function(e,a){if(a=i(a).toFixed(),!a.equals(n.getCenter())||ae.getZoom()!=n.getZoom().zoomlevel){var o=e.isOur?e.historyAction:"pushFromMap";o&&(n.changeCenter(a),n.changeZoom(ae.getZoom()),t.isGrym&&n.setAngle(ae.getAngle()),setTimeout(function(){n[o]()},0))}}),ae.on("clickParking",function(e,n){t.notify("openCard",{id:n.id,type:"geo"})}),ae.on("clickStationPlatform",function(e,n,i){t.notify("imitationInputBlur"),a.contains(["metro","light_metro"],n)?t.notify("stationSelected",{id:i.station_id,subtype:n}):t.notify("platformDetails",{id:i.id})}),ae.on("autoLocationHide",Y),ae.on("autoLocationShow",Z),ae.on("dragGeneral",function(){M()}),ae.on("startFly",function(){t.notify("startFly");var e=n.get("ruler");a.isEmpty(e)||(ue.refreshRuler(),ue.initRuler([]))}),ae.on("endFly",function(){t.notify("endFly");var e=n.get("ruler");a.isEmpty(e)||ue.initRuler(e)}),a.isFunction(ae.bound)&&ae.bound()}function X(){var e;e=g.get("dotMarkers3")?y(ae.getZoom())+"Dots":"none",t.mod({markersSize:e}),t.mod({oldPin:!0})}var J;J=e(t.isGrym?"./carto/cartoImpl":t.isServer?"./mapDummy":"./leafletImpl");var Q,ee,te={},ne=r(),ae=t.invoke(J,[t]),ie={},oe=p.tooltips(),re=t.invoke(e("./mapOptionUtils"),[t,ae]),se=e("./areaUtils")(t,ae),le=e("./markerUtils")(t),ce=e("./routeSearchUtils")(t,ae),ue=e("./rulerUtils")(ae,w,n,u),de=[],he={init:function(e,a){te=e;var i=t.registry("map");i.slot=t,i.instance=he,i["interface"]=he["interface"],t.isClient&&(ae.init(t.block()[0],re,n),X()),a()},clientInit:function(){var e=t.init("tooltip25");t.block().append(e.render()),!te.to&&!te.from||n.inGlobal()||ce.setRsKeypointByState(te),K(),te.ruler&&ue.initRuler(te.ruler)},changeState:function(e){var o=i(ae.getCenter()).toFixed();e.mapcenter&&!t.isGrym&&(e.mapcenter.lon||(e.mapcenter.lon=o.lon),e.mapcenter.lat||(e.mapcenter.lat=o.lat),o.equals(e.mapcenter)||(ae.registerOurChange(null),ae.setViewportCenter(n.getCenter(),e.zoom?e.zoom.zoomlevel:ae.getZoom()))),e.zoom&&e.zoom.zoomlevel!=ae.getZoom()&&ae.setViewportCenter(n.getCenter()||o,e.zoom.zoomlevel),"ruler"in e&&ue.refreshRuler(e.ruler),("to"in e||"from"in e)&&(ce.setRsKeypointByState(e),n.get("from")&&n.get("to")&&he["interface"].switchRsMode(!1)),"mapcenter"in e&&(t.onNextFrame(function(){U("zoom"in e)}),t.notify("visibleMarkersChanged")),"city"in e&&(a.isFunction(ae.setCityLimits)&&ae.setCityLimits(),e.city.passive||he["interface"].setDefaultRegionView(e.zoom&&e.zoom.zoomlevel,e.mapcenter)),u.trackEvent("googleCustom",["Zoom",ae.getZoom()])},elements:{map:{}},viewAttrs:{tabIndex:10,id:"map"},"interface":{setDefaultRegionViewById:function(e){a.isFunction(ae.setDefaultRegionViewById)&&ne.done(function(){ae.setDefaultRegionViewById(e)})},setDefaultRegionView:function(e,t){a.isFunction(ae.setDefaultRegionView)&&ne.done(function(){ae.setDefaultRegionView(e,t)})},enterGlobal:W,exitGlobal:V,drawMarkers:function(e,n,i){var o=e.result,r=e.mode,s=e.type;n=n||"zoomout",ne.done(function(){var l=le.getMarkersObjects(o,r,"inbuild"==s);l=a.filter(l,function(e){var t=ae.markerIsNeeded(e,s);return t&&e.recovery&&u.trackEvent("google",["Recovery","Marker","Show"]),t}),t.mod({onlyAdsMushrooms:F()&&"firms"==r}),ae.drawMarkers(l,r,function(){if(t.isGrym||(ae.readyToAddMultiLabels(),ae.readyToAddViatalLabels()),!e.notZoomMap){var o=a.filter(l,"vital");a.isEmpty(o)&&(o=a.reject(l,"recovery")),i||ae.fitObjects(o,n)}})})},clearMarkersGroup:function(e){ne.done(function(){M(),O(),t.mod({onlyAdsMushrooms:!1}),ae.clearMarkersGroup(e)})},drawMarker:function(e){ne.done(function(){var i=le.getDrawId(e,n.getActiveTab());if(ae.drawMarker(i,e,{mode:le.getMode(e)}),e.seeAlsoGeometries&&a.each(e.seeAlsoGeometries,function(e){ae.drawRecoveryMarker(e)}),t.registry.get("findOne")===!0){var o=t.isGrym?e.id:e.point;!o&&e.geometry&&e.geometry.centroid&&(o=l.parseObject(e.geometry.centroid).geometry),o&&(ae.focusPoint(o),t.registry.set("findOne",!1))}U()})},clearMarker:function(e){ne.done(function(){M(),O();var t=le.getDrawId(e,n.getActiveTab()),i=le.getMode(e);ae.clearMarker(t,i),e.seeAlsoGeometries&&a.each(e.seeAlsoGeometries,function(e){ae.clearRecoveryMarker(e)})})},drawGeolocationMarker:function(e){ne.done(function(){ae.drawGeolocationMarker(e)})},hideGeolocationMarker:Y,showGeolocationMarker:Z,updateGeolocationMarker:function(e){ne.done(function(){ae.updateGeolocationMarker(e)})},clearGeolocationMarker:function(){ne.done(function(){ae.clearGeolocationMarker()})},traffic:ae.toggleTrafficLayer,setReadyDraw:function(){ne.resolve()},focusPoint:function(e,t){ne.done(function(){ae.focusPoint(e,t)})},focusGeo:function(e){ne.done(function(){ae.focusGeo(e)})},focusModel:function(e,t){"resolved"==ne.state()&&ae.focusModel(e,t)},setCenter:function(e){ae.setCenter(e)},getCenter:function(){return ae.getCenter()},setView:function(e,t){ae.setView(e,t)},highlightGeo:N,unhighlightGeo:B,highlightObject:function(e,t){ae.highlightMarker(e),N(e,t)},unhighlightObject:function(e){ae.unhighlightMarker(e),B(e)},highlightRecoveryMarker:function(e){ae.highlightRecoveryMarker(e)},unhighlightRecoveryMarker:function(e){ae.unhighlightRecoveryMarker(e)},convertPixelToLonLat:function(e){return ae.convertPixelToLonLat(e)},zoomIn:ae.zoomIn,zoomOut:ae.zoomOut,trafficControlOn:function(){ae.toggleTrafficLayer(!0)},trafficControlOff:function(){ae.toggleTrafficLayer(!1)},highlightGeoCard:function(e){ne.done(function(){se.highlightAreaCard(e,ae.getZoom())})},drawExtraLayers:function(e){ne.done(function(){ae.drawExtraLayers(e)})},drawFavorites:function(e){ne.done(function(){ae.drawFavorites(e)})},drawApartments:function(e){ne.done(function(){ae.drawApartments(e)})},clearApartments:function(){ne.done(function(){ae.clearApartments()})},superizeMarkers:U,highlightFavorites:function(e){ne.done(function(){ae.highlightFavorites(e)})},unhighlightFavorites:function(e){ne.done(function(){ae.unhighlightFavorites(e)})},clearGeoCard:function(e){ae.clearGeomsCard(e)},showEntrance:function(e,t){ne.done(function(){ae.showEntrance(e,t)})},hideEntrances:function(){ne.done(ae.hideEntrances)},routeShow:function(e,t){ne.done(function(){ae.routeShow(e,t)})},clearRoutes:function(){ne.done(function(){ae.clearRoutes()})},togglePlatformMarker:ae.togglePlatformMarker,changeActiveDirection:function(e){ae.changeActiveDirection(e)},rotate:function(e){t.isGrym&&ae.rotate(e)},toggleViewportLimits:function(){ae.toggleViewportLimits&&ae.toggleViewportLimits()},toggleShowParkingsMode:function(e,t,n){ae.toggleShowParkingsMode&&ne.done(function(){ae.toggleShowParkingsMode(e,t,n)})},segmentFocus:ae.segmentFocus,focusWholeRoute:ae.focusWholeRoute,segmentHover:ae.segmentHover,setRsKeypoint:function(e){ne.done(function(){ce.setRsKeypointByState(e||{})})},clearRsKeypoint:function(){ne.done(function(){ae.clearRsMarkers()})},drawRouteSearch:function(e,t){ne.done(function(){ae.drawRouteSearch(e,t),M(),ae.on("legChanged",C)})},clearRouteSearch:function(){ne.done(function(){ae.clearRouteSearch(),ae.removeListener("legChanged",C)})},defaultPosition:ae.defaultPosition||a.noop,switchRsMode:function(e){Q=n.get("to")&&n.get("from")?!1:e},disableMapCentering:function(e){ae.disableMapCentering(e)},updateGeoPosition:function(e,t){if(e){var n=e.zoom,a=ae.calculateViewportCenter(e,n);ae.hideEntrances(),ae.moveTo(a,n,t)}},enableGeolocation:function(e){ae.locate(e.positionOptions)},disableGeolocation:function(){ae.stopLocate()},setCursor:function(e){t.block().css("cursor",e)},setViewportLimits:function(){ne.done(function(){ae.setViewportLimits()})},initPrint:function(e){ae.enablePrintMode(),ae.onTileLoad(function(){window.parent.onPrintableReady&&window.parent.onPrintableReady()}),e&&e.singleMarker&&t.mod({onlyCzar:!0})},stopDrag:function(){var e=t.block(),n=new MouseEvent("mouseup",{view:window,bubbles:!0,cancelable:!0});e[0].dispatchEvent(n)},enableScrollWheelZoom:function(){ne.done(function(){ae.enableScrollWheelZoom()})},disableScrollWheelZoom:function(){ne.done(function(){ae.disableScrollWheelZoom()})}}};return he},t.exports._args=["slot","$appState","$defer","$dgApi","$wkt","$regionManager","$analytics","$routeSearchStore","$requestGroups","$models","$i18n","$bssContext","$featureSwitcher","$localStorage","$floorsManager"]},{"./areaUtils":242,"./carto/cartoImpl":243,"./leafletImpl":278,"./mapDummy":279,"./mapOptionUtils":280,"./markerUtils":282,"./routeSearchUtils":283,"./rulerUtils":284,lodash:"lodash"}],"/modules/mediaActions/mediaActions.js":[function(e,t,n){var a=e("lodash");t.exports=function(t,n,i){function o(){!r&&t.element("actionsItemTitle").seeable(.5)&&(r=!0,t.notify("showDiscountsTitle"))}var r;return{init:function(n,a){i.getDiscounts({branchId:n.id}).then(function(i){t.notify("gotDiscounts",i);var o=e("./viewModel.js");t.viewContext=t.invoke(o,[n,i]),a()})["catch"](function(e){a(e)})},bind:o,elements:{actionsItem:{click:function(){t.notify("actionsItemClick")}}},"interface":{checkDiscountsSeeability:a.debounce(o,500)}}},t.exports._args=["slot","$bookletApi","$discountsApi"]},{"./viewModel.js":285,lodash:"lodash"}],"/modules/mediaAddress/mediaAddress.js":[function(e,t,n){var a=e("lodash");t.exports=function(t,n,i,o){var r,s,l=e("./viewModel.js"),c=[],u={init:function(e){r=Object.freeze(a.cloneDeep(e)),s=t.viewContext=t.invoke(l,[e])},clientInit:function(){t.element("stations").length&&(a.each(t.element("stationsItem"),function(e){var n=$(e).find(t.element("stationsItemLabel")),a=n.data("type");c.push(a)}),o.trackEvent("google",["Media_Card_event","Stop_Show",(c||[]).join(",")])),t.element("panorama").length&&o.trackEvent("google",["Media_Card_event","Build_Photos","Show"])},elements:{address:{click:function(e){e.preventDefault(),e.stopPropagation(),$(this).mod().notClickable||(o.trackEvent("google",["Media_Card_event","Address"]),t.notify("clickAddress"))}},buildingName:{click:function(e){e.stopPropagation(),t.notify("clickAddress")}},facilities:{click:function(){t.notify("photosClicked",{id:r.id,albumName:"facilities"}),o.trackEvent("google",["Media_Card_event","Build_Photos","Click"])}},parkings:{click:function(){$(this).mod().disabled||t.notify("parkingsClicked",r)}},panorama:{click:function(){t.notify("photosClicked",{title:r.name,subtitle:s.address,id:r.id,albumName:"view"}),o.trackEvent("google",["Media_Card_event","Build_Photos","Click"])}},stationsItemLabel:{click:function(e){e.preventDefault();var n=$(this).data("id");n&&(t.notify("nearStationClicked"),i.transport.station(n,function(e,n){t.notify("nearStationSelected",r,n)}),o.trackEvent("google",["Media_Card_event","Stop",$(this).data("type")]))}}},"interface":{notFoundParkings:function(){var e=t.element("parkings");e.text(n._t("Нет информации о парковках")),e.mod({disabled:!0})}}};return u},t.exports._args=["slot","$i18n","$dgApi","$analytics"]},{"./viewModel.js":286,lodash:"lodash"}],"/modules/mediaAdvantages/mediaAdvantages.js":[function(e,t,n){t.exports=function(t){var n,a=e("./viewModel.js");return{init:function(e){n=e},viewContext:function(){return t.invoke(a,[n])}}}},{"./viewModel.js":287}],"/modules/mediaAttributes/mediaAttributes.js":[function(e,t,n){t.exports=function(t,n){return{inheritBssHash:!0,init:function(n){var a=e("./viewModel");t.viewContext=t.invoke(a,[n])},"interface":{setColumnsLengthModifier:function(e){t.mod({columns:e})}},elements:{rubricsItem:{click:function(e){e.preventDefault();var a=$(this).data("id"),i=$(this).text();a&&i&&(t.bssContext.startNewChain({pr:"rubric"}),t.notify("rubricClicked",{id:a,name:i})),n.trackEvent("google",["Media_Card_event","Rubric_click",i])}}}}},t.exports._args=["slot","$analytics"]},{"./viewModel":288}],"/modules/mediaCard/mediaCard.js":[function(e,t,n){"use strict";var a=e("lodash"),i=e("moment"),o=e("async"),r=e("./ginzaIds.js");t.exports=function(t,n,s,l,c,u,d,h,p,f,m,g,_,v){function y(e,t){C(e,function(n,a){return n?void t(n):(le=a,e.address&&(le.connectionAddress={address:e.address,buildingId:e.buildingId}),void o.parallel([k,x,b],function(){return w(t)}))})}function b(e){Re.getWinnersIds().then(function(n){le.isAwardWinner=a.includes(n,Pe.getStaticId(le.id))&&!t.isMausoleum,e()})["catch"](function(){e()})}function k(e){var t=a.get(le,"reviews.general_review_count");if(le.isMediaReviewsFeature=m.get("mediaCard.reviews"),le.canShowReviews=!!a.find(a.get(le,"reviews.items"),"is_reviewable",!0),!le.canShowReviews||!le.isMediaReviewsFeature||!t)return void e();var i=n.reviews(le.id,le);i.loadData().then(function(t){var n=a.get(t,"reviews");return a.isEmpty(n)?void e():(le.reviewsItems=n,void e())},function(){return e()})}function w(e){var t="firm",i={id:le.staticId||le.id};a.extend(i,{firmData:le,albumName:"common"}),"saunas"==le.bookletType&&(t="firmAndBooklet",a.extend(i,{bookletId:a.get(le,"bookletData.code"),bookletData:le.bookletData}));var o=n.photos({dataProvider:t});o.request(i).done(function(){le.photoModel=o,le.photos=o.photos.items,le.photosBcUrl=o.photos.reg_bc_url,e()}).fail(function(){e()})}function x(e){var n=Ee.getMediaFirmRubric(t.searchContext.context.contextIds,l,le),i=a.find(le.external_content,{type:"booklet"});i&&"net"==i.subtype&&(a.isNull(n)||"providers"==n)&&(le.defaultTab="tariffs",le.bookletType=i.subtype,t.mod({mediaType:i.subtype})),i&&"saunas"==i.subtype&&(a.isNull(n)||"saunas"==n)?p.getBooklet({bookletId:i.value},function(n,a){return n?e():(le.bookletData=a,le.bookletType=i.subtype,t.mod({mediaType:i.subtype}),e())}):e()}function C(e,t){e.name?t(null,e):s.firms.profile(ve,{},t)}function L(){se&&se.update()}function I(e){t.element("navigationItemName").mod({active:!1}),(a.find(le.menuItems,{active:!0})||{}).active=!1,t.element("navigation").find('[data-tab="'+e+'"]').mod({active:!0}),(a.find(le.menuItems,{id:e})||{}).active=!0}function T(e){var n=t.element("block").filter('[data-type="'+e+'"]'),a=t.element("content").offset().top,i=t.element("navigationWrapper").height(),o=t.element("scroller");o.scrollTop(n.offset().top-a-i)}function S(e){ce.hideAllVisibleBlocks(),t.element("photosUploaderControl").mod({active:!1}),ce.initTab(e,Be,function(n){n&&t.sendError("mediaCard tab init failed",n),t.setTimeout(function(){var i,o;if(!n){i=t.element("tabs").find('[data-id="'+e+'"]'),o=ce.getActiveTab();var r=a.has(o,"columnsLength")&&o.columnsLength!==Be;i.length&&!r||ce.renderTab(e,Be),o.columnsLength=Be}i=t.element("tabs").find('[data-id="'+e+'"]');var s=a.has(o,"needToLoadMore")&&o.needToLoadMore();if(s||Te.changeHeight(i,be),t.element("photosUploader").mod({hidden:!Me}),Me=!1,ce.showTab(e),"photos"!==e&&!a.get(le,"photos.length")){(a.find(le.menuItems,{id:"photos"})||{}).disabled=!0;var l=t.renderPartial("navigation",le);t.element("navWrapper").html(l)}Te.doCalcForCutting(),Ne.scrolled&&Ne.moduleId&&(T(Ne.moduleId),Ne={scrolled:!1,moduleId:""}),L()},200)})}function E(){var e=t.searchContext.getFilters(),n={};return a.each(e,function(e,t){n[t]=a.uniq((e+"").split(",")).join(",")}),n}function P(e,n){var i=ue.searchMode,o={page_size:t.config["WebApi.mediaPageSize"],page:e,full:!0};if("filials"===i)a.extend(o,{firmId:le.org.id}),s.searchByType("filials",o,function(t){U(t.data,e,n)});else{a.extend(o,{q:ue.query},a.pick(ue,"house"));var r=E();a.isEmpty(r)||(o.filters=r),"new"===ue.searchMode&&(o.opened_after_date=q()),s.searchByType("query/firms",o,t.ifAlive(function(t){U(t.data,e,n)}))}}function j(e){var n=A(),a=ue.items[n[0]],i=ue.items[n[1]],o=Math.floor(he/t.config["WebApi.mediaPageSize"])+1;if(i&&(a||1===o))return e([a,i]);var r=a?o+1:o-1;return P(r,function(){a=ue.items[n[0]],i=ue.items[n[1]],e([a,i])}),null}function M(e,n){var a=e&&e.name,i=n&&n.name;pe.mod({visible:!!a}),pe.find(t.element("arrowNavTitle")).text(a||""),fe.mod({visible:!!i}),fe.find(t.element("arrowNavTitle")).text(i||"")}function A(){return[he-1,he+1]}function D(e){_e&&ue.items[e]&&(t.notify("removeTopBarFixedMode"),_e=!1,$(document).off("keydown",z),u.trackEvent("google",["Media_Card_event","Navigate","Scroll"]),t.mod({visible:!1}),t.setTimeout(function(){var n=ue.items[e].id;t.notify("cardArrowClicked",{searchResults:ue,id:n,media:!0,transitionByClick:!0})},150))}function R(){t.init("mediaCardHeader",{model:le,columns:Be})}function N(){m.get("ginzaProject")&&-1!=a.indexOf(r,le.id)||a.values(le.see_also).length&&(me&&me.remove(),me=t.init("mediaRecoveryAds",{adFirms:le.see_also,analyticsPlace:u.PLACE_CATALOG,currentColumnsLength:Be}))}function B(e,n){e&&t.notify("minimizeViewer"),n=n||{},n.analyticsPlace=ge,t.setTimeout(function(){t.notify("pathFinderEntranceClicked",le,n)},400)}function F(){var e=a.find(le.external_content,function(e){return"plus_one"==e.type}),t=a.find(le.external_content,function(e){return"discount"==e.type});u.trackEvent("google",["Cards","Firm","Media"]),u.trackEvent("yandex",["CARD_FIRM_MEDIA"]),e&&u.trackEvent("google",["Media_Card_event","Plusone_Show",Pe.getMainRubric(le)]),t&&(u.trackEvent("google",["Media_Card_event","Discount","Discount_Show"]),u.trackEvent("google",["Discount","Media_card","Show_tab"])),le.address_name||u.trackEvent("google",["Media_Card_event","Address_Null"]),le.links&&le.links.entrances&&u.trackEvent("google",["Media_Card_event","Enter","Show"]),Pe.getReviewsNumber(le)||u.trackEvent("google",["Media_Card_event","Reviews","No_Up_reviews"]),!le.floors&&Pe.checkFloors(le,m,v)&&(v.hasBranch(Pe.getStaticId(le.id))?u.trackEvent("googleFloors",["Floors_Enter","Firm_Mall_Card_Button","Show"]):u.trackEvent("googleFloors",["Floors_Enter","Firm_Card_Button","Show"]))}function O(e,n,i){a.isFunction(e.onScroll)&&e.onScroll(n,i),a.result(e,"needToLoadMore")&&!t.mod().preloader&&n.scrollTop+n.clientHeight>n.scrollHeight-500&&(t.mod({preloader:!0}),e.loadMore(function(){ce.renderNewBlocks(e.id),t.mod({preloader:!1})}))}function z(e){if(37===e.which||39===e.which){e.preventDefault();var t=A(),n=37===e.which?t[0]:t[1];D(n)}}function q(){var e=i().subtract(3,"months");return e.format("YYYY-MM-DD")}function U(e,n,i){var o=(n-1)*t.config["WebApi.mediaPageSize"];a.each(e,function(e,t){ue.items[o+t]=e}),i(ue.items)}function H(){var e=["query","total","items","searchMode","house"],n={};return a.each(e,function(e){var a=t.searchContext.read(e);a&&(n[e]=a)}),n}function G(e){t.notify("mediaResizeStart",e)}function W(){ce.switchTab("discount"),le.reg_bc_url&&t.notify("mediaDiscountsClicked",{place:ge,reg_bc_url:le.reg_bc_url})}function V(e){if(!e){var n=t.notify("isMediaMode");e=n?Se.getColumnsNumberToShow("mediaCard",t.ua(),h,window):Se.getViewportColumnsNumber("mediaCard",window)}Be=e,t.mod({columns:e}),t.broadcast("*:setColumnsLengthModifier",e)}function Z(){var e=d.panels.get("find");e.media&&t.element("resizeButton").mod({visible:!0})}function Y(e){switch(ce.getActiveTab().columnsLength=Be,ce.switchTab(e),e){case"reviews":t.notify("firmReviewClicked",{place:ge,reg_bc_url:le.reg_bc_url});break;case"discount":t.notify("mediaDiscountsClicked",{place:ge,reg_bc_url:le.reg_bc_url});break;case"photos":t.notify("switchToPhotosTab",{place:ge,reg_bc_url:le.reg_bc_url});break;case"advantages":t.notify("ownerInfoClick",{place:ge,reg_bc_url:le.reg_bc_url})}a.contains(["reviews","discount"],e)&&t.notify("trackedAnalyticsTabClicked",e)}function K(){var e="tariffs";ce.reinitTab(e,Be,function(t){t||(ce.renderTab(e,Be),ce.showTab(e))})}function X(){fe&&pe&&a.isNumber(he)&&(pe.mod({visible:!pe.mod().visible}),fe.mod({visible:!fe.mod().visible}))}function J(){var e=!!a.find(le.external_content,{type:"discount"}),n=Ee.getMediaFirmRubric(t.searchContext.context.contextIds,l);if(le.menuItems=[{id:"about",title:"providers"==n?c._gg("О провайдере"):c._t("О заведении"),disabled:!1},{id:"photos",title:c._t("Фото"),disabled:!(a.get(le,"photos.length",0)>0),amount:a.get(le,"photos.length")}],le.isMediaReviewsFeature){var i=Pe.getReviewsNumber(le);le.menuItems.push({id:"reviews",title:c._t("Отзывы"),disabled:!(i&&le.canShowReviews),amount:i})}if(le.menuItems.push({id:"discount",title:c._t("Скидки"),disabled:!e,amount:a.get(le,"actionsAmount")}),a.has(le,"ads.article")&&le.menuItems.push({id:"advantages",title:c._t("Преимущества"),disabled:!1}),"saunas"==le.bookletType){var o=a.get(le,"bookletData.modules.rooms",[]).length;if(o>1){var r=a.find(le.menuItems,{id:"about"});r.title=c._t("О сауне");var s={id:"rooms",title:c._t("Номера"),amount:o,disabled:!1};le.menuItems=a.reject(le.menuItems,{id:"about"}),le.menuItems=[r,s].concat(le.menuItems)}}if("net"==le.bookletType){var u={id:"tariffs",title:c._t("Тарифы"),disabled:!1};le.menuItems.unshift(u)}}function Q(e){return a.find(le.menuItems,{id:e,disabled:!1})}function ee(e){(a.find(le.menuItems,{id:"photos",disabled:!0})||{}).disabled=!1;var n=t.renderPartial("navigation",le);t.element("navWrapper").html(n),ne(!0),e&&(t.element("photosUploaderControl").mod({active:!1}),T("photosUploader"))}function te(e){g.isAuthorized()?ee(e):(Ae=!0,De=e,t.notify("showPhotosAuthPopup"))}function ne(e){return e?void("photos"==ce.getActiveTab().id?t.element("photosUploader").mod({hidden:!1}):(Me=!0,t.ua().isMobile&&(Ne={scrolled:!0,moduleId:"photosUploader"}),ce.switchTab("photos"))):(Me=!1,void t.element("photosUploader").mod({hidden:!0}))}function ae(){Ae&&(Ae=!1,ee(De),u.trackEvent("google",["Photos","Auth","Success"]))}function ie(){Ae=!1}function oe(){ne(!1)}function re(e){var n=a.find(le.menuItems,{id:"reviews"});n&&(n.amount=e,t.isClient&&t.rerenderPartial("navWrapper","navigation",le))}var se,le,ce,ue,de,he,pe,fe,me,ge,_e,ve,ye,be,ke,we,xe,Ce=p.providers,Le=e("./viewModel.js"),Ie=e("./tabsManager"),Te=e("./tabHeightHelper.js")(t),Se=req("helpers/discreteFrame"),Ee=req("helpers/mediaCard"),Pe=req("helpers/firm"),je=_.get("isSearchBot"),Me=!1,Ae=!1,De=!1,Re=n.award({regionId:l.getRegion().id}),Ne={scrolled:!1,moduleId:""},Be=2,Fe=a.once(function(){le&&le.reg_bc_url&&(t.notify("firmDisplayed",[{id:ve,url:le.reg_bc_url}],ge),t.notify("firmClicked",{place:ge,reg_bc_url:le.reg_bc_url}))}),Oe=a.throttle(function(e){t.broadcast("mediaActions:checkDiscountsSeeability"),e.scrollTop>0?t.notify("addTopBarFixedMode"):t.notify("removeTopBarFixedMode");var n=ce.getActiveTab();Te.cut(n),L(),O(n,e,{contentTopHeight:xe,trackOffset:ke,contentTopOffset:we})},50),ze={inheritBssHash:!0,init:function(e,n){t.ua().isPhone||t.notify("hideSearchBar"),ge=e.analyticsPlace||u.getPlace()||u.PLACE_CATALOG,ve=e.id,!t.registry.get("bssFromOtherTab")&&t.registry.get("isInit")?t.bssContext.startNewChain({pr:"link"}):a.get(d,"state.isFromHistory")&&ve==Pe.getStaticId(ve)&&t.bssContext.startNewChain({pr:"back_in_browser",updateContext:!0}),y(e,function(i){if(i)return void n(i);ue=H(),de=ue&&ue.total>=2,de&&(he=a.findKey(ue.items,function(e){return-1!==e.id.indexOf(le.id)}),he=he?parseInt(he,10):null,e.transitionByClick&&t.mod({visible:!1})),t.isClient&&V(),J();var o=d.getMediaCardTab();o&&!Q(o)&&(o=void 0),je&&t.init("jsonld",{model:le,type:"firmcard"}),m.get("photosUploader")&&(le.photosUploaderAvailable=!0),ce=t.invoke(Ie,[t,le]),ce.initTab(o,Be,function(e){
e&&t.sendError("mediaCard tab init failed",e),le.activeTab=ce.getActiveTab(),d.getMediaCardTab()&&d.getMediaCardTab()!=le.activeTab&&(d.changeMediaCardTab(le.activeTab.id),d.push()),t.notify("inited"),R(),N(),n()});var r=a.get(le,"rubrics[0].name");f.set(r,"panels")}),u.trackEvent("inspectlet",[{Firm_Card:"Media"}])},viewContext:function(){return t.invoke(Le,[le,t])},bind:function(){se=t.element("scroller").baron({bar:".mediaCard__track .track__bar"}),ke=t.element("track").offset().top,we=t.element("contentTop").offset().top,xe=t.element("contentTop").outerHeight(),a.isNumber(he)&&(pe=t.element("arrowNavLink").filter("._type_prev"),fe=t.element("arrowNavLink").filter("._type_next"),t.notify("arrowsShown"),j(function(e){_e=!0,M(e[0],e[1]),t.element("arrowNav").mod({visible:!0})})),de&&t.mod({visible:!0});var e=ce.getActiveTab();a.isFunction(e.onRender)&&e.onRender()},clientInit:function(){F();var e=ce.getActiveTab();t.ua().isPhone||e.doMasonry(Be),e.clientInit&&e.clientInit(),B(!1,{onInit:!0,mute:!0,movingType:"notMove"}),t.mod({visible:!0}),Z(),g.on("loginComplete",ae),g.on("logoutComplete",oe)},dispose:function(){f.deleteLastByType("panels"),g.off("loginComplete",ae),g.off("logoutComplete",oe)},"interface":{tabType:"firms",activateContent:function(){t.mod({hidden:!1}),t.notify("activated"),t.notify("updateTabsData"),t.isClient&&t.setTimeout(Fe)},drawOnMap:function(){le.address&&le.address.building_id&&t.notify("mapDataReady",le,ye)},clearMap:function(){t.notify("clearMap",le,ye)},setSeoParams:function(){var e=Pe.prepareForSeo(le),n=ce.getActiveTab();return n.id!=ce.getDefaultTab()&&(e.tab=n.id),t.notifySeoParams(e),t.notify("updateSeo"),!0},dissolve:function(){t.mod({visible:!1})},appear:function(){t.mod({visible:!0})},mediaResize:function(e){if(e!==Be){L(),V(e);var n=ce.getActiveTab(),i=a.every(n.blocks,"rendered",!0);i&&!t.ua().isPhone&&n.doMasonry(Be,!0),n.columnsLength=Be,n.resize&&n.resize(e),L(),t.notify("mediaColumnsWasSet"),t.broadcast("mediaRecoveryAds:setColumnsLength",e)}},parkingsResult:function(e){e||t.broadcast("mediaAddress:notFoundParkings")},openSendEmailForm:function(){t.notify("openSendEmailForm",le)},authCancel:ie,reviewsCountChanged:re},elements:{resizeButton:{mousedown:G},scroller:{scroll:function(){Oe(this)}},workingPeriod:{click:function(){var e=ce.getActiveTab();"about"!==e.id?ce.switchTab("about",function(){Ne={scrolled:!0,moduleId:"mediaSchedule"}}):T("mediaSchedule")}},photosArrayItem:{click:function(){Y("photos",!0),u.trackEvent("google",["Photos","Show_gallery"]),u.trackEvent("google",["Media_Card_event","Photos",Pe.getMainRubric(le)])}},photosUploaderControl:{click:function(){$(this).mod().active&&(u.trackEvent("google",["Photos","Controls","Add"]),te(!0))}},photosUploader:{selector:".mediaCard__tab [data-type='photosUploader']"},photosCount:{click:function(){Y("photos",!0)}},navigationItemName:{click:function(e){e.preventDefault();var n=$(this).data("tab");if($(this).mod().disabled)return void("photos"==n&&t.notify("showPhotosUploaderTooltip",{type:"firm",tooltipData:{sourceElement:$(this),clickHandler:function(){te(!0)}}}));if(be=t.element("wrapper").offset().top,"photos"==n&&u.trackEvent("google",["Media_Card_event","Photos_Tab",Pe.getMainRubric(le)]),"reviews"==n){var i=m.get("reviews.forAllFilials")&&le.org.branch_count>1;i?u.trackEvent("google",["Reviews","Open",a.get(le,"reviews.is_org_reviews",!1)?"All":"Branch"]):u.trackEvent("google",["Reviews","Open","Alone"])}Y(n)}},activeTab:{selector:".mediaCard__tab._active"},footerBugReportLink:{click:function(){t.notify("bugReportLinkClicked",le),u.trackEvent("google",["Media_Card_event","Error_click"])}},arrowNavLink:{click:function(e){e.preventDefault();var t=$(this).mod().type,n=A(),a="prev"===t?n[0]:n[1];D(a)}},footerOwnerLink:{click:function(){u.trackEvent("google",["Media_Card_event","Owner"])}},footerAdvLink:{click:function(){u.trackEvent("google",["Media_Card_event","Advertisement","Your_adv"])}},reviewsFor:{click:function(){if(!$(this).mod().active){t.element("reviewsFor").mod({active:!1}),$(this).mod({active:!0});var e="filials"==$(this).data("for");t.broadcast("mediaCardHeader:setAllFilials",e),le.allFilials=e,ce.setModel(le),ce.reinitTab("reviews",Be,function(){ce.renderTab("reviews",Be),ce.showTab("reviews")}),u.trackEvent("google",["Reviews","Switch",e?"All":"Branch"])}}}},dispatcher:{"*:clickAddress":function(){B(!0,{mute:!0}),t.notify("addressClicked",le,{analyticsPlace:ge})},"mediaCardHeader:showAdvantagesBlock":function(){t.notify("ownerInfoClick",{place:ge,reg_bc_url:le.reg_bc_url}),Ne={scrolled:!0,moduleId:"mediaAdvantages"},ce.switchTab("advantages")},"mediaCardHeader:showEntrance":B,"mediaPhotoSlider:click":function(e){"mediaCard"==e.type&&(Y("photos",!0),u.trackEvent("google",["Media_Card_event","Photos",Pe.getMainRubric(le)]))},"mediaAddress:parkingsClicked":function(){ye=!0,t.ua().isPhone&&t.notify("minimizeViewer")},"mediaActions:gotDiscounts":function(e){le.actionsAmount=e.length},"mediaCardHeader:navigateToPhotos":te,"mediaContacts:showPhoneClick":function(){u.trackEvent("google",["Media_Card_event","Phone"])},"mediaContacts:phoneClicked":function(){u.trackEvent("google",["Media_Card_event","P2D"])},"mediaContacts:sendEmailLinkClicked":function(){le.reg_bc_url&&t.notify("sendEmailClicked",{place:ge,reg_bc_url:le.reg_bc_url})},"mediaReview:clickReviewsTotal":function(){ce.switchTab("reviews"),le.reviews&&le.reviews.reg_bc_url&&t.notify("firmReviewClicked",{place:ge,reg_bc_url:le.reg_bc_url})},"mediaReview:lastTextMoreClicked":function(){le.reviews&&le.reviews.reg_bc_url&&t.notify("firmReviewClicked",{place:ge,reg_bc_url:le.reg_bc_url})},"mediaActions:clickShowAll":W,"mediaActions:actionsItemClick":W,"mediaDiscount:sendSmsClicked":function(){t.notify("sendBySmsClicked",{place:ge,reg_bc_url:le.reg_bc_url})},"*:filialsClick":function(){var e=d.panels.get("find")||{};t.bssContext.startNewChain({pr:"filial"}),t.notify("branchesClick",{id:le.org&&le.org.id,query:ue&&ue.query||e.query,media:e.media,place:ge,reg_bc_url:le.reg_bc_url})},"mediaRoomCard:photoClick":function(e){t.notify("photosClicked",{photosType:"booklets",id:le.bookletData&&le.bookletData.code,room:e.roomId,photoId:e.photoId,reg_bc_url:le.reg_bc_url,place:ge},ge)},"patchwork:itemClicked":function(e){t.notify("photoClicked",{id:le.id,bookletId:a.get(le,"bookletData.code"),photoId:e})},"checkConnectionWidget:addressFound":function(e){le.checkConnectionData=a.clone(e);var n=a.get(le,"org.id");Ce.searchTariffs({geoid:e.geoid,providerId:n},function(e,n){var i=!a.isEmpty(n);t.broadcast("checkConnectionWidget:showResultMessage",i),i||t.broadcast("providerRequestForm:notConnected"),t.broadcast("providerTariffs:setTariffs",n)})},"checkConnectionWidget:addressNotFound":function(){le.checkConnectionData=null,t.broadcast("providerTariffs:setTariffs",[])},"checkConnectionWidget:reset":function(){var e=a.get(le,"org.id");Ce.searchTariffs({providerId:e},function(e,n){t.broadcast("providerTariffs:setTariffs",n)})},"providerRequestForm:showTariffs":function(){ce.switchTab("tariffs")},"photosUploader:previewsLoaded":function(e){t.broadcast("patchwork:previewsLoaded",e)},"photosUploader:photoUploadFinished":function(e){e.isUploadedFailed||le.photos.push(e),t.broadcast("patchwork:photoUploadFinished",e)},"patchwork:updateDimensions":function(e){var t=ce.getActiveTab();"photos"==t.id&&t.updateDimensions(e)}},changeState:function(e){if(e.panels&&e.panels.changed){var n=a.find(e.panels.changed,function(e){return"firm"===e.diff.type});if(n&&void 0!==n.diff.tab){var i=n.diff.tab||ce.getDefaultTab();Q(i)&&(I(i),ce.changeActiveTab(i),S(i))}a.has(n,"diff.tariffId")&&Q("tariffs")&&(le.tariffId=a.get(n,"diff.tariffId"),K())}a.isNull(e["dataViewer/minimized"])?(t.notify("hideMaximizeBtn"),X()):1==e["dataViewer/minimized"]&&(t.notify("showMaximizeBtn"),X()),a.isNull(e.routeTab)&&(t.ua().isPhone||t.notify("hideSearchBar"),t.notify("maximizeViewer",!0))}};return ze},t.exports._args=["slot","$models","$dgApi","$regionManager","$i18n","$analytics","$appState","$localStorage","$bookletApi","$contextStorage","$featureSwitcher","$authorization","$syncRegistry","$floorsManager"]},{"./ginzaIds.js":289,"./tabHeightHelper.js":292,"./tabsManager":300,"./viewModel.js":301,async:383,lodash:"lodash",moment:"moment"}],"/modules/mediaCardHeader/mediaCardHeader.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/firm");t.exports=function(t,n,o,r,s,l){function c(){if(f.contact_groups&&f.contact_groups.length){var e=b.firstByType("phone",f.contact_groups);if(e)return t.init("mediaContacts",{model:f,template:"firstPhone",type:"mediaHeader"});t.isClient&&o.trackEvent("google",["Media_Card_event","Phone_Null"])}return null}function u(e){t.notify("minimizeViewer"),t.notify("showSearchBar");var n=a.get(e,"direction");t.notify("routeSearchClicked",{place:v,reg_bc_url:f.reg_bc_url,direction:n}),t.modules.fromTo||t.init("fromTo",{context:"card",id:f.id,templateName:"card",geoPoint:f.point,text:f.name}),o.trackEvent("google",["Media_Card_event","Route_click"]),t.broadcast("fromTo:setDestination",n)}function d(){r.get("favorites")&&t.init("favoritesWidget",{entity:f,type:t.ua().isPhone?"action":"mediaCard",gaCategory:"Media_Card_event"})}function h(){var e=t.element("phonesDropdown"),n=t.init("contact",{bss:a.get(f,"bss"),analyticsPlace:v,model:f.contact_groups,firmModel:a.extend(f,a.pick(f,"bss")),mode:"dropdown"});e.html(n.render()),n.bindEvents()}function p(e){var n=t.element("phonesDropdown");n.mod({shown:!e}),t.element("phone").mod({active:!e})}var f,m,g,_,v,y=e("./viewModel.js"),b=req("helpers/contact"),k={inheritBssHash:!0,init:function(e){if(!e.model.floors){var n=s.panels.find("firm");g=n.entrance}f=e.model,v=e.analyticsPlace||o.getPlace()||o.PLACE_CATALOG,t.mod({columns:e.columns}),_={place:v,sid:o.session,user:o.user},f.cardType=t.ua().isPhone?"phone":"desktop","phone"==f.cardType&&(t.init("cardHeader",f),f.schedule&&t.init("microSchedule",{model:f.schedule}),t.init("promoMobile",{module:"firmCard"})),e.model.isAwardWinner&&t.init("awardBadge",{target:"Media_Card_event",direction:"phone"==f.cardType?"left":"right"}),a.has(f,"ads.options.logo")?(f.logoUrl=i.getLogoUrl(f,"64x64"),t.mod({type_branding:!0})):t.mod({withoutBranding:!0}),m=t.invoke(y,[f,_]),m.phone=c(),d(),f.ads&&t.mod({type_special:!0}),g&&t.notify("showEntrance",!1,{onInit:!0}),f.floors&&t.mod({floors:!0})},viewContext:function(){return m},clientInit:function(){l.getItem("photosUploaderTooltipMediaCard")||0!=a.size(f.photos)||(t.notify("showPhotosUploaderTooltip",{type:"firm",tooltipData:{sourceElement:t.element("photosUploaderControl"),clickHandler:function(){t.notify("navigateToPhotos")}}}),l.setItem("photosUploaderTooltipMediaCard",!0))},elements:{adsIn:{click:function(e){e.preventDefault(),e.stopPropagation(),t.notify("showAdvantagesBlock")}},filialsLink:{click:function(e){e.preventDefault(),t.notify("filialsClick")}},findEntrance:{selector:".mediaCardHeader__cardActionsItem._type_entrance",click:function(e){e.stopPropagation(),t.notify("showEntrance",!0),o.trackEvent("google",["Media_Card_event","Enter","Click"])}},openPhotosTab:{selector:".mediaCardHeader__cardActionsItem._type_photosQuantity",click:function(e){e.stopPropagation(),t.notify("navigateToPhotos",!0),o.trackEvent("google",["Media_Card_event","Photos_counter"])}},photosUploaderControl:{click:function(){t.notify("navigateToPhotos");var e=a.get(i.getPhotoAlbum(f,"common"),"count");o.trackEvent("google",["Media_Card_event","Photos_Add",i.getMainRubric(f),e?0:1])}},cardAddressLink:{click:function(e){e.preventDefault(),e.stopPropagation(),t.element("cardAddress").mod().notClickable||(t.notify("clickAddress"),o.trackEvent("google",["Media_Card_event","Address_click"]))}},findRouteA:{selector:".mediaCardHeader__cardActionsItem._type_routeA",click:function(e){e.stopPropagation(),o.trackEvent("google",["Media_Card_event","Route_click","From"]),u({direction:"from"})}},findRouteB:{selector:".mediaCardHeader__cardActionsItem._type_routeB",click:function(e){e.stopPropagation(),o.trackEvent("google",["Media_Card_event","Route_click","To"]),u({direction:"to"})}},phone:{selector:".mediaCardHeader__cardActionsItem._type_phone",click:function(e){if($(this).mod().disabled)return void e.preventDefault();var n=$(this).mod().active;t.ua().isPhone&&(n||h(),$(this).prop("href")||p(n))}},cardInfoWrap:{click:function(){t.notify("adsLinkClicked",f,{analyticsPlace:v})}}},dispatcher:{"mediaAddress:findRouteBtnClicked":function(e){u(e)}},"interface":{setColumnsLengthModifier:function(e){t.mod({columns:e})},setAllFilials:function(e){m.allFilials=e,t.rerender()}}};return k},t.exports._args=["slot","$i18n","$analytics","$featureSwitcher","$appState","$localStorage"]},{"./viewModel.js":302,lodash:"lodash"}],"/modules/mediaContacts/mediaContacts.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/link");t.exports=function(t,n,o,r,s,l){function c(){var e=y.firstByType("website",h.contact_groups),n=y.firstByType("phone",h.contact_groups);e||t.notify("shownWithoutSite"),t.ua().isPhone&&t.mod({phones:"visible"}),_&&t.notify("filialsLinkShown"),n||t.notify("noPhone")}function u(e){var n=a.find(p,{index:parseInt(e,10)});n.reg_bc_url=h.reg_bc_url,t.notify("firmClicked",{place:f,reg_bc_url:n.reg_bc_url}),t.notify("contactClicked",n,f,"mediaCard")}function d(){k.changeTimeParam($(this))}var h,p,f,m,g,_,v=e("./viewModel.js"),y=req("helpers/contact"),b=req("helpers/firm"),k=req("helpers/analytics");return{inheritBssHash:!0,init:function(e){h=e.model,f=o.getPlace()||o.PLACE_CATALOG,m=n.get("plusOne")&&!t.registry.get("offline")&&b.getPlusOne(h);var c=e.type||"default";t.mod({type:c});var u={},d=!s.floors.isActive()&&b.checkFloors(h,n,r);d&&(u.hasFloors=!0,u.seoLink=i.getFirmInFloorsLink(h,r,l));var g=h.org&&h.org.branch_count;_=!h.floors&&a.isNumber(g)&&g>1?--g:null;var y=e.template||"contacts",k=t.invoke(v,[h,_,m,u,y]);t.viewContext=k,p=k.flatContacts},clientInit:function(){c(),n.get("floors")||t.element("floors").mod({hidden:!0})},elements:{plusOne:{click:function(e){e.preventDefault(),t.notify("plusOne",h.id,m),o.trackEvent("google",["Media_Card_event","Plusone_click",b.getMainRubric(h)]),h&&h.reg_bc_url&&t.notify("plusOneClicked",{place:f,reg_bc_url:h.reg_bc_url})}},claimToFirmButton:{click:function(){t.notify("sendEmailLinkClicked",h)}},filials:{click:function(){t.notify("filialsClick")}},showPhones:{click:function(){t.mod({phones:"visible"}),t.notify("showPhoneClick"),t.notify("phoneShown"),u($(this).data("index"))}},phonesNumber:{click:function(e){var a=!t.mod().phones;if(a)return e.preventDefault(),t.mod({phones:"visible"}),t.notify("phoneShown"),void u($(this).data("index"));if(!t.ua().isPhone&&n.get("p2d")){e.preventDefault(),t.notify("phoneClicked"),g||t.init("push2dialCaller",function(e,n){e||(t.block().append(n.render()),n.bindEvents(),g=n)});var i=$(this).text(),o=h.name;g["interface"].dial(this,i,o)}}},item:{click:function(){var e=$(this);u(e.data("index"))}},socialItem:{click:function(){u($(this).data("index")),t.notify("socialClicked")}},advLink:{mouseenter:d,focus:d},website:{mouseenter:d,focus:d,click:function(){t.notify("websiteClicked")}},email:{mouseenter:d,focus:d,click:function(){t.notify("emailClicked")}},floors:{click:function(e){e.preventDefault();var n=a.get(h,"address.building_id");t.notify("floors",r.getByBuildingId(n),{branchId:h.id}),t.bssContext.continueChain(),t.notify("showInFloorsClicked",{place:f,reg_bc_url:h.reg_bc_url}),r.hasBranch(b.getStaticId(h.id))?o.trackEvent("googleFloors",["Floors_Enter","Firm_Mall_Card_Button","Click"]):o.trackEvent("googleFloors",["Floors_Enter","Firm_Card_Button","Click"])}}}}},t.exports._args=["slot","$featureSwitcher","$analytics","$floorsManager","$appState","$regionManager"]},{"./viewModel.js":303,lodash:"lodash"}],"/modules/mediaDiscount/mediaDiscount.js":[function(e,t,n){t.exports=function(t){function n(){var e=t.element("body"),n=t.element("descriptionIn"),a=e.offset().top+e.height(),i=n.offset().top+n.height();return i>a}var a,i;return{init:function(e,n){a=e.branchId,i=e.discount,i.votes?t.init("discountRating",{branchId:a,id:i.id,votes:i.votes},n):n()},bind:function(){n()&&t.mod({minimized:!0})},viewContext:function(){var n=e("./viewModel.js"),a=t.invoke(n,[i]);return a.firmName&&t.mod({tall:!0}),a},elements:{more:{click:function(){var e=450;t.mod({maximized:!0}),t.setTimeout(function(){t.element("scroller").baron({bar:".mediaDiscount__track .track__bar"})},e)}}}}}},{"./viewModel.js":304}],"/modules/mediaMiniCard/mediaMiniCard.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/contact");t.exports=function(t,n,o){function r(){t.broadcast("mediaPhotoSlider:preload"),t.broadcast("mediaPhotoSlider:showArrows",!0),t.notify("hovered",d.id,d.type)}function s(){t.broadcast("mediaPhotoSlider:showArrows",!1),t.notify("unhovered",d.id)}function l(){t.notify("firmDisplayed",[d.id],p),"branch"==d.type&&o.writeBssInfoInCookie(d,p)}function c(){t.init("mediaPhotoSlider",{firm:d,type:"mediaMiniCard"})}function u(){if(!a.isEmpty(d.contact_groups)){var e=i.firstByType("phone",d.contact_groups);e&&t.init("mediaContacts",{model:d,template:"firstPhone",type:"providers"==d.mediaRubric?"providers":null})}}var d={},h=e("./viewModel.js"),p=null,f={tag:"article",inheritBssHash:!0,init:function(e){d=e.model||{},d.mediaRubric=e.mediaRubric,p=a.get(e,"analyticsPlace"),c(),u(),t.mod({type:d.mediaRubric,ad:!!d.ads,checked:!!d.isFavorited})},clientInit:function(){n.get("floors")||t.element("floorsIndicator").mod({hidden:!0})},viewContext:function(){return t.invoke(h,[d])},elements:{check:{click:function(e){e.preventDefault(),e.stopPropagation()}},block:{click:function(){t.notify("clicked",{id:d.id,buildingId:a.get(d,"address.building_id")})},touchstart:r,touchmove:r,touchcancel:s,touchend:s,mouseenter:r,mouseleave:s},phone:{click:function(e){e.stopPropagation()}},site:{click:function(e){e.stopPropagation(),t.notify("firmClicked",{place:p,reg_bc_url:a.get(d,"reg_bc_url")})}},link:{click:function(e){e.preventDefault()}}},"interface":{favoriteAdded:function(e){e==d.staticId&&t.mod({checked:!0})},favoriteRemoved:function(e){e==d.staticId&&t.mod({checked:!1})},favoriteRestored:function(e){e==d.staticId&&t.mod({checked:!0})},favoritesDataReceived:function(e){var n=d.staticId in e;t.mod({checked:n})},favoritesDataUpdated:function(e){var n=d.staticId in e;t.mod({checked:n})},trackBssImpression:a.once(l)},dispatcher:{"mediaPhotoSlider:hovered":function(){t.element("check").mod({hidden:!0}),t.element("reviews").mod({hidden:!0}),t.element("discount").mod({hidden:!0})},"mediaPhotoSlider:unhovered":function(){t.element("check").mod({hidden:!1}),t.element("reviews").mod({hidden:!1}),t.element("discount").mod({hidden:!1})}}};return f},t.exports._args=["slot","$featureSwitcher","$analytics"]},{"./viewModel.js":305,lodash:"lodash"}],"/modules/mediaMiniCardAd/mediaMiniCardAd.js":[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(t,n){function i(){var e=n.getPlace()||n.PLACE_CATALOG,i=[];a.each(o,function(e){i.push({url:e.reg_bc_url,id:e.id})}),t.notify("firmDisplayed",i,e)}var o={},r=e("./viewModel.js");return{inheritBssHash:!0,init:function(e){o=e||{},t.viewContext=t.invoke(r,[o])},elements:{listItem:{click:function(e){e.preventDefault();var n=$(this).data("staticId"),i=a.find(o,{id:n});i&&t.notify("firmSelected",{id:i.id})}}},"interface":{trackBssImpression:a.once(i)}}},t.exports._args=["slot","$analytics"]},{"./viewModel.js":306,lodash:"lodash"}],"/modules/mediaPhotoSlider/mediaPhotoSlider.js":[function(e,t,n){var a=e("lodash");t.exports=function(t){function n(e){var t={mediaCard:"784x508",mediaMiniCard:"304x190",saunaRoom:"w464h272"};return t[e]}function i(e,n){n.preventDefault(),n.stopPropagation(),t.notify("arrowClicked"),r&&r.changePhoto(e)}var o,r,s,l=t.invoke(e("./photoSlider"),[t]);return{init:function(i){var c=i.firm;s=a.omit(i,"firm"),s.previewSize=n(s.type);var u=e("./viewModel.js");o=t.viewContext=t.invoke(u,[c,s,t]),s.type&&t.mod({type:s.type}),t.mod({clickable:!!s.clickable&&!!o.firstPhoto}),o.photosCount&&(c.firstPhoto=o.firstPhoto,r=new l(c))},bind:function(){r&&r.init(s)},clientInit:function(){t.notify("inited",o.photosCount)},elements:{block:{click:function(e){if(e.preventDefault(),$(this).mod().clickable){var n=r.getCurrentPhoto();n&&t.notify("click",{type:s.type,photoId:n.id,photosBcUrl:r.getBcUrl()})}}},arrowPrev:{click:a.partial(i,"prev"),mouseenter:function(){t.notify("hovered")},mouseleave:function(){t.notify("unhovered")}},arrowNext:{click:a.partial(i,"next"),mouseenter:function(){t.notify("hovered")},mouseleave:function(){t.notify("unhovered")}},hiddenPhoto:{selector:".mediaPhotoSlider__photosItem._hidden"}},"interface":{pauseAutoplay:function(){r&&r.pauseAutoplay()},resumeAutoplay:function(){r&&r.resumeAutoplay()},showArrows:function(e){t.mod({hover:e})},preload:function(){r&&(r.preloadPhoto(0),r.preloadPhoto(1),r.preloadLastPhoto())}}}}},{"./photoSlider":307,"./viewModel.js":308,lodash:"lodash"}],"/modules/mediaPresets/mediaPresets.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/mediaCard");t.exports=function(t,n,o,r){function s(e,t){var n=a.chain(t).pluck("items").flatten(!0).groupBy("name").value();return a.each(n,function(e,t){n[t]=a.pluck(e,"value")}),e=a.filter(e,function(e){return a.every(e.filters,function(e,t){return e?a.has(n,t):!0})})}function l(){if(t.element("preset").mod({active:!1}),t.element("otherLink").mod({active:!1}),c(),v){var e=t.element("preset").filter('[data-id="'+v.id+'"]');e.mod({active:!0});var n=!!e.closest(t.element("other")).length;t.element("otherLink").mod({active:n}),t.notify("activatedPreset",v)}}function c(){t.element("other").mod({active:!1}),_=!1}function u(){var e=t.element("list").width(),n=0,i=0;a.some(k,function(t){return i+=t.width,e>i&&n++,i>e});var o=k.slice(n);if(t.element("other").mod({visible:!!o.length}),o.length){var r=a.map(o,function(e){return t.renderPartial("otherItem",e)});t.element("otherList").html(r)}l()}function d(){var e=m.getFilters();return a.mapValues(e,function(e){if("true"===e)return!0;if("false"===e)return!1;var t=(e+"").split("-");if(t.length>1)return t;var n={};return a.each((e+"").split(","),function(e){n[e]=!0}),n})}function h(e,t){return a.isEmpty(t)?!1:a.every(e.filters,function(e,n){return a.has(t,n)&&t[n]==e})}function p(){var e=d(),t=a.find(g,function(t){return h(t,e)});t&&(v=t,l())}function f(){if(v){var e=d();h(v,e)||(v=null,l())}}var m,g,_,v,y,b=e("./config.js")(n),k=[],w={init:function(e,n){m=t.searchContext;var o=a.pluck(m.read("contextRubrics"),"short_id"),l=i.getMediaFirmRubric(o,r),c=b[l];return c&&(y=c.metarubric,g=a.cloneDeep(c.items),g=s(g,e.widgets)),a.isEmpty(g)?void n({reason:"noValidPresets"}):(t.viewContext={presets:g},t.mod({type:l}),void n())},bind:function(){var e,n;k=a.map(t.element("listItem"),function(t,a){return e=$(t),n=e.attr("data-id"),{id:n,icon:"media_presets-"+n,title:e.text(),index:a,width:e.outerWidth(!0)}}),u(),p()},clientInit:function(){t.mod({client:"inited"}),o.trackEvent("google",["Search","Media_Filters_Preset_Show",y])},elements:{block:{click:function(e){_&&!$(e.target).closest(t.element("other")).length&&c()}},preset:{click:function(){var e=$(this).data("id"),n=a.find(g,{id:e}),i=!(!v||v.id!=e);v=i?null:n,o.trackEvent("google",["Search","Media_Filters_Preset_Click",n.title]),t.notify("clickPreset",n,!i),l()}},otherLink:{click:function(){var e=!t.element("other").mod().active;t.element("other").mod({active:e}),e&&(t.notify("dropdownIsVisible"),_=!0)}}},"interface":{mediaResize:u,hideDropdown:c,highlightActive:p},changeState:function(e){if(e.panels&&e.panels.changed){var t=a.find(e.panels.changed,function(e){return void 0!==e.diff.filters});t&&f()}}};return w},t.exports._args=["slot","$i18n","$analytics","$regionManager"]},{"./config.js":309,lodash:"lodash"}],"/modules/mediaRecoveryAds/mediaRecoveryAds.js":[function(e,t,n){var a=e("lodash"),i=e("./viewModel");t.exports=function(e,t){function n(t){var n=t.data("staticId");e.notify("hovered",l[n])}function o(t){var n=t.data("staticId");e.notify("unhovered",l[n])}function r(t,n){e.element("article").filter('[data-static-id="'+t+'"]').mod({selected:n})}function s(t){t=t||a.pluck(c,"id"),e.notify("firmDisplayed",t,u)}var l,c,u,d={},h=req("helpers/firm"),p={inheritBssHash:!0,init:function(e){c=e.adFirms,u=e.analyticsPlace||t.getPlace(),l={},d.currentColumnsLength=e.currentColumnsLength,a.each(e.adFirms,function(e){var t=h.getStaticId(e.id);e.point||(e.point={}),l[t]=e})},bind:function(){e.mod({columns:d.currentColumnsLength})},viewContext:function(t){return t||e.invoke(i,[l])},elements:{article:{click:function(n){n.preventDefault(),n.stopPropagation(),o($(this));var a=$(this).data("staticId");l[a]&&l[a].id&&e.notify("firmSelected",{id:l[a].id,media:!0}),t.trackEvent("google",["Recovery","Click","Card_recovery"])},touchstart:function(){n($(this))},touchmove:function(){n($(this))},mouseenter:function(){n($(this))},touchcancel:function(){o($(this))},touchend:function(){o($(this))},mouseleave:function(){o($(this))}}},"interface":{setColumnsLength:function(t){e.mod({columns:t})},highlight:function(e){r(e[0],!0)},unhighlight:function(e){r(e[0],!1)},registerImpressions:a.once(s)}};return p},t.exports._args=["slot","$analytics"]},{"./viewModel":310,lodash:"lodash"}],"/modules/mediaResults/mediaResults.js":[function(e,t,n){"use strict";var a=e("lodash"),i=e("moment"),o=e("async"),r=req("helpers/discreteFrame"),s=e("slot/lib/defer"),l=req("helpers/firm"),c=req("helpers/mediaCard");t.exports=function(t,n,u,d,h,p,f,m,g,_){function v(e){Be.setFilters(e||t.broadcast("filters:getDefaultValues")),t.mod({hasActiveFilters:!!e})}function y(e){return"providers"==Oe?void e():m.get("mediaResults.func.metroAndAreas")?void f.stations().getSubwayStations(e):void e()}function b(e){var n=!1;if(m.get("ginzaProject")){var i=a.get(Be.context,"widgets.current_values");n=a.includes(i,"food_service_ginza_project")}var o="find"===Re&&"discovery"===De||"new"===Re||"servicing"==Re||n;return a.isEmpty(be.widgets)&&(o=!1),o?void y(function(n){t.init("filters",{mods:{context:"mediaCard",displayMode:"widgets"},filters:be.filters,widgets:a.pick(be.widgets,"actions","main"),forcedValues:a.get(be,"widgets.current_values"),stations:n,contextId:t.moduleId(),mode:"query/firms"},function(n,a){return n?void e(n):(Pe.address&&t.broadcast("checkConnectionWidget:setAddress",Pe.address),k(a["interface"].getWidgets(),function(){e()}),void(Fe=!1))})}):void e()}function k(e,n){m.get("mediaResults.func.presets")?t.init("mediaPresets",{widgets:e},n):n()}function w(e){t.modules.filters&&t.modules.filters.dispose(),t.modules.mediaPresets&&t.modules.mediaPresets.dispose(),b(e)}function x(e){switch(e=e||{},e.newTotal=Ee,e.filials="filials"===Re?a.get(be,"total",0):!1,Re){case"servicing":case"find":e.tab="all",e.total=a.has(e,"total")?e.total:a.get(be,"total",0),e.totalText=e.totalText||le(e.total||0),Ue=a.get(be,"total_count",0);break;case"new":e.tab="new",e.newTotal=a.get(be,"total",0),Ue>0&&(e.total=Ue);break;case"filials":e.tab="filials";break;case"house":var n=a.first(be.data);e.address=a.get(n,"address_name"),e.tab="inBuilding"}"firm"!==u.panels.last().type&&t.notify("showSearchBar"),"providers"==Oe&&(e.tab="providers"),t.notify("updateTabsData",e)}function C(e){function n(){t.element("results").mod({mkb:"active"}),Se.count=Math.ceil((be.total||0)/(Se.pageSize-1)),me(),ue()}"discovery"!==De||Ae?e():ze.init({contextRubrics:be.context_rubrics,onRender:n},e)}function L(e){if(m.get("ginzaProject")){var i=a.get(Be.context,"widgets.current_values"),o=a.includes(i,"food_service_ginza_project");if(o)return void e()}if(Ae){var r=a.map(be.ads,function(e){return e.id||e.branch_id});n.firms.profiles(r,function(n,a){return n?void e():(t.modules.mediaMiniCardAd&&t.modules.mediaMiniCardAd.dispose(),void t.init("mediaMiniCardAd",a.data,e))})}else C(e);ue()}function I(e){return ze.isAlive()?void e():(1==Se.current&&(Ae=!!be.ads),t.modules.mediaMiniCardAd&&!Ae&&t.modules.mediaMiniCardAd.dispose(),ze.dispose(),void L(e))}function T(){var n=t.invoke(e("./seo")),i=a(Pe).pick("query","rubricId","house").extend({providersInBuilding:"servicing"==Re&&"internet"==Pe.group,filtersValues:Be.getFilters(),page:Se}).value();return n.getParams(i)}function S(e){return"servicing"==e?t.config["WebApi.servicingPageSize"]:t.config["WebApi.mediaPageSize"]}function E(){var e=T();t.init("pagination",{page:Se,seoParams:e,context:"media"})}function P(){var e=i().subtract(3,"months");return e.format("YYYY-MM-DD")}function j(e,n){var a=s();return t.enableMarkersInSearch()?(a.resolve(),a.promise()):(Ge.hasRegular()?a.resolve():Ge.load(e,n).then(a.resolve),a.promise())}function M(e,t){return function(a){n.searchByType(e,t,function(e){"new"===Re&&e&&e.total&&(Ee=e.total_count),a(null,e)})}}function A(e,t){return function(a){n.searchByType(e,t,function(e){a(null,e)})}}function D(e){switch(e){case"filials":return"filials";case"servicing":return"servicing";default:return"query/firms"}}function R(e){t.notify("mediaResizeStart",e)}function N(e){var n=a.isEmpty(be)||e.fullSearch;1==Se.current&&(Ae=!1);var i=ze.isShown()||Ae,o={};switch(a.extend(o,{page_size:i?Se.pageSize-1:Se.pageSize,page:Se.current,full:n,enableMarkers:t.enableMarkersInSearch()}),Re){case"find":a.extend(o,{q:Pe.query});break;case"filials":a.extend(o,{firmId:Pe.firmId});break;case"house":a.extend(o,{q:Pe.query,house:Pe.house});break;case"servicing":a.extend(o,{house:Pe.house,servicing_group:Pe.group,full:!0,page_size:2e3,page:1});break;case"new":a.extend(o,{q:Pe.query,opened_after_date:P(),sort:"opened_time"})}if("filials"!=Re){var r=ie();a.isEmpty(r)||(o.filters=r)}return o}function B(e,n){var i;Pe.results&&!Pe.mode&&"find"==Re&&Se.pageSize<=Pe.pageSize&&1==Se.current&&(i=Pe.results,i.data=a.take(i.data,Se.pageSize),Ge.setRegular(Pe.markers),Pe=a.omit(Pe,["results","markers"]));var r=D(Re),s=N(e),l={};i?l.data=function(e){return e(null,i)}:"filials"==Re?l.data=A(r,s):l.data=M(r,s),l.markers=function(e){We=j(r,s).done(e)},o.parallel(l,function(e,a){t.enableMarkersInSearch()&&Ge.setRegular((a.data||{}).markers),n(null,a.data)})}function F(e,t){return Oe="servicing"==Re&&"internet"==Pe.group?"providers":c.getMediaFirmRubric(a.pluck(e.context_rubrics||[],"short_id"),g),"providers"==Oe?void qe.injectTariffsToResults(e.data,function(){t(null,e)}):void t(null,e)}function O(e,t){B(e,function(e,n){return e?void t(e):void z(_,n,function(e){F(e,t)})})}function z(e,t,n){var i=a.map(t.data,function(e){return l.getStaticId(e.id)});e.getFirmInfo(i,function(e,i){if(!e){var o;a.forEach(t.data,function(e){o=a.findWhere(i,{id:l.getStaticId(e.id)}),a.get(o,"albums")&&(e.photoAlbums=o.albums)})}n(t)})}function q(e){if("providers"==Oe)return void e();var t={q:Pe.query,page_size:1,mutedForBssSearch:!0,opened_after_date:P()};n.searchByType("query/firms",t,function(t){a.get(t,"total")>=3&&(Ee=t.total),e()})}function U(e){He=a.map(e,function(e){return t.init("mediaMiniCard",{model:e,mediaRubric:Oe,analyticsPlace:Ne})})}function H(){xe&&xe.update(),Ce&&Ce.update()}function G(){if(!t.isServer&&t.notify("isFrameActive")){var e=a.filter(He,function(e){return $(e.block()).parent().seeable(.5)});a.each(e,function(e){e["interface"].trackBssImpression()}),a.result(t,"modules.mediaMiniCardAd.block")&&t.modules.mediaMiniCardAd.block().seeable(.5)&&t.broadcast("mediaMiniCardAd:trackBssImpression")}}function W(){return"servicing"!=Re}function V(){W()&&We.done(function(){u.inGlobal()||t.notify("mapDataReady",{markers:Ge.get()})})}function Z(){W()&&t.notify("clearMap")}function Y(){t.mod({hidden:!1}),t.setTimeout(H,400)}function K(){if(!a.isUndefined(be)){Be=t.searchContext.makeCurrent(t.moduleId()),Be.write("query",Pe.query),Be.write("type","query/firms"),Be.write("requestType",be.request_type),Be.write("contextRubrics",be.context_rubrics||[]),Be.write("contextIds",a.pluck(be.context_rubrics||[],"short_id")),Be.write("mediaRubric",Oe),Be.setBlockDa(be.widgets&&be.widgets.attributes),Be.write("contextKey",be.contextKey),
Be.write("widgets",be.widgets);var e=a.extend(t.broadcast("filters:getDefaultValues")||{},Be.getFilters());Be.setFilters(e),Be.write("onFilterValuesChange",function(e){Be.write("initiatorId",e),t.bssContext.startNewChain({extendParams:!0,updateContext:!0}),u.applyFilters(Be.getFilters()),X(1),u.push(),Ge._reset()})}}function X(e){Se.current=e,u.changePage(e)}function J(e,n){Pe=e,Re=_e(e),X(e.page||1),v(e.filters),Ge._reset(),pe(!0),t.element("scroller").scrollTop(0),t.addTransition(function(e){O({fullSearch:n},function(t,a){return pe(!1),te(!0),t||404===a.code?(ce(!0),void e()):(ce(!1),e(),ne(a),void Q(n))})})}function Q(e){x(),e?(K(),he(function(){t.rerender(),t.modules.filters&&(t.modules.filters.bindEvents(),t.broadcast("filters:invalidateUIValues",!0)),ee()})):(t.broadcast("mediaPresets:highlightActive"),t.broadcast("filters:invalidateUIValues",!0),I(function(){t.viewContext=ge(),t.element("results").html(t.renderPartial("results",t.viewContext)),t.element("results").mod({ads:Ae?"active":!1}),t.modules.mediaMiniCardAd&&t.modules.mediaMiniCardAd.bindEvents(),ee()}))}function ee(){t.broadcast("pagination:invalidate",Se),a.invoke(He,"bindEvents"),t.broadcast("googleTagAds:refresh"),ue(),me(),V(),t.broadcast("mediaPresets:updateDropdown"),t.setTimeout(G)}function te(e){be=null,Se.count=0,t.element("results").empty(),a.invoke(He,"dispose"),He=[],Z(),e&&($e=[],we=0)}function ne(e){be=e,be.search_type=Re,De=be.request_type,ke=be.total,Se.count=Math.ceil(a.get(be,"total",0)/Se.pageSize),$e=$e.concat(be.data),we=we||ke,U(be.data)}function ae(e,n){var i=l.getRubricOriginalName(e.query,e.rubricId,a.get(n,"context_rubrics"));i&&t.notify("originalRubricNameFound",i)}function ie(){var e=Be.getFilters(),t={};return a.each(e,function(e,n){t[n]=a.uniq((e+"").split(",")).join(",")}),t}function oe(e){Fe=!!e,t.element("filters").mod({minimized:Fe}),t.element("main").mod({filtersCollapsed:Fe}),t.setTimeout(function(){ue(),H(),Fe&&G()},750)}function re(){t.broadcast("mediaPresets:hideDropdown"),Me=!1}function se(){var e=(Se.current-1)*Se.pageSize,n=a.range(e,e+$e.length),i={};a.map(n,function(t){i[t]=$e[t-e]});var o={items:i,total:we},r=t.searchContext.makeCurrent(t.moduleId());Pe.house?(o.searchMode="house",o.house=Pe.house):"new"===Pe.mode?(o.searchMode="new",o.query=Pe.query):"filials"===Pe.type?o.searchMode="filials":(o.searchMode="find",o.query=Pe.query),a.each(o,function(e,t){r.write(t,e)})}function le(e){return d._nt("Организация","Организации","Организаций",e)}function ce(e,n){t.element("notFound").mod({visible:e,mode:n}),e&&(me(),H(),x())}function ue(){if(!t.isServer&&(ze.isShown()||Ae)){var e=t.element("results").width(),n=t.element("resultsItem"),a=n.width()+parseInt(n.css("margin-left"),10)+parseInt(n.css("margin-right"),10),i=Math.floor(e/a);t.element("results").mod({rows:i})}}function de(e){Ae=1==Se.current&&!!be.ads,b(function(){return L(e)})}function he(e){o.parallel([w,I],e)}function pe(e){t.element("results").mod({preloader:e}),t.element("notFound").mod({preloader:e})}function fe(e){e=e||r.getColumnsNumberToShow("mediaCard",t.ua(),p,window),t.mod({columns:e})}function me(e){var n=a.has(e,"showPagination")?e.showPagination:!0;if(Se.count<2&&(n=!1),t.mod({showPagination:n}),n){var i=a.get(e,"columnsLength");i||(i=r.getColumnsNumberToShow("mediaCard",t.ua(),p,window));var o=t.element("filters").length&&!t.element("filters").mod().minimized,s=2===i&&o,l=s?3:5;t.broadcast("pagination:updatePaginationPagesQuantity",l)}}function ge(){var n=e("./viewModel.js"),i=!!t.modules.filters&&a.includes(["find","new","servicing"],Re),o=i&&!!t.modules.mediaPresets&&"new"!==Re;return t.mod({presets:o?"enabled":null,rubric:Oe}),n(be,He,{mediaRubric:Oe,showFilters:i,showPresets:o,showAds:Ae})}function _e(e){var t=e.type||"find";return e.mode&&"new"===e.mode&&(t="new"),a.includes(["profiles","inbuild"],e.type)&&(t="house"),t}function ve(){if(t.isClient){var e=t.element("scroller").scrollTop()>=Ie,n=e?"maximized":"minimized";t.notify(n),Te=e}}function ye(){var e=t.element("presets"),n=e.length?e:t.element("results");Ie=n.offset().top-t.block().offset().top}var be,ke,we,xe,Ce,Le,Ie,Te,Se,Ee,Pe,je,Me,Ae,De,Re,Ne,Be,Fe,Oe,ze=t.invoke(e("./banner"),[t]),qe=t.invoke(e("./providers"),[]),$e=[],Ue=0,He=[],Ge=f.markers(),We=s(),Ve=a.throttle(function(e){if(Le){var n=!!t.element("scroller").mod().presets_enabled;!je&&Le<=e.scrollTop&&(je=!0,t.element("filters").mod({sticky:!0})),je&&Le>e.scrollTop&&(je=!1,t.element("filters").mod({sticky:!1})),"new"!==Re&&(n&&!je||!je&&e.scrollTop<Le?t.element("filters").css("top",Le-e.scrollTop):je&&t.element("filters").css("top",""))}},20),Ze=a.throttle(function(e){Me&&re(),!Te&&e.scrollTop>=Ie&&(Te=!0,t.notify("maximized")),Te&&e.scrollTop<Ie&&(Te=!1,t.notify("minimized")),H(),G()},50),Ye={inheritBssHash:!0,init:function(e,n){t.notify("init"),Pe=e,Re=_e(e),Se={current:e.page||1,pageSize:S(Re)},Be=t.searchContext.makeCurrent(t.moduleId()),v(e.filters),Ne=h.getPlace(),O({},function(e,a){return e?void n(e):(ne(a),K(),E(),t.notify("inited"),void o.parallel([de,q],n))})},viewContext:function(){return ge()},bind:function(){xe=t.element("scroller").baron({bar:".mediaResults__track .track__bar"}),Ce=t.element("filtersScroller").baron({bar:".mediaResults__filtersTrack .track__bar"}),ye(),t.element("filters").length&&(Le=t.element("filters").position().top),ce(404===be.code)},clientInit:function(){t.notify("clientInited"),oe(t.mod().columns<3),ue(),h.trackEvent("google",["Search","Simple","Media"]),h.trackEvent("yandex",["SEARCH_SIMPLE_MEDIA"]),me(),ae(Pe,be),t.setTimeout(G,t.config["animations.mediaResultsAppearing"])},dispose:function(){Ge.dispose()},"interface":{tabType:"firms",drawOnMap:V,clearMap:Z,close:function(){t.notify("close")},activateContent:function(){Y(),K(),t.notify("activated"),x()},checkMaximize:ve,setSeoParams:function(){return t.notifySeoParams(T()),!0},dissolve:function(){t.mod({hidden:!0})},mediaResize:function(e){me({columnsLength:e}),H(),ue(),G(),fe(e),t.notify("mediaColumnsWasSet")},appear:Y,scrollTop:function(){t.element("scroller").scrollTop(0)},exitFloors:function(){ye(),ve()}},elements:{block:{click:function(e){Me&&!$(e.target).closest(t.element("presets")).length&&re()}},scroller:{scroll:function(){Ze(this),Ve(this)}},resizeButton:{mousedown:R},filtersMinimize:{click:function(){oe(!0),h.trackEvent("google",["Search","Media_Fiters_Hide"]),me()}},maximizeFilters:{click:function(){oe(!1),h.trackEvent("google",["Search","Media_Fiters_Back"]),me()}},filtersScroller:{scroll:function(){t.broadcast("filters:scrolled")}},checkConnectionReset:{click:function(){t.broadcast("checkConnectionWidget:reset")}},banner:{selector:"mediaResults__resultsItem._mkb"}},dispatcher:{"googleTagAds:bannerIsEmpty":function(){ze.dispose(),t.element("results").mod({mkb:"hidden"})},"mediaPresets:clickPreset":function(e,n){var i=e.filters;n||(i=a.clone(i),a.each(i,function(e,t){i[t]=null})),t.broadcast("filters:setValues",i)},"filters:hasActiveFilters":function(e){t.mod({hasActiveFilters:e})},"mediaPresets:activatedPreset":function(e){e.group&&t.broadcast("filters:expandGroup",e.group)},"mediaPresets:dropdownIsVisible":function(){Me=!0},"mediaMiniCard:clicked":function(e){"servicing"==Re&&"providers"==Oe&&(e.address=Pe.address,e.buildingId=Pe.house),se(),t.notify("miniCardClicked",e)},"mediaMiniCard:renderCard":function(e){t.init("mediaCard",e,function(e,n){t.block().html(n.render()),n.bindEvents()})},"pagination:pagePicked":function(e){t.bssContext.continueChain(),Se.current=e,Fe||oe(1!==e)},"filters:scrollToGroupRequested":function(e,n){var a=t.element("filtersScroller").scrollTop(),i=e-a+n;t.element("filtersScroller").scrollTop(i)},"filters:filterExpand":H,"selectBox:opened":function(e){t.broadcast("filters:hideGroupsAfter",e.name),H()},"selectBox:closed":function(){t.broadcast("filters:showAllGroups"),H()},"checkConnectionWidget:checkConnection":function(){t.bssContext.startNewChain({extendParams:!0,updateContext:!0})},"checkConnectionWidget:addressFound":function(e){var n=e.address;n&&(n=a.compact([n.street,n.building,n.apartment]).join(",")),t.notify("showProvidersInBuilding",e.geoid,n)},"checkConnectionWidget:addressNotFound":function(){te(!0),ce(!0,"checkConnection")},"checkConnectionWidget:reset":function(){return"servicing"==_e(Pe)?void t.notify("providersResetServicing"):(J(Pe),void t.app.runTransitions())}},changeState:function(e){if(e.panels&&e.panels.changed){var n=a.find(e.panels.changed,function(e){return e.diff.type===Pe.type});if(n){var i=void 0!==n.diff.page||void 0!==n.diff.mode||void 0!==n.diff.filters;if(void 0!==n.diff.page&&(Se.current=n.diff.page),i){var o=a.find(e.panels.value,{type:Pe.type}),r=void 0!==n.diff.mode;r&&t.bssContext.startNewChain({extendParams:!0,updateContext:!0}),J(o,r)}}}}};return Ye},t.exports._args=["slot","$dgApi","$appState","$i18n","$analytics","$localStorage","$models","$featureSwitcher","$regionManager","$photoApi"]},{"./banner":311,"./providers":312,"./seo":313,"./viewModel.js":314,async:383,lodash:"lodash",moment:"moment","slot/lib/defer":489}],"/modules/mediaReview/mediaReview.js":[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(t,n){function i(){r&&t.setTimeout(function(){r.update()},200)}function o(e){var a=n.get("isSearchBot");a&&t.init("jsonld",{model:e,type:"review"})}var r,s,l,c,u={init:function(e){s=e,l=s.review,c=a.has(l,"isReviewTab"),l&&l.source&&(o(s),t.mod({type:l.source}))},viewContext:function(){var n=e("./viewModel.js"),a=t.invoke(n,[s.firm,l,s]);return t.mod({textCollapsable:a.textCollapsable,textCollapsed:a.textCollapsable}),a},"interface":{resize:i,mediaResize:i,updateScroll:i},elements:{textMore:{click:function(){t.setTimeout(function(){r=t.element("scroller").baron().fix({bar:".mediaReview__track .track__bar"}),i()},300),t.mod({textCollapsed:!1}),t.notify("reviewTextMoreClicked"),c||t.notify("lastTextMoreClicked")}},recommendLastTotal:{click:function(e){e.preventDefault(),t.notify("clickReviewsTotal")}},showReviews:{click:function(e){e.preventDefault(),t.notify("clickReviewsTotal")}},leaveReview:{click:function(){t.notify("leaveReviewClicked")}},filialAddressLink:{click:function(){t.notify("filialAddressClicked",l.filialData)}},photo:{click:function(){t.notify("photosClicked",{photosUrls:a.get(l.photo,"image"),photosComment:a.get(l.photo,"comment"),title:s.firm.name,subtitle:s.firm.address})}}}};return u},t.exports._args=["slot","$syncRegistry"]},{"./viewModel.js":315,lodash:"lodash"}],"/modules/mediaRoomCard/mediaRoomCard.js":[function(e,t,n){var a=e("lodash");t.exports=function(t){function n(){c=t.element("scroller").baron({bar:".mediaRoomCard__track .track__bar"}),i()}function i(){c&&t.setTimeout(function(){c.update()},100)}function o(){var e=t.element("priceTooltip");u?(e.mod({visible:!0}),t.setTimeout(function(){e.mod({opaque:u})},50)):(e.mod({opaque:!1}),t.setTimeout(function(){e.mod({visible:u})},200))}function r(){t.broadcast("mediaPhotoSlider:preload",!0)}var s,l,c,u=!1;return{tag:"article",init:function(e){s=e.model,l=a.pick(e,"type","size");var n=l.type;"about"!=n&&t.init("mediaPhotoSlider",{firm:e.model,photos:e.model.photos,type:"saunaRoom",clickable:!0}),n?t.mod({type:n}):t.mod({size:l.size||1})},viewContext:function(){var n=e("./viewModel.js"),a=t.invoke(n,[s,l]);return a},elements:{block:{click:function(){u=!1,o()},mouseleave:function(){u=!1,t.setTimeout(o,300)},touchstart:r,touchmove:r,mouseenter:r},moreDetails:{click:function(e){e.stopPropagation(),u=!u,o()}},priceTooltip:{click:function(e){e.stopPropagation()}},more:{click:function(){var e=$(this).mod().block,a=t.element("textBlock").filter("._block_"+e);a.mod({textCollapsed:!1}),"description"===e&&t.setTimeout(n,300)}}},"interface":{setSize:function(e){t.mod({size:e})},resize:i,updateScroll:i,mediaResize:i},dispatcher:{"mediaPhotoSlider:click":function(e){a.extend(e,{roomId:s.id}),t.notify("photoClick",e)}}}}},{"./viewModel.js":318,lodash:"lodash"}],"/modules/mediaSchedule/mediaSchedule.js":[function(e,t,n){"use strict";var a=req("helpers/schedule"),i=e("./viewModel");t.exports=function(e,t){var n=void 0,o=void 0;return{init:function(i){n=i,o=a.getNow(t.getRegion()),e.mod({open:a.isOpened(n,o)})},viewContext:function(){return e.invoke(i,[n,o])},"interface":{setColumnsLengthModifier:function(t){e.mod({columns:t})}}}},t.exports._args=["slot","$regionManager"]},{"./viewModel":319}],"/modules/metroCard/metroCard.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/model"),o=req("helpers/actions"),r=req("helpers/request");t.exports=function(t,n,s,l,c,u,d,h){function p(e){t.notify("stationSelected",{subtype:"metro",id:e})}function f(){t.notify("focusPoint",t.isGrym?w.id:w.focusPoint)}function m(e){t.notify("pathActionClicked",e,{text:w.short_name||w.name,id:w.id,lon:a.get(w,"focusPoint.lon"),lat:a.get(w,"focusPoint.lat")})}function g(){return h.get("favorites")?{module:{type:"favoritesWidget",data:{type:"action",entity:w,dropDownPosition:"center",gaCategory:"Stop_Card_event"}}}:null}function _(){if(t.ua().isPhone)return null;var e=!w.focusPoint;return o.getPathAction(e,{from:a.partial(m,"from"),to:a.partial(m,"to")},o.getPathActionLocaleParams(d))}function v(){return a.compact([_(),g()])}function y(){w.schedule&&t.init("schedule",{model:w.schedule}),t.init("promoMobile",{module:"metroCard"}),t.initDumb("cardActions",v())}function b(e){return t.initDumb("routesList",e)}function k(n){var i=a.first(n.routes),o=a.get(i,"directions[0].platforms");if(!a.size(o))return!1;var r=e("./directionCreator"),s=l.getRegion()||{},c=n.focusPoint,u=i.color||"#5d86dd",d=s.code,h={type:n.type,subtype:n.subtype,stationId:n.station_id,metroId:n.id};return t.invoke(r,[o,c,d,u,h,p]).map(b)}var w,x,C,L;return C={inheritBssHash:!0,networkDepend:!0,init:function(e,i){if(e.id||e.platformId)if("metroEntrance"===e.mode)n.transport.station.entrance(e.id,function(e,t){return e?void i(e):(w=t,w.focusPoint=u.parsePoint(w.geometry.centroid),y(),L=k(w),void i())});else{var o;o=e.platformId?a.partial(n.transport.station.byPlatformId,e.platformId):a.partial(n.transport.station,e.id),o(function(t,n){return t?void i(t):"metro"!=n.subtype&&"light_metro"!=n.subtype?void r.emitError(400,"wrong metro subtype",i):(w=n,w.byPlatform=!!e.platformId,w.focusPoint=u.parsePoint(w.platforms[0].geometry.centroid),y(),L=k(w),void i())})}else t.init("fromTo",{context:"card",makeup:e.makeup}),i()},clientInit:function(){t.googletag()},bind:function(){x=t.element("scroller").baron().fix(),t.setTimeout(function(){x.update()},100)},elements:{headerTitle:{click:f},directionsItemStationsItemName:{click:function(e){var n=$(this).data("station-id");t.notify("stationSelected",{subtype:"metro",id:n}),e.preventDefault()}},crossingItemTitle:{click:function(e){var n=$(this).data("station-id");t.notify("stationSelected",{subtype:"metro",id:n}),e.preventDefault()}},typeLine:{click:function(e){e.preventDefault();var n=a.first(w.routes);n&&n.id&&t.notify("routeSelected",{id:n.id})}},footerBugReportLink:{click:function(){c.showFeedback({geoType:w.type,feedbackType:"mapError",lon:w.focusPoint.lon,lat:w.focusPoint.lat,placeTitle:w.name}),c.push()}}},viewContext:function(){var t=e("./viewModel");return a.assign(t(w,{region:l.getRegion(),point:w.focusPoint,i18n:d}),{routesList:L})},"interface":{tabType:"transport",updateScroll:function(){x.update()},drawOnMap:function(){t.notify("mapDataReady",w)},clearMap:function(){t.notify("clearMap",w)},activateContent:function(){C["interface"].deactivatedOnce||s.trackEvent("google",["Cards","Transport","Stop"])},setSeoParams:function(){var e;if(w.platforms&&w.platforms[0]&&w.platforms[0].geometry)e=w.platforms[0].geometry.centroid;else{if(!w.geometry)return!1;e=w.geometry.centroid}var n=u.parsePoint(e),a="station"==w.type?w.id:w.station_id;return t.notifySeoParams({cityName:i.getCityName(w),type:"metro",stationName:w.name,id:a,lon:n.lon,lat:n.lat}),!0},getPrintData:function(){var e=this.viewContext(),n=t.modules.schedule;if(n){var a=n["interface"].printContext.call(n);e.schedule=a.html}var i=t.renderPartial("print",e),o=$(i).filter('[data-print="static"]'),r=$(i).filter('[data-print="dynamic"]');return{analyticsLabel:"Platform",layout:"complex","static":o,dynamic:r}},prepareForPrint:function(){t.notify("preparedForPrint",w&&w.focusPoint)}},dispatcher:{"schedule:expand":function(){x.update()}}}},t.exports._args=["slot","$dgApi","$analytics","$regionManager","$appState","$wkt","$i18n","$featureSwitcher"]},{"./directionCreator":320,"./viewModel":321,lodash:"lodash"}],"/modules/microSchedule/microSchedule.js":[function(e,t,n){"use strict";var a=req("helpers/schedule"),i=e("./viewModel");t.exports=function(e,t,n){function o(){s=a.getNow(n.getRegion()),e.mod({opened:a.isOpened(r,s)})}var r=void 0,s=void 0;return{init:function(n){r=n.model,e.init("holidayWarning",{project:"online",type:"short",alertText:t._t("Уточните время работы по телефону."),initOnHoliday:!0}),o()},viewContext:function(){return e.invoke(i,[r,s])},"interface":{updateTime:function(){o(),e.rerender()}}}},t.exports._args=["slot","$i18n","$regionManager"]},{"./viewModel":322}],"/modules/miniCard/miniCard.js":[function(e,t,n){var a=e("lodash"),i=req("lib/wkt")();t.exports=function(t,n,o,r,s,l){function c(e){var n=!0;e=e||null,e?I++:(I--,0>I&&(I=0),n=0==I),n&&t.mod({selected:e})}function u(e){return e.length?a.get(e[0],"geometry.centroid"):void 0}function d(){t.notify("hovered",k.id,k.type)}function h(){t.notify("unhovered",k.id)}function p(e){"website"!=e&&k[e]?t.notify("contactClicked",k[e],T):"website"==e&&k.reg_bc_url&&t.notify("firmSiteClicked",{reg_bc_url:k.reg_bc_url,place:T})}function f(){k.reg_bc_url&&t.notify("firmClicked",{place:T,reg_bc_url:k.reg_bc_url})}function m(){C&&C.value&&t.notify("miniCardBookletButtonClicked",C.value,{regBc:C.reg_bc_url,analyticsPlace:T})}function g(){if("default"==a.get(k,"context.servicing_group")&&n.trackEvent("google",["Build_Card_event","Servicing","Item_servicing"]),k.recoveryAd){var e=k.query.house?"Build_search_recovery":"Simple_search_recovery";n.trackEvent("google",["Recovery","Click",e])}}function _(){t.element("plusOne").length&&n.trackEvent("google",["Search","Click","Plusone_Show"]),t.element("booklet").length&&n.trackEvent("google",["Search","Click","Booklet_Show"]),t.element("discounts").length&&n.trackEvent("googleBooklets",["Discount",k.recoveryAd?"Recovery_Button":"Search_Button","Show"]),t.element("floors").length&&n.trackEvent("googleFloors",["Floors_Enter","Search_Button","Show"])}function v(){t.notify("firmDisplayed",[k.id],T),"branch"==k.type&&n.writeBssInfoInCookie(k,T)}function y(){j.changeTimeParam($(this))}function b(e){var t={place:T,sid:n.session,user:n.user,ill:a.get(k,"bss.ill")};e.value=j.addBssParamsToLink(e.value,t)}var k,w,x,C,L,I=0,T=null,S=e("./viewModel"),E=req("helpers/outputify"),P=req("helpers/contact"),j=req("helpers/analytics"),M=req("helpers/firm");return w={tag:"article",inheritBssHash:!0,init:function(e){if(k=e&&e.model||{},T=e&&e.analyticsPlace,"branch"==k.type){var n=req("helpers/contact");k.contact_groups=n.unshiftAdsLinkToContacts(k.contact_groups,k.ads),k.phone=n.firstByType("phone",k.contact_groups)||n.firstByType("fax",k.contact_groups),k.website=n.firstByType("website",k.contact_groups),k.website&&b(k.website),k.name_ex&&(k.fullName=E.getName(a.omit(k.name_ex,"addition")))}k.staticId=M.getStaticId(k.id),t.viewContext=S(k,t,{offline:t.registry.get("offline"),plusOneFeature:r.get("plusOne"),searchType:e.searchType}),L=t.viewContext;var i=o.getSettings().advWarning&&!!k.ads;t.viewContext.showAdvWarning=i,C=M.getBooklet(k,o),t.mod({booklet:!!C,cute:!C&&!!k.ads,recovery:!!k.recoveryAd,type:L.type,favorite:!!k.isFavorited,advWarning:i,highlightAa:k.hasStopFactors,asIs:L.asIs,searchType:e.searchType}),t.element("icon").mod({city:L.city&&L.city.code,transportType:L.transportType})},clientInit:function(){r.get("floors")||$(".miniCard__btn.miniCard__floors").mod({hidden:!0})},elements:{block:{click:function(){g(),t.notify("clicked",k,t.block())},touchstart:d,touchmove:d,touchcancel:h,touchend:h,mouseenter:d,mouseleave:h},photosPreviewBooklet:{selector:".miniCard__photosPreview._type_booklet",click:function(e){e.stopPropagation(),f(),m(),n.trackEvent("google",["Search","Click","Photo"])}},plusOne:{click:function(e){var a=M.getPlusOne(k);e.stopPropagation(),f(),a&&a.reg_bc_url&&t.notify("plusOneClicked",{place:T,reg_bc_url:k.reg_bc_url}),t.notify("plusOne",k.staticId,a),n.trackEvent("google",["Search","Click","Plusone_click"])}},descWebsite:{click:function(e){e.stopPropagation(),n.trackEvent("google",["Search","Click","Site"])},mouseenter:y,focus:y},phone:{click:function(e){if(e.stopPropagation(),p("phone"),!t.ua().isPhone&&r.get("p2d")){e.preventDefault(),t.mod({phone:"shown"}),x||t.init("push2dialCaller",function(e,n){e||(t.block().append(n.render()),n.bindEvents(),x=n)});var a=k.fullName,i=P.firstByType("phone",k.contact_groups),o=i&&i.value;o&&x["interface"].dial(this,o,a),n.trackEvent("google",["Search","Click","P2D"])}}},phoneShow:{click:function(e){e.stopPropagation(),t.mod({phone:"shown"}),n.trackEvent("google",["Search","Click","Phone"]),f(),p("phone")}},booklet:{click:function(e){e.stopPropagation(),e.preventDefault(),f(),m(),n.trackEvent("google",["Search","Click","Booklet_click"])}},discounts:{click:function(e){e.stopPropagation(),e.preventDefault(),f();var n=M.getDiscounts(k,s.getRegion());t.notify("discountsButtonClicked",{branchId:M.getStaticId(k.id),rubrics:n.rubrics,recovery:k.recoveryAd,place:T,reg_bc_url:k.reg_bc_url})}},floors:{click:function(e){e.stopPropagation();var i=l.getByBuildingId(a.get(k,"address.building_id"));t.notify("floors",i,{reg_bc_url:k.reg_bc_url,branchId:k.id}),n.trackEvent("googleFloors",["Floors_Enter","Search_Button","Click"]),e.preventDefault()}},recoveryHeader:{click:function(e){e.stopPropagation()}},headerTitleLink:{click:function(e){e.preventDefault()}},filials:{click:function(e){e.stopPropagation(),f(),t.bssContext.startNewChain({pr:"filial"}),t.notify("branchesClick",{id:k.org&&k.org.id,place:T,reg_bc_url:k.reg_bc_url}),n.trackEvent("google",["Search","Click","Branches"]),e.preventDefault()}}},viewAttrs:function(){var e;if(t.isMausoleum){switch(k.type){case"branch":e=a.clone(k.point);break;case"station":e=i.parsePoint(u(k.platforms));break;default:k.geometry&&(e=i.parsePoint(k.geometry.centroid))}return{"data-mausoleum-lon":a.get(e,"lon")||"","data-mausoleum-lat":a.get(e,"lat")||"","data-mausoleum-seo-link":a.get(t.viewContext,"seoLinkBlock")||""}}return{}},"interface":{unselect:function(e){e&&e.except&&e.except==k.staticId||c(!1)},highlight:function(e){a.contains(e,k.staticId)&&c(!0)},unhighlight:function(e){a.contains(e,k.staticId)&&c(!1)},isDisplayed:function(){return!t.mod().collapse},trackBssImpression:a.once(v),trackShowEvent:a.once(_),favoriteAdded:function(e){e!=k.staticId&&e!=M.getStaticId(k.id)||t.mod({favorite:!0})},favoriteRemoved:function(e){e!=k.staticId&&e!=M.getStaticId(k.id)||t.mod({favorite:!1})},favoriteRestored:function(e){e!=k.staticId&&e!=M.getStaticId(k.id)||t.mod({favorite:!0})},favoritesDataReceived:function(e){var n=k.staticId in e||M.getStaticId(k.id)in e;t.mod({favorite:n})},favoritesDataUpdated:function(e){var n=k.staticId in e||M.getStaticId(k.id)in e;t.mod({favorite:n})},getAnalyticsPlace:function(){return T},printContext:function(){var e,n=t.viewContext.profile||{};switch(t.viewContext.type){case"route":case"building":e=[t.viewContext.desc.text,t.viewContext.additionalText];break;case"station":e=[t.viewContext.additionalText];break;case"attraction":case"street":e=[t.viewContext.desc.text];break;case"branch":e=[n.address_name],n.phone&&n.phone.text&&e.push(n.phone.text);break;default:e=[]}var a={title:n.name,details:e};return a},appear:function(){t.mod({appear:!0})}}}},t.exports._args=["slot","$analytics","$i18n","$featureSwitcher","$regionManager","$floorsManager"]},{"./viewModel":323,lodash:"lodash"}],"/modules/mixedResults/mixedResults.js":[function(e,t,n){"use strict";var a=e("lodash"),i=e("bluebird"),o=req("helpers/mediaCard"),r=req("helpers/request");t.exports=function(e,t,n,s,l,c,u){function d(n,a){a||(a=t.getActiveTab());var i=[].slice.call(arguments,1);return i.unshift("searchResults[mode="+a+"]:"+n),e.broadcast.apply(e,i)}function h(e){return a.contains(F,e)}function p(){d("drawOnMap")}function f(){a.each(F,function(e){d("clearMap",e)})}function m(e){var n=e.firms&&e.firms.get("dym"),i={branch:"firms",transport:"transport",geo:"geo",places:"geo"};return a.find([t.getActiveTab(),i[n],"firms","geo","transport"],h)}function g(t,n,a){e.notify("setResults",t,n.has("recoveryAds"),n.fetchParams,a)}function _(e,t){var n=a.find(e,function(e){return!e.get("unexpectedError")});if(!n){var i=a.find(e,function(e){return e.get("unexpectedError")}),o=i&&i.get("error")||r.emitError(500,"bad error");return t(o),!0}return null}function v(e,n){if(F=a.reduce(e,function(e,t,n){return t.get("unexpectedError")||t.is("notFound")&&!t.has("filters")||e.push(n),e},[]),a.isEmpty(F)){s.trackEvent("google",["Search","Nothing_Found",t.getQuery()]),t.panels.get("find").notFound=!0,t.actualize("panels");var i=y(e);return i&&s.trackEvent("google",["Search","Dym","Show"]),r.emitError(404,"empty api response",{params:{dym:i}},n),!0}return null}function y(e){var t=a.find(e,function(e){return e.get("rubricsDym")});return t?t.get("rubricsDym"):null}function b(t,n){if(1!=F.length||e.isServer||e.registry.get("isInit"))return null;var a=F[0],i=t[a];if(i.has("filters")||1!=i.get("count"))return null;var o=i.get("firstItem"),r=e.searchContext.makeCurrent(e.moduleId());return r.write("query",M),r.write("requestType","recovery"),r.write("type","query/"+a),r.setFilters(e.broadcast("filters:getDefaultValues")||{}),r.del("lastChangedFilter"),r.write("contextRubrics",o.rubrics||[]),e.registry.set("findOne",!0),n({reason:"oneResult",model:o,query:M}),!0}function k(t,i){var r=a.find(t,function(e,t){return o.needToShowMediaResults(c,n,e,"query/"+t)});return r?(e.notify("showMediaCard"),g("media",r),e.notify("replaceFrame",{moduleName:"mediaResults",moduleData:a.extend({},j,{pageSize:r.get("pageSize"),results:r.get("currentData"),markers:r.get("markersRegular")})}),i(),!0):null}function w(i,o){var r=m(i);t.set("tab",{activeTab:r}),t.actualize("tab"),e.mod({tab:r});var s=a.map(F,function(e){var t=i[e];return{type:"searchResults",data:a.extend({},j,{notSimple:R,type:D||e,model:t})}});return e.initModules(s,function(t,s){return t?void o(t):(a.each(s,function(e){var t=e["interface"].getMode(),n=i[t],a=n.get("headerInfo");N[t]={contentModule:e,type:t,count:a.count,counts:a.counts,active:r==t};var o=!(!n.get("buildingId")||!j.query);g(t,n,o)}),n.loadRegions(function(){c.get("businessLandingDemoMode")||e.broadcast("searchResults:wizardEnable",P(),L())}),void o())}),!0}function x(e,t){var n=[_,v,b,k,w];a.find(n,function(n){return n(e,t)})}function C(t){e.mod({tab:t}),void 0!==t&&null!==t&&e.broadcast("searchResults:activateContent"),e.isClient&&d("scrollToTop")}function L(){var e=(M||"").trim();return e.length>=3?n.search(e,!0,!0):null}function I(e){return a.has(e,"rubricId")||a.has(e,"house")}function T(e){return"firms"==e}function S(e){var t=["text"];return T(e)||t.push("page"),"firms"!=e&&t.push("filters","rubricId"),t}function E(e,t){var n=S(t),i=a.extend({},a.omit(e,n));return"firms"!=t&&e.text?i.query=e.text:e.query&&(i.query=e.query),i}function P(){var e={};return a.each(N,function(t,n){e[n]={generalization:t.count,detail:t.counts}}),e}var j,M,A,D,R,N={},B=["inbuild","filials","rubric","profiles","servicing","rubricsNear"],F=[],O={inheritBssHash:!0,init:function(n,o){function r(e){var t=E(n,e),i=Object.freeze(a.omit(t,"type","searchId","bookletId","columns","typeFit","page","__apiData","media","searchResults"));return u.results({type:D||"query/"+e,params:i,filters:t.filters||{}})}if(!n)return void o();j=n,M=a.result(n,"query.trim"),A=n.rubricId,a.include(B,n.type)&&(D=n.type),R=!D,e.notify("startNewSearch");var s=[];(!M||M.length>=2)&&s.push("firms"),M&&!I(n)&&s.push("transport"),M&&M.length>=2&&!I(n)&&s.push("geo"),e.registry.get("isInit")?e.bssContext.startNewChain({pr:"link",tx:M}):a.get(t,"state.isFromHistory")&&e.bssContext.startNewChain({pr:"back_in_browser",tx:M,updateContext:!0});var l=a.reduce(s,function(e,t){return e[t]=r(t),e},{}),c=a.map(l,function(e,t){var n=T(t)&&j.page||1;return e.loadPage(n)});e.isClient&&(c=c.concat(a.map(l,function(e){return e.loadMarkers()}))),i.all(c).then(function(){e.notify("searchResultsReady"),x(l,o)})["catch"](o)},clientInit:function(){e.setTimeout(function(){return e.broadcast("*:updateScroll")},1e3),O.modHandlers.tab(e.mod().tab)},viewContext:function(){return{results:N}},changeState:function(e){if(e.tab){var t=e.tab.activeTab;h(t)&&(f(),C(t),p())}},elements:{extendedSearch:{click:function(t){e.notify("extendedSearchClicked"),t.stopPropagation()}},scrollBar:{},fade:{}},"interface":{getFiltersData:function(){return d("getFiltersData")},activateContent:function(){O["interface"].deactivatedOnce||e.broadcast("searchResults:registerShowEvents")},updateScroll:function(){e.broadcast("*:updateScroll")},getHeaderInfo:function(e){return d("getHeaderInfo",e)},drawOnMap:p,clearMap:f,setSeoParams:function(){if(D||A)return e.broadcast("searchResults:setSeoParams");var t="firms"==e.mod().tab?e.broadcast("searchResults[mode=firms]:getPage"):null;return e.notifySeoParams({type:"search",tab:e.mod().tab,filters:e.searchContext.getFilters(),page:t,query:M}),!0},getPrintData:function(){return d("getPrintData")},getModuleId:function(){return e.moduleId()}},dispatcher:{"searchResults:summaryChanged":function(t,n){N[t].count=n.count,e.broadcast("wizard:update",P())},"searchResults:isActive":function(t){return t==e.mod().tab}},modHandlers:{tab:function(t){a.each(["firms","geo","transport"],function(n){e.element(n+"Results").mod({active:n==t}),e.element(n+"Title").mod({active:n==t})})}}};return O},t.exports._args=["slot","$appState","$regionManager","$analytics","$i18n","$featureSwitcher","$models"]},{bluebird:384,lodash:"lodash"}],"/modules/museum/museum.js":[function(e,t,n){t.exports=function(e,t){var n,a={init:function(){n=e.registry.get("ua"),e.notify("museumSwitch",!0)},viewContext:function(){var e={};return e="mobile"==n.device.type||"tablet"==n.device.type?{template:"mobileContext"}:{template:"desktopContext"},e.chromeLink=t._config("browsers.chromeLink"),e.firefoxLink=t._config("browsers.firefoxLink"),e.operaLink=t._config("browsers.operaLink"),"Windows"==n.os.name&&(e.ieLink=t._config("browsers.ieLink")),"Mac OS X"==n.os.name&&(e.safariLink=t._config("browsers.safariLink")),e},viewAttrs:{bgcolor:"#333333"},elements:{close:{click:function(){e.mod({disable:!0}),e.notify("museumSwitch",!1)}},browser:{click:function(e){e.stopPropagation()}}}};return a},t.exports._args=["slot","$i18n"]},{}],"/modules/newYearGifts/newYearGifts.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/request");t.exports=function(t,n,o,r,s,l,c,u){function d(){B=!1,h()}function h(){t.mod({ready:!B})}function p(){x=t.element("slider").photor({thumbs:"newYearGifts__sliderThumbs",thumbsLayer:"newYearGifts__sliderThumbsLayer",thumb:"newYearGifts__sliderThumbsLayerItem",viewport:"newYearGifts__sliderViewport",layer:"newYearGifts__sliderLayer",slide:"newYearGifts__sliderItem",keyboard:!1,showThumbs:"dots",loop:!0,delay:220})}function f(e){e?n.setPresentId(e):n.removePresentId(),n.replace()}function m(e){R++;var n=R*D,i=n+D,o=t.element("list");e&&e.length&&a.each(e.slice(n,i),function(e){o.append(t.renderPartial("present",e))}),I=e.length<=i}function g(e){e=e||{},t.notify("showPopup",{present:e.presentName,presentId:e.presentId}),f(e.presentId)}function _(){w&&w.update(),x&&x.photor("update")}function v(e,t){e&&P.registerRepost("fb",S,t)}function y(){var e=null;return k&&k.presents&&k.presents.total&&(e=a.uniq(a.map(k.presents.items,function(e){return e.org.id}))),e}function b(e){var t=y();return t?void u.firms.profiles(t,function(t,n){n&&n.data&&(k.presents.firms=n.data),e()}):void e()}var k,w,x,C,L,I,T,S,E=n.panels.get("presents2015").presentId,P=o.presents({
regionId:r.getRegion().id,selectedId:E}),j=e("./viewModel"),M=e("./util"),A=100,D=20,R=0,N=!1,B=!0,F={init:function(e,n){P.loadData().then(function(e){return e?e.error?void n(e.error):s.get("presents2015")?(k=e,k.cityCode=r.getRegion().code,b(function(e){k=j(k,c),C=a.cloneDeep(k.presents.items),k.presents.items=k.presents.items.slice(0,D),n(e)}),t.mod({noResults:!a.get(e,"presents.total")&&!a.get(e,"winners.total")}),t.registry.get("isInit")&&l.trackEvent("google",["Newyear","Open","Direct"]),void(B&&d())):void i.emitError(404,"presents2015 feature is disabled",n):void i.emitError(404,"empty api response",n)})["catch"](n)},bind:function(){w=t.element("scroller").baron(),p(),E&&t.block().mod({highlightFirstPresent:!0})},viewContext:function(){return k},changeState:function(e){"global"in e&&null===e.global&&l.trackEvent("google",["Newyear","Open","Direct"])},elements:{scroller:{scroll:a.throttle(function(){I||this.scrollTop+this.clientHeight>this.scrollHeight-A&&m(N&&L||C)},300)},select:{click:function(){T=$(this).data("present-name"),S=$(this).data("present-id"),g({presentName:T,presentId:S}),l.trackEvent("google",["Newyear","Gift","Click"])}},winnerName:{click:function(){l.trackEvent("google",["Newyear","Winners","Click"])}},listOrgLink:{click:function(e){e.preventDefault(),t.notify("eventElemClicked",{id:$(this).data("id")}),l.trackEvent("google",["Newyear","Sponsor",r.getRegion().code+", "+$(this).text()])}}},"interface":{updateScroll:_,resize:_,setSeoParams:function(){return t.notify("setSeoParams",{title:c._gg("Подарки от 2ГИС"),description:c._gg("2ГИС приготовил подарки на Новый год! Если верите в чудеса и удачу, выбирайте подарок из списка и делитесь выбором с друзьями. С 1 по 30 декабря, раз в несколько дней, мы будем определять победителей и вручать призы.")}),!0},getShareContent:function(){var e=c._gg("Хочу от 2ГИС %1",T),n=c._gg("#2ГИС_Подарки #2ГИС_Подарок%1",S);return{title:e,desc:n,image:t.config["share.image.presents2015"],callbackFb:v}},increaseRepostCount:function(e){var n=t.element("select").filter('[data-present-id="'+e+'"]').find(t.element("selectCounter")),i=a.find(C,"id",parseInt(e,10));i.stats.reposts_count=parseInt(i.stats.reposts_count.replace(/&thinsp;/g,""),10)+1,n.html(M.doPrettyCount(""+i.stats.reposts_count))}}};return F},t.exports._args=["slot","$appState","$models","$regionManager","$featureSwitcher","$analytics","$i18n","$dgApi"]},{"./util":324,"./viewModel":325,lodash:"lodash"}],"/modules/newYearGiftsPopup/newYearGiftsPopup.js":[function(e,t,n){t.exports=function(e,t,n,a,i){function o(){e.notify("closed"),a.trackEvent("google",["Newyear","Gift","Close"])}function r(t){return e.location.origin()+"/presents2015/"+t}function s(t){var n=e.element("block");n.html(e.renderPartial("step2")),n.mod({step:"2"}),e.notify("shareClicked",t.providerFullName,t.shareLink,t.presentId),c.registerClick(t.provider,t.presentId)}var l,c=n.presents({regionId:i.getRegion().id,selectedId:t.panels.get("presents2015").presentId}),u={init:function(e){l=e},viewContext:function(){return l},elements:{socialsItem:{click:function(){var t=e.element("socials").data("present-id"),n=$(this).mod().social,i={fb:"facebook",ok:"odnoklassniki",vk:"vkontakte"};s({provider:n,providerFullName:i[n],presentId:t,shareLink:r(t)}),a.trackEvent("google",["Newyear","Share",n])}},overlay:{click:o},close:{click:o},waitingBtn:{click:o}},"interface":{dispose:function(){e.dispose()}}};return u},t.exports._args=["slot","$appState","$models","$analytics","$regionManager"]},{}],"/modules/noResults/noResults.js":[function(e,t,n){"use strict";var a=req("helpers/panels"),i=req("helpers/link"),o=e("lodash");t.exports=function(t,n,r,s,l){function c(e,t){e.regions?r.trackEvent("google",["Route_not_found","Show"]):e.rsType?r.trackEvent("google",["RouteSearch","Error","Not_found_"+e.rsType]):"floorsNotAllowedOnPhone"==t?r.trackEvent("googleFloors",["Error","Mobile"]):"floorsWithoutWebGl"==t&&r.trackEvent("googleFloors",["Error","WebGL"])}function u(e){var t=(e||"").trim();return t.length>=3?n.search(t,!0,!0):null}function d(e){var n=u(e);return o.size(n)?(t.init("wizard",{regions:n}),!0):!1}var h,p,f={inheritBssHash:!0,init:function(e){p=e||{};var a=n.getRegion()||{};e.addFirmHref=i.getAddLink(a,"start",l),h=e.errorModuleData||{},c(h,e.msgType),e.isWizardInited=d(s.getQuery()),t.mod({routeSearchType:h.rsType})},clientInit:function(){t.googletag({renderAnyway:!0}),t.notify("clientInit")},bind:function(){var e=t.element("scroller").baron();t.broadcast("googleTagAds:onBannerRender",e.update)},viewContext:function(){var n=e("./viewModel"),a=t.invoke(n,[p]);return t.mod({error:a.templateName}),a.type&&t.mod({type:a.type}),a},dispose:function(){h=p.errorModuleData||{},h.regions&&r.trackEvent("google",["Route_not_found","Close"])},elements:{metarubricsItem:{click:function(e){t.notify("rubricClicked",{name:$(this).data("rubric-query")}),e.preventDefault()}},addFirmBtn:{click:function(){r.trackEvent("google",["Add_Firm","Nothing_found_Add_firm",s.getQuery()])}},linkTaxi:{click:function(){var e=$(this).text();t.notify("rubricClicked",{name:e})}},linkBus:{click:function(){t.notify("linkBusClicked")}},project:{click:function(e){e.preventDefault();var a=$(this).data("id");a==n.getRegion().id?(t.notify("cityModeSetted"),r.trackEvent("google",["Route_not_found","Select","Start_City",1])):(t.notify("changeRegion",a),r.trackEvent("google",["Route_not_found","Select","Finish_City",2]))}},inCityHintLink:{click:function(e){var t=s.getQuery();e.preventDefault(),s.floors.exit(),s.search({query:t}),s.push()}},dymItemLink:{click:function(e){e.preventDefault();var n=$(this),a=n.data("id"),i=n.data("name");t.bssContext.startNewChain({pr:"dym_404",ortx:s.getQuery()}),t.notify("rubricClicked",{id:a,name:i}),r.trackEvent("google",["Search","Dym","Click"])}},googletag:{}},"interface":{tabType:"firms",setSeoParams:function(){return a.isRouteSearchModule(h.name)?(t.notifySeoParams({type:"routeResults"}),!0):!1}}};return f},t.exports._args=["slot","$regionManager","$analytics","$appState","$i18n"]},{"./viewModel":327,lodash:"lodash"}],"/modules/noScript/noScript.js":[function(e,t,n){t.exports=function(){var e={init:function(){},tag:"noscript"};return e}},{}],"/modules/online/online.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/exchange").changeState,o=e("async"),r=e("slot/lib/defer"),s=req("helpers/link"),l=req("helpers/linkURL"),c=e("slot/lib/loadScript"),u=req("lib/request2"),d=e("bluebird");t.exports=function(t,n,h,p,f,m,g,_,v,y,b,k,w,x,C,L){function I(){return t.isGrym?"citySelectDesktop":t.ua().isPhone?"citySelectPhone":"citySelect"}function T(e){t.block().mod({universe:e["controlsGroup/hidden"]})}function S(e){var n=["plusOne","auth","city","panels","feedback","p2d"],i=t.registry("pageViewContext");a.each(n,function(t){var n=e[t];if(n)switch(t){case"plusOne":case"feedback":case"city":b.trackPageview();break;case"auth":i.authShown||(b.trackPageview(),i.authShown=!0);break;case"panels":if(n.added||n.replaced){var o=a.some(a.compact(a.union(n.added,n.replaced)),function(e){return"filters"!=e.type});!o&&i.extendedSearchShown||b.trackPageview()}break;case"p2d":i.p2dShown||(b.trackPageview(),i.p2dShown=!0)}})}function E(e){var t=a.keys(e),n=["global","floors","panels",_e,"tab",ve,"photos"];return a.some(t,function(e){return a.contains(n,e)})}function P(){var e,n=f.getState();n.global&&(e=t.broadcast("world:setSeoParams"))||(n.citySelect&&t.broadcast(ve+":setSeoParams"),n.photos&&(e=t.broadcast("generalPhotos:setSeoParams"))||n.panels&&n.panels.length&&(e=t.broadcast("dataViewer:setSeoParams"))||f.floors.isActive()&&(e=t.broadcast("floors:setSeoParams"))||n.photos&&(e=t.broadcast("gallery:setSeoParams"))||n.citySelect||t.broadcast("dashboard:setSeoParams"))}function j(e){var n=e.get("panels").length>0&&!e.floors.isInitialFloorState()?"visible":"hidden";t.mod({dashboard:e.get("dashboard"),dataViewer:n,side:e.inGlobal()?"global":"search"})}function M(e,a,i){var o=!t.isGrym&&(e.currentLanguage!=a.currentLanguage||e.country_code!=a.country_code);if(a.redirectDomain||o){var r;a.redirectDomain&&(r=k._config("projectURL",a.country_code));var s={city:a.code,id:a.id};if(w.get("globalMap")){var c=f.get("mapcenter")||{};s.countryFrom=x.getItem(t.config["countryFrom.storageKey"])||e.country_code,s.lat=c.lat,s.lon=c.lon,s.zoom=(f.get("zoom")||{}).zoomlevel}var u=f.get("geolocation")?"regionCityWithGeolocation":"regionCity";window.location=l(u,s,r),t.registry.set("redirecting",!0)}else if(ye(a.id)){var d=f.getLang();if(f.clear(),t.isGrym){var h=f.getPositionInfo(),p=e.id,m=req("lib/offlineStorage/offlineStorage")();p&&h&&h.lon&&h.lat&&m.set(h,"positions",p)}f.setRegion(a.id,w.get("globalMap")),i&&(f.changeCenter(i),f.changeZoom(i.zoom)),f.setLang(d),f.push(),t.broadcast(ve+":selectCurrentRegion",a.id)}else n.downloadRegion(a.id),f.set("citySelect",!0),f.panels.clear(),f.push()}function A(e,i,o){t.cityFrequency.increment(e);var r=a.clone(n.getRegion());d.all([n.loadRegion(e),L.loadList(e)]).then(function(a){var s=a[0];t.broadcast("suggest:setText"),r.id==s.id?(O(n.getRegion().id),D(i)):i||!w.get("globalMap")?M(r,s,o):t.broadcast("map:setDefaultRegionViewById",e),w.get("ginzaProject")&&t.init("ginzaProject")})}function D(e){f.inGlobal()?e?f.exitGlobal():t.broadcast("map:setDefaultRegionView"):(f.del("citySelect"),f.toggleDashboard("visible"),f.panels.clear(),f.resetSearchBar(),f.floors.exit()),f.push(),t.broadcast("citySelectPhone:showMobileDashboard")}function R(){if("undefined"!=typeof DGOfflineAPI){var e=n.getRegion();DGOfflineAPI.applicationWindow.setTitle(ue(k,e))}}function N(e){m.open(e.typeProvider,e.id,e)}function B(e){e.utm=e.utm||"url";var a=n.getRegion(),i=s.getOwnerUrl(a,e.utm,e.firmId,k),o={value:i,width:990,height:800,hidden:!0},r=t.init("plusOne",o),l=r.render();t.broadcast("popup:show",l,"transparent"),r.bindEvents()}function F(){m.close()}function O(e){var n=t.config["geoip.cookieExpires"];t.isClient&&t.cookie(t.config["city.cookieName"],e,{expires:n,path:"/"})}function z(){Y()&&(x.setItem("lightboxMobileShown",!0),t.init("lightboxMobile",function(e,n){t.block().append(n.render()),n.bindEvents()}))}function q(e,n,i){i=i||a.noop;var o=t.modules[e];return o?void i():void t.init(e,n,function(t,n){U(e,n),i()})}function U(e,n){t.isClient&&(h.registerWidget(n),n.slot.shouldRender()&&(t.element(e).html(n.render()),n.bindEvents()))}function H(e){e=e||a.noop,"visible"!=f.get("dashboard")||f.inGlobal()?e():q(_e,{},e)}function G(e){e=e||a.noop,f.get("whatsNew")?(t.broadcast("extras:hidden",!0),q("whatsNew",{},e)):e()}function W(e){e=e||a.noop,f.inGlobal()?q("world",null,e):e()}function V(e){e=e||a.noop,w.get("floors")&&f.floors.isActive()&&"hidden"!==f.get("floorsDashboard")&&!t.ua().isMobile?q("floorsDashboard",{complexId:f.get("floors").complexId,bssHash:f.get("floors").bssHash},e):e()}function Z(e){e=e||a.noop,w.get("floors")&&f.floors.isActive()&&!f.floors.isInitialFloorState()&&(f.floors.switchToFloorsResults(),f.replace());var t=f.inGlobal()||f.floors.isInitialFloorState();q("dataViewer",{panels:t?[]:f.get("panels"),minimized:f.get("dataViewer/minimized")},e)}function Y(){var e=w.get("lightboxMobile"),n=!x.getItem("lightboxMobileShown"),a=t.isInitialState();return e&&n&&a}function K(e,n){w.get("floors")&&ce!=e&&(t.init("floors",{complexId:e,initialBranchId:n},function(e,n){t.element("floors").append(n.render()),n.bindEvents()}),ce||(t.mod({floors:"open"}),t.broadcast("*:enterFloors")),ce=e)}function X(e,o){if(t.action("queryChange")(),"from"in e||"to"in e||"rsType"in e||"waypoints"in e){var r=!(!o.get("from")||!o.get("to"))||!!o.panels.find("routeSearch");r&&((e.to||e.from)&&o.getWaypoints()&&(o.setWaypoints(),o.replace()),t.onTransitionEnd(function(){t.action("showRouteSearchCard")()}))}if(e.panels&&e.panels.added&&e.panels.added.has("booklet")&&t.mod({booklet:!0}),"floors"in e&&(a.get(e.floors,"complexId")?K(e.floors.complexId,e.floors.initialBranchId):ce=null),j(o),e.city&&(O(e.city.id),n.initRegion(e.city.id),t.broadcast(ve+":regionChanged",e.city.id),b.trackEvent("launch",[e.city.id]),me=!1),e.plusOne&&N(e.plusOne),e.promoAccount&&B(e.promoAccount),null===e.plusOne&&F(),i.resolveFeedbackDiff(t,e),e.auth&&(t.broadcast("auth:close"),t.init("auth",e.auth,function(e,n){t.block().append(n.render()),n.bindEvents()})),null===e.auth&&t.broadcast("auth:close"),e.download){var s=t.init("download",{});t.block().append(s.render()),s.bindEvents()}if(null===e.download&&t.modules.download&&t.modules.download.dispose(),e.share&&t.init("share",{},function(e,n){t.block().append(n.render()),n.bindEvents()}),null===e.share&&t.broadcast("share:close"),e.p2d&&t.init("push2dial",e.p2d,function(e,n){t.element("push2dial").append(n.render()),n.bindEvents()}),null!==e.p2d&&null!==e.bindPhone||t.broadcast("push2dial:dispose"),e.photos&&(t.modules.generalPhotos||t.init("generalPhotos",e.photos,function(e,n){e||(t.block().append(n.render()),n.bindEvents())})),e.whatsNew&&G(),null===e.whatsNew&&(t.broadcast("whatsNew:dispose"),t.broadcast("extras:hidden",!1)),null===e.photos&&t.broadcast("generalPhotos:dispose"),"dashboard"in e&&(t.mod({dashboard:e.dashboard}),"visible"==e.dashboard&&H()),"floorsDashboard"in e&&"visible"==e.floorsDashboard&&V(),"controlsGroup/hidden"in e&&t.block().mod({universe:e["controlsGroup/hidden"]}),E(e)&&t.onTransitionEnd(function(){t.isGrym?R():P()}),"updateApp"in e)if(e.updateApp){var l=t.init("updateApp");t.block().append(l.render()),l.bindEvents()}else t.broadcast("updateApp:close");if("giftPopup"in e){var c=e.giftPopup;c?t.init("newYearGiftsPopup",c,function(e,n){t.block().append(n.render()),n.bindEvents()}):t.broadcast("newYearGiftsPopup:dispose")}if("awardPopup"in e){var u=e.awardPopup;u?t.init("awardPopup",u,function(e,n){t.block().append(n.render()),n.bindEvents()}):t.broadcast("awardPopup:dispose")}t.onTransitionEnd(function(){S(e)})}function J(e){return!t.mod().minimized&&(e||!!t.mod().full)}function Q(){return!!f.get("share")}function ee(){return!!f.get("feedback")}function te(){return t.isGrym&&DGOfflineAPI.activeRegionContext.resolve("regionHeader").id}function ne(){f.get("citySelect")&&w.get("globalMap")&&(f.del("citySelect"),f.enterGlobal(!0),f.getZoom().zoomlevel>t.config["globalMap.globalZoom"]&&f.changeZoom(t.config["globalMap.default.zoom"]),f.actualize())}function ae(){if(w.get("globalMap")){var e=(f.getZoom()||{}).zoomlevel;if(e){var n=e>t.config["globalMap.cityZoom"];if(n){if(f.inGlobal())return"exit"}else if(!f.inGlobal())return"enter"}}else if(f.inGlobal())return"exit";return null}function ie(e){function i(e){f.setLang(e),t.isServer?f.actualize("lang"):f.replace()}var o=e&&!a.endsWith(e,n.getRegion().domain);if(w.get("languageSwitcher")){var r=t.cookie(t.config.multilangCookie),s=n.getRegion().availableLanguages;if(!s)return void(f.getLang()&&i(null));var l=k.getPreferredLang(p.get("Accept-Language"),s,n.getRegion().defaultLanguage);if((!r&&f.getLang()||t.isMausoleum)&&(l=f.getLang()),t.isMausoleum)return void i(l);o||a.contains(s,r)||(r=l,t.cookie(t.config.multilangCookie,l,{path:"/",expires:367})),r==n.getRegion().defaultLanguage&&(r=null),f.getLang()!=r&&i(r)}}t.requireComponent("userActivity");var oe,re,se,le,ce,ue=req("helpers/desktop/makeWindowTitleForDesktop"),de=!t.isGrym,he=!t.isGrym,pe=t.isGrym,fe=w.get("extraLayers"),me=!1,ge=!t.isGrym,_e=t.ua().isPhone?"citySelectPhone":"dashboard",ve=I();m.on("plusOneActivated",function(e){var n=t.init("plusOne",e),a=n.render();t.broadcast("popup:show",a)}),m.on("plusOneClosed",function(){t.broadcast("popup:close")}),m.on("legacyWidgetClosed",function(){f.closePlusOne(),f.push()}),t.action("updateModifiers",j);var ye=function(e){if(!t.isGrym)return!0;var a=n.getRegion(e);return a.can_be_opened};t.action("changeRegion",A),n.on("changeRegion",A),t.action("cityModeSetted",D),t.action("setDesktopTitle",R),n.onInit(R);var be={init:function(e,a){function i(a){var i=e.city||te(),o=f.getRegionId()||i;d.all([n.loadRegion(o),L.loadList(o)]).then(function(i){var r=i[0];o=r.id,n.initRegion(o,function(){var n=ae();if(n){switch(n){case"enter":f.enterGlobal();break;case"exit":f.exitGlobal()}f.actualize("global")}ne(),f.inGlobal()&&(f.panels.clear(),f.actualize("panels"),f.del("rsType"),f.actualize("rsType"),f.del("to"),f.actualize("to"),f.del("from"),f.actualize("from"),f.del("waypoints"),f.actualize("waypoints"),f.del("routeTab"),f.actualize("routeTab")),j(f),f.stateConf.conf.seoDefaults.nearZoom=k.getSettings().zoom.nearZoom,t.isClient&&!t.registry.get("bssFromOtherTab")&&(f.inGlobal()?me=!0:b.trackEvent("launch",[o])),f.setRegion(o),ie(e.host),t.isClient&&(r.redirectDomain&&(location.hostname=k._config("projectDomain")),f.replace()),a()})})}function r(e){t.isClient&&(y.on("loggedIn",function(e){t.broadcast("*:loggedIn",e)}),y.on("loggedOut",function(){var e=t.requireComponent("p2d");e.startup(),t.broadcast("*:loggedOut"),t.modules.dashboard.slot.rerender()})),y.startup(function(n){n&&t.isClient&&t.broadcast("*:loggedIn",n),e()})}function s(e){return t.isServer?void e():void v.startup(function(){t.broadcast("tools:showMobileName",v.getBinding()),e()})}function l(e){var n=[];n.push({type:"searchBar",data:{text:f.getQuery(),to:f.get("to"),from:f.get("from"),state:f.get("routeTab"),type:f.getRouteSearchType()}});var a=!!t.cookie(t.config["static.withoutInfo.cookieName"]);if(t.ua().isMuseum&&!a&&n.push({type:"museum"}),he&&n.push({type:"ruler",data:{ruler:f.get("ruler")}}),pe&&n.push({type:"rotate",data:{angle:f.getAngle()}}),n.push({type:"zoom"}),de&&n.push({type:"congestion",data:{isActive:f.get("traffic")}}),ge&&n.push({type:"geoLocation"}),n.push({type:"map",data:{zoom:f.get("zoom"),mapcenter:f.get("mapcenter"),to:f.get("to"),from:f.get("from"),routeTab:f.get("routeTab"),ruler:f.get("ruler")}}),n.push({type:"tools",data:{mods:{orientation:f.get("tools")||"horizontal"}}}),n.push({type:"extras",data:{mods:{vertical:null,shareIsOpened:Q(),feedbackIsOpened:ee()},printFeature:w.get("print")}}),f.floors.isActive()){var i=f.get("floors").complexId;L.hasComplex(i)?(ce=i,n.push({type:"floors",data:{complexId:i}})):(f.floors.exit(),f.replace())}t.initModulesSeries(n,function(){h.registerMap(t.modules.map),h.registerWidget(t.modules.searchBar),h.registerWidget(t.modules.searchBar,"buttons"),h.registerWidget(t.modules.congestion),h.registerWidget(t.modules.ruler),h.registerWidget(t.modules.extras),h.registerWidget(t.modules.geoLocation),h.registerWidget(t.self(),"copyright"),h.registerWidget(t.modules.rotate),e()})}function c(e){function n(e){t.initModules(a,e)}var a=[{type:"popup"},{type:"noScript"}];fe&&a.push({type:"extraLayers",data:f.extraLayers.get()}),f.get("photos")&&a.push({type:"generalPhotos",data:f.get("photos")}),p.get("isSearchBot")&&a.push({type:"jsonld",data:{model:{mainUrl:k._config("projectURL")},type:"mainsite"}}),o.parallel([n,G,Z,H,W,V],function(){h.registerWidget(t.modules.zoom),e()})}function m(e){if(t.isServer)return void e();var n=[];f.get("feedback")&&n.push({type:"feedback",data:f.get("feedback")}),f.get("share")&&n.push({type:"share",data:{}});var a=f.get("bindPhone");if(a&&n.push({type:"push2dial",data:{state:"bind",pin:a.pin}}),n.push({type:"promoTooltip",data:{canOpenTooltip:!(Q()||ee())}}),f.get("auth"))n.push({type:"auth",data:f.get("auth")});else if(f.get("social")){var i=f.get("social").provider;f.removeSocial(),f.replace();var o=window.location.search,r={type:"auth",data:{authType:"response",title:k._t("Ошибка авторизации")}};-1!=o.indexOf("error")?(y.trackSocialLogin(i,!1),r.data.text=k._t("Не удалось авторизоваться через социальную сеть. Попробуйте позже."),n.push(r)):-1!=o.indexOf("denied")?(r.data.text=k._t("Вы должны авторизовать приложение."),n.push(r)):-1!=o.indexOf("ok")&&(y.trackSocialLogin(i,!0),y.socialStartup(function(){window.close()}))}t.initModules(n,function(t,n){le=n,e()})}function g(e){return t.isMausoleum?void re.then(function(t){se=t,e()}):void e()}if(t.registry.set("offline",t.isGrym),t.isGrym){var _=t.requireComponent("checkNetwork");oe=_.check(),_.processUpdate()}t.isClient&&(C.clear(),b.setPlaceCatalog()),n.loadRegions(),(t.isClient||t.isMausoleum)&&(re=new d(function(e,n){u("get",t.location.absoluteUri(t.config["symbols.url"])).timeout(t.config["symbols.timeout"]).then(function(t){e(t.text)})["catch"](n)})),o.series([i,r,l,c,s,m,g],function(){t.setTimeout(function(){t.registry.set("isInit",!1);var e=t.broadcast("dataViewer frame[:last]:getNoResultsError");e&&t.registry.set("noResultsError",e),P(),t.isClient&&(f.queryString.has("printmode")&&(t.broadcast("*:initPrint",window.parent.externalPrintParams||{}),t.mod({bare:!0})),re.then(z));var i=k.getSettings().tools.downloadBtn;i&&t.mod({showDownloadBtn:!0}),w.get("floors")&&f.floors.isActive()&&t.mod({floors:"open"}),t.mod({projectHasLangSwitcher:w.get("languageSwitcher")&&!!n.getRegion().availableLanguages}),a()},0)})},clientInit:function(){if(le&&a.each(le,function(e){t.block().append(e.render())}),t.broadcast("map:setReadyDraw"),T(f.getState()),re.then(function(e){var n=t.ua().browser;t.block().append(e),"Opera"==n.name&&n.major<=12&&$("svg.icon").each(function(){$(this).append(" ")})}),r.when(oe).then(function(){t.registry.get("offline")||c(t.config["plusone.libURL"],t.ifAlive(function(){var e=f.get("plusOne");e&&N(e)}))}),f.floors.isActive())if(w.get("floors"))t.mod({floors:"open"}),t.broadcast("*:enterFloors");else if(t.broadcast("*:exitFloors"),f.floors.exit(),f.set("isFloorsWarning",!0),t.mod({floors:null}),f.replace(),!f.panels.find("floorList")){var e;e=t.ua().isPhone?"floorsNotAllowedOnPhone":"floorsWithoutWebGl",t.action("showFrame")("noResults",{msgType:e})}$(document).on("keyup",function(e){27==e.keyCode&&(f.escButtonApi.reactOnEsc(),f.push())}),$(document).on("keydown keyup",function(e){if(e.ctrlKey||e.metaKey){var a="keyup"==e.type,i="keydown"==e.type,o=e.target.tagName,r=n.getRegion().id==t.config.universeId,s=t.isGrym&&!r&&"INPUT"!=o&&"TEXTAREA"!=o;if(s)switch(e.keyCode){case i&&37:t.action("rotate")({cw:!1});break;case a&&38:t.action("rotate")({"default":!0});break;case i&&39:t.action("rotate")({cw:!0})}switch(e.keyCode){case i&&80:if(w.get("print"))return t.action("print")({analyticsAction:"CTRL_P"}),!1}}return null});var i=a.debounce(function(){b.trackEvent("google",["Print","Print"])},500);if($(window).on("beforeprint",i),window.matchMedia){var o=window.matchMedia("print");o.addListener(function(e){e.matches&&i()})}window.onerror=function(e,n,a){return t.sendError(e,{line:a,script:n,from:"onerror",userAgentInfo:navigator.userAgent+" -> "+n+" : "+a}),!1},t.isGrym&&t.sendErrorFromStorage(),jQuery.error=function(e){t.sendError(e,{form:"JQuery error"})},$(window).on("resize",a.debounce(function(){t.broadcast("dataViewer:resize"),t.broadcast("searchBar:resize"),t.broadcast("extraLayers:shouldHideTooltip")},400)),$(window).on("visibilitychange",function(){t.broadcast("googleTagAds:visibility",document.hidden)}),$(window).on("orientationchange",function(){t.broadcast("firmCard:orientationСhange"),t.broadcast("card:orientationСhange")}),$(window).on("message",function(e){var i;try{var o=e.originalEvent.data;a.isString(e.originalEvent.data)||(o=JSON.stringify(e.originalEvent.data)),i=JSON.parse(o)}catch(r){}if(i=i||{},"state"===i.type&&i.url){var l=s.removeDomainFromUrl(decodeURIComponent(i.url+"")),c=n.getRegion().country_code;f.parse(l,function(e){var o=n.getRegion(a.get(e,"city.id")).country_code;return c!=o?void window.open(i.url).focus():(t.bssContext.startNewChain({pr:"media"}),f.assign(e,!0),b.setPlaceCatalog(),void f.push())})}if("mkb"===i.type&&i.id&&(t.bssContext.startNewChain({pr:"media"}),t.action("showFrame")("firm",{id:i.id})),"mkb"==i.type&&i.source){var u=t.init("video",i);t.element("video").append(u.render()),u.bindEvents()}"teaser"==i.type&&(t.bssContext.startNewChain({pr:"dashboard_promo"}),t.action("teaserClick")(i)),"promoOwner"==i.type&&("loaded"==i.action?(t.broadcast("popup:loader",!1),t.broadcast("plusOne:loaded")):t.broadcast("popup:close"))}),$(window).on("unload",function(){t.action("queryChange")(!0)});var l="closed"==x.getItem("phoneBar"),u=k.getSettings().promoMobile&&w.get("promoMobileFull"),d="closed"==x.getItem("promoMobileFull"),h=!(t.ua().isPhone&&!d&&u)&&"start_summer"!=f.queryString.get("utm_campaign"),p=k.getSettings().mobileAppPlatforms,m=t.ua().os.name?t.ua().os.name.toLowerCase().replace(" ",""):"android";if(t.ua().isMobile&&!l&&a.contains(p,m)&&h){var g=t.init("phoneBar",{os:m}),_=g.render();t.block().append(_),t.mod({phoneBar:!0}),b.trackEvent("google",["Mobile_vers","Store_show",t.ua().os.name])}if(t.ua().isPhone&&a.contains(p,m)&&!d&&u){var v=t.init("promoMobileFull",{os:m}),y=v.render();t.block().append(y),b.trackEvent("google",["Promo_Mobile_Fullscreen","Show",t.ua().os.name])}if(t.setInterval(function(){t.broadcast("*:updateTime")},15e3),f.get("promoAccount")&&(B(f.get("promoAccount")),b.trackEvent("google",["Firm_Card_event","Url"])),t.isGrym){var C=t.requireComponent("appUpdater"),L=function(){f.set("updateApp",!0),f.push()};C.isApplicationAvailableToInstall()?L():C.applicationAvailableToInstall.connect(L)}w.get("ginzaProject")&&t.init("ginzaProject"),t.ua().isPhone&&a.get(screen,"orientation.lock")&&screen.orientation.lock("portrait")},changeState:X,viewContext:function(){return{showExtraLayers:fe,showRuler:he,showRotate:pe,showTraffic:de,showGeoLocation:ge,showApiCopyright:!t.isGrym,showPrint:w.get("print"),api:s.getApiLink(n.getRegion(),k),osm:t.config["license.osm"],agreement:k._config("helpLink.licensing"),symbols:se}},elements:{overlay:{click:function(e){e.stopPropagation()}},copyrightOsmLink:{click:function(){b.trackEvent("google",["Copyright","OSM"])}},copyrightLawLink:{click:function(){b.trackEvent("google",["Copyright","LicenseAgreement"])}},copyrightApiLink:{click:function(){b.trackEvent("google",["Copyright","API"])}},printOverlayButton:{click:function(){window.print(),t.mod({waitForPrint:!1,printFailure:!1})}}},"interface":{enterGlobal:W,exitGlobal:function(){t.isClient&&(me&&(b.trackEvent("launch",[f.getRegionId()]),me=!1),o.parallel([H,Z],function(){t.broadcast("*:updateScroll")}))},getMixedResultsModuleId:function(){return t.broadcast("mixedResults[:last]:getModuleId")}},modHandlers:{dashboard:function(e){t.broadcast("dashboard:setMode",e),t.broadcast("dataViewer:summary",e),"visible"==e&&t.broadcast("weather:updateWeather")},flying:function(e){t.isClient&&!e&&t.broadcast("*:updateScroll")},dataViewer:function(e){t.isClient&&"visible"==e&&t.broadcast("*:updateScroll")},full:function(e){t.broadcast("extras:vertical",J(e))},minimized:function(e){e?t.broadcast("extras:vertical",!1):t.broadcast("extras:vertical",J(!1))}},dispatcher:e("./actions")(t)};return be},t.exports._args=["slot","$regionManager","$viewport","$syncRegistry","$appState","$plusOne","$commonCookie","$wkt","$p2d","$authorization","$analytics","$i18n","$featureSwitcher","$localStorage","$sessionStorage","$floorsManager"]},{"./actions":334,async:383,bluebird:384,lodash:"lodash","slot/lib/defer":489,"slot/lib/loadScript":"slot/lib/loadScript"}],"/modules/pagination/pagination.js":[function(e,t,n){var a=e("lodash");t.exports=function(t,n,i){function o(){!c&&t.block().seeable(.5)&&(n.trackEvent("google",["Pagination_Control","Show_Panel"]),c=!0)}var r,s,l,c,u,d=e("./viewModel");return{init:function(e){e.context&&t.mod({context:e.context}),s=a.extend(e.seoParams,{city:i.getRegion().code}),r=e.page,l=parseInt(r.current,10),t.ua().isMobile&&(u=4)},viewContext:function(){return c=!1,l=parseInt(r.current,10),d(r,s,u)},clientInit:function(){o()},elements:{page:{click:function(e){e.preventDefault(),$(this).mod().current||(l=parseInt($(this).text(),10),t.notify("pagePicked",l),n.trackEvent("google",["Pagination_Control","Click",l]))}},arrow:{click:function(){if(!$(this).mod().disabled){var e=$(this).mod().right?1:-1;l+=1*e,t.notify("pagePicked",l),n.trackEvent("google",["Pagination_Control","Click",e>0?"Next":"Previous"])}}}},"interface":{checkSeeability:a.debounce(o,500),updatePaginationPagesQuantity:function(e){u=e,t.rerender()},invalidate:function(e){r=e||r,t.rerender()},setHidden:function(e){t.mod({hidden:e})}}}},t.exports._args=["slot","$analytics","$regionManager"]},{"./viewModel":339,lodash:"lodash"}],"/modules/patchwork/patchwork.js":[function(e,t,n){var a=e("lodash"),i=e("./patchworkify"),o=e("./viewModel"),r=req("helpers/linkURL");t.exports=function(e,t,n,s){function l(t){if(e.isServer)return y;var n=t||e.block().width();return Math.floor((n+w.columnGap)/(w.columnWidth+w.columnGap))||1}function c(e,i){var o,s=t.getRegion().code,l=n.get("mapcenter");switch(e.dataProvider){case"geo":o="geoPhoto";break;case"firm":o="firmPhoto";break;case"firmAndBooklet":o="firmBookletPhoto"}return a.map(a.get(e,"photos.items"),function(t,n){var c=a.extend({},t);return 0==n&&i||t.isUploadFailed||(c.url=t.url&&t.isUploadInProgress||t.isUploadFailed?t.url:t.getPreview("304x")),c.index=n,c.seoLink=r(o,{city:s,id:e.id,photoId:t.id,albumName:e.albumName,lon:l&&l.lon,lat:l&&l.lat}),c})}function u(t,n,i){var o=n?t:l(t),r=m.redistribute(o),s=e.element("column").length!=o;if((r||i||s)&&e.rerender(),r||i||!k){var c=g.concat(a.values(b)),u=e.element("item");a.each(c,function(e){e.node=u.filter('[data-id="'+e.id+'"]'),e.node.length&&(e.offsetTop=e.node[0].offsetTop)}),k=!0}}function d(e){g=a.filter(g,function(t){return t.offsetTop<e?(h(t),!1):!0})}function h(e){b[e.id]=e;var t=new Image,n=e.url;t.onload=function(){e.node.find(".patchwork__itemImg").css("background-image","url("+n+")"),e.node.mod({loaded:!0}),e.isLoaded=!0,delete b[e.id]},t.onerror=function(){e.isLoadFailed=!0,e.node.attr("data-load-failed",""),delete b[e.id]},t.src=n}function p(t){a.forEach(t,function(t){var n=a.get(t,"errorMessages");n&&n.length>1&&(_||(_=e.init("errorMsg")),t.errorMessageCount=s._hnt("и еще %link{Link %1 ошибка}","и еще %link{Link %1 ошибки}","и еще %link{Link %1 ошибок}",n.length-1,{link:{"class":"patchwork__moreErrors"}}))})}function f(t){var n=e.ua().isMobile,o=n&&!t.noCompact;o&&(e.mod({compact:!0}),w={columnWidth:148,columnGap:8});var r=!o&&!t.noMega;g=c(t,r),e.isMausoleum&&a.each(g,function(e){e.isLoaded=!0}),m=new i(g,{columnCount:t.columnCount||l(),columnWidth:w.columnWidth,columnGap:w.columnGap,mega:r})}var m,g,_,v,y=2,b={},k=!1,w={columnWidth:304,columnGap:16};return{init:function(e){v=e,f(e)},viewContext:function(){var t=m.getItemsByColumns(),n=m.getMega();return n&&(n.megaPhotoFailed=n.isUploadFailed),a.each(t,function(e){a.each(e.items,function(e){delete e.megaPhotoFailed})}),e.invoke(o,[t,n])},elements:{itemLink:{click:function(t){if(t.preventDefault(),!$(this).mod().uploadInProgress&&!$(this).closest(e.element("item")).mod().isUploadFailed){var n=$(this).attr("data-id");e.notify("itemClicked",n)}}},moreErrors:{mouseenter:function(){var t=$(this).closest(e.element("itemLink")).data("id"),n=a.find(v.photos.items,{id:t}),i=a.slice(a.get(n,"errorMessages"),1);e.broadcast("errorMsg:show",{module:_,elemWithError:$(this),msg:i})},mouseleave:function(){e.broadcast("errorMsg:hide")}},closeError:{click:function(t){t.preventDefault(),t.stopPropagation();var n=$(this).closest(e.element("itemLink")).data("id");a.remove(v.photos.items,{id:n}),f(v),e.notify("updateDimensions",!0)}}},"interface":{updateSize:u,loadVisible:d,previewsLoaded:function(t){p(t),v.photos.items=a(t).reverse().concat(v.photos.items).value();var n=!0;f(v),e.notify("updateDimensions",n)},photoUploadFinished:function(t){var n=a.indexOf(v.photos.items,a.find(v.photos.items,{id:t.id}));v.photos.items.splice(n,1,t);var i=!0;f(v),e.notify("updateDimensions",i)},changePhotos:function(t){a.set(v,"photos.items",t),f(v),e.notify("updateDimensions",!0)}}}},t.exports._args=["slot","$regionManager","$appState","$i18n"]},{"./patchworkify":340,"./viewModel":341,lodash:"lodash"}],"/modules/phoneBar/phoneBar.js":[function(e,t,n){var a=req("helpers/link");t.exports=function(e,t){var n,i={init:function(e){n=e&&e.os||"android"},elements:{installLink:{click:function(){e.notify("action","click")}},close:{click:function(){e.notify("action","close");
}}},viewContext:function(){var e=a.getMobileLinks(t,"phoneBar"),i=e[n];i||(i=e.android);var o={title:t._t("Справочник<br>и карта 2GIS"),sub:t._t("Бесплатно"),href:i.href};return o}};return i},t.exports._args=["slot","$i18n"]},{}],"/modules/photosUploader/photosUploader.js":[function(e,t,n){"use strict";var a=e("lodash"),i=e("bluebird");t.exports=function(e,t,n,o,r,s){function l(t){if(w=n.getAuthorizedUserSync().authorizationToken,w&&t.length){var o=a.map(t);i.resolve(o).map(c).then(u).then(function(t){var n=a.map(t,r.photo);return k.onFileLoad?k.onFileLoad(n):e.notify("previewsLoaded",n),a.filter(t,function(e){return e.isUploadInProgress})}).map(d,{concurrency:1})["finally"](function(){w=null})}}function c(e,n){return new i(function(a){var i=f(e,n);if(!i.isValid)return a({id:p(),isUploadFailed:!0,errorMessages:i.errors,fileName:e.name});var r=new FileReader;return r.onload=function(){var n=new Image;n.onload=function(){var t=m(n);return a(t.isValid?{isUploadInProgress:!0,url:r.result,fileName:e.name,file:e}:{id:p(),isUploadFailed:!0,errorMessages:t.errors,fileName:e.name})},n.onerror=function(){a({id:p(),isUploadFailed:!0,errorMessages:o._t("Ошибка при чтение файла"),fileName:e.name}),t.trackEvent("google",["Photos","Add_Photo","Fail_Read"])},n.src=r.result},r.onerror=function(){a({id:p(),isUploadFailed:!0,errorMessages:o._t("Ошибка при чтение файла"),fileName:e.name}),t.trackEvent("google",["Photos","Add_Photo","Fail_Read"])},r.readAsDataURL(e),null})}function u(e){return new i(function(t){var n=a.reduce(e,function(e,t,n){return t.isUploadFailed?e:e.concat(n+1)},[]);return n.length?void s.addPhotos(w,k.type,k.id,k.album,n,function(i,r){i||!r.items?a.forEach(n,function(t){h(e[t-1],t,o._t("Ошибка при загрузке"),"Fail_Server")}):a.forEach(r.items,function(t){a.isUndefined(t.error)?(e[t.uid-1].id=t.id,e[t.uid-1].hash=t.hash):"photoCountLimitExceeded"==t.error.type?h(e[t.error.uid-1],t.error.uid,o._t("Загрузите менее 20 фотографий"),"Fail_Limit"):h(e[t.error.uid-1],t.error.uid,o._t("Ошибка при загрузке"),"Fail_Server")}),t(e)}):void t(e)})}function d(n){return new i(function(e,a){t.trackEvent("google",["Photos","Add_Photo","Start_Upload"]),s.uploadPhoto(w,k.type,k.id,k.album,n.id,n.hash,n.file,function(t,n){return t?void a(t):void e(n)})}).then(function(n){return n.isUploadInProgress=!1,t.trackEvent("google",["Photos","Add_Photo","Success_Upload"]),k.onFileUpload?k.onFileUpload(r.photo(n)):e.notify("photoUploadFinished",r.photo(n)),n})["catch"](function(){var t={id:n.id};return h(t,n.id,o._t("Ошибка при загрузке")),k.onFileUpload?k.onFileUpload(r.photo(t)):e.notify("photoUploadFinished",r.photo(t)),t})}function h(e,n,a,i){e.id||(e.id=p(n)),e.isUploadInProgress=!1,e.isUploadFailed=!0,e.errorMessages=[a],t.trackEvent("google",["Photos","Add_Photo",i])}function p(e){return"error_"+a.now()+"_"+(e||a.random(0,1e3))}function f(e,n){var a=[];return e.size>y&&(a.push(o._t("Размер фото превышает %1 MB",y)),t.trackEvent("google",["Photos","Add_Photo","Fail_Size"])),e.type.match(/image\/(png|jpeg)/)||(a.push(o._t("Фото не соответствует формату jpg или png")),t.trackEvent("google",["Photos","Add_Photo","Fail_Format"])),n>19&&(a.push(o._t("Загрузите менее 20 фотографий")),t.trackEvent("google",["Photos","Add_Photo","Fail_Limit"])),a.length?{isValid:!1,errors:a}:{isValid:!0,errors:null}}function m(e){var n=[];return e.width<b.minWidth&&n.push(o._t("Ширина фото должна быть больше %1 px",b.minWidth)),e.height<b.minHeight&&n.push(o._t("Высота фото должна быть больше %1 px",b.minHeight)),e.width>b.maxWidth&&n.push(o._t("Ширина фото должна быть меньше %1 px",b.maxWidth)),e.height>b.maxHeight&&n.push(o._t("Высота фото должна быть меньше %1 px",b.maxHeight)),e.width/e.height>b.maxHorizontalRatio&&n.push(o._t("Фото слишком широкое")),e.height/e.width>b.maxVerticalRatio&&n.push(o._t("Фото слишком узкое")),n.length?(t.trackEvent("google",["Photos","Add_Photo","Fail_Size"]),{isValid:!1,errors:n}):{isValid:!0,errors:null}}function g(e){e.stopPropagation(),e.preventDefault(),_();var n=e.dataTransfer.files;t.trackEvent("google",["Photos","Add_Photo","Drag_N_Drop",n.length]),l(n)}function _(){var t=e.block();t.mod({hovered:!t.mod().hovered})}function v(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}var y=void 0,b=void 0,k=void 0,w=void 0;return{init:function(t){k=t,"firm"==k.type&&(k.type="branch"),a.isUndefined(k.album)&&(k.album="common"),b=e.config["photosUploader.restricts."+k.album],b||(b=e.config["photosUploader.restricts.default"]),y=1024*b.maxFileSize*1024,e.mod({type:k.blockType})},viewContext:function(){return{photosUploaderRules:o._config("helpLink.photosUploaderRules")}},clientInit:function(){var t=e.element("dropArea")[0];a.isUndefined(t)||(t.addEventListener("dragover",e.ifAlive(v),!1),t.addEventListener("drop",e.ifAlive(g),!1),t.addEventListener("dragenter",e.ifAlive(_),!1),t.addEventListener("dragleave",e.ifAlive(_),!1))},dispose:function(){var t=e.element("dropArea")[0];a.isUndefined(t)||(t.removeEventListener("dragover",v,!1),t.removeEventListener("drop",g,!1),t.removeEventListener("dragenter",_,!1),t.removeEventListener("dragleave",_,!1))},elements:{fileInput:{change:function(e){var n=e.target.files;t.trackEvent("google",["Photos","Add_Photo","Choose_File",n.length]),l(n),$(this).val("")}}}}},t.exports._args=["slot","$analytics","$authorization","$i18n","$models","$photoApi"]},{bluebird:384,lodash:"lodash"}],"/modules/photosUploaderTooltip/photosUploaderTooltip.js":[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e){function t(t){var n={width:e.block().outerWidth(!0),height:e.block().outerHeight(!0)},a=$(window).width(),i=t.offset(),s={width:t.outerWidth(!0),left:i.left,top:i.top},l={top:Math.max(s.top-o-n.height,r)},c=s.left+s.width/2-n.width/2;l.left=Math.floor(c),r>c&&(l.left=r);var d=a-l.left-n.width;return r>d&&(l.left=a-r-n.width),u.offset&&(l.left+=u.offset.x,l.top+=u.offset.y),l}function n(){d||(d=(new Date).getTime());var t=Math.max(s-((new Date).getTime()-d),l);return e.setTimeout(function(){e.dispose()},t)}var i=500,o=16,r=8,s=4500,l=200,c=void 0,u=void 0,d=void 0;return"undefined"!=typeof window&&(window.TestHandles=window.TestHandles||{},window.TestHandles.disablePhotosUploaderTooltip=function(){e.dispose()}),{init:function(t){e.viewContext={textPartial:t.type},u=t.tooltipData,e.mod({type:t.type})},clientInit:function(){e.setTimeout(function(){e.block().css(t(u.sourceElement)),e.mod({shown:!0}),c=n()},i)},elements:{block:{click:function(){a.isFunction(u.clickHandler)&&u.clickHandler(),e.dispose()},mouseenter:function(){clearTimeout(c)},mouseleave:function(){c=n()}},close:{click:function(t){e.dispose(),t.stopPropagation()}}},"interface":{close:function(){e.dispose()}},changeState:function(){e.dispose()}}}},{lodash:"lodash"}],"/modules/plusOne/plusOne.js":[function(e,t,n){t.exports=function(e){var t,n;return t={init:function(t){n={src:t.value,width:t.width+"px",height:t.height+"px",allowTransparency:!0,frameBorder:0},t.hidden&&e.mod({hidden:!0})},tag:"iframe","interface":{loaded:function(){e.mod().hidden&&e.setTimeout(function(){e.mod({hidden:null})},200)}},viewAttrs:function(){return n}}}},{}],"/modules/popup/popup.js":[function(e,t,n){t.exports=function(e){function t(){e.element("content").empty(),e.mod({visible:!1,type:!1}),a(!1),e.notify("close")}function n(t,n){e.element("content").html(t),e.mod({visible:!0}),"transparent"==n&&(a(!0),e.mod({type:n})),e.notify("show",n)}function a(t){e.mod({loading:t})}var i;return i={init:function(){e.mod({visible:!1})},elements:{overlay:{},popup:{click:t},content:{},closeButton:{click:t},preloaderForm:{click:function(e){e.stopPropagation()}}},"interface":{show:n,close:t,loader:a}}}},{}],"/modules/ppnotTime/ppnotTime.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule"),i=function(){return a(function(e){return{viewContext:function(){return{date:e.date,time:e.time,useSelected:e.useSelected}},elements:{date:{change:function(t){e.onDateChangeHandler(t.target.value)}},time:{change:function(t){e.onTimeChangeHandler(t.target.value)}},currentTime:{change:function(t){e.onUserSelectedChangeHandler(t.target.checked)}}}}})};t.exports=i},{}],"/modules/print/print.js":[function(e,t,n){var a=e("lodash"),i=e("url");t.exports=function(e,t,n){function o(){var e;return e="Opera"===p.browser.name&&p.browser.major<=12?"opera12":p.browser.name.toLowerCase(),k[e]||k.other}function r(e){return{height:e.width,width:e.height}}function s(e,t,n,a){var i=0,o=0,r=[],s=[];a.html(t.clone());var l=a.outerHeight(!0);a.html(t.clone().html(e));var c=function(e){var t;return t=e<n.firstColumns.length?n.firstColumns[e]:n.nextColumns,t-l},u=c(0);return $.each(e,function(t,n){var a=$(n).outerHeight(!0);o+=a,o>u&&(i++,u=c(i),o=a,r.push(s),s=[]),s.push(e[t].outerHTML)}),s.length&&r.push(s),r}function l(){e.setTimeout(function(){e.setTimeout(function(){y?e.notify("printSuccess"):e.notify("printFailure")},100),window.print()},500)}function c(e){if($(window).on("beforeprint",e),window.matchMedia){var t=window.matchMedia("print");t.addListener(e)}}function u(e,t){t=t||{};var n=f.wrap.clone().html(e);return t.first||n.prepend(v),t.last||n.append(v),n.get(0).outerHTML}function d(t,n){var i,o,r={},l=e.element("static").outerHeight(!0);i="complex"===g&&f.map?[t.height-l,t.height/2]:"search"===g?[t.height-l,t.height-l]:[t.height-l,t.height],o={firstColumns:i,nextColumns:t.height};var c=s(f.items,f.wrap,o,n);r.dynamic=u(c[0]),r.dynamicSecond=u(c[1]);var d=[];return a.each(c.slice(2),function(e){d.push(u(e))}),r.dynamicNext=d,r}function h(){var t=i.parse(e.location.href(),!0);return t.query||(t.query={}),t.query.random=Math.random(),t.query.printmode="on",t.search=null,i.format(t)}var p,f,m,g,_,v,y,b={width:780,height:1020},k={firefox:{width:740,height:990},safari:{width:740,height:1050},opera12:{width:730,height:1010},ie:{width:740,height:1010},other:b},w={init:function(t){return p=e.registry("ua"),t&&"simple"==t.layout?(f=t,f.isSimple=!0,void e.mod({simple:!0})):(m=!1,e.mod({browser:p.browser.name.toLowerCase(),browserMajor:p.browser.major}),g=t.layout,_=t.externalPrintParams||{},f={map:void 0!==t.map?t.map:!0,partialName:g,mod:_.mod,orientations:{portrait:!0,landscape:!0}},g&&e.mod({layout:g}),void("full"===g?f["static"]=t["static"]:(f["static"]=t["static"].get(0).outerHTML,f.dynamic=t.dynamic,f.items=[],f.dynamic.children().each(function(e,t){f.items.push(t.cloneNode(!0))}),f.wrap=f.dynamic.html(""))))},viewContext:function(){return f},clientInit:function(){if("undefined"!=typeof window&&(window.TestHandles=window.TestHandles||{},window.TestHandles.printPageIsShown=!1),c(function(){window.TestHandles.printPageIsShown=!0,y=!0}),f&&f.isSimple)return void l();y=!1;var t=o();if(m||"full"===g){if(e.block().css("width","100%"),"full"!==g&&(e.element("innerPortrait").css("width",t.width),e.element("innerLandscape").css("width",t.height)),"search"==g||!f.map)return void l();var i=e.element("iframe").get(0),s=n();i.onload=function(){s.resolve()},i.src=h(),window.externalPrintParams=_;var u=n();window.onPrintableReady=a.once(function(){delete window.externalPrintParams,delete window.onPrintableReady,setTimeout(function(){u.resolve()},500)});var p=n();window.isLoaded?p.resolve():$(window).on("load",function(){p.resolve()}),n.when(s,u,p).then(l)}else e.block().css("width",t.width),f.orientations.portrait=d(t,e.element("preload").filter("._orientation_portrait")),e.block().css("width",t.height),f.orientations.landscape=d(r(t),e.element("preload").filter("._orientation_landscape")),m=!0,e.rerender()}};return w},t.exports._args=["slot","$appState","$defer"]},{lodash:"lodash",url:419}],"/modules/productCard/productCard.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/request");t.exports=function(t,n,o,r){function s(){if(!h){var e=t.element("proposal");e.length&&(h=e)}var n=a.remove(h,function(e){return $(e).seeable(.5)});if(!a.isEmpty(n)){var i=d.getProposals(),o=a.map(n,function(e){var t=parseInt($(e).data("index"),10),n=i[t];return{id:n.branch.id,url:n.branch.reg_bc_url}});t.notify("proposalsDisplayed",o)}}function l(){var e=$(this).data("branch");t.notify("proposalHovered",e,"branch")}function c(){var e=$(this).data("branch");t.notify("proposalUnhovered",e,"branch")}function u(e,n){t.element("proposal").filter('[data-branch="'+e+'"]').mod({highlighted:!!n})}var d,h;return{inheritBssHash:!0,init:function(e,a){return t.ua().isPhone?void i.emitError(404,"product not allowed on phone",{msgType:"notAllowedOnPhone"},a):n.get("tyres")?(d=o.product({type:e.productType,id:e.id}),d.request().then(a,a),h=null,void t.notify("inited")):void a({})},viewContext:function(){var n=e("./viewModel");return t.invoke(n,[d.getData()])},bind:function(){t.notify("mediaColumnsWasSet")},clientInit:function(){var e=a.pick(d.getData(),"name","parameters");t.notify("clientInited",e),t.element("scroller").baron(),s()},"interface":{tabType:"firms",drawOnMap:function(){t.notify("mapDataReady",{markers:d.getMarkers()})},clearMap:function(){t.notify("clearMap")},resize:s,highlightProposal:function(e){u(a.first(e),!0)},unhighlightProposal:function(e){u(a.first(e))},setSeoParams:function(){var e=d.getData(),n=r.getFormats().currency,i={type:"productCard",productType:d.getProductType(),id:e.id,name:e.name,params:e.seoParameters.join(", "),price:a.get(e,"price.min")+" "+n.symbol,ogImage:a.get(e,"image.url")};return t.notifySeoParams(i),!0},dissolve:function(){t.mod({hidden:!0})},appear:function(){t.mod({hidden:!1})},updatedFrameSpecialMode:function(e){t.mod({stack:"media"===e})}},elements:{back:{click:function(){t.notify("backLinkClicked")}},scroller:{scroll:a.throttle(s,100)},proposalName:{click:function(e){e.preventDefault(),t.notify("firmDetails",{id:$(this).data("id"),bss:{ill:2}})}},proposalContacts:{click:function(){t.notify("firmDetails",{id:$(this).data("id"),bss:{ill:2}});var e=$(this).closest(t.element("proposal")).data();t.notify("contactsClick",{id:e.id,place:e.index})}},proposal:{mouseenter:l,mouseleave:c},proposalBuy:{click:function(){var e=$(this).closest(t.element("proposal")).data();t.notify("siteClick",{id:e.id,place:e.index});var n=d.getProposals()[e.index],a=n.branch.reg_bc_url;a&&t.notify("firmSiteClicked",{reg_bc_url:a},{ill:2})}}}}},t.exports._args=["slot","$featureSwitcher","$models","$i18n"]},{"./viewModel":342,lodash:"lodash"}],"/modules/productMiniCard/productMiniCard.js":[function(e,t,n){var a=e("lodash");t.exports=function(t){var n;return{tag:"article",init:function(e){n=e,t.mod({withSize:!!a.get(n,"product.size")})},viewContext:function(){var a=e("./viewModel");return t.invoke(a,[n])},elements:{block:{click:function(e){e.preventDefault(),t.notify("click",{id:n.product.id})}}}}}},{"./viewModel":343,lodash:"lodash"}],"/modules/products/products.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/request");t.exports=function(e,t,n,o){function r(){f&&f.update(),m&&m.update()}function s(t){return a.map(t,function(t){return e.init("productMiniCard",{productType:h.getProductType(),product:t})})}function l(t){h.loadNextPage().then(function(n){var i=n.items,o=s(i);p=p.concat(o),e.element("results").append(e.renderPartial("results",{items:o})),a.invoke(o,"bindEvents"),t()},t)}function c(){e.mod({preloader:"main"}),h.loadData().then(function(){e.mod({preloader:!1}),u(!1),p=s(h.getItems()),e.notify("updatedResultsNumber",h.getTotal()),e.element("main").html(e.renderPartial("main",{items:p})),a.invoke(p,"bindEvents")},function(){e.mod({preloader:!1}),u(!0),e.notify("notFound")}),e.element("scroller").scrollTop(0)}function u(t){e.element("main").mod({hidden:t}),e.element("notFound").mod({visible:t}),r()}function d(t){t?h.updateTyresModels(t).then(function(t){e.broadcast("productsFilters:updateSelectbox",{name:"model",values:t})},function(){e.broadcast("productsFilters:updateSelectbox",{name:"model",values:[]})}):e.broadcast("productsFilters:updateSelectbox",{name:"model",values:[]})}var h,p,f,m,g=16,_=a.throttle(function(t){h.hasNextPage()&&!e.mod().preloader&&t.scrollTop+t.clientHeight>t.scrollHeight-500&&(e.mod({preloader:"bottom"}),l(function(){e.mod({preloader:!1})}));var n=e.element("scroller").scrollTop(),a=n>g;e.element("filters").mod({fixed:a})},50);return{init:function(o,r){if(e.ua().isPhone)return void i.emitError(404,"products not allowed on phone",{msgType:"notAllowedOnPhone"},r);if(!n.get("tyres"))return void i.emitError(404,"tyres feature is disabled",r);h=t.products(o.productType);var l=a.extend(h.getDefaultFilters(),o.filters);h.setFiltersValues(l),h.loadData({requestFilters:!0}).then(function(){p=s(h.getItems()),e.init("productsFilters",{filters:h.getFilters(),values:h.getFiltersValues()}),r(),e.notify("updatedResultsNumber",h.getTotal()),e.notify("inited")},function(e){r(e)})},viewContext:function(){return{items:p}},bind:function(){e.setTimeout(function(){f=e.element("scroller").baron({bar:".products__track .track__bar"}),m=e.element("filtersScroller").baron({bar:".products__filtersTrack .track__bar"})},300),e.notify("mediaColumnsWasSet")},clientInit:function(){e.notify("clientInited")},elements:{scroller:{scroll:function(){_(this)}},notFoundReset:{click:function(){e.broadcast("productsFilters:reset")}}},"interface":{tabType:"firms",tabCount:function(){return h.getTotal()},scrollToResultsTop:function(){e.element("scroller").scrollTop(0)},dissolve:function(){e.mod({hidden:!0})},appear:function(){e.mod({hidden:!1})},close:function(){e.notify("close")},setSeoParams:function(){var t={type:"products",productType:h.getProductType(),total:o._ngg("%1 предложение","%1 предложения","%1 предложений",h.getTotal())};return e.notifySeoParams(t),!0},resize:r},changeState:function(e){var t=a.find(a.get(e,"panels.changed",{}),function(e){return"products"==e.diff.type&&e.diff.filters});if(t){var n=a.find(e.panels.value,{type:"products"}).filters;h.setFiltersValues(n),c()}},dispatcher:{"productsFilters:selectboxValueSet":function(e){if("vendor"==e.name){var t=e.value;d(t)}}}}},t.exports._args=["slot","$models","$featureSwitcher","$i18n"]},{lodash:"lodash"}],"/modules/productsFilters/productsFilters.js":[function(e,t,n){var a=e("lodash");t.exports=function(t,n){function i(e){return a(p.groups).map(function(t){return a.filter(t.filters,{type:e})}).flatten().value()}function o(e){a.each(p.groups,function(t){a.each(t.filters,function(t){if(e[t.name]){var n=e[t.name];switch(t.type){case"checkbox":case"radio":a.includes(n,""+t.value)&&(t.checked=!0);break;case"slider":t.value=n.range;break;case"selectbox":a.each(t.values,function(e){e.selected=e.value==n})}}})})}function r(){var e=i("selectbox");a.each(e,function(e){e.selectBox=t.init("selectBox2",{type:"products",minFilteringLength:1,id:e.name,name:e.name,items:e.values,icons:{searchIcon:null,clearIcon:null,arrowIcon:"products-arrow"},defaults:{label:e.label,value:""},tabIndex:0,mixins:["filterValues","setFocus","clearValueOnDelete"]})})}function s(){var e=i("selectbox");a.each(e,function(e){m[e.name]&&t.notify("selectboxValueSet",{name:e.name,value:m[e.name]})})}function l(){var e=i("slider");if(e.length){var t=n.getFormats().currency;a.each(e,function(e){e.currency={code:t.id.toLowerCase(),symbol:t.symbol}})}}function c(){t.block().find(".checkbox").on("change",function(e){var n=e.target,i=n.value,o=n.checked,r=m[n.name];r=o?a.union(r,[i]):a.without(r,i),m[n.name]=r,t.notify("filterClick",{name:n.name,value:m[n.name]}),h()})}function u(){t.block().find(".radio").on("change",function(e){var n=e.target;m[n.name]=n.value,t.notify("filterClick",{name:n.name,value:m[n.name]}),h()})}function d(){var e=i("slider");a.each(e,function(e){e.rader=f.initSlider(e,function(t){m[e.name]=t&&{range:t},h()})})}function h(){t.notify("changedFilters",m)}var p,f=t.invoke(e("./slider"),[t]),m={};return{init:function(e){p=e.filters,m=e.values||{},o(m),r(),l()},bind:function(){c(),u(),d(),s()},viewContext:function(){return p},elements:{submit:{click:function(){h(),t.notify("submitClick",m)},keydown:function(e){13==e.keyCode&&(h(),t.notify("submitClick",m))}}},"interface":{updateSelectbox:function(e){var n=a.find(i("selectbox"),{name:e.name}),o=e.values.length?m[e.name]:null;n.selectBox["interface"].setValue(""),n.selectBox["interface"].setItems(e.values),n.selectBox["interface"].setValue(o),t.broadcast("selectBox2:selectBoxUpdated",e.name)},reset:function(){m={},h(),a.each(i("selectbox"),function(e){e.selectBox["interface"].setValue()}),t.rerender()}},dispatcher:{"selectBox2:changed":function(e){var n=e.current||null;m[e.name]=n,h(),t.notify("selectboxValueSet",{name:e.name,value:n}),t.notify("filterClick",{name:e.name,value:n})},"selectBox2:focusNext":function(e){a.reduce(i("selectbox"),function(t,n){return t?(n.selectBox["interface"].setFocus(),!1):n.name==e},!1)}}}},t.exports._args=["slot","$i18n"]},{"./slider":344,lodash:"lodash"}],"/modules/promoEvent/promoEvent.js":[function(e,t,n){t.exports=function(e,t,n,a,i){var o,r,s,l={init:function(n){o=n,r=o.type,s=i.getRegion().domain,e.mod({type:r,hidden:t.panels.has(r)||t.inGlobal(),summer:"summer2016"==r?s:!1})},changeState:function(n){"city"in n||e.mod({hidden:t.panels.has(r)||t.inGlobal()})},clientInit:function(){e.mod().hidden||n.trackEvent("google",[o.analyticName,"Promo","Show"])},viewContext:function(){return{type:"summer2016"==r?"summer_"+s:r}},elements:{close:{click:function(t){var i=e.config["promoTooltip."+r]||e.config["promoTooltip."+o.feature];t.preventDefault(),e.notify("closed"),n.trackEvent("google",[o.analyticName,"Promo","Close"]),a.setItem(i.promoStorageKey,!0),t.stopPropagation(),e.dispose()}},link:{click:function(e){e.preventDefault()}},block:{click:function(){n.trackEvent("google",[o.analyticName,"Promo","Click"]),e.notify("showEvent","Promo",r),e.dispose()}}},"interface":{hideWhenFlying:function(){e.mod({hidden:!0})}}};return l},t.exports._args=["slot","$appState","$analytics","$localStorage","$regionManager"]},{}],"/modules/promoMobile/promoMobile.js":[function(e,t,n){var a=req("helpers/link"),i=e("lodash");t.exports=function(e,t,n){function o(e){var n=a.getMobileLinks(t,e);return n[s]?n[s].href:n.android.href}var r,s=e.ua().os.name?e.ua().os.name.toLowerCase().replace(" ",""):"android",l={android:t._t("Построить маршрут<br>в&nbsp;2GIS для Android"),ios:t._t("Построить маршрут<br>в&nbsp;2GIS для iOS"),windowsphone:t._t("Построить маршрут<br>в&nbsp;2GIS для WinPhone"),blackberry:t._t("Построить маршрут<br>в&nbsp;2GIS для Blackberry")},c={android:t._t("Бесплатно в Google Play"),ios:t._t("Бесплатно в App Store"),windowsphone:t._t("Бесплатно в WP Store"),blackberry:t._t("Бесплатно в Blackberry World")},u={firmCard:{target:"promoMobile",action:"Click_Firm"},geoCard:{target:"promoMobileGeoCard",action:"Click_Geo"}},d={tag:"a",viewAttrs:function(){return{href:o(r.target)}},init:function(n){r=u[n.module]||u.geoCard;var a=t.getSettings(),o=i.contains(a.mobileAppPlatforms,s);t.getSettings().promoMobile&&e.ua().isPhone&&o||e.dispose()},viewContext:function(){return{title:l[s]||l.android,sub:c[s]||c.android,icon:e.location.uri("/assets/promoMobile/promoMobile_icon.svg")}},elements:{block:{click:function(){n.trackEvent("google",["Promo_Mobile_Card",r.action,s])}}}};return d},t.exports._args=["slot","$i18n","$analytics"]},{lodash:"lodash"}],"/modules/promoMobileFull/promoMobileFull.js":[function(e,t,n){var a=req("helpers/link");t.exports=function(e,t,n,i){function o(){e.notify("action","Close")}var r,s={android:t._gg("2GIS для Android"),ios:t._gg("2GIS для iOS"),windowsphone:t._gg("2GIS для WinPhone"),blackberry:t._gg("2GIS для Blackberry")},l=i.getRegion(),c={init:function(t){r=t&&t.os||"android",e.mod({os:r})},viewContext:function(){var e=a.getMobileLinks(t,"promoMobileFull"),n=e[r].href,i=l.name_grammatical_cases,o=i&&i.genitive||l.name;return{title:s[r]||s.android,sub:t._gg("Фирмы %1 ​и&nbsp;маршруты транспорта на&nbsp;подробной карте",o),href:n}},elements:{online:{click:o},close:{click:o},overlay:{click:o},store:{click:function(){e.notify("action","Click")}}}};return c},t.exports._args=["slot","$i18n","$analytics","$regionManager"]},{}],"/modules/promoTooltip/promoTooltip.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t,n,i){function o(t){t=t||a.get(g,"name"),t&&e.modules[t]&&e.setTimeout(e.modules[t].dispose,0)}function r(){if(!e.ua().isPhone&&_&&!v){var t=a.cloneDeep(e.config.group("promoTooltip"));if(t=a.merge(t,y),g=s(t)){var n=e.init(g.name,g);e.block().append(n.render()),n.bindEvents(),v=!0}}}function s(e){var t=a(e).pick(a.isObject).pick(l).pick(c).pick(u).pick(d).pick(h).pick(p).pick(m).value();if(a.isEmpty(t))return null;var n=a.sample(t);return{name:n.moduleName,type:n.type,feature:n.feature,analyticName:n.analyticName}}function l(e){return e.active||!1}function c(e){var n=parseInt(t.getRegion().id,10);return e.blackListRegions&&a.contains(e.blackListRegions,n)?!1:!e.regions||a.contains(e.regions,n)}function u(e){return!e.feature||i.get(e.feature)}function d(e){return!e.browsers||f(e.browsers)}function h(e){return!n.getItem(e.promoStorageKey)}function p(e){return void 0===e.specialPassed||null===e.specialPassed||e.specialPassed()===!0}function f(t){var n=e.ua().browser;return a.contains(a.keys(t),n.name)&&n.major>=t[n.name].min}function m(e,t){return i.promo(t)}var g=null,_=!0,v=!1,y={extension:{specialPassed:function(){return!req("helpers/extension").isInstalled()}}},b={init:function(t){a.isEmpty(t)||(_=t.canOpenTooltip),e.mod({projectHasLangSwitcher:i.get("languageSwitcher")})},clientInit:function(){e.setTimeout(r,e.config["promoTooltip.delay"])},changeState:function(t){"city"in t&&(o(),v=!1,e.setTimeout(r,e.config["promoTooltip.delay"]))},"interface":{disablePromos:function(){_=!1,o()},enablePromos:function(){_=!0,v||e.setTimeout(r,e.config["promoTooltip.delay"])},hidePromo:o,vertical:function(t){e.mod({vertical:t})}}};return"undefined"!=typeof window&&(window.TestHandles=window.TestHandles||{},window.TestHandles.disablePromoTooltip=function(){e.dispose()}),b},t.exports._args=["slot","$regionManager","$localStorage","$featureSwitcher"]},{lodash:"lodash"}],"/modules/proposals/proposals.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/string");t.exports=function(e){var t,n;return{init:function(e){t=e;var i=t.link;i||(n=a.get(t,"owner.branches[0]"))},viewContext:function(){var e=a.pick(t,["title","cover","comment","link"]);return a.extend(e,{description:i.cutTags(t.description)})},elements:{item:{click:function(){e.notify("proposalClicked",t.title),n&&e.notify("proposalBranchClicked",n)}}}}}},{lodash:"lodash"}],"/modules/proposalsMapList/proposalsMapList.js":[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(e,t){var n=[];return{init:function(e,i){var o=e.branchId;t.getBranchCoverage(o).then(function(e){var t=a.get(e,"body.result.items");n=a.map(t,function(e){return{id:a.get(e,"vendor.id"),lat:a.get(e,"point.lat"),lon:a.get(e,"point.lon")}}),i()})},"interface":{drawOnMap:function(){e.notify("mapDataReady",{result:{markers:n},mode:"firms"})},clearMap:function(){e.notify("clearMap")}}}},t.exports._args=["slot","$proposalsApi"]},{lodash:"lodash"}],"/modules/providerRequestForm/providerRequestForm.js":[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(t,n,i,o){function r(e,t){return t instanceof RegExp&&t.test(e)}function s(e){var n=$(e.target),i=n.attr("name"),o=n.val(),s=a.get(b,i+".rule");if(s){var l=r(o,s);b[i].isValid=l,n.mod({error:!l}),t.element("inputSubmit").attr("disabled",!u()),"phone"==i&&n.mod({invalidPhone:!l})}}function l(e){t.element("inputSubmit").prop("disabled",e).mod({preloader:e})}function c(){if(u()){var e=t.element('inputText[name="name"]').val(),n=t.element('inputText[name="phone"]').val(),a={tariff_id:g.tariff.id,geoid:g.geoid,apartment:g.address.apartment,client_name:e,client_phone:n};v.request(a,function(e){return l(!1),e?void h():(i.trackEvent("googleBooklets",["Booklet_Providers","Request","Submit"]),void d())})}}function u(){for(var e in b)if(b.hasOwnProperty(e)&&b[e].isValid===!1)return!1;return!0}function d(){var e="bookletPopup"==g.template?t.element("container"):t.block();e.html(t.renderPartial("accepted",{providerPhone:g.phone}))}function h(){t.element("cantConnect").mod({hidden:!1})}function p(){l(!1),y=!!g.geoid||g.isMediaCard,t.mod({showAllFields:y}),t.element("inputSubmit").attr("disabled",!0),y&&t.broadcast("checkConnectionWidget:hideSubmit")}function f(){g.address=null,g.connected=null,g.notConnected=null,g.geoid=null,p()}function m(e){var n=$(e.target);if(!n.val()){var a=n.closest(t.element("input")),i=!!a.mod().phone;i&&a.mod({focus:"focusin"==e.type})}}var g,_,v=n.providers,y=!1,b={name:{rule:/.{3,}/},phone:{rule:/[0-9]{10}/}};return{init:function(e){g=e,g.isMediaCard="mediaCard"==e.template;var n="bookletPopup"==e.template?"bookletRequestForm":"requestForm";t.init("checkConnectionWidget",{type:n,provider:g.provider,address:g.address}),1!=g.makeup&&(t.mod({type:g.template,showAllFields:!!g.geoid||g.isMediaCard}),a.each(b,function(e){e.isValid=!1}),i.trackEvent("googleBooklets",["Booklet_Providers","Request","Show"]))},bind:function(){_=t.element("baron").baron(),t.setTimeout(function(){return _.update()},100),(g.geoid||g.isMediaCard)&&t.broadcast("checkConnectionWidget:hideSubmit"),t.broadcast("checkConnectionWidget:focus")},viewContext:function(){var t=e("./viewModel.js");return t(g,o)},elements:{form:{submit:function(e){e.preventDefault(),l(!0),i.trackEvent("google",["Media_Card_event","Providers","Connect_Send"]),t.broadcast("checkConnectionWidget:checkConnection")}},inputText:{keyup:s,keydown:s,cut:s,paste:s,focus:m,blur:function(e){s(e),m(e)}},showAllProviders:{click:function(e){e.preventDefault();var n={};g.geoid&&(n.geoid=g.geoid),t.notify("showProviderBooklet",n),i.trackEvent("googleBooklets",["Booklet_Providers","All_providers"])}},showTariffs:{click:function(){if("bookletPopup"==g.template){var e={};g.geoid&&(e.geoid=g.geoid),t.notify("showProviderBooklet",e)}else t.notify("showTariffs")}},close:{click:function(){t.notify("close")}}},dispatcher:{"checkConnectionWidget:addressFound":function(e){a.extend(g,a.pick(e,"address","geoid")),g.connected=!0,g.notConnected=!1,y=!!g.geoid,y&&u()?c():p()},"checkConnectionWidget:addressNotFound":f,"checkConnectionWidget:reset":f},"interface":{updateScroll:function(){_.update()},resize:function(){_&&_.update()},appear:function(){t.mod({appear:!0})},notConnected:f}}},t.exports._args=["slot","$bookletApi","$analytics","$i18n"]},{"./viewModel.js":345,lodash:"lodash"}],"/modules/providerTariffs/providerTariffs.js":[function(e,t,n){"use strict";var a=e("lodash");t.exports=function(t,n){var i;return{tag:"article",init:function(e){i={firmId:a.get(e,"firm.org.id"),firmName:a.get(e,"firm.name_ex.primary"),tariffs:e.tariffs},t.mod({columns:a.get(e,"columnsLength")})},viewContext:function(){var n=t.invoke(e("./viewModel"),[]);return n(i)},elements:{cellPurchase:{click:function(){t.notify("connect",$(this).data("tariff-id")),n.trackEvent("google",["Media_Card_event","Providers","Connect_Click"])}}},"interface":{mediaResize:function(e){t.mod({columns:e})},setTariffs:function(e){i.tariffs=e||[],t.rerender()}}}},t.exports._args=["slot","$analytics"]},{"./viewModel":346,lodash:"lodash"}],"/modules/push2dial/push2dial.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("lib/request2"),o=e("slot/lib/loadScript"),r=e("bluebird");t.exports=function(t,n,s,l,c,u,d,h){function p(e){E||(E=t.init("errorMsg")),$(e.elemWithError).mod({error:!0}),t.broadcast("errorMsg:show",{module:E,elemWithError:e.elemWithError,msg:e.msg,fullWidth:e.fullWidth})}function f(e){S.state=e}function m(){var n=e("./viewModel.js");return t.invoke(n,[S,t])}function g(){t.notify("closed")}function _(e){e=e||{},S=Object.assign(S,e),t.mod({type:S.type,visible:!0})}function v(e){var t;return e.meta?"itemNotFound"!=e.meta.error.type&&"paramIsIncorrect"!=e.meta.error.type||(t=d._t("Неправильный пин-код")):t=d._t("Что-то пошло не так. Попробуйте ещё раз."),t}function y(e,t){t=t||j,c.bind(e,t.error,t.success)}function b(){Recaptcha.create(t.config["authApi.recaptchaPublicKey"],"push2dial__formCaptcha",{
theme:"custom"})}function k(){t.element("formCaptchaFieldInput").val(""),Recaptcha.destroy()}function w(e){var n=t.element("formChangeSubmitBtn");n.mod({disabled:!e})}function x(){return!t.element("formChangeSubmitBtn").hasClass("_disabled")}function C(){var e=t.element(t.mod().showPasswords?"formFieldClone":"formFieldNewPass").val(),n=t.element("formFieldOldPass").val(),a=t.element("formCaptchaFieldInput").val(),i=e.length>0&&e.length<65&&n.length>0&&n.length<65,o=P&&a.length>0||!P;w(i&&o)}function L(e){var t={paramIsIncorrectNewPassword:d._t("Неверный новый пароль."),paramIsIncorrectPassword:d._t("Неверный пароль."),invalidPassword:d._t("Неверный пароль. Попробуйте ещё раз."),unauthorized:d._t("Неверный пароль. Попробуйте ещё раз."),captchaIsRequired:d._t("Заполните капчу."),invalidCaptcha:d._t("Неверно заполнена капча."),captchaIsInvalid:d._t("Неверно заполнена капча.")};if(e.type&&a.contains(["paramIsIncorrect","paramIsRequired"],e.type)){var n="unavailable";return-1!=e.message.indexOf("new_password")?n=e.type+"NewPassword":-1!=e.message.indexOf("password")&&(n=e.type+"Password"),t[n]}return t[e.type]||e.message}function I(){var e="";return t.element("mainBlockPinInput").each(function(){e+=$(this).val()}),e}function T(e){var n=e.charCode||e.keyCode;13!=n&&10!=n||t.element("mainHooray").trigger("click")}var S,E,P=!1,j={error:function(e){var n=v(e);S.error={state:"bind",error:n},p({elemWithError:t.element("mainBlockPin"),msg:n}),t.element("mainBlockPinInput").first().trigger("focus")},success:function(e){t.notify("phoneBound",e),f("bound"),t.rerender()}},M={init:function(e,o){function s(){return new r(function(e){return p&&t.isClient?(u.trackEvent("google",["P2D","Show","Form_from_Mobile"]),void y(p.pin,{error:function(n){var a=v(n);S.error={state:"bind",error:a},t.mod({validation:!0}),e()},success:function(n){t.notify("phoneBound",n),f("bound"),e()}})):void e()})}function c(){return new r(function(e){h.sync("dg_session_token",function(n){n||e(),i("get",t.config["lkApi.url"]).withCredentials().then(function(t){var n=a.get(t,"body.result.orgs.length");if(!n||200!=a.get(t,"body.meta.code"))return e();var i=a.find(t.body.result.orgs,{status:"approved"});return i?(S.advertiserData={},1==n&&(S.advertiserData={firmName:i.name,firmId:i.id}),S.advertiserData.firmsCount=n,e()):e()})["catch"](e)})})}S=a.cloneDeep(e)||{};var p=n.get("bindPhone");t.mod({lang:d.getLang()});var m=[s()];l.get("lkApi")&&m.push(c()),r.all(m).then(function(){_(S)})["catch"](function(e){t.sendError("pus2dial init error",e)})["finally"](function(){o()})},clientInit:function(){o(t.config.recaptchaUrl),$(window).on("keydown",T),S.error&&p({elemWithError:t.element("mainBlockPin"),msg:S.error.error}),t.element("mainBlockPinInput").first().trigger("focus")},dispose:function(){$(window).off("keydown",T)},viewContext:function(){var e=m();return t.mod({type:e.type,authorized:s.isAuthorized(),settings:e.settings,linked:!!e.linked,email:!!e.email,popup:e.popup}),e},elements:{overlay:{click:function(e){e.stopPropagation(),g()}},wrap:{},popupClose:{click:g},close:{click:g},formFieldPin:{},formBind:{submit:function(e){e.preventDefault(),y(I())}},formChangePassword:{submit:function(){return!1}},formSubmitLinkphone:{click:function(){u.trackEvent("google",["P2D","Show","Form_from_Account"]),u.trackEvent("google",["Auth","Account","P2D"]),f("bind"),t.rerender(),t.element("mainBlockPinInput").first().trigger("focus")}},mainHooray:{click:function(){t.notify("letsTryPush2Dial"),g()}},formField:{},formSubmitUnlink:{click:function(){function e(){p({elemWithError:a,msg:d._t("Не удалось отвязать телефон, попробуйте ещё раз.")})}function n(){t.notify("phoneUnbound"),f("justUnbound"),t.rerender()}var a=this;c.unbind(e,n)}},formSubmitLogout:{click:function(){t.notify("loggedOut"),g()}},formChangeSubmitBtn:{click:function(){var e=t.element("formFieldNewPass").val(),n=t.element("formFieldOldPass").val(),a=!1;return x()?(P&&(a={response:Recaptcha.get_response(),challenge:Recaptcha.get_challenge()},P=!1,k()),u.trackEvent("google",["Auth","Account","Change_Password"]),s.changePassword(!1,n,e,a,function(e,n){n?n.error?("captchaIsRequired"!=n.error.type&&"captchaIsInvalid"!=n.error.type||(P=!0,b(),C()),p({elemWithError:t.element("formField"),msg:L(n.error)})):p({elemWithError:t.element("wrap"),msg:d._t("Сервис авторизации недоступен."),fullWidth:!0}):(_({state:"passwordChanged"}),t.rerender())}),null):!1}},formFieldOldPass:{keyup:function(){C()}},formFieldNewPass:{keyup:function(){C()}},formFieldClone:{keyup:function(){C()}},formCaptchaFieldInput:{keyup:function(){C()}},formCaptchaRefresh:{click:function(){return Recaptcha.reload(),!1}},formFieldShowPass:{change:function(){var e=this.checked,n=e?t.element("formFieldNewPass"):t.element("formFieldClone"),a=e?t.element("formFieldClone"):t.element("formFieldNewPass");t.mod({showPasswords:e}),a.val(n.val()),a[0].focus()}},mainBlockPin:{},mainBlockLinkBtn:{},mainBlockPinInput:{keydown:function(e){var t=e.charCode?e.charCode:e.keyCode;if(8==t||37==t||e.shiftKey&&9==t){var n=$(this);8==t&&n.val("");var i=n.prev();return i.length&&i.hasClass("push2dial__formFieldInput")&&(i[0].focus(),i[0].select()),!1}if(39==t){var o=$(this).next();return o.length&&(o[0].focus(),o[0].select()),!1}return!a.contains([13,46,8,9,17,91,37,39],t)&&(47>t||t>58)&&(95>t||t>106)?!1:null},input:function(){var e=this.value,n=/\d/;if(n.test(e)){var a=$(this).next();a.length?a[0].focus():t.element("mainBlockLinkBtn").trigger("focus")}else this.value=""},click:function(){var e=this;t.setTimeout(function(){e.select()},10)},focus:function(){this.select()},keyup:function(){var e=I(),n=t.element("mainBlockPinInput");n.last()[0]===this&&e.length==n.length&&y(e,{success:j.success})}}},"interface":{show:_,close:g,dispose:function(){t.dispose()},getError:function(){return S.error},reposition:function(e){t.mod({pos:e})},setError:p,loggedIn:c.startup,loggedOut:c.startup}};return M},t.exports._args=["slot","$appState","$authorization","$featureSwitcher","$p2d","$analytics","$i18n","$commonCookie"]},{"./viewModel.js":347,bluebird:384,lodash:"lodash","slot/lib/loadScript":"slot/lib/loadScript"}],"/modules/push2dialCaller/push2dialCaller.js":[function(e,t,n){var a=e("lodash");t.exports=function(e,t,n,i){function o(e,t){m[e]=a.extend(m[e]||{},t)}function r(e){return m.hasOwnProperty(e)}function s(e){return r(e)?m[e].attachedToElement:null}function l(t,n){var a=s(t),i=a.offset(),o=a.outerWidth(),r=a.outerHeight(),l=e.block().parent(),c=l.offset(),u={left:Math.abs(c.left-i.left),top:Math.abs(c.top-i.top)};n.css({left:u.left+o,top:u.top+r/2-n.outerHeight()/2})}function c(t){void 0===m[t].dialingMessageElement&&(m[t].dialingMessageElement=$(e.renderPartial("dialing",{})).appendTo(e.block())),l(t,m[t].dialingMessageElement),m[t].dialingMessageElement.mod({visible:!0})}function u(e){void 0!==m[e].dialingMessageElement&&m[e].dialingMessageElement.mod({visible:null})}function d(t,n,a){void 0===m[t].errorMessageElement&&(m[t].errorMessageElement=$(e.renderPartial("error",{})).appendTo(e.block())),l(t,m[t].errorMessageElement),m[t].errorMessageElement.text(a),m[t].errorMessageElement.mod({errorType:n,visible:!0})}function h(e){void 0!==m[e].errorMessageElement&&m[e].errorMessageElement.mod({errorType:null,visible:null})}function p(e){for(var t in m)if(m[t].dialingMessageElement[0]==e[0]||m[t].errorMessageElement[0]==e[0])return t;return""}function f(t,n,a){i.dial(t,n,a),c(t),e.setTimeout(function(){u(t)},g)}var m={},g=2500,_={success:function(e){u(e.phoneNumber),h(e.phoneNumber)},error:function(e,t){var a;switch(e){case"dialing":a=n._t("Ошибка набора");break;case"binding":a=n._t("Привяжите телефон заново");break;default:a=n._t("Что-то пошло не так")}u(t.phoneNumber),h(t.phoneNumber),d(t.phoneNumber,e,a)}},v={elements:{message:{click:function(){var t=$(this);"binding"==t.mod().errorType&&t.hasClass("_type_error")&&e.notify("openP2DBindingForm",{success:function(e){if("try"==e){var n=p(t),a=m[n].pushNotificationText,i=m[n].callbacks;f(n,a,i)}}})}}},"interface":{dial:function(n,a,s,l){s+="";var c={success:function(e){_.success(e),l&&"function"==typeof l.success&&l.success(e)},error:function(e,t){_.error(e,t),l&&"function"==typeof l.error&&l.error(e,t)}};r(a)||o(a,{attachedToElement:$(n),pushNotificationText:s,callbacks:c}),u(a),h(a),s=s.substr(0,80),i.isBound()?f(a,s,c):(t.trackPageview(),t.trackEvent("google",["P2D","Show","Form_from_Phone"]),e.notify("openP2DBindingForm",{success:function(e){"try"==e&&f(a,s,c)}}))}}};return v},t.exports._args=["slot","$analytics","$i18n","$p2d"]},{lodash:"lodash"}],"/modules/recoveryAds/recoveryAds.js":[function(e,t,n){var a=e("lodash"),i=e("./viewModel");t.exports=function(e,t){function n(t){var n=t.data("staticId");e.notify("hovered",l[n])}function o(t){var n=t.data("staticId");e.notify("unhovered",l[n])}function r(t,n){e.element("article").filter('[data-static-id="'+t+'"]').mod({selected:n})}function s(){if(!e.isServer&&c.length!=h.length){var t=a.chain(e.element("article")).filter(function(e){return $(e).seeable(.6)}).map(function(e){var t=$(e).data("staticId")+"",n=a.get(a.find(c,function(e){return e.id.indexOf(t)>-1}),"id");return n}).value(),n=a.difference(t,h);a.isEmpty(n)||(e.notify("firmDisplayed",n),h=h.concat(n))}}var l,c,u={},d=req("helpers/firm"),h=[],p={inheritBssHash:!0,init:function(e){c=e.adFirms||[],l={},a.each(e.adFirms,function(e){var t=d.getStaticId(e.id);e.point||(e.point={}),l[t]=e})},viewContext:function(){return e.invoke(i,[l,u])},elements:{article:{click:function(n){n.preventDefault(),n.stopPropagation(),o($(this));var a=$(this).data("staticId");l[a]&&l[a].id&&e.notify("firmSelected",{id:l[a].id}),t.trackEvent("google",["Recovery","Click","Card_recovery"])},touchstart:function(){n($(this))},touchmove:function(){n($(this))},mouseenter:function(){n($(this))},touchcancel:function(){o($(this))},touchend:function(){o($(this))},mouseleave:function(){o($(this))}}},"interface":{highlight:function(e){r(e[0],!0)},unhighlight:function(e){r(e[0],!1)},activateContent:s,sendImpressions:s}};return p},t.exports._args=["slot","$analytics"]},{"./viewModel":348,lodash:"lodash"}],"/modules/reviewsCard/reviewsCard.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/request");t.exports=function(t,n,o,r,s,l,c,u){function d(){var e=$(this).closest(".reviewsCard__review");e.mod({hide:null}),e.find(".reviewsCard__reviewMessage").mod({hide:null}),s.trackEvent("google",["Reviews","Click","More"])}function h(){t.mod({busy:!0}),_.loadNextPage().then(function(e){var n=r.getRegion(),i=a.reduce(e,function(e,a){return e+t.renderPartial("review",y(a,!1,n,o))},"");t.element("list").append(i),p(),t.mod({busy:!1})})}function p(){_.hasNextPage()||(t.mod({fullyLoaded:!0}),s.trackEvent("google",["Reviews","Scroll","End"]))}function f(e){var n=e.firm;return a.map(e.reviews,function(e){return e.jsonldModule=t.init("jsonld",{model:{review:e,firm:n},type:"review"}),e})}function m(e){_.loadData().then(function(n){return t.mod({fullyLoaded:!1}),n?n.error?void e(n.error):(g=a.cloneDeep(n),b&&(g.reviews=f(g)),g.reviewsToggle=u.get("reviews.forAllFilials")&&n.firm.branch_count>1,g.allFilials=_.getIsOrgReviews(),p(),void e()):void i.emitError(404,"empty api response",e)})["catch"](function(t){e(t)})}var g,_,v=e("./viewModel"),y=e("./reviewVm"),b=l.get("isSearchBot"),k={init:function(e,t){return a.get(e,"id")?(_=n.reviews(e.id),m(t)):i.emitError(400,"bad init data",t)},clientInit:function(){g.reviewsToggle?s.trackEvent("google",["Reviews","Open",g.allFilials?"All":"Branch"]):s.trackEvent("google",["Reviews","Open","Alone"])},bind:function(){t.element("scroller").baron().fix()},viewContext:function(){return v(g,{i18n:o,region:r.getRegion()})},elements:{scroller:{scroll:a.throttle(function(){var e=t.mod(),n=this.scrollTop+this.clientHeight;!e.fullyLoaded&&!e.busy&&n>this.scrollHeight-500&&h()},200)},reviewFilialAddressLink:{click:function(){var e=_.getReviewById($(this).data("id"));e&&t.notify("filialAddressClicked",e.filialData)}},reviewShowFullMessage:{click:d},reviewCutMessage:{selector:".reviewsCard__reviewMessage._type_cut",click:d},reviewImageLink:{click:function(e){t.notify("photoClicked",{photosUrls:$(this).data("url"),photosComment:$(this).data("comment"),title:_.getFirmName(),subtitle:_.getFirmAddress()}),s.trackEvent("google",["Reviews","Click","Photo"]),e.preventDefault()}},firmTitleLink:{click:function(e){e.preventDefault()}},firmWriteView:{click:function(){s.trackEvent("google",["Reviews","Add","Click"]),c.floors.isActive()&&s.trackEvent("googleFloors",["Firm_Card","Flamp_Click"])}},reviewsFor:{click:function(){var e=$(this);if(!e.mod().active){a.forEach(g.reviewsToggle.items,function(t){t.active=e.data("for")});var n="filials"==e.data("for");_.setIsOrgReviews(n),m(function(e){e||t.rerender()}),s.trackEvent("google",["Reviews","Switch",n?"All":"Branch"])}}}},"interface":{tabType:"firms",setSeoParams:function(){return t.notifySeoParams({type:"reviews",id:_.id,cityName:_.getCityName(),firmName:_.getFirmName(),hasCoords:_.getLat()&&_.getLon(),lat:_.getLat(),lon:_.getLon()}),!0},activateContent:function(){k["interface"].deactivatedOnce||(s.trackEvent("google",["Cards","Reviews"]),s.trackEvent("yandex",["CARD_REVIEWS"]))}}};return k},t.exports._args=["slot","$models","$i18n","$regionManager","$analytics","$syncRegistry","$appState","$featureSwitcher"]},{"./reviewVm":349,"./viewModel":350,lodash:"lodash"}],"/modules/rotate/rotate.js":[function(e,t,n){t.exports=function(e){function t(t){i=t,i>180?i=(i+180)%360-180:-180>i&&(i=180-(180-i)%360),e.element("needle").css({"-webkit-transform":"rotate("+i+"deg)",transform:"rotate("+i+"deg)"}),e.mod({active:0!==i})}function n(t){t.startAngle=i,e.notify("rotate",t)}function a(){e.notify("rotate",{"default":!0})}var i,o={init:function(e){i=e?parseInt(e.angle,10)||0:0},clientInit:function(){t(i)},changeState:function(e){"angle"in e&&t(e.angle&&e.angle.degrees||0)},elements:{cw:{click:function(){n({cw:!0})}},ccw:{click:function(){n({cw:!1})}},center:{click:function(){a()}},needle:{}},"interface":{rotateToAngle:function(e){t(e)},getAngle:function(){return i}}};return o}},{}],"/modules/roundButtons/roundButtons.js":[function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return{buttons:e.arrayOf(e.oneOf(["save","cancel","loader"])).isRequired,onSaveClickHandler:e.func,onLoaderClickHandler:e.func,onCancelClickHandler:e.func}}function o(e){return{viewContext:function(){return{buttons:e.buttons.map(function(e){return a({},e,!0)})}},elements:{save:{selector:".roundButtons__button._type_save",click:e.onSaveClickHandler},cancel:{selector:".roundButtons__button._type_cancel",click:e.onCancelClickHandler},loader:{selector:".roundButtons__button._type_loader",click:e.onLoaderClickHandler}}}}function r(){return s.compose(o,u(i,"roundButtons"),d(h))}var s=e("lodash"),l=req("lib/dumbModule"),c=l.dumb,u=l.checkPropTypes,d=l.setDefaultProps,h={onSaveClickHandler:s.noop,onLoaderClickHandler:s.noop,onCancelClickHandler:s.noop};t.exports=c(r)},{lodash:"lodash"}],"/modules/routeCard/routeCard.js":[function(e,t,n){var a=e("lodash");t.exports=function(t,n,i,o,r,s,l,c){function u(e,t){switch(t.type){case"SET_ACTIVE":return e.map(function(e){return a.assign({},e,{isActive:e.id===t.id})});case"DEACTIVATE_ALL":return e.map(function(e){return a.assign({},e,{isActive:!1})});default:return e}}function d(e){A=u(A,e)}function h(e,n){var a=y(e);o.trackEvent("google",["Route_Card_event","Station"]),d({type:"SET_ACTIVE",id:e}),t.ua().isMobile&&g(n),t.ua().isPhone?t.notify("stationSelected",{subtype:a.subtype,id:a.station_id}):t.notify("clickPlatformInRoute",!0,a,a.geoPoint)}function p(e){var n=a.find(A,{id:e});n.isActive||(d({type:"DEACTIVATE_ALL"}),t.notify("togglePlatformMarker",!1))}function f(e,n){var i=a.find(A,{id:e}),o=y(e);return t.ua().isPhone?void t.notify("stationSelected",{subtype:o.subtype,id:o.station_id}):t.ua().isMobile?(g(n),void t.notify("clickPlatformInRoute",!0,o,o.geoPoint)):void(i.isActive||(d({type:"DEACTIVATE_ALL"}),t.notify("togglePlatformMarker",!0,y(e))))}function m(e){g(e)}function g(e){P!==e&&(P=e,t.notify("changeActiveDirection",e))}function _(e){if(!L){var n=e.outerHeight(),a=t.element("container").outerHeight();e.scrollTop()+n>=a&&(L=!0,o.trackEvent("google",["Route_Card_event","Scroll_end"]))}}function v(e){return t.initDumb("routesList",e)}function y(e){if(!e)return null;var t=S[P]&&S[P][e];if(!t){var n=a.find(S,function(t){return t[e]});n&&(t=n[e])}return t}function b(){return c.get("favorites")?{module:{type:"favoritesWidget",data:{type:"action",entity:T,dropDownPosition:"left",gaCategory:"Route_Card_event"}}}:null}function k(e,t){A.push({id:e.id,isActive:!1});var n="metro"===T.subtype?"transportStopMetro":"transportPlatform",i=e.geometry&&e.geometry.centroid&&r.parsePoint(e.geometry.centroid),o=a.assign({},e,{onStationClick:h,onStationMouseout:p,onStationMouseover:f,color:T.color||"#5d86dd",geoPoint:i,subtype:T.subtype,seoLinkStation:M(n,{city:j.code,id:e.station_id,lon:i.lon,lat:i.lat}),transitions:a.map(e.transitions,function(e){return a.assign({},e,{seoLinkStation:M(n,{city:j.code,id:e.station_id,lon:i.lon,lat:i.lat})})})});return S[t][o.id]=o,o}var w,x,C,L,I,T={},S={},E=req("helpers/route"),P=0,j=i.getRegion(),M=req("helpers/linkURL"),A=[],D=a.curry(function(e,t,n){var i=!1;return S[n]={},"metro"===T.subtype?i=!0:1===a.size(T.directions)&&(i=!0),a.assign({},t,{color:T.color||"#5d86dd",onRouteListMouseover:m,withoutHead:i,directionIndex:n,platforms:a.map(t.platforms,a.partial(e,a,n))})});return x={inheritBssHash:!0,networkDepend:!0,init:function(e,n){w=e,s.transport.route(w.id,{},function(e,i){return e?void n(e):(T=E.cutRoute(i.data[0]),T.indexActiveDirection=P,I=a.map(T.directions,a.compose(v,D(k))),t.init("cardActions",a.compact([b()])),t.init("promoMobile",{module:"routeCard"}),void n())})},clientInit:function(){t.googletag()},bind:function(){C=t.element("scroller").baron().fix(),t.setTimeout(function(){C.update()},100)},elements:{scroller:{scroll:function(){_($(this))}},bugReport:{selector:".routeCard__footerItemLink._type_bugReport",click:function(){n.showFeedback({feedbackType:"publicTransportRouteError",routeNumber:T.name,routeType:E.getTransportTypeText(T.subtype,l)}),n.push()}}},viewContext:function(){var t=e("./viewModel.js");return a.assign({},t(w.error?w:T,{region:j,i18n:l}),{routesList:I})},"interface":{tabType:"transport",updateScroll:function(){C.update()},drawOnMap:function(){t.notify("routeShow",T,y(w.activePlatformId))},clearMap:function(){t.notify("clearRouteCardFromMap")},activateContent:function(){x["interface"].deactivatedOnce||o.trackEvent("google",["Cards","Transport","Route"])},changeIndexActiveDirection:function(e){P=e},setSeoParams:function(){return t.notifySeoParams({type:"route",routeName:T.name,routeType:E.getTransportTypeText(T.subtype,l).toLowerCase(),id:w.id}),!0},getPrintData:function(){var e=this.viewContext(),n=t.renderPartial("print",e),a=$(n).filter('[data-print="dynamic"]').children().each(function(){$(this).find(".routesList__list").prepend($(this).find(".routesList__heading"))}).find(".routesList__list");return{analyticsLabel:"Route",layout:"complex",map:!1,"static":$(n).filter('[data-print="static"]'),dynamic:a}}}}},t.exports._args=["slot","$appState","$regionManager","$analytics","$wkt","$dgApi","$i18n","$featureSwitcher"]},{"./viewModel.js":351,lodash:"lodash"}],"/modules/routeResults/routeResults.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/routeSearch"),o=req("helpers/request");t.exports=function(t,n,r,s,l,c,u,d){function h(){var t=e("./viewModel");return t(b,_,r.getRegion(),u)}function p(){t.notify("setSuggestColors",i.getColorsFromModel(v))}function f(e){var n=0;e&&(n=t.element("routeHeader").index(e)),t.mod({route:n}),p(),t.element("routeHeader").each(function(e){var t=e==n;$(this).parent().mod({begin:n>=e?e:null,end:n>=e?null:e,current:t,down:e>n})})}function m(e){var n=d.get("routeSearch.metroEntrances");b=a.map(e.slice(0,3),function(e){return i.setAdditionalData(e,_,t,n)}),g(0)}function g(e){y=e,v=b&&b[y]||{},v.searchType="bus"}var _,v,y,b,k,w={inheritBssHash:!0,init:function(e,n){if(_=e||{},!i.checkInitData(_))return _.makeup?void n():void o.emitError(404,"bad init data",{params:_},n);t.notify("resetSuggestError");var a=s.ppnot();a.findRoutes(_.from,_.to,_.rsType).then(function(e){m(e),n()})["catch"](n)},clientInit:function(){var n=e("ua-parser-js"),a=new n(navigator.userAgent),i=a.getResult();k="IE"==i.browser.name&&i.browser.major<9,f(),t.notify("clientInit",b,_)},bind:function(){k?t.mod({free:!0}):t.element("scroller").baron()},viewContext:function(){var e=h();return e.routes&&t.mod({count:e.routes.length}),t.mod({city:e.city,type:e.type}),e},elements:{block:{resize:function(){var e=0;t.element("routeHeader").each(function(){e+=this.offsetHeight}),k||t.mod({free:e>t.block().height()-100})}},route:{},routeHeader:{click:function(){var e=$(this).data("routeId");f(this),y!=e&&(g(e),t.notify("routeClicked",_,v,y))}},stepsItem:{mouseenter:function(){t.notify("segmentHover",{isHover:!0,segmentId:$(this).data("segmentId")})},mouseleave:function(){t.notify("segmentHover",{segmentId:$(this).data("segmentId")})},click:function(){t.notify("segmentClick",$(this).data("segmentId")),t.notify("stepsItemClick",$(this),_)}}},"interface":{tabType:"rs",stepHoverSwitch:function(e,n){if(e=e||{},a.isNumber(e.legIndx)){var i=t.element("stepsItem").filter('[data-route-id="'+y+'"][data-segment-id="'+e.legIndx+'"]');i&&i.mod({hover:n})}},drawOnMap:function(){t.notify("mapDataReady",_,v)},clearMap:function(){t.notify("clearMap",_,v)},setSeoParams:function(){return t.notifySeoParams({type:"routeResults"}),!0},getPrintData:function(){var e=t.mod().route||0,n=h(),a=n.routes[e];a.title=u._t("Маршрут на общественном транспорте"),a.city=n.city;var i=t.renderPartial("print",a),o=$(i).filter('[data-print="static"]'),r=$(i).filter('[data-print="dynamic"]');return{analyticsLabel:"RouteSearch_OT",layout:"complex","static":o,dynamic:r,externalPrintParams:{selectedRoute:e}}},prepareForPrint:function(e){t.notify("preparedForPrint"),y!==e.selectedRoute&&g(e.selectedRoute),_.printRoute=!0,t.notify("routeClicked",_,v,y)}},modHandlers:{free:function(e){e&&t.element("scroller").trigger("sizeChange")}}};return w},t.exports._args=["slot","$appState","$regionManager","$models","$analytics","$requestGroups","$i18n","$featureSwitcher"]},{"./viewModel":352,lodash:"lodash","ua-parser-js":"ua-parser-js"}],"/modules/routesList/routesList.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule"),i=e("lodash");t.exports=function(e){return a(function(t){var n=t.platforms,a=n.map(function(n,a,o){var r=o.length-1,s=i.assign({},n,{color:t.color,directionIndex:t.directionIndex,first:0===a||!1,last:a===r||!1});return e.initDumb("routesListItem",s,s.id)});return t.withoutHead&&e.mod({withoutHead:!0}),{viewContext:function(){return{stations:a,name:t.name,isMetro:t.isMetro,color:t.color}},elements:{block:{mouseover:function(){i.isFunction(t.onRouteListMouseover)&&!i.isUndefined(t.directionIndex)&&t.onRouteListMouseover(t.directionIndex)}}}}})}},{lodash:"lodash"}],"/modules/routesListItem/routesListItem.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule"),i=e("lodash");t.exports=function(e){return a(function(t){return e.mod({first:t.first,last:t.last}),{viewContext:function(){return{id:t.id,name:t.name,seoLinkStation:t.seoLinkStation,transitionTitle:t.transitionTitle,transitions:t.transitions,color:t.color,first:t.first,last:t.last}},elements:{transitionsItemName:{click:function(e){e.preventDefault(),t.onStationClick($(this).data("stationId"))}},block:{click:function(e){e.preventDefault(),e.stopPropagation(),i.isFunction(t.onStationClick)&&t.onStationClick(t.id,t.directionIndex)},mouseover:function(){i.isFunction(t.onStationMouseover)&&t.onStationMouseover(t.id,t.directionIndex)},mouseout:function(){i.isFunction(t.onStationMouseout)&&t.onStationMouseout(t.id)}}}}})}},{lodash:"lodash"}],"/modules/rubricsList/rubricsList.js":[function(e,t,n){t.exports=function(t,n,a,i,o){function r(e){n.rubrics.list(l.id,function(t,n){return t?void e(t):(c=n,void e())})}function s(e){n.rubrics.getById(l.id,function(t,n){if(t)return void e(t);var a=f.first(n.items);l.name=a?a.name:"",e()})}var l,c,u,d,h=e("./viewModel.js"),p=e("async"),f=e("lodash"),m={inheritBssHash:!0,init:function(e,t){if(l=e||{},1==l.makeup)return void t();var n=[r];l.id&&!l.name&&n.push(s),d=!!l.id,p.parallel(n,function(e){t(e)})},bind:function(){u=t.element("scroller").baron().fix()},viewContext:function(){var e=h(c,l.name,d,i.getRegion(),o);return t.mod({subRubrics:d}),e},elements:{listItemLinkTitle:{click:function(e){e.preventDefault()}},listItem:{click:function(){var e=$(this),n=e.data("id"),a=e.data("name");d?(t.bssContext.startNewChain({pr:"rubric"}),t.notify("rubricClicked",{id:n,name:a})):t.notify("rubricsListClicked",{id:n,name:a})}},scroller:{},container:{},scrollbar:{},header:{}},"interface":{tabType:"ar",getName:function(){return l.name},setSeoParams:function(){var e={type:"rubricsList"};return l.name&&(e.mainRubric=l.name),l.id&&(e.id=l.id),c.items.length&&(e.subRubrics=f.pluck(c.items.slice(0,3),"name").join(", ")),t.notifySeoParams(e),!0},updateScroll:function(){u.update()}}};return m},t.exports._args=["slot","$dgApi","$analytics","$regionManager","$i18n"]},{"./viewModel.js":353,async:383,lodash:"lodash"}],"/modules/ruler/ruler.js":[function(e,t,n){t.exports=function(e,t,n){function a(e){t.trackEvent("google",["Ruler",e?"Open":"Close"])}var i,o=!1,r={init:function(e){i=e},clientInit:function(){r["interface"].toggle(!(!i||!i.ruler)),e.element("control").attr({title:n._pt("Инструмент измерения","Линейка")})},changeState:function(e){"ruler"in e&&(e.ruler?e.ruler.points||r["interface"].toggle(!!e.ruler):r["interface"].toggle(!1))},elements:{control:{click:function(){var t=!e.mod().pressed;e.notify("clicked",t),a(t)}}},"interface":{close:function(){o&&e.notify("clicked",!1)},toggle:function(t){e.mod({pressed:t}),!o&&t?o=!0:!t&&o&&(o=!1)}}};return r},t.exports._args=["slot","$analytics","$i18n"]},{}],"/modules/schedule/schedule.js":[function(e,t,n){"use strict";var a=req("helpers/schedule"),i=e("./viewModel");t.exports=function(e,t,n,o){function r(t){e.mod({state:t?"expanded":"collapsed"}),e.notify("toggled")}function s(){c=a.getNow(o.getRegion()),u=a.isOpened(l,c)}var l=void 0,c=void 0,u=void 0;return{init:function(t){l=t.model,e.mod({context:t.ctx,state:e.isMausoleum?"expanded":"collapsed"}),n.getFormats("time.is12h")&&e.mod({format:12}),s(),e.mod({open:u}),"firmCard"==t.ctx&&e.init("holidayWarning",{project:"online",type:"short",alertText:n._t("Уточните время работы по телефону.")})},viewContext:function(){return e.invoke(i,[l,c])},elements:{header:{click:function(t){t.stopPropagation(),$(this).mod().expandable&&r("expanded"!=e.mod().state)}}},"interface":{expand:function(){e.mod({state:"expanded"})},close:function(){e.mod({state:null})},updateTime:function(){s(),e.mod({open:u})},printContext:function(){return{html:e.renderPartial("print",this.viewContext())}}}}},t.exports._args=["slot","$analytics","$i18n","$regionManager"]},{"./viewModel":354}],"/modules/searchBar/searchBar.js":[function(e,t,n){"use strict";var a=e("lodash"),i=e("async"),o=req("helpers/string"),r=req("helpers/camel"),s=req("helpers/discreteFrame"),l=req("helpers/linkURL"),c=e("./store"),u=e("./actionCreators/ppnotTime"),d=e("moment");t.exports=function(t,n,h,p,f,m,g,_){function v(){if(n.get("ppnotTime")){var e=c.getState().ppnotTime;p.set("ppnotTime",e.useSelected?e:{date:d().format("YYYY-MM-DD"),time:d().format("HH:mm:ss")})}}function y(){return h.getRegion().id==t.config.universeId}function b(e){e!=t.mod().transport&&(W.suggestFrom["interface"].resetError(),W.suggestTo["interface"].resetError(),t.notify("typeChanged",e),t.mod({transport:e}))}function k(e,n){var a=t.modules.suggest["interface"];a.minimize(),a.resetKitTypes(),t.mod({loading:!0});var i={text:a.text(),rubric:a.rubric(),suggest:a.suggest(),query:a.query(),filters:a.filters()};i.query&&!(i.query.length>2)||i.rubric&&i.rubric.id||i.suggest&&i.suggest.context||(i.query=i.text);var o="enter";e?(i.ortx=n,o="pick",i.ortx||(o="pick_history")):i.ortx=i.query,t.bssContext.startNewChain({pr:o,tx:i.query,ortx:i.ortx}),t.notify("search",i)}function w(e){var n=W["suggest"+o.capitalize(e)]["interface"];n.minimize(),t.mod({loading:!0}),G[e]=n.query();var a=n.geometry(),i={};i[e]={text:G[e],lat:a.lat,lon:a.lon,id:a.id,context:n.getSearchType()},t.notify("rsSubmit",i)}function x(e){e=e||{};var a=e.flags||{},i=n.get("routeSearch")&&!Y;if(i){var o=[];a.road_network&&o.push("Car"),n.get("routeSearch.pedestrian")&&o.push("Pedestrian"),a.public_transport&&o.push("Bus"),a.metro&&o.push("Subway"),W.buttons=o}t.mod({rs:i})}function C(){function e(e){var t=W["suggest"+o.capitalize(e)]["interface"];return t.text()?(t.geometry()||n.push(t.fillGeo),!0):(t.focus(),!1)}var n=[];e("to"),e("from"),i.parallel(n,function(){t.notify("rsSubmit",{from:W.suggestFrom["interface"].getData(),to:W.suggestTo["interface"].getData()})})}function L(e,t){if(e in t){var n=W["suggest"+o.capitalize(e)]["interface"];t[e]?(n.setText(t[e].text),t[e].lon&&t[e].lat?n.setGeometry({lon:t[e].lon,lat:t[e].lat,id:t[e].id}):(n.setGeometry(null),n.setError())):(n.setText(""),n.resetError(),n.setGeometry(null))}}function I(e){var t=!0,n=W["suggest"+o.capitalize(e)]["interface"].text(),a=p.get(e),i=a?a.text:null;return a&&i!=n&&(m.setFromTo(e,null),t=!1),t}function T(e,n){function a(e){e=e||function(){},t.mod().switching?t.setTimeout(e,300):e()}var i={directory:"directory",from:"rs",to:"rs"};if(W.suggest){var o=W.suggest["interface"],r=W.suggestFrom&&W.suggestFrom["interface"],s=W.suggestTo&&W.suggestTo["interface"];i[e]&&n&&t.mod({mode:i[e]}),"directory"!==e&&e||"directory"!==t.mod().mode?"rs"==t.mod().mode&&("from"===e?a(r.focus):"to"===e?a(s.focus):"rs"===e&&(r.text().length?s.text().length||a(s.focus):a(r.focus))):o.text().length||a(o.focus)}}function S(e){if("media"==e?j():M(),"products"===e){var t=p.panels.get("products"),n=!!t.id;E(n)}else P()}function E(e){var n=e?"item":"list";t.mod({products:n})}function P(){t.mod({products:!1})}function j(){O(),t.element("media").mod().visible||(t.element("media").mod({visible:!1}),t.setTimeout(function(){t.mod({media:"expanded"}),t.element("media").mod({visible:!0}),t.broadcast("suggest:enableMedia"),t.notify("mediaExpanded",{isLastPanelMediaCard:"firm"===p.panels.last().type})},300))}function M(){t.mod({media:!1,shifted:!1,columns:!1}),t.element("media").mod({visible:!1}),t.broadcast("suggest:disableMedia",300),t.notify("mediaCollapsed")}function A(){t.mod({minimized:!0})}function D(){t.mod({minimized:!1})}function R(){return a.findKey({media:p.shouldBeMediaMode(),products:p.shouldBeProductsMode()})}function N(){return t.element("media").mod().mode}function B(e){if(!t.isServer){var n="results"===e.mode,a="";if(n){var i=e.type||"media",o={media:H,products:g._nt("Найден %1 вариант","Найдено %1 варианта","Найдено %1 вариантов",e.total)};a=o[i]}else a=g._t("Назад");t.element("resultsPlaceholder").text(a).data({mode:e.mode}),t.element("media").mod({mode:e.mode})}}function F(e){"card"===e.mode&&t.mod({minimized:!0}),t.isClient&&(Z.setData(e),t.element("mediaTabs").html(t.renderPartial("mediaTabs",Z.viewContext())),B(e))}function O(e){t.isServer||p.shouldBeMediaMode()&&(e=e||s.getColumnsNumberToShow("mediaCard",t.ua(),_,window),t.mod({columns:e}))}function z(){var e=t.mod().shifted;e?t.notify("maximizeControlClicked"):t.notify("minimizeControlClicked",{contentType:N(),specialMode:R(),queryText:H})}function q(){var e={onDateChangeHandler:function(e){c.dispatch(u.changeDate(e))},onTimeChangeHandler:function(e){c.dispatch(u.changeTime(e))},onUserSelectedChangeHandler:function(e){c.dispatch(u.changeUseSelected(e))}},n=t.initDumb("ppnotTime",Object.assign({},c.getState().ppnotTime,e),"ppnotTime");return c.subscribe(function(){
return v(),n.slot.rerenderDumb(Object.assign({},c.getState().ppnotTime,e))}),n}function U(){if(Y){var e=p.get("panels").length>1&&!p.get("dataViewer/minimized");t.mod("backInsteadLogo",e)}}var H=void 0,G={from:"",to:""},W={},V=void 0,Z=t.invoke(e("./mediaTabs.js"),[t]),Y=t.ua().isPhone,K={init:function(e){H=e.text||e.query||"",t.mod({mode:e.state?"rs":"directory"}),t.mod({transport:e.type||"bus"});var i=h.getRegion();t.mod({city:i&&i.code?r(i.code):""});var o="",s="",l=null,c=null;e.to&&(l=a.pick(e.to,"lon","lat","id"),o=e.to.text),e.from&&(c=a.pick(e.from,"lon","lat","id"),s=e.from.text);var u=[{type:"suggest",data:{query:H,placeholder:g._pt("Плэйсхолдер для поля поиска по справочнику","организации, адреса, маршруты"),autofocus:!0}},{type:"suggestRs",data:{query:s,type:"from",placeholder:g._pt("Плэйсхолдер для поля поиска маршрута проезда","откуда"),geometry:c}},{type:"suggestRs",data:{query:o,type:"to",placeholder:g._pt("Плэйсхолдер для поля поиска маршрута проезда","куда"),geometry:l}}];n.get("ppnotTime")&&(W.ppnotTime=q(),t.mod({ppnotTime:"show"})),t.initModules(u,function(e,t){W.suggest=t[0],W.suggestFrom=t[1],W.suggestTo=t[2]}),h.on("init region",function(e){n.onChange("routeSearch",function(){x(e)},!0),t.element("transport").html(t.renderPartial("transportTypes",{buttons:W.buttons})),t.element("logo").attr("href","/"+e.code),t.mod({city:e&&e.code?r(e.code):""})}),t.isGrym&&t.init("cityFilter"),p.floors.isActive()&&t.mod({context:"floors"}),U()},bind:function(){var e=y()||t.isGrym&&p.get("citySelect");t.mod({cityFilter:e})},changeState:function(e,n){var i=a.get(n.panels.last(),"type"),o="firm"===i&&a.get(n.panels.last(),"media")&&!n.floors.isActive();t.mod({mediaCard:o});var r=n.getQuery(),s="rs";if(r!=H&&(H=r,t.broadcast("suggest:setText",r)),a.has(e,"routeTab")&&(s=e.routeTab?"rs":"directory",t.mod({mode:s})),L("from",e),L("to",e),(a.has(e,"routeTab")||a.has(e,"to")||a.has(e,"from"))&&T(s),a.has(e,"rsType")){var l=n.getRouteSearchType();t.mod().transport!=l&&t.mod({transport:l})}t.isGrym&&a.has(e,"citySelect")&&(t.mod({cityFilter:e.citySelect}),e.citySelect||T()),e.city&&t.mod({city:h.getRegion().code}),(t.isGrym&&e.citySelect||y())&&t.broadcast("cityFilter:focus");var c=R();(a.has(e,"panels")||a.has(e,"routeTab")||a.has(e,"floors"))&&(S(c),c&&t.mod({shifted:p.get("dataViewer/minimized")})),"dataViewer/minimized"in e&&c&&t.mod({shifted:!!e["dataViewer/minimized"]}),U()},viewContext:function(){var e=h.getRegion();x(e),W.cityAlias=e&&e.code?e.code:"",W.citySeoLink=l("city",{city:e.code});var n=p.queryString,i={utm_source:n.get("utm_source"),utm_medium:n.get("utm_medium"),utm_term:n.get("utm_term"),utm_campaign:n.get("utm_campaign"),utm_content:n.get("utm_content")},o=a.reduce(i,function(e,t,n){return t&&(e+=n+"="+t+"&"),e},"?");return o.length>1&&(W.utmString=o.substr(0,o.length-1)),W.isMausoleum=t.isMausoleum,W.isPhone=Y,W},elements:{logo:{click:function(e){t.isGrym&&!y()&&(e.preventDefault(),t.notify("logoClicked"))}},back:{click:function(){t.notify("back")}},form:{submit:function(e){e.preventDefault(),"rs"!=t.mod().mode?t.broadcast("suggest:submit",!0):C()}},"switch":{click:function(){var e=W.suggestTo["interface"],n=W.suggestFrom["interface"],a=n.geometry(),i=e.geometry(),o=n.text(),r=e.text();e.setGeometry(a),e.setText(o),n.setGeometry(i),n.setText(r),C(),t.notify("switchPoints")}},directoryBtn:{click:function(){"directory"!=t.mod().mode&&(t.mod({mode:"directory"}),t.notify("modeChanged","directory"))}},rsBtn:{click:function(){"rs"!=t.mod().mode&&(t.mod({mode:"rs"}),t.notify("modeChanged","rs"),t.notify("rsBarClicked"),f.trackEvent("google",["RouteSearch","Enter","Tab"]),f.trackEvent("yandex",["ROUTE_TAB_CLICK"]))}},transportCar:{click:function(){b("car")}},transportPedestrian:{click:function(){b("pedestrian")}},transportBus:{click:function(){b("bus")}},transportSubway:{click:function(){b("subway")}},mediaTab:{click:function(){var e=$(this).data("name");t.notify("mediaTabClicked",e),t.notify("mediaTabClickedTrack",e)}},mediaMinimize:{click:function(){z()}},mediaMaximize:{click:function(){z()}},mediaClose:{click:function(){t.notify("closeControlClicked",{specialMode:R(),contentType:N(),queryText:H})}},mediaBack:{click:function(){t.notify("backLinkClicked",R())}},resultsPlaceholder:{click:function(){var e=R(),n=N();"results"===n?(t.notify("resultsPlaceholderClicked",e),"media"===e&&D()):"card"===n&&t.notify("backLinkClicked",e)}},mediaLogo:{click:function(){var e=R();t.notify("backLinkClicked",e)}}},"interface":{setLoading:function(e){t.mod({loading:e})},setQuery:function(e){t.broadcast("suggest:setText",e)},cleanColors:function(){W.suggestTo["interface"].setColor(),W.suggestFrom["interface"].setColor()},setColors:function(e){e&&("to"in e&&W.suggestTo["interface"].setColor(e.to),"from"in e&&W.suggestFrom["interface"].setColor(e.from))},checkState:function(){var e=!1,t=void 0,n=void 0;I("from")||(e=!0,n=W.suggestFrom["interface"].text()),I("to")||(e=!0,t=W.suggestTo["interface"].text()),e&&p.replace(),t&&W.suggestTo["interface"].setText(t),n&&W.suggestFrom["interface"].setText(n)},collapse:function(){t.mod({collapsed:!0})},expand:function(){t.mod({collapsed:!1})},hide:function(){t.mod({hidden:!0})},show:function(){t.mod({hidden:!1})},addMediaCardMode:function(){t.mod({mediaCard:!0})},removeMediaCardMode:function(){t.mod({mediaCard:!1})},trackMediaShift:function(){t.notify("shiftMediaCard")},updateMediaTabsText:B,resize:O,setColumnsLength:O,minimize:A,maximize:D,focus:T,updateSpecialMode:S,updateMediaTabs:F,enterFloors:function(){t.mod({context:"floors"}),t.setTimeout(function(){W.suggest["interface"].setPlaceholder(g._t("поиск по этажам"))})},exitFloors:function(){t.mod({context:null}),W.suggest["interface"].setPlaceholder(g._pt("Плэйсхолдер для поля поиска по справочнику","организации, адреса, маршруты"))}},dispatcher:{"suggest:submitted":k,"suggestRs:submitted":w,"suggestRs:enterPressed":C},modHandlers:{mode:function(){t.isClient&&(t.mod({switching:!0}),clearTimeout(V),V=t.setTimeout(function(){t.mod({switching:!1})},300),n.get("performance")&&t.fpsMeter&&t.fpsMeter.start&&(t.fpsMeter.start(),t.block().one("transitionend",function(){var e=t.fpsMeter.end(.9);f.trackEvent("google",["Performance","SearchBarFps",e+""])})))}}};return K},t.exports._args=["slot","$featureSwitcher","$regionManager","$appState","$analytics","$routeSearchStore","$i18n","$localStorage"]},{"./actionCreators/ppnotTime":355,"./mediaTabs.js":357,"./store":360,async:383,lodash:"lodash",moment:"moment"}],"/modules/searchResults/searchResults.js":[function(e,t,n){var a=e("lodash"),i=e("../../helpers/digiRunner");t.exports=function(t,n,o,r,s,l,c){function u(){return t.isMausoleum?!0:a.contains(["firms","rubric"],z)&&l.get("pagination")}function d(){a.each(X.getItems(),function(e){if(e.header)te.push(e);else if("contextPromo"==e.type)e.target="Search_Promo",te.push(t.init("contextPromo",e));else{var n=t.init("miniCard",{model:e,analyticsPlace:H,searchType:X.get("type")});te.push(n)}})}function h(){t.element("list").empty(),a.each(te,function(e){e.dispose&&e.dispose()}),te=[]}function p(e){function n(e){if(te[e].header){var n=te[e].type?te[e].type:"listHeader";t.element("list")[i](t.renderPartial(n,te[e]))}else t.element("list")[i](te[e].render()),te[e].bindEvents(),te[e]["interface"].appear()}var i=e?"prepend":"append";if(!X.get("error")){var o=te.length;d();var r=a.range(o,te.length),s=e?a.eachRight:a.each;s(r,n),t.mod({busy:!1})}}function f(e){var n=e&&e.isReload;h(),y(),t.mod({filtering:"done",makeReload:null}),X.get("length")&&d();var a=J.viewContext(),i=t.renderPartial(a.contentPartial,a);t.element("content").html(i),a.expandedView||O(a,n),t.rebind(),D(),w()&&_(),t.setTimeout(function(){_()},t.config["animations.filtersGlassDisappear"]+200),t.notify("summaryChanged",X.get("mode"),X.get("headerInfo")),t.broadcast("pagination:invalidate",ne)}function m(){if(X.has("data")){if(t.mod({notFound:X.is("notFound")}),X.get("advFiltersAllowed")&&!l.get("businessLandingDemoMode")&&t.init("filters",{mods:{context:"catalog"},filters:X.get("filtersData"),widgets:X.get("widgetsData"),forcedValues:X.get("forcedValues"),contextId:t.moduleId(),contextRubricsIds:X.get("contextRubrics"),mode:z,boundSortAllowed:X.is("boundSortAllowed")}),"filials"==X.get("type")){var n=a.pick(X.get("filialsData"),"ads","name");n.mods={filials:!0},t.init("cardHeader",n)}if(b()&&x(),D(),u()){var i=t.invoke(e("./seo"),[t]),o=i.getParams(X);t.init("pagination",{seoParams:o,page:ne})}C(),X.get("length")&&d()}}function g(){k()&&U&&(U.update(),_())}function _(){if(w()){var e=a.filter(te,function(e){return"miniCard"==e.type&&e.block().seeable(.5)});a.each(e,function(e){e["interface"].trackBssImpression(),e["interface"].trackShowEvent()})}}function v(){X.get("count")?((ne.max>=ne.count||X.get("itemsCount")>=X.get("count"))&&t.mod({preloaderBottom:null}),ne.min<=1&&t.mod({preloaderTop:null})):t.mod({preloaderTop:null,preloaderBottom:null})}function y(){t.element("scroller").scrollTop(0)}function b(){return q||t.notify("isActive",X.get("mode"))}function k(){return b()&&t.notify("isVisible")}function w(){return a.contains(["firms","inbuild","servicing","profiles","filials","rubricsNear"],z)}function x(){Z=t.searchContext.makeCurrent(t.moduleId()),Z.write("query",W.query),G=a.extend(t.broadcast("filters:getDefaultValues")||{},G),Z.setFilters(G),Z.write("type",z),Z.write("requestType",X.get("requestType")),Z.del("lastChangedFilter"),Z.write("contextRubrics",X.get("contextRubrics")),Z.write("contextIds",X.get("contextIds")),Z.setBlockDa(X.get("attributes")),Z.write("contextKey",X.get("contextKey")),Z.write("onFilterValuesChange",function(e){Z.write("initiatorId",e),t.bssContext.startNewChain({extendParams:!0,updateContext:!0}),G=Z.getFilters(),n.applyFilters(G),n.push()})}function C(){t.broadcast("pagination:setHidden",ne.count<=1)}function L(e,n){e=e||a.noop,n=n||1,A(n),t.notify("changePage",n),X.reset(!0).loadPage(n).then(function(){P(),f({isReload:!0}),C(),Z.emit("filtersUpdate",X.get("filtersData")),F(e)})["catch"](function(){f({isReload:!0}),B(),Z.emit("filtersUpdate",X.get("filtersData")),M(),e(!0)})}function I(e){var n=Z.read("lastChangedFilter"),a="bound"==n||"sort"==n&&"bound"==G.sort;G=e||{},X.setFilters(G),Z.setFilters(G),t.mod({filtering:"inProgress",byBound:a||X.is("boundSorted")}),t.notify("invalidateFilters"),t.addTransition(function(e){L(function(t){t||j(),e()})}),t.broadcast("filters:invalidateUIValues"),Z.del("initiatorId")}function T(e){ne.max++,ne.current=ne.max,X.loadPage(ne.current,{abort:!1}).done(function(){P(),p(),e&&e()})}function S(e){ne.min--,ne.current=ne.min,X.loadPage(ne.current,{abort:!1}).done(function(){P(),p(!0),e&&e()})}function E(e){(!e||1>e)&&(e=1),e>ne.count&&(e=ne.count),ne.current=e,X.reset().loadPage(ne.current).done(function(){P(),f(),N()&&ie.refresh(),C()})}function P(){u()&&t.notify("pageShown",ne.current),X.has("providersBooklet")&&o.trackEvent("googleBooklets",["Booklet_Providers","Button","Show_Card"]),X.has("providersButton")&&o.trackEvent("googleBooklets",["Booklet_Providers","Button","Show_Search"]);var e=X.get("rubricOriginalName");e&&t.notify("originalRubricNameFound",e),v()}function j(){X.is("affectsMap")&&(Q=!0,X.loadMarkers().then(function(){if(!n.inGlobal())if("profiles"==z)t.notify("royalizeMarker",X.get("mapData").markers[0]);else{var e={result:X.get("mapData"),mode:X.get("mode"),type:z,initData:W};t.notify("mapDataReady",e,V)}}))}function M(){X.is("affectsMap")&&(Q=!1,"profiles"==z?t.notify("deroyalizeMarker",X.get("mapData").markers[0]):t.notify("clearMap",X.get("mode")))}function A(e){ne.current=e,ne.min=ne.current,ne.max=ne.current}function D(){ne.count=X.get("pagesCount"),t.mod({busy:!1,preloaderBottom:ne.max<ne.count&&!u()})}function R(e){e=e||a.noop;var n=t.element("scroller")[0];if(u()||!n)return void e();var i=n.scrollTop+n.clientHeight>n.scrollHeight-1e3,o=t.element("loader_top").outerHeight(!0);Y=o-n.scrollTop;var r=n.scrollTop<o;i&&!t.mod().busy&&t.mod().preloaderBottom?(t.mod({busy:!0}),t.bssContext.continueChain(),T(function(){t.mod({busy:!1}),R(e)})):r&&!t.mod().busy&&t.mod().preloaderTop?(t.mod({busy:!0}),t.bssContext.continueChain(),S(function(){for(var a=0,i=t.block().find(".miniCard"),r=0;r<X.get("pageSize");r++)a+=i.eq(r).height()+1;t.mod().preloaderTop?n.scrollTop=a+o-Y:n.scrollTop=a-Y,R(e)})):e()}function N(){var e=X.get("type");return!t.isGrym&&!t.ua().isPhone&&!t.ua().isIE(8)&&!n.queryString.has("printmode")&&("query/firms"==e||"servicing"==e&&X.is("servicingInternet"))&&!l.get("businessLandingDemoMode")}function B(){X.get("adsLength")||ie.get()||!b()||X.is("advertisingFilials")||ie.showFreeSpaceBanner()}function F(e){e=e||a.noop,R(function(){B(),e()})}function O(e,n){ee&&ee();var a=t.renderPartial("header",e),o=t.element("header"),r=[e.count];n&&!X.is("boundSorted")?(t.element("header").mod({animating:!0}),ee=i(a,r,function(e){o.html(e)},function(){t.element("header").mod({animating:!1})})):o.html(a)}var z,q,U,H,G,W,V,Z,Y,K,X,J,Q,ee,te=[],ne={},ae=e("./miniCardClicked.js")(t),ie=e("./banner")(t,o),oe=a.once(function(){var e=t.config["animations.frameHide"]+50;t.setTimeout(function(){_()},e)});return J={inheritBssHash:!0,init:function(e,n){if(!e||!a.size(e))return t.mod({mode:"firms"}),G=t.searchContext.getFilters(),void n();if(X=e.model,W=e,z=e.type,V=e.typeFit,A(X.get("page")),Z=t.searchContext.makeCurrent(t.moduleId()),X=e.model,X.is("boundSorted")&&!t.isClient&&t.mod({makeReload:!0}),P(),X.get("advFiltersAllowed")&&(G=e.filters||{},Z.setFilters(G)),q=!e.notSimple,t.mod({mode:X.get("mode")}),H=t.isClient&&X.get("rubricId")?o.PLACE_CATALOG:o.getPlace(),t.mod({complexity:q?"simple":"complex"}),t.registry("pageViewContext").extendedSearchShown=!1,m(),N()){var i=c.getSettings(),s=X.get("contextRubricShortIds");0===s.length&&X.is("recovery")&&(s=X.get("contextRubricShortIdFromResults"));var l=i.ads.mkb.rotate;if(a.isArray(l)){var u=r.getRegion().code;l=a.contains(l,u)}X.is("recovery")?ie.create(s,!0,"recoveryResults"):ie.create(s,!l,"results")}return"discovery"==X.get("requestType")&&t.notify("showDiscoveryResult",X.get("contextRubrics")),1==X.get("servicingGroupsCount")&&t.mod("singleServicing",!0),X.is("tyresSearch")?void X.checkForTyres(function(e){e&&t.notify("showTyresButton"),n()}):void n()},clientInit:function(){function e(){if("firms"==z&&t.notify("clientInit",X),$(window).on("blur",ie.needRefresh),$(window).on("focus",ie.needRefresh),!u()&&200==X.get("code")){ne.min>1&&t.mod({preloaderTop:!0});var e=t.element("loader_top")[0].offsetHeight;t.element("scroller").scrollTop(e),ne.max<ne.count&&t.mod({preloaderBottom:!0})}F(),t.notify("resultsRendered")}t.mod().makeReload?(t.element("list").empty(),L(e,X.get("page"))):e()},bind:function(){U||(U=t.element("scroller").baron(),t.setTimeout(function(){U.fix({elements:".searchResults__fade",outside:"_state_fixed",before:"_pos_top",after:"_pos_bottom",past:"_group_top",future:"_group_bottom",clickable:!0,limiter:!0})},100))},dispose:function(){U&&U.dispose(),t.isClient&&($(window).off("blur",ie.needRefresh),$(window).off("focus",ie.needRefresh)),X.dispose()},viewContext:function(){var n=e("./viewModel"),a=t.invoke(n,[X,q,te,t.ua().isPhone]);return a.mkbBanner=N()&&ie.get(),a.pagination=u(),a.expandedView&&t.mod({expandedView:!0}),a},changeState:function(e){(e.mapcenter||e.zoom)&&!n.inGlobal()&&b()&&X.is("boundSorted")&&(t.bssContext.continueChain(),t.mod({filtering:"inProgress",byBound:!0}),t.addTransition(function(e){L(function(t){!t&&Q&&j(),e()})})),a.get(e,"panels.removed")&&t.ua().isPhone&&w()&&t.setTimeout(_)},elements:{scroller:{scroll:function(){_(),t.broadcast("pagination:checkSeeability"),R()}},loader_top:{selector:".searchResults__loader._top"},loader_bottom:{selector:".searchResults__loader._bottom"},providerAggregatorButton:{click:function(e){e.preventDefault(),o.trackEvent("googleBooklets",["Booklet_Providers","Button","Click_"+(X.get("buildingId")?"Card":"Search")]),t.notify("providersAggregatorButtonClicked",X)}},tyresButton:{click:function(e){e.preventDefault(),t.notify("tyresButtonClicked")}},extendedSearch:{click:function(){t.notify("extendedSearchClicked")}},bannerClose:{click:ie.closeByUser}},"interface":{windowResized:function(e){k()&&e&&e.delta.h&&_()},checkFreeSpaceBanner:B,updateScroll:g,getFiltersData:function(){return{filters:X.get("filtersData"),widgets:X.get("widgetsData"),contextRubricsIds:X.get("contextRubrics")}},drawOnMap:j,clearMap:M,isActive:b,scrollToTop:y,addResults:p,getMode:function(){return X.get("mode")},isMode:function(e){return e==X.get("mode")},getHeaderInfo:function(){return X.get("headerInfo")},applyChange:function(e){"filters"in e&&X.get("advFiltersAllowed")&&(K=a.size(e.filters),t.element("wizard").mod({hidden:K>2}),I(e.filters)),"page"in e&&u()&&(t.element("wizard").mod({hidden:null!==e.page||K>2}),E(e.page))},activateContent:function(){ie.needRefresh(),b()&&(x(),k()&&!J["interface"].deactivatedOnce&&w()&&oe())},activateSearchContext:function(){return b()?(x(),!0):!1},registerShowEvents:function(){b()&&w()&&oe()},onCloseBookFrame:function(e){"filters"==e.type&&t.broadcast("filters:toggleTextMode",!1)},setSeoParams:function(){var n="firms"==t.mod().mode?J["interface"].getPage():null,a=t.invoke(e("./seo"),[t]),i=a.getParams(X,n);return i?(t.notifySeoParams(i),!0):null},wizardEnable:function(e,n){var i=a.omit(e,X.get("mode"));if(!(q||a.isEmpty(i)&&a.isEmpty(n))){var o=t.init("wizard",{query:W.query,mode:X.get("mode"),regions:n,summary:i});t.isEventsBound&&t.element("wizard")(o.render())}},changeVisibility:ie.needRefresh,isVisible:k,getPrintData:function(){var e={};e.results=a.map(te,function(e){return e.header?e:e["interface"]&&e["interface"].printContext?e["interface"].printContext.call(e):null}),t.modules.filters;var n=t.searchContext.read("type"),i=t.searchContext.read("query"),o=X.get("title"),r="Search";if(0==n.indexOf("query")&&i)e.title=c._t("%1 по запросу %2",o,c._quote(i));else if("filials"==n||"profiles"==n)e.title=o;else if("inbuild"==n){r="Inside";var s=X.get("buildingAddress");s?e.title=c._gg("Организации в здании %1",c._quote(s)):e.title=c._gg("Организации в здании")}else"servicing"==n?e.title=c._gg("Обслуживающие организации"):e.title=c._gg("Результаты поиска");var l=t.renderPartial("print",e);return{analyticsLabel:r,layout:"search","static":$(l).filter('[data-print="static"]'),dynamic:$(l).filter('[data-print="dynamic"]')}},getPage:function(){return X.is("seoScrollable")?{current:ne.current,max:ne.count}:null}},dispatcher:{"miniCard:isActive":function(){return b()},"miniCard:clicked":function(e,n){t.bssContext.continueChain(),ae(e,n)},"miniCard:miniCardBookletButtonClicked":function(e,n){X.get("buildingId")&&(n.geoid=X.get("buildingId")),t.notify("bookletButtonClicked",e,n)},"pagination:pagePicked":function(){t.mod({busy:!0,preloaderBottom:!0}),h(),t.bssContext.continueChain()},"miniCard:floors":function(e,n){t.bssContext.continueChain(),t.notify("bssShowInFloorsClicked",n)}}}},t.exports._args=["slot","$appState","$analytics","$regionManager","$requestGroups","$featureSwitcher","$i18n"]},{"../../helpers/digiRunner":"/helpers/digiRunner.js","./banner":361,"./miniCardClicked.js":362,"./seo":363,"./viewModel":364,lodash:"lodash"}],"/modules/selectBox/selectBox.js":[function(e,t,n){var a=e("lodash");t.exports=function(t,n,i,o,r,s){function l(){x(E),M.data("value",M.val()),E.eraseOnClick||M[0].select(),t.mod({focused:!0,opened:!0}),d(),f("selected"),j.on("keydown",u),P.update(),t.notify("animationCompleted"),t.notify("opened",{name:E.name})}function c(){o.abortGroup("suggest_widget"),M.val()?(M.val(M.data("value")),_()):E.eraseOnClick?(M[0].value=E.defaults.label,_()):g(E.defaults.value),M.trigger("blur"),t.mod({focused:!1,opened:!1}),j.off("keydown"),t.notify("animationCompleted"),t.notify("closed")}function u(e,t){var n=e.keyCode||(t||{}).keyCode;switch(n){case 9:case 27:c();break;case 13:m();break;case 38:h("prev");break;case 40:h("next")}}function d(){var e=t.element("dropdownItem").height();t.element("scroller").css({"max-height":e*E.visibleItemsCount+"px"})}function h(e){var n=t.element("dropdownItem").filter("._hovered");n.length?(n.mod({hovered:!1}),p(e,n).mod({hovered:!0})):(n=t.element("dropdownItem").filter("._selected"),n.length?n.mod({hovered:!0}):t.element("dropdownItem").first().mod({hovered:!0}))}function p(e,n){var a={},i=0,o=t.element("dropdownItem").filter("._default"),r=o.length?0:1,s=t.element("dropdownItem").length-(o.length?1:0);return"next"==e?(i=parseInt(n.data("index"),10)+1,s>=i?(a=A.find('[data-index="'+i+'"]'),f(!1,a)):(a=A.find('[data-index="'+r+'"]'),f("top"))):(i=parseInt(n.data("index"),10)-1,i>=r?(a=A.find('[data-index="'+i+'"]'),f(!1,a)):(a=A.find('[data-index="'+s+'"]'),f("bottom"))),a}function f(e,n){var a=t.element("scroller"),i=t.element("dropdownItem").height();if(e)switch(e){case"top":a.scrollTop(0);break;case"bottom":a.scrollTop(t.element("dropdownItem").length*i);break;case"selected":var o=A.find("._selected");o.length&&a.scrollTop(o.position().top-i)}else{var r=n.position().top,s=a.scrollTop(),l=t.element("dropdownWrapper").height();r>=s+l&&a.scrollTop(r-l+i),s>r&&a.scrollTop(r)}}function m(){var e=t.element("dropdownItem").filter("._hovered");e.length&&(g(e.data("value"),e.data("index")),E.eraseOnClick&&M.mod({hidden:!1,selected:!0}),a.has(E,"icons.searchIcon")&&t.element("searchControl").mod({hidden:!0}),E.marker&&t.element("markerColor").attr("style",e.attr("style")).mod({visible:!0})),E.eraseOnClick&&E.showClearButton&&t.mod({showClearButton:!0}),c()}function g(e,n){var i={},o=D.val(),r="";if(r=null===e||a.isUndefined(e)?E.defaults.label:y(e,n),e!=o||""==e){if(D.val(e),a.isNull(D.val()))throw D.val(o),Error("В селекте "+E.name+" отсутствует значение "+e);N&&(i=t.element("dropdownItem").filter('[data-value="'+e+'"]'),t.element("dropdownItem").filter("._selected").mod({selected:!1}),M.data("value",r).val(r),i.mod({selected:!0}),M.mod({selected:!0}),_(e)),e!=o&&D.trigger("change")}}function _(e){C(I,e)}function v(){return D.val()}function y(e,t){var n=E.items;E.notShowDefaultValueInDropdown||(n=n.concat(E.defaults));var i;return i=a.isUndefined(t)?a.find(n,{value:e}):a.find(n,{value:e,index:parseInt(t,10)}),i&&(i.text||i.label)}function b(){return E.items}function k(n,s){var l=r.get("widgetSuggest")&&a.startsWith(I.tag,"carspares_"),c=l?"suggest":"simple",u=e("./searchItems")(I,i,o);u(n,{type:c,tag:I.tag},function(e){t.mod().opened&&(E=C({items:e||[]}),s(E))})}function w(e){$.trim(e).length&&e.length>=E.minFilteringLength?k(e.replace(/^\s*/,""),function(e){e&&(x(e),E.notShowDefaultValueInDropdown?t.element("dropdownItem").first().mod({hovered:!0}):t.element("dropdownItem").filter("._default").next().mod({hovered:!0}))}):x(S(I,s))}function x(e){var n=t.renderPartial("dropdownItems",e);A.html(n),P.update()}function C(e,t){var n;t&&(n=a.map(a.compact(e.items),function(e){return e.selected=e.value==t,e}));var i=a.defaults({notShowDefaultValueInDropdown:E.notShowDefaultValueInDropdown,items:n||e.items,defaults:!E.notShowDefaultValueInDropdown&&e.defaults,name:e.name||E.name},e);return E=S(i,s)}function L(e){var n=a.find(e,{value:v()});n&&(n.selected=!0,T=n.value);var i=a.extend({},I,{items:e});C(i),t.rerender()}var I,T,S=e("./viewModel"),E={},P={},j={},M={},A={},D={},R=t.moduleId(),N=!t.ua().isMobile,B=a.throttle(w,200),F={init:function(e){e=e||{},I=a.cloneDeep(e);var n=a.find(e.items,"selected");C(e),n&&(T=n.value),t.mod({type:e.mod,isPlaceholder:!!e.placeholder,showClearButton:!!e.showClearButton,isMarker:e.marker})},viewContext:function(){return E.isDesktop=N,t.mod({isDesktop:N}),N&&(t.mod({disabled:E.attributes.disabled}),E.selectId=R),E},clientInit:function(){var e;$(document).on("mousedown."+R,function(t){e=t.target}),$(document).on("mouseup."+R,function(){$(e).closest(t.block()).length||$(e).closest(".track__bar").length||t.ifAlive(function(){t.mod().opened&&c()})()})},bind:function(){D=t.element("original"),N&&(j=t.element("wrapper"),M=t.element("input"),A=t.element("dropdown"),P=t.element("scroller").baron(),t.setTimeout(function(){P.update()},0),t.element("input").data("value",E.selectedItemLabel).val(E.selectedItemLabel))},dispose:function(){N&&($(document).off("mousedown."+R,"mouseup."+R),P.dispose())},elements:{wrapper:{click:function(){return E.attributes.disabled?!1:(t.mod().opened?c():(E.eraseOnClick?(g(""),t.element("searchControl").mod({hidden:!1}),t.element("markerColor").mod({visible:!1})):(t.mod({showClearButton:!0}),h("next")),l(),n.trackEvent("google",["Search","Advanced","ListClick:"+I.tag])),null)}},input:{keydown:function(e){var n=e.keyCode;if(38==n||40==n)return!1;if(E.notShowDefaultValueInDropdown)switch(n){case 13:m(),t.mod({showClearButton:!0});break;case 27:c();break;default:t.mod().opened||l()}return null},keyup:function(e){var n=e.keyCode;return 38==n||40==n?!1:(37!=n&&39!=n&&B($(this).val()),$(this).val()||(t.element("markerColor").mod({visible:!1}),t.element("searchControl").mod({hidden:!1})),null)}},dropdownGroupLabel:{click:function(e){e.stopPropagation()}},clear:{click:function(e){e.stopPropagation(),g(null),c(),M.mod({selected:!1,hidden:!1}),t.element("markerColor").mod({visible:!1}),t.element("searchControl").mod({hidden:!1})}},dropdownItem:{click:function(e){e.stopPropagation(),m()},mousedown:function(){E.eraseOnClick&&M.mod({hidden:!0,selected:!1})},mouseenter:function(){var e=t.element("dropdownItem").filter("._hovered");e.length&&e.mod({hovered:!1}),$(this).mod({hovered:!0})}},original:{focus:function(){t.mod({focused:!0})},blur:function(){t.mod({focused:!1})},keydown:function(e){return 40==e.keyCode||38==e.keyCode?(l(),j.trigger("keydown",{keyCode:40}),!1):null},change:function(){var e={name:E.name,prev:T};""!==this.value&&(e.current=this.value),t.notify("changed",e),T=e.current}}},"interface":{openSelect:l,closeSelect:c,setValue:g,getValue:v,setItems:L,getItems:b,getName:function(){return E.name},setDefault:function(){g(E.defaults.value)}}};return F},t.exports._args=["slot","$analytics","$suggestApi","$requestGroups","$featureSwitcher","$i18n"]},{"./searchItems":365,"./viewModel":366,lodash:"lodash"}],"/modules/selectBox2/selectBox2.js":[function(e,t,n){var a=e("lodash");t.exports=function(t){function n(){var e=t.element("input");e.data("value",e.val()),t.setTimeout(y,0),t.mod({opened:!0}),o(),r({fastForward:"selected"}),p(x),t.notify("animationCompleted")}function i(e){var n=t.element("input");n.val()?n.val(n.data("value")):u(x.defaults.value),t.mod({opened:!1}),e&&n.trigger("focus"),y(),t.notify("animationCompleted")}function o(){var e=t.element("dropdownItem").height();t.element("scroller").css({"max-height":e*x.visibleItemsCount+"px"})}function r(e){if(!e.item&&!e.fastForward)throw Error("В параметрах не указано ни одного подходящего значения");var n=t.element("scroller"),a=t.element("dropdownItem").height();if(e.fastForward)switch(e.fastForward){case"top":n.scrollTop(0);break;case"bottom":n.scrollTop(t.element("dropdownItem").length*a);break;case"selected":n.scrollTop(t.element("dropdown").find("._selected").position().top-a);break;case"hovered":n.scrollTop(t.element("dropdown").find("._hovered").position().top-a)}else{var i=e.item.position().top,o=n.scrollTop(),r=t.element("dropdownWrapper").height();i>=o+r&&n.scrollTop(i-r+a),o>i&&n.scrollTop(i)}}function s(e){e=e||{};var n=t.element("dropdownItem").filter("._hovered");return e.value?(n.mod({hovered:!1}),t.element("dropdown").find('[data-value="'+e.value+'"]').mod({hovered:!0}),void r({fastForward:"hovered"})):e.direction?(n.mod({hovered:!1}),void l(e.direction,n).mod({hovered:!0})):void(n.length||(n=t.element("dropdownItem").filter("._selected"),n.length?n.mod({hovered:!0}):t.element("dropdownItem").first().mod({hovered:!0})))}function l(e,n){var a={},i=0,o=t.element("dropdown"),s=t.element("dropdownItem").filter("._default").length,l=s?0:1,c=t.element("dropdownItem").length-(s?1:0);switch(e){case"next":i=parseInt(n.data("index"),10)+1,c>=i?(a=o.find('[data-index="'+i+'"]'),r({item:a})):(a=o.find('[data-index="'+l+'"]'),r({fastForward:"top"}));break;case"prev":i=parseInt(n.data("index"),10)-1,i>=l?(a=o.find('[data-index="'+i+'"]'),r({item:a})):(a=o.find('[data-index="'+c+'"]'),r({fastForward:"bottom"}));break;default:a=t.element("dropdownItem").filter("._selected")}return a}function c(){var e=t.element("dropdownItem").filter("._hovered");e.length&&u(e.data("value")),i(!0)}function u(e){var n=t.element("original"),i={},o=n.val();if(e||(e=""),n.val(e),a.isNull(n.val()))throw n.val(o),Error("В селекте "+x.name+" отсутствует значение "+e);x.isDesktop&&(i=t.element("dropdownItem").filter('[data-value="'+e+'"]'),t.element("dropdownItem").filter("._selected").mod({selected:!1}),t.element("input").data("value",i.text()).val(i.text()),i.mod({selected:!0}),f(e)),e!=o&&n.trigger("change")}function d(){return t.element("original").val()}function h(){return x.items}function p(e){var n=t.renderPartial("dropdownItems",e);t.element("dropdown").html(n),t.element("scroller").baron().update()}function f(e){x=t.invoke(k,[x,{processingCallback:function(t){t.selected=t.value==e}}])}function m(e){if(e.name=e.name||x.name,!e.name)throw Error("Имя кастомного селекта не было передано!");x=t.invoke(k,[e,{onInit:!0}])}function g(e){var n=a.find(e,{value:d()});n&&(n.selected=!0,b=n.value);var i=a.extend({},w,{items:e});m(i),t.rerender(),p(x)}function _(e){var n=t.element("input").data("searchString")||"";n+=e.toLowerCase();var i=a.find(x.items,function(e){return 0==e.label.toLowerCase().indexOf(n)});t.element("input").data("searchString",n),C(),i&&(t.mod().opened?s({value:i.value}):u(i.value))}function v(){t.element("input").data("searchString","")}function y(){var e=t.element("input")[0];e.select(),e.setSelectionRange(0,e.value.length)}var b,k=e("./viewModel"),w={},x={},C=a.debounce(v,1500),L=[{name:"filterValues",func:function(){return e("./mixins/filterValues")({slot:t,viewModel:k,renderDropdownItems:p,selectItem:c,selectInputText:y,get vc(){return x}})}},{name:"setFocus",func:function(){return e("./mixins/setFocus")({slot:t,selectItem:c,get vc(){return x}})}},{name:"clearValueOnDelete",func:function(){return e("./mixins/clearValueOnDelete")({slot:t,setValue:u})}}],I={init:function(n){n=n||{},w=a.cloneDeep(n);var i=a.find(n.items,"selected");i&&(b=i.value),m(n),t.mod({type:n.type,isPlaceholder:n.placeholder,isMarker:n.marker}),n.mixins&&e("./mixins")(L,n.mixins,this,arguments)},viewContext:function(){return t.ua().isMobile||(t.mod({disabled:x.attributes.disabled}),x.isDesktop=!0,x.selectId=t.moduleId(),t.mod({isDesktop:!0})),x},clientInit:function(){if(t.ua().isMobile||(x.isDesktop=!0,x.selectId=t.moduleId()),x.isDesktop){var e;$(document).on("mousedown."+x.selectId,function(t){e=t.target}),$(document).on("mouseup."+x.selectId,function(){$(e).closest(t.block()).length||$(e).closest(".track__bar").length||t.ifAlive(function(){t.mod().opened&&i()})()})}},bind:function(){x.isDesktop&&(t.setTimeout(function(){t.element("scroller").baron().update()},0),t.element("input").data("value",x.selectedItemLabel).val(x.selectedItemLabel))},dispose:function(){x.isDesktop&&($(document).off("mousedown."+x.selectId,"mouseup."+x.selectId),t.element("scroller").baron().dispose())},elements:{wrapper:{click:function(){return x.attributes.disabled?!1:(t.mod().opened?i():(x.eraseOnClick?(u(""),t.element("searchControl").mod({hidden:!1}),t.element("markerColor").mod({visible:!1})):(t.mod({showClearButton:!0}),s({direction:"next"})),n()),null)},keyup:function(e){if(t.mod().opened)switch(e.keyCode){case 27:i(),e.stopPropagation()}},keydown:function(e,n){if(t.mod().opened){var a=e.keyCode||n.keyCode;switch(a){case 9:i();break;case 13:c();break;case 38:s({direction:"prev"});break;case 40:s({direction:"next"})}}}},input:{keydown:function(e){switch(e.keyCode){case 38:case 40:return e.preventDefault(),t.mod().opened||(n(),s()),!0;case 8:case 46:return!1;default:return!0}},keypress:function(e){if(x.isDesktop){var t=RegExp("^[a-zA-Zа-яА-Я0-9]+$"),n=String.fromCharCode(e.charCode?e.charCode:e.which);
return t.test(n)&&(e.preventDefault(),_(String.fromCharCode(e.which))),!1}return null},keyup:function(e){return 38==e.keyCode||40==e.keyCode?!1:null},focus:function(){p(x),t.mod({focused:!0})},blur:function(){t.mod({focused:!1})}},dropdownGroupLabel:{click:function(e){e.stopPropagation()}},dropdownItem:{click:function(e){e.stopPropagation(),$(this).mod().selected?i(!0):c()},mousedown:function(){x.eraseOnClick&&t.element("input").mod({hidden:!0,selected:!1})},mouseenter:function(){var e=t.element("dropdownItem").filter("._hovered");e.length&&e.mod({hovered:!1}),$(this).mod({hovered:!0})}},original:{keydown:function(e){switch(e.keyCode){case 38:case 40:return n(),t.element("wrapper").trigger("keydown",{keyCode:40}),!1;case 27:return e.stopPropagation(),!1;default:return null}},change:function(){var e={name:x.name,prev:b};""!==this.value&&(e.value=this.value,e.current=this.value),t.notify("changed",e),b=e.current}},arrow:{click:function(){p(x),t.mod({focused:!0})}}},"interface":{openSelect:n,closeSelect:i,setValue:u,getValue:d,setItems:g,getItems:h,getName:function(){return x.name},setDefault:function(){u(x.defaults.value)}}};return I}},{"./mixins":367,"./mixins/clearValueOnDelete":368,"./mixins/filterValues":369,"./mixins/setFocus":370,"./viewModel":371,lodash:"lodash"}],"/modules/share/share.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/string");t.exports=function(e,t,n,o,r,s){var l,c={init:function(t){l=t,l.link=e.location.href(null,!0);var o=n.getRegion();l.allowWidget=a.contains(e.config["widget.allowCountries"],o.country_code),l.widgetLink=r._config("share.widgetLink"),a.each(r.getSettings().socials,function(e){l["has"+i.capitalize(e)]=!0})},clientInit:function(){function n(t){l.shortLink=t;var n=e.element("popupUrlInput");n.val(t),n.length&&(n[0].focus(),n[0].select())}e.setTimeout(function(){e.element("popupUrlInput")[0].focus(),e.element("popupUrlInput")[0].select()},1e3);var a=e.registry("share").pos;if(e.mod({pos:a}),e.notify("shareInited"),e.isGrym){var i=e.registry.get("offline");if(i)return void n(l.link)}t.reduceLink(l.link,n)},viewContext:function(){return l},elements:{popupSocialVkontakte:{click:function(){e.notify("shareClicked","vkontakte",l.link),s.floors.isActive()&&o.trackEvent("googleFloors",["Control","Share_Social","vk"])}},popupSocialFacebook:{click:function(){e.notify("shareClicked","facebook",l.shortLink||l.link),s.floors.isActive()&&o.trackEvent("googleFloors",["Control","Share_Social","fb"])}},popupSocialTwitter:{click:function(){e.notify("shareClicked","twitter",l.shortLink||l.link),s.floors.isActive()&&o.trackEvent("googleFloors",["Control","Share_Social","twitter"])}},popupSocialOdnoklassniki:{click:function(){e.notify("shareClicked","odnoklassniki",l.link),s.floors.isActive()&&o.trackEvent("googleFloors",["Control","Share_Social","ok"])}},popupWidgetLink:{click:function(){e.notify("widgetClicked")}},overlay:{click:function(){e.notify("close")}},popupClose:{click:function(){e.notify("close")}},popupUrlInput:{click:function(){var t=this;e.setTimeout(function(){t.select()},10)},blur:function(){var t=this;e.setTimeout(function(){t.select()},10)}}},"interface":{close:function(){e.dispose()},reposition:function(t){e.mod({pos:t})}}};return c},t.exports._args=["slot","$shortonizerApi","$regionManager","$analytics","$i18n","$appState"]},{lodash:"lodash"}],"/modules/stopCard/stopCard.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/station"),o=req("helpers/model"),r=req("helpers/route"),s=req("helpers/linkURL"),l=req("helpers/actions");t.exports=function(t,n,c,u,d,h,p,f){function m(e){t.notify("focusModel",S,{extraObjects:C,historyAction:e})}function g(e){if(!I){var n=e.outerHeight(),a=t.element("container").outerHeight();e.scrollTop()+n>=a&&(I=!0,d.trackEvent("google",["Stop_Card_event","Scroll_end"]))}}function _(e){return a.extend({},e,{name:e.name,seoLinkRoute:s("transportRoute",{city:j.code,id:e.id,zoom:11}),onClick:a.partial(y,e.id)})}function v(e,n){return t.init("cardRoutes",{header:{type:a.camelCase(n),text:r.getTransportTypeText(n,p),city:j.code},list:e})}function y(e){t.notify("routeSelected",{id:e})}function b(e){t.notify("pathActionClicked",e,{text:S.short_name||S.name,id:S.id,lon:a.get(S,"focusPoint.lon"),lat:a.get(S,"focusPoint.lat")})}function k(){return f.get("favorites")?{module:{type:"favoritesWidget",data:{type:"action",entity:S,dropDownPosition:"center",gaCategory:"Stop_Card"}}}:null}function w(){if(t.ua().isPhone)return null;var e=!S.focusPoint;return l.getPathAction(e,{from:a.partial(b,"from"),to:a.partial(b,"to")},l.getPathActionLocaleParams(p))}function x(){return a.compact([w(),k()])}var C,L,I,T,S={},E=e("./viewModel"),P=[],j=u.getRegion()||{};return T={inheritBssHash:!0,networkDepend:!0,init:function(e,o){function r(){return a(S.routes).map(_).groupBy("subtype").map(v).value()}function s(e,n){return e?void o(e):(S=n||{},S.focusPoint=i.getCentroid(S,c),S.transportType=i.getTransportType(S),S.transportTypeName=i.getCaption(S.type,S.transportType,p),t.init("promoMobile",{module:"stopCard"}),t.initDumb("cardActions",x()),P=r(),void o())}var l=e.platformId?"platform":"station";S.id=e.platformId||e.id,C=e.extraObjects,"station"==l?n.transport.station(S.id,s):"platform"==l&&n.transport.platform(S.id,s)},clientInit:function(){t.googletag()},bind:function(){L=t.element("scroller").baron().fix(),t.setTimeout(function(){L.update()},100)},viewContext:function(){return E(S,{region:j,i18n:p,transportType:a.camelCase(S.transportType),routesModules:P})},elements:{closeButton:{click:function(){t.notify("closeButtonClicked")}},scroller:{scroll:function(){g($(this))}},headerHeadingTitle:{click:function(){m("push"),t.notify("headerClick")}},footerBugReportLink:{click:function(){var e=i.getFirstPlatformCentroid(S,c);h.showFeedback({geoType:S.type,feedbackType:"mapError",lon:e.lon,lat:e.lat,placeTitle:S.name}),h.push()}}},"interface":{tabType:"transport",updateScroll:function(){L.update()},drawOnMap:function(){var e=!C;t.notify("mapDataReady",S,e)},clearMap:function(){t.notify("clearMap",S)},activateContent:function(){T["interface"].deactivatedOnce||d.trackEvent("google",["Cards","Transport","Stop"])},setSeoParams:function(){var e="station",n=c.parsePoint(S.platforms?S.platforms[0].geometry.centroid:S.geometry.centroid);return S.transportTypeName==p._pt("Остановка общественного транспорта","Остановка")&&(e="stationSurface"),t.notifySeoParams({cityName:o.getCityName(S),type:e,stationName:S.name,stationType:S.transportTypeName,id:S.station_id||S.id,lon:n.lon,lat:n.lat}),!0},focus:function(e){S.id==e&&(t.notify("highlightGeoCard",S),m())},getPrintData:function(){var e=this.viewContext(),n=t.renderPartial("print",e);return{analyticsLabel:"Platform",layout:"complex","static":$(n).filter('[data-print="static"]'),dynamic:$(n).filter('[data-print="dynamic"]').children(),externalPrintParams:{singleMarker:!0}}},prepareForPrint:function(){t.notify("preparedForPrint",S)}}}},t.exports._args=["slot","$dgApi","$wkt","$regionManager","$analytics","$appState","$i18n","$featureSwitcher"]},{"./viewModel":372,lodash:"lodash"}],"/modules/suggest/suggest.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/suggest/registry");t.exports=function(e,t,n,o,r,s,l,c){function u(t){return L||""==d()?void(L=!1):(clearTimeout(b),v.invalidate(),p(),e.notify("submitted",!t,C.text||""),C.text="",b=0,h(500),void e.element("input").trigger("blur"))}function d(){return $.trim(e.element("input").val())}function h(t){T=!1,I=1,e.setTimeout(function(){I=0},t)}function p(){v.set({suggest:[]})}function f(){var t=e.element("input");e.mod({inputHasValue:!!t.val()})}function m(){var t=e.config["suggest.personal.numSearches"],n=e.config["suggest.personal.numBranches"],i=l.getData(),o=i.searches.slice(0,t).concat(i.branches.slice(0,n));a.each(o,function(t){t[0].html=e.renderPartial("line",t[0])}),v.set({suggest:o})}function g(t){e.mod({media:t})}function _(e){return a.contains([37,38,39,40],e)}var v,y,b,k,w,x,C=new i,L=!1,I=0,T=!1,S="suggest__highlightedText",E=!1,P={inheritBssHash:!0,init:function(t){t=t||{},y=t.placeholder,w=t.query||"",x=t.autofocus,w&&e.mod({inputHasValue:!0}),t.media&&g(!0)},viewContext:function(){return{query:w,autofocus:x}},clientInit:function(){var n=e.element("input");n.prop("autocorrect","off"),v=e.block().surt({input:n,inputMode:"text",suggest:e.element("suggests"),clone:e.element("cloneMain"),hint:e.element("cloneHint"),readyCls:"_ready",suggestItemCls:"suggest__suggestsItem",suggestCls:"_dropdown",tokenCls:"suggest__token",textCls:"suggest__text",stateFocusCls:"_focus",suggestItemCurrentCls:"_current",suggestItemCountCls:"_count_",selectionCls:S,aunt:30,events:["enter","click"],placeholder:y,placeholderCls:"_placeholder",change:function(t,n){function i(){T=!0,k&&k.cancel(),k=s(C.text,"catalog",function(t,n){k=null,!t&&T&&(a.each(n.kits,function(t){t[0].html=e.renderPartial("line",t[0])}),d()?v.set({suggest:n.kits}):p())})}I||_(t.keyCode)||(C.text=n.text,b&&(clearTimeout(b),b=null),n.text&&n.text.trim().length>1?b=e.setTimeout(i,50):p())},submit:function(e,t){o.trackEvent("google",["Suggests","Submit"]),o.trackEvent("yandex",["SUGGEST_CLICK"]),v.kit[1]&&v.kit[1].filter&&o.trackEvent("google",["Suggests","Type","Filter"]);var n=a.some(a.flatten(v.suggest),"isPersonal");n&&!E&&o.trackEvent("google",["Personal_Suggest","Show_Input"]),u(!t)},pick:function(n,i){if(n&&n.length){var r=n[0],s={module:"suggest",className:"suggest__suggests"};if(r.isPersonal&&"branch"==r.hint_type?s.element="object_suggest":r.isPersonal?s.element="pick_history":s.element="pick",c.manualAdd("click",s),!i||!r.hint_type)return void(r.isPersonal&&!r.hint_type&&(E?o.trackEvent("google",["Personal_Suggest","Click_Default",r.text]):o.trackEvent("google",["Personal_Suggest","Click_Input",r.text])));if(r.hint_type){switch(t.floors.isActive()&&"foreign_city"!=r.hint_type&&(t.floors.removeInitialFloorModifier(),t.floors.exit()),t.set("query",{query:d()}),r.hint_type){case"foreign_city":e.notify("changeRegion",a.get(r,"project.id")),o.trackEvent("google",["Suggests","SelectCity",r.text]);break;case"geo":e.notify("openGeoCard",r),o.trackEvent("google",["Suggests","Type","Geo"]);break;case"route":e.notify("openRouteCard",r),o.trackEvent("google",["Suggests","Type","Transport_Route"]);break;case"station":e.notify("openStationCard",r),o.trackEvent("google",["Suggests","Type","Transport_Stop"]);break;case"branch":r.isPersonal&&(E?o.trackEvent("google",["Personal_Suggest","Click_Default",r.text]):o.trackEvent("google",["Personal_Suggest","Click_Input",r.text])),e.bssContext.startNewChain({pr:"object_suggest",tx:r.text,ortx:C.text||""}),e.notify("firmDetails",r)}var l=a.some(a.flatten(v.suggest),"isPersonal");l&&!E&&o.trackEvent("google",["Personal_Suggest","Show_Input"]),p(),h(0),L=i}}},show:function(e){if(e){E=!d(),o.trackEvent("google",["Suggests","Show"]);var t=a.some(a.flatten(v.suggest),"isPersonal");t&&E&&o.trackEvent("google",["Personal_Suggest","Show_Default"])}},complete:function(){var e=a.last(v.kit);e.filter&&e.filter.label&&o.trackEvent("google",["Suggests","Attribute",e.filter.label]);var t={module:"suggest",className:"suggest__suggests",element:"pick"};c.manualAdd("click",t)},$:$}),""!=n.val()&&document.activeElement==n[0]&&n.trigger("keyup").trigger("change").trigger("focus")},elements:{block:{click:function(){d()||m()}},input:{keyup:function(t){f();var n=40;t.keyCode!=n||d()||e.block().hasClass("_dropdown")||m()},change:f},clearInputLink:{click:function(n){var a=e.element("input"),i=e.ua().isPhone;a.val("").trigger("keyup").trigger("change"),i||a.trigger("focus"),v.set({kit:[],suggest:[]}),i&&(t.panels.clear(),t.push()),n.preventDefault(),n.stopPropagation()}},cloneMain:{},cloneHint:{},suggests:{}},"interface":{query:function(){return v.inputNode.value},submit:u,text:d,resetKitTypes:function(){var e=v.kit;a.findWhere(e,{type:"text"})&&(v.kit=a.map(e,function(e){return e.type="text",e}))},setText:function(t){w=t,w&&e.mod({inputHasValue:!0});var n=e.element("input");if(n.val){if(!t)return e.ua().isPhone||n.val("")[0].focus(),C.text="",v&&v.set({kit:[],suggest:[]}),void f();n.val(t).trigger("input"),f()}},minimize:function(){v.minimize()},rubric:function(){var e,t;return v.kit&&v.kit[0]&&"rubric"==v.kit[0].type&&(t=v.kit[0].id,e=v.kit[0].text),{id:t,text:e||""}},suggest:function(){return e.isGrym?a.findWhere(v.kit,{type:"suggest"}):{}},filters:function(){var e={};return a.each(v.kit,function(t){if("filter"==t.type){var n=t.filter.name;e[n]?e[n]+=","+t.filter.value:e[n]=t.filter.value}}),e},set:function(e){v.set(e)},imitationInputBlur:function(){var t=e.element("input");t[0]&&t[0].blur()},focus:function(){e.element("input").trigger("focus")},enableMedia:a.partial(g,!0),disableMedia:a.partial(g,!1),mediaMinimizedOn:function(){e.block().mod({mediaMinimized:!0})},mediaMinimizedOff:function(){e.block().mod({mediaMinimized:!1})},setPlaceholder:function(e){v&&v.updatePlaceholder(e)}}};return P},t.exports._args=["slot","$appState","$dgApi","$analytics","$regionManager","$suggestApi","$personalApi","$userActivity"]},{lodash:"lodash"}],"/modules/suggestRs/suggestRs.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/station"),o=req("helpers/request");t.exports=function(e,t,n,r,s){function l(t,n){n&&C!=n||e.mod({noResult:t})}function c(){""!=u()&&(x.text="",g.invalidate(),p(!1),e.notify("submitted",C),d(500))}function u(){return $.trim(e.element("input").val())}function d(t){L=!0,e.setTimeout(function(){L=!1},t)}function h(t){e.element("wrapper").css({color:t||e.config.defaultRouteColor})}function p(e){e&&g.set({kit:[]}),g.set({suggest:[]}),h()}function f(e){var t=[{text:e}];g.set({kit:t}),x.kit=t}function m(){var t=e.element("input"),n=""!=t.val()?!0:null;e.mod({inputHasValue:n})}var g,_,v,y,b,k,w,x={kit:[],suggest:[]},C=null,L=!1,I="suggest__highlightedText",T={block:"suggest",init:function(t){t=t||{},v=t.placeholder,y=t.autofocus,a.isEmpty(t.geometry)?t.query&&l(!0):_=t.geometry,C=t.type,e.mod({route:C}),b=t.query||"",b&&e.mod({inputHasValue:!0})},viewContext:function(){return{query:b,autofocus:y}},clientInit:function(){e.element("input").prop("autocorrect","off"),g=e.block().surt({input:e.element("input"),inputMode:"text",suggest:e.element("suggests"),clone:e.element("cloneMain"),hint:e.element("cloneHint"),autocompleteCls:"_autocomplete",readyCls:"_ready",suggestItemCls:"suggest__suggestsItem",suggestCls:"_dropdown",tokenCls:"suggest__token",textCls:"suggest__text",stateFocusCls:"_focus",suggestItemCurrentCls:"_current",suggestItemCountCls:"_count_",delimiter:",",selectionCls:I,aunt:30,events:["enter","click"],placeholder:v,placeholderCls:"_placeholder",change:function(t,i){if(l(!1),e.notify("shutOffRsMode"),!L){x.text=i.text,_=null;var o=a.debounce(function(){w&&w.cancel(),n(x.text,"routeSearch",function(t,n,i){var o=[];i==x.text&&n&&(o=n.kits),a.each(o,function(t){t[0].html=e.renderPartial("line",t[0])});var r=$.trim(u());r?g.set({suggest:o}):p(!1)})},50);i.text?o():p()}},pick:function(e){x.kit=e,d(0)},submit:function(){var e=x.kit||g.kit;k="suggest";var n=a.get(e,"[0].id"),o=a.get(e,"[0].hint_type");if(n&&o){var r;switch(o){case"station":r=t.transport.station;break;case"geo":r=t.geo.profile}if(r)return void r(n,function(e,t){if(!e){var n=a.get(t,"geometry.centroid");n?_=s.parseObject(n).geometry||{}:"station"==t.type&&(_=i.getCentroid(t,s)),_.id=t.id,c()}})}T["interface"].fillGeo(function(e){e||c()})}}),b&&f(b)},elements:{input:{change:m},clearInputLink:{click:function(t){var n=e.element("input");r.trackEvent("google",["RouteSearch","Search_panel","Delete"]),n.val("").trigger("focus"),p(!0),t.preventDefault(),e.notify("clear",C),_=null}},cloneMain:{},cloneHint:{},suggests:{},wrapper:{}},"interface":{setColor:h,query:function(){return g.query()},getData:function(){var e=u();if(!e)return null;var t=T["interface"].geometry(),n={text:e};return t&&(n.lon=t.lon,n.lat=t.lat,n.id=t.id),n.context=k,n},geometry:function(){return _||null},setGeometry:function(e){_=e||null},fillGeo:function(e){var n=u();return n?(k="typeIn",void t.searchRoutePlace(n,function(t){return t?(_=t,void e()):(l(!0),r.trackEvent("google",["RouteSearch","Error","Type_wrong"]),void o.emitError(404,"wrong route search type",e))})):void e()},getSearchType:function(){return k},text:u,setText:function(t){if(l(!1),!t){var n=e.element("input");return n.val("").trigger("keyup").trigger("change").trigger("focus"),void p(!0)}e.element("input").val(t).trigger("input"),f(t),m(),k=null},minimize:function(){g.minimize()},set:function(e){g.set(e)},imitationInputBlur:function(){var t=e.element("input");t[0]&&t[0].blur()},focus:function(){e.element("input").trigger("focus")},setError:function(e){l(!0,e)},resetError:function(e){l(!1,e)}}};return T},t.exports._args=["slot","$dgApi","$suggestApi","$analytics","$wkt"]},{lodash:"lodash"}],"/modules/summer/summer.js":[function(e,t,n){"use strict";var a=e("lodash"),i=e("bluebird"),o=e("./headers");t.exports=function(e,t,n,r,s,l){function c(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}var u={ru:"и Москвариумом",kz:"и ForteBank",kg:" и «С лёгким паром»",ua:""},d={vkontakte:"vk",twitter:"tw",facebook:"fb",odnoklassniki:"ok"},h=void 0,p=void 0,f=void 0,m=void 0,g=void 0,_=void 0,v=void 0;return{init:function(t,o){var s={collections:l.getRecommendedList("summer")};i.props(s).then(function(t){if(g=n.getRegion(),m=t.collections,a.isEmpty(m))return e.app.raise({code:302,redirectTo:"/"+g.code}),o({meta:{code:404}});f=e.initDumb("summerCollections",{collectionsItem:m});var i=e.ua().isPhone?"городе":g.name_grammatical_cases.prepositional,s=a.includes(["Владимире","Владивостоке"],i)?"во":"в";return _=s+" "+i,v="moscow"==g.code?"moscow":g.domain,e.registry.get("isInit")&&r.trackEvent("google",["Summer","Open","Direct"]),e.mod({ready:!0}),o()})["catch"](function(e){o({code:404})})},viewContext:function(){return Object.assign({collectionsListModule:f,inRegion:_,region:g.name},o[v])},bind:function(){e.ua().isPhone||(e.mod({stickyControls:!0}),h=e.element("scroller").baron().fix({elements:".summer__controlsFix",outside:"_outside",clickable:!1}))},elements:{headerLanguageSelectItem:{click:function(){var t=$(this).mod();if(!t.active){var n=t.common?o[v+"_common"]:o[v];e.rerenderPartial("headerWrap","header",Object.assign({inRegion:_},n))}}},form:{submit:function(){setImmediate(function(){e.element("formInput").val(""),e.element("formSubmit").mod({disabled:!1}),r.trackEvent("google",["Summer","Footer","Subscribe"])})}},formInput:{keyup:function(t){9!=t.keyCode&&(p=c($(this).val()),e.element("formSubmit").mod({disabled:!p}))}},socialsItem:{click:function(){var t=$(this).mod().social,n="twitter"!=t?"/?utm_source="+d[t]+"&utm_medium=social&utm_campaign=start_summer":"",a=""+e.location.origin()+e.location.pathname()+n;e.notify("shareClicked",t,a,null,"summer",{desc:s._gg("Смотрите самые полные подборки мест и компаний, чтобы интересно провести это лето "+_+" #Лето2ГИС"),image:e.config["share.image.summer"][g.domain][t],link:a,title:"twitter"==t?s._gg("Смотрите самые полные подборки мест и компаний, чтобы интересно провести это лето #Лето2ГИС"):s._gg("Лето "+_+" с 2ГИС "+u[g.domain])}),r.trackEvent("google",["Summer","Share_Footer",t])}},subscribeButton:{click:function(){e.mod({visibleForm:!0})}},headerLink:{click:function(){r.trackEvent("google",["Summer","Sponsor",$(this).text()])}}},"interface":{setSeoParams:function(){return e.notify("setSeoParams",{title:s._gg("Лето "+_+": беседки, пляжи и другие места для отдыха — 2ГИС"),description:s._gg("Арендуйте беседки с мангалами, играйте в пейнтбол, купайтесь и загорайте у воды. Смотрите подходящие места и компании в летних подборках 2ГИС."),ogImage:{image:s._config("summer2016.ogImage")},twitterImage:{image:s._config("summer2016.ogImage")}}),!0},resize:function(){h&&h.update()}}}},t.exports._args=["slot","$appState","$regionManager","$analytics","$i18n","$collectionsApi"]},{"./headers":373,bluebird:384,lodash:"lodash"}],"/modules/summerCollections/summerCollections.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule");t.exports=function(e,t,n){return a(function(a){var i=a.collectionsItem.map(function(a){return e.initDumb("collectionsItem",Object.assign(a,{tag:"div",theme:"summer",coverSize:"360x160",onClickHandler:function(){n.trackEvent("google",["Summer","Click",a.title]),t.panels.add("favorites"),t.panels.get("favorites").collectionID=a.id,t.push()}}),a.id)});return{viewContext:function(){return{collectionsItem:i}},viewAttrs:{tag:"ul","class":a.collectionsItem.length?"":"_disabled"}}})},t.exports._args=["slot","$appState","$analytics"]},{}],"/modules/summerMenu/summerMenu.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule");t.exports=function(){return a(function(e){return{viewContext:function(){return{items:e.items}},viewAttrs:{tag:"ul"},elements:{item:{click:function(){e.clickHandler($(this).data("rubric"))}}}}})}},{}],"/modules/tools/tools.js":[function(e,t,n){"use strict";var a=req("helpers/linkURL"),i=req("helpers/string"),o=req("helpers/link");t.exports=function(e,t,n,r,s,l,c,u){function d(t){f.city=t.name,f.regionInfoLink=i.replaceByName(e.config["redirect.infoLink"],{lang:u.getLang(),region:t.id}),f.regionAdvLink=o.getAdvLink(t,"tools",{},u.getLang()).href,f.businessLink=o.getBusinessLink(t.id),e.isClient&&e.rerender()}function h(n,a){n=n||{};var i="hidden"==t.get("dashboard")||t.inGlobal();if(i=i&&!t.floors.isActive(),e.mod({city:i}),f.loginButtonVisible&&!f.userName&&e.mod({auth:!n.auth}),f.loginButtonVisible&&f.userName&&e.mod({user:!(n.p2d&&n.p2d.userInfoClicked)}),f.phone&&e.mod({phone:!(n.p2d&&n.p2d.boundPhoneClicked)}),c.get("favorites")){var o=a.find("favorites")||a.find("favoritesEmpty");e.mod({favorite:(!o||n["dataViewer/minimized"])&&!t.inGlobal()})}}var p=void 0,f={};return{init:function(t){function a(){var t=c.get("auth");e.isClient&&f.loginButtonVisible!==t&&(f.loginButtonVisible=t,e.rerender())}if(p=t||{},p.mods&&e.mod(p.mods),p.city&&(f.city=p.city),e.isClient){if(n.isAuthorized()&&(f.userName=n.getAuthorizedUserSync().authorizedUser.display_name),r.isBound()){var i=r.getBinding();f.phone=i&&i.mobileName||null}e.rerender()}c.onChange("auth",a,!0),l.onInit(d)},bind:function(){h(t.getState(),t.panels)},changeState:function(n){n.tools&&e.mod({orientation:n.tools}),h(n,t.panels)},viewContext:function m(){var e=l.getRegion(),m=f||{};return m.city||(m.city=u._t("О городе")),m.cityLink=a("city",{city:e.code}),m.favorite=c.get("favorites")&&!t.inGlobal(),m.businessLinkEnabled="ru"==e.country_code,m.regionAdvLinkText="ru"==e.country_code||"kz"==e.country_code?u._gg("Реклама"):u._t("Для бизнеса"),m},elements:{about:{click:function(){s.trackEvent("google",["Dashboard","About","Click"])}},ads:{click:function(){s.trackEvent("google",["Dashboard","Add_adv","Click"])}},city:{click:function(t){t.preventDefault(),e.notify("cityModeSetted")}},user:{click:function(){e.notify("userInfoClicked","vertical"===e.mod().orientation)}},auth:{click:function(){e.notify("showAuthPopup"),s.trackEvent("google",["Auth","Control","Click"])}},phone:{click:function(){e.notify("boundPhoneClicked","vertical"===e.mod().orientation)}},favorite:{click:function(){e.notify("favorites")}}},"interface":{showCity:function(){e.mod({city:!0})},showName:function(t){f.userName=t.display_name,e.rerender()},hideName:function(){delete f.userName,e.rerender()},showMobileName:function(t){f.phone=t&&t.mobileName||null,e.rerender()},loggedIn:function(t){var a=n.getAuthorizedUserSync().authorizationToken,i={session_token:a};f.userName=t.display_name,r.getBindingAsync("account",i,function(t,n){n||(n=r.getBinding("browser")),f.phone=n&&n.mobileName||null,e.rerender(),e.notify("p2dBindUpdated")})},loggedOut:function(){var t=r.getBinding("browser");f.phone=t&&t.mobileName||null,delete f.userName,e.rerender()},exitGlobal:function(){e.rerender()}}}},t.exports._args=["slot","$appState","$authorization","$p2d","$analytics","$regionManager","$featureSwitcher","$i18n"]},{}],"/modules/tooltip25/tooltip25.js":[function(e,t,n){"use strict";t.exports=function(t){function n(e){var n={x:12,y:15},i=parseInt(t.block().outerHeight(),10);e.y=a(e.y,i,window.innerHeight)+n.y;var o=parseInt(t.block().outerWidth(),10);return e.x=a(e.x,o,window.innerWidth)+n.x,e}function a(e,t,n){var a=20;return e+t+a>n?n-t-a:e}function i(e){e=n(e),t.block().css({left:e.x,top:e.y})}var o={},r={init:function(){t.mod({hidden:!0})},viewContext:function(){return t.invoke(e("./viewModel"),[o])},"interface":{show:function(e){o=e||{},t.rerender(),i(e.pixel),t.mod({hidden:!1})},hide:function(){t.mod({hidden:!0})}}};return r}},{"./viewModel":374}],"/modules/tooltipPromo/tooltipPromo.js":[function(e,t,n){t.exports=function(e){var t={},n={init:function(){e.mod({hidden:!0})},viewContext:function(){return{text:t.text,more:t.more}},elements:{more:{click:function(){e.notify("moreClicked",t.type)}},close:{click:function(){e.notify("closeClicked",t.type)}}},"interface":{show:function(n,a){if(t=n||t,e.rerender(),a){var i=a.offset().left+a[0].offsetWidth+1,o=a.offset().top+a[0].offsetHeight/2-e.block()[0].offsetHeight/2;e.block().css({top:o,left:i})}e.mod({hidden:!1})},hide:function(){e.mod({hidden:!0})}}};return n}},{}],"/modules/updateApp/updateApp.js":[function(e,t,n){t.exports=function(e){function t(){e.notify("closeClicked")}var n,a=e.registry.get("ua").os.name,i={init:function(){n="Mac OS X"==a?"macos":"windows",e.mod({os:n})},elements:{overlay:{click:t},popupClose:{click:t},popupButton:{click:function(){e.notify("updateButtonClicked")}}},"interface":{close:function(){e.dispose()}}};return i}},{}],"/modules/victory/victory.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/request");t.exports=function(t,n,o,r){var s=e("./events"),l=void 0,c=void 0,u=void 0,d=void 0,h=void 0;return{init:function(e,r){return c=n.getRegion(),l=a.get(s,c.code),d=c.name_grammatical_cases.prepositional,h=a.includes(["Владимире","Владивостоке"],d)?"во":"в",l?(u=t.ua().isPhone,t.registry.get("isInit")&&o.trackEvent("google",["9may","Open","Direct"]),void r()):void i.emitError(404,"no city events",r)},viewContext:function(){return a.extend(l,{icon:u?"victory_headlineBig":"victory_headline",title:r._gg("День Победы<br>%1 %2",h,d),isMagnitogorsk:"magnitogorsk"==c.code})},bind:function(){t.element("scroller").baron()},elements:{headerSocialsItem:{click:function(){var e=$(this).mod().social,n=window.location.origin+"/"+c.code+"/9may";t.notify("shareClicked",e,n,null,"victory",{desc:r._gg("Посмотрите, во сколько парад, где запустят салют и какие улицы перекроют 9 мая."),image:t.config["share.image.victory"],link:n,title:"twitter"==e?r._gg("Узнайте о Дне Победы в 2ГИС: когда парад, где салют, какие улицы перекроют."):r._gg("День Победы в 2ГИС")}),o.trackEvent("google",["9may","Share_main",e])}},contentLink:{click:function(){var e=$(this).data("name");t.notify("contentLinkClicked","victory",e,u),o.trackEvent("google",["9may","Click",e])}}},"interface":{setSeoParams:function(){return t.notify("setSeoParams",{title:r._gg("9 мая %1 %2: парад, салют, программа — 2ГИС, 2016г.",h,d),description:r._gg("Посмотрите, во сколько парад, где запустят салют и какие улицы перекроют на День Победы.")}),!0}}}},t.exports._args=["slot","$regionManager","$analytics","$i18n"]},{"./events":375,lodash:"lodash"}],"/modules/video/video.js":[function(e,t,n){t.exports=function(e){function t(){e.notify("delete"),e.dispose()}function n(){var e=document.createElement("video");for(var t in u)if(u.hasOwnProperty(t)&&e.canPlayType(u[t]))return t;return!1}function a(t,n,a,i,o){function r(){4==t.readyState?o?o():t.play():e.setTimeout(r,100)}n.src="//"+i,n.type=u[a],t.load(),r()}function i(){var t=e.element("video")[0];e.mod({loading:!1}),e.mod({volume:!!t.volume}),t.play(),t.addEventListener("ended",function(){e.mod({ended:!0,paused:!0})},!1)}function o(){var t=e.element("video")[0],n=e.mod().paused;e.mod().ended&&e.mod({ended:!1}),n?t.play():t.pause(),e.mod({paused:!n})}function r(){var t=e.element("video")[0],n=e.mod().volume;t.volume=+!n,e.mod({volume:!n})}function s(e){var t=/(\w+):\/\//i,n=t.test(e.link)||"//"==e.link.slice(0,2);return n||(e.link="http://"+e.link),e}var l,c,u={mp4:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',webm:'video/webm; codecs="vp8, vorbis"',ogv:'video/ogg; codecs="theora, vorbis"'};return l={init:function(t){c=t||{},e.mod({loading:!0}),e.notify("create")},clientInit:function(){var o=e.element("video")[0],r=e.element("videoSource")[0],s=n();s||t(),e.element("close")[0].focus(),a(o,r,s,c.source[s],i)},viewContext:function(){return s(c)},elements:{overlay:{click:t},close:{click:t},shield:{click:o},controlsPause:{click:o},controlsVolume:{click:r},video:{},videoSource:{}},"interface":{close:function(){e.dispose()}}}}},{}],"/modules/weather/weather.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/weather");t.exports=function(t,n,o,r,s,l,c){function u(e,t){return a.isEmpty(e.cities)||a.contains(e.cities,t)}function d(e){function a(t){e(null,t)}function i(n){404==n.status&&t.mod({hidden:!0}),t.sendError("Weather component error",n),e(n)}v=n.getRegion();var o=v&&v.id,r=v&&v.code,l=u(x,r);l&&(y=s.weather({regionId:o}),y.getForecast().then(a)["catch"](i))}function h(){var e=!!o.get("citySelect"),n=_&&(_.showForecastLink||_.showPromoLink);t.mod({"short":e||!n})}function p(e){l.trackEvent("googleTests",["Weather","Promo_Main_Show",e.dashboardText])}function f(e){t.app.on("clientReady",function(){t.setTimeout(function(){p(e)},2345)})}function m(e){e=e||a.noop,d(function(n){if(n)return e(n);if(t.isInitialState()||(t.mod({hidden:!1}),t.rerender()),t.isClient){var a=g();a&&(t.registry.get("isInit")?f(a):p(a))}return e()})}function g(){var e=y.getData(),t=a.get(e,"now.weather.temp");return i.findPromoLink(x.promoLinks,t,v.code)}var _,v,y,b,k,w=e("./weatherVm.js"),x=r.getSettings().weather;return{inheritBssHash:!0,init:function(e,a){if(k=e,!c.get("ginzaProject")){var i=x&&x.promoLinks;i&&"ginza"==i[0].type&&x.promoLinks.shift()}n.onInit(function(){t.isClient?m(a):d(a),t.isClient&&(b&&clearInterval(b),b=t.setInterval(m,t.config["weather.timeUpdate"]))})},viewContext:function(){var e=y&&y.getData();return!e||e.error?null:(_=w(k,y.getData(),v,r),h(),t.mod({promo:!!a.get(_,"promoUrl")}),_)},dispose:function(){y.dispose()},elements:{promoLink:{click:function(e){e.preventDefault();var n=g();n&&(t.bssContext.startNewChain({pr:"weather",tx:n.searchText}),t.notify("search",{query:n.searchText,filters:n.filters}),l.trackEvent("google",["Weather","Promo_Main_Click",n.dashboardText]))}},forecastLink:{click:function(e){e.preventDefault(),t.notify("showForecast"),l.trackEvent("google",["Weather","Open","ForecastLink"])}},temperature:{click:function(e){e.preventDefault(),t.notify("showForecast"),l.trackEvent("google",["Weather","Open","Degree"])}},forecast:{click:function(e){e.preventDefault(),t.notify("showForecast"),l.trackEvent("google",["Weather","Open","ClosestForecast"])}}},modHandlers:{visible:function(e){t.notify(e?"shown":"hidden")}},changeState:function(e){a.has(e,"citySelect")&&h()},"interface":{updateWeather:m}}},t.exports._args=["slot","$regionManager","$appState","$i18n","$models","$analytics","$featureSwitcher"]},{"./weatherVm.js":377,lodash:"lodash"}],"/modules/whatsNew/whatsNew.js":[function(e,t,n){"use strict";var a=e("lodash"),i=req("helpers/link"),o=e("./prepareNewsItem");t.exports=function(t,n,r,s,l,c){function u(e,i){var o=a.find(m.news.newsItems,{id:e}),r=a.get(o,"shareData",{title:n._t("Посмотрите в 2ГИС")}),s=a.get(o,"shareData.link");s&&(s=s.replace("%regionCode%",v.code)),c.trackEvent("google",["WhatsNew","Share_"+i,v.code,e]),t.notify("shareClicked",i,s,null,"whatsNew",r)}function d(){c.trackEvent("google",["WhatsNew","Close",v.code]),t.notify("whatsNewClosed"),s.del("whatsNew"),s.push(),t.dispose()}function h(e){var n=e.prop("href").replace("%regionCode%",v.code),o=i.removeDomainFromUrl(decodeURIComponent(n)),r=v.country_code;s.parse(o,function(e){
var i=l.getRegion(a.get(e,"city.id")).country_code;return r!=i?void window.open(n).focus():(t.bssContext.startNewChain({pr:"news"}),s.assign(e,!0),c.setPlaceCatalog(),void s.push())})}function p(){var e=m.news.pageNumber+1;return e>m.news.totalPageCount?void(g=!0):(_=!0,t.mod({inLoadingState:!0}),void r.loadNewsList({pageNumber:e}).then(function(e){if(e){m.news.pageNumber=e.pageNumber,m.news.newsItems=m.news.newsItems.concat(e.newsItems);var n=a.reduce(e.newsItems,function(e,n){return e+=t.renderPartial("newsItem",o(l.getRegion(),n))},"");t.element("list").append(n)}})["finally"](function(){_=!1,t.mod({inLoadingState:!1})}))}function f(){if(!g&&!_){var e=t.element("content")[0],n=e.scrollTop+e.clientHeight;n>e.scrollHeight-300&&p()}}var m=void 0,g=!1,_=!1,v=void 0;return{init:function(e,n){m=e||{},m.socialLinks=t.config.socialLinks,v=l.getRegion(),r.loadNewsList().then(function(e){e&&(m.news=a.cloneDeep(e))})["finally"](n)},clientInit:function(){c.trackEvent("google",["WhatsNew","Show",v.code]),r.getNewNewsItemsCount(m.news)&&r.storeSeenNewsInLocalStorage(m.news),f()},viewContext:function(){var t=e("./viewModel");return t(m,l.getRegion())},elements:{close:{click:function(){d()}},overlay:{click:function(){d()}},content:{scroll:a.throttle(f,200)},itemContentLink:{click:function(e){var n=$(this),a=n.closest(t.element("item")).data("id"),i=a+"_"+(n.index()+1);c.trackEvent("google",["WhatsNew","Click_Link_Text",v.code,i]),"local"==n.data("type")&&(e.preventDefault(),h(n))}},itemEntryPoint:{click:function(e){var t=$(this),n=t.data("news-item-id");c.trackEvent("google",["WhatsNew","Click_Link_Main",v.code,n]),"local"==t.data("type")&&(e.preventDefault(),h(t))}},headerSocialLink:{click:function(){var e=$(this).data("name");c.trackEvent("google",["WhatsNew","Social",e])}},itemSocialSharing:{click:function(){var e=$(this).closest(t.element("item")),n=e.data("id");a.each(t.modules,function(e){"whatsNewSharing"==e.type&&e.dispose()});var i=t.init("whatsNewSharing",{sharing:[{type:"vkontakte",icon:"whatsNew_socials_vkontakte"},{type:"twitter",icon:"whatsNew_socials_twitter"},{type:"facebook",icon:"whatsNew_socials_facebook"},{type:"odnoklassniki",icon:"whatsNew_socials_odnoklassniki"}],onClickFacebook:function(){u(n,"facebook")},onClickTwitter:function(){u(n,"twitter")},onClickVkontake:function(){u(n,"vkontakte")},onClickOdnoklassniki:function(){u(n,"odnoklassniki")}});e.append(i.render()),i.bindEvents()}}},"interface":{dispose:d}}},t.exports._args=["slot","$i18n","$whatsNewApi","$appState","$regionManager","$analytics"]},{"./prepareNewsItem":378,"./viewModel":379,lodash:"lodash"}],"/modules/whatsNewSharing/whatsNewSharing.js":[function(e,t,n){"use strict";var a=req("lib/lazyModule");t.exports=function(e){return a(function(t){return{viewContext:function(){return{sharing:t.sharing}},elements:{vkontakteSharing:{selector:".whatsNewSharing__listItem._type_vkontakte",click:t.onClickVkontake},twitterSharing:{selector:".whatsNewSharing__listItem._type_twitter",click:t.onClickTwitter},facebookSharing:{selector:".whatsNewSharing__listItem._type_facebook",click:t.onClickFacebook},odnoklassnikiSharing:{selector:".whatsNewSharing__listItem._type_odnoklassniki",click:t.onClickOdnoklassniki},close:{click:function(){e.dispose()}}}}})}},{}],"/modules/wizard/wizard.js":[function(e,t,n){var a=e("lodash"),i=e("slot/lib/defer"),o=req("lib/request2");t.exports=function(t,n,r,s){function l(e){var n=new i;return o("get",t.location.uri("/assets/cities/colorableLogo_"+e+".svg")).then(function(t){var a=$("svg",t.xhr.responseXML).attr("class","wizard__cityIconImg");n.resolve(a,e)})["catch"](function(){n.resolve()}),n}function c(e,n){if(t.stage==t.STAGE_INITED&&e){var a=n+"Icon";t.element(a).html(e)}}function u(e){if(t.mod().tab!=e)switch(e){case"firms":s.trackEvent("google",["Search","Firms_Click",d]);break;case"geo":s.trackEvent("google",["Search","Geo_Click",d]);break;case"transport":s.trackEvent("google",["Search","Transport_Click",d]);break;case"city":s.trackEvent("google",["Search","City_Click",d])}}var d,h,p,f,m={init:function(e){d=(e.query||"").trim(),h=e.regions,f=e.mode,p=e.summary,a.isEmpty(h)||t.mod({city:"show"})},bind:function(){return!t.ua().isIE(8)&&a.isArray(h)?a.map(h.slice(0,2),function(e){l(e.code).done(c)}):null},viewContext:function(){var n=e("./viewModel");return t.invoke(n,[t,p,h,d])},elements:{city:{click:function(){var e=$(this).data("id");u("city"),t.notify("changeRegion",e)}},moreLink:{click:function(e){var n=$(this).data("mode");u(n),r.setActiveTab(n),r.push(),e.preventDefault(),t.notify("moreLinkClicked")}},guessLink:{click:function(e){e.preventDefault()}}},"interface":{update:function(e){p=a.omit(e,f),t.rerender()},hideCityElement:function(){t.mod({city:"hide"})}}};return m},t.exports._args=["slot","$regionManager","$appState","$analytics"]},{"./viewModel":380,lodash:"lodash","slot/lib/defer":489}],"/modules/world/world.js":[function(e,t,n){var a=e("lodash"),i=req("helpers/linkURL");t.exports=function(t,n,o,r,s,l,c,u,d,h){function p(){var e=t.element("main");M&&M.update(),e.length&&e.yostick("update")}function f(e){t.isClient&&t.cityFrequency.get(function(t){A=t,e(A)})}function m(e){t.isClient&&e.length&&g(function(){var n=I([],e);t.rerenderPartial("favorites","list",n.favorites)},!0)}function g(e,t){var n=w();e(),x(n,t),p()}function _(){clearTimeout(R),t.mod({location:null})}function v(){if(t.isClient){var e=u.get("geoProject");u.get("autoLocation")&&B[e]&&(t.rerenderPartial("locationWrapper","location",y()),s.trackEvent("google",["Global_autolocation","Show"]),t.mod({location:!0}),R=t.setTimeout(_,5e3))}}function y(){if(!u.get("geoProject"))return null;var t=u.get("geoProject"),n=e("./viewModelLocation");return n(B[t])}function b(e,n,a){var i=I(e,n,a);t.rerenderPartial("countries","list",i.countries),t.rerenderPartial("favorites","list",i.favorites),N=!0}function k(e){var n=!!e;t.mod({filtered:n});var i,r;if(e){i=o.groupByCountry(e);var s=a.pluck(A,"id");r=a.filter(e,function(e){return a.contains(s,e.id)}),r=a.uniq(r,"id")}g(function(){b(i,r,n)},!0)}function w(){if(t.isServer)return[];var e=[];return a.each(t.element("section"),function(t){$(t).mod().collapsed||e.push($(t).data("code"))}),e}function x(e,n){var i=a.filter(t.element("section"),function(t){return a.contains(e,$(t).data("code"))});if(i.length)a.each(i,function(e){L(e,!1)});else if(n){var o=a.first(t.element("section"));o&&L(o,!1)}}function C(e){a.each(t.element("section"),function(t){$(t).data("code")==e?L(t,!1):L(t,!0)}),p()}function L(e,t){var n="_collapsed";$(e).hasClass(n)!=!!t&&(t?$(e).addClass(n):$(e).removeClass(n))}function I(n,a,i,r){return n||(n=o.getCountries()),a=a||A,t.invoke(e("./viewModelCountries"),[n,a,i,r])}function T(e){return e&&e.length>1}function S(e){function t(e){var t=a.findWhere(i,{id:e});return t||(t=a.extend({highlighted:[]},B[e]),i.push(t)),t}var n=a.pluck(e.items,"hint"),i=[];return a.each(n,function(e){if(e&&e.project){var n=(e.project||{}).id,a=t(n);a.highlighted.push(e.highlighted_text)}}),i}function E(e){var n=t.element("searchInput");return T(n.val())?(c.abortGroup("suggest_world"),void F(e)):void k()}function P(){var e=t.element("searchInput");e.trigger("focus")}function j(){d.set("global/citySelect",!0),d.push()}var M,A,D,R,N,B=n.getRegions(),F=a.debounce(function(e){var n=t.element("searchInput"),i=n.val();if(T(i)){var o=h(i,"world",function(n,i){if(n||!i||!i.items||a.isEmpty(i.items))return s.trackEvent("google",["Global_Search","Nothing_Found"]),void k();var o=S(i);e?t.notify("changeRegion",a.first(o).id):k(o)});c.add(o,"suggest_world",!0)}},200),O={init:function(){d.get("global/citySelect")?(t.mod({dropdown:!0}),N=!0):u.get("autoLocation")&&t.mod({location:!0}),D=t.init("googleTagAds",{type:"global"}),t.notRender=t.registry.get("isInit")&&!o.hasLegalGlobal()&&t.isClient},clientInit:function(){var e=t.ua().browser;t.mod({donkey:"IE"==e.name&&("10"==e.major||"11"==e.major)}),P(),f(m),v()},bind:function(){M=t.element("scroller").baron().fix(),t.setTimeout(p,100),t.element("main").yostick({scroller:".world__scroller",section:".world__section",sectionContent:".world__list",sectionHeaderWrapper:".world__sectionHeader",sectionHeader:".world__sectionHeaderIn",onCollapse:p})},viewContext:function(){var e={citiesCount:o.getCitiesCount(),countriesLink:i("countries"),globalAds:D};return d.get("global/citySelect")&&a.extend(e,I()),e},changeState:function(e){"global/citySelect"in e&&(t.mod({dropdown:e["global/citySelect"]}),e["global/citySelect"]?(N||g(b),P(),p(),s.trackEvent("google",["Global_Cityselect","Open"]),t.element("globalAds").mod({hidden:!0})):(s.trackEvent("google",["Global_Cityselect","Close"]),t.element("globalAds").mod({hidden:!1})))},elements:{block:{click:_},listItem:{click:function(){var e=$(this).data("id");t.notify("changeRegion",e),s.trackEvent("google",["Global_Cityselect","Select","City",2]),t.mod().filtered&&s.trackEvent("google",["Global_Cityselect","Select","Typein"])}},listItemNameLink:{click:function(e){e.preventDefault()}},titleLink:{click:function(e){e.preventDefault(),t.mod().dropdown?d.del("global/citySelect"):d.set("global/citySelect",!0),d.push()}},location:{click:function(){var e=$(this).data("id");t.notify("changeRegion",e),s.trackEvent("google",["Global_autolocation","Click"])},mouseenter:function(){clearTimeout(R)},mouseleave:function(){R=t.setTimeout(_,5e3)}},sectionHeader:{click:function(){var e=$(this).parent(".world__section");e.hasClass("_collapsed")||s.trackEvent("google",["Global_Cityselect","Select","Country",1])}},searchInput:{keyup:function(e){var t;13==e.keyCode&&(t=!0),j(),E(t)},click:j}},"interface":{enterGlobal:function(){t.isClient&&f(function(){E()})},exitGlobal:function(){_()},autofocus:P,showCountry:C,imitationInputBlur:function(){var e=t.element("searchInput");e[0]&&e[0].blur()},setSeoParams:function(){if(r.get("globalMap")){var e=o.getCountry(),n=a(e.regions).sortBy(function(e){return-e.statistics.branch_count}).take(4).pluck("name").value(),i=o.getCitiesCount(),s=i-n.length;return t.notifySeoParams({type:"global",countryGenitive:e.nameGenitive,cities:l._ngg("%2 и ещё %1 город","%2 и ещё %1 города","%2 и ещё %1 городов",s,n.join(", "))}),!0}return!1}}};return O},t.exports._args=["slot","$regionManager","$countryManager","$featureSwitcher","$analytics","$i18n","$requestGroups","$syncRegistry","$appState","$suggestApi"]},{"./viewModelCountries":381,"./viewModelLocation":382,lodash:"lodash"}],"/modules/zoom/zoom.js":[function(e,t,n){var a=e("lodash");t.exports=function(e){var t={init:function(t){e.mod({context:a.get(t,"context")})},elements:{inButton:{click:function(){"max"!=e.mod().level&&e.notify("in")}},outButton:{click:function(){"min"!=e.mod().level&&e.notify("out")}}},"interface":{maxZoomLevel:function(){e.mod({level:"max"})},minZoomLevel:function(){e.mod({level:"min"})},intermediateZoomLevel:function(){e.mod({level:null})}}};return t}},{lodash:"lodash"}],lodash:[function(e,t,n){(function(e){(function(){function a(e,t){if(e!==t){var n=null===e,a=e===L,i=e===e,o=null===t,r=t===L,s=t===t;if(e>t&&!o||!i||n&&!r&&s||a&&s)return 1;if(t>e&&!n||!s||o&&!a&&i||r&&i)return-1}return 0}function i(e,t,n){for(var a=e.length,i=n?a:-1;n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}function o(e,t,n){if(t!==t)return g(e,n);for(var a=n-1,i=e.length;++a<i;)if(e[a]===t)return a;return-1}function r(e){return"function"==typeof e||!1}function s(e){return null==e?"":e+""}function l(e,t){for(var n=-1,a=e.length;++n<a&&t.indexOf(e.charAt(n))>-1;);return n}function c(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function u(e,t){return a(e.criteria,t.criteria)||e.index-t.index}function d(e,t,n){for(var i=-1,o=e.criteria,r=t.criteria,s=o.length,l=n.length;++i<s;){var c=a(o[i],r[i]);if(c){if(i>=l)return c;var u=n[i];return c*("asc"===u||u===!0?1:-1)}}return e.index-t.index}function h(e){return He[e]}function p(e){return Ge[e]}function f(e,t,n){return t?e=Ze[e]:n&&(e=Ye[e]),"\\"+e}function m(e){return"\\"+Ye[e]}function g(e,t,n){for(var a=e.length,i=t+(n?0:-1);n?i--:++i<a;){var o=e[i];if(o!==o)return i}return-1}function _(e){return!!e&&"object"==typeof e}function v(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function y(e,t){for(var n=-1,a=e.length,i=-1,o=[];++n<a;)e[n]===t&&(e[n]=H,o[++i]=n);return o}function b(e,t){for(var n,a=-1,i=e.length,o=-1,r=[];++a<i;){var s=e[a],l=t?t(s,a,e):s;a&&n===l||(n=l,r[++o]=s)}return r}function k(e){for(var t=-1,n=e.length;++t<n&&v(e.charCodeAt(t)););return t}function w(e){for(var t=e.length;t--&&v(e.charCodeAt(t)););return t}function x(e){return We[e]}function C(e){function t(e){if(_(e)&&!Es(e)&&!(e instanceof X)){if(e instanceof v)return e;if(tr.call(e,"__chain__")&&tr.call(e,"__wrapped__"))return pa(e)}return new v(e)}function n(){}function v(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function X(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Sr,this.__views__=[]}function te(){var e=new X(this.__wrapped__);return e.__actions__=et(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=et(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=et(this.__views__),e}function ae(){if(this.__filtered__){var e=new X(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function He(){var e=this.__wrapped__.value(),t=this.__dir__,n=Es(e),a=0>t,i=n?e.length:0,o=Wn(0,i,this.__views__),r=o.start,s=o.end,l=s-r,c=a?s:r-1,u=this.__iteratees__,d=u.length,h=0,p=xr(l,this.__takeCount__);if(!n||z>i||i==l&&p==l)return nn(a&&n?e.reverse():e,this.__actions__);var f=[];e:for(;l--&&p>h;){c+=t;for(var m=-1,g=e[c];++m<d;){var _=u[m],v=_.iteratee,y=_.type,b=v(g);if(y==$)g=b;else if(!b){if(y==q)continue e;break e}}f[h++]=g}return f}function Ge(){this.__data__={}}function We(e){return this.has(e)&&delete this.__data__[e]}function Ve(e){return"__proto__"==e?L:this.__data__[e]}function Ze(e){return"__proto__"!=e&&tr.call(this.__data__,e)}function Ye(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function Ke(e){var t=e?e.length:0;for(this.data={hash:_r(null),set:new dr};t--;)this.push(e[t])}function Xe(e,t){var n=e.data,a="string"==typeof t||Di(t)?n.set.has(t):n.hash[t];return a?0:-1}function Je(e){var t=this.data;"string"==typeof e||Di(e)?t.set.add(e):t.hash[e]=!0}function Qe(e,t){for(var n=-1,a=e.length,i=-1,o=t.length,r=qo(a+o);++n<a;)r[n]=e[n];for(;++i<o;)r[n++]=t[i];return r}function et(e,t){var n=-1,a=e.length;for(t||(t=qo(a));++n<a;)t[n]=e[n];return t}function tt(e,t){for(var n=-1,a=e.length;++n<a&&t(e[n],n,e)!==!1;);return e}function it(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}function ot(e,t){for(var n=-1,a=e.length;++n<a;)if(!t(e[n],n,e))return!1;return!0}function rt(e,t,n,a){for(var i=-1,o=e.length,r=a,s=r;++i<o;){var l=e[i],c=+t(l);n(c,r)&&(r=c,s=l)}return s}function st(e,t){for(var n=-1,a=e.length,i=-1,o=[];++n<a;){var r=e[n];t(r,n,e)&&(o[++i]=r)}return o}function lt(e,t){for(var n=-1,a=e.length,i=qo(a);++n<a;)i[n]=t(e[n],n,e);return i}function ct(e,t){for(var n=-1,a=t.length,i=e.length;++n<a;)e[i+n]=t[n];return e}function ut(e,t,n,a){var i=-1,o=e.length;for(a&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function dt(e,t,n,a){var i=e.length;for(a&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function ht(e,t){for(var n=-1,a=e.length;++n<a;)if(t(e[n],n,e))return!0;return!1}function pt(e,t){for(var n=e.length,a=0;n--;)a+=+t(e[n])||0;return a}function ft(e,t){return e===L?t:e}function mt(e,t,n,a){return e!==L&&tr.call(a,n)?e:t}function gt(e,t,n){for(var a=-1,i=zs(t),o=i.length;++a<o;){var r=i[a],s=e[r],l=n(s,t[r],r,e,t);(l===l?l===s:s!==s)&&(s!==L||r in e)||(e[r]=l)}return e}function _t(e,t){return null==t?e:yt(t,zs(t),e)}function vt(e,t){for(var n=-1,a=null==e,i=!a&&Xn(e),o=i?e.length:0,r=t.length,s=qo(r);++n<r;){var l=t[n];i?s[n]=Jn(l,o)?e[l]:L:s[n]=a?L:e[l]}return s}function yt(e,t,n){n||(n={});for(var a=-1,i=t.length;++a<i;){var o=t[a];n[o]=e[o]}return n}function bt(e,t,n){var a=typeof e;return"function"==a?t===L?e:rn(e,t,n):null==e?So:"object"==a?Ot(e):t===L?Do(e):zt(e,t)}function kt(e,t,n,a,i,o,r){var s;if(n&&(s=i?n(e,a,i):n(e)),s!==L)return s;if(!Di(e))return e;var l=Es(e);if(l){if(s=Vn(e),!t)return et(e,s)}else{var c=ar.call(e),u=c==K;if(c!=Q&&c!=G&&(!u||i))return Ue[c]?Yn(e,c,t):i?e:{};if(s=Zn(u?{}:e),!t)return _t(s,e)}o||(o=[]),r||(r=[]);for(var d=o.length;d--;)if(o[d]==e)return r[d];return o.push(e),r.push(s),(l?tt:jt)(e,function(a,i){s[i]=kt(a,t,n,i,e,o,r)}),s}function wt(e,t,n){if("function"!=typeof e)throw new Ko(U);return hr(function(){e.apply(L,n)},t)}function xt(e,t){var n=e?e.length:0,a=[];if(!n)return a;var i=-1,r=Un(),s=r==o,l=s&&t.length>=z?mn(t):null,c=t.length;l&&(r=Xe,s=!1,t=l);e:for(;++i<n;){var u=e[i];if(s&&u===u){for(var d=c;d--;)if(t[d]===u)continue e;a.push(u)}else r(t,u,0)<0&&a.push(u)}return a}function Ct(e,t){var n=!0;return Nr(e,function(e,a,i){return n=!!t(e,a,i)}),n}function Lt(e,t,n,a){var i=a,o=i;return Nr(e,function(e,r,s){var l=+t(e,r,s);(n(l,i)||l===a&&l===o)&&(i=l,o=e)}),o}function It(e,t,n,a){var i=e.length;for(n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),a=a===L||a>i?i:+a||0,0>a&&(a+=i),i=n>a?0:a>>>0,n>>>=0;i>n;)e[n++]=t;return e}function Tt(e,t){var n=[];return Nr(e,function(e,a,i){t(e,a,i)&&n.push(e)}),n}function St(e,t,n,a){var i;return n(e,function(e,n,o){return t(e,n,o)?(i=a?n:e,!1):L}),i}function Et(e,t,n,a){a||(a=[]);for(var i=-1,o=e.length;++i<o;){var r=e[i];_(r)&&Xn(r)&&(n||Es(r)||Li(r))?t?Et(r,t,n,a):ct(a,r):n||(a[a.length]=r)}return a}function Pt(e,t){return Fr(e,t,eo)}function jt(e,t){return Fr(e,t,zs)}function Mt(e,t){return Or(e,t,zs)}function At(e,t){for(var n=-1,a=t.length,i=-1,o=[];++n<a;){var r=t[n];Ai(e[r])&&(o[++i]=r)}return o}function Dt(e,t,n){if(null!=e){n!==L&&n in da(e)&&(t=[n]);for(var a=0,i=t.length;null!=e&&i>a;)e=e[t[a++]];return a&&a==i?e:L}}function Rt(e,t,n,a,i,o){return e===t?!0:null==e||null==t||!Di(e)&&!_(t)?e!==e&&t!==t:Nt(e,t,Rt,n,a,i,o)}function Nt(e,t,n,a,i,o,r){var s=Es(e),l=Es(t),c=W,u=W;s||(c=ar.call(e),c==G?c=Q:c!=Q&&(s=Ui(e))),l||(u=ar.call(t),u==G?u=Q:u!=Q&&(l=Ui(t)));var d=c==Q,h=u==Q,p=c==u;if(p&&!s&&!d)return On(e,t,c);if(!i){var f=d&&tr.call(e,"__wrapped__"),m=h&&tr.call(t,"__wrapped__");if(f||m)return n(f?e.value():e,m?t.value():t,a,i,o,r)}if(!p)return!1;o||(o=[]),r||(r=[]);for(var g=o.length;g--;)if(o[g]==e)return r[g]==t;o.push(e),r.push(t);var _=(s?Fn:zn)(e,t,n,a,i,o,r);return o.pop(),r.pop(),_}function Bt(e,t,n){var a=t.length,i=a,o=!n;if(null==e)return!i;for(e=da(e);a--;){var r=t[a];if(o&&r[2]?r[1]!==e[r[0]]:!(r[0]in e))return!1}for(;++a<i;){r=t[a];var s=r[0],l=e[s],c=r[1];if(o&&r[2]){if(l===L&&!(s in e))return!1}else{var u=n?n(l,c,s):L;if(!(u===L?Rt(c,l,n,!0):u))return!1}}return!0}function Ft(e,t){var n=-1,a=Xn(e)?qo(e.length):[];return Nr(e,function(e,i,o){a[++n]=t(e,i,o)}),a}function Ot(e){var t=Hn(e);if(1==t.length&&t[0][2]){var n=t[0][0],a=t[0][1];return function(e){return null==e?!1:e[n]===a&&(a!==L||n in da(e))}}return function(e){return Bt(e,t)}}function zt(e,t){var n=Es(e),a=ea(e)&&aa(t),i=e+"";return e=ha(e),function(o){if(null==o)return!1;var r=i;if(o=da(o),(n||!a)&&!(r in o)){if(o=1==e.length?o:Dt(o,Zt(e,0,-1)),null==o)return!1;r=Ia(e),o=da(o)}return o[r]===t?t!==L||r in o:Rt(t,o[r],L,!0)}}function qt(e,t,n,a,i){if(!Di(e))return e;var o=Xn(t)&&(Es(t)||Ui(t)),r=o?L:zs(t);return tt(r||t,function(s,l){if(r&&(l=s,s=t[l]),_(s))a||(a=[]),i||(i=[]),$t(e,t,l,qt,n,a,i);else{var c=e[l],u=n?n(c,s,l,e,t):L,d=u===L;d&&(u=s),u===L&&(!o||l in e)||!d&&(u===u?u===c:c!==c)||(e[l]=u)}}),e}function $t(e,t,n,a,i,o,r){for(var s=o.length,l=t[n];s--;)if(o[s]==l)return e[n]=r[s],L;var c=e[n],u=i?i(c,l,n,e,t):L,d=u===L;d&&(u=l,Xn(l)&&(Es(l)||Ui(l))?u=Es(c)?c:Xn(c)?et(c):[]:zi(l)||Li(l)?u=Li(c)?Zi(c):zi(c)?c:{}:d=!1),o.push(l),r.push(u),d?e[n]=a(u,l,i,o,r):(u===u?u!==c:c===c)&&(e[n]=u)}function Ut(e){return function(t){return null==t?L:t[e]}}function Ht(e){var t=e+"";return e=ha(e),function(n){return Dt(n,e,t)}}function Gt(e,t){for(var n=e?t.length:0;n--;){var a=t[n];if(a!=i&&Jn(a)){var i=a;pr.call(e,a,1)}}return e}function Wt(e,t){return e+vr(Ir()*(t-e+1))}function Vt(e,t,n,a,i){return i(e,function(e,i,o){n=a?(a=!1,e):t(n,e,i,o)}),n}function Zt(e,t,n){var a=-1,i=e.length;t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),n=n===L||n>i?i:+n||0,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=qo(i);++a<i;)o[a]=e[a+t];return o}function Yt(e,t){var n;return Nr(e,function(e,a,i){return n=t(e,a,i),!n}),!!n}function Kt(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Xt(e,t,n){var a=qn(),i=-1;t=lt(t,function(e){return a(e)});var o=Ft(e,function(e){var n=lt(t,function(t){return t(e)});return{criteria:n,index:++i,value:e}});return Kt(o,function(e,t){return d(e,t,n)})}function Jt(e,t){var n=0;return Nr(e,function(e,a,i){n+=+t(e,a,i)||0}),n}function Qt(e,t){var n=-1,a=Un(),i=e.length,r=a==o,s=r&&i>=z,l=s?mn():null,c=[];l?(a=Xe,r=!1):(s=!1,l=t?[]:c);e:for(;++n<i;){var u=e[n],d=t?t(u,n,e):u;if(r&&u===u){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),c.push(u)}else a(l,d,0)<0&&((t||s)&&l.push(d),c.push(u))}return c}function en(e,t){for(var n=-1,a=t.length,i=qo(a);++n<a;)i[n]=e[t[n]];return i}function tn(e,t,n,a){for(var i=e.length,o=a?i:-1;(a?o--:++o<i)&&t(e[o],o,e););return n?Zt(e,a?0:o,a?o+1:i):Zt(e,a?o+1:0,a?i:o)}function nn(e,t){var n=e;n instanceof X&&(n=n.value());for(var a=-1,i=t.length;++a<i;){var o=t[a];n=o.func.apply(o.thisArg,ct([n],o.args))}return n}function an(e,t,n){var a=0,i=e?e.length:a;if("number"==typeof t&&t===t&&jr>=i){for(;i>a;){var o=a+i>>>1,r=e[o];(n?t>=r:t>r)&&null!==r?a=o+1:i=o}return i}return on(e,t,So,n)}function on(e,t,n,a){t=n(t);for(var i=0,o=e?e.length:0,r=t!==t,s=null===t,l=t===L;o>i;){var c=vr((i+o)/2),u=n(e[c]),d=u!==L,h=u===u;if(r)var p=h||a;else p=s?h&&d&&(a||null!=u):l?h&&(a||d):null==u?!1:a?t>=u:t>u;p?i=c+1:o=c}return xr(o,Pr)}function rn(e,t,n){if("function"!=typeof e)return So;if(t===L)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,a,i){return e.call(t,n,a,i)};case 4:return function(n,a,i,o){return e.call(t,n,a,i,o)};case 5:return function(n,a,i,o,r){return e.call(t,n,a,i,o,r)}}return function(){return e.apply(t,arguments)}}function sn(e){var t=new rr(e.byteLength),n=new fr(t);return n.set(new fr(e)),t}function ln(e,t,n){for(var a=n.length,i=-1,o=wr(e.length-a,0),r=-1,s=t.length,l=qo(s+o);++r<s;)l[r]=t[r];for(;++i<a;)l[n[i]]=e[i];for(;o--;)l[r++]=e[i++];return l}function cn(e,t,n){for(var a=-1,i=n.length,o=-1,r=wr(e.length-i,0),s=-1,l=t.length,c=qo(r+l);++o<r;)c[o]=e[o];for(var u=o;++s<l;)c[u+s]=t[s];for(;++a<i;)c[u+n[a]]=e[o++];return c}function un(e,t){return function(n,a,i){var o=t?t():{};if(a=qn(a,i,3),Es(n))for(var r=-1,s=n.length;++r<s;){var l=n[r];e(o,l,a(l,r,n),n)}else Nr(n,function(t,n,i){e(o,t,a(t,n,i),i)});return o}}function dn(e){return _i(function(t,n){var a=-1,i=null==t?0:n.length,o=i>2?n[i-2]:L,r=i>2?n[2]:L,s=i>1?n[i-1]:L;for("function"==typeof o?(o=rn(o,s,5),i-=2):(o="function"==typeof s?s:L,i-=o?1:0),r&&Qn(n[0],n[1],r)&&(o=3>i?L:o,i=1);++a<i;){var l=n[a];l&&e(t,l,o)}return t})}function hn(e,t){return function(n,a){var i=n?$r(n):0;if(!na(i))return e(n,a);for(var o=t?i:-1,r=da(n);(t?o--:++o<i)&&a(r[o],o,r)!==!1;);return n}}function pn(e){return function(t,n,a){for(var i=da(t),o=a(t),r=o.length,s=e?r:-1;e?s--:++s<r;){var l=o[s];if(n(i[l],l,i)===!1)break}return t}}function fn(e,t){function n(){var i=this&&this!==nt&&this instanceof n?a:e;return i.apply(t,arguments)}var a=_n(e);return n}function mn(e){return _r&&dr?new Ke(e):null}function gn(e){return function(t){for(var n=-1,a=Lo(uo(t)),i=a.length,o="";++n<i;)o=e(o,a[n],n);return o}}function _n(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Rr(e.prototype),a=e.apply(n,t);return Di(a)?a:n}}function vn(e){function t(n,a,i){i&&Qn(n,a,i)&&(a=L);var o=Bn(n,e,L,L,L,L,L,a);return o.placeholder=t.placeholder,o}return t}function yn(e,t){return _i(function(n){var a=n[0];return null==a?a:(n.push(t),e.apply(L,n))})}function bn(e,t){return function(n,a,i){if(i&&Qn(n,a,i)&&(a=L),a=qn(a,i,3),1==a.length){n=Es(n)?n:ua(n);var o=rt(n,a,e,t);if(!n.length||o!==t)return o}return Lt(n,a,e,t)}}function kn(e,t){return function(n,a,o){if(a=qn(a,o,3),Es(n)){var r=i(n,a,t);return r>-1?n[r]:L}return St(n,a,e)}}function wn(e){return function(t,n,a){return t&&t.length?(n=qn(n,a,3),i(t,n,e)):-1}}function xn(e){return function(t,n,a){return n=qn(n,a,3),St(t,n,e,!0)}}function Cn(e){return function(){for(var t,n=arguments.length,a=e?n:-1,i=0,o=qo(n);e?a--:++a<n;){var r=o[i++]=arguments[a];if("function"!=typeof r)throw new Ko(U);!t&&v.prototype.thru&&"wrapper"==$n(r)&&(t=new v([],!0))}for(a=t?-1:n;++a<n;){r=o[a];var s=$n(r),l="wrapper"==s?qr(r):L;t=l&&ta(l[0])&&l[1]==(D|P|M|R)&&!l[4].length&&1==l[9]?t[$n(l[0])].apply(t,l[3]):1==r.length&&ta(r)?t[s]():t.thru(r)}return function(){var e=arguments,a=e[0];if(t&&1==e.length&&Es(a)&&a.length>=z)return t.plant(a).value();for(var i=0,r=n?o[i].apply(this,e):a;++i<n;)r=o[i].call(this,r);return r}}}function Ln(e,t){return function(n,a,i){return"function"==typeof a&&i===L&&Es(n)?e(n,a):t(n,rn(a,i,3))}}function In(e){return function(t,n,a){return"function"==typeof n&&a===L||(n=rn(n,a,3)),e(t,n,eo)}}function Tn(e){return function(t,n,a){return"function"==typeof n&&a===L||(n=rn(n,a,3)),e(t,n)}}function Sn(e){return function(t,n,a){var i={};return n=qn(n,a,3),jt(t,function(t,a,o){var r=n(t,a,o);a=e?r:a,t=e?t:r,i[a]=t}),i}}function En(e){return function(t,n,a){return t=s(t),(e?t:"")+An(t,n,a)+(e?"":t)}}function Pn(e){var t=_i(function(n,a){var i=y(a,t.placeholder);return Bn(n,e,L,a,i)});return t}function jn(e,t){return function(n,a,i,o){var r=arguments.length<3;return"function"==typeof a&&o===L&&Es(n)?e(n,a,i,r):Vt(n,qn(a,o,4),i,r,t)}}function Mn(e,t,n,a,i,o,r,s,l,c){function u(){for(var v=arguments.length,b=v,k=qo(v);b--;)k[b]=arguments[b];if(a&&(k=ln(k,a,i)),o&&(k=cn(k,o,r)),f||g){var w=u.placeholder,x=y(k,w);if(v-=x.length,c>v){var C=s?et(s):L,I=wr(c-v,0),E=f?x:L,P=f?L:x,j=f?k:L,D=f?L:k;t|=f?M:A,t&=~(f?A:M),m||(t&=~(T|S));var R=[e,t,n,j,E,D,P,C,l,I],N=Mn.apply(L,R);return ta(e)&&Ur(N,R),N.placeholder=w,N}}var B=h?n:this,F=p?B[e]:e;return s&&(k=la(k,s)),d&&l<k.length&&(k.length=l),this&&this!==nt&&this instanceof u&&(F=_||_n(e)),F.apply(B,k)}var d=t&D,h=t&T,p=t&S,f=t&P,m=t&E,g=t&j,_=p?L:_n(e);return u}function An(e,t,n){var a=e.length;if(t=+t,a>=t||!br(t))return"";var i=t-a;return n=null==n?" ":n+"",_o(n,gr(i/n.length)).slice(0,i)}function Dn(e,t,n,a){function i(){for(var t=-1,s=arguments.length,l=-1,c=a.length,u=qo(c+s);++l<c;)u[l]=a[l];for(;s--;)u[l++]=arguments[++t];var d=this&&this!==nt&&this instanceof i?r:e;return d.apply(o?n:this,u)}var o=t&T,r=_n(e);return i}function Rn(e){var t=Go[e];return function(e,n){return n=n===L?0:+n||0,n?(n=cr(10,n),t(e*n)/n):t(e)}}function Nn(e){return function(t,n,a,i){var o=qn(a);return null==a&&o===bt?an(t,n,e):on(t,n,o(a,i,1),e)}}function Bn(e,t,n,a,i,o,r,s){var l=t&S;if(!l&&"function"!=typeof e)throw new Ko(U);var c=a?a.length:0;if(c||(t&=~(M|A),a=i=L),c-=i?i.length:0,t&A){var u=a,d=i;a=i=L}var h=l?L:qr(e),p=[e,t,n,a,i,u,d,o,r,s];if(h&&(ia(p,h),t=p[1],s=p[9]),p[9]=null==s?l?0:e.length:wr(s-c,0)||0,t==T)var f=fn(p[0],p[2]);else f=t!=M&&t!=(T|M)||p[4].length?Mn.apply(L,p):Dn.apply(L,p);var m=h?zr:Ur;return m(f,p)}function Fn(e,t,n,a,i,o,r){var s=-1,l=e.length,c=t.length;if(l!=c&&!(i&&c>l))return!1;for(;++s<l;){var u=e[s],d=t[s],h=a?a(i?d:u,i?u:d,s):L;if(h!==L){if(h)continue;return!1}if(i){if(!ht(t,function(e){return u===e||n(u,e,a,i,o,r)}))return!1}else if(u!==d&&!n(u,d,a,i,o,r))return!1}return!0}function On(e,t,n){switch(n){case V:case Z:return+e==+t;case Y:return e.name==t.name&&e.message==t.message;case J:return e!=+e?t!=+t:e==+t;case ee:case ne:return e==t+""}return!1}function zn(e,t,n,a,i,o,r){var s=zs(e),l=s.length,c=zs(t),u=c.length;if(l!=u&&!i)return!1;for(var d=l;d--;){var h=s[d];if(!(i?h in t:tr.call(t,h)))return!1}for(var p=i;++d<l;){h=s[d];var f=e[h],m=t[h],g=a?a(i?m:f,i?f:m,h):L;if(!(g===L?n(f,m,a,i,o,r):g))return!1;p||(p="constructor"==h)}if(!p){var _=e.constructor,v=t.constructor;if(_!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof v&&v instanceof v))return!1}return!0}function qn(e,n,a){var i=t.callback||Io;return i=i===Io?bt:i,a?i(e,n,a):i}function $n(e){for(var t=e.name,n=Dr[t],a=n?n.length:0;a--;){var i=n[a],o=i.func;if(null==o||o==e)return i.name}return t}function Un(e,n,a){var i=t.indexOf||Ca;return i=i===Ca?o:i,e?i(e,n,a):i}function Hn(e){for(var t=to(e),n=t.length;n--;)t[n][2]=aa(t[n][1]);return t}function Gn(e,t){var n=null==e?L:e[t];return Bi(n)?n:L}function Wn(e,t,n){for(var a=-1,i=n.length;++a<i;){var o=n[a],r=o.size;switch(o.type){case"drop":e+=r;break;case"dropRight":t-=r;break;case"take":t=xr(t,e+r);break;case"takeRight":e=wr(e,t-r)}}return{start:e,end:t}}function Vn(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&tr.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Zn(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Vo),new t}function Yn(e,t,n){var a=e.constructor;switch(t){case ie:return sn(e);case V:case Z:return new a(+e);case oe:case re:case se:case le:case ce:case ue:case de:case he:case pe:var i=e.buffer;return new a(n?sn(i):i,e.byteOffset,e.length);case J:case ne:return new a(e);case ee:var o=new a(e.source,Me.exec(e));o.lastIndex=e.lastIndex}return o}function Kn(e,t,n){null==e||ea(t,e)||(t=ha(t),e=1==t.length?e:Dt(e,Zt(t,0,-1)),t=Ia(t));var a=null==e?e:e[t];return null==a?L:a.apply(e,n)}function Xn(e){return null!=e&&na($r(e))}function Jn(e,t){return e="number"==typeof e||Re.test(e)?+e:-1,t=null==t?Mr:t,e>-1&&e%1==0&&t>e}function Qn(e,t,n){if(!Di(n))return!1;var a=typeof t;if("number"==a?Xn(n)&&Jn(t,n.length):"string"==a&&t in n){var i=n[t];return e===e?e===i:i!==i}return!1}function ea(e,t){var n=typeof e;if("string"==n&&Le.test(e)||"number"==n)return!0;if(Es(e))return!1;var a=!Ce.test(e);return a||null!=t&&e in da(t)}function ta(e){var n=$n(e);if(!(n in X.prototype))return!1;var a=t[n];if(e===a)return!0;var i=qr(a);return!!i&&e===i[0]}function na(e){return"number"==typeof e&&e>-1&&e%1==0&&Mr>=e}function aa(e){return e===e&&!Di(e)}function ia(e,t){var n=e[1],a=t[1],i=n|a,o=D>i,r=a==D&&n==P||a==D&&n==R&&e[7].length<=t[8]||a==(D|R)&&n==P;if(!o&&!r)return e;a&T&&(e[2]=t[2],i|=n&T?0:E);var s=t[3];if(s){var l=e[3];e[3]=l?ln(l,s,t[4]):et(s),e[4]=l?y(e[3],H):et(t[4])}return s=t[5],s&&(l=e[5],e[5]=l?cn(l,s,t[6]):et(s),e[6]=l?y(e[5],H):et(t[6])),s=t[7],s&&(e[7]=et(s)),a&D&&(e[8]=null==e[8]?t[8]:xr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function oa(e,t){return e===L?t:Ps(e,t,oa)}function ra(e,t){e=da(e);for(var n=-1,a=t.length,i={};++n<a;){var o=t[n];o in e&&(i[o]=e[o])}return i}function sa(e,t){var n={};return Pt(e,function(e,a,i){t(e,a,i)&&(n[a]=e)}),n}function la(e,t){for(var n=e.length,a=xr(t.length,n),i=et(e);a--;){var o=t[a];e[a]=Jn(o,n)?i[o]:L}return e}function ca(e){for(var t=eo(e),n=t.length,a=n&&e.length,i=!!a&&na(a)&&(Es(e)||Li(e)),o=-1,r=[];++o<n;){var s=t[o];(i&&Jn(s,a)||tr.call(e,s))&&r.push(s)}return r}function ua(e){return null==e?[]:Xn(e)?Di(e)?e:Vo(e):oo(e)}function da(e){return Di(e)?e:Vo(e)}function ha(e){if(Es(e))return e;var t=[];return s(e).replace(Ie,function(e,n,a,i){t.push(a?i.replace(Pe,"$1"):n||e)}),t}function pa(e){return e instanceof X?e.clone():new v(e.__wrapped__,e.__chain__,et(e.__actions__))}function fa(e,t,n){t=(n?Qn(e,t,n):null==t)?1:wr(vr(t)||1,1);for(var a=0,i=e?e.length:0,o=-1,r=qo(gr(i/t));i>a;)r[++o]=Zt(e,a,a+=t);
return r}function ma(e){for(var t=-1,n=e?e.length:0,a=-1,i=[];++t<n;){var o=e[t];o&&(i[++a]=o)}return i}function ga(e,t,n){var a=e?e.length:0;return a?((n?Qn(e,t,n):null==t)&&(t=1),Zt(e,0>t?0:t)):[]}function _a(e,t,n){var a=e?e.length:0;return a?((n?Qn(e,t,n):null==t)&&(t=1),t=a-(+t||0),Zt(e,0,0>t?0:t)):[]}function va(e,t,n){return e&&e.length?tn(e,qn(t,n,3),!0,!0):[]}function ya(e,t,n){return e&&e.length?tn(e,qn(t,n,3),!0):[]}function ba(e,t,n,a){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&Qn(e,t,n)&&(n=0,a=i),It(e,t,n,a)):[]}function ka(e){return e?e[0]:L}function wa(e,t,n){var a=e?e.length:0;return n&&Qn(e,t,n)&&(t=!1),a?Et(e,t):[]}function xa(e){var t=e?e.length:0;return t?Et(e,!0):[]}function Ca(e,t,n){var a=e?e.length:0;if(!a)return-1;if("number"==typeof n)n=0>n?wr(a+n,0):n;else if(n){var i=an(e,t);return a>i&&(t===t?t===e[i]:e[i]!==e[i])?i:-1}return o(e,t,n||0)}function La(e){return _a(e,1)}function Ia(e){var t=e?e.length:0;return t?e[t-1]:L}function Ta(e,t,n){var a=e?e.length:0;if(!a)return-1;var i=a;if("number"==typeof n)i=(0>n?wr(a+n,0):xr(n||0,a-1))+1;else if(n){i=an(e,t,!0)-1;var o=e[i];return(t===t?t===o:o!==o)?i:-1}if(t!==t)return g(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1}function Sa(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,a=Un(),i=e.length;++n<i;)for(var o=0,r=e[n];(o=a(t,r,o))>-1;)pr.call(t,o,1);return t}function Ea(e,t,n){var a=[];if(!e||!e.length)return a;var i=-1,o=[],r=e.length;for(t=qn(t,n,3);++i<r;){var s=e[i];t(s,i,e)&&(a.push(s),o.push(i))}return Gt(e,o),a}function Pa(e){return ga(e,1)}function ja(e,t,n){var a=e?e.length:0;return a?(n&&"number"!=typeof n&&Qn(e,t,n)&&(t=0,n=a),Zt(e,t,n)):[]}function Ma(e,t,n){var a=e?e.length:0;return a?((n?Qn(e,t,n):null==t)&&(t=1),Zt(e,0,0>t?0:t)):[]}function Aa(e,t,n){var a=e?e.length:0;return a?((n?Qn(e,t,n):null==t)&&(t=1),t=a-(+t||0),Zt(e,0>t?0:t)):[]}function Da(e,t,n){return e&&e.length?tn(e,qn(t,n,3),!1,!0):[]}function Ra(e,t,n){return e&&e.length?tn(e,qn(t,n,3)):[]}function Na(e,t,n,a){var i=e?e.length:0;if(!i)return[];null!=t&&"boolean"!=typeof t&&(a=n,n=Qn(e,t,a)?L:t,t=!1);var r=qn();return null==n&&r===bt||(n=r(n,a,3)),t&&Un()==o?b(e,n):Qt(e,n)}function Ba(e){if(!e||!e.length)return[];var t=-1,n=0;e=st(e,function(e){return Xn(e)?(n=wr(e.length,n),!0):L});for(var a=qo(n);++t<n;)a[t]=lt(e,Ut(t));return a}function Fa(e,t,n){var a=e?e.length:0;if(!a)return[];var i=Ba(e);return null==t?i:(t=rn(t,n,4),lt(i,function(e){return ut(e,t,L,!0)}))}function Oa(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Xn(n))var a=a?ct(xt(a,n),xt(n,a)):n}return a?Qt(a):[]}function za(e,t){var n=-1,a=e?e.length:0,i={};for(!a||t||Es(e[0])||(t=[]);++n<a;){var o=e[n];t?i[o]=t[n]:o&&(i[o[0]]=o[1])}return i}function qa(e){var n=t(e);return n.__chain__=!0,n}function $a(e,t,n){return t.call(n,e),e}function Ua(e,t,n){return t.call(n,e)}function Ha(){return qa(this)}function Ga(){return new v(this.value(),this.__chain__)}function Wa(e){for(var t,a=this;a instanceof n;){var i=pa(a);t?o.__wrapped__=i:t=i;var o=i;a=a.__wrapped__}return o.__wrapped__=e,t}function Va(){var e=this.__wrapped__,t=function(e){return n&&n.__dir__<0?e:e.reverse()};if(e instanceof X){var n=e;return this.__actions__.length&&(n=new X(this)),n=n.reverse(),n.__actions__.push({func:Ua,args:[t],thisArg:L}),new v(n,this.__chain__)}return this.thru(t)}function Za(){return this.value()+""}function Ya(){return nn(this.__wrapped__,this.__actions__)}function Ka(e,t,n){var a=Es(e)?ot:Ct;return n&&Qn(e,t,n)&&(t=L),"function"==typeof t&&n===L||(t=qn(t,n,3)),a(e,t)}function Xa(e,t,n){var a=Es(e)?st:Tt;return t=qn(t,n,3),a(e,t)}function Ja(e,t){return is(e,Ot(t))}function Qa(e,t,n,a){var i=e?$r(e):0;return na(i)||(e=oo(e),i=e.length),n="number"!=typeof n||a&&Qn(t,n,a)?0:0>n?wr(i+n,0):n||0,"string"==typeof e||!Es(e)&&$i(e)?i>=n&&e.indexOf(t,n)>-1:!!i&&Un(e,t,n)>-1}function ei(e,t,n){var a=Es(e)?lt:Ft;return t=qn(t,n,3),a(e,t)}function ti(e,t){return ei(e,Do(t))}function ni(e,t,n){var a=Es(e)?st:Tt;return t=qn(t,n,3),a(e,function(e,n,a){return!t(e,n,a)})}function ai(e,t,n){if(n?Qn(e,t,n):null==t){e=ua(e);var a=e.length;return a>0?e[Wt(0,a-1)]:L}var i=-1,o=Vi(e),a=o.length,r=a-1;for(t=xr(0>t?0:+t||0,a);++i<t;){var s=Wt(i,r),l=o[s];o[s]=o[i],o[i]=l}return o.length=t,o}function ii(e){return ai(e,Sr)}function oi(e){var t=e?$r(e):0;return na(t)?t:zs(e).length}function ri(e,t,n){var a=Es(e)?ht:Yt;return n&&Qn(e,t,n)&&(t=L),"function"==typeof t&&n===L||(t=qn(t,n,3)),a(e,t)}function si(e,t,n){if(null==e)return[];n&&Qn(e,t,n)&&(t=L);var a=-1;t=qn(t,n,3);var i=Ft(e,function(e,n,i){return{criteria:t(e,n,i),index:++a,value:e}});return Kt(i,u)}function li(e,t,n,a){return null==e?[]:(a&&Qn(t,n,a)&&(n=L),Es(t)||(t=null==t?[]:[t]),Es(n)||(n=null==n?[]:[n]),Xt(e,t,n))}function ci(e,t){return Xa(e,Ot(t))}function ui(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Ko(U);var n=e;e=t,t=n}return e=br(e=+e)?e:0,function(){return--e<1?t.apply(this,arguments):L}}function di(e,t,n){return n&&Qn(e,t,n)&&(t=L),t=e&&null==t?e.length:wr(+t||0,0),Bn(e,D,L,L,L,L,t)}function hi(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Ko(U);var a=e;e=t,t=a}return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=L),n}}function pi(e,t,n){function a(){p&&sr(p),c&&sr(c),m=0,c=p=f=L}function i(t,n){n&&sr(n),c=p=f=L,t&&(m=ms(),u=e.apply(h,l),p||c||(l=h=L))}function o(){var e=t-(ms()-d);0>=e||e>t?i(f,c):p=hr(o,e)}function r(){i(_,p)}function s(){if(l=arguments,d=ms(),h=this,f=_&&(p||!v),g===!1)var n=v&&!p;else{c||v||(m=d);var a=g-(d-m),i=0>=a||a>g;i?(c&&(c=sr(c)),m=d,u=e.apply(h,l)):c||(c=hr(r,a))}return i&&p?p=sr(p):p||t===g||(p=hr(o,t)),n&&(i=!0,u=e.apply(h,l)),!i||p||c||(l=h=L),u}var l,c,u,d,h,p,f,m=0,g=!1,_=!0;if("function"!=typeof e)throw new Ko(U);if(t=0>t?0:+t||0,n===!0){var v=!0;_=!1}else Di(n)&&(v=!!n.leading,g="maxWait"in n&&wr(+n.maxWait||0,t),_="trailing"in n?!!n.trailing:_);return s.cancel=a,s}function fi(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Ko(U);var n=function(){var a=arguments,i=t?t.apply(this,a):a[0],o=n.cache;if(o.has(i))return o.get(i);var r=e.apply(this,a);return n.cache=o.set(i,r),r};return n.cache=new fi.Cache,n}function mi(e){if("function"!=typeof e)throw new Ko(U);return function(){return!e.apply(this,arguments)}}function gi(e){return hi(2,e)}function _i(e,t){if("function"!=typeof e)throw new Ko(U);return t=wr(t===L?e.length-1:+t||0,0),function(){for(var n=arguments,a=-1,i=wr(n.length-t,0),o=qo(i);++a<i;)o[a]=n[t+a];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var r=qo(t+1);for(a=-1;++a<t;)r[a]=n[a];return r[t]=o,e.apply(this,r)}}function vi(e){if("function"!=typeof e)throw new Ko(U);return function(t){return e.apply(this,t)}}function yi(e,t,n){var a=!0,i=!0;if("function"!=typeof e)throw new Ko(U);return n===!1?a=!1:Di(n)&&(a="leading"in n?!!n.leading:a,i="trailing"in n?!!n.trailing:i),pi(e,t,{leading:a,maxWait:+t,trailing:i})}function bi(e,t){return t=null==t?So:t,Bn(t,M,L,[e],[])}function ki(e,t,n,a){return t&&"boolean"!=typeof t&&Qn(e,t,n)?t=!1:"function"==typeof t&&(a=n,n=t,t=!1),"function"==typeof n?kt(e,t,rn(n,a,1)):kt(e,t)}function wi(e,t,n){return"function"==typeof t?kt(e,!0,rn(t,n,1)):kt(e,!0)}function xi(e,t){return e>t}function Ci(e,t){return e>=t}function Li(e){return _(e)&&Xn(e)&&tr.call(e,"callee")&&!ur.call(e,"callee")}function Ii(e){return e===!0||e===!1||_(e)&&ar.call(e)==V}function Ti(e){return _(e)&&ar.call(e)==Z}function Si(e){return!!e&&1===e.nodeType&&_(e)&&!zi(e)}function Ei(e){return null==e?!0:Xn(e)&&(Es(e)||$i(e)||Li(e)||_(e)&&Ai(e.splice))?!e.length:!zs(e).length}function Pi(e,t,n,a){n="function"==typeof n?rn(n,a,3):L;var i=n?n(e,t):L;return i===L?Rt(e,t,n):!!i}function ji(e){return _(e)&&"string"==typeof e.message&&ar.call(e)==Y}function Mi(e){return"number"==typeof e&&br(e)}function Ai(e){return Di(e)&&ar.call(e)==K}function Di(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ri(e,t,n,a){return n="function"==typeof n?rn(n,a,3):L,Bt(e,Hn(t),n)}function Ni(e){return Oi(e)&&e!=+e}function Bi(e){return null==e?!1:Ai(e)?or.test(er.call(e)):_(e)&&De.test(e)}function Fi(e){return null===e}function Oi(e){return"number"==typeof e||_(e)&&ar.call(e)==J}function zi(e){var t;if(!_(e)||ar.call(e)!=Q||Li(e)||!tr.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return Pt(e,function(e,t){n=t}),n===L||tr.call(e,n)}function qi(e){return Di(e)&&ar.call(e)==ee}function $i(e){return"string"==typeof e||_(e)&&ar.call(e)==ne}function Ui(e){return _(e)&&na(e.length)&&!!$e[ar.call(e)]}function Hi(e){return e===L}function Gi(e,t){return t>e}function Wi(e,t){return t>=e}function Vi(e){var t=e?$r(e):0;return na(t)?t?et(e):[]:oo(e)}function Zi(e){return yt(e,eo(e))}function Yi(e,t,n){var a=Rr(e);return n&&Qn(e,t,n)&&(t=L),t?_t(a,t):a}function Ki(e){return At(e,eo(e))}function Xi(e,t,n){var a=null==e?L:Dt(e,ha(t),t+"");return a===L?n:a}function Ji(e,t){if(null==e)return!1;var n=tr.call(e,t);if(!n&&!ea(t)){if(t=ha(t),e=1==t.length?e:Dt(e,Zt(t,0,-1)),null==e)return!1;t=Ia(t),n=tr.call(e,t)}return n||na(e.length)&&Jn(t,e.length)&&(Es(e)||Li(e))}function Qi(e,t,n){n&&Qn(e,t,n)&&(t=L);for(var a=-1,i=zs(e),o=i.length,r={};++a<o;){var s=i[a],l=e[s];t?tr.call(r,l)?r[l].push(s):r[l]=[s]:r[l]=s}return r}function eo(e){if(null==e)return[];Di(e)||(e=Vo(e));var t=e.length;t=t&&na(t)&&(Es(e)||Li(e))&&t||0;for(var n=e.constructor,a=-1,i="function"==typeof n&&n.prototype===e,o=qo(t),r=t>0;++a<t;)o[a]=a+"";for(var s in e)r&&Jn(s,t)||"constructor"==s&&(i||!tr.call(e,s))||o.push(s);return o}function to(e){e=da(e);for(var t=-1,n=zs(e),a=n.length,i=qo(a);++t<a;){var o=n[t];i[t]=[o,e[o]]}return i}function no(e,t,n){var a=null==e?L:e[t];return a===L&&(null==e||ea(t,e)||(t=ha(t),e=1==t.length?e:Dt(e,Zt(t,0,-1)),a=null==e?L:e[Ia(t)]),a=a===L?n:a),Ai(a)?a.call(e):a}function ao(e,t,n){if(null==e)return e;var a=t+"";t=null!=e[a]||ea(t,e)?[a]:ha(t);for(var i=-1,o=t.length,r=o-1,s=e;null!=s&&++i<o;){var l=t[i];Di(s)&&(i==r?s[l]=n:null==s[l]&&(s[l]=Jn(t[i+1])?[]:{})),s=s[l]}return e}function io(e,t,n,a){var i=Es(e)||Ui(e);if(t=qn(t,a,4),null==n)if(i||Di(e)){var o=e.constructor;n=i?Es(e)?new o:[]:Rr(Ai(o)?o.prototype:L)}else n={};return(i?tt:jt)(e,function(e,a,i){return t(n,e,a,i)}),n}function oo(e){return en(e,zs(e))}function ro(e){return en(e,eo(e))}function so(e,t,n){return t=+t||0,n===L?(n=t,t=0):n=+n||0,e>=xr(t,n)&&e<wr(t,n)}function lo(e,t,n){n&&Qn(e,t,n)&&(t=n=L);var a=null==e,i=null==t;if(null==n&&(i&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,i=!0)),a&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1){var o=Ir();return xr(e+o*(t-e+lr("1e-"+((o+"").length-1))),t)}return Wt(e,t)}function co(e){return e=s(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function uo(e){return e=s(e),e&&e.replace(Ne,h).replace(Ee,"")}function ho(e,t,n){e=s(e),t+="";var a=e.length;return n=n===L?a:xr(0>n?0:+n||0,a),n-=t.length,n>=0&&e.indexOf(t,n)==n}function po(e){return e=s(e),e&&be.test(e)?e.replace(ve,p):e}function fo(e){return e=s(e),e&&Se.test(e)?e.replace(Te,f):e||"(?:)"}function mo(e,t,n){e=s(e),t=+t;var a=e.length;if(a>=t||!br(t))return e;var i=(t-a)/2,o=vr(i),r=gr(i);return n=An("",r,n),n.slice(0,o)+e+n}function go(e,t,n){return(n?Qn(e,t,n):null==t)?t=0:t&&(t=+t),e=bo(e),Lr(e,t||(Ae.test(e)?16:10))}function _o(e,t){var n="";if(e=s(e),t=+t,1>t||!e||!br(t))return n;do t%2&&(n+=e),t=vr(t/2),e+=e;while(t);return n}function vo(e,t,n){return e=s(e),n=null==n?0:xr(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function yo(e,n,a){var i=t.templateSettings;a&&Qn(e,n,a)&&(n=a=L),e=s(e),n=gt(_t({},a||n),i,mt);var o,r,l=gt(_t({},n.imports),i.imports,mt),c=zs(l),u=en(l,c),d=0,h=n.interpolate||Be,p="__p += '",f=Zo((n.escape||Be).source+"|"+h.source+"|"+(h===xe?je:Be).source+"|"+(n.evaluate||Be).source+"|$","g"),g="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++qe+"]")+"\n";e.replace(f,function(t,n,a,i,s,l){return a||(a=i),p+=e.slice(d,l).replace(Fe,m),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(r=!0,p+="';\n"+s+";\n__p += '"),a&&(p+="' +\n((__t = ("+a+")) == null ? '' : __t) +\n'"),d=l+t.length,t}),p+="';\n";var _=n.variable;_||(p="with (obj) {\n"+p+"\n}\n"),p=(r?p.replace(fe,""):p).replace(me,"$1").replace(ge,"$1;"),p="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=Xs(function(){return Ho(c,g+"return "+p).apply(L,u)});if(v.source=p,ji(v))throw v;return v}function bo(e,t,n){var a=e;return(e=s(e))?(n?Qn(a,t,n):null==t)?e.slice(k(e),w(e)+1):(t+="",e.slice(l(e,t),c(e,t)+1)):e}function ko(e,t,n){var a=e;return e=s(e),e?(n?Qn(a,t,n):null==t)?e.slice(k(e)):e.slice(l(e,t+"")):e}function wo(e,t,n){var a=e;return e=s(e),e?(n?Qn(a,t,n):null==t)?e.slice(0,w(e)+1):e.slice(0,c(e,t+"")+1):e}function xo(e,t,n){n&&Qn(e,t,n)&&(t=L);var a=N,i=B;if(null!=t)if(Di(t)){var o="separator"in t?t.separator:o;a="length"in t?+t.length||0:a,i="omission"in t?s(t.omission):i}else a=+t||0;if(e=s(e),a>=e.length)return e;var r=a-i.length;if(1>r)return i;var l=e.slice(0,r);if(null==o)return l+i;if(qi(o)){if(e.slice(r).search(o)){var c,u,d=e.slice(0,r);for(o.global||(o=Zo(o.source,(Me.exec(o)||"")+"g")),o.lastIndex=0;c=o.exec(d);)u=c.index;l=l.slice(0,null==u?r:u)}}else if(e.indexOf(o,r)!=r){var h=l.lastIndexOf(o);h>-1&&(l=l.slice(0,h))}return l+i}function Co(e){return e=s(e),e&&ye.test(e)?e.replace(_e,x):e}function Lo(e,t,n){return n&&Qn(e,t,n)&&(t=L),e=s(e),e.match(t||Oe)||[]}function Io(e,t,n){return n&&Qn(e,t,n)&&(t=L),_(e)?Eo(e):bt(e,t)}function To(e){return function(){return e}}function So(e){return e}function Eo(e){return Ot(kt(e,!0))}function Po(e,t){return zt(e,kt(t,!0))}function jo(e,t,n){if(null==n){var a=Di(t),i=a?zs(t):L,o=i&&i.length?At(t,i):L;(o?o.length:a)||(o=!1,n=t,t=e,e=this)}o||(o=At(t,zs(t)));var r=!0,s=-1,l=Ai(e),c=o.length;n===!1?r=!1:Di(n)&&"chain"in n&&(r=n.chain);for(;++s<c;){var u=o[s],d=t[u];e[u]=d,l&&(e.prototype[u]=function(t){return function(){var n=this.__chain__;if(r||n){var a=e(this.__wrapped__),i=a.__actions__=et(this.__actions__);return i.push({func:t,args:arguments,thisArg:e}),a.__chain__=n,a}return t.apply(e,ct([this.value()],arguments))}}(d))}return e}function Mo(){return nt._=ir,this}function Ao(){}function Do(e){return ea(e)?Ut(e):Ht(e)}function Ro(e){return function(t){return Dt(e,ha(t),t+"")}}function No(e,t,n){n&&Qn(e,t,n)&&(t=n=L),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var a=-1,i=wr(gr((t-e)/(n||1)),0),o=qo(i);++a<i;)o[a]=e,e+=n;return o}function Bo(e,t,n){if(e=vr(e),1>e||!br(e))return[];var a=-1,i=qo(xr(e,Er));for(t=rn(t,n,1);++a<e;)Er>a?i[a]=t(a):t(a);return i}function Fo(e){var t=++nr;return s(e)+t}function Oo(e,t){return(+e||0)+(+t||0)}function zo(e,t,n){return n&&Qn(e,t,n)&&(t=L),t=qn(t,n,3),1==t.length?pt(Es(e)?e:ua(e),t):Jt(e,t)}e=e?at.defaults(nt.Object(),e,at.pick(nt,ze)):nt;var qo=e.Array,$o=e.Date,Uo=e.Error,Ho=e.Function,Go=e.Math,Wo=e.Number,Vo=e.Object,Zo=e.RegExp,Yo=e.String,Ko=e.TypeError,Xo=qo.prototype,Jo=Vo.prototype,Qo=Yo.prototype,er=Ho.prototype.toString,tr=Jo.hasOwnProperty,nr=0,ar=Jo.toString,ir=nt._,or=Zo("^"+er.call(tr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rr=e.ArrayBuffer,sr=e.clearTimeout,lr=e.parseFloat,cr=Go.pow,ur=Jo.propertyIsEnumerable,dr=Gn(e,"Set"),hr=e.setTimeout,pr=Xo.splice,fr=e.Uint8Array,mr=Gn(e,"WeakMap"),gr=Go.ceil,_r=Gn(Vo,"create"),vr=Go.floor,yr=Gn(qo,"isArray"),br=e.isFinite,kr=Gn(Vo,"keys"),wr=Go.max,xr=Go.min,Cr=Gn($o,"now"),Lr=e.parseInt,Ir=Go.random,Tr=Wo.NEGATIVE_INFINITY,Sr=Wo.POSITIVE_INFINITY,Er=4294967295,Pr=Er-1,jr=Er>>>1,Mr=9007199254740991,Ar=mr&&new mr,Dr={};t.support={};t.templateSettings={escape:ke,evaluate:we,interpolate:xe,variable:"",imports:{_:t}};var Rr=function(){function e(){}return function(t){if(Di(t)){e.prototype=t;var n=new e;e.prototype=L}return n||{}}}(),Nr=hn(jt),Br=hn(Mt,!0),Fr=pn(),Or=pn(!0),zr=Ar?function(e,t){return Ar.set(e,t),e}:So,qr=Ar?function(e){return Ar.get(e)}:Ao,$r=Ut("length"),Ur=function(){var e=0,t=0;return function(n,a){var i=ms(),o=O-(i-t);if(t=i,o>0){if(++e>=F)return n}else e=0;return zr(n,a)}}(),Hr=_i(function(e,t){return _(e)&&Xn(e)?xt(e,Et(t,!1,!0)):[]}),Gr=wn(),Wr=wn(!0),Vr=_i(function(e){for(var t=e.length,n=t,a=qo(d),i=Un(),r=i==o,s=[];n--;){var l=e[n]=Xn(l=e[n])?l:[];a[n]=r&&l.length>=120?mn(n&&l):null}var c=e[0],u=-1,d=c?c.length:0,h=a[0];e:for(;++u<d;)if(l=c[u],(h?Xe(h,l):i(s,l,0))<0){for(var n=t;--n;){var p=a[n];if((p?Xe(p,l):i(e[n],l,0))<0)continue e}h&&h.push(l),s.push(l)}return s}),Zr=_i(function(e,t){t=Et(t);var n=vt(e,t);return Gt(e,t.sort(a)),n}),Yr=Nn(),Kr=Nn(!0),Xr=_i(function(e){return Qt(Et(e,!1,!0))}),Jr=_i(function(e,t){return Xn(e)?xt(e,t):[]}),Qr=_i(Ba),es=_i(function(e){var t=e.length,n=t>2?e[t-2]:L,a=t>1?e[t-1]:L;return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof a?(--t,a):L,a=L),e.length=t,Fa(e,n,a)}),ts=_i(function(e){return e=Et(e),this.thru(function(t){return Qe(Es(t)?t:[da(t)],e)})}),ns=_i(function(e,t){return vt(e,Et(t))}),as=un(function(e,t,n){tr.call(e,n)?++e[n]:e[n]=1}),is=kn(Nr),os=kn(Br,!0),rs=Ln(tt,Nr),ss=Ln(it,Br),ls=un(function(e,t,n){tr.call(e,n)?e[n].push(t):e[n]=[t]}),cs=un(function(e,t,n){e[n]=t}),us=_i(function(e,t,n){var a=-1,i="function"==typeof t,o=ea(t),r=Xn(e)?qo(e.length):[];return Nr(e,function(e){var s=i?t:o&&null!=e?e[t]:L;r[++a]=s?s.apply(e,n):Kn(e,t,n)}),r}),ds=un(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),hs=jn(ut,Nr),ps=jn(dt,Br),fs=_i(function(e,t){if(null==e)return[];var n=t[2];return n&&Qn(t[0],t[1],n)&&(t.length=1),Xt(e,Et(t),[])}),ms=Cr||function(){return(new $o).getTime()},gs=_i(function(e,t,n){var a=T;if(n.length){var i=y(n,gs.placeholder);a|=M}return Bn(e,a,t,n,i)}),_s=_i(function(e,t){t=t.length?Et(t):Ki(e);for(var n=-1,a=t.length;++n<a;){var i=t[n];e[i]=Bn(e[i],T,e)}return e}),vs=_i(function(e,t,n){var a=T|S;if(n.length){var i=y(n,vs.placeholder);a|=M}return Bn(t,a,e,n,i)}),ys=vn(P),bs=vn(j),ks=_i(function(e,t){return wt(e,1,t)}),ws=_i(function(e,t,n){return wt(e,t,n)}),xs=Cn(),Cs=Cn(!0),Ls=_i(function(e,t){if(t=Et(t),"function"!=typeof e||!ot(t,r))throw new Ko(U);var n=t.length;return _i(function(a){for(var i=xr(a.length,n);i--;)a[i]=t[i](a[i]);return e.apply(this,a)})}),Is=Pn(M),Ts=Pn(A),Ss=_i(function(e,t){return Bn(e,R,L,L,L,Et(t))}),Es=yr||function(e){return _(e)&&na(e.length)&&ar.call(e)==W},Ps=dn(qt),js=dn(function(e,t,n){return n?gt(e,t,n):_t(e,t)}),Ms=yn(js,ft),As=yn(Ps,oa),Ds=xn(jt),Rs=xn(Mt),Ns=In(Fr),Bs=In(Or),Fs=Tn(jt),Os=Tn(Mt),zs=kr?function(e){var t=null==e?L:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Xn(e)?ca(e):Di(e)?kr(e):[]}:ca,qs=Sn(!0),$s=Sn(),Us=_i(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=lt(Et(t),Yo);return ra(e,xt(eo(e),t))}var n=rn(t[0],t[1],3);return sa(e,function(e,t,a){return!n(e,t,a)})}),Hs=_i(function(e,t){return null==e?{}:"function"==typeof t[0]?sa(e,rn(t[0],t[1],3)):ra(e,Et(t))}),Gs=gn(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Ws=gn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Vs=En(),Zs=En(!0),Ys=gn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Ks=gn(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Xs=_i(function(e,t){try{return e.apply(L,t)}catch(n){return ji(n)?n:new Uo(n)}}),Js=_i(function(e,t){return function(n){return Kn(n,e,t)}}),Qs=_i(function(e,t){return function(n){return Kn(e,n,t)}}),el=Rn("ceil"),tl=Rn("floor"),nl=bn(xi,Tr),al=bn(Gi,Sr),il=Rn("round");return t.prototype=n.prototype,v.prototype=Rr(n.prototype),v.prototype.constructor=v,X.prototype=Rr(n.prototype),X.prototype.constructor=X,Ge.prototype["delete"]=We,Ge.prototype.get=Ve,Ge.prototype.has=Ze,Ge.prototype.set=Ye,Ke.prototype.push=Je,fi.Cache=Ge,t.after=ui,t.ary=di,t.assign=js,t.at=ns,t.before=hi,t.bind=gs,t.bindAll=_s,t.bindKey=vs,t.callback=Io,t.chain=qa,t.chunk=fa,t.compact=ma,t.constant=To,t.countBy=as,t.create=Yi,t.curry=ys,t.curryRight=bs,t.debounce=pi,t.defaults=Ms,t.defaultsDeep=As,t.defer=ks,t.delay=ws,t.difference=Hr,t.drop=ga,t.dropRight=_a,t.dropRightWhile=va,t.dropWhile=ya,t.fill=ba,t.filter=Xa,t.flatten=wa,t.flattenDeep=xa,t.flow=xs,t.flowRight=Cs,t.forEach=rs,t.forEachRight=ss,t.forIn=Ns,t.forInRight=Bs,t.forOwn=Fs,t.forOwnRight=Os,t.functions=Ki,t.groupBy=ls,t.indexBy=cs,t.initial=La,t.intersection=Vr,t.invert=Qi,t.invoke=us,t.keys=zs,t.keysIn=eo,t.map=ei,t.mapKeys=qs,t.mapValues=$s,t.matches=Eo,t.matchesProperty=Po,t.memoize=fi,t.merge=Ps,t.method=Js,t.methodOf=Qs,t.mixin=jo,t.modArgs=Ls,t.negate=mi,t.omit=Us,t.once=gi,t.pairs=to,t.partial=Is,t.partialRight=Ts,t.partition=ds,t.pick=Hs,t.pluck=ti,t.property=Do,t.propertyOf=Ro,t.pull=Sa,t.pullAt=Zr,t.range=No,t.rearg=Ss,t.reject=ni,t.remove=Ea,t.rest=Pa,t.restParam=_i,t.set=ao,t.shuffle=ii,t.slice=ja,t.sortBy=si,t.sortByAll=fs,t.sortByOrder=li,t.spread=vi,t.take=Ma,t.takeRight=Aa,t.takeRightWhile=Da,t.takeWhile=Ra,t.tap=$a,t.throttle=yi,t.thru=Ua,t.times=Bo,t.toArray=Vi,t.toPlainObject=Zi,t.transform=io,t.union=Xr,t.uniq=Na,t.unzip=Ba,t.unzipWith=Fa,t.values=oo,t.valuesIn=ro,t.where=ci,t.without=Jr,t.wrap=bi,t.xor=Oa,t.zip=Qr,t.zipObject=za,t.zipWith=es,t.backflow=Cs,t.collect=ei,t.compose=Cs,t.each=rs,t.eachRight=ss,t.extend=js,t.iteratee=Io,t.methods=Ki,t.object=za,t.select=Xa,t.tail=Pa,t.unique=Na,jo(t,t),t.add=Oo,t.attempt=Xs,t.camelCase=Gs,t.capitalize=co,t.ceil=el,t.clone=ki,t.cloneDeep=wi,t.deburr=uo,t.endsWith=ho,t.escape=po,t.escapeRegExp=fo,t.every=Ka,t.find=is,t.findIndex=Gr,t.findKey=Ds,t.findLast=os,t.findLastIndex=Wr,t.findLastKey=Rs,t.findWhere=Ja,t.first=ka,t.floor=tl,t.get=Xi,t.gt=xi,t.gte=Ci,t.has=Ji,t.identity=So,t.includes=Qa,t.indexOf=Ca,t.inRange=so,t.isArguments=Li,t.isArray=Es,t.isBoolean=Ii,t.isDate=Ti,t.isElement=Si,t.isEmpty=Ei,t.isEqual=Pi,t.isError=ji,t.isFinite=Mi,t.isFunction=Ai,t.isMatch=Ri,t.isNaN=Ni,t.isNative=Bi,t.isNull=Fi,t.isNumber=Oi,t.isObject=Di,t.isPlainObject=zi,t.isRegExp=qi,t.isString=$i,t.isTypedArray=Ui,t.isUndefined=Hi,t.kebabCase=Ws,t.last=Ia,t.lastIndexOf=Ta,t.lt=Gi,t.lte=Wi,t.max=nl,t.min=al,t.noConflict=Mo,t.noop=Ao,t.now=ms,t.pad=mo,t.padLeft=Vs,t.padRight=Zs,t.parseInt=go,t.random=lo,t.reduce=hs,t.reduceRight=ps,t.repeat=_o,t.result=no,t.round=il,t.runInContext=C,t.size=oi,t.snakeCase=Ys,t.some=ri,t.sortedIndex=Yr,t.sortedLastIndex=Kr,t.startCase=Ks,t.startsWith=vo,t.sum=zo,t.template=yo,t.trim=bo,t.trimLeft=ko,t.trimRight=wo,t.trunc=xo,t.unescape=Co,t.uniqueId=Fo,t.words=Lo,t.all=Ka,t.any=ri,t.contains=Qa,t.eq=Pi,t.detect=is,t.foldl=hs,t.foldr=ps,t.head=ka,t.include=Qa,t.inject=hs,jo(t,function(){var e={};return jt(t,function(n,a){t.prototype[a]||(e[a]=n)}),e}(),!1),t.sample=ai,t.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return ai(t,e)}):ai(this.value())},t.VERSION=I,tt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){t[e].placeholder=t}),tt(["drop","take"],function(e,t){X.prototype[e]=function(n){var a=this.__filtered__;if(a&&!t)return new X(this);n=null==n?1:wr(vr(n)||0,0);var i=this.clone();return a?i.__takeCount__=xr(i.__takeCount__,n):i.__views__.push({size:n,type:e+(i.__dir__<0?"Right":"")}),i},X.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),tt(["filter","map","takeWhile"],function(e,t){var n=t+1,a=n!=$;X.prototype[e]=function(e,t){var i=this.clone();return i.__iteratees__.push({iteratee:qn(e,t,1),type:n}),i.__filtered__=i.__filtered__||a,i}}),tt(["first","last"],function(e,t){var n="take"+(t?"Right":"");X.prototype[e]=function(){return this[n](1).value()[0]}}),tt(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");X.prototype[e]=function(){return this.__filtered__?new X(this):this[n](1)}}),tt(["pluck","where"],function(e,t){var n=t?"filter":"map",a=t?Ot:Do;X.prototype[e]=function(e){return this[n](a(e))}}),X.prototype.compact=function(){return this.filter(So)},X.prototype.reject=function(e,t){return e=qn(e,t,1),this.filter(function(t){return!e(t)})},X.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(e>0||0>t)?new X(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==L&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n)},X.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},X.prototype.toArray=function(){return this.take(Sr)},jt(X.prototype,function(e,n){var a=/^(?:filter|map|reject)|While$/.test(n),i=/^(?:first|last)$/.test(n),o=t[i?"take"+("last"==n?"Right":""):n];o&&(t.prototype[n]=function(){var t=i?[1]:arguments,n=this.__chain__,r=this.__wrapped__,s=!!this.__actions__.length,l=r instanceof X,c=t[0],u=l||Es(r);u&&a&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=function(e){return i&&n?o(e,1)[0]:o.apply(L,ct([e],t))},h={func:Ua,args:[d],thisArg:L},p=l&&!s;if(i&&!n)return p?(r=r.clone(),r.__actions__.push(h),e.call(r)):o.call(L,this.value())[0];if(!i&&u){r=p?r:new X(this);var f=e.apply(r,t);return f.__actions__.push(h),new v(f,n)}return this.thru(d)})}),tt(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var n=(/^(?:replace|split)$/.test(e)?Qo:Xo)[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(e);t.prototype[e]=function(){var e=arguments;return i&&!this.__chain__?n.apply(this.value(),e):this[a](function(t){return n.apply(t,e)})}}),jt(X.prototype,function(e,n){var a=t[n];if(a){var i=a.name,o=Dr[i]||(Dr[i]=[]);o.push({name:n,func:a})}}),Dr[Mn(L,S).name]=[{name:"wrapper",func:L}],X.prototype.clone=te,X.prototype.reverse=ae,X.prototype.value=He,t.prototype.chain=Ha,t.prototype.commit=Ga,t.prototype.concat=ts,t.prototype.plant=Wa,t.prototype.reverse=Va,t.prototype.toString=Za,t.prototype.run=t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=Ya,t.prototype.collect=t.prototype.map,t.prototype.head=t.prototype.first,t.prototype.select=t.prototype.filter,t.prototype.tail=t.prototype.rest,t}var L,I="3.10.1",T=1,S=2,E=4,P=8,j=16,M=32,A=64,D=128,R=256,N=30,B="...",F=150,O=16,z=200,q=1,$=2,U="Expected a function",H="__lodash_placeholder__",G="[object Arguments]",W="[object Array]",V="[object Boolean]",Z="[object Date]",Y="[object Error]",K="[object Function]",X="[object Map]",J="[object Number]",Q="[object Object]",ee="[object RegExp]",te="[object Set]",ne="[object String]",ae="[object WeakMap]",ie="[object ArrayBuffer]",oe="[object Float32Array]",re="[object Float64Array]",se="[object Int8Array]",le="[object Int16Array]",ce="[object Int32Array]",ue="[object Uint8Array]",de="[object Uint8ClampedArray]",he="[object Uint16Array]",pe="[object Uint32Array]",fe=/\b__p \+= '';/g,me=/\b(__p \+=) '' \+/g,ge=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_e=/&(?:amp|lt|gt|quot|#39|#96);/g,ve=/[&<>"'`]/g,ye=RegExp(_e.source),be=RegExp(ve.source),ke=/<%-([\s\S]+?)%>/g,we=/<%([\s\S]+?)%>/g,xe=/<%=([\s\S]+?)%>/g,Ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Le=/^\w*$/,Ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Te=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Se=RegExp(Te.source),Ee=/[\u0300-\u036f\ufe20-\ufe23]/g,Pe=/\\(\\)?/g,je=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Me=/\w*$/,Ae=/^0[xX]/,De=/^\[object .+?Constructor\]$/,Re=/^\d+$/,Ne=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Be=/($^)/,Fe=/['\n\r\u2028\u2029\\]/g,Oe=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),ze=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],qe=-1,$e={};$e[oe]=$e[re]=$e[se]=$e[le]=$e[ce]=$e[ue]=$e[de]=$e[he]=$e[pe]=!0,$e[G]=$e[W]=$e[ie]=$e[V]=$e[Z]=$e[Y]=$e[K]=$e[X]=$e[J]=$e[Q]=$e[ee]=$e[te]=$e[ne]=$e[ae]=!1;var Ue={};Ue[G]=Ue[W]=Ue[ie]=Ue[V]=Ue[Z]=Ue[oe]=Ue[re]=Ue[se]=Ue[le]=Ue[ce]=Ue[J]=Ue[Q]=Ue[ee]=Ue[ne]=Ue[ue]=Ue[de]=Ue[he]=Ue[pe]=!0,Ue[Y]=Ue[K]=Ue[X]=Ue[te]=Ue[ae]=!1;var He={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Ge={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},We={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ve={"function":!0,object:!0},Ze={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Ye={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ke=Ve[typeof n]&&n&&!n.nodeType&&n,Xe=Ve[typeof t]&&t&&!t.nodeType&&t,Je=Ke&&Xe&&"object"==typeof e&&e&&e.Object&&e,Qe=Ve[typeof self]&&self&&self.Object&&self,et=Ve[typeof window]&&window&&window.Object&&window,tt=Xe&&Xe.exports===Ke&&Ke,nt=Je||et!==(this&&this.window)&&et||Qe||this,at=C();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(nt._=at,define(function(){return at})):Ke&&Xe?tt?(Xe.exports=at)._=at:Ke._=at:nt._=at}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],moment:[function(e,t,n){!function(e,a){"object"==typeof n&&void 0!==t?t.exports=a():"function"==typeof define&&define.amd?define(a):e.moment=a()}(this,function(){"use strict";function n(){return Nn.apply(null,arguments)}function a(e){Nn=e}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function r(e,t){var n,a=[];for(n=0;n<e.length;++n)a.push(t(e[n],n));return a}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function c(e,t,n,a){return Pe(e,t,n,a,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function d(e){return null==e._pf&&(e._pf=u()),e._pf}function h(e){if(null==e._isValid){var t=d(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function p(e){var t=c(NaN);return null!=e?l(d(t),e):d(t).userInvalidated=!0,t}function f(e,t){var n,a,i;if(void 0!==t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),void 0!==t._i&&(e._i=t._i),void 0!==t._f&&(e._f=t._f),void 0!==t._l&&(e._l=t._l),void 0!==t._strict&&(e._strict=t._strict),void 0!==t._tzm&&(e._tzm=t._tzm),void 0!==t._isUTC&&(e._isUTC=t._isUTC),void 0!==t._offset&&(e._offset=t._offset),void 0!==t._pf&&(e._pf=d(t)),void 0!==t._locale&&(e._locale=t._locale),Fn.length>0)for(n in Fn)a=Fn[n],i=t[a],void 0!==i&&(e[a]=i);return e}function m(e){f(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),On===!1&&(On=!0,n.updateOffset(this),On=!1)}function g(e){return e instanceof m||null!=e&&null!=e._isAMomentObject}function _(e){return 0>e?Math.ceil(e):Math.floor(e);
}function v(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=_(t)),n}function y(e,t,n){var a,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),r=0;for(a=0;i>a;a++)(n&&e[a]!==t[a]||!n&&v(e[a])!==v(t[a]))&&r++;return r+o}function b(){}function k(e){return e?e.toLowerCase().replace("_","-"):e}function w(e){for(var t,n,a,i,o=0;o<e.length;){for(i=k(e[o]).split("-"),t=i.length,n=k(e[o+1]),n=n?n.split("-"):null;t>0;){if(a=x(i.slice(0,t).join("-")))return a;if(n&&n.length>=t&&y(i,n,!0)>=t-1)break;t--}o++}return null}function x(n){var a=null;if(!zn[n]&&void 0!==t&&t&&t.exports)try{a=Bn._abbr,e("./locale/"+n),C(a)}catch(i){}return zn[n]}function C(e,t){var n;return e&&(n=void 0===t?I(e):L(e,t),n&&(Bn=n)),Bn._abbr}function L(e,t){return null!==t?(t.abbr=e,zn[e]=zn[e]||new b,zn[e].set(t),C(e),zn[e]):(delete zn[e],null)}function I(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Bn;if(!i(e)){if(t=x(e))return t;e=[e]}return w(e)}function T(e,t){var n=e.toLowerCase();qn[n]=qn[n+"s"]=qn[t]=e}function S(e){return"string"==typeof e?qn[e]||qn[e.toLowerCase()]:void 0}function E(e){var t,n,a={};for(n in e)s(e,n)&&(t=S(n),t&&(a[t]=e[n]));return a}function P(e,t){return function(a){return null!=a?(M(this,e,a),n.updateOffset(this,t),this):j(this,e)}}function j(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function M(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function A(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=S(e),"function"==typeof this[e])return this[e](t);return this}function D(e,t,n){var a=""+Math.abs(e),i=t-a.length,o=e>=0;return(o?n?"+":"":"-")+(""+Math.pow(10,Math.max(0,i))).substr(1)+a}function R(e,t,n,a){var i=a;"string"==typeof a&&(i=function(){return this[a]()}),e&&(Gn[e]=i),t&&(Gn[t[0]]=function(){return D(i.apply(this,arguments),t[1],t[2])}),n&&(Gn[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function N(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function B(e){var t,n,a=e.match($n);for(t=0,n=a.length;n>t;t++)Gn[a[t]]?a[t]=Gn[a[t]]:a[t]=N(a[t]);return function(i){var o="";for(t=0;n>t;t++)o+=a[t]instanceof Function?a[t].call(i,e):a[t];return o}}function F(e,t){return e.isValid()?(t=O(t,e.localeData()),Hn[t]=Hn[t]||B(t),Hn[t](e)):e.localeData().invalidDate()}function O(e,t){function n(e){return t.longDateFormat(e)||e}var a=5;for(Un.lastIndex=0;a>=0&&Un.test(e);)e=e.replace(Un,n),Un.lastIndex=0,a-=1;return e}function z(e){return"function"==typeof e&&"[object Function]"===Object.prototype.toString.call(e)}function q(e,t,n){ra[e]=z(t)?t:function(e){return e&&n?n:t}}function $(e,t){return s(ra,e)?ra[e](t._strict,t._locale):RegExp(U(e))}function U(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,a,i){return t||n||a||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function H(e,t){var n,a=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(a=function(e,n){n[t]=v(e)}),n=0;n<e.length;n++)sa[e[n]]=a}function G(e,t){H(e,function(e,n,a,i){a._w=a._w||{},t(e,a._w,a,i)})}function W(e,t,n){null!=t&&s(sa,e)&&sa[e](t,n._a,n,e)}function V(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function Z(e){return this._months[e.month()]}function Y(e){return this._monthsShort[e.month()]}function K(e,t,n){var a,i,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;12>a;a++){if(i=c([2e3,a]),n&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[a]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[a]=RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[a].test(e))return a;if(n&&"MMM"===t&&this._shortMonthsParse[a].test(e))return a;if(!n&&this._monthsParse[a].test(e))return a}}function X(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),V(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function J(e){return null!=e?(X(this,e),n.updateOffset(this,!0),this):j(this,"Month")}function Q(){return V(this.year(),this.month())}function ee(e){var t,n=e._a;return n&&-2===d(e).overflow&&(t=n[ca]<0||n[ca]>11?ca:n[ua]<1||n[ua]>V(n[la],n[ca])?ua:n[da]<0||n[da]>24||24===n[da]&&(0!==n[ha]||0!==n[pa]||0!==n[fa])?da:n[ha]<0||n[ha]>59?ha:n[pa]<0||n[pa]>59?pa:n[fa]<0||n[fa]>999?fa:-1,d(e)._overflowDayOfYear&&(la>t||t>ua)&&(t=ua),d(e).overflow=t),e}function te(e){n.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function ne(e,t){var n=!0;return l(function(){return n&&(te(e+"\n"+Error().stack),n=!1),t.apply(this,arguments)},t)}function ae(e,t){_a[e]||(te(t),_a[e]=!0)}function ie(e){var t,n,a=e._i,i=va.exec(a);if(i){for(d(e).iso=!0,t=0,n=ya.length;n>t;t++)if(ya[t][1].exec(a)){e._f=ya[t][0];break}for(t=0,n=ba.length;n>t;t++)if(ba[t][1].exec(a)){e._f+=(i[6]||" ")+ba[t][0];break}a.match(aa)&&(e._f+="Z"),xe(e)}else e._isValid=!1}function oe(e){var t=ka.exec(e._i);return null!==t?void(e._d=new Date(+t[1])):(ie(e),void(e._isValid===!1&&(delete e._isValid,n.createFromInputFallback(e))))}function re(e,t,n,a,i,o,r){var s=new Date(e,t,n,a,i,o,r);return 1970>e&&s.setFullYear(e),s}function se(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function le(e){return ce(e)?366:365}function ce(e){return e%4===0&&e%100!==0||e%400===0}function ue(){return ce(this.year())}function de(e,t,n){var a,i=n-t,o=n-e.day();return o>i&&(o-=7),i-7>o&&(o+=7),a=je(e).add(o,"d"),{week:Math.ceil(a.dayOfYear()/7),year:a.year()}}function he(e){return de(e,this._week.dow,this._week.doy).week}function pe(){return this._week.dow}function fe(){return this._week.doy}function me(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function ge(e){var t=de(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function _e(e,t,n,a,i){var o,r=6+i-a,s=se(e,0,1+r),l=s.getUTCDay();return i>l&&(l+=7),n=null!=n?1*n:i,o=1+r+7*(t-1)-l+n,{year:o>0?e:e-1,dayOfYear:o>0?o:le(e-1)+o}}function ve(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function ye(e,t,n){return null!=e?e:null!=t?t:n}function be(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function ke(e){var t,n,a,i,o=[];if(!e._d){for(a=be(e),e._w&&null==e._a[ua]&&null==e._a[ca]&&we(e),e._dayOfYear&&(i=ye(e._a[la],a[la]),e._dayOfYear>le(i)&&(d(e)._overflowDayOfYear=!0),n=se(i,0,e._dayOfYear),e._a[ca]=n.getUTCMonth(),e._a[ua]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=o[t]=a[t];for(;7>t;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[da]&&0===e._a[ha]&&0===e._a[pa]&&0===e._a[fa]&&(e._nextDay=!0,e._a[da]=0),e._d=(e._useUTC?se:re).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[da]=24)}}function we(e){var t,n,a,i,o,r,s;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(o=1,r=4,n=ye(t.GG,e._a[la],de(je(),1,4).year),a=ye(t.W,1),i=ye(t.E,1)):(o=e._locale._week.dow,r=e._locale._week.doy,n=ye(t.gg,e._a[la],de(je(),o,r).year),a=ye(t.w,1),null!=t.d?(i=t.d,o>i&&++a):i=null!=t.e?t.e+o:o),s=_e(n,a,i,r,o),e._a[la]=s.year,e._dayOfYear=s.dayOfYear}function xe(e){if(e._f===n.ISO_8601)return void ie(e);e._a=[],d(e).empty=!0;var t,a,i,o,r,s=""+e._i,l=s.length,c=0;for(i=O(e._f,e._locale).match($n)||[],t=0;t<i.length;t++)o=i[t],a=(s.match($(o,e))||[])[0],a&&(r=s.substr(0,s.indexOf(a)),r.length>0&&d(e).unusedInput.push(r),s=s.slice(s.indexOf(a)+a.length),c+=a.length),Gn[o]?(a?d(e).empty=!1:d(e).unusedTokens.push(o),W(o,a,e)):e._strict&&!a&&d(e).unusedTokens.push(o);d(e).charsLeftOver=l-c,s.length>0&&d(e).unusedInput.push(s),d(e).bigHour===!0&&e._a[da]<=12&&e._a[da]>0&&(d(e).bigHour=void 0),e._a[da]=Ce(e._locale,e._a[da],e._meridiem),ke(e),ee(e)}function Ce(e,t,n){var a;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(a=e.isPM(n),a&&12>t&&(t+=12),a||12!==t||(t=0),t):t}function Le(e){var t,n,a,i,o;if(0===e._f.length)return d(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],xe(t),h(t)&&(o+=d(t).charsLeftOver,o+=10*d(t).unusedTokens.length,d(t).score=o,(null==a||a>o)&&(a=o,n=t));l(e,n||t)}function Ie(e){if(!e._d){var t=E(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],ke(e)}}function Te(e){var t=new m(ee(Se(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Se(e){var t=e._i,n=e._f;return e._locale=e._locale||I(e._l),null===t||void 0===n&&""===t?p({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),g(t)?new m(ee(t)):(i(n)?Le(e):n?xe(e):o(t)?e._d=t:Ee(e),e))}function Ee(e){var t=e._i;void 0===t?e._d=new Date:o(t)?e._d=new Date(+t):"string"==typeof t?oe(e):i(t)?(e._a=r(t.slice(0),function(e){return parseInt(e,10)}),ke(e)):"object"==typeof t?Ie(e):"number"==typeof t?e._d=new Date(t):n.createFromInputFallback(e)}function Pe(e,t,n,a,i){var o={};return"boolean"==typeof n&&(a=n,n=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=e,o._f=t,o._strict=a,Te(o)}function je(e,t,n,a){return Pe(e,t,n,a,!1)}function Me(e,t){var n,a;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return je();for(n=t[0],a=1;a<t.length;++a)t[a].isValid()&&!t[a][e](n)||(n=t[a]);return n}function Ae(){var e=[].slice.call(arguments,0);return Me("isBefore",e)}function De(){var e=[].slice.call(arguments,0);return Me("isAfter",e)}function Re(e){var t=E(e),n=t.year||0,a=t.quarter||0,i=t.month||0,o=t.week||0,r=t.day||0,s=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*s,this._days=+r+7*o,this._months=+i+3*a+12*n,this._data={},this._locale=I(),this._bubble()}function Ne(e){return e instanceof Re}function Be(e,t){R(e,0,0,function(){var e=this.utcOffset(),n="+";return 0>e&&(e=-e,n="-"),n+D(~~(e/60),2)+t+D(~~e%60,2)})}function Fe(e){var t=(e||"").match(aa)||[],n=t[t.length-1]||[],a=(n+"").match(Ia)||["-",0,0],i=+(60*a[1])+v(a[2]);return"+"===a[0]?i:-i}function Oe(e,t){var a,i;return t._isUTC?(a=t.clone(),i=(g(e)||o(e)?+e:+je(e))-+a,a._d.setTime(+a._d+i),n.updateOffset(a,!1),a):je(e).local()}function ze(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function qe(e,t){var a,i=this._offset||0;return null!=e?("string"==typeof e&&(e=Fe(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(a=ze(this)),this._offset=e,this._isUTC=!0,null!=a&&this.add(a,"m"),i!==e&&(!t||this._changeInProgress?at(this,Je(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:ze(this)}function $e(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ue(e){return this.utcOffset(0,e)}function He(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(ze(this),"m")),this}function Ge(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Fe(this._i)),this}function We(e){return e=e?je(e).utcOffset():0,(this.utcOffset()-e)%60===0}function Ve(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ze(){if(void 0!==this._isDSTShifted)return this._isDSTShifted;var e={};if(f(e,this),e=Se(e),e._a){var t=e._isUTC?c(e._a):je(e._a);this._isDSTShifted=this.isValid()&&y(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ye(){return!this._isUTC}function Ke(){return this._isUTC}function Xe(){return this._isUTC&&0===this._offset}function Je(e,t){var n,a,i,o=e,r=null;return Ne(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(r=Ta.exec(e))?(n="-"===r[1]?-1:1,o={y:0,d:v(r[ua])*n,h:v(r[da])*n,m:v(r[ha])*n,s:v(r[pa])*n,ms:v(r[fa])*n}):(r=Sa.exec(e))?(n="-"===r[1]?-1:1,o={y:Qe(r[2],n),M:Qe(r[3],n),d:Qe(r[4],n),h:Qe(r[5],n),m:Qe(r[6],n),s:Qe(r[7],n),w:Qe(r[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=tt(je(o.from),je(o.to)),o={},o.ms=i.milliseconds,o.M=i.months),a=new Re(o),Ne(e)&&s(e,"_locale")&&(a._locale=e._locale),a}function Qe(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function et(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function tt(e,t){var n;return t=Oe(t,e),e.isBefore(t)?n=et(e,t):(n=et(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function nt(e,t){return function(n,a){var i,o;return null===a||isNaN(+a)||(ae(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=a,a=o),n="string"==typeof n?+n:n,i=Je(n,a),at(this,i,e),this}}function at(e,t,a,i){var o=t._milliseconds,r=t._days,s=t._months;i=null==i?!0:i,o&&e._d.setTime(+e._d+o*a),r&&M(e,"Date",j(e,"Date")+r*a),s&&X(e,j(e,"Month")+s*a),i&&n.updateOffset(e,r||s)}function it(e,t){var n=e||je(),a=Oe(n,this).startOf("day"),i=this.diff(a,"days",!0),o=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(t&&t[o]||this.localeData().calendar(o,this,je(n)))}function ot(){return new m(this)}function rt(e,t){var n;return t=S(void 0!==t?t:"millisecond"),"millisecond"===t?(e=g(e)?e:je(e),+this>+e):(n=g(e)?+e:+je(e),n<+this.clone().startOf(t))}function st(e,t){var n;return t=S(void 0!==t?t:"millisecond"),"millisecond"===t?(e=g(e)?e:je(e),+e>+this):(n=g(e)?+e:+je(e),+this.clone().endOf(t)<n)}function lt(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function ct(e,t){var n;return t=S(t||"millisecond"),"millisecond"===t?(e=g(e)?e:je(e),+this===+e):(n=+je(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function ut(e,t,n){var a,i,o=Oe(e,this),r=6e4*(o.utcOffset()-this.utcOffset());return t=S(t),"year"===t||"month"===t||"quarter"===t?(i=dt(this,o),"quarter"===t?i/=3:"year"===t&&(i/=12)):(a=this-o,i="second"===t?a/1e3:"minute"===t?a/6e4:"hour"===t?a/36e5:"day"===t?(a-r)/864e5:"week"===t?(a-r)/6048e5:a),n?i:_(i)}function dt(e,t){var n,a,i=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(i,"months");return 0>t-o?(n=e.clone().add(i-1,"months"),a=(t-o)/(o-n)):(n=e.clone().add(i+1,"months"),a=(t-o)/(n-o)),-(i+a)}function ht(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function pt(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():F(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ft(e){var t=F(this,e||n.defaultFormat);return this.localeData().postformat(t)}function mt(e,t){return this.isValid()?Je({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function gt(e){return this.from(je(),e)}function _t(e,t){return this.isValid()?Je({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function vt(e){return this.to(je(),e)}function yt(e){var t;return void 0===e?this._locale._abbr:(t=I(e),null!=t&&(this._locale=t),this)}function bt(){return this._locale}function kt(e){switch(e=S(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function wt(e){return e=S(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function xt(){return+this._d-6e4*(this._offset||0)}function Ct(){return Math.floor(+this/1e3)}function Lt(){return this._offset?new Date(+this):this._d}function It(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Tt(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function St(){return h(this)}function Et(){return l({},d(this))}function Pt(){return d(this).overflow}function jt(e,t){R(0,[e,e.length],0,t)}function Mt(e,t,n){return de(je([e,11,31+t-n]),t,n).week}function At(e){var t=de(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function Dt(e){var t=de(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Rt(){return Mt(this.year(),1,4)}function Nt(){var e=this.localeData()._week;return Mt(this.year(),e.dow,e.doy)}function Bt(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Ft(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Ot(e){return this._weekdays[e.day()]}function zt(e){return this._weekdaysShort[e.day()]}function qt(e){return this._weekdaysMin[e.day()]}function $t(e){var t,n,a;for(this._weekdaysParse=this._weekdaysParse||[],t=0;7>t;t++)if(this._weekdaysParse[t]||(n=je([2e3,1]).day(t),a="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=RegExp(a.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function Ut(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Ft(e,this.localeData()),this.add(e-t,"d")):t}function Ht(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Gt(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function Wt(e,t){R(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Vt(e,t){return t._meridiemParse}function Zt(e){return"p"===(e+"").toLowerCase().charAt(0)}function Yt(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Kt(e,t){t[fa]=v(1e3*("0."+e))}function Xt(){return this._isUTC?"UTC":""}function Jt(){return this._isUTC?"Coordinated Universal Time":""}function Qt(e){return je(1e3*e)}function en(){return je.apply(null,arguments).parseZone()}function tn(e,t,n){var a=this._calendar[e];return"function"==typeof a?a.call(t,n):a}function nn(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function an(){return this._invalidDate}function on(e){return this._ordinal.replace("%d",e)}function rn(e){return e}function sn(e,t,n,a){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,a):i.replace(/%d/i,e)}function ln(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)}function cn(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function un(e,t,n,a){var i=I(),o=c().set(a,t);return i[n](o,e)}function dn(e,t,n,a,i){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return un(e,t,n,i);var o,r=[];for(o=0;a>o;o++)r[o]=un(e,o,n,i);return r}function hn(e,t){return dn(e,t,"months",12,"month")}function pn(e,t){return dn(e,t,"monthsShort",12,"month")}function fn(e,t){return dn(e,t,"weekdays",7,"day")}function mn(e,t){return dn(e,t,"weekdaysShort",7,"day")}function gn(e,t){return dn(e,t,"weekdaysMin",7,"day")}function _n(){var e=this._data;return this._milliseconds=Xa(this._milliseconds),this._days=Xa(this._days),this._months=Xa(this._months),e.milliseconds=Xa(e.milliseconds),e.seconds=Xa(e.seconds),e.minutes=Xa(e.minutes),e.hours=Xa(e.hours),e.months=Xa(e.months),e.years=Xa(e.years),this}function vn(e,t,n,a){var i=Je(t,n);return e._milliseconds+=a*i._milliseconds,e._days+=a*i._days,e._months+=a*i._months,e._bubble()}function yn(e,t){return vn(this,e,t,1)}function bn(e,t){return vn(this,e,t,-1)}function kn(e){return 0>e?Math.floor(e):Math.ceil(e)}function wn(){var e,t,n,a,i,o=this._milliseconds,r=this._days,s=this._months,l=this._data;return o>=0&&r>=0&&s>=0||0>=o&&0>=r&&0>=s||(o+=864e5*kn(Cn(s)+r),r=0,s=0),l.milliseconds=o%1e3,e=_(o/1e3),l.seconds=e%60,t=_(e/60),l.minutes=t%60,n=_(t/60),l.hours=n%24,r+=_(n/24),i=_(xn(r)),s+=i,r-=kn(Cn(i)),a=_(s/12),s%=12,l.days=r,l.months=s,l.years=a,this}function xn(e){return 4800*e/146097}function Cn(e){return 146097*e/4800}function Ln(e){var t,n,a=this._milliseconds;if(e=S(e),"month"===e||"year"===e)return t=this._days+a/864e5,n=this._months+xn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(Cn(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return 24*t+a/36e5;case"minute":return 1440*t+a/6e4;case"second":return 86400*t+a/1e3;case"millisecond":return Math.floor(864e5*t)+a;default:throw Error("Unknown unit "+e)}}function In(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)}function Tn(e){return function(){return this.as(e)}}function Sn(e){return e=S(e),this[e+"s"]()}function En(e){return function(){return this._data[e]}}function Pn(){return _(this.days()/7)}function jn(e,t,n,a,i){return i.relativeTime(t||1,!!n,e,a)}function Mn(e,t,n){var a=Je(e).abs(),i=pi(a.as("s")),o=pi(a.as("m")),r=pi(a.as("h")),s=pi(a.as("d")),l=pi(a.as("M")),c=pi(a.as("y")),u=i<fi.s&&["s",i]||1===o&&["m"]||o<fi.m&&["mm",o]||1===r&&["h"]||r<fi.h&&["hh",r]||1===s&&["d"]||s<fi.d&&["dd",s]||1===l&&["M"]||l<fi.M&&["MM",l]||1===c&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=n,jn.apply(null,u)}function An(e,t){return void 0===fi[e]?!1:void 0===t?fi[e]:(fi[e]=t,!0)}function Dn(e){var t=this.localeData(),n=Mn(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Rn(){var e,t,n,a=mi(this._milliseconds)/1e3,i=mi(this._days),o=mi(this._months);e=_(a/60),t=_(e/60),a%=60,e%=60,n=_(o/12),o%=12;var r=n,s=o,l=i,c=t,u=e,d=a,h=this.asSeconds();return h?(0>h?"-":"")+"P"+(r?r+"Y":"")+(s?s+"M":"")+(l?l+"D":"")+(c||u||d?"T":"")+(c?c+"H":"")+(u?u+"M":"")+(d?d+"S":""):"P0D"}var Nn,Bn,Fn=n.momentProperties=[],On=!1,zn={},qn={},$n=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Un=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Hn={},Gn={},Wn=/\d/,Vn=/\d\d/,Zn=/\d{3}/,Yn=/\d{4}/,Kn=/[+-]?\d{6}/,Xn=/\d\d?/,Jn=/\d{1,3}/,Qn=/\d{1,4}/,ea=/[+-]?\d{1,6}/,ta=/\d+/,na=/[+-]?\d+/,aa=/Z|[+-]\d\d:?\d\d/gi,ia=/[+-]?\d+(\.\d{1,3})?/,oa=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ra={},sa={},la=0,ca=1,ua=2,da=3,ha=4,pa=5,fa=6;R("M",["MM",2],"Mo",function(){return this.month()+1}),R("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),R("MMMM",0,0,function(e){return this.localeData().months(this,e)}),T("month","M"),q("M",Xn),q("MM",Xn,Vn),q("MMM",oa),q("MMMM",oa),H(["M","MM"],function(e,t){t[ca]=v(e)-1}),H(["MMM","MMMM"],function(e,t,n,a){var i=n._locale.monthsParse(e,a,n._strict);null!=i?t[ca]=i:d(n).invalidMonth=e});var ma="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ga="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),_a={};n.suppressDeprecationWarnings=!1;var va=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ya=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ba=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ka=/^\/?Date\((\-?\d+)/i;n.createFromInputFallback=ne("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),R(0,["YY",2],0,function(){return this.year()%100}),R(0,["YYYY",4],0,"year"),R(0,["YYYYY",5],0,"year"),R(0,["YYYYYY",6,!0],0,"year"),T("year","y"),q("Y",na),q("YY",Xn,Vn),q("YYYY",Qn,Yn),q("YYYYY",ea,Kn),q("YYYYYY",ea,Kn),H(["YYYYY","YYYYYY"],la),H("YYYY",function(e,t){t[la]=2===e.length?n.parseTwoDigitYear(e):v(e)}),H("YY",function(e,t){t[la]=n.parseTwoDigitYear(e)}),n.parseTwoDigitYear=function(e){return v(e)+(v(e)>68?1900:2e3)};var wa=P("FullYear",!1);R("w",["ww",2],"wo","week"),R("W",["WW",2],"Wo","isoWeek"),T("week","w"),T("isoWeek","W"),q("w",Xn),q("ww",Xn,Vn),q("W",Xn),q("WW",Xn,Vn),G(["w","ww","W","WW"],function(e,t,n,a){t[a.substr(0,1)]=v(e)});var xa={dow:0,doy:6};R("DDD",["DDDD",3],"DDDo","dayOfYear"),T("dayOfYear","DDD"),q("DDD",Jn),q("DDDD",Zn),H(["DDD","DDDD"],function(e,t,n){n._dayOfYear=v(e)}),n.ISO_8601=function(){};var Ca=ne("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=je.apply(null,arguments);return this>e?this:e}),La=ne("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=je.apply(null,arguments);return e>this?this:e});Be("Z",":"),Be("ZZ",""),q("Z",aa),q("ZZ",aa),H(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Fe(e)});var Ia=/([\+\-]|\d\d)/gi;n.updateOffset=function(){};var Ta=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Sa=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Je.fn=Re.prototype;var Ea=nt(1,"add"),Pa=nt(-1,"subtract");n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var ja=ne("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});R(0,["gg",2],0,function(){return this.weekYear()%100}),R(0,["GG",2],0,function(){return this.isoWeekYear()%100}),jt("gggg","weekYear"),jt("ggggg","weekYear"),jt("GGGG","isoWeekYear"),jt("GGGGG","isoWeekYear"),T("weekYear","gg"),T("isoWeekYear","GG"),q("G",na),q("g",na),q("GG",Xn,Vn),q("gg",Xn,Vn),q("GGGG",Qn,Yn),q("gggg",Qn,Yn),q("GGGGG",ea,Kn),q("ggggg",ea,Kn),G(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,a){t[a.substr(0,2)]=v(e)}),G(["gg","GG"],function(e,t,a,i){t[i]=n.parseTwoDigitYear(e)}),R("Q",0,0,"quarter"),T("quarter","Q"),q("Q",Wn),H("Q",function(e,t){t[ca]=3*(v(e)-1)}),R("D",["DD",2],"Do","date"),T("date","D"),q("D",Xn),q("DD",Xn,Vn),q("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),H(["D","DD"],ua),H("Do",function(e,t){t[ua]=v(e.match(Xn)[0],10)});var Ma=P("Date",!0);R("d",0,"do","day"),R("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),R("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),R("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),R("e",0,0,"weekday"),R("E",0,0,"isoWeekday"),T("day","d"),T("weekday","e"),T("isoWeekday","E"),q("d",Xn),q("e",Xn),q("E",Xn),q("dd",oa),q("ddd",oa),q("dddd",oa),G(["dd","ddd","dddd"],function(e,t,n){var a=n._locale.weekdaysParse(e);null!=a?t.d=a:d(n).invalidWeekday=e}),G(["d","e","E"],function(e,t,n,a){t[a]=v(e)});var Aa="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Da="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ra="Su_Mo_Tu_We_Th_Fr_Sa".split("_");R("H",["HH",2],0,"hour"),R("h",["hh",2],0,function(){return this.hours()%12||12}),Wt("a",!0),Wt("A",!1),T("hour","h"),q("a",Vt),q("A",Vt),q("H",Xn),q("h",Xn),q("HH",Xn,Vn),q("hh",Xn,Vn),H(["H","HH"],da),H(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),H(["h","hh"],function(e,t,n){t[da]=v(e),d(n).bigHour=!0});var Na=/[ap]\.?m?\.?/i,Ba=P("Hours",!0);R("m",["mm",2],0,"minute"),T("minute","m"),q("m",Xn),q("mm",Xn,Vn),H(["m","mm"],ha);var Fa=P("Minutes",!1);R("s",["ss",2],0,"second"),T("second","s"),q("s",Xn),q("ss",Xn,Vn),H(["s","ss"],pa);var Oa=P("Seconds",!1);R("S",0,0,function(){return~~(this.millisecond()/100)}),R(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),R(0,["SSS",3],0,"millisecond"),R(0,["SSSS",4],0,function(){return 10*this.millisecond()}),R(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),R(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),R(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),R(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),R(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),T("millisecond","ms"),q("S",Jn,Wn),q("SS",Jn,Vn),q("SSS",Jn,Zn);var za;for(za="SSSS";za.length<=9;za+="S")q(za,ta);for(za="S";za.length<=9;za+="S")H(za,Kt);var qa=P("Milliseconds",!1);R("z",0,0,"zoneAbbr"),R("zz",0,0,"zoneName");var $a=m.prototype;$a.add=Ea,$a.calendar=it,$a.clone=ot,$a.diff=ut,$a.endOf=wt,$a.format=ft,$a.from=mt,$a.fromNow=gt,$a.to=_t,$a.toNow=vt,$a.get=A,$a.invalidAt=Pt,$a.isAfter=rt,$a.isBefore=st,$a.isBetween=lt,$a.isSame=ct,$a.isValid=St,$a.lang=ja,$a.locale=yt,$a.localeData=bt,$a.max=La,$a.min=Ca,$a.parsingFlags=Et,$a.set=A,$a.startOf=kt,$a.subtract=Pa,$a.toArray=It,$a.toObject=Tt,$a.toDate=Lt,$a.toISOString=pt,$a.toJSON=pt,$a.toString=ht,$a.unix=Ct,$a.valueOf=xt,$a.year=wa,$a.isLeapYear=ue,$a.weekYear=At,$a.isoWeekYear=Dt,$a.quarter=$a.quarters=Bt,$a.month=J,$a.daysInMonth=Q,$a.week=$a.weeks=me,$a.isoWeek=$a.isoWeeks=ge,$a.weeksInYear=Nt,$a.isoWeeksInYear=Rt,$a.date=Ma,$a.day=$a.days=Ut,$a.weekday=Ht,$a.isoWeekday=Gt,$a.dayOfYear=ve,$a.hour=$a.hours=Ba,$a.minute=$a.minutes=Fa,$a.second=$a.seconds=Oa,$a.millisecond=$a.milliseconds=qa,$a.utcOffset=qe,$a.utc=Ue,$a.local=He,$a.parseZone=Ge,$a.hasAlignedHourOffset=We,$a.isDST=Ve,$a.isDSTShifted=Ze,$a.isLocal=Ye,$a.isUtcOffset=Ke,$a.isUtc=Xe,$a.isUTC=Xe,$a.zoneAbbr=Xt,$a.zoneName=Jt,$a.dates=ne("dates accessor is deprecated. Use date instead.",Ma),$a.months=ne("months accessor is deprecated. Use month instead",J),$a.years=ne("years accessor is deprecated. Use year instead",wa),$a.zone=ne("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",$e);var Ua=$a,Ha={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ga={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Wa="Invalid date",Va="%d",Za=/\d{1,2}/,Ya={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ka=b.prototype;Ka._calendar=Ha,Ka.calendar=tn,Ka._longDateFormat=Ga,Ka.longDateFormat=nn,Ka._invalidDate=Wa,Ka.invalidDate=an,Ka._ordinal=Va,Ka.ordinal=on,Ka._ordinalParse=Za,Ka.preparse=rn,Ka.postformat=rn,Ka._relativeTime=Ya,Ka.relativeTime=sn,Ka.pastFuture=ln,Ka.set=cn,Ka.months=Z,Ka._months=ma,Ka.monthsShort=Y,Ka._monthsShort=ga,Ka.monthsParse=K,Ka.week=he,Ka._week=xa,Ka.firstDayOfYear=fe,Ka.firstDayOfWeek=pe,Ka.weekdays=Ot,Ka._weekdays=Aa,Ka.weekdaysMin=qt,Ka._weekdaysMin=Ra,Ka.weekdaysShort=zt,Ka._weekdaysShort=Da,Ka.weekdaysParse=$t,Ka.isPM=Zt,Ka._meridiemParse=Na,Ka.meridiem=Yt,C("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===v(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),n.lang=ne("moment.lang is deprecated. Use moment.locale instead.",C),n.langData=ne("moment.langData is deprecated. Use moment.localeData instead.",I);var Xa=Math.abs,Ja=Tn("ms"),Qa=Tn("s"),ei=Tn("m"),ti=Tn("h"),ni=Tn("d"),ai=Tn("w"),ii=Tn("M"),oi=Tn("y"),ri=En("milliseconds"),si=En("seconds"),li=En("minutes"),ci=En("hours"),ui=En("days"),di=En("months"),hi=En("years"),pi=Math.round,fi={s:45,m:45,h:22,d:26,M:11},mi=Math.abs,gi=Re.prototype;gi.abs=_n,gi.add=yn,gi.subtract=bn,
gi.as=Ln,gi.asMilliseconds=Ja,gi.asSeconds=Qa,gi.asMinutes=ei,gi.asHours=ti,gi.asDays=ni,gi.asWeeks=ai,gi.asMonths=ii,gi.asYears=oi,gi.valueOf=In,gi._bubble=wn,gi.get=Sn,gi.milliseconds=ri,gi.seconds=si,gi.minutes=li,gi.hours=ci,gi.days=ui,gi.weeks=Pn,gi.months=di,gi.years=hi,gi.humanize=Dn,gi.toISOString=Rn,gi.toString=Rn,gi.toJSON=Rn,gi.locale=yt,gi.localeData=bt,gi.toIsoString=ne("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Rn),gi.lang=ja,R("X",0,0,"unix"),R("x",0,0,"valueOf"),q("x",na),q("X",ia),H("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),H("x",function(e,t,n){n._d=new Date(v(e))}),n.version="2.10.6",a(je),n.fn=Ua,n.min=Ae,n.max=De,n.utc=c,n.unix=Qt,n.months=hn,n.isDate=o,n.locale=C,n.invalid=p,n.duration=Je,n.isMoment=g,n.weekdays=fn,n.parseZone=en,n.localeData=I,n.isDuration=Ne,n.monthsShort=pn,n.weekdaysMin=gn,n.defineLocale=L,n.weekdaysShort=mn,n.normalizeUnits=S,n.relativeTimeThreshold=An;var _i=n;return _i})},{}],"slot/components/syncRegistry":[function(e,t,n){function a(){return this instanceof a?void r.call(this):new a}var i=e("../env"),o=e("inherits"),r=e("../lib/registry");t.exports=a,o(a,r),a.prototype.sync=function(e,t){return i.isServer?this.set(e,t).get(e):this.get(e,t)},a.prototype.read=function(){return this.data}},{"../env":"slot/env","../lib/registry":494,inherits:447}],"slot/config":[function(e,t,n){var a=e("./env"),i=a.getConfig();t.exports=i,t.exports.group=function(e){var t={};for(var n in i)if(i.hasOwnProperty(n)&&n.startsWith(e+".")){var a=n.substr(e.length+1);t[a]=i[n]}return t}},{"./env":"slot/env"}],"slot/env":[function(e,t,n){(function(t,a){function i(){return c||p+"build/"}function o(t){return e(i()+t)}function r(e){return o("private/"+e)}function s(e){if(!(e in m))throw Error('Environment variable "'+e+'" not defined');return m[e]}function l(e,t){if(e in m)throw Error("Environment variable "+e+" already configured");m[e]=t,g.emit(e,t)}e("./lib/shim.js");var c,u=e("events"),d=e("lodash"),h="undefined"==typeof window,p="./";h||(window.global=window),n.slotPath=a,n.global=t;var f={};t.DEBUG=!1,n.getConfig=function(){return f},n.mergeConfig=function(e){function n(e,t){for(var n in t)if(t.hasOwnProperty(n)){var a=t[n],i=!1;"+"==n.charAt(0)&&(i=!0,n=n.substr(1));var o=e[n];i&&n in e&&d.isArray(o)?o.push.apply(o,a):e[n]=a}return e}d.reduce(e,n,f),t.DEBUG=f.debug},n.getRootPath=function(){return p},n.setRootPath=function(e){p=e.endsWith("/")?e:e+"/"},n.getBuildPath=i,n.setBuildPath=function(e){c=e},n.require=function(t){return t.endsWith(".js")||t.endsWith(".json")||(t+=".js"),e(p+t)},n.requirePrivate=r,n.requirePublic=function(e){return o("public/"+e)};var m={},g=new u.EventEmitter;n.get=s,n.set=l,n.setup=function(e){for(var t in e)e.hasOwnProperty(t)&&l(t,e[t])},n.whenSet=function(e,t){e in m?t(m[e]):g.once(e,t)},n.isServer=h,n.isClient=!h,t.req=n.require,t.requirePrivate=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},"/home/jenkins/workspace/releases.staging.build/node_modules/slot")},{"./lib/shim.js":495,events:394,lodash:"lodash"}],"slot/lib/loadScript":[function(e,t,n){var a,i=e("lodash"),o=e("../env"),r={};t.exports=function(e,t,n){if(!o.isClient&&!a)throw Error("[slot loadScript] library should be used only client-side!");if(t=t||function(){},!n&&r[e])r[e].loaded?t():r[e].callbacks.push(t);else{var s=document.createElement("script");s.type="text/javascript",s.src=e,document.documentElement.appendChild(s),r[e]={loaded:!1,callbacks:[t]},s.onload=function(){r[e].loaded||(i.each(r[e].callbacks,function(e){e()}),r[e].loaded=!0)},s.onreadystatechange=function(){var e=this;"complete"!=this.readyState&&"loaded"!=this.readyState||setTimeout(function(){e.onload()},0)}}},t.exports.mock=function(e){a=e.isClient}},{"../env":"slot/env",lodash:"lodash"}],"slot/plugins/fpsMeter":[function(e,t,n){t.exports=function(e){function t(){return e.isClient?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null:void 0}function n(e){var t=0;e.splice(s);for(var n=0;s>n;n++)e[n]=void 0!==e[n]?e[n]:0,t+=e[n];if(0!=t)for(n=0;s>n;n++)e[n]=e[n]/t;return e}function a(e){var n;if(i&&(n=e-i),n>0){var s=Math.round(1e3/n);o[s]=(o[s]||0)+n}i=e,"inProgress"==r&&t()(a)}var i,o,r,s=100,l={start:function(){e.isClient&&t()&&(o=[],r="inProgress",a())},end:function(a){if(e.isClient){var i=[],s=0;if(t()){a=a||.5,r="ended",i=n(o);for(var l=i.length-1;l>0&&(s+=i[l],!(s>a));l--);return l}}}};return l}},{}],"slot/plugins/onNextFrame":[function(e,t,n){var a=e("lodash");t.exports=function(e){var t;if(e.isClient){t=window.requestAnimationFrame;for(var n=["ms","moz","webkit","o"],i=0;!t&&i<n.length;)t=window[n[i++]+"RequestAnimationFrame"]}return function(e){if(!a.isFunction(e))throw new TypeError("[slot onNextFrame] callback must be a function");var n=this;t?t(n.ifAlive(e)):n.setTimeout(e,1e3/60)}}},{lodash:"lodash"}],"slot/plugins/ua":[function(e,t,n){var a=e("lodash"),i=e("ua-parser-js");t.exports=function(e){function t(e){function t(t){return e.indexOf(t)>-1}e=e.toLowerCase();var n=t("iphone"),a=t("ipod"),i=t("ipad"),o=t("android"),r=o&&t("mobile"),s=o&&!r,l=t("windows"),c=l&&t("phone"),u=l&&!c&&t("touch"),d=t("blackberry")||t("bb10")||t("rim"),h=d&&!t("tablet"),p=d&&!h,f=t("tizen"),m=f&&t("mobile"),g=f&&!m,_=(t("(mobile;")||t("(tablet;"))&&t("; rv:"),v=_&&t("mobile"),y=_&&t("tablet"),b=t("meego");return n||a||r||c||h||m||v||b?"phone":i||s||u||p||g||y?"tablet":"desktop"}function n(){return e.registry.has("ua")?e.registry.get("ua").ua:""}function o(e){var o=new i;e=e||n()||"",o.setUA(e);var r=o.getResult(),s=(r.os&&r.os.name||"").toLowerCase().replace(/ /g,""),l=t(e),c="desktop"==l,u="phone"==l,d="tablet"==l,h=u||d,p=function(e){return"IE"==r.browser.name&&(e?e==r.browser.major:!0)};return a.extend(r,{isDesktop:c,isPhone:u,isTablet:d,isMobile:h,isIE:p,osName:s}),r}var r={};return function(e){return r[e]||(r[e]=o(e)),r[e]}}},{lodash:"lodash","ua-parser-js":"ua-parser-js"}],"ua-parser-js":[function(e,t,n){!function(e,a){"use strict";var i="0.7.10",o="",r="?",s="function",l="undefined",c="object",u="string",d="major",h="model",p="name",f="type",m="vendor",g="version",_="architecture",v="console",y="mobile",b="tablet",k="smarttv",w="wearable",x="embedded",C={extend:function(e,t){for(var n in t)-1!=="browser cpu device engine os".indexOf(n)&&t[n].length%2===0&&(e[n]=t[n].concat(e[n]));return e},has:function(e,t){return"string"==typeof e?-1!==t.toLowerCase().indexOf(e.toLowerCase()):!1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===u?e.split(".")[0]:a}},L={rgx:function(){for(var e,t,n,i,o,r,u,d=0,h=arguments;d<h.length&&!r;){var p=h[d],f=h[d+1];if(typeof e===l){e={};for(i in f)f.hasOwnProperty(i)&&(o=f[i],typeof o===c?e[o[0]]=a:e[o]=a)}for(t=n=0;t<p.length&&!r;)if(r=p[t++].exec(this.getUA()))for(i=0;i<f.length;i++)u=r[++n],o=f[i],typeof o===c&&o.length>0?2==o.length?typeof o[1]==s?e[o[0]]=o[1].call(this,u):e[o[0]]=o[1]:3==o.length?typeof o[1]!==s||o[1].exec&&o[1].test?e[o[0]]=u?u.replace(o[1],o[2]):a:e[o[0]]=u?o[1].call(this,u,o[2]):a:4==o.length&&(e[o[0]]=u?o[3].call(this,u.replace(o[1],o[2])):a):e[o]=u?u:a;d+=2}return e},str:function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(C.has(t[n][i],e))return n===r?a:n}else if(C.has(t[n],e))return n===r?a:n;return e}},I={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},T={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[p,g],[/\s(opr)\/([\w\.]+)/i],[[p,"Opera"],g],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[p,g],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[p,"IE"],g],[/(edge)\/((\d+)?[\w\.]+)/i],[p,g],[/(yabrowser)\/([\w\.]+)/i],[[p,"Yandex"],g],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],g],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[p,g],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[p,"UCBrowser"],g],[/(dolfin)\/([\w\.]+)/i],[[p,"Dolphin"],g],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[p,"Chrome"],g],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[g,[p,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[g,[p,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[g,[p,"Facebook"]],[/fxios\/([\w\.-]+)/i],[g,[p,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[g,[p,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[g,p],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[p,[g,L.str,I.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[p,g],[/(navigator|netscape)\/([\w\.-]+)/i],[[p,"Netscape"],g],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[p,g]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,C.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[_,/ower/,"",C.lowerize]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[_,C.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[h,m,[f,b]],[/applecoremedia\/[\w\.]+ \((ipad)/],[h,[m,"Apple"],[f,b]],[/(apple\s{0,1}tv)/i],[[h,"Apple TV"],[m,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[m,h,[f,b]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[h,[m,"Amazon"],[f,b]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[h,L.str,I.device.amazon.model],[m,"Amazon"],[f,y]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[h,m,[f,y]],[/\((ip[honed|\s\w*]+);/i],[h,[m,"Apple"],[f,y]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[m,h,[f,y]],[/\(bb10;\s(\w+)/i],[h,[m,"BlackBerry"],[f,y]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[h,[m,"Asus"],[f,b]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[m,"Sony"],[h,"Xperia Tablet"],[f,b]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[m,"Sony"],[h,"Xperia Phone"],[f,y]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[m,h,[f,v]],[/android.+;\s(shield)\sbuild/i],[h,[m,"Nvidia"],[f,v]],[/(playstation\s[34portablevi]+)/i],[h,[m,"Sony"],[f,v]],[/(sprint\s(\w+))/i],[[m,L.str,I.device.sprint.vendor],[h,L.str,I.device.sprint.model],[f,y]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[m,h,[f,b]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[m,[h,/_/g," "],[f,y]],[/(nexus\s9)/i],[h,[m,"HTC"],[f,b]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[h,[m,"Microsoft"],[f,v]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[m,"Microsoft"],[f,y]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[h,[m,"Motorola"],[f,y]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[h,[m,"Motorola"],[f,b]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[m,"Samsung"],h,[f,b]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[m,"Samsung"],h,[f,y]],[/(samsung);smarttv/i],[m,h,[f,k]],[/\(dtv[\);].+(aquos)/i],[h,[m,"Sharp"],[f,k]],[/sie-(\w+)*/i],[h,[m,"Siemens"],[f,y]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[m,"Nokia"],h,[f,y]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[h,[m,"Acer"],[f,b]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[m,"LG"],h,[f,b]],[/(lg) netcast\.tv/i],[m,h,[f,k]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[h,[m,"LG"],[f,y]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[h,[m,"Lenovo"],[f,b]],[/linux;.+((jolla));/i],[m,h,[f,y]],[/((pebble))app\/[\d\.]+\s/i],[m,h,[f,w]],[/android.+;\s(glass)\s\d/i],[h,[m,"Google"],[f,w]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[h,/_/g," "],[m,"Xiaomi"],[f,y]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[f,C.lowerize],m,h]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[g,[p,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[p,g],[/rv\:([\w\.]+).*(gecko)/i],[g,p]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[p,g],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[p,[g,L.str,I.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[p,"Windows"],[g,L.str,I.os.windows.version]],[/\((bb)(10);/i],[[p,"BlackBerry"],g],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[p,g],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[p,"Symbian"],g],[/\((series40);/i],[p],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[p,"Firefox OS"],g],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[p,g],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[p,"Chromium OS"],g],[/(sunos)\s?([\w\.]+\d)*/i],[[p,"Solaris"],g],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[p,g],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[p,"iOS"],[g,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[p,"Mac OS"],[g,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[p,g]]},S=function(t,n){if(!(this instanceof S))return new S(t,n).getResult();var a=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:o),i=n?C.extend(T,n):T;return this.getBrowser=function(){var e=L.rgx.apply(this,i.browser);return e.major=C.major(e.version),e},this.getCPU=function(){return L.rgx.apply(this,i.cpu)},this.getDevice=function(){return L.rgx.apply(this,i.device)},this.getEngine=function(){return L.rgx.apply(this,i.engine)},this.getOS=function(){return L.rgx.apply(this,i.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return a},this.setUA=function(e){return a=e,this},this.setUA(a),this};S.VERSION=i,S.BROWSER={NAME:p,MAJOR:d,VERSION:g},S.CPU={ARCHITECTURE:_},S.DEVICE={MODEL:h,VENDOR:m,TYPE:f,CONSOLE:v,MOBILE:y,SMARTTV:k,TABLET:b,WEARABLE:w,EMBEDDED:x},S.ENGINE={NAME:p,VERSION:g},S.OS={NAME:p,VERSION:g},typeof n!==l?(typeof t!==l&&t.exports&&(n=t.exports=S),n.UAParser=S):typeof define===s&&define.amd?define(function(){return S}):e.UAParser=S;var E=e.jQuery||e.Zepto;if(typeof E!==l){var P=new S;E.ua=P.getResult(),E.ua.get=function(){return P.getUA()},E.ua.set=function(e){P.setUA(e);var t=P.getResult();for(var n in t)E.ua[n]=t[n]}}}("object"==typeof window?window:this)},{}]},{},[]),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=q.type(e);return"function"===n||q.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function a(e,t,n){if(q.isFunction(t))return q.grep(e,function(e,a){return!!t.call(e,a,e)!==n});if(t.nodeType)return q.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(J.test(t))return q.filter(t,e,n);t=q.filter(t,e)}return q.grep(e,function(e){return D.call(t,e)>=0!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=oe[e]={};return q.each(e.match(ie)||[],function(e,n){t[n]=!0}),t}function r(){O.removeEventListener("DOMContentLoaded",r,!1),e.removeEventListener("load",r,!1),q.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=q.expando+Math.random()}function l(e,t,n){var a;if(void 0===n&&1===e.nodeType)if(a="data-"+t.replace(de,"-$1").toLowerCase(),n=e.getAttribute(a),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:ue.test(n)?q.parseJSON(n):n}catch(i){}ce.set(e,t,n)}else n=void 0;return n}function c(){return!0}function u(){return!1}function d(){try{return O.activeElement}catch(e){}}function h(e,t){return q.nodeName(e,"table")&&q.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Te.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var n=0,a=e.length;a>n;n++)le.set(e[n],"globalEval",!t||le.get(t[n],"globalEval"))}function g(e,t){var n,a,i,o,r,s,l,c;if(1===t.nodeType){if(le.hasData(e)&&(o=le.access(e),r=le.set(t,o),c=o.events)){delete r.handle,r.events={};for(i in c)for(n=0,a=c[i].length;a>n;n++)q.event.add(t,i,c[i][n])}ce.hasData(e)&&(s=ce.access(e),l=q.extend({},s),ce.set(t,l))}}function _(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&q.nodeName(e,t)?q.merge([e],n):n}function v(e,t){var n=t.nodeName.toLowerCase();"input"===n&&me.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function y(t,n){var a,i=q(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(a=e.getDefaultComputedStyle(i[0]))?a.display:q.css(i[0],"display");return i.detach(),o}function b(e){var t=O,n=je[e];return n||(n=y(e,t),"none"!==n&&n||(Pe=(Pe||q("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Pe[0].contentDocument,t.write(),t.close(),n=y(e,t),Pe.detach()),je[e]=n),n}function k(e,t,n){var a,i,o,r,s=e.style;return n=n||De(e),n&&(r=n.getPropertyValue(t)||n[t]),n&&(""!==r||q.contains(e.ownerDocument,e)||(r=q.style(e,t)),Ae.test(r)&&Me.test(t)&&(a=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=r,r=n.width,s.width=a,s.minWidth=i,s.maxWidth=o)),void 0!==r?r+"":r}function w(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function x(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),a=t,i=ze.length;i--;)if(t=ze[i]+n,t in e)return t;return a}function C(e,t,n){var a=Ne.exec(t);return a?Math.max(0,a[1]-(n||0))+(a[2]||"px"):t}function L(e,t,n,a,i){for(var o=n===(a?"border":"content")?4:"width"===t?1:0,r=0;4>o;o+=2)"margin"===n&&(r+=q.css(e,n+pe[o],!0,i)),a?("content"===n&&(r-=q.css(e,"padding"+pe[o],!0,i)),"margin"!==n&&(r-=q.css(e,"border"+pe[o]+"Width",!0,i))):(r+=q.css(e,"padding"+pe[o],!0,i),"padding"!==n&&(r+=q.css(e,"border"+pe[o]+"Width",!0,i)));return r}function I(e,t,n){var a=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=De(e),r="border-box"===q.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=k(e,t,o),(0>i||null==i)&&(i=e.style[t]),Ae.test(i))return i;a=r&&(F.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+L(e,t,n||(r?"border":"content"),a,o)+"px"}function T(e,t){for(var n,a,i,o=[],r=0,s=e.length;s>r;r++)a=e[r],a.style&&(o[r]=le.get(a,"olddisplay"),n=a.style.display,t?(o[r]||"none"!==n||(a.style.display=""),""===a.style.display&&fe(a)&&(o[r]=le.access(a,"olddisplay",b(a.nodeName)))):(i=fe(a),"none"===n&&i||le.set(a,"olddisplay",i?n:q.css(a,"display"))));for(r=0;s>r;r++)a=e[r],a.style&&(t&&"none"!==a.style.display&&""!==a.style.display||(a.style.display=t?o[r]||"":"none"));return e}function S(e,t,n,a){var i;if(q.isArray(t))q.each(t,function(t,i){n||Ze.test(e)?a(e,i):S(e+"["+("object"==typeof i?t:"")+"]",i,n,a)});else if(n||"object"!==q.type(t))a(e,t);else for(i in t)S(e+"["+i+"]",t[i],n,a)}function E(e){return q.isWindow(e)?e:9===e.nodeType&&e.defaultView}var P=[],j=P.slice,M=P.concat,A=P.push,D=P.indexOf,R={},N=R.toString,B=R.hasOwnProperty,F={},O=e.document,z="2.1.2-pre -ajax,-ajax/jsonp,-ajax/load,-ajax/parseJSON,-ajax/parseXML,-ajax/script,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-deprecated,-effects,-effects/Tween,-effects/animatedSelector,-event/alias,-css/hiddenVisibleSelectors",q=function(e,t){return new q.fn.init(e,t)},$=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,U=/^-ms-/,H=/-([\da-z])/gi,G=function(e,t){return t.toUpperCase()};q.fn=q.prototype={jquery:z,constructor:q,selector:"",length:0,toArray:function(){return j.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:j.call(this)},pushStack:function(e){var t=q.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return q.each(this,e,t)},map:function(e){return this.pushStack(q.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(j.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:A,sort:P.sort,splice:P.splice},q.extend=q.fn.extend=function(){var e,t,n,a,i,o,r=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[s]||{},s++),"object"==typeof r||q.isFunction(r)||(r={}),s===l&&(r=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)n=r[t],a=e[t],r!==a&&(c&&a&&(q.isPlainObject(a)||(i=q.isArray(a)))?(i?(i=!1,o=n&&q.isArray(n)?n:[]):o=n&&q.isPlainObject(n)?n:{},r[t]=q.extend(c,o,a)):void 0!==a&&(r[t]=a));return r},q.extend({expando:"jQuery"+(z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw Error(e)},noop:function(){},isFunction:function(e){return"function"===q.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!q.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==q.type(e)||e.nodeType||q.isWindow(e)?!1:!e.constructor||B.call(e.constructor.prototype,"isPrototypeOf")},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?R[N.call(e)]||"object":typeof e},globalEval:function(e){var t=O.createElement("script");t.text=e,O.head.appendChild(t).parentNode.removeChild(t)},camelCase:function(e){return e.replace(U,"ms-").replace(H,G)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,a){var i,o=0,r=e.length,s=n(e);if(a){if(s)for(;r>o&&(i=t.apply(e[o],a),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],a),i===!1)break}else if(s)for(;r>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace($,"")},makeArray:function(e,t){var a=t||[];return null!=e&&(n(Object(e))?q.merge(a,"string"==typeof e?[e]:e):A.call(a,e)),a},inArray:function(e,t,n){return null==t?-1:D.call(t,e,n)},merge:function(e,t){for(var n=+t.length,a=0,i=e.length;n>a;a++)e[i++]=t[a];return e.length=i,e},grep:function(e,t,n){for(var a,i=[],o=0,r=e.length,s=!n;r>o;o++)a=!t(e[o],o),a!==s&&i.push(e[o]);return i},map:function(e,t,a){var i,o=0,r=e.length,s=n(e),l=[];if(s)for(;r>o;o++)i=t(e[o],o,a),null!=i&&l.push(i);else for(o in e)i=t(e[o],o,a),null!=i&&l.push(i);return M.apply([],l)},guid:1,proxy:function(e,t){var n,a,i;return"string"==typeof t&&(n=e[t],t=e,e=n),q.isFunction(e)?(a=j.call(arguments,2),i=function(){return e.apply(t||this,a.concat(j.call(arguments)))},i.guid=e.guid=e.guid||q.guid++,i):void 0},now:Date.now,support:F}),q.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){R["[object "+t+"]"]=t.toLowerCase()});var W,V=e.document.documentElement,Z=V.matches||V.webkitMatchesSelector||V.mozMatchesSelector||V.oMatchesSelector||V.msMatchesSelector,Y=function(e,t){if(e===t)return W=!0,0;var n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return n?1&n?e===O||q.contains(O,e)?-1:t===O||q.contains(O,t)?1:0:4&n?-1:1:e.compareDocumentPosition?-1:1};q.extend({find:function(e,t,n,a){var i,o,r=0;if(n=n||[],t=t||O,!e||"string"!=typeof e)return n;if(1!==(o=t.nodeType)&&9!==o)return[];if(a)for(;i=a[r++];)q.find.matchesSelector(i,e)&&n.push(i);else q.merge(n,t.querySelectorAll(e));return n},unique:function(e){var t,n=[],a=0,i=0;if(W=!1,e.sort(Y),W){for(;t=e[a++];)t===e[a]&&(i=n.push(a));for(;i--;)e.splice(n[i],1)}return e},text:function(e){var t,n="",a=0,i=e.nodeType;if(i){if(1===i||9===i||11===i)return e.textContent;if(3===i||4===i)return e.nodeValue}else for(;t=e[a++];)n+=q.text(t);return n},contains:function(e,t){var n=9===e.nodeType?e.documentElement:e,a=t&&t.parentNode;return e===a||!(!a||1!==a.nodeType||!n.contains(a))},isXMLDoc:function(e){return"HTML"!==(e.ownerDocument||e).documentElement.nodeName},expr:{attrHandle:{},match:{bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]/}}}),q.extend(q.find,{matches:function(e,t){return q.find(e,null,null,t)},matchesSelector:function(e,t){return Z.call(e,t)},attr:function(e,t){return e.getAttribute(t)}});var K=q.expr.match.needsContext,X=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,J=/^.[^:#\[\.,]*$/;q.filter=function(e,t,n){var a=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===a.nodeType?q.find.matchesSelector(a,e)?[a]:[]:q.find.matches(e,q.grep(t,function(e){return 1===e.nodeType}))},q.fn.extend({find:function(e){var t,n=this.length,a=[],i=this;if("string"!=typeof e)return this.pushStack(q(e).filter(function(){for(t=0;n>t;t++)if(q.contains(i[t],this))return!0}));for(t=0;n>t;t++)q.find(e,i[t],a);return a=this.pushStack(n>1?q.unique(a):a),a.selector=this.selector?this.selector+" "+e:e,a},filter:function(e){return this.pushStack(a(this,e||[],!1))},not:function(e){return this.pushStack(a(this,e||[],!0))},is:function(e){return!!a(this,"string"==typeof e&&K.test(e)?q(e):e||[],!1).length}});var Q,ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,te=q.fn.init=function(e,t){var n,a;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ee.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||Q).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof q?t[0]:t,q.merge(this,q.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:O,!0)),X.test(n[1])&&q.isPlainObject(t))for(n in t)q.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return a=O.getElementById(n[2]),a&&a.parentNode&&(this.length=1,this[0]=a),this.context=O,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):q.isFunction(e)?void 0!==Q.ready?Q.ready(e):e(q):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),q.makeArray(e,this))};te.prototype=q.fn,Q=q(O);var ne=/^(?:parents|prev(?:Until|All))/,ae={children:!0,contents:!0,next:!0,prev:!0};q.extend({dir:function(e,t,n){for(var a=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&q(e).is(n))break;a.push(e)}return a},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),q.fn.extend({has:function(e){var t=q(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(q.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,a=0,i=this.length,o=[],r=K.test(e)||"string"!=typeof e?q(e,t||this.context):0;i>a;a++)for(n=this[a];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(r?r.index(n)>-1:1===n.nodeType&&q.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?q.unique(o):o)},index:function(e){return e?"string"==typeof e?D.call(q(e),this[0]):D.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(q.unique(q.merge(this.get(),q(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),q.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return q.dir(e,"parentNode")},parentsUntil:function(e,t,n){return q.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return q.dir(e,"nextSibling")},prevAll:function(e){return q.dir(e,"previousSibling")},nextUntil:function(e,t,n){return q.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return q.dir(e,"previousSibling",n)},siblings:function(e){return q.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return q.sibling(e.firstChild)},contents:function(e){return e.contentDocument||q.merge([],e.childNodes)}},function(e,t){q.fn[e]=function(n,a){var i=q.map(this,t,n);return"Until"!==e.slice(-5)&&(a=n),a&&"string"==typeof a&&(i=q.filter(a,i)),this.length>1&&(ae[e]||q.unique(i),ne.test(e)&&i.reverse()),this.pushStack(i)}});var ie=/\S+/g,oe={};q.Callbacks=function(e){e="string"==typeof e?oe[e]||o(e):q.extend({},e);var t,n,a,i,r,s,l=[],c=!e.once&&[],u=function(o){for(t=e.memory&&o,n=!0,s=i||0,i=0,r=l.length,a=!0;l&&r>s;s++)if(l[s].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}a=!1,l&&(c?c.length&&u(c.shift()):t?l=[]:d.disable())},d={add:function(){if(l){var n=l.length;!function o(t){q.each(t,function(t,n){var a=q.type(n);"function"===a?e.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!==a&&o(n)})}(arguments),a?r=l.length:t&&(i=n,u(t))}return this},remove:function(){return l&&q.each(arguments,function(e,t){for(var n;(n=q.inArray(t,l,n))>-1;)l.splice(n,1),a&&(r>=n&&r--,s>=n&&s--)}),this},has:function(e){return e?q.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=c=t=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,t||d.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!l||n&&!c||(t=t||[],t=[e,t.slice?t.slice():t],a?c.push(t):u(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},q.extend({Deferred:function(e){var t=[["resolve","done",q.Callbacks("once memory"),"resolved"],["reject","fail",q.Callbacks("once memory"),"rejected"],["notify","progress",q.Callbacks("memory")]],n="pending",a={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){
var e=arguments;return q.Deferred(function(n){q.each(t,function(t,o){var r=q.isFunction(e[t])&&e[t];i[o[1]](function(){var e=r&&r.apply(this,arguments);e&&q.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===a?n.promise():this,r?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?q.extend(e,a):a}},i={};return a.pipe=a.then,q.each(t,function(e,o){var r=o[2],s=o[3];a[o[1]]=r.add,s&&r.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?a:this,arguments),this},i[o[0]+"With"]=r.fireWith}),a.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,a,i=0,o=j.call(arguments),r=o.length,s=1!==r||e&&q.isFunction(e.promise)?r:0,l=1===s?e:q.Deferred(),c=function(e,n,a){return function(i){n[e]=this,a[e]=arguments.length>1?j.call(arguments):i,a===t?l.notifyWith(n,a):--s||l.resolveWith(n,a)}};if(r>1)for(t=Array(r),n=Array(r),a=Array(r);r>i;i++)o[i]&&q.isFunction(o[i].promise)?o[i].promise().done(c(i,a,o)).fail(l.reject).progress(c(i,n,t)):--s;return s||l.resolveWith(a,o),l.promise()}});var re;q.fn.ready=function(e){return q.ready.promise().done(e),this},q.extend({isReady:!1,readyWait:1,holdReady:function(e){e?q.readyWait++:q.ready(!0)},ready:function(e){(e===!0?--q.readyWait:q.isReady)||(q.isReady=!0,e!==!0&&--q.readyWait>0||(re.resolveWith(O,[q]),q.fn.triggerHandler&&(q(O).triggerHandler("ready"),q(O).off("ready"))))}}),q.ready.promise=function(t){return re||(re=q.Deferred(),"complete"===O.readyState?setTimeout(q.ready):(O.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("load",r,!1))),re.promise(t)},q.ready.promise();var se=q.access=function(e,t,n,a,i,o,r){var s=0,l=e.length,c=null==n;if("object"===q.type(n)){i=!0;for(s in n)se(e,t,s,n[s],!0,o,r)}else if(void 0!==a&&(i=!0,q.isFunction(a)||(r=!0),c&&(r?(t.call(e,a),t=null):(c=t,t=function(e,t,n){return c.call(q(e),n)})),t))for(;l>s;s++)t(e[s],n,r?a:a.call(e[s],s,t(e[s],n)));return i?e:c?t.call(e):l?t(e[0],n):o};q.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},s.uid=1,s.accepts=q.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=s.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(a){t[this.expando]=n,q.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var a,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(q.isEmptyObject(o))q.extend(this.cache[i],t);else for(a in t)o[a]=t[a];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var a;return void 0===t||t&&"string"==typeof t&&void 0===n?(a=this.get(e,t),void 0!==a?a:this.get(e,q.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,a,i,o=this.key(e),r=this.cache[o];if(void 0===t)this.cache[o]={};else{q.isArray(t)?a=t.concat(t.map(q.camelCase)):(i=q.camelCase(t),t in r?a=[t,i]:(a=i,a=a in r?[a]:a.match(ie)||[])),n=a.length;for(;n--;)delete r[a[n]]}},hasData:function(e){return!q.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var le=new s,ce=new s,ue=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,de=/([A-Z])/g;q.extend({hasData:function(e){return ce.hasData(e)||le.hasData(e)},data:function(e,t,n){return ce.access(e,t,n)},removeData:function(e,t){ce.remove(e,t)},_data:function(e,t,n){return le.access(e,t,n)},_removeData:function(e,t){le.remove(e,t)}}),q.fn.extend({data:function(e,t){var n,a,i,o=this[0],r=o&&o.attributes;if(void 0===e){if(this.length&&(i=ce.get(o),1===o.nodeType&&!le.get(o,"hasDataAttrs"))){for(n=r.length;n--;)r[n]&&(a=r[n].name,0===a.indexOf("data-")&&(a=q.camelCase(a.slice(5)),l(o,a,i[a])));le.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){ce.set(this,e)}):se(this,function(t){var n,a=q.camelCase(e);if(o&&void 0===t){if(n=ce.get(o,e),void 0!==n)return n;if(n=ce.get(o,a),void 0!==n)return n;if(n=l(o,a,void 0),void 0!==n)return n}else this.each(function(){var n=ce.get(this,a);ce.set(this,a,t),-1!==e.indexOf("-")&&void 0!==n&&ce.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ce.remove(this,e)})}}),q.extend({queue:function(e,t,n){var a;return e?(t=(t||"fx")+"queue",a=le.get(e,t),n&&(!a||q.isArray(n)?a=le.access(e,t,q.makeArray(n)):a.push(n)),a||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=q.queue(e,t),a=n.length,i=n.shift(),o=q._queueHooks(e,t),r=function(){q.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),a--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,r,o)),!a&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return le.get(e,n)||le.access(e,n,{empty:q.Callbacks("once memory").add(function(){le.remove(e,[t+"queue",n])})})}}),q.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?q.queue(this[0],e):void 0===t?this:this.each(function(){var n=q.queue(this,e,t);q._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&q.dequeue(this,e)})},dequeue:function(e){return this.each(function(){q.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,a=1,i=q.Deferred(),o=this,r=this.length,s=function(){--a||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)n=le.get(o[r],e+"queueHooks"),n&&n.empty&&(a++,n.empty.add(s));return s(),i.promise(t)}});var he=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,pe=["Top","Right","Bottom","Left"],fe=function(e,t){return e=t||e,"none"===q.css(e,"display")||!q.contains(e.ownerDocument,e)},me=/^(?:checkbox|radio)$/i;!function(){var e=O.createDocumentFragment(),t=e.appendChild(O.createElement("div")),n=O.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),F.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",F.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var ge="undefined";F.focusinBubbles="onfocusin"in e;var _e=/^key/,ve=/^(?:mouse|pointer|contextmenu)|click/,ye=/^(?:focusinfocus|focusoutblur)$/,be=/^([^.]*)(?:\.(.+)|)$/;q.event={global:{},add:function(e,t,n,a,i){var o,r,s,l,c,u,d,h,p,f,m,g=le.get(e);if(g)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=q.guid++),(l=g.events)||(l=g.events={}),(r=g.handle)||(r=g.handle=function(t){return typeof q!==ge&&q.event.triggered!==t.type?q.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(ie)||[""],c=t.length;c--;)s=be.exec(t[c])||[],p=m=s[1],f=(s[2]||"").split(".").sort(),p&&(d=q.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,d=q.event.special[p]||{},u=q.extend({type:p,origType:m,data:a,handler:n,guid:n.guid,selector:i,needsContext:i&&q.expr.match.needsContext.test(i),namespace:f.join(".")},o),(h=l[p])||(h=l[p]=[],h.delegateCount=0,d.setup&&d.setup.call(e,a,f,r)!==!1||e.addEventListener&&e.addEventListener(p,r,!1)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,u):h.push(u),q.event.global[p]=!0)},remove:function(e,t,n,a,i){var o,r,s,l,c,u,d,h,p,f,m,g=le.hasData(e)&&le.get(e);if(g&&(l=g.events)){for(t=(t||"").match(ie)||[""],c=t.length;c--;)if(s=be.exec(t[c])||[],p=m=s[1],f=(s[2]||"").split(".").sort(),p){for(d=q.event.special[p]||{},p=(a?d.delegateType:d.bindType)||p,h=l[p]||[],s=s[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=h.length;o--;)u=h[o],!i&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||a&&a!==u.selector&&("**"!==a||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));r&&!h.length&&(d.teardown&&d.teardown.call(e,f,g.handle)!==!1||q.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)q.event.remove(e,p+t[c],n,a,!0);q.isEmptyObject(l)&&(delete g.handle,le.remove(e,"events"))}},trigger:function(t,n,a,i){var o,r,s,l,c,u,d,h=[a||O],p=B.call(t,"type")?t.type:t,f=B.call(t,"namespace")?t.namespace.split("."):[];if(r=s=a=a||O,3!==a.nodeType&&8!==a.nodeType&&!ye.test(p+q.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[q.expando]?t:new q.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=a),n=null==n?[t]:q.makeArray(n,[t]),d=q.event.special[p]||{},i||!d.trigger||d.trigger.apply(a,n)!==!1)){if(!i&&!d.noBubble&&!q.isWindow(a)){for(l=d.delegateType||p,ye.test(l+p)||(r=r.parentNode);r;r=r.parentNode)h.push(r),s=r;s===(a.ownerDocument||O)&&h.push(s.defaultView||s.parentWindow||e)}for(o=0;(r=h[o++])&&!t.isPropagationStopped();)t.type=o>1?l:d.bindType||p,u=(le.get(r,"events")||{})[t.type]&&le.get(r,"handle"),u&&u.apply(r,n),u=c&&r[c],u&&u.apply&&q.acceptData(r)&&(t.result=u.apply(r,n),t.result===!1&&t.preventDefault());return t.type=p,i||t.isDefaultPrevented()||d._default&&d._default.apply(h.pop(),n)!==!1||!q.acceptData(a)||c&&q.isFunction(a[p])&&!q.isWindow(a)&&(s=a[c],s&&(a[c]=null),q.event.triggered=p,a[p](),q.event.triggered=void 0,s&&(a[c]=s)),t.result}},dispatch:function(e){e=q.event.fix(e);var t,n,a,i,o,r=[],s=j.call(arguments),l=(le.get(this,"events")||{})[e.type]||[],c=q.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(r=q.event.handlers.call(this,e,l),t=0;(i=r[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,a=((q.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==a&&(e.result=a)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,a,i,o,r=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(a=[],n=0;s>n;n++)o=t[n],i=o.selector+" ",void 0===a[i]&&(a[i]=o.needsContext?q(i,this).index(l)>=0:q.find(i,this,null,[l]).length),a[i]&&a.push(o);a.length&&r.push({elem:l,handlers:a})}return s<t.length&&r.push({elem:this,handlers:t.slice(s)}),r},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,a,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||O,a=n.documentElement,i=n.body,e.pageX=t.clientX+(a&&a.scrollLeft||i&&i.scrollLeft||0)-(a&&a.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(a&&a.scrollTop||i&&i.scrollTop||0)-(a&&a.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[q.expando])return e;var t,n,a,i=e.type,o=e,r=this.fixHooks[i];for(r||(this.fixHooks[i]=r=ve.test(i)?this.mouseHooks:_e.test(i)?this.keyHooks:{}),a=r.props?this.props.concat(r.props):this.props,e=new q.Event(o),t=a.length;t--;)n=a[t],e[n]=o[n];return e.target||(e.target=O),3===e.target.nodeType&&(e.target=e.target.parentNode),r.filter?r.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==d()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===d()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&q.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return q.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,a){var i=q.extend(new q.Event,n,{type:e,isSimulated:!0,originalEvent:{}});a?q.event.trigger(i,null,t):q.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},q.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},q.Event=function(e,t){return this instanceof q.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?c:u):this.type=e,t&&q.extend(this,t),this.timeStamp=e&&e.timeStamp||q.now(),void(this[q.expando]=!0)):new q.Event(e,t)},q.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=c,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},q.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){q.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,a=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===a||q.contains(a,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),F.focusinBubbles||q.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){q.event.simulate(t,e.target,q.event.fix(e),!0)};q.event.special[t]={setup:function(){var a=this.ownerDocument||this,i=le.access(a,t);i||a.addEventListener(e,n,!0),le.access(a,t,(i||0)+1)},teardown:function(){var a=this.ownerDocument||this,i=le.access(a,t)-1;i?le.access(a,t,i):(a.removeEventListener(e,n,!0),le.remove(a,t))}}}),q.fn.extend({on:function(e,t,n,a,i){var o,r;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(r in e)this.on(r,t,n,e[r],i);return this}if(null==n&&null==a?(a=t,n=t=void 0):null==a&&("string"==typeof t?(a=n,n=void 0):(a=n,n=t,t=void 0)),a===!1)a=u;else if(!a)return this;return 1===i&&(o=a,a=function(e){return q().off(e),o.apply(this,arguments)},a.guid=o.guid||(o.guid=q.guid++)),this.each(function(){q.event.add(this,e,a,n,t)})},one:function(e,t,n,a){return this.on(e,t,n,a,1)},off:function(e,t,n){var a,i;if(e&&e.preventDefault&&e.handleObj)return a=e.handleObj,q(e.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=u),this.each(function(){q.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){q.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?q.event.trigger(e,t,n,!0):void 0}});var ke=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,we=/<([\w:]+)/,xe=/<|&#?\w+;/,Ce=/<(?:script|style|link)/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,Ie=/^$|\/(?:java|ecma)script/i,Te=/^true\/(.*)/,Se=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ee={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ee.optgroup=Ee.option,Ee.tbody=Ee.tfoot=Ee.colgroup=Ee.caption=Ee.thead,Ee.th=Ee.td,q.extend({clone:function(e,t,n){var a,i,o,r,s=e.cloneNode(!0),l=q.contains(e.ownerDocument,e);if(!(F.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||q.isXMLDoc(e)))for(r=_(s),o=_(e),a=0,i=o.length;i>a;a++)v(o[a],r[a]);if(t)if(n)for(o=o||_(e),r=r||_(s),a=0,i=o.length;i>a;a++)g(o[a],r[a]);else g(e,s);return r=_(s,"script"),r.length>0&&m(r,!l&&_(e,"script")),s},buildFragment:function(e,t,n,a){for(var i,o,r,s,l,c,u=t.createDocumentFragment(),d=[],h=0,p=e.length;p>h;h++)if(i=e[h],i||0===i)if("object"===q.type(i))q.merge(d,i.nodeType?[i]:i);else if(xe.test(i)){for(o=o||u.appendChild(t.createElement("div")),r=(we.exec(i)||["",""])[1].toLowerCase(),s=Ee[r]||Ee._default,o.innerHTML=s[1]+i.replace(ke,"<$1></$2>")+s[2],c=s[0];c--;)o=o.lastChild;q.merge(d,o.childNodes),o=u.firstChild,o.textContent=""}else d.push(t.createTextNode(i));for(u.textContent="",h=0;i=d[h++];)if((!a||-1===q.inArray(i,a))&&(l=q.contains(i.ownerDocument,i),o=_(u.appendChild(i),"script"),l&&m(o),n))for(c=0;i=o[c++];)Ie.test(i.type||"")&&n.push(i);return u},cleanData:function(e){for(var t,n,a,i,o=q.event.special,r=0;void 0!==(n=e[r]);r++){if(q.acceptData(n)&&(i=n[le.expando],i&&(t=le.cache[i]))){if(t.events)for(a in t.events)o[a]?q.event.remove(n,a):q.removeEvent(n,a,t.handle);le.cache[i]&&delete le.cache[i]}delete ce.cache[n[ce.expando]]}}}),q.fn.extend({text:function(e){return se(this,function(e){return void 0===e?q.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,a=e?q.filter(e,this):this,i=0;null!=(n=a[i]);i++)t||1!==n.nodeType||q.cleanData(_(n)),n.parentNode&&(t&&q.contains(n.ownerDocument,n)&&m(_(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(q.cleanData(_(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return q.clone(this,e,t)})},html:function(e){return se(this,function(e){var t=this[0]||{},n=0,a=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ce.test(e)&&!Ee[(we.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ke,"<$1></$2>");try{for(;a>n;n++)t=this[n]||{},1===t.nodeType&&(q.cleanData(_(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,q.cleanData(_(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=M.apply([],e);var n,a,i,o,r,s,l=0,c=this.length,u=this,d=c-1,h=e[0],m=q.isFunction(h);if(m||c>1&&"string"==typeof h&&!F.checkClone&&Le.test(h))return this.each(function(n){var a=u.eq(n);m&&(e[0]=h.call(this,n,a.html())),a.domManip(e,t)});if(c&&(n=q.buildFragment(e,this[0].ownerDocument,!1,this),a=n.firstChild,1===n.childNodes.length&&(n=a),a)){for(i=q.map(_(n,"script"),p),o=i.length;c>l;l++)r=n,l!==d&&(r=q.clone(r,!0,!0),o&&q.merge(i,_(r,"script"))),t.call(this[l],r,l);if(o)for(s=i[i.length-1].ownerDocument,q.map(i,f),l=0;o>l;l++)r=i[l],Ie.test(r.type||"")&&!le.access(r,"globalEval")&&q.contains(s,r)&&(r.src?q._evalUrl&&q._evalUrl(r.src):q.globalEval(r.textContent.replace(Se,"")))}return this}}),q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){q.fn[e]=function(e){for(var n,a=[],i=q(e),o=i.length-1,r=0;o>=r;r++)n=r===o?this:this.clone(!0),q(i[r])[t](n),A.apply(a,n.get());return this.pushStack(a)}});var Pe,je={},Me=/^margin/,Ae=RegExp("^("+he+")(?!px)[a-z%]+$","i"),De=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r.innerHTML="",i.appendChild(o);var t=e.getComputedStyle(r,null);n="1%"!==t.top,a="4px"===t.width,i.removeChild(o)}var n,a,i=O.documentElement,o=O.createElement("div"),r=O.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",F.clearCloneStyle="content-box"===r.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(r),e.getComputedStyle&&q.extend(F,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==a&&t(),a},reliableMarginRight:function(){var t,n=r.appendChild(O.createElement("div"));return n.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",r.style.width="1px",i.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),i.removeChild(o),t}}))}(),q.swap=function(e,t,n,a){var i,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,a||[]);for(o in t)e.style[o]=r[o];return i};var Re=/^(none|table(?!-c[ea]).+)/,Ne=RegExp("^("+he+")(.*)$","i"),Be=RegExp("^([+-])=("+he+")","i"),Fe={position:"absolute",visibility:"hidden",display:"block"},Oe={letterSpacing:"0",fontWeight:"400"},ze=["Webkit","O","Moz","ms"];q.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=k(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,a){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,r,s=q.camelCase(t),l=e.style;return t=q.cssProps[s]||(q.cssProps[s]=x(l,s)),r=q.cssHooks[t]||q.cssHooks[s],void 0===n?r&&"get"in r&&void 0!==(i=r.get(e,!1,a))?i:l[t]:(o=typeof n,"string"===o&&(i=Be.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(q.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||q.cssNumber[s]||(n+="px"),F.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),r&&"set"in r&&void 0===(n=r.set(e,n,a))||(l[t]=n)),void 0)}},css:function(e,t,n,a){var i,o,r,s=q.camelCase(t);return t=q.cssProps[s]||(q.cssProps[s]=x(e.style,s)),r=q.cssHooks[t]||q.cssHooks[s],r&&"get"in r&&(i=r.get(e,!0,n)),void 0===i&&(i=k(e,t,a)),"normal"===i&&t in Oe&&(i=Oe[t]),""===n||n?(o=parseFloat(i),n===!0||q.isNumeric(o)?o||0:i):i}}),q.each(["height","width"],function(e,t){q.cssHooks[t]={get:function(e,n,a){return n?Re.test(q.css(e,"display"))&&0===e.offsetWidth?q.swap(e,Fe,function(){return I(e,t,a)}):I(e,t,a):void 0},set:function(e,n,a){var i=a&&De(e);return C(e,n,a?L(e,t,a,"border-box"===q.css(e,"boxSizing",!1,i),i):0)}}}),q.cssHooks.marginRight=w(F.reliableMarginRight,function(e,t){return t?q.swap(e,{display:"inline-block"},k,[e,"marginRight"]):void 0}),q.each({margin:"",padding:"",border:"Width"},function(e,t){q.cssHooks[e+t]={expand:function(n){for(var a=0,i={},o="string"==typeof n?n.split(" "):[n];4>a;a++)i[e+pe[a]+t]=o[a]||o[a-2]||o[0];return i}},Me.test(e)||(q.cssHooks[e+t].set=C)}),q.fn.extend({css:function(e,t){return se(this,function(e,t,n){var a,i,o={},r=0;if(q.isArray(t)){for(a=De(e),i=t.length;i>r;r++)o[t[r]]=q.css(e,t[r],!1,a);return o}return void 0!==n?q.style(e,t,n):q.css(e,t)},e,t,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){fe(this)?q(this).show():q(this).hide()})}}),q.fn.delay=function(e,t){return e=q.fx?q.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var a=setTimeout(t,e);n.stop=function(){clearTimeout(a)}})},function(){var e=O.createElement("input"),t=O.createElement("select"),n=t.appendChild(O.createElement("option"));e.type="checkbox",F.checkOn=""!==e.value,F.optSelected=n.selected,t.disabled=!0,F.optDisabled=!n.disabled,e=O.createElement("input"),e.value="t",e.type="radio",F.radioValue="t"===e.value}();var qe,$e,Ue=q.expr.attrHandle;q.fn.extend({attr:function(e,t){return se(this,q.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){q.removeAttr(this,e)})}}),q.extend({attr:function(e,t,n){var a,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===ge?q.prop(e,t,n):(1===o&&q.isXMLDoc(e)||(t=t.toLowerCase(),a=q.attrHooks[t]||(q.expr.match.bool.test(t)?$e:qe)),void 0===n?a&&"get"in a&&null!==(i=a.get(e,t))?i:(i=q.find.attr(e,t),null==i?void 0:i):null!==n?a&&"set"in a&&void 0!==(i=a.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void q.removeAttr(e,t))},removeAttr:function(e,t){var n,a,i=0,o=t&&t.match(ie);if(o&&1===e.nodeType)for(;n=o[i++];)a=q.propFix[n]||n,q.expr.match.bool.test(n)&&(e[a]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!F.radioValue&&"radio"===t&&q.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),$e={set:function(e,t,n){return t===!1?q.removeAttr(e,n):e.setAttribute(n,n),n}},q.each(q.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Ue[t]||q.find.attr;Ue[t]=function(e,t,a){var i,o;return a||(o=Ue[t],Ue[t]=i,i=null!=n(e,t,a)?t.toLowerCase():null,Ue[t]=o),i}});var He=/^(?:input|select|textarea|button)$/i;q.fn.extend({prop:function(e,t){return se(this,q.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[q.propFix[e]||e]})}}),q.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var a,i,o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return o=1!==r||!q.isXMLDoc(e),o&&(t=q.propFix[t]||t,i=q.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(a=i.set(e,n,t))?a:e[t]=n:i&&"get"in i&&null!==(a=i.get(e,t))?a:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||He.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),F.optSelected||(q.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),q.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){q.propFix[this.toLowerCase()]=this});var Ge=/[\t\r\n\f]/g;q.fn.extend({addClass:function(e){var t,n,a,i,o,r,s="string"==typeof e&&e,l=0,c=this.length;if(q.isFunction(e))return this.each(function(t){q(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(ie)||[];c>l;l++)if(n=this[l],a=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ge," "):" ")){for(o=0;i=t[o++];)a.indexOf(" "+i+" ")<0&&(a+=i+" ");r=q.trim(a),n.className!==r&&(n.className=r)}return this},removeClass:function(e){var t,n,a,i,o,r,s=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(q.isFunction(e))return this.each(function(t){q(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(ie)||[];c>l;l++)if(n=this[l],a=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ge," "):"")){for(o=0;i=t[o++];)for(;a.indexOf(" "+i+" ")>=0;)a=a.replace(" "+i+" "," ");r=e?q.trim(a):"",n.className!==r&&(n.className=r)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):q.isFunction(e)?this.each(function(n){q(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,a=0,i=q(this),o=e.match(ie)||[];t=o[a++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else n!==ge&&"boolean"!==n||(this.className&&le.set(this,"__className__",this.className),this.className=this.className||e===!1?"":le.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,a=this.length;a>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Ge," ").indexOf(t)>=0)return!0;return!1}});var We=/\r/g;q.fn.extend({val:function(e){var t,n,a,i=this[0];{if(arguments.length)return a=q.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=a?e.call(this,n,q(this).val()):e,null==i?i="":"number"==typeof i?i+="":q.isArray(i)&&(i=q.map(i,function(e){return null==e?"":e+""})),t=q.valHooks[this.type]||q.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=q.valHooks[i.type]||q.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(We,""):null==n?"":n)}}}),q.extend({valHooks:{option:{get:function(e){var t=q.find.attr(e,"value");return null!=t?t:q.trim(q.text(e))}},select:{get:function(e){for(var t,n,a=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,r=o?null:[],s=o?i+1:a.length,l=0>i?s:o?i:0;s>l;l++)if(n=a[l],(n.selected||l===i)&&(F.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!q.nodeName(n.parentNode,"optgroup"))){if(t=q(n).val(),o)return t;r.push(t)}return r},set:function(e,t){for(var n,a,i=e.options,o=q.makeArray(t),r=i.length;r--;)a=i[r],(a.selected=q.inArray(a.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),q.each(["radio","checkbox"],function(){q.valHooks[this]={set:function(e,t){return q.isArray(t)?e.checked=q.inArray(q(e).val(),t)>=0:void 0}},F.checkOn||(q.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),q.fn.extend({wrapAll:function(e){var t;return q.isFunction(e)?this.each(function(t){q(this).wrapAll(e.call(this,t))}):(this[0]&&(t=q(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return q.isFunction(e)?this.each(function(t){q(this).wrapInner(e.call(this,t))}):this.each(function(){var t=q(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=q.isFunction(e);return this.each(function(n){q(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){q.nodeName(this,"body")||q(this).replaceWith(this.childNodes)}).end()}});var Ve=/%20/g,Ze=/\[\]$/,Ye=/\r?\n/g,Ke=/^(?:submit|button|image|reset|file)$/i,Xe=/^(?:input|select|textarea|keygen)/i;q.param=function(e,t){var n,a=[],i=function(e,t){t=q.isFunction(t)?t():null==t?"":t,a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=q.ajaxSettings&&q.ajaxSettings.traditional),q.isArray(e)||e.jquery&&!q.isPlainObject(e))q.each(e,function(){i(this.name,this.value)});else for(n in e)S(n,e[n],t,i);return a.join("&").replace(Ve,"+")},q.fn.extend({serialize:function(){return q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=q.prop(this,"elements");return e?q.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!q(this).is(":disabled")&&Xe.test(this.nodeName)&&!Ke.test(e)&&(this.checked||!me.test(e))}).map(function(e,t){var n=q(this).val();return null==n?null:q.isArray(n)?q.map(n,function(e){return{name:t.name,value:e.replace(Ye,"\r\n")}}):{name:t.name,value:n.replace(Ye,"\r\n")}}).get()}}),q.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||O;var a=X.exec(e),i=!n&&[];return a?[t.createElement(a[1])]:(a=q.buildFragment([e],t,i),i&&i.length&&q(i).remove(),q.merge([],a.childNodes))};var V=e.document.documentElement;q.offset={setOffset:function(e,t,n){var a,i,o,r,s,l,c,u=q.css(e,"position"),d=q(e),h={};"static"===u&&(e.style.position="relative"),s=d.offset(),o=q.css(e,"top"),l=q.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1,c?(a=d.position(),r=a.top,i=a.left):(r=parseFloat(o)||0,i=parseFloat(l)||0),q.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(h.top=t.top-s.top+r),null!=t.left&&(h.left=t.left-s.left+i),"using"in t?t.using.call(e,h):d.css(h)}},q.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){q.offset.setOffset(this,e,t);
});var t,n,a=this[0],i={top:0,left:0},o=a&&a.ownerDocument;if(o)return t=o.documentElement,q.contains(t,a)?(typeof a.getBoundingClientRect!==ge&&(i=a.getBoundingClientRect()),n=E(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],a={top:0,left:0};return"fixed"===q.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),q.nodeName(e[0],"html")||(a=e.offset()),a.top+=q.css(e[0],"borderTopWidth",!0),a.left+=q.css(e[0],"borderLeftWidth",!0)),{top:t.top-a.top-q.css(n,"marginTop",!0),left:t.left-a.left-q.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||V;e&&!q.nodeName(e,"html")&&"static"===q.css(e,"position");)e=e.offsetParent;return e||V})}}),q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var a="pageYOffset"===n;q.fn[t]=function(i){return se(this,function(t,i,o){var r=E(t);return void 0===o?r?r[n]:t[i]:void(r?r.scrollTo(a?e.pageXOffset:o,a?o:e.pageYOffset):t[i]=o)},t,i,arguments.length,null)}}),q.each(["top","left"],function(e,t){q.cssHooks[t]=w(F.pixelPosition,function(e,n){return n?(n=k(e,t),Ae.test(n)?q(e).position()[t]+"px":n):void 0})}),q.each({Height:"height",Width:"width"},function(e,t){q.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,a){q.fn[a]=function(a,i){var o=arguments.length&&(n||"boolean"!=typeof a),r=n||(a===!0||i===!0?"margin":"border");return se(this,function(t,n,a){var i;return q.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===a?q.css(t,n,r):q.style(t,n,a,r)},t,o?a:void 0,o,null)}})}),"function"==typeof define&&define.amd&&define("jquery",[],function(){return q});var Je=e.jQuery,Qe=e.$;return q.noConflict=function(t){return e.$===q&&(e.$=Qe),t&&e.jQuery===q&&(e.jQuery=Je),q},typeof t===ge&&(e.jQuery=e.$=q),q}),$.fn.data=function(e){return function(){var t=e.apply(this,arguments);return t&&"number"==typeof t?""+t:t}}($.fn.data),$.fn.cursor=function(){function e(e,t,n){if(e)if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,n);else if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveEnd("character",n),a.moveStart("character",t),a.select()}}return function(t){var n=$(this).text()||$(this).val()||"",a=null!=t?t:n.length;e(this[0],a,a)}}($),function(e){function t(t){var n=e(this),a=null,i=[],o=null,r=null,s=e.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:e.noop,exit:e.noop,activate:e.noop,deactivate:e.noop,exitMenu:e.noop},t),l=3,c=300,u=function(e){i.push({x:e.pageX,y:e.pageY}),i.length>l&&i.shift()},d=function(){r&&clearTimeout(r),s.exitMenu(this)&&(a&&s.deactivate(a),a=null)},h=function(){r&&clearTimeout(r),s.enter(this),g(this)},p=function(){s.exit(this)},f=function(){m(this)},m=function(e){e!=a&&(a&&s.deactivate(a),s.activate(e),a=e)},g=function(e){var t=_();t?r=setTimeout(function(){g(e)},t):m(e)},_=function(){function t(e,t){return(t.y-e.y)/(t.x-e.x)}if(!a||!e(a).is(s.submenuSelector))return 0;var r=n.offset(),l={x:r.left,y:r.top-s.tolerance},u={x:r.left+n.outerWidth(),y:l.y},d={x:r.left,y:r.top+n.outerHeight()+s.tolerance},h={x:r.left+n.outerWidth(),y:d.y},p=i[i.length-1],f=i[0];if(!p)return 0;if(f||(f=p),f.x<r.left||f.x>h.x||f.y<r.top||f.y>h.y)return 0;if(o&&p.x==o.x&&p.y==o.y)return 0;var m=u,g=h;"left"==s.submenuDirection?(m=d,g=l):"below"==s.submenuDirection?(m=h,g=d):"above"==s.submenuDirection&&(m=l,g=u);var _=t(p,m),v=t(p,g),y=t(f,m),b=t(f,g);return y>_&&v>b?(o=p,c):(o=null,0)};n.on("mouseleave",d).find(s.rowSelector).on("mouseenter",h).on("mouseleave",p).on("click",f),e(document).on("mousemove",u)}e.fn.menuAim=function(e){return this.each(function(){t.call(this,e)}),this}}(jQuery);var scope="undefined"==typeof global?window:global;scope.I18N_DEBUG=!1,function(){function e(e){return(""+(void 0!==e.className.baseVal?e.className.baseVal:e.className)).match(/\S+/g)||[]}function t(e){if(""==e)throw Error("SyntaxError: An invalid or illegal string was specified");if(/\s/.test(e))throw Error("InvalidCharacterError: String contains an invalid character")}function n(n){var a={item:function(t){if(0==arguments.length)throw new TypeError("Not enough arguments");return e(n)[+t]||null},contains:function(a){if(0==arguments.length)throw new TypeError("Not enough arguments");return a+="",t(a),e(n).indexOf(a)>-1},add:function(){if(0==arguments.length)throw new TypeError("Not enough arguments");for(var a=e(n),i=a.length,o=0,r=arguments.length;r>o;o++){var s=arguments[o]+"";t(s),-1==a.indexOf(s)&&a.push(s)}a.length>i&&(n.className=a.join(" "))},remove:function(){if(0==arguments.length)throw new TypeError("Not enough arguments");for(var a=e(n),i=a.length,o=0,r=arguments.length;r>o;o++){var s=arguments[o]+"";t(s);for(var l;(l=a.indexOf(s))>-1;)a.splice(l,1)}a.length<i&&(n.className=a.join(" "))},toggle:function(){if(0==arguments.length)throw new TypeError("Not enough arguments");for(var a=e(n),i=0,o=arguments.length;o>i;i++){var r=arguments[i]+"";t(r);var s=a.indexOf(r);if(-1==s)a.push(r);else do a.splice(s,1);while((s=a.indexOf(r))>-1)}n.className=a.join(" ")}};try{Object.defineProperty(a,"length",{get:function(){return e(n).length},configurable:!1,enumerable:!1})}catch(i){}return a}document.documentElement.classList||Object.defineProperty(Element.prototype,"classList",{get:function(){return this.classList=n(this)},configurable:!0,enumerable:!1})}(),function(e){e.fn.seeable=function(e){var t=1e3;e=e||1;var n=this[0];if(!n)return!1;for(var a,i,o=this.offset(),r=Math.ceil(o.left)+1,s=Math.ceil(o.top)+1,l=r+n.offsetWidth,c=s+n.offsetHeight,u=[[r,s],[Math.round(r+(l-r-1)*e),s],[r,Math.round(s+(c-s-1)*e)],[Math.round(r+(l-r-1)*e),Math.round(s+(c-s-1)*e)]],d=!0,h=0;h<u.length;h++){a=u[h];var p=document.elementFromPoint(a[0],a[1]);i=!1;for(var f=0;p&&!i&&t>f;)i=p==n,p=p.parentNode,f++;d=d&&i}return d}}(window.jQuery),function(e){"function"==typeof define&&define.amd?define("object"!=typeof document||"loading"!==document.readyState?[]:"html5-history-api",e):e()}(function(){function e(){}function t(e,n,a){var i=/(?:(\w+\:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/;if(null==e||""===e||n)e=n?e:w.href,T&&!a||(e=e.replace(/^[^#]*/,"")||"#",e=w.protocol.replace(/:.*$|$/,":")+"//"+w.host+F.basepath+e.replace(RegExp("^#[/]?(?:"+F.type+")?"),""));else{var o=t(),r=v.getElementsByTagName("base")[0];!a&&r&&r.getAttribute("href")&&(r.href=r.href,o=t(r.href,null,!0));var s=o._pathname,l=o._protocol;e=""+e,e=/^(?:\w+\:)?\/\//.test(e)?0===e.indexOf("/")?l+e:e:l+"//"+o._host+(0===e.indexOf("/")?e:0===e.indexOf("?")?s+e:0===e.indexOf("#")?s+o._search+e:s.replace(/[^\/]+$/g,"")+e)}z.href=e;var c=i.exec(z.href),u=c[2]+(c[3]?":"+c[3]:""),d=c[4]||"/",h=c[5]||"",p="#"===c[6]?"":c[6]||"",f=d+h+p,m=d.replace(RegExp("^"+F.basepath,"i"),F.type)+h;return{_href:c[1]+"//"+u+f,_protocol:c[1],_host:u,_hostname:c[2],_port:c[3]||"",_pathname:d,_search:h,_hash:p,_relative:f,_nohash:m,_special:m+p}}function n(){var e;try{e=_.sessionStorage,e.setItem(O+"t","1"),e.removeItem(O+"t")}catch(t){e={getItem:function(e){var t=v.cookie.split(e+"=");return t.length>1&&t.pop().split(";").shift()||"null"},setItem:function(e,t){var n={};(n[w.href]=C.state)&&(v.cookie=e+"="+k.stringify(n))}}}try{W=k.parse(e.getItem(O))||{}}catch(t){W={}}R(j+"unload",function(){e.setItem(O,k.stringify(W))},!1)}function a(t,n,a,i){var o=0;a||(a={set:e},o=1);var r=!a.set,s=!a.get,l={configurable:!0,set:function(){r=1},get:function(){s=1}};try{E(t,n,l),t[n]=t[n],E(t,n,a)}catch(c){}if(!(r&&s||(t.__defineGetter__&&(t.__defineGetter__(n,l.get),t.__defineSetter__(n,l.set),t[n]=t[n],a.get&&t.__defineGetter__(n,a.get),a.set&&t.__defineSetter__(n,a.set)),r&&s))){if(o)return!1;if(t===_){try{var u=t[n];t[n]=null}catch(c){}if("execScript"in _)_.execScript("Public "+n,"VBScript"),_.execScript("var "+n+";","JavaScript");else try{E(t,n,{value:e})}catch(c){"onpopstate"===n&&(R("popstate",a=function(){N("popstate",a,!1);var e=t.onpopstate;t.onpopstate=null,setTimeout(function(){t.onpopstate=e},1)},!1),U=0)}t[n]=u}else try{try{var d=b.create(t);E(b.getPrototypeOf(d)===t?d:t,n,a);for(var h in t)"function"==typeof t[h]&&(d[h]=t[h].bind(t));try{i.call(d,d,t)}catch(c){}t=d}catch(c){E(t.constructor.prototype,n,a)}}catch(c){return!1}}return t}function i(e,t,n){return n=n||{},e=e===J?w:e,n.set=n.set||function(n){e[t]=n},n.get=n.get||function(){return e[t]},n}function o(e,t,n){e in V?V[e].push(t):arguments.length>3?R(e,t,n,arguments[3]):R(e,t,n)}function r(e,t,n){var a=V[e];if(a){for(var i=a.length;i--;)if(a[i]===t){a.splice(i,1);break}}else N(e,t,n)}function s(t,n){var i=(""+("string"==typeof t?t:t.type)).replace(/^on/,""),o=V[i];if(o){if(n="string"==typeof t?n:t,null==n.target)for(var r=["target","currentTarget","srcElement","type"];t=r.pop();)n=a(n,t,{get:"type"===t?function(){return i}:function(){return _}});U&&(("popstate"===i?_.onpopstate:_.onhashchange)||e).call(_,n);for(var s=0,l=o.length;l>s;s++)o[s].call(_,n);return!0}return B(t,n)}function l(){var e=v.createEvent?v.createEvent("Event"):v.createEventObject();e.initEvent?e.initEvent("popstate",!1,!1):e.type="popstate",e.state=C.state,s(e)}function c(){H&&(H=!1,l())}function u(e,n,a,i){if(T)q=w.href;else{0===G&&(G=2);var o=t(n,2===G&&-1!==(""+n).indexOf("#"));o._relative!==t()._relative&&(q=i,a?w.replace("#"+o._special):w.hash=o._special)}!S&&e&&(W[w.href]=e),H=!1}function d(e){var n=q;if(q=w.href,n){$!==w.href&&l(),e=e||_.event;var a=t(n,!0),i=t();e.oldURL||(e.oldURL=a._href,e.newURL=i._href),a._hash!==i._hash&&s(e)}}function h(e){setTimeout(function(){R("popstate",function(e){$=w.href,S||(e=a(e,"state",{get:function(){return C.state}})),s(e)},!1)},0),!T&&e!==!0&&"location"in C&&(m(P.hash),c())}function p(e){for(;e;){if("A"===e.nodeName)return e;e=e.parentNode}}function f(e){var n=e||_.event,a=p(n.target||n.srcElement),i="defaultPrevented"in n?n.defaultPrevented:n.returnValue===!1;if(a&&"A"===a.nodeName&&!i){var o=t(),r=t(a.getAttribute("href",2)),s=o._href.split("#").shift()===r._href.split("#").shift();s&&r._hash&&(o._hash!==r._hash&&(P.hash=r._hash),m(r._hash),n.preventDefault?n.preventDefault():n.returnValue=!1)}}function m(e){var t=v.getElementById(e=(e||"").replace(/^#/,""));if(t&&t.id===e&&"A"===t.nodeName){var n=t.getBoundingClientRect();_.scrollTo(y.scrollLeft||0,n.top+(y.scrollTop||0)-(y.clientTop||0))}}function g(){var e=v.getElementsByTagName("script"),o=(e[e.length-1]||{}).src||"",r=-1!==o.indexOf("?")?o.split("?").pop():"";r.replace(/(\w+)(?:=([^&]*))?/g,function(e,t,n){F[t]=(n||"").replace(/^(0|false)$/,"")}),R(j+"hashchange",d,!1);var s=[J,P,Y,_,X,C];S&&delete X.state;for(var l=0;l<s.length;l+=2)for(var c in s[l])if(s[l].hasOwnProperty(c))if("function"==typeof s[l][c])s[l+1][c]=s[l][c];else{var u=i(s[l],c,s[l][c]);if(!a(s[l+1],c,u,function(e,t){t===C&&(_.history=C=s[l+1]=e)}))return N(j+"hashchange",d,!1),!1;s[l+1]===_&&(V[c]=V[c.substr(2)]=[])}return C.setup(),F.redirect&&C.redirect(),F.init&&(G=1),!S&&k&&n(),T||v[M](j+"click",f,!1),"complete"===v.readyState?h(!0):(T||t()._relative===F.basepath||(H=!0),R(j+"load",h,!1)),!0}var _=("object"==typeof window?window:this)||{};if(!_.history||"emulate"in _.history)return _.history;var v=_.document,y=v.documentElement,b=_.Object,k=_.JSON,w=_.location,x=_.history,C=x,L=x.pushState,I=x.replaceState,T=!!L,S="state"in x,E=b.defineProperty,P=a({},"t")?{}:v.createElement("a"),j="",M=_.addEventListener?"addEventListener":(j="on")&&"attachEvent",A=_.removeEventListener?"removeEventListener":"detachEvent",D=_.dispatchEvent?"dispatchEvent":"fireEvent",R=_[M],N=_[A],B=_[D],F={basepath:"/",redirect:0,type:"/",init:0},O="__historyAPI__",z=v.createElement("a"),q=w.href,$="",U=1,H=!1,G=0,W={},V={},Z=v.title,Y={onhashchange:null,onpopstate:null},K=function(e,t){var n=_.history!==x;n&&(_.history=x),e.apply(x,t),n&&(_.history=C)},X={setup:function(e,t,n){F.basepath=(""+(null==e?F.basepath:e)).replace(/(?:^|\/)[^\/]*$/,"/"),F.type=null==t?F.type:t,F.redirect=null==n?F.redirect:!!n},redirect:function(e,n){if(C.setup(n,e),n=F.basepath,_.top==_.self){var a=t(null,!1,!0)._relative,i=w.pathname+w.search;T?(i=i.replace(/([^\/])$/,"$1/"),a!=n&&RegExp("^"+n+"$","i").test(i)&&w.replace(a)):i!=n&&(i=i.replace(/([^\/])\?/,"$1/?"),RegExp("^"+n,"i").test(i)&&w.replace(n+"#"+i.replace(RegExp("^"+n,"i"),F.type)+w.hash))}},pushState:function(e,t,n){var a=v.title;null!=Z&&(v.title=Z),L&&K(L,arguments),u(e,n),v.title=a,Z=t},replaceState:function(e,t,n){var a=v.title;null!=Z&&(v.title=Z),delete W[w.href],I&&K(I,arguments),u(e,n,!0),v.title=a,Z=t},location:{set:function(e){0===G&&(G=1),_.location=e},get:function(){return 0===G&&(G=1),T?w:P}},state:{get:function(){return W[w.href]||null}}},J={assign:function(e){0===(""+e).indexOf("#")?u(null,e):w.assign(e)},reload:function(){w.reload()},replace:function(e){0===(""+e).indexOf("#")?u(null,e,!0):w.replace(e)},toString:function(){return this.href},href:{get:function(){return t()._href}},protocol:null,host:null,hostname:null,port:null,pathname:{get:function(){return t()._pathname}},search:{get:function(){return t()._search}},hash:{set:function(e){u(null,(""+e).replace(/^(#|)/,"#"),!1,q)},get:function(){return t()._hash}}};return g()?(C.emulate=!T,_[M]=o,_[A]=r,_[D]=s,C):void 0}),function(window,document,undefined){function expose(){var e=window.L;L.noConflict=function(){return window.L=e,this},window.L=L}var L={version:"1.0.0-beta.2"};"object"==typeof module&&"object"==typeof module.exports?module.exports=L:"function"==typeof define&&define.amd&&define(L),undefined!==window&&expose(),L.Util={extend:function(e){var t,n,a,i;for(n=1,a=arguments.length;a>n;n++){i=arguments[n];for(t in i)e[t]=i[t]}return e},create:Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),bind:function(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var a=n.call(arguments,2);return function(){return e.apply(t,a.length?a.concat(n.call(arguments)):arguments)}},stamp:function(e){return e._leaflet_id=e._leaflet_id||++L.Util.lastId,e._leaflet_id},lastId:0,throttle:function(e,t,n){var a,i,o,r;return r=function(){a=!1,i&&(o.apply(n,i),i=!1)},o=function(){a?i=arguments:(e.apply(n,arguments),setTimeout(r,t),a=!0)}},wrapNum:function(e,t,n){var a=t[1],i=t[0],o=a-i;return e===a&&n?e:((e-i)%o+o)%o+i},falseFn:function(){return!1},formatNum:function(e,t){var n=Math.pow(10,t||5);return Math.round(e*n)/n},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},splitWords:function(e){return L.Util.trim(e).split(/\s+/)},setOptions:function(e,t){e.hasOwnProperty("options")||(e.options=e.options?L.Util.create(e.options):{});for(var n in t)e.options[n]=t[n];return e.options},getParamString:function(e,t,n){var a=[];for(var i in e)a.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(e[i]));return(t&&-1!==t.indexOf("?")?"&":"?")+a.join("&")},template:function(e,t){return e.replace(L.Util.templateRe,function(e,n){var a=t[n];if(a===undefined)throw Error("No value provided for variable "+e);return"function"==typeof a&&(a=a(t)),a})},templateRe:/\{ *([\w_]+) *\}/g,isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},indexOf:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}function t(e){var t=+new Date,a=Math.max(0,16-(t-n));return n=t+a,window.setTimeout(e,a)}var n=0,a=window.requestAnimationFrame||e("RequestAnimationFrame")||t,i=window.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};L.Util.requestAnimFrame=function(e,n,i){return i&&a===t?(e.call(n),undefined):a.call(window,L.bind(e,n))},L.Util.cancelAnimFrame=function(e){e&&i.call(window,e)}}(),L.extend=L.Util.extend,L.bind=L.Util.bind,L.stamp=L.Util.stamp,L.setOptions=L.Util.setOptions,L.Class=function(){},L.Class.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=t.__super__=this.prototype,a=L.Util.create(n);a.constructor=t,t.prototype=a;for(var i in this)this.hasOwnProperty(i)&&"prototype"!==i&&(t[i]=this[i]);return e.statics&&(L.extend(t,e.statics),delete e.statics),e.includes&&(L.Util.extend.apply(null,[a].concat(e.includes)),delete e.includes),a.options&&(e.options=L.Util.extend(L.Util.create(a.options),e.options)),L.extend(a,e),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=a._initHooks.length;t>e;e++)a._initHooks[e].call(this)}},t},L.Class.include=function(e){L.extend(this.prototype,e)},L.Class.mergeOptions=function(e){L.extend(this.prototype.options,e)},L.Class.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"==typeof e?e:function(){this[e].apply(this,t)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)},L.Evented=L.Class.extend({on:function(e,t,n){if("object"==typeof e)for(var a in e)this._on(a,e[a],t);else{e=L.Util.splitWords(e);for(var i=0,o=e.length;o>i;i++)this._on(e[i],t,n)}return this},off:function(e,t,n){if(e)if("object"==typeof e)for(var a in e)this._off(a,e[a],t);else{e=L.Util.splitWords(e);for(var i=0,o=e.length;o>i;i++)this._off(e[i],t,n)}else delete this._events;return this},_on:function(e,t,n){var a=this._events=this._events||{},i=n&&n!==this&&L.stamp(n);if(i){var o=e+"_idx",r=e+"_len",s=a[o]=a[o]||{},l=L.stamp(t)+"_"+i;s[l]||(s[l]={fn:t,ctx:n},a[r]=(a[r]||0)+1)}else a[e]=a[e]||[],a[e].push({fn:t})},_off:function(e,t,n){var a=this._events,i=e+"_idx",o=e+"_len";if(a){if(!t)return delete a[e],delete a[i],delete a[o],undefined;var r,s,l,c,u,d=n&&n!==this&&L.stamp(n);if(d)u=L.stamp(t)+"_"+d,r=a[i],r&&r[u]&&(c=r[u],delete r[u],a[o]--);else if(r=a[e])for(s=0,l=r.length;l>s;s++)if(r[s].fn===t){c=r[s],r.splice(s,1);break}c&&(c.fn=L.Util.falseFn)}},fire:function(e,t,n){if(!this.listens(e,n))return this;var a=L.Util.extend({},t,{type:e,target:this}),i=this._events;if(i){var o,r,s,l,c=i[e+"_idx"];if(i[e])for(s=i[e].slice(),o=0,r=s.length;r>o;o++)s[o].fn.call(this,a);for(l in c)c[l].fn.call(c[l].ctx,a)}return n&&this._propagateEvent(a),this},listens:function(e,t){var n=this._events;if(n&&(n[e]||n[e+"_len"]))return!0;if(t)for(var a in this._eventParents)if(this._eventParents[a].listens(e,t))return!0;return!1},once:function(e,t,n){if("object"==typeof e){for(var a in e)this.once(a,e[a],t);return this}var i=L.bind(function(){this.off(e,t,n).off(e,i,n)},this);return this.on(e,t,n).on(e,i,n)},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[L.stamp(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[L.stamp(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,L.extend({layer:e.target},e),!0)}});var proto=L.Evented.prototype;proto.addEventListener=proto.on,proto.removeEventListener=proto.clearAllEventListeners=proto.off,proto.addOneTimeEventListener=proto.once,proto.fireEvent=proto.fire,proto.hasEventListeners=proto.listens,L.Mixin={Events:proto},function(){var e=navigator.userAgent.toLowerCase(),t=document.documentElement,n="ActiveXObject"in window,a=-1!==e.indexOf("webkit"),i=-1!==e.indexOf("phantom"),o=-1!==e.search("android [23]"),r=-1!==e.indexOf("chrome"),s=-1!==e.indexOf("gecko")&&!a&&!window.opera&&!n,l="undefined"!=typeof orientation||-1!==e.indexOf("mobile"),c=!window.PointerEvent&&window.MSPointerEvent,u=window.PointerEvent&&navigator.pointerEnabled||c,d=n&&"transition"in t.style,h="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!o,p="MozPerspective"in t.style,f="OTransition"in t.style,m=!window.L_NO_TOUCH&&!i&&(u||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);L.Browser={ie:n,ielt9:n&&!document.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in document),webkit:a,gecko:s,android:-1!==e.indexOf("android"),android23:o,chrome:r,safari:!r&&-1!==e.indexOf("safari"),ie3d:d,webkit3d:h,gecko3d:p,opera12:f,any3d:!window.L_DISABLE_3D&&(d||h||p)&&!f&&!i,mobile:l,mobileWebkit:l&&a,mobileWebkit3d:l&&h,mobileOpera:l&&window.opera,mobileGecko:l&&s,touch:!!m,msPointer:!!c,pointer:!!u,retina:(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1}}(),L.Point=function(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t},L.Point.prototype={clone:function(){return new L.Point(this.x,this.y)},add:function(e){return this.clone()._add(L.point(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(L.point(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new L.Point(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new L.Point(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(e){e=L.point(e);var t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return e=L.point(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=L.point(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+L.Util.formatNum(this.x)+", "+L.Util.formatNum(this.y)+")"}},L.point=function(e,t,n){return e instanceof L.Point?e:L.Util.isArray(e)?new L.Point(e[0],e[1]):e===undefined||null===e?e:new L.Point(e,t,n)},L.Bounds=function(e,t){if(e)for(var n=t?[e,t]:e,a=0,i=n.length;i>a;a++)this.extend(n[a])},L.Bounds.prototype={extend:function(e){return e=L.point(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new L.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new L.Point(this.min.x,this.max.y)},getTopRight:function(){return new L.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return e="number"==typeof e[0]||e instanceof L.Point?L.point(e):L.bounds(e),e instanceof L.Bounds?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=L.bounds(e);var t=this.min,n=this.max,a=e.min,i=e.max,o=i.x>=t.x&&a.x<=n.x,r=i.y>=t.y&&a.y<=n.y;return o&&r},overlaps:function(e){e=L.bounds(e);var t=this.min,n=this.max,a=e.min,i=e.max,o=i.x>t.x&&a.x<n.x,r=i.y>t.y&&a.y<n.y;return o&&r},isValid:function(){return!(!this.min||!this.max)}},L.bounds=function(e,t){return!e||e instanceof L.Bounds?e:new L.Bounds(e,t)},L.Transformation=function(e,t,n,a){this._a=e,this._b=t,this._c=n,this._d=a},L.Transformation.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new L.Point((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}},L.DomUtil={get:function(e){return"string"==typeof e?document.getElementById(e):e},getStyle:function(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var a=document.defaultView.getComputedStyle(e,null);n=a?a[t]:null}return"auto"===n?null:n},create:function(e,t,n){var a=document.createElement(e);return a.className=t,n&&n.appendChild(a),a},remove:function(e){var t=e.parentNode;t&&t.removeChild(e)},empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},toFront:function(e){e.parentNode.appendChild(e)},toBack:function(e){var t=e.parentNode;t.insertBefore(e,t.firstChild)},hasClass:function(e,t){if(e.classList!==undefined)return e.classList.contains(t);var n=L.DomUtil.getClass(e);return n.length>0&&RegExp("(^|\\s)"+t+"(\\s|$)").test(n)},addClass:function(e,t){if(e.classList!==undefined)for(var n=L.Util.splitWords(t),a=0,i=n.length;i>a;a++)e.classList.add(n[a]);else if(!L.DomUtil.hasClass(e,t)){var o=L.DomUtil.getClass(e);L.DomUtil.setClass(e,(o?o+" ":"")+t)}},removeClass:function(e,t){e.classList!==undefined?e.classList.remove(t):L.DomUtil.setClass(e,L.Util.trim((" "+L.DomUtil.getClass(e)+" ").replace(" "+t+" "," ")))},setClass:function(e,t){e.className.baseVal===undefined?e.className=t:e.className.baseVal=t},getClass:function(e){return e.className.baseVal===undefined?e.className:e.className.baseVal},setOpacity:function(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&L.DomUtil._setOpacityIE(e,t)},_setOpacityIE:function(e,t){var n=!1,a="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(a)}catch(i){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+a+"(opacity="+t+")"},testProp:function(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1},setTransform:function(e,t,n){var a=t||new L.Point(0,0);e.style[L.DomUtil.TRANSFORM]=(L.Browser.ie3d?"translate("+a.x+"px,"+a.y+"px)":"translate3d("+a.x+"px,"+a.y+"px,0)")+(n?" scale("+n+")":"")},setPosition:function(e,t){e._leaflet_pos=t,L.Browser.any3d?L.DomUtil.setTransform(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")},getPosition:function(e){return e._leaflet_pos||new L.Point(0,0)}},function(){L.DomUtil.TRANSFORM=L.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var e=L.DomUtil.TRANSITION=L.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(L.DomUtil.TRANSITION_END="webkitTransition"===e||"OTransition"===e?e+"End":"transitionend","onselectstart"in document)L.DomUtil.disableTextSelection=function(){L.DomEvent.on(window,"selectstart",L.DomEvent.preventDefault)},L.DomUtil.enableTextSelection=function(){L.DomEvent.off(window,"selectstart",L.DomEvent.preventDefault)};else{var t=L.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);L.DomUtil.disableTextSelection=function(){if(t){var e=document.documentElement.style;this._userSelect=e[t],e[t]="none"}},L.DomUtil.enableTextSelection=function(){t&&(document.documentElement.style[t]=this._userSelect,delete this._userSelect)}}L.DomUtil.disableImageDrag=function(){L.DomEvent.on(window,"dragstart",L.DomEvent.preventDefault)},L.DomUtil.enableImageDrag=function(){L.DomEvent.off(window,"dragstart",L.DomEvent.preventDefault)},L.DomUtil.preventOutline=function(e){for(;-1===e.tabIndex;)e=e.parentNode;e&&e.style&&(L.DomUtil.restoreOutline(),this._outlineElement=e,this._outlineStyle=e.style.outline,e.style.outline="none",L.DomEvent.on(window,"keydown",L.DomUtil.restoreOutline,this))},L.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,L.DomEvent.off(window,"keydown",L.DomUtil.restoreOutline,this))}}(),L.LatLng=function(e,t,n){if(isNaN(e)||isNaN(t))throw Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,n!==undefined&&(this.alt=+n)},L.LatLng.prototype={equals:function(e,t){if(!e)return!1;e=L.latLng(e);var n=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return(t===undefined?1e-9:t)>=n},toString:function(e){return"LatLng("+L.Util.formatNum(this.lat,e)+", "+L.Util.formatNum(this.lng,e)+")"},distanceTo:function(e){return L.CRS.Earth.distance(this,L.latLng(e))},wrap:function(){return L.CRS.Earth.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return L.latLngBounds([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new L.LatLng(this.lat,this.lng,this.alt)}},L.latLng=function(e,t,n){return e instanceof L.LatLng?e:L.Util.isArray(e)&&"object"!=typeof e[0]?3===e.length?new L.LatLng(e[0],e[1],e[2]):2===e.length?new L.LatLng(e[0],e[1]):null:e===undefined||null===e?e:"object"==typeof e&&"lat"in e?new L.LatLng(e.lat,"lng"in e?e.lng:e.lon,e.alt):t===undefined?null:new L.LatLng(e,t,n)},L.LatLngBounds=function(e,t){if(e)for(var n=t?[e,t]:e,a=0,i=n.length;i>a;a++)this.extend(n[a])},L.LatLngBounds.prototype={extend:function(e){var t,n,a=this._southWest,i=this._northEast;if(e instanceof L.LatLng)t=e,n=e;else{if(!(e instanceof L.LatLngBounds))return e?this.extend(L.latLng(e)||L.latLngBounds(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return a||i?(a.lat=Math.min(t.lat,a.lat),a.lng=Math.min(t.lng,a.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new L.LatLng(t.lat,t.lng),this._northEast=new L.LatLng(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,a=Math.abs(t.lat-n.lat)*e,i=Math.abs(t.lng-n.lng)*e;return new L.LatLngBounds(new L.LatLng(t.lat-a,t.lng-i),new L.LatLng(n.lat+a,n.lng+i))},getCenter:function(){return new L.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new L.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new L.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof L.LatLng?L.latLng(e):L.latLngBounds(e);var t,n,a=this._southWest,i=this._northEast;return e instanceof L.LatLngBounds?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=a.lat&&n.lat<=i.lat&&t.lng>=a.lng&&n.lng<=i.lng},intersects:function(e){e=L.latLngBounds(e);var t=this._southWest,n=this._northEast,a=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>=t.lat&&a.lat<=n.lat,r=i.lng>=t.lng&&a.lng<=n.lng;return o&&r},overlaps:function(e){e=L.latLngBounds(e);var t=this._southWest,n=this._northEast,a=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>t.lat&&a.lat<n.lat,r=i.lng>t.lng&&a.lng<n.lng;return o&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e){return e?(e=L.latLngBounds(e),this._southWest.equals(e.getSouthWest())&&this._northEast.equals(e.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},L.latLngBounds=function(e,t){return!e||e instanceof L.LatLngBounds?e:new L.LatLngBounds(e,t)},L.Projection={},L.Projection.LonLat={project:function(e){return new L.Point(e.lng,e.lat)},unproject:function(e){return new L.LatLng(e.y,e.x)},bounds:L.bounds([-180,-90],[180,90])},L.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,a=Math.max(Math.min(n,e.lat),-n),i=Math.sin(a*t);return new L.Point(this.R*e.lng*t,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(e){var t=180/Math.PI;return new L.LatLng((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=6378137*Math.PI;return L.bounds([-e,-e],[e,e])}()},L.CRS={latLngToPoint:function(e,t){var n=this.projection.project(e),a=this.scale(t);return this.transformation._transform(n,a);
},pointToLatLng:function(e,t){var n=this.scale(t),a=this.transformation.untransform(e,n);return this.projection.unproject(a)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e),a=this.transformation.transform(t.min,n),i=this.transformation.transform(t.max,n);return L.bounds(a,i)},wrapLatLng:function(e){var t=this.wrapLng?L.Util.wrapNum(e.lng,this.wrapLng,!0):e.lng,n=this.wrapLat?L.Util.wrapNum(e.lat,this.wrapLat,!0):e.lat,a=e.alt;return L.latLng(n,t,a)}},L.CRS.Simple=L.extend({},L.CRS,{projection:L.Projection.LonLat,transformation:new L.Transformation(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,a=t.lat-e.lat;return Math.sqrt(n*n+a*a)},infinite:!0}),L.CRS.Earth=L.extend({},L.CRS,{wrapLng:[-180,180],R:6378137,distance:function(e,t){var n=Math.PI/180,a=e.lat*n,i=t.lat*n,o=Math.sin(a)*Math.sin(i)+Math.cos(a)*Math.cos(i)*Math.cos((t.lng-e.lng)*n);return this.R*Math.acos(Math.min(o,1))}}),L.CRS.EPSG3857=L.extend({},L.CRS.Earth,{code:"EPSG:3857",projection:L.Projection.SphericalMercator,transformation:function(){var e=.5/(Math.PI*L.Projection.SphericalMercator.R);return new L.Transformation(e,.5,-e,.5)}()}),L.CRS.EPSG900913=L.extend({},L.CRS.EPSG3857,{code:"EPSG:900913"}),L.CRS.EPSG4326=L.extend({},L.CRS.Earth,{code:"EPSG:4326",projection:L.Projection.LonLat,transformation:new L.Transformation(1/180,1,-1/180,.5)}),L.Map=L.Evented.extend({options:{crs:L.CRS.EPSG3857,fadeAnimation:!0,trackResize:!0,markerZoomAnimation:!0,maxBoundsViscosity:0,transform3DLimit:8388608},initialize:function(e,t){t=L.setOptions(this,t),this._initContainer(e),this._initLayout(),this._onResize=L.bind(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==undefined&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==undefined&&this.setView(L.latLng(t.center),t.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._addLayers(this.options.layers)},setView:function(e,t){return t=t===undefined?this.getZoom():t,this._resetView(L.latLng(e),t),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return this.setZoom(this._zoom+(e||1),t)},zoomOut:function(e,t){return this.setZoom(this._zoom-(e||1),t)},setZoomAround:function(e,t,n){var a=this.getZoomScale(t),i=this.getSize().divideBy(2),o=e instanceof L.Point?e:this.latLngToContainerPoint(e),r=o.subtract(i).multiplyBy(1-1/a),s=this.containerPointToLatLng(i.add(r));return this.setView(s,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():L.latLngBounds(e);var n=L.point(t.paddingTopLeft||t.padding||[0,0]),a=L.point(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(e,!1,n.add(a));i="number"==typeof t.maxZoom?Math.min(t.maxZoom,i):i;var o=a.subtract(n).divideBy(2),r=this.project(e.getSouthWest(),i),s=this.project(e.getNorthEast(),i),l=this.unproject(r.add(s).divideBy(2).add(o),i);return{center:l,zoom:i}},fitBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e){return this.fire("movestart"),this._rawPanBy(L.point(e)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(e){return(e=L.latLngBounds(e))?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):this.off("moveend",this._panInsideMaxBounds)},setMinZoom:function(e){return this.options.minZoom=e,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(e):this},setMaxZoom:function(e){return this.options.maxZoom=e,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),a=this._limitCenter(n,this._zoom,L.latLngBounds(e));return n.equals(a)||this.panTo(a,t),this._enforcingBounds=!1,this},invalidateSize:function(e){if(!this._loaded)return this;e=L.extend({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),a=t.divideBy(2).round(),i=n.divideBy(2).round(),o=a.subtract(i);return o.x||o.y?(e.animate&&e.pan?this.panBy(o):(e.pan&&this._rawPanBy(o),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(L.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:n})):this},stop:function(){return L.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){this._initEvents(!0);try{delete this._container._leaflet}catch(e){this._container._leaflet=undefined}L.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var t in this._layers)this._layers[t].remove();return this},createPane:function(e,t){var n="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),a=L.DomUtil.create("div",n,t||this._mapPane);return e&&(this._panes[e]=a),a},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),n=this.unproject(e.getTopRight());return new L.LatLngBounds(t,n)},getMinZoom:function(){return this.options.minZoom===undefined?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===undefined?this._layersMaxZoom===undefined?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=L.latLngBounds(e);var a,i=this.getMinZoom()-(t?1:0),o=this.getMaxZoom(),r=this.getSize(),s=e.getNorthWest(),l=e.getSouthEast(),c=!0;n=L.point(n||[0,0]);do i++,a=this.project(l,i).subtract(this.project(s,i)).add(n).floor(),c=t?a.x<r.x||a.y<r.y:r.contains(a);while(c&&o>=i);return c&&t?null:t?i:i-1},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new L.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new L.Bounds(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===undefined?this.getZoom():e)},getPane:function(e){return"string"==typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=t===undefined?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;return t=t===undefined?this._zoom:t,n.zoom(e*n.scale(t))},project:function(e,t){return t=t===undefined?this._zoom:t,this.options.crs.latLngToPoint(L.latLng(e),t)},unproject:function(e,t){return t=t===undefined?this._zoom:t,this.options.crs.pointToLatLng(L.point(e),t)},layerPointToLatLng:function(e){var t=L.point(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(L.latLng(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(L.latLng(e))},distance:function(e,t){return this.options.crs.distance(L.latLng(e),L.latLng(t))},containerPointToLayerPoint:function(e){return L.point(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return L.point(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(L.point(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(L.latLng(e)))},mouseEventToContainerPoint:function(e){return L.DomEvent.getMousePosition(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=L.DomUtil.get(e);if(!t)throw Error("Map container not found.");if(t._leaflet)throw Error("Map container is already initialized.");L.DomEvent.addListener(t,"scroll",this._onScroll,this),t._leaflet=!0},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&L.Browser.any3d,L.DomUtil.addClass(e,"leaflet-container"+(L.Browser.touch?" leaflet-touch":"")+(L.Browser.retina?" leaflet-retina":"")+(L.Browser.ielt9?" leaflet-oldie":"")+(L.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=L.DomUtil.getStyle(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),L.DomUtil.setPosition(this._mapPane,new L.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(L.DomUtil.addClass(e.markerPane,"leaflet-zoom-hide"),L.DomUtil.addClass(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t){L.DomUtil.setPosition(this._mapPane,new L.Point(0,0));var n=!this._loaded;this._loaded=!0,t=this._limitZoom(t);var a=this._zoom!==t;this._moveStart(a)._move(e,t)._moveEnd(a),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(e){return e&&this.fire("zoomstart"),this.fire("movestart")},_move:function(e,t,n){t===undefined&&(t=this._zoom);var a=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),a&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_rawPanBy:function(e){L.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw Error("Set map center and zoom first.")},_initEvents:function(e){if(L.DomEvent){this._targets={},this._targets[L.stamp(this._container)]=this;var t=e?"off":"on";L.DomEvent[t](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&L.DomEvent[t](window,"resize",this._onResize,this),L.Browser.any3d&&this.options.transform3DLimit&&this[t]("moveend",this._onMoveEnd)}},_onResize:function(){L.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=L.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,a=[],i="mouseout"===t||"mouseover"===t,o=e.target||e.srcElement,r=!1;o;){if(n=this._targets[L.stamp(o)],n&&("click"===t||"preclick"===t)&&!e._simulated&&this._draggableMoved(n)){r=!0;break}if(n&&n.listens(t,!0)){if(i&&!L.DomEvent._isExternalTarget(o,e))break;if(a.push(n),i)break}if(o===this._container)break;o=o.parentNode}return a.length||r||i||!L.DomEvent._isExternalTarget(o,e)||(a=[this]),a},_handleDOMEvent:function(e){if(this._loaded&&!L.DomEvent._skipped(e)){var t="keypress"===e.type&&13===e.keyCode?"click":e.type;if("click"===e.type){var n=L.Util.extend({},e);n.type="preclick",this._handleDOMEvent(n)}"mousedown"===t&&L.DomUtil.preventOutline(e.target||e.srcElement),this._fireDOMEvent(e,t)}},_fireDOMEvent:function(e,t,n){if(!e._stopped&&(n=(n||[]).concat(this._findEventTargets(e,t)),n.length)){var a=n[0];"contextmenu"===t&&a.listens(t,!0)&&L.DomEvent.preventDefault(e);var i={originalEvent:e};if("keypress"!==e.type){var o=a instanceof L.Marker;i.containerPoint=o?this.latLngToContainerPoint(a.getLatLng()):this.mouseEventToContainerPoint(e),i.layerPoint=this.containerPointToLayerPoint(i.containerPoint),i.latlng=o?a.getLatLng():this.layerPointToLatLng(i.layerPoint)}for(var r=0;r<n.length;r++)if(n[r].fire(t,i,!0),i.originalEvent._stopped||n[r].options.nonBubblingEvents&&-1!==L.Util.indexOf(n[r].options.nonBubblingEvents,t))return}},_draggableMoved:function(e){return e=e.options.draggable?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;t>e;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return L.DomUtil.getPosition(this._mapPane)||new L.Point(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var n=e&&t!==undefined?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var a=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(a)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var a=this.project(e,t),i=this.getSize().divideBy(2),o=new L.Bounds(a.subtract(i),a.add(i)),r=this._getBoundsOffset(o,n,t);return r.round().equals([0,0])?e:this.unproject(a.add(r),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),a=new L.Bounds(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(a,t))},_getBoundsOffset:function(e,t,n){var a=L.bounds(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),i=a.min.subtract(e.min),o=a.max.subtract(e.max),r=this._rebound(i.x,-o.x),s=this._rebound(i.y,-o.y);return new L.Point(r,s)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom();return L.Browser.any3d||(e=Math.round(e)),Math.max(t,Math.min(n,e))}}),L.map=function(e,t){return new L.Map(e,t)},L.Layer=L.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[]},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[L.stamp(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[L.stamp(e)],this},_layerAdd:function(e){var t=e.target;t.hasLayer(this)&&(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents&&t.on(this.getEvents(),this),this.onAdd(t),this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),t.fire("layeradd",{layer:this}))}}),L.Map.include({addLayer:function(e){var t=L.stamp(e);return this._layers[t]?e:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=L.stamp(e);return this._layers[t]?(this._loaded&&e.onRemove(this),e.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(e.getAttribution()),e.getEvents&&this.off(e.getEvents(),e),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return!!e&&L.stamp(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){e=e?L.Util.isArray(e)?e:[e]:[];for(var t=0,n=e.length;n>t;t++)this.addLayer(e[t])},_addZoomLimit:function(e){!isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[L.stamp(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=L.stamp(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-(1/0),n=this._getZoomSpan();for(var a in this._zoomBoundLayers){var i=this._zoomBoundLayers[a].options;e=i.minZoom===undefined?e:Math.min(e,i.minZoom),t=i.maxZoom===undefined?t:Math.max(t,i.maxZoom)}this._layersMaxZoom=t===-(1/0)?undefined:t,this._layersMinZoom=e===1/0?undefined:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange")}}),L.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:L.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,a=e.lat*t,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),r=o*Math.sin(a),s=Math.tan(Math.PI/4-a/2)/Math.pow((1-r)/(1+r),o/2);return a=-n*Math.log(Math.max(s,1e-10)),new L.Point(e.lng*t*n,a)},unproject:function(e){for(var t,n=180/Math.PI,a=this.R,i=this.R_MINOR/a,o=Math.sqrt(1-i*i),r=Math.exp(-e.y/a),s=Math.PI/2-2*Math.atan(r),l=0,c=.1;15>l&&Math.abs(c)>1e-7;l++)t=o*Math.sin(s),t=Math.pow((1-t)/(1+t),o/2),c=Math.PI/2-2*Math.atan(r*t)-s,s+=c;return new L.LatLng(s*n,e.x*n/a)}},L.CRS.EPSG3395=L.extend({},L.CRS.Earth,{code:"EPSG:3395",projection:L.Projection.Mercator,transformation:function(){var e=.5/(Math.PI*L.Projection.Mercator.R);return new L.Transformation(e,.5,-e,.5)}()}),L.GridLayer=L.Layer.extend({options:{pane:"tilePane",tileSize:256,opacity:1,zIndex:1,updateWhenIdle:L.Browser.mobile,updateInterval:200,attribution:null,bounds:null,minZoom:0},initialize:function(e){e=L.setOptions(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),L.DomUtil.remove(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(L.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(L.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var e={viewreset:this._resetAll,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=L.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof L.Point?e:new L.Point(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==undefined&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,a=-e(-(1/0),1/0),i=0,o=n.length;o>i;i++)t=n[i].style.zIndex,n[i]!==this._container&&t&&(a=e(a,+t));isFinite(a)&&(this.options.zIndex=a+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!L.Browser.ielt9&&this._map._fadeAnimated){L.DomUtil.setOpacity(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var a in this._tiles){var i=this._tiles[a];if(i.current&&i.loaded){var o=Math.min(1,(e-i.loaded)/200);L.DomUtil.setOpacity(i.el,o),1>o?t=!0:(i.active&&(n=!0),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(L.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=L.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=L.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(e===undefined)return undefined;for(var n in this._levels)this._levels[n].el.children.length||n===e?this._levels[n].el.style.zIndex=t-Math.abs(e-n):(L.DomUtil.remove(this._levels[n].el),this._removeTilesAtZoom(n),delete this._levels[n]);var a=this._levels[e],i=this._map;return a||(a=this._levels[e]={},a.el=L.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),a.el.style.zIndex=t,a.origin=i.project(i.unproject(i.getPixelOrigin()),e).round(),a.zoom=e,this._setZoomTransform(a,i.getCenter(),i.getZoom()),L.Util.falseFn(a.el.offsetWidth)),this._level=a,a},_pruneTiles:function(){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)return this._removeAllTiles();for(e in this._tiles)t=this._tiles[e],t.retain=t.current;for(e in this._tiles)if(t=this._tiles[e],t.current&&!t.active){var a=t.coords;this._retainParent(a.x,a.y,a.z,a.z-5)||this._retainChildren(a.x,a.y,a.z,a.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_resetAll:function(){for(var e in this._levels)L.DomUtil.remove(this._levels[e].el),delete this._levels[e];this._removeAllTiles(),this._tileZoom=null,this._resetView()},_retainParent:function(e,t,n,a){var i=Math.floor(e/2),o=Math.floor(t/2),r=n-1,s=new L.Point(+i,+o);s.z=+r;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),r>a?this._retainParent(i,o,r,a):!1)},_retainChildren:function(e,t,n,a){for(var i=2*e;2*e+2>i;i++)for(var o=2*t;2*t+2>o;o++){var r=new L.Point(i,o);r.z=n+1;var s=this._tileCoordsToKey(r),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),a>n+1&&this._retainChildren(i,o,n+1,a))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_setView:function(e,t,n,a){var i=Math.round(t);(this.options.maxZoom!==undefined&&i>this.options.maxZoom||this.options.minZoom!==undefined&&i<this.options.minZoom)&&(i=undefined);var o=i!==this._tileZoom;a&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),i!==undefined&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var a=this._map.getZoomScale(n,e.zoom),i=e.origin.multiplyBy(a).subtract(this._map._getNewPixelOrigin(t,n)).round();L.Browser.any3d?L.DomUtil.setTransform(e.el,i,a):L.DomUtil.setPosition(e.el,i)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),a=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],a).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],a).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],a).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],a).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._resetView()},_getTiledPixelBounds:function(e){var t=this._map,n=t.getZoomScale(t.getZoom(),this._tileZoom),a=t.project(e,this._tileZoom).floor(),i=t.getSize().divideBy(2*n);return new L.Bounds(a.subtract(i),a.add(i))},_update:function(e){var t=this._map;if(t){var n=t.getZoom();if(e===undefined&&(e=t.getCenter()),this._tileZoom!==undefined){var a=this._getTiledPixelBounds(e),i=this._pxBoundsToTileRange(a),o=i.getCenter(),r=[];for(var s in this._tiles)this._tiles[s].current=!1;if(Math.abs(n-this._tileZoom)>1)return this._setView(e,n),undefined;for(var l=i.min.y;l<=i.max.y;l++)for(var c=i.min.x;c<=i.max.x;c++){var u=new L.Point(c,l);if(u.z=this._tileZoom,this._isValidTile(u)){var d=this._tiles[this._tileCoordsToKey(u)];d?d.current=!0:r.push(u)}}if(r.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)}),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));var h=document.createDocumentFragment();for(c=0;c<r.length;c++)this._addTile(r[c],h);this._level.el.appendChild(h)}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var a=this._tileCoordsToBounds(e);return L.latLngBounds(this.options.bounds).overlaps(a)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToBounds:function(e){var t=this._map,n=this.getTileSize(),a=e.scaleBy(n),i=a.add(n),o=t.wrapLatLng(t.unproject(a,e.z)),r=t.wrapLatLng(t.unproject(i,e.z));return new L.LatLngBounds(o,r)},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new L.Point(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(L.DomUtil.remove(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){L.DomUtil.addClass(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=L.Util.falseFn,e.onmousemove=L.Util.falseFn,L.Browser.ielt9&&this.options.opacity<1&&L.DomUtil.setOpacity(e,this.options.opacity),L.Browser.android&&!L.Browser.android23&&(e.style.WebkitBackfaceVisibility="hidden")},_addTile:function(e,t){var n=this._getTilePos(e),a=this._tileCoordsToKey(e),i=this.createTile(this._wrapCoords(e),L.bind(this._tileReady,this,e));this._initTile(i),this.createTile.length<2&&L.Util.requestAnimFrame(L.bind(this._tileReady,this,e,null,i)),L.DomUtil.setPosition(i,n),this._tiles[a]={el:i,coords:e,current:!0},t.appendChild(i),this.fire("tileloadstart",{tile:i,coords:e})},_tileReady:function(e,t,n){if(this._map){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var a=this._tileCoordsToKey(e);n=this._tiles[a],n&&(n.loaded=+new Date,this._map._fadeAnimated?(L.DomUtil.setOpacity(n.el,0),L.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=L.Util.requestAnimFrame(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),L.DomUtil.addClass(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e}),this._noTilesToLoad()&&(this._loading=!1,this.fire("load")))}},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new L.Point(this._wrapX?L.Util.wrapNum(e.x,this._wrapX):e.x,this._wrapY?L.Util.wrapNum(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new L.Bounds(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}}),L.gridLayer=function(e){return new L.GridLayer(e)},L.TileLayer=L.GridLayer.extend({options:{maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,maxNativeZoom:null,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(e,t){this._url=e,t=L.setOptions(this,t),t.detectRetina&&L.Browser.retina&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomOffset++,t.minZoom=Math.max(0,t.minZoom),t.maxZoom--),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),L.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return L.DomEvent.on(n,"load",L.bind(this._tileOnLoad,this,t,n)),L.DomEvent.on(n,"error",L.bind(this._tileOnError,this,t,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){return L.Util.template(this._url,L.extend({r:L.Browser.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:this.options.tms?this._globalTileRange.max.y-e.y:e.y,z:this._getZoomForUrl()},this.options))},_tileOnLoad:function(e,t){L.Browser.ielt9?setTimeout(L.bind(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var a=this.options.errorTileUrl;a&&(t.src=a),e(n,t)},getTileSize:function(){var e=this._map,t=L.GridLayer.prototype.getTileSize.call(this),n=this._tileZoom+this.options.zoomOffset,a=this.options.maxNativeZoom;return null!==a&&n>a?t.divideBy(e.getZoomScale(a,n)).round():t},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this.options,t=this._tileZoom;return e.zoomReverse&&(t=e.maxZoom-t),t+=e.zoomOffset,null!==e.maxNativeZoom?Math.min(t,e.maxNativeZoom):t},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=L.Util.falseFn,t.onerror=L.Util.falseFn,t.complete||(t.src=L.Util.emptyImageUrl,L.DomUtil.remove(t)))}}),L.tileLayer=function(e,t){return new L.TileLayer(e,t)},L.TileLayer.WMS=L.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var n=L.extend({},this.defaultWmsParams);for(var a in t)a in this.options||(n[a]=t[a]);t=L.setOptions(this,t),n.width=n.height=t.tileSize*(t.detectRetina&&L.Browser.retina?2:1),this.wmsParams=n},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,L.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToBounds(e),n=this._crs.project(t.getNorthWest()),a=this._crs.project(t.getSouthEast()),i=(this._wmsVersion>=1.3&&this._crs===L.CRS.EPSG4326?[a.y,n.x,n.y,a.x]:[n.x,a.y,a.x,n.y]).join(","),o=L.TileLayer.prototype.getTileUrl.call(this,e);return o+L.Util.getParamString(this.wmsParams,o,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+i},setParams:function(e,t){return L.extend(this.wmsParams,e),t||this.redraw(),this}}),L.tileLayer.wms=function(e,t){return new L.TileLayer.WMS(e,t)},L.ImageOverlay=L.Layer.extend({options:{opacity:1,alt:"",interactive:!1},initialize:function(e,t,n){this._url=e,this._bounds=L.latLngBounds(t),L.setOptions(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(L.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){L.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){
return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&L.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&L.DomUtil.toBack(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=e,this._map&&this._reset(),this},getAttribution:function(){return this.options.attribution},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._image=L.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));e.onselectstart=L.Util.falseFn,e.onmousemove=L.Util.falseFn,e.onload=L.bind(this.fire,this,"load"),this.options.crossOrigin&&(e.crossOrigin=""),e.src=this._url,e.alt=this.options.alt},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),e.zoom,e.center);L.DomUtil.setTransform(this._image,n,t)},_reset:function(){var e=this._image,t=new L.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();L.DomUtil.setPosition(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){L.DomUtil.setOpacity(this._image,this.options.opacity)}}),L.imageOverlay=function(e,t,n){return new L.ImageOverlay(e,t,n)},L.Icon=L.Class.extend({initialize:function(e){L.setOptions(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw Error("iconUrl not set in Icon options (see the docs).");return null}var a=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(a,e),a},_setIconStyles:function(e,t){var n=this.options,a=L.point(n[t+"Size"]),i=L.point("shadow"===t&&n.shadowAnchor||n.iconAnchor||a&&a.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),i&&(e.style.marginLeft=-i.x+"px",e.style.marginTop=-i.y+"px"),a&&(e.style.width=a.x+"px",e.style.height=a.y+"px")},_createImg:function(e,t){return t=t||document.createElement("img"),t.src=e,t},_getIconUrl:function(e){return L.Browser.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}}),L.icon=function(e){return new L.Icon(e)},L.Icon.Default=L.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(e){var t=e+"Url";if(this.options[t])return this.options[t];var n=L.Icon.Default.imagePath;if(!n)throw Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+e+(L.Browser.retina&&"icon"===e?"-2x":"")+".png"}}),L.Icon.Default.imagePath=function(){var e,t,n,a,i=document.getElementsByTagName("script"),o=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(e=0,t=i.length;t>e;e++)if(n=i[e].src||"",n.match(o))return a=n.split(o)[0],(a?a+"/":"")+"images"}(),L.Marker=L.Layer.extend({options:{pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"],icon:new L.Icon.Default,interactive:!0,keyboard:!0,zIndexOffset:0,opacity:1,riseOffset:250},initialize:function(e,t){L.setOptions(this,t),this._latlng=L.latLng(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._initIcon(),this.update()},onRemove:function(){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._removeIcon(),this._removeShadow()},getEvents:function(){var e={zoom:this.update,viewreset:this.update};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=L.latLng(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),a=!1;n!==this._icon&&(this._icon&&this._removeIcon(),a=!0,e.title&&(n.title=e.title),e.alt&&(n.alt=e.alt)),L.DomUtil.addClass(n,t),e.keyboard&&(n.tabIndex="0"),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=e.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&L.DomUtil.addClass(i,t),this._shadow=i,e.opacity<1&&this._updateOpacity(),a&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),L.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&L.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(e){L.DomUtil.setPosition(this._icon,e),this._shadow&&L.DomUtil.setPosition(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(L.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),L.Handler.MarkerDrag)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new L.Handler.MarkerDrag(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;L.DomUtil.setOpacity(this._icon,e),this._shadow&&L.DomUtil.setOpacity(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),L.marker=function(e,t){return new L.Marker(e,t)},L.DivIcon=L.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(t.innerHTML=n.html!==!1?n.html:"",n.bgPos){var a=L.point(n.bgPos);t.style.backgroundPosition=-a.x+"px "+-a.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}}),L.divIcon=function(e){return new L.DivIcon(e)},L.Map.mergeOptions({closePopupOnClick:!0}),L.Popup=L.Layer.extend({options:{pane:"popupPane",minWidth:50,maxWidth:300,offset:[0,7],autoPan:!0,autoPanPadding:[5,5],closeButton:!0,autoClose:!0,zoomAnimation:!0},initialize:function(e,t){L.setOptions(this,e),this._source=t},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&this.options.zoomAnimation,this._container||this._initLayout(),e._fadeAnimated&&L.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&L.DomUtil.setOpacity(this._container,1),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source.on("preclick",L.DomEvent.stopPropagation))},openOn:function(e){return e.openPopup(this),this},onRemove:function(e){e._fadeAnimated?(L.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(L.bind(L.DomUtil.remove,L.DomUtil,this._container),200)):L.DomUtil.remove(this._container),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source.off("preclick",L.DomEvent.stopPropagation))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=L.latLng(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&L.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&L.DomUtil.toBack(this._container),this},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e="leaflet-popup",t=this._container=L.DomUtil.create("div",e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"));if(this.options.closeButton){var n=this._closeButton=L.DomUtil.create("a",e+"-close-button",t);n.href="#close",n.innerHTML="&#215;",L.DomEvent.on(n,"click",this._onCloseButtonClick,this)}var a=this._wrapper=L.DomUtil.create("div",e+"-content-wrapper",t);this._contentNode=L.DomUtil.create("div",e+"-content",a),L.DomEvent.disableClickPropagation(a).disableScrollPropagation(this._contentNode).on(a,"contextmenu",L.DomEvent.stopPropagation),this._tipContainer=L.DomUtil.create("div",e+"-tip-container",t),this._tip=L.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var a=e.offsetHeight,i=this.options.maxHeight,o="leaflet-popup-scrolled";i&&a>i?(t.height=i+"px",L.DomUtil.addClass(e,o)):L.DomUtil.removeClass(e,o),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=L.point(this.options.offset);this._zoomAnimated?L.DomUtil.setPosition(this._container,e):t=t.add(e);var n=this._containerBottom=-t.y,a=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=n+"px",this._container.style.left=a+"px"}},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);L.DomUtil.setPosition(this._container,t)},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var e=this._map,t=this._container.offsetHeight,n=this._containerWidth,a=new L.Point(this._containerLeft,-t-this._containerBottom);this._zoomAnimated&&a._add(L.DomUtil.getPosition(this._container));var i=e.layerPointToContainerPoint(a),o=L.point(this.options.autoPanPadding),r=L.point(this.options.autoPanPaddingTopLeft||o),s=L.point(this.options.autoPanPaddingBottomRight||o),l=e.getSize(),c=0,u=0;i.x+n+s.x>l.x&&(c=i.x+n-l.x+s.x),i.x-c-r.x<0&&(c=i.x-r.x),i.y+t+s.y>l.y&&(u=i.y+t-l.y+s.y),i.y-u-r.y<0&&(u=i.y-r.y),(c||u)&&e.fire("autopanstart").panBy([c,u])}},_onCloseButtonClick:function(e){this._close(),L.DomEvent.stop(e)}}),L.popup=function(e,t){return new L.Popup(e,t)},L.Map.include({openPopup:function(e,t,n){return e instanceof L.Popup||(e=new L.Popup(n).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=e,this.addLayer(e))},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&this.removeLayer(e),this}}),L.Layer.include({bindPopup:function(e,t){return e instanceof L.Popup?(L.setOptions(e,t),this._popup=e,e._source=this):(this._popup&&!t||(this._popup=new L.Popup(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this._originalPopupOffset=this._popup.options.offset,this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e,t){if(e instanceof L.Layer||(t=e,e=this),e instanceof L.FeatureGroup)for(var n in this._layers){e=this._layers[n];break}return t||(t=e.getCenter?e.getCenter():e.getLatLng()),this._popup&&this._map&&(this._popup.options.offset=this._popupAnchor(e),this._popup._source=e,this._popup.update(),this._map.openPopup(this._popup,t)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(e){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(e)),this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){var t=e.layer||e.target;if(this._popup&&this._map)return t instanceof L.Path?(this.openPopup(e.layer||e.target,e.latlng),undefined):(this._map.hasLayer(this._popup)&&this._popup._source===t?this.closePopup():this.openPopup(t,e.latlng),undefined)},_popupAnchor:function(e){var t=e._getPopupAnchor?e._getPopupAnchor():[0,0],n=this._originalPopupOffset||L.Popup.prototype.options.offset;return L.point(t).add(n)},_movePopup:function(e){this._popup.setLatLng(e.latlng)}}),L.Marker.include({_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]}}),L.LayerGroup=L.Layer.extend({initialize:function(e){this._layers={};var t,n;if(e)for(t=0,n=e.length;n>t;t++)this.addLayer(e[t])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){for(var e in this._layers)this.removeLayer(this._layers[e]);return this},invoke:function(e){var t,n,a=Array.prototype.slice.call(arguments,1);for(t in this._layers)n=this._layers[t],n[e]&&n[e].apply(n,a);return this},onAdd:function(e){for(var t in this._layers)e.addLayer(this._layers[t])},onRemove:function(e){for(var t in this._layers)e.removeLayer(this._layers[t])},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var t in this._layers)e.push(this._layers[t]);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return L.stamp(e)}}),L.layerGroup=function(e){return new L.LayerGroup(e)},L.FeatureGroup=L.LayerGroup.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),L.LayerGroup.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),L.LayerGroup.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new L.LatLngBounds;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),L.featureGroup=function(e){return new L.FeatureGroup(e)},L.Renderer=L.Layer.extend({options:{padding:.1},initialize:function(e){L.setOptions(this,e),L.stamp(this)},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&L.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update()},onRemove:function(){L.DomUtil.remove(this._container)},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),a=L.DomUtil.getPosition(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,t),r=this._map.project(e,t),s=r.subtract(o),l=i.multiplyBy(-n).add(a).add(i).subtract(s);L.DomUtil.setTransform(this._container,l,n)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom)},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new L.Bounds(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),L.Map.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this.options.preferCanvas&&L.canvas()||L.svg()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||e===undefined)return!1;var t=this._paneRenderers[e];return t===undefined&&(t=L.SVG&&L.svg({pane:e})||L.Canvas&&L.canvas({pane:e}),this._paneRenderers[e]=t),t}}),L.Path=L.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},getEvents:function(){return{zoomend:this._project,moveend:this._update,viewreset:this._reset}},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return L.setOptions(this,e),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(L.Browser.touch?10:0)}}),L.LineUtil={simplify:function(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=this._reducePoints(e,n),e=this._simplifyDP(e,n)},pointToSegmentDistance:function(e,t,n){return Math.sqrt(this._sqClosestPointOnSegment(e,t,n,!0))},closestPointOnSegment:function(e,t,n){return this._sqClosestPointOnSegment(e,t,n)},_simplifyDP:function(e,t){var n=e.length,a=typeof Uint8Array!=undefined+""?Uint8Array:Array,i=new a(n);i[0]=i[n-1]=1,this._simplifyDPStep(e,i,t,0,n-1);var o,r=[];for(o=0;n>o;o++)i[o]&&r.push(e[o]);return r},_simplifyDPStep:function(e,t,n,a,i){var o,r,s,l=0;for(r=a+1;i-1>=r;r++)s=this._sqClosestPointOnSegment(e[r],e[a],e[i],!0),s>l&&(o=r,l=s);l>n&&(t[o]=1,this._simplifyDPStep(e,t,n,a,o),this._simplifyDPStep(e,t,n,o,i))},_reducePoints:function(e,t){for(var n=[e[0]],a=1,i=0,o=e.length;o>a;a++)this._sqDist(e[a],e[i])>t&&(n.push(e[a]),i=a);return o-1>i&&n.push(e[o-1]),n},clipSegment:function(e,t,n,a,i){var o,r,s,l=a?this._lastCode:this._getBitCode(e,n),c=this._getBitCode(t,n);for(this._lastCode=c;;){if(!(l|c))return[e,t];if(l&c)return!1;o=l||c,r=this._getEdgeIntersection(e,t,o,n,i),s=this._getBitCode(r,n),o===l?(e=r,l=s):(t=r,c=s)}},_getEdgeIntersection:function(e,t,n,a,i){var o,r,s=t.x-e.x,l=t.y-e.y,c=a.min,u=a.max;return 8&n?(o=e.x+s*(u.y-e.y)/l,r=u.y):4&n?(o=e.x+s*(c.y-e.y)/l,r=c.y):2&n?(o=u.x,r=e.y+l*(u.x-e.x)/s):1&n&&(o=c.x,r=e.y+l*(c.x-e.x)/s),new L.Point(o,r,i)},_getBitCode:function(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n},_sqDist:function(e,t){var n=t.x-e.x,a=t.y-e.y;return n*n+a*a},_sqClosestPointOnSegment:function(e,t,n,a){var i,o=t.x,r=t.y,s=n.x-o,l=n.y-r,c=s*s+l*l;return c>0&&(i=((e.x-o)*s+(e.y-r)*l)/c,i>1?(o=n.x,r=n.y):i>0&&(o+=s*i,r+=l*i)),s=e.x-o,l=e.y-r,a?s*s+l*l:new L.Point(o,r)}},L.Polyline=L.Path.extend({options:{smoothFactor:1},initialize:function(e,t){L.setOptions(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,a=1/0,i=null,o=L.LineUtil._sqClosestPointOnSegment,r=0,s=this._parts.length;s>r;r++)for(var l=this._parts[r],c=1,u=l.length;u>c;c++){t=l[c-1],n=l[c];var d=o(e,t,n,!0);a>d&&(a=d,i=o(e,t,n))}return i&&(i.distance=Math.sqrt(a)),i},getCenter:function(){var e,t,n,a,i,o,r,s=this._rings[0],l=s.length;if(!l)return null;for(e=0,t=0;l-1>e;e++)t+=s[e].distanceTo(s[e+1])/2;if(0===t)return this._map.layerPointToLatLng(s[0]);for(e=0,a=0;l-1>e;e++)if(i=s[e],o=s[e+1],n=i.distanceTo(o),a+=n,a>t)return r=(a-t)/n,this._map.layerPointToLatLng([o.x-r*(o.x-i.x),o.y-r*(o.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=L.latLng(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new L.LatLngBounds,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=L.Polyline._flat(e),a=0,i=e.length;i>a;a++)n?(t[a]=L.latLng(e[a]),this._bounds.extend(t[a])):t[a]=this._convertLatLngs(e[a]);return t},_project:function(){var e=new L.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e);var t=this._clickTolerance(),n=new L.Point(t,t);this._bounds.isValid()&&e.isValid()&&(e.min._subtract(n),e.max._add(n),this._pxBounds=e)},_projectLatlngs:function(e,t,n){var a,i,o=e[0]instanceof L.LatLng,r=e.length;if(o){for(i=[],a=0;r>a;a++)i[a]=this._map.latLngToLayerPoint(e[a]),n.extend(i[a]);t.push(i)}else for(a=0;r>a;a++)this._projectLatlngs(e[a],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e)){if(this.options.noClip)return this._parts=this._rings,undefined;var t,n,a,i,o,r,s,l=this._parts;for(t=0,a=0,i=this._rings.length;i>t;t++)for(s=this._rings[t],n=0,o=s.length;o-1>n;n++)r=L.LineUtil.clipSegment(s[n],s[n+1],e,n,!0),r&&(l[a]=l[a]||[],l[a].push(r[0]),r[1]===s[n+1]&&n!==o-2||(l[a].push(r[1]),a++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,a=e.length;a>n;n++)e[n]=L.LineUtil.simplify(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),L.polyline=function(e,t){return new L.Polyline(e,t)},L.Polyline._flat=function(e){return!L.Util.isArray(e[0])||"object"!=typeof e[0][0]&&undefined!==e[0][0]},L.PolyUtil={},L.PolyUtil.clipPolygon=function(e,t,n){var a,i,o,r,s,l,c,u,d,h=[1,4,2,8],p=L.LineUtil;for(i=0,c=e.length;c>i;i++)e[i]._code=p._getBitCode(e[i],t);for(r=0;4>r;r++){for(u=h[r],a=[],i=0,c=e.length,o=c-1;c>i;o=i++)s=e[i],l=e[o],s._code&u?l._code&u||(d=p._getEdgeIntersection(l,s,u,t,n),d._code=p._getBitCode(d,t),a.push(d)):(l._code&u&&(d=p._getEdgeIntersection(l,s,u,t,n),d._code=p._getBitCode(d,t),a.push(d)),a.push(s));e=a}return e},L.Polygon=L.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){var e,t,n,a,i,o,r,s,l,c=this._rings[0],u=c.length;if(!u)return null;for(o=r=s=0,e=0,t=u-1;u>e;t=e++)n=c[e],a=c[t],i=n.y*a.x-a.y*n.x,r+=(n.x+a.x)*i,s+=(n.y+a.y)*i,o+=3*i;return l=0===o?c[0]:[r/o,s/o],this._map.layerPointToLatLng(l)},_convertLatLngs:function(e){var t=L.Polyline.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof L.LatLng&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){L.Polyline.prototype._setLatLngs.call(this,e),L.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return L.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new L.Point(t,t);if(e=new L.Bounds(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e)){if(this.options.noClip)return this._parts=this._rings,undefined;for(var a,i=0,o=this._rings.length;o>i;i++)a=L.PolyUtil.clipPolygon(this._rings[i],e,!0),a.length&&this._parts.push(a)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),L.polygon=function(e,t){return new L.Polygon(e,t)},L.Rectangle=L.Polygon.extend({initialize:function(e,t){L.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=L.latLngBounds(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}}),L.rectangle=function(e,t){return new L.Rectangle(e,t)},L.CircleMarker=L.Path.extend({options:{fill:!0,radius:10},initialize:function(e,t){L.setOptions(this,t),this._latlng=L.latLng(e),this._radius=this.options.radius},setLatLng:function(e){return this._latlng=L.latLng(e),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return L.Path.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),a=[e+n,t+n];this._pxBounds=new L.Bounds(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),L.circleMarker=function(e,t){return new L.CircleMarker(e,t)},L.Circle=L.CircleMarker.extend({initialize:function(e,t){L.setOptions(this,t),this._latlng=L.latLng(e),this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new L.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:L.Path.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,a=n.options.crs;if(a.distance===L.CRS.Earth.distance){var i=Math.PI/180,o=this._mRadius/L.CRS.Earth.R/i,r=n.project([t+o,e]),s=n.project([t-o,e]),l=r.add(s).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(o*i)-Math.sin(t*i)*Math.sin(c*i))/(Math.cos(t*i)*Math.cos(c*i)))/i;(isNaN(u)||0===u)&&(u=o/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:Math.max(Math.round(l.x-n.project([c,e-u]).x),1),this._radiusY=Math.max(Math.round(l.y-r.y),1)}else{var d=a.unproject(a.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(d).x}this._updateBounds()}}),L.circle=function(e,t,n){return"number"==typeof t&&(t=L.extend({},n,{radius:t})),new L.Circle(e,t)},L.SVG=L.Renderer.extend({getEvents:function(){var e=L.Renderer.prototype.getEvents.call(this);return e.zoomstart=this._onZoomStart,e},_initContainer:function(){this._container=L.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=L.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){L.Renderer.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),L.DomUtil.setPosition(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" "))}},_initPath:function(e){var t=e._path=L.SVG.create("path");e.options.className&&L.DomUtil.addClass(t,e.options.className),e.options.interactive&&L.DomUtil.addClass(t,"leaflet-interactive"),this._updateStyle(e)},_addPath:function(e){this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){L.DomUtil.remove(e._path),e.removeInteractiveTarget(e._path)},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"),t.setAttribute("pointer-events",n.pointerEvents||(n.interactive?"visiblePainted":"none")))},_updatePoly:function(e,t){this._setPath(e,L.SVG.pointsToPath(e._parts,t))},_updateCircle:function(e){var t=e._point,n=e._radius,a=e._radiusY||n,i="a"+n+","+a+" 0 1,0 ",o=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(e,o)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){L.DomUtil.toFront(e._path)},_bringToBack:function(e){L.DomUtil.toBack(e._path)}}),L.extend(L.SVG,{create:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},pointsToPath:function(e,t){var n,a,i,o,r,s,l="";for(n=0,i=e.length;i>n;n++){for(r=e[n],a=0,o=r.length;o>a;a++)s=r[a],l+=(a?"L":"M")+s.x+" "+s.y;l+=t?L.Browser.svg?"z":"x":""}return l||"M0 0"}}),L.Browser.svg=!(!document.createElementNS||!L.SVG.create("svg").createSVGRect),L.svg=function(e){return L.Browser.svg||L.Browser.vml?new L.SVG(e):null},L.Browser.vml=!L.Browser.svg&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(n){return!1}}(),L.SVG.include(L.Browser.vml?{_initContainer:function(){this._container=L.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||L.Renderer.prototype._update.call(this)},_initPath:function(e){var t=e._container=L.SVG.create("shape");L.DomUtil.addClass(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=L.SVG.create("path"),t.appendChild(e._path),this._updateStyle(e)},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;L.DomUtil.remove(t),e.removeInteractiveTarget(t)},_updateStyle:function(e){var t=e._stroke,n=e._fill,a=e.options,i=e._container;i.stroked=!!a.stroke,i.filled=!!a.fill,a.stroke?(t||(t=e._stroke=L.SVG.create("stroke")),i.appendChild(t),
t.weight=a.weight+"px",t.color=a.color,t.opacity=a.opacity,a.dashArray?t.dashStyle=L.Util.isArray(a.dashArray)?a.dashArray.join(" "):a.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=a.lineCap.replace("butt","flat"),t.joinstyle=a.lineJoin):t&&(i.removeChild(t),e._stroke=null),a.fill?(n||(n=e._fill=L.SVG.create("fill")),i.appendChild(n),n.color=a.fillColor||a.color,n.opacity=a.fillOpacity):n&&(i.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),a=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+a+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){L.DomUtil.toFront(e._container)},_bringToBack:function(e){L.DomUtil.toBack(e._container)}}:{}),L.Browser.vml&&(L.SVG.create=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),L.Canvas=L.Renderer.extend({onAdd:function(){L.Renderer.prototype.onAdd.call(this),this._layers=this._layers||{},this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");L.DomEvent.on(e,"mousemove",L.Util.throttle(this._onMouseMove,32,this),this).on(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(e,"mouseout",this._handleMouseOut,this),this._ctx=e.getContext("2d")},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},L.Renderer.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),a=L.Browser.retina?2:1;L.DomUtil.setPosition(t,e.min),t.width=a*n.x,t.height=a*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",L.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y)}},_initPath:function(e){this._layers[L.stamp(e)]=e},_addPath:L.Util.falseFn,_removePath:function(e){e._removed=!0,this._requestRedraw(e)},_updatePath:function(e){this._redrawBounds=e._pxBounds,this._draw(!0),e._project(),e._update(),this._draw(),this._redrawBounds=null},_updateStyle:function(e){this._requestRedraw(e)},_requestRedraw:function(e){if(this._map){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new L.Bounds,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t])),this._redrawRequest=this._redrawRequest||L.Util.requestAnimFrame(this._redraw,this)}},_redraw:function(){this._redrawRequest=null,this._draw(!0),this._draw(),this._redrawBounds=null},_draw:function(e){this._clear=e;var t,n=this._redrawBounds;this._ctx.save(),n&&(this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,n.max.x-n.min.x,n.max.y-n.min.y),this._ctx.clip());for(var a in this._layers)t=this._layers[a],n&&!t._pxBounds.intersects(n)||t._updatePath(),e&&t._removed&&(delete t._removed,delete this._layers[a]);this._ctx.restore()},_updatePoly:function(e,t){var n,a,i,o,r=e._parts,s=r.length,l=this._ctx;if(s){for(this._drawnLayers[e._leaflet_id]=e,l.beginPath(),n=0;s>n;n++){for(a=0,i=r[n].length;i>a;a++)o=r[n][a],l[a?"lineTo":"moveTo"](o.x,o.y);t&&l.closePath()}this._fillStroke(l,e)}},_updateCircle:function(e){if(!e._empty()){var t=e._point,n=this._ctx,a=e._radius,i=(e._radiusY||a)/a;this._drawnLayers[e._leaflet_id]=e,1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(t.x,t.y/i,a,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=this._clear,a=t.options;e.globalCompositeOperation=n?"destination-out":"source-over",a.fill&&(e.globalAlpha=n?1:a.fillOpacity,e.fillStyle=a.fillColor||a.color,e.fill(a.fillRule||"evenodd")),a.stroke&&0!==a.weight&&(e.globalAlpha=n?1:a.opacity,t._prevWeight=e.lineWidth=n?t._prevWeight+1:a.weight,e.strokeStyle=a.color,e.lineCap=a.lineCap,e.lineJoin=a.lineJoin,e.stroke())},_onClick:function(e){var t,n=this._map.mouseEventToLayerPoint(e),a=[];for(var i in this._layers)t=this._layers[i],t.options.interactive&&t._containsPoint(n)&&(L.DomEvent._fakeStop(e),a.push(t));a.length&&this._fireEvent(a,e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseOut(e,t),this._handleMouseHover(e,t)}},_handleMouseOut:function(e,t){var n=this._hoveredLayer;!n||"mouseout"!==e.type&&n._containsPoint(t)||(L.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([n],e,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(e,t){var n,a;for(n in this._drawnLayers)a=this._drawnLayers[n],a.options.interactive&&a._containsPoint(t)&&(L.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([a],e,"mouseover"),this._hoveredLayer=a);this._hoveredLayer&&this._fireEvent([this._hoveredLayer],e)},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:L.Util.falseFn,_bringToBack:L.Util.falseFn}),L.Browser.canvas=function(){return!!document.createElement("canvas").getContext}(),L.canvas=function(e){return L.Browser.canvas?new L.Canvas(e):null},L.Polyline.prototype._containsPoint=function(e,t){var n,a,i,o,r,s,l=this._clickTolerance();if(!this._pxBounds.contains(e))return!1;for(n=0,o=this._parts.length;o>n;n++)for(s=this._parts[n],a=0,r=s.length,i=r-1;r>a;i=a++)if((t||0!==a)&&L.LineUtil.pointToSegmentDistance(e,s[i],s[a])<=l)return!0;return!1},L.Polygon.prototype._containsPoint=function(e){var t,n,a,i,o,r,s,l,c=!1;if(!this._pxBounds.contains(e))return!1;for(i=0,s=this._parts.length;s>i;i++)for(t=this._parts[i],o=0,l=t.length,r=l-1;l>o;r=o++)n=t[o],a=t[r],n.y>e.y!=a.y>e.y&&e.x<(a.x-n.x)*(e.y-n.y)/(a.y-n.y)+n.x&&(c=!c);return c||L.Polyline.prototype._containsPoint.call(this,e,!0)},L.CircleMarker.prototype._containsPoint=function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()},L.GeoJSON=L.FeatureGroup.extend({initialize:function(e,t){L.setOptions(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,a,i=L.Util.isArray(e)?e:e.features;if(i){for(t=0,n=i.length;n>t;t++)a=i[t],(a.geometries||a.geometry||a.features||a.coordinates)&&this.addData(a);return this}var o=this.options;if(o.filter&&!o.filter(e))return this;var r=L.GeoJSON.geometryToLayer(e,o);return r?(r.feature=L.GeoJSON.asFeature(e),r.defaultOptions=r.options,this.resetStyle(r),o.onEachFeature&&o.onEachFeature(e,r),this.addLayer(r)):this},resetStyle:function(e){return e.options=L.Util.extend({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),L.extend(L.GeoJSON,{geometryToLayer:function(e,t){var n,a,i,o,r="Feature"===e.type?e.geometry:e,s=r?r.coordinates:null,l=[],c=t&&t.pointToLayer,u=t&&t.coordsToLatLng||this.coordsToLatLng;if(!s&&!r)return null;switch(r.type){case"Point":return n=u(s),c?c(e,n):new L.Marker(n);case"MultiPoint":for(i=0,o=s.length;o>i;i++)n=u(s[i]),l.push(c?c(e,n):new L.Marker(n));return new L.FeatureGroup(l);case"LineString":case"MultiLineString":return a=this.coordsToLatLngs(s,"LineString"===r.type?0:1,u),new L.Polyline(a,t);case"Polygon":case"MultiPolygon":return a=this.coordsToLatLngs(s,"Polygon"===r.type?1:2,u),new L.Polygon(a,t);case"GeometryCollection":for(i=0,o=r.geometries.length;o>i;i++){var d=this.geometryToLayer({geometry:r.geometries[i],type:"Feature",properties:e.properties},t);d&&l.push(d)}return new L.FeatureGroup(l);default:throw Error("Invalid GeoJSON object.")}},coordsToLatLng:function(e){return new L.LatLng(e[1],e[0],e[2])},coordsToLatLngs:function(e,t,n){for(var a,i=[],o=0,r=e.length;r>o;o++)a=t?this.coordsToLatLngs(e[o],t-1,n):(n||this.coordsToLatLng)(e[o]),i.push(a);return i},latLngToCoords:function(e){return e.alt!==undefined?[e.lng,e.lat,e.alt]:[e.lng,e.lat]},latLngsToCoords:function(e,t,n){for(var a=[],i=0,o=e.length;o>i;i++)a.push(t?L.GeoJSON.latLngsToCoords(e[i],t-1,n):L.GeoJSON.latLngToCoords(e[i]));return!t&&n&&a.push(a[0]),a},getFeature:function(e,t){return e.feature?L.extend({},e.feature,{geometry:t}):L.GeoJSON.asFeature(t)},asFeature:function(e){return"Feature"===e.type?e:{type:"Feature",properties:{},geometry:e}}});var PointToGeoJSON={toGeoJSON:function(){return L.GeoJSON.getFeature(this,{type:"Point",coordinates:L.GeoJSON.latLngToCoords(this.getLatLng())})}};L.Marker.include(PointToGeoJSON),L.Circle.include(PointToGeoJSON),L.CircleMarker.include(PointToGeoJSON),L.Polyline.prototype.toGeoJSON=function(){var e=!L.Polyline._flat(this._latlngs),t=L.GeoJSON.latLngsToCoords(this._latlngs,e?1:0);return L.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"LineString",coordinates:t})},L.Polygon.prototype.toGeoJSON=function(){var e=!L.Polyline._flat(this._latlngs),t=e&&!L.Polyline._flat(this._latlngs[0]),n=L.GeoJSON.latLngsToCoords(this._latlngs,t?2:e?1:0,!0);return e||(n=[n]),L.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"Polygon",coordinates:n})},L.LayerGroup.include({toMultiPoint:function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),L.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint();var t="GeometryCollection"===e,n=[];return this.eachLayer(function(e){if(e.toGeoJSON){var a=e.toGeoJSON();n.push(t?a.geometry:L.GeoJSON.asFeature(a))}}),t?L.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}}),L.geoJSON=function(e,t){return new L.GeoJSON(e,t)},L.geoJson=L.geoJSON;var eventsKey="_leaflet_events";L.DomEvent={on:function(e,t,n,a){if("object"==typeof t)for(var i in t)this._on(e,i,t[i],n);else{t=L.Util.splitWords(t);for(var o=0,r=t.length;r>o;o++)this._on(e,t[o],n,a)}return this},off:function(e,t,n,a){if("object"==typeof t)for(var i in t)this._off(e,i,t[i],n);else{t=L.Util.splitWords(t);for(var o=0,r=t.length;r>o;o++)this._off(e,t[o],n,a)}return this},_on:function(e,t,n,a){var i=t+L.stamp(n)+(a?"_"+L.stamp(a):"");if(e[eventsKey]&&e[eventsKey][i])return this;var o=function(t){return n.call(a||e,t||window.event)},r=o;return L.Browser.pointer&&0===t.indexOf("touch")?this.addPointerListener(e,t,o,i):L.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener?this.addDoubleTapListener(e,o,i):"addEventListener"in e?"mousewheel"===t?e.addEventListener("onwheel"in e?"wheel":"mousewheel",o,!1):"mouseenter"===t||"mouseleave"===t?(o=function(t){t=t||window.event,L.DomEvent._isExternalTarget(e,t)&&r(t)},e.addEventListener("mouseenter"===t?"mouseover":"mouseout",o,!1)):("click"===t&&L.Browser.android&&(o=function(e){return L.DomEvent._filterClick(e,r)}),e.addEventListener(t,o,!1)):"attachEvent"in e&&e.attachEvent("on"+t,o),e[eventsKey]=e[eventsKey]||{},e[eventsKey][i]=o,this},_off:function(e,t,n,a){var i=t+L.stamp(n)+(a?"_"+L.stamp(a):""),o=e[eventsKey]&&e[eventsKey][i];return o?(L.Browser.pointer&&0===t.indexOf("touch")?this.removePointerListener(e,t,i):L.Browser.touch&&"dblclick"===t&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,i):"removeEventListener"in e?"mousewheel"===t?e.removeEventListener("onwheel"in e?"wheel":"mousewheel",o,!1):e.removeEventListener("mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,o,!1):"detachEvent"in e&&e.detachEvent("on"+t,o),e[eventsKey][i]=null,this):this},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,L.DomEvent._skipped(e),this},disableScrollPropagation:function(e){return L.DomEvent.on(e,"mousewheel",L.DomEvent.stopPropagation)},disableClickPropagation:function(e){var t=L.DomEvent.stopPropagation;return L.DomEvent.on(e,L.Draggable.START.join(" "),t),L.DomEvent.on(e,{click:L.DomEvent._fakeStop,dblclick:t})},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return L.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,t){if(!t)return new L.Point(e.clientX,e.clientY);var n=t.getBoundingClientRect();return new L.Point(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},getWheelDelta:function(e){return e.deltaY&&0===e.deltaMode?-e.deltaY:e.deltaY&&1===e.deltaMode?18*-e.deltaY:e.deltaY&&2===e.deltaMode?52*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?18*-e.detail:e.detail?e.detail/-32765*52:0},_skipEvents:{},_fakeStop:function(e){L.DomEvent._skipEvents[e.type]=!0},_skipped:function(e){var t=this._skipEvents[e.type];return this._skipEvents[e.type]=!1,t},_isExternalTarget:function(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(a){return!1}return n!==e},_filterClick:function(e,t){var n=e.timeStamp||e.originalEvent.timeStamp,a=L.DomEvent._lastClick&&n-L.DomEvent._lastClick;return a&&a>100&&500>a||e.target._simulatedClick&&!e._simulated?(L.DomEvent.stop(e),undefined):(L.DomEvent._lastClick=n,t(e),undefined)}},L.DomEvent.addListener=L.DomEvent.on,L.DomEvent.removeListener=L.DomEvent.off,L.Draggable=L.Evented.extend({statics:{START:L.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(e,t,n){this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(L.DomEvent.on(this._dragStartTarget,L.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(L.DomEvent.off(this._dragStartTarget,L.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._moved=!1,!L.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(L.Draggable._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&this._enabled&&(L.Draggable._dragging=!0,this._preventOutline&&L.DomUtil.preventOutline(this._element),L.DomUtil.disableImageDrag(),L.DomUtil.disableTextSelection(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e;this._startPoint=new L.Point(t.clientX,t.clientY),this._startPos=this._newPos=L.DomUtil.getPosition(this._element),L.DomEvent.on(document,L.Draggable.MOVE[e.type],this._onMove,this).on(document,L.Draggable.END[e.type],this._onUp,this)}},_onMove:function(e){if(e.touches&&e.touches.length>1)return this._moved=!0,undefined;var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new L.Point(t.clientX,t.clientY),a=n.subtract(this._startPoint);(a.x||a.y)&&(L.Browser.touch&&Math.abs(a.x)+Math.abs(a.y)<3||(L.DomEvent.preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=L.DomUtil.getPosition(this._element).subtract(a),L.DomUtil.addClass(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,L.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(a),this._moving=!0,L.Util.cancelAnimFrame(this._animRequest),this._lastEvent=e,this._animRequest=L.Util.requestAnimFrame(this._updatePosition,this,!0)))},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),L.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){L.DomUtil.removeClass(document.body,"leaflet-dragging"),this._lastTarget&&(L.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var e in L.Draggable.MOVE)L.DomEvent.off(document,L.Draggable.MOVE[e],this._onMove,this).off(document,L.Draggable.END[e],this._onUp,this);L.DomUtil.enableImageDrag(),L.DomUtil.enableTextSelection(),this._moved&&this._moving&&(L.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,L.Draggable._dragging=!1}}),L.Handler=L.Class.extend({initialize:function(e){this._map=e},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),L.Map.mergeOptions({dragging:!0,inertia:!L.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1}),L.Map.Drag=L.Handler.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new L.Draggable(e._mapPane,e._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}L.DomUtil.addClass(this._map._container,"leaflet-grab"),this._draggable.enable()},removeHooks:function(){L.DomUtil.removeClass(this._map._container,"leaflet-grab"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map.stop()},_onDragStart:function(){var e=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=L.latLngBounds(this._map.options.maxBounds);this._offsetLimit=L.bounds(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),t-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",e).fire("drag",e)},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,a=this._draggable._newPos.x,i=(a-t+n)%e+t-n,o=(a+t+n)%e-t-n,r=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(e){var t=this._map,n=t.options,a=!n.inertia||this._times.length<2;if(t.fire("dragend",e),a)t.fire("moveend");else{var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,r=n.easeLinearity,s=i.multiplyBy(r/o),l=s.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=s.multiplyBy(c/l),d=c/(n.inertiaDeceleration*r),h=u.multiplyBy(-d/2).round();h.x||h.y?(h=t._limitOffset(h,t.options.maxBounds),L.Util.requestAnimFrame(function(){t.panBy(h,{duration:d,easeLinearity:r,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}}),L.Map.addInitHook("addHandler","dragging",L.Map.Drag),L.Map.mergeOptions({doubleClickZoom:!0}),L.Map.DoubleClickZoom=L.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),a=e.originalEvent.shiftKey?Math.ceil(n)-1:Math.floor(n)+1;"center"===t.options.doubleClickZoom?t.setZoom(a):t.setZoomAround(e.containerPoint,a)}}),L.Map.addInitHook("addHandler","doubleClickZoom",L.Map.DoubleClickZoom),L.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40}),L.Map.ScrollWheelZoom=L.Handler.extend({addHooks:function(){L.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){L.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=L.DomEvent.getWheelDelta(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var a=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(L.bind(this._performZoom,this),a),L.DomEvent.stop(e)},_performZoom:function(){var e=this._map,t=this._delta,n=e.getZoom();e.stop();var a=Math.ceil(4*Math.log(2/(1+Math.exp(-Math.abs(t/200))))/Math.LN2);t=e._limitZoom(n+(t>0?a:-a))-n,this._delta=0,this._startTime=null,t&&("center"===e.options.scrollWheelZoom?e.setZoom(n+t):e.setZoomAround(this._lastMousePos,n+t))}}),L.Map.addInitHook("addHandler","scrollWheelZoom",L.Map.ScrollWheelZoom),L.PosAnimation=L.Evented.extend({run:function(e,t,n,a){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(a||.5,.2),this._startPos=L.DomUtil.getPosition(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=L.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;n>t?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),L.DomUtil.setPosition(this._el,n),this.fire("step")},_complete:function(){L.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),L.Map.include({setView:function(e,t,n){if(t=t===undefined?this._zoom:this._limitZoom(t),e=this._limitCenter(L.latLng(e),t,this.options.maxBounds),n=n||{},this.stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==undefined&&(n.zoom=L.extend({animate:n.animate},n.zoom),n.pan=L.extend({animate:n.animate,duration:n.duration},n.pan));var a=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,n.zoom):this._tryAnimatedPan(e,n.pan);if(a)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},panBy:function(e,t){if(e=L.point(e).round(),t=t||{},!e.x&&!e.y)return this.fire("moveend");if(t.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new L.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){L.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){L.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._floor();return(t&&t.animate)===!0||this.getSize().contains(n)?(this.panBy(n,t),!0):!1}}),L.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});var zoomAnimated=L.DomUtil.TRANSITION&&L.Browser.any3d&&!L.Browser.mobileOpera;zoomAnimated&&L.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),L.DomEvent.on(this._proxy,L.DomUtil.TRANSITION_END,this._catchTransitionEnd,this))}),L.Map.include(zoomAnimated?{_createAnimProxy:function(){var e=this._proxy=L.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(t){var n=L.DomUtil.TRANSFORM,a=e.style[n];L.DomUtil.setTransform(e,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),a===e.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),n=this.getZoom();L.DomUtil.setTransform(e,this.project(t,n),this.getZoomScale(n,1))},this)},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var a=this.getZoomScale(t),i=this._getCenterOffset(e)._divideBy(1-1/a);return n.animate===!0||this.getSize().contains(i)?(L.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(e,t,!0)},this),!0):!1},_animateZoom:function(e,t,n,a){n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,L.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:a}),setTimeout(L.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(L.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),L.Util.requestAnimFrame(function(){this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom)._moveEnd(!0)},this))}}:{}),L.Map.include({flyTo:function(e,t,n){function a(e){var t=(g*g-m*m+(e?-1:1)*y*y*_*_)/(2*(e?g:m)*y*_);return Math.log(Math.sqrt(t*t+1)-t)}function i(e){return(Math.exp(e)-Math.exp(-e))/2}function o(e){return(Math.exp(e)+Math.exp(-e))/2}function r(e){return i(e)/o(e)}function s(e){return m*(o(b)/o(b+v*e))}function l(e){return m*(o(b)*r(b+v*e)-i(b))/y}function c(e){return 1-Math.pow(1-e,1.5)}function u(){var n=(Date.now()-k)/x,a=c(n)*w;1>=n?(this._flyToFrame=L.Util.requestAnimFrame(u,this),this._move(this.unproject(d.add(h.subtract(d).multiplyBy(l(a)/_)),f),this.getScaleZoom(m/s(a),f),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}if(n=n||{},n.animate===!1||!L.Browser.any3d)return this.setView(e,t,n);this.stop();var d=this.project(this.getCenter()),h=this.project(e),p=this.getSize(),f=this._zoom;e=L.latLng(e),t=t===undefined?f:t;var m=Math.max(p.x,p.y),g=m*this.getZoomScale(f,t),_=h.distanceTo(d)||1,v=1.42,y=v*v,b=a(0),k=Date.now(),w=(a(1)-b)/v,x=n.duration?1e3*n.duration:1e3*w*.8;return this._moveStart(!0),u.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)}}),L.extend(L.DomEvent,{_touchstart:L.Browser.msPointer?"MSPointerDown":L.Browser.pointer?"pointerdown":"touchstart",_touchend:L.Browser.msPointer?"MSPointerUp":L.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(e,t,n){function a(e){var t;if(t=L.Browser.pointer?L.DomEvent._pointersCount:e.touches.length,!(t>1)){var n=Date.now(),a=n-(o||n);r=e.touches?e.touches[0]:e,s=a>0&&l>=a,o=n}}function i(){if(s&&!r.cancelBubble){if(L.Browser.pointer){var e,n,a={};for(n in r)e=r[n],a[n]=e&&e.bind?e.bind(r):e;r=a}r.type="dblclick",t(r),o=null}}var o,r,s=!1,l=250,c="_leaflet_",u=this._touchstart,d=this._touchend;return e[c+u+n]=a,e[c+d+n]=i,e.addEventListener(u,a,!1),e.addEventListener(d,i,!1),this},removeDoubleTapListener:function(e,t){var n="_leaflet_",a=e[n+this._touchend+t];return e.removeEventListener(this._touchstart,e[n+this._touchstart+t],!1),e.removeEventListener(this._touchend,a,!1),this}}),L.extend(L.DomEvent,{POINTER_DOWN:L.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:L.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:L.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:L.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:{},_pointersCount:0,addPointerListener:function(e,t,n,a){return"touchstart"===t?this._addPointerStart(e,n,a):"touchmove"===t?this._addPointerMove(e,n,a):"touchend"===t&&this._addPointerEnd(e,n,a),this},removePointerListener:function(e,t,n){var a=e["_leaflet_"+t+n];return"touchstart"===t?e.removeEventListener(this.POINTER_DOWN,a,!1):"touchmove"===t?e.removeEventListener(this.POINTER_MOVE,a,!1):"touchend"===t&&(e.removeEventListener(this.POINTER_UP,a,!1),e.removeEventListener(this.POINTER_CANCEL,a,!1)),this},_addPointerStart:function(e,t,n){var a=L.bind(function(e){"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&L.DomEvent.preventDefault(e),this._handlePointer(e,t)},this);if(e["_leaflet_touchstart"+n]=a,e.addEventListener(this.POINTER_DOWN,a,!1),!this._pointerDocListener){var i=L.bind(this._globalPointerUp,this);document.documentElement.addEventListener(this.POINTER_DOWN,L.bind(this._globalPointerDown,this),!0),document.documentElement.addEventListener(this.POINTER_MOVE,L.bind(this._globalPointerMove,this),!0),document.documentElement.addEventListener(this.POINTER_UP,i,!0),document.documentElement.addEventListener(this.POINTER_CANCEL,i,!0),this._pointerDocListener=!0}},_globalPointerDown:function(e){this._pointers[e.pointerId]=e,this._pointersCount++},_globalPointerMove:function(e){this._pointers[e.pointerId]&&(this._pointers[e.pointerId]=e)},_globalPointerUp:function(e){delete this._pointers[e.pointerId],this._pointersCount--},_handlePointer:function(e,t){e.touches=[];for(var n in this._pointers)e.touches.push(this._pointers[n]);e.changedTouches=[e],t(e)},_addPointerMove:function(e,t,n){var a=L.bind(function(e){(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons)&&this._handlePointer(e,t)},this);e["_leaflet_touchmove"+n]=a,e.addEventListener(this.POINTER_MOVE,a,!1)},_addPointerEnd:function(e,t,n){var a=L.bind(function(e){this._handlePointer(e,t)},this);e["_leaflet_touchend"+n]=a,e.addEventListener(this.POINTER_UP,a,!1),e.addEventListener(this.POINTER_CANCEL,a,!1)}}),L.Map.mergeOptions({touchZoom:L.Browser.touch&&!L.Browser.android23,bounceAtZoomLimits:!0}),L.Map.TouchZoom=L.Handler.extend({addHooks:function(){L.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){L.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),a=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(a)._divideBy(2))),this._startDist=n.distanceTo(a),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t.stop(),L.DomEvent.on(document,"touchmove",this._onTouchMove,this).on(document,"touchend",this._onTouchEnd,this),L.DomEvent.preventDefault(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),a=t.mouseEventToContainerPoint(e.touches[1]),i=n.distanceTo(a)/this._startDist;if(this._zoom=t.getScaleZoom(i,this._startZoom),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===i)return}else{var o=n._add(a)._divideBy(2)._subtract(this._centerPoint);if(1===i&&0===o.x&&0===o.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng).subtract(o))}if(t.options.bounceAtZoomLimits||!(this._zoom<=t.getMinZoom()&&1>i||this._zoom>=t.getMaxZoom()&&i>1)){this._moved||(t._moveStart(!0),this._moved=!0),L.Util.cancelAnimFrame(this._animRequest);var r=L.bind(t._move,t,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=L.Util.requestAnimFrame(r,this,!0),L.DomEvent.preventDefault(e)}}},_onTouchEnd:function(){if(!this._moved||!this._zooming)return this._zooming=!1,undefined;this._zooming=!1,
L.Util.cancelAnimFrame(this._animRequest),L.DomEvent.off(document,"touchmove",this._onTouchMove).off(document,"touchend",this._onTouchEnd);var e=this._zoom;e=this._map._limitZoom(e-this._startZoom>0?Math.ceil(e):Math.floor(e)),this._map._animateZoom(this._center,e,!0,!0)}}),L.Map.addInitHook("addHandler","touchZoom",L.Map.TouchZoom),L.Map.mergeOptions({tap:!0,tapTolerance:15}),L.Map.Tap=L.Handler.extend({addHooks:function(){L.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){L.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(L.DomEvent.preventDefault(e),this._fireClick=!0,e.touches.length>1)return this._fireClick=!1,clearTimeout(this._holdTimeout),undefined;var t=e.touches[0],n=t.target;this._startPos=this._newPos=new L.Point(t.clientX,t.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&L.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(L.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",t))},this),1e3),this._simulateEvent("mousedown",t),L.DomEvent.on(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),L.DomEvent.off(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&e&&e.changedTouches){var t=e.changedTouches[0],n=t.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&L.DomUtil.removeClass(n,"leaflet-active"),this._simulateEvent("mouseup",t),this._isTapValid()&&this._simulateEvent("click",t)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new L.Point(t.clientX,t.clientY),this._simulateEvent("mousemove",t)},_simulateEvent:function(e,t){var n=document.createEvent("MouseEvents");n._simulated=!0,t.target._simulatedClick=!0,n.initMouseEvent(e,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}}),L.Browser.touch&&!L.Browser.pointer&&L.Map.addInitHook("addHandler","tap",L.Map.Tap),L.Map.mergeOptions({boxZoom:!0}),L.Map.BoxZoom=L.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){L.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(e){return!e.shiftKey||1!==e.which&&1!==e.button?!1:(this._resetState(),L.DomUtil.disableTextSelection(),L.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(e),L.DomEvent.on(document,{contextmenu:L.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this),undefined)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=L.DomUtil.create("div","leaflet-zoom-box",this._container),L.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new L.Bounds(this._point,this._startPoint),n=t.getSize();L.DomUtil.setPosition(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(L.DomUtil.remove(this._box),L.DomUtil.removeClass(this._container,"leaflet-crosshair")),L.DomUtil.enableTextSelection(),L.DomUtil.enableImageDrag(),L.DomEvent.off(document,{contextmenu:L.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){setTimeout(L.bind(this._resetState,this),0);var t=new L.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}}),L.Map.addInitHook("addHandler","boxZoom",L.Map.BoxZoom),L.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),L.Map.Keyboard=L.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanOffset(e.options.keyboardPanOffset),this._setZoomOffset(e.options.keyboardZoomOffset)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),L.DomEvent.on(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),L.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,a=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(a,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(e){var t,n,a=this._panKeys={},i=this.keyCodes;for(t=0,n=i.left.length;n>t;t++)a[i.left[t]]=[-1*e,0];for(t=0,n=i.right.length;n>t;t++)a[i.right[t]]=[e,0];for(t=0,n=i.down.length;n>t;t++)a[i.down[t]]=[0,e];for(t=0,n=i.up.length;n>t;t++)a[i.up[t]]=[0,-1*e]},_setZoomOffset:function(e){var t,n,a=this._zoomKeys={},i=this.keyCodes;for(t=0,n=i.zoomIn.length;n>t;t++)a[i.zoomIn[t]]=e;for(t=0,n=i.zoomOut.length;n>t;t++)a[i.zoomOut[t]]=-e},_addHooks:function(){L.DomEvent.on(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){L.DomEvent.off(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,a=this._map;if(n in this._panKeys){if(a._panAnim&&a._panAnim._inProgress)return;t=this._panKeys[n],e.shiftKey&&(t=L.point(t).multiplyBy(3)),a.panBy(t),a.options.maxBounds&&a.panInsideBounds(a.options.maxBounds)}else if(n in this._zoomKeys)a.setZoom(a.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n)return;a.closePopup()}L.DomEvent.stop(e)}}}),L.Map.addInitHook("addHandler","keyboard",L.Map.Keyboard),L.Handler.MarkerDrag=L.Handler.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new L.Draggable(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),L.DomUtil.addClass(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&L.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(e){var t=this._marker,n=t._shadow,a=L.DomUtil.getPosition(t._icon),i=t._map.layerPointToLatLng(a);n&&L.DomUtil.setPosition(n,a),t._latlng=i,e.latlng=i,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){this._marker.fire("moveend").fire("dragend",e)}}),L.Control=L.Class.extend({options:{position:"topright"},initialize:function(e){L.setOptions(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),a=e._controlCorners[n];return L.DomUtil.addClass(t,"leaflet-control"),-1!==n.indexOf("bottom")?a.insertBefore(t,a.firstChild):a.appendChild(t),this},remove:function(){return this._map?(L.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),L.control=function(e){return new L.Control(e)},L.Map.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){function e(e,i){var o=n+e+" "+n+i;t[e+i]=L.DomUtil.create("div",o,a)}var t=this._controlCorners={},n="leaflet-",a=this._controlContainer=L.DomUtil.create("div",n+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},_clearControlPos:function(){L.DomUtil.remove(this._controlContainer)}}),L.Control.Zoom=L.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=L.DomUtil.create("div",t+" leaflet-bar"),a=this.options;return this._zoomInButton=this._createButton(a.zoomInText,a.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(a.zoomOutText,a.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){this._disabled||this._map.zoomIn(e.shiftKey?3:1)},_zoomOut:function(e){this._disabled||this._map.zoomOut(e.shiftKey?3:1)},_createButton:function(e,t,n,a,i){var o=L.DomUtil.create("a",n,a);return o.innerHTML=e,o.href="#",o.title=t,L.DomEvent.on(o,"mousedown dblclick",L.DomEvent.stopPropagation).on(o,"click",L.DomEvent.stop).on(o,"click",i,this).on(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";L.DomUtil.removeClass(this._zoomInButton,t),L.DomUtil.removeClass(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMinZoom())&&L.DomUtil.addClass(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMaxZoom())&&L.DomUtil.addClass(this._zoomInButton,t)}}),L.Map.mergeOptions({zoomControl:!0}),L.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new L.Control.Zoom,this.addControl(this.zoomControl))}),L.control.zoom=function(e){return new L.Control.Zoom(e)},L.Control.Attribution=L.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){L.setOptions(this,e),this._attributions={}},onAdd:function(e){this._container=L.DomUtil.create("div","leaflet-control-attribution"),L.DomEvent&&L.DomEvent.disableClickPropagation(this._container);for(var t in e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),this._container},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(" | ")}}}),L.Map.mergeOptions({attributionControl:!0}),L.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new L.Control.Attribution).addTo(this))}),L.control.attribution=function(e){return new L.Control.Attribution(e)},L.Control.Scale=L.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=L.DomUtil.create("div",t),a=this.options;return this._addScales(a,t+"-line",n),e.on(a.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=L.DomUtil.create("div",t,n)),e.imperial&&(this._iScale=L.DomUtil.create("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=1e3>t?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,a,i=3.2808399*e;i>5280?(t=i/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(a=this._getRoundNum(i),this._updateScale(this._iScale,a+" ft",a/i))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}}),L.control.scale=function(e){return new L.Control.Scale(e)},L.Control.Layers=L.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1},initialize:function(e,t,n){L.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var a in e)this._addLayer(e[a],a);for(a in t)this._addLayer(t[a],a,!0)},onAdd:function(e){return this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._update()},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._update()},removeLayer:function(e){return e.off("add remove",this._onLayerChange,this),delete this._layers[L.stamp(e)],this._update()},_initLayout:function(){var e="leaflet-control-layers",t=this._container=L.DomUtil.create("div",e);t.setAttribute("aria-haspopup",!0),L.DomEvent.disableClickPropagation(t),L.Browser.touch||L.DomEvent.disableScrollPropagation(t);var n=this._form=L.DomUtil.create("form",e+"-list");if(this.options.collapsed){L.Browser.android||L.DomEvent.on(t,{mouseenter:this._expand,mouseleave:this._collapse},this);var a=this._layersLink=L.DomUtil.create("a",e+"-toggle",t);a.href="#",a.title="Layers",L.Browser.touch?L.DomEvent.on(a,"click",L.DomEvent.stop).on(a,"click",this._expand,this):L.DomEvent.on(a,"focus",this._expand,this),L.DomEvent.on(n,"click",function(){setTimeout(L.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=L.DomUtil.create("div",e+"-base",n),this._separator=L.DomUtil.create("div",e+"-separator",n),this._overlaysList=L.DomUtil.create("div",e+"-overlays",n),t.appendChild(n)},_addLayer:function(e,t,n){e.on("add remove",this._onLayerChange,this);var a=L.stamp(e);this._layers[a]={layer:e,name:t,overlay:n},this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;L.DomUtil.empty(this._baseLayersList),L.DomUtil.empty(this._overlaysList);var e,t,n,a,i=0;for(n in this._layers)a=this._layers[n],this._addItem(a),t=t||a.overlay,e=e||!a.overlay,i+=a.overlay?0:1;return this.options.hideSingleBase&&(e=e&&i>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._layers[L.stamp(e.target)],n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",a=document.createElement("div");return a.innerHTML=n,a.firstChild},_addItem:function(e){var t,n=document.createElement("label"),a=this._map.hasLayer(e.layer);e.overlay?(t=document.createElement("input"),t.type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=a):t=this._createRadioElement("leaflet-base-layers",a),t.layerId=L.stamp(e.layer),L.DomEvent.on(t,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+e.name;var o=document.createElement("div");n.appendChild(o),o.appendChild(t),o.appendChild(i);var r=e.overlay?this._overlaysList:this._baseLayersList;return r.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var e,t,n,a=this._form.getElementsByTagName("input"),i=[],o=[];this._handlingClick=!0;for(var r=a.length-1;r>=0;r--)e=a[r],t=this._layers[e.layerId].layer,n=this._map.hasLayer(t),e.checked&&!n?i.push(t):!e.checked&&n&&o.push(t);for(r=0;r<o.length;r++)this._map.removeLayer(o[r]);for(r=0;r<i.length;r++)this._map.addLayer(i[r]);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);e<this._form.clientHeight?(L.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=e+"px"):L.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers()},_collapse:function(){L.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded")},_checkDisabledLayers:function(){for(var e,t,n=this._form.getElementsByTagName("input"),a=this._map.getZoom(),i=n.length-1;i>=0;i--)e=n[i],t=this._layers[e.layerId].layer,e.disabled=t.options.minZoom!==undefined&&a<t.options.minZoom||t.options.maxZoom!==undefined&&a>t.options.maxZoom}}),L.control.layers=function(e,t,n){return new L.Control.Layers(e,t,n)},L.Map.include({_defaultLocateOptions:{timeout:1e4,watch:!1},locate:function(e){if(e=this._locateOptions=L.extend({},this._defaultLocateOptions,e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=L.bind(this._handleGeolocationResponse,this),n=L.bind(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,n,e):navigator.geolocation.getCurrentPosition(t,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,n=e.coords.longitude,a=new L.LatLng(t,n),i=a.toBounds(e.coords.accuracy),o=this._locateOptions;if(o.setView){var r=this.getBoundsZoom(i);this.setView(a,o.maxZoom?Math.min(r,o.maxZoom):r)}var s={latlng:a,bounds:i,timestamp:e.timestamp};for(var l in e.coords)"number"==typeof e.coords[l]&&(s[l]=e.coords[l]);this.fire("locationfound",s)}}),function(e,t){function n(e,t){var n=e.createElement("p"),a=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",a.insertBefore(n.lastChild,a.firstChild)}function a(){var e=y.elements;return"string"==typeof e?e.split(" "):e}function i(e,t){var n=y.elements;"string"!=typeof n&&(n=n.join(" ")),"string"!=typeof e&&(e=e.join(" ")),y.elements=n+" "+e,c(t)}function o(e){var t=v[e[g]];return t||(t={},_++,e[g]=_,v[_]=t),t}function r(e,n,a){if(n||(n=t),d)return n.createElement(e);a||(a=o(n));var i;return i=a.cache[e]?a.cache[e].cloneNode():m.test(e)?(a.cache[e]=a.createElem(e)).cloneNode():a.createElem(e),!i.canHaveChildren||f.test(e)||i.tagUrn?i:a.frag.appendChild(i)}function s(e,n){if(e||(e=t),d)return e.createDocumentFragment();n=n||o(e);for(var i=n.frag.cloneNode(),r=0,s=a(),l=s.length;l>r;r++)i.createElement(s[r]);return i}function l(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return y.shivMethods?r(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+a().join().replace(/[\w\-:]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function c(e){e||(e=t);var a=o(e);return!y.shivCSS||u||a.hasCSS||(a.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),d||l(e,a),e}var u,d,h="3.7.3-pre",p=e.html5||{},f=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,m=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",_=0,v={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",u="hidden"in e,d=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return undefined===e.cloneNode||undefined===e.createDocumentFragment||undefined===e.createElement}()}catch(n){u=!0,d=!0}}();var y={elements:p.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:h,shivCSS:p.shivCSS!==!1,supportsUnknownElements:d,shivMethods:p.shivMethods!==!1,type:"default",shivDocument:c,createElement:r,createDocumentFragment:s,addElements:i};e.html5=y,c(t),"object"==typeof module&&module.exports&&(module.exports=y)}(undefined!==window?window:this,document),Array.prototype.map||(Array.prototype.map=function(e){"use strict";if(this===void 0||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var a=Array(n),i=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)o in t&&(a[o]=e.call(i,t[o],o,t));return a}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null===this||undefined===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,a,i=this.length>>>0,o=!1;for(1<arguments.length&&(a=t,o=!0),n=0;i>n;++n)this.hasOwnProperty(n)&&(o?a=e(a,this[n],n,this):(a=this[n],o=!0));if(!o)throw new TypeError("Reduce of empty array with no initial value");return a}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){"use strict";var n,a;if(null==this)throw new TypeError("this is null or not defined");var i,o=Object(this),r=o.length>>>0;if("[object Function]"!=={}.toString.call(e))throw new TypeError(e+" is not a function");for(arguments.length>=2&&(n=t),a=0;r>a;)a in o&&(i=o[a],e.call(n,i,a,o)),a++}),Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,r,s=[];for(o in i)e.call(i,o)&&s.push(o);if(t)for(r=0;a>r;r++)e.call(i,n[r])&&s.push(n[r]);return s}}()),Array.prototype.some||(Array.prototype.some=function(e){"use strict";if(this===void 0||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var a=arguments.length>=2?arguments[1]:void 0,i=0;n>i;i++)if(i in t&&e.call(a,t[i],i,t))return!0;return!1}),Array.prototype.map||(Array.prototype.map=function(e){"use strict";if(this===void 0||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var a=Array(n),i=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)o in t&&(a[o]=e.call(i,t[o],o,t));return a}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(this===void 0||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var a=[],i=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)if(o in t){var r=t[o];e.call(i,r,o,t)&&a.push(r)}return a}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,a=function(){},i=function(){return n.apply(this instanceof a&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return a.prototype=this.prototype,i.prototype=new a,i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(this===undefined||null===this)throw new TypeError('"this" is null or not defined');var n=this.length>>>0;for(t=+t||0,Math.abs(t)===1/0&&(t=0),0>t&&(t+=n,0>t&&(t=0));n>t;t++)if(this[t]===e)return t;return-1}),"function"!=typeof Promise&&!function(){var e,t,n,a;!function(){var i={},o={};e=function(e,t,n){i[e]={deps:t,callback:n}},a=n=t=function(e){function n(t){if("."!==t.charAt(0))return t;for(var n=t.split("/"),a=e.split("/").slice(0,-1),i=0,o=n.length;o>i;i++){var r=n[i];if(".."===r)a.pop();else{if("."===r)continue;a.push(r)}}return a.join("/")}if(a._eak_seen=i,o[e])return o[e];if(o[e]={},!i[e])throw Error("Could not find module "+e);for(var r,s=i[e],l=s.deps,c=s.callback,u=[],d=0,h=l.length;h>d;d++)"exports"===l[d]?u.push(r={}):u.push(t(n(l[d])));var p=c.apply(this,u);return o[e]=r||p}}(),e("promise/all",["./utils","exports"],function(e,t){"use strict";function n(e){var t=this;if(!a(e))throw new TypeError("You must pass an array to all.");return new t(function(t,n){function a(e){return function(t){o(e,t)}}function o(e,n){s[e]=n,0===--l&&t(s)}var r,s=[],l=e.length;0===l&&t([]);for(var c=0;c<e.length;c++)r=e[c],r&&i(r.then)?r.then(a(c),n):o(c,r)})}var a=e.isArray,i=e.isFunction;t.all=n}),e("promise/asap",["exports"],function(e){"use strict";function t(){return function(){process.nextTick(i)}}function n(){var e=0,t=new l(i),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function a(){return function(){c.setTimeout(i,1)}}function i(){for(var e=0;e<u.length;e++){var t=u[e],n=t[0],a=t[1];n(a)}u=[]}function o(e,t){var n=u.push([e,t]);1===n&&r()}var r,s=undefined!==window?window:{},l=s.MutationObserver||s.WebKitMutationObserver,c=window,u=[];r="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?t():l?n():a(),e.asap=o}),e("promise/config",["exports"],function(e){"use strict";function t(e,t){return 2!==arguments.length?n[e]:(n[e]=t,undefined)}var n={instrument:!1};e.config=n,e.configure=t}),e("promise/polyfill",["./promise","./utils","exports"],function(e,t,n){"use strict";function a(){var e;e=undefined!==window&&window.document?window:self;var t="Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),o(t)}();t||(e.Promise=i)}var i=e.Promise,o=t.isFunction;n.polyfill=a}),e("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(e,t,n,a,i,o,r,s){"use strict";function l(e){if(!k(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof l))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],c(e,this)}function c(e,t){function n(e){f(t,e)}function a(e){g(t,e)}try{e(n,a)}catch(i){a(i)}}function u(e,t,n,a){var i,o,r,s,l=k(n);if(l)try{i=n(a),r=!0}catch(c){s=!0,o=c}else i=a,r=!0;p(t,i)||(l&&r?f(t,i):s?g(t,o):e===E?f(t,i):e===P&&g(t,i))}function d(e,t,n,a){var i=e._subscribers,o=i.length;i[o]=t,i[o+E]=n,i[o+P]=a}function h(e,t){for(var n,a,i=e._subscribers,o=e._detail,r=0;r<i.length;r+=3)n=i[r],a=i[r+t],u(t,n,a,o);e._subscribers=null}function p(e,t){var n,a=null;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(b(t)&&(a=t.then,k(a)))return a.call(t,function(a){return n?!0:(n=!0,t!==a?f(e,a):m(e,a),undefined)},function(t){return n?!0:(n=!0,g(e,t),undefined)}),!0}catch(i){return n?!0:(g(e,i),!0)}return!1}function f(e,t){e===t?m(e,t):p(e,t)||m(e,t)}function m(e,t){e._state===T&&(e._state=S,e._detail=t,y.async(_,e))}function g(e,t){e._state===T&&(e._state=S,e._detail=t,y.async(v,e))}function _(e){h(e,e._state=E)}function v(e){h(e,e._state=P)}var y=e.config,b=(e.configure,t.objectOrFunction),k=t.isFunction,w=(t.now,n.all),x=a.race,C=i.resolve,L=o.reject,I=r.asap;y.async=I;var T=void 0,S=0,E=1,P=2;l.prototype={constructor:l,_state:undefined,_detail:undefined,_subscribers:undefined,then:function(e,t){var n=this,a=new this.constructor(function(){});if(this._state){var i=arguments;y.async(function(){u(n._state,a,i[n._state-1],n._detail)})}else d(this,a,e,t);return a},"catch":function(e){return this.then(null,e)}},l.all=w,l.race=x,l.resolve=C,l.reject=L,s.Promise=l}),e("promise/race",["./utils","exports"],function(e,t){"use strict";function n(e){var t=this;if(!a(e))throw new TypeError("You must pass an array to race.");return new t(function(t,n){for(var a,i=0;i<e.length;i++)a=e[i],a&&"function"==typeof a.then?a.then(t,n):t(a)})}var a=e.isArray;t.race=n}),e("promise/reject",["exports"],function(e){"use strict";function t(e){var t=this;return new t(function(t,n){n(e)})}e.reject=t}),e("promise/resolve",["exports"],function(e){"use strict";function t(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=this;return new t(function(t){t(e)})}e.resolve=t}),e("promise/utils",["exports"],function(e){"use strict";function t(e){return n(e)||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}function a(e){return"[object Array]"===Object.prototype.toString.call(e)}var i=Date.now||function(){return(new Date).getTime()};e.objectOrFunction=t,e.isFunction=n,e.isArray=a,e.now=i}),t("promise/polyfill").polyfill()}();var oldDG=window.DG;DG=new(function(){var e=function(){},t=function(){};return t.prototype=L,e.prototype=new t,e}());for(var prop in oldDG)oldDG.hasOwnProperty(prop)&&undefined===DG[prop]&&(DG[prop]=oldDG[prop]);window.__dgApi__=window.__dgApi__||{},DG.version=window.__dgApi__.version,DG.Icon.Default.imagePath="../img/vendors/leaflet",DG.Map.addInitHook(function(){!function(e,t,n,a,i,o,r){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,o=t.createElement(n),r=t.getElementsByTagName(n)[0],o.async=1,o.src=a,r.parentNode.insertBefore(o,r)}(window,document,"script",DG.config.protocol+DG.config.googleAnalytics,"ga"),ga("create",DG.config.gaCode,"none",{name:"mapsapi2gis"}),ga("mapsapi2gis.send","pageview");var e=new Image;e.src=DG.config.protocol+DG.config.analytics+"?sr="+window.screen.width+"x"+window.screen.height+"&v="+DG.version}),DG.Map.include({addHandler:function(e,t){if(!t)return this;var n=this.options[e],a=n===Object(n)?n:null,i=this[e]=new t(this,a);return this._handlers.push(i),n&&i.enable(),this}}),DG.Map.addInitHook(function(){DG.Browser.touch||DG.DomUtil.addClass(this._container,"no-touch")});var handlers=window.__dgApi__.callbacks||[],chain=Promise.resolve();handlers.forEach(function(e){chain=chain.then(e[0],e[1])}),DG.then=function(e,t){return chain.then(e,t)},chain["catch"](function(e){console.error(e)}),DG.plugin=function(e){var t,n=RegExp(/.js$/i),a=RegExp(/.css$/i),i=new Promise(function(i){function o(){t--,0===t&&i()}function r(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",e),t.onload=function(){o()},t.onerror=function(){o()},t.onreadystatechange=function(){"complete"!==t.readyState&&"loaded"!==t.readyState||o()},document.getElementsByTagName("head")[0].appendChild(t)}function s(e){var t=document.createElement("link");
t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(t),o()}function l(e){return n.test(e)}function c(e){return a.test(e)}function u(e){l(e)?r(e):c(e)?s(e):t--}DG.Util.isArray(e)&&(t=e.length,e.forEach(function(e){u(e)})),"string"==typeof e&&(t=1,u(e))});return i},DG.Dictionary={},DG.Dictionary.ru={pluralRules:function(e){return e%10===1&&e%100!==11?0:e%10>=2&&4>=e%10&&e%10%1===0&&(12>e%100||e%100>14)?1:e%10===0||e%10>=5&&9>=e%10&&e%10%1===0||e%100>=11&&14>=e%100&&e%100%1===0?2:undefined}},DG.Dictionary.en={pluralRules:function(e){return 1===e?0:1}},DG.Dictionary.it={pluralRules:function(e){return 1===e?0:1}},DG.Dictionary.cs={pluralRules:function(e){return 1===e?0:e>=2&&4>=e?1:2}},DG.Dictionary.es={pluralRules:function(e){return e>=2?1:0}},DG.Locale={t:function(e,t){var n,a,i,o=this._map.getLang(),r=!1;return undefined===this.constructor.Dictionary[o]&&(o=DG.config.defaultLang,this._map.setLang(o)),a=this.constructor.Dictionary[o][e],(r=undefined!==a)?(n=r?a:e,t!==undefined&&(t=parseInt(t,10),t=isNaN(t)?0:t,i=this.constructor.Dictionary[o].pluralRules(t),n=a[i]),n=DG.Util.template(n,{n:t}),n?n:e):e}},DG.Map.include({setLang:function(e){e&&"[object String]"===Object.prototype.toString.call(e)&&(this.options.currentLang=e,this.fire("langchange",{lang:e}))},getLang:function(){if(!this.options.currentLang){var e=document.documentElement,t=e.lang||e.getAttributeNS&&e.getAttributeNS("http://www.w3.org/XML/1998/namespace","lang")||DG.config.defaultLang;this.options.currentLang=t}return this.options.currentLang}}),DG.RoundControl=DG.Control.extend({includes:DG.Mixin.Events,options:{position:"topright",iconClass:"default"},onAdd:function(e){var t=this._controlCLass="dg-control-round",n=this._controlIconCLass=this._controlCLass+"__icon",a=DG.DomUtil.create("div","");if(this._disable)return a;DG.DomUtil.addClass(a,t);var i=this._link=DG.DomUtil.create("a",n+" "+n+"_name_"+this.options.iconClass,a);return i.href="#",this._renderTranslation(),this._map=e,DG.DomEvent.on(a,"click",this._toggleControl,this).on(a,"dblclick",DG.DomEvent.stopPropagation).on(i,"mousedown",DG.DomEvent.stopPropagation),this.fireEvent("add"),a},onRemove:function(){this.fireEvent("remove"),DG.DomEvent.off(this._link,"click",this._toggleControl)},setState:function(e){return this._link&&this._container?(this._state&&(DG.DomUtil.removeClass(this._container,this._controlCLass+"_state_"+this._state),DG.DomUtil.removeClass(this._link,this._controlIconCLass+"_state_"+this._state),this._state=null),e&&(this._state=e,DG.DomUtil.addClass(this._container,this._controlCLass+"_state_"+this._state),DG.DomUtil.addClass(this._link,this._controlIconCLass+"_state_"+this._state)),this):this},_toggleControl:function(e){DG.DomEvent.stop(e),this.fireEvent("click")}}),DG.RoundControl.include(DG.Locale),DG.roundControl=function(e){return new DG.RoundControl(e)},DG.ProjectDetector=DG.Handler.extend({initialize:function(e){this._map=e,this._osmViewport=!1,this._project=null,this._noProjectEventFired=!1,this._loadProjectList(),this._searchProject()},addHooks:function(){this._map.on("move",this._projectWatch,this)},removeHooks:function(){this._map.off("move",this._projectWatch,this)},getProject:function(){return this._project?DG.Util.extend({},this._project):!1},getProjectsList:function(){return this._projectList.slice(0)},isProjectHere:function(e,t,n){return e?(e instanceof DG.LatLng||e instanceof DG.LatLngBounds||(e=DG.latLng(e)),e=e instanceof DG.LatLngBounds?DG.latLngBounds(e.getSouthWest().wrap(),e.getNorthEast().wrap()):e.wrap(),n=n||(e instanceof DG.LatLngBounds?"intersects":"contains"),t?this._testProject(n,e,t):this._projectList.filter(this._testProject.bind(this,n,e))[0]):null},_projectWatch:function(){this._osmViewport===(this._project&&this._boundInProject(this._project,"contains"))&&(this._osmViewport=!this._osmViewport,this._map.attributionControl._update(null,this._osmViewport)),this._project&&this._boundInProject(this._project)&&this._zoomInProject(this._project)||(this._project&&(this._project=null,this._map.fire("projectleave")),this._searchProject(),this._project&&(this._osmViewport===(this._project&&this._boundInProject(this._project,"contains"))&&(this._osmViewport=!this._osmViewport),this._map.attributionControl._update(null,this._osmViewport,this._project.country_code)))},_wktToBnd:function(e){var t,n,a,i;e=e.replace(/, /g,","),e.replace(" (","("),t=/^POLYGON\((.*)\)/.exec(e),i=/\((.*?)\)/g,a=i.exec(t[1]),n=a[1].split(","),n=n.map(function(e){var t=e.split(" ");return DG.latLng(parseFloat(t[1]),parseFloat(t[0]))});var o=DG.latLngBounds(n);return[[o.getSouthWest().lat,o.getSouthWest().lng],[o.getNorthEast().lat,o.getNorthEast().lng]]},_checkProject:function(e){function t(e){return e!==undefined&&null!==e}return e&&e.bounds&&t(e.code)&&t(e.domain)&&t(e.country_code)&&e.zoom_level&&t(e.zoom_level.min)&&t(e.zoom_level.max)&&e.time_zone&&t(e.time_zone.offset)},_loadProjectList:function(){var e=this;DG.fallbackProjectsList=DG.fallbackProjectsList||[],DG.projectsList||(DG.projectsList=DG.fallbackProjectsList),delete DG.fallbackProjectsList,this._projectList=DG.projectsList.filter(e._checkProject).map(function(t){var n=e._wktToBnd(t.bounds),a=new DG.LatLngBounds(n);return{id:t.id,code:t.code,minZoom:t.zoom_level.min,maxZoom:t.zoom_level.max,timeOffset:t.time_zone.offset,bound:n,latLngBounds:a,traffic:!!t.flags.traffic,transport:!!t.flags.public_transport,roads:!!t.flags.road_network,country_code:t.country_code,domain:t.domain}})},_searchProject:function(){var e=this._projectList.filter(function(e){return this._boundInProject(e)&&this._zoomInProject(e)},this),t=!1;try{this._map._checkIfLoaded(),t=!0}catch(n){t=!1}if(t&&0===e.length&&!this._noProjectEventFired){var a=this;setTimeout(function(){a._map.fire("projectleave"),a._noProjectEventFired=!0},1)}e.some(function(e){var t=this;return this._project=e,setTimeout(function(){t._map.fire("projectchange",{getProject:t.getProject.bind(t)})},1),!0},this)},_boundInProject:function(e,t){try{return this.isProjectHere(this._map.getCenter(),e,t)}catch(n){return!1}},_testProject:function(e,t,n){return n.latLngBounds[e](t)},_zoomInProject:function(e){return this._map.getZoom()>=e.minZoom}}),DG.Map.mergeOptions({projectDetector:!0}),DG.Map.addInitHook("addHandler","projectDetector",DG.ProjectDetector),DG.configTheme=DG.configTheme||{},DG.configTheme.markersData={iconSize:[22,34],className:"dg-customization__marker dg-customization__marker_type_mushroom",iconAnchor:[10,32]};var controlAddTo=DG.Control.prototype.addTo;DG.Control.include({addTo:function(e){return e.on("langchange",this._renderTranslation,this),controlAddTo.call(this,e)},_renderTranslation:function(){}}),DG.Browser.safari51=DG.Browser.safari&&-1!==navigator.userAgent.indexOf("Version/5.1"),DG.Marker.prototype.options.icon=DG.divIcon(DG.configTheme.markersData);var utilSetOptions=DG.Util.setOptions;DG.setOptions=L.setOptions=DG.Util.setOptions=function(e,t){return t&&undefined!==t.clickable&&(t.interactive=t.clickable),utilSetOptions.call(this,e,t)},DG.Layer.mergeOptions({nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]});var panBy=DG.Map.prototype.panBy,getBoundsZoom=DG.Map.prototype.getBoundsZoom,setMaxZoom=DG.Map.prototype.setMaxZoom;DG.Map.include({_tileLayersNumber:0,_mapMaxZoomCache:null,initialize:function(e,t){t=L.setOptions(this,t),this._initContainer(e),this._initLayout(),this._onResize=L.bind(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==undefined&&(this._zoom=this._limitZoom(t.zoom)),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._addLayers(t.layers),t.center&&t.zoom!==undefined&&this.setView(L.latLng(t.center),t.zoom,{reset:!0})},setView:function(e,t,n){if(this._restrictZoom(e,t),t=t===undefined?this._zoom:this._limitZoom(t),e=this._limitCenter(DG.latLng(e),t,this.options.maxBounds),n=n||{},n.animate&&(n.animate=this._testAnimation(e)),this.stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==undefined&&(n.zoom=DG.extend({animate:n.animate,duration:n.duration},n.zoom),n.pan=DG.extend({animate:n.animate,duration:n.duration},n.pan));var a=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,n.zoom):this._tryAnimatedPan(e,n.pan);if(a)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},panBy:function(e,t){var n=panBy.call(this,e,t),a=this._restrictZoom(this.getCenter());return this.getZoom()>a&&this.setZoom(a),n},getBoundsZoom:function(e,t,n){return e=DG.latLngBounds(e),this._restrictZoom(e),getBoundsZoom.call(this,e,t,n)},getTileLayersNumber:function(){return this._tileLayersNumber},setMaxZoom:function(e){return this._mapMaxZoomCache=null,setMaxZoom.call(this,e)},_testAnimation:function(e){if(this.projectDetector.enabled()){var t=this.projectDetector.getProject(),n=this.projectDetector.isProjectHere(e);if(t&&n)return t.code===n.code}return!0},_updateTileLayers:function(e){e.layer instanceof DG.TileLayer&&!e.layer._isDg&&("layeradd"===e.type?this._tileLayersNumber++:this._tileLayersNumber--)},_getNewBounds:function(e,t){if(e instanceof DG.LatLngBounds)return e;var n=this.project(e,t),a=this.getSize().divideBy(2),i=this.unproject(n.subtract(a),t),o=this.unproject(n.add(a),t);return DG.latLngBounds(i,o)},_restrictZoom:function(e,t){if(this._layers&&this.projectDetector.enabled()&&0===this._tileLayersNumber){var n=this.options,a=!!n.maxZoom,i=this.baseLayer,o=this._getNewBounds(e,t),r=this.projectDetector.isProjectHere(o);return a?(this._mapMaxZoomCache||(this.baseLayer.options.detectRetina&&DG.Browser.retina&&n.maxZoom>0&&n.maxZoom--,this._mapMaxZoomCache=n.maxZoom),n.maxZoom=this._mapMaxZoomCache&&r?this._mapMaxZoomCache:DG.config.projectLeaveMaxZoom,r&&(this._mapMaxZoomCache=n.maxZoom),n.maxZoom):(r?i.options.detectRetina&&DG.Browser.retina&&r.maxZoom>0?i.options.maxZoom=r.maxZoom-1:i.options.maxZoom=r.maxZoom:i.options.maxZoom=DG.config.projectLeaveMaxZoom,i.options.maxNativeZoom=i.options.maxZoom,this._updateZoomLevels(),i.options.maxZoom)}},_handleDOMEvent:function(e){if(this._loaded&&!L.DomEvent._skipped(e)){var t="keypress"===e.type&&13===e.keyCode?"click":e.type;if("click"===e.type){var n=L.Util.extend({},e);n.type="prepreclick",this._handleDOMEvent(n);var a=L.Util.extend({},e);a.type="preclick",this._handleDOMEvent(a)}"mousedown"===t&&L.DomUtil.preventOutline(e.target||e.srcElement),this._fireDOMEvent(e,t)}},_fireDOMEvent:function(e,t,n){if(!e._stopped&&(n=(n||[]).concat(this._findEventTargets(e,t)),n.length)){var a=n[0];if("contextmenu"===t&&a.listens(t,!0)&&L.DomEvent.preventDefault(e),"click"!==e.type&&"preclick"!==e.type&&"prepreclick"!==e.type||e._simulated||!this._draggableMoved(a)){var i={originalEvent:e};if("keypress"!==e.type){var o=a instanceof L.Marker;i.containerPoint=o?this.latLngToContainerPoint(a.getLatLng()):this.mouseEventToContainerPoint(e),i.layerPoint=this.containerPointToLayerPoint(i.containerPoint),i.latlng=o?a.getLatLng():this.layerPointToLatLng(i.layerPoint)}for(var r=0;r<n.length;r++)if(n[r].fire(t,i,!0),i.originalEvent._stopped||n[r].options.nonBubblingEvents&&-1!==L.Util.indexOf(n[r].options.nonBubblingEvents,t))return}}}}),DG.Map.addInitHook(function(){this.on("layeradd layerremove",this._updateTileLayers)}),DG.Map.addInitHook(function(){function e(){var e=this.getLang(),a=this.projectDetector&&this.projectDetector.getProject();"ru"!==e||a?this.baseLayer.options.errorTileUrl=t:this.baseLayer.options.errorTileUrl=n}var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEAAQMAAABmvDolAAAAA1BMVEX28t5R0k5UAAAAH0lEQVR4Xu3AAQkAAADCMPunNsdhWxwAAAAAAAAAwAEhAAABg2UP5AAAAABJRU5ErkJggg==",n=DG.config.protocol+DG.config.baseUrl+"/img/nomap_ru.png",a=DG.TileLayer.extend({initialize:function(e,t){this._isDg=!0,DG.TileLayer.prototype.initialize.call(this,e,t)},getTiles:function(){return this._tiles}});this.baseLayer=new a(DG.config.protocol+DG.config.tileServer,{subdomains:"0123",errorTileUrl:"ru"===this.getLang()?n:t,detectRetina:DG.config.detectRetina,maxZoom:19,maxNativeZoom:19,zIndex:0}).addTo(this),this.on({langchange:e,projectchange:e,projectleave:e},this)}),DG.Map.mergeOptions({tilesCheck:!0}),DG.Map.TilesCheck=DG.Handler.extend({initialize:function(e){this._map=e,this._layer=e.baseLayer,this._moveStartEventCounter=0,this._moveEndEventCounter=0,this._loadingEventCounter=0,this._loadEventCounter=0},addHooks:function(){this._map.on(this._mapEvents,this),this._layer.on(this._layerEvents,this)},removeHooks:function(){this._map.off(this._mapEvents,this),this._layer.off(this._layerEvents,this)},_mapEvents:{layeradd:function(e){e.layer==this._layer&&this.enable()},layerremove:function(e){e.layer==this._layer&&this.disable()},movestart:function(){this._stopWaiting(),this._moveStartEventCounter++,this._isWaiting=!0},moveend:function(){this._moveEndEventCounter++,(this._isWaiting||this._moveStartEventCounter===this._moveEndEventCounter)&&(this._isMoveEnd=!0,this._checkWaiting())}},_layerEvents:{loading:function(){this._loadingEventCounter++},load:function(){this._loadEventCounter++,(this._isWaiting||this._loadingEventCounter===this._loadEventCounter)&&(this._isLoad=!0,this._checkWaiting())}},_stopWaiting:function(){this._isWaiting=!1,this._isMoveEnd=!1,this._isLoad=!1},_checkWaiting:function(){this._isWaiting&&this._isLoad&&this._isMoveEnd&&(this._stopWaiting(),this._resetCounters(),this._checkTiles())},_checkTiles:function(){if(0===this._map.getTileLayersNumber()&&this._map._loaded){var e=this._map.getZoom(),t=this._layer.options.errorTileUrl,n=this._layer.getTiles();for(var a in n)if(n[a].coords.z===e&&n[a].el.src!==t)return;this._map.zoomOut()}},_resetCounters:function(){this._moveStartEventCounter=0,this._moveEndEventCounter=0,this._loadingEventCounter=0,this._loadEventCounter=0}}),DG.Map.addInitHook("addHandler","tilesCheck",DG.Map.TilesCheck),DG.ajax=function(){function handleReadyState(e,t,n){return function(){return e._aborted?n(e.request):(e.request&&4===e.request[readyState]&&(e.request.onreadystatechange=noop,twoHundo.test(e.request.status)?t(e.request):n(e.request)),undefined)}}function setHeaders(e,t){var n,a=t.headers||{};a.Accept=a.Accept||defaultHeaders.accept[t.dataType]||defaultHeaders.accept["*"],t.crossDomain||a[requestedWith]||(a[requestedWith]=defaultHeaders.requestedWith),a[contentType]||(a[contentType]=t.contentType||defaultHeaders.contentType);for(n in a)a.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,a[n])}function setCredentials(e,t){undefined!==t.withCredentials&&undefined!==e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,a){var i=uniqid++,o=e.jsonpCallback||"callback",r=e.jsonpCallbackName||callbackPrefix,s=RegExp("((^|\\?|&)"+o+")=([^&]+)"),l=a.match(s),c=doc.createElement("script"),u=0,d=-1!==navigator.userAgent.indexOf("MSIE 10.0");return l?"?"===l[3]?a=a.replace(s,"$1="+r):r=l[3]:a=urlappend(a,o+"="+r),win[r]=generalCallback,c.type="text/javascript",c.src=a,c.async=!0,undefined===c.onreadystatechange||d||(c.event="onclick",c.htmlFor=c.id="_request_"+i),c.onerror=function(){c.onerror=c.onload=c.onreadystatechange=null,n({},"Request unknown error",{}),lastValue=undefined,head.removeChild(c),u=1},c.onload=c.onreadystatechange=function(){return c[readyState]&&"complete"!==c[readyState]&&"loaded"!==c[readyState]||u?!1:(c.onerror=c.onload=c.onreadystatechange=null,c.onclick&&c.onclick(),t(lastValue),lastValue=undefined,head.removeChild(c),u=1,undefined)},head.appendChild(c),{abort:function(){c.onerror=c.onload=c.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=undefined,head.removeChild(c),u=1}}}function getRequest(e,t){var n,a=this.options,i=(a.type||"GET").toUpperCase(),o="string"==typeof a?a:a.url,r=a.processData!==!1&&a.data&&"string"!=typeof a.data?Ajax.toQueryString(a.data):a.data||null,s=!1;return"jsonp"!==a.type&&"GET"!==i||!r||(o=urlappend(o,r),r=null),"jsonp"===a.type?handleJsonp(a,e,t,o):(n=xhr(a),n.open(i,o,a.async!==!1),setHeaders(n,a),setCredentials(n,a),win[xDomainRequest]&&n instanceof win[xDomainRequest]?(n.onload=e,n.onprogress=function(){},n.ontimeout=function(){},n.onerror=t,s=!0):n.onreadystatechange=handleReadyState(this,e,t),s?setTimeout(function(){n.send(r)},200):n.send(r),n)}function buildParams(e,t,n,a){var i,o,r,s=/\[\]$/;if(DG.Util.isArray(t))for(o=0;t&&o<t.length;o++)r=t[o],n||s.test(e)?a(e,r):buildParams(e+"["+("object"==typeof r?o:"")+"]",r,n,a);else if(t&&""+t=="[object Object]")for(i in t)t.hasOwnProperty(i)&&buildParams(e+"["+i+"]",t[i],n,a);else a(e,t)}function setType(e){var t=e.match(/\.(json|jsonp|html|xml)(\?|$)/);return t?t[1]:"js"}function isCrossDomain(e){var t=rurl.exec(e.toLowerCase());return!(!t||t[1]===ajaxLocParts[1]&&t[2]===ajaxLocParts[2]&&(t[3]||("http:"===t[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")))}function doRequest(o){"crossDomain"in o||(o.crossDomain=isCrossDomain(o.url));var self={};return self.promise=new Promise(function(resolve,reject){function complete(e){o.timeout&&clearTimeout(self.timeout),self.timeout=null,self._erred?reject(e):resolve(e)}function success(resp){resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval("("+r+")");break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}self._responseArgs.resp=resp,complete(resp)}function error(e,t,n){e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0,complete(e)}self.abort=function(){self._aborted=!0,reject("aborted")},self.url=o.url,self.timeout=null,self.options=o,self._aborted=!1,self._erred=!1,self._responseArgs={};var type="jsonp"===o.type?o.type:o.dataType||setType(self.url);o.timeout&&(self.timeout=setTimeout(function(){self.abort()},o.timeout)),self.request=getRequest.call(self,success,error)}),self}function Ajax(e,t){"[object Object]"===Object.prototype.toString.call(e)&&(t=e,e=undefined),t=t||{},t.url=e||t.url;var n=doRequest(t),a=n.promise;return(t.success||t.error||t.complete)&&a.then(t.success,t.error),a.abort=n.abort,a}var win=window,doc=document,rurl=/^([\w.+-]+:)?(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,twoHundo=/^20\d$/,ajaxLocParts,ajaxLocation,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="l_dg_ajax_callback_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossDomain===!0){var t=win[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(win[xDomainRequest])return new XDomainRequest;throw Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],Ajax.setup=function(e){e=e||{};for(var t in e)e.hasOwnProperty(t)&&(globalSetupOptions[t]=e[t])},Ajax.toQueryString=function(e,t){var n,a,i=t||!1,o=[],r=encodeURIComponent,s=function(e,t){t="function"==typeof t?t():t||"",o[o.length]=r(e)+"="+r(t)};if(DG.Util.isArray(e))for(a=0;e&&a<e.length;a++)s(e[a].name,e[a].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],i,s);return o.join("&").replace(/%20/g,"+")};var testxhr=win[xmlHttpRequest]?new XMLHttpRequest:null;return Ajax.corsSupport=!(!(testxhr&&"withCredentials"in testxhr||win[xDomainRequest])||DG.Browser.ie&&-1!=document.location.host.toLowerCase().search(/[а-я]/)),Ajax}(),DG.Wkt={},DG.Wkt.toGeoJSON=function(e){function t(t){var n=e.substring(m).match(t);return n?(m+=n[0].length,n[0]):null}function n(e){return e&&g.match(/\d+/)&&(e.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+g}}),e}function a(){t(/^\s*/)}function i(){a();for(var e,n=0,i=[],o=[i],r=i;e=t(/^(\()/)||t(/^(\))/)||t(/^(\,)/)||t(/^[-+]?([0-9]*\.[0-9]+|[0-9]+)/);){if("("===e)o.push(r),r=[],o[o.length-1].push(r),n++;else if(")"===e){if(r=o.pop(),n--,0===n)break}else","===e?(r=[],o[o.length-1].push(r)):r.push(parseFloat(e));a()}return o.length=0,0!==n?null:i}function o(){for(var e,n,i=[];n=t(/^[-+]?([0-9]*\.[0-9]+|[0-9]+)/)||t(/^(\,)/);)","===n?(i.push(e),e=[]):(e||(e=[]),e.push(parseFloat(n))),a();return e&&i.push(e),i.length?i:null}function r(){if(!t(/^(point)/i))return null;if(a(),!t(/^(\()/))return null;var e=o();return a(),t(/^(\))/)?{type:"Point",coordinates:e[0]}:null}function s(){if(!t(/^(multipoint)/i))return null;a();var e=i();return a(),{type:"MultiPoint",coordinates:e}}function l(){if(!t(/^(multilinestring)/i))return null;a();var e=i();return a(),{type:"MultiLineString",coordinates:e}}function c(){if(!t(/^(linestring)/i))return null;if(a(),!t(/^(\()/))return null;var e=o();return t(/^(\))/)?{type:"LineString",coordinates:e}:null}function u(){return t(/^(polygon)/i)?(a(),{type:"Polygon",coordinates:i()}):null}function d(){return t(/^(multipolygon)/i)?(a(),{type:"MultiPolygon",coordinates:i()}):null}function h(){var e,n=[];if(!t(/^(geometrycollection)/i))return null;if(a(),!t(/^(\()/))return null;for(;e=p();)n.push(e),a(),t(/^(\,)/),a();return t(/^(\))/)?{type:"GeometryCollection",geometries:n}:null}function p(){return r()||c()||u()||s()||l()||d()||h()}DG.Util.isArray(e)&&(e=e[0]);var f=e.split(";");e=f.pop();var m=0,g=(f.shift()||"").split("=").pop();return n(p())},DG.Wkt.geoJsonLayer=function(e,t){return DG.geoJson(DG.Wkt.toGeoJSON(e),t)},DG.Wkt._coordsToLatLngs=function(e){return DG.Util.isArray(e)&&!DG.Util.isArray(e[0])?[DG.GeoJSON.coordsToLatLng(e)]:e.map(function(e){return DG.Wkt._coordsToLatLngs(e)}).reduce(function(e,t){return e.concat(t)})},DG.Wkt.toLatLngs=function(e){return DG.Util.isArray(e)||(e=[e]),e.map(function(e){var t=DG.Wkt.toGeoJSON(e).coordinates;return DG.Wkt._coordsToLatLngs(t)}).reduce(function(e,t){return e.concat(t)})},DG.Wkt.toPoints=function(e){return DG.Wkt.toGeoJSON(e).coordinates},DG.Wkt.pointsToLatLngOnMap=function(e,t){return function n(e){return Array.isArray(e)&&Array.isArray(e[0])?e.map(n):t.containerPointToLatLng(e)}(DG.Wkt.toPoints(e))},DG.Meta={},DG.Meta.Layer=DG.Layer.extend({options:{tileSize:256,minZoom:0,maxZoom:19,zoomOffset:0,eventBubbling:"transparent"},initialize:function(e,t){DG.TileLayer.prototype.initialize.call(this,null,t),delete this._url,this._currentTile=!1,this._currentTileData=!1,this._origin=DG.Meta.origin(e,{dataFilter:this.options.dataFilter})},getOrigin:function(){return this._origin},onAdd:function(e){this._resetView(),this._addDomEvents(),e.on("rulerstart",this._removeDomEvents,this),e.on("rulerend",this._addDomEvents,this)},onRemove:function(e){this._removeDomEvents(),this._tileZoom=null,e.off("rulerstart",this._removeDomEvents,this),e.off("rulerend",this._addDomEvents,this)},getEvents:function(){return{viewreset:this._resetAll,zoom:this._resetView}},_addDomEvents:function(){DG.DomEvent.on(this._map.getPane("tilePane"),this._domEvents,this)},_removeDomEvents:function(){DG.DomEvent.off(this._map.getPane("tilePane"),this._domEvents,this)},_removeAllTiles:DG.GridLayer.prototype._removeAllTiles,_getZoomForUrl:DG.TileLayer.prototype._getZoomForUrl,getTileSize:DG.TileLayer.prototype.getTileSize,_isValidTile:DG.GridLayer.prototype._isValidTile,_wrapCoords:DG.GridLayer.prototype._wrapCoords,_resetView:DG.GridLayer.prototype._resetView,_resetGrid:DG.GridLayer.prototype._resetGrid,_resetAll:DG.GridLayer.prototype._resetAll,_pxBoundsToTileRange:DG.GridLayer.prototype._pxBoundsToTileRange,_domEvents:{mousemove:function(e){var t,n,a,i=this.getTileSize(),o=this._map.mouseEventToLayerPoint(e),r=this._map.getPixelOrigin().add(o),s=r.unscaleBy(i).floor(),l=this._map.getZoom();l>this.options.maxZoom+this.options.zoomOffset||l<this.options.minZoom-this.options.zoomOffset||!this._isValidTile(s)||(this._wrapCoords(s),s.z=this._getZoomForUrl(),s.key=i.x+"x"+i.y,n=this._origin.getTileKey(s),n!==this._currentTile&&(this._currentTile=n,this._currentTileData=!1),this._currentTileData===!1?this._currentTileData=this._origin.getTileData(s):(t=DG.point(r.x%i.x,r.y%i.y),a=this._getHoveredObject(s,t),this._hoveredEntity!==a&&(this._fireMouseEvent("mouseout",e),this._hoveredEntity=a,this._fireMouseEvent("mouseover",e)),this._fireMouseEvent("mousemove",e)))},mouseout:function(e){this._fireMouseEvent("mouseout",e),this._hoveredEntity=null,this._currentTile=!1},click:function(e){this._fireMouseEvent("click",e)},dblclick:function(e){this._fireMouseEvent("dblclick",e)},mousedown:function(e){this._fireMouseEvent("mousedown",e)},contextmenu:function(e){this._fireMouseEvent("contextmenu",e)}},_fireMouseEvent:function(e,t){this._hoveredEntity&&(this.fire(e,{meta:this._hoveredEntity,latlng:this._map.mouseEventToLatLng(t)}),"layer"===this.options.eventBubbling&&DG.DomEvent.stop(t))},_getHoveredObject:function(e,t){for(var n=0;n<this._currentTileData.length;n++)if(DG.PolyUtil.contains(t,this._currentTileData[n].geometry.coordinates[0]))return this._currentTileData[n];return null},_setView:function(e,t,n,a){var i=Math.round(t),o=this._tileZoom!==i;!a&&o&&(this._tileZoom=i,this._resetGrid())}}),DG.Meta.layer=function(e,t){return new DG.Meta.Layer(e,t)},DG.Meta.Origin=DG.Class.extend({options:{subdomains:"0123",dataFilter:null},_url:!1,initialize:function(e,t){this._url=e,this._requests={},this._tileStorage={},t=DG.setOptions(this,t),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split(""))},getTileData:function(e){var t=this.getTileKey(e),n=this;return undefined===this._tileStorage[t]&&undefined===this._requests[t]?(this._tileStorage[t]=!1,this._requests[t]=this._requestData(e).then(function(a){n.setTileData(t,n.options.dataFilter?n.options.dataFilter(a,e):a),delete n._requests[t]}),!1):this._tileStorage[t]},setTileData:function(e,t){return"string"!=typeof e&&(e=this.getTileKey(e)),t.forEach(function(t){t.geometry.constructor!==Object&&(t.geometry=DG.Wkt.toGeoJSON(t.geometry)),this._tileStorage[e]||(this._tileStorage[e]=[]),this._tileStorage[e].push(t)},this),this},flush:function(){return this._tileStorage={},Object.keys(this._requests).forEach(function(e){this[e].abort&&this[e].abort()},this._requests),this},setURL:function(e,t){return this._url=e,t&&this.flush(),this},getTileKey:function(e){return[e.x,e.y,e.z,e.key].join(":")},_requestData:function(e){return this._url?this._performRequest(e):Promise.resolve([])},_performRequest:function(e){return DG.ajax(this._prepareURL(e),{type:"get",dataType:"json"})},_prepareURL:function(e){return DG.Util.template(this._url,{x:e.x,y:e.y,z:e.z,s:this._getSubdomain(e)})},_getSubdomain:DG.TileLayer.prototype._getSubdomain}),DG.Meta.origin=function(e,t){return new DG.Meta.Origin(e,t)},DG.PolyUtil.contains=function(e,t){var n,a,i,o=0,r=[];for(a=0,i=t.length;i>a;a++)r.push(DG.point(t[a]));for(n=this._getEdges(r),a=0,i=n.length;i>a;a++)switch(this._getEdgeType(n[a],e)){case"TOUCHING":return!0;case"CROSSING":o=1-o}return!!o},DG.PolyUtil._getEdges=function(e){for(var t,n,a,i=[],o=0,r=e.length;r>o;o++)n=e[o],a=o!==r-1?e[o+1]:e[0],t={startPoint:n,endPoint:a},i.push(t);return i},DG.PolyUtil._getEdgeType=function(e,t){var n=this._classify(e,t);switch(n){case"LEFT":return e.startPoint.y<t.y&&t.y<=e.endPoint.y?"CROSSING":"INESSENTIAL";case"RIGHT":return e.endPoint.y<t.y&&t.y<=e.startPoint.y?"CROSSING":"INESSENTIAL";case"BETWEEN":case"ORIGIN":case"DESTINATION":return"TOUCHING";default:return"INESSENTIAL"}},DG.PolyUtil._classify=function(e,t){var n,a,i;return n={x:e.endPoint.x-e.startPoint.x,y:e.endPoint.y-e.startPoint.y},a={x:t.x-e.startPoint.x,y:t.y-e.startPoint.y},i=n.x*a.y-a.x*n.y,i>0?"LEFT":0>i?"RIGHT":n.x*a.x<0||n.y*a.y<0?"BEHIND":this._getLengthSquared(n)<this._getLengthSquared(a)?"BEYOND":DG.PolyUtil._areEquals(e.startPoint,t)?"ORIGIN":DG.PolyUtil._areEquals(e.endPoint,t)?"DESTINATION":"BETWEEN"},DG.PolyUtil._getLengthSquared=function(e){return Math.pow(e.x,2)+Math.pow(e.y,2)},DG.PolyUtil._areEquals=function(e,t){return e.x===t.x&&e.y===t.y},DG.Entrance=DG.FeatureGroup.extend({options:{vectors:[],fillColor:"#0085a0",strokeColor:"#fff",enableAnimation:!0,interactive:!1,autoClose:!0},statics:{SHOW_FROM_ZOOM:DG.Browser.svg?16:17},initialize:function(e){DG.setOptions(this,e),DG.FeatureGroup.prototype.initialize.call(this,e),this._initArrows()},onAdd:function(e){DG.FeatureGroup.prototype.onAdd.call(this,e),this._map=e,this._eventHandler=new DG.Entrance.EventHandler(e,this,this.options),this._eventHandler.enable(),this.eachLayer(function(e){e.setStyle({visibility:"hidden"})}),this._isShown=!1,this.show(!1)},onRemove:function(e){DG.FeatureGroup.prototype.onRemove.call(this,e),this._isShown=!1,this._map.fire("entrancehide"),this._map=null,this._eventHandler.disable(),this._eventHandler=null},show:function(e){var t=this;return this._layers?(e!==!1&&this.fitBounds(),this._isAllowedZoom()&&(this.eachLayer(function(e){e.setStyle({visibility:"visible"}),t.options.enableAnimation&&DG.Path.ANIMATION_AVAILABLE&&e.runAnimation("animateArrowPathGeom")}),this._isShown||(this._map.fire("entranceshow"),this._isShown=!0)),this):this},hide:function(){return this.isShown()&&this._layers&&(this.eachLayer(function(e){e.setStyle({visibility:"hidden"})}),this._isShown=!1,this._map.fire("entrancehide")),this},isShown:function(){return this._isShown},setFillColor:function(e){this.eachLayer(function(t){"fill"==t.options.type&&t.setStyle({color:e})})},setStrokeColor:function(e){this.eachLayer(function(t){"stroke"==t.options.type&&t.setStyle({color:e})})},_initArrows:function(){this.options.vectors.map(function(e){return DG.Wkt.toLatLngs(e)}).forEach(function(e){DG.Browser.ielt9||this.addLayer(DG.Entrance.arrow(e,this._getArrowStrokeOptions())),this.addLayer(DG.Entrance.arrow(e,this._getArrowOptions()))},this)},_getFitZoom:function(){return this._map.projectDetector.getProject().maxZoom||DG.Entrance.SHOW_FROM_ZOOM},fitBounds:function(){var e,t=this._map,n=this.getBounds();return t.getBounds().contains(n)&&this._isAllowedZoom()||(e=this._getFitZoom(),t.projectDetector.getProject()||t.once("moveend",function(){t.setZoom(this._getFitZoom())},this),t.setView(n.getCenter(),e,{animate:!0})),this},_isAllowedZoom:function(){return this._map.getZoom()>=DG.Entrance.SHOW_FROM_ZOOM},_getArrowStrokeOptions:function(){return{type:"stroke",enableAnimation:this.options.enableAnimation,interactive:this.options.interactive,color:this.options.strokeColor,weight:6,byZoom:{16:{marker:{viewBox:"0 0 24 24",refX:12,refY:12,markerHeight:24,markerWidth:24,path:{d:"M9.313,18.984c2.246-1.468,7.101-5.562,7.101-5.562c0.781-0.781,0.781-2.047,0-2.828c0,0-5.242-4.023-7.101-5.102C9.74,5.354,8.583,5.93,8.125,6.5C7.902,6.777,9,11.614,9,11.614v0.789c0,0-0.879,4.237-0.905,5.285C8.09,17.891,9.108,19.118,9.313,18.984z"}},lastPointOffset:2,vmlEndArrow:"none",weight:6,iconWidth:4},17:{marker:{viewBox:"0 0 24 24",refX:12,refY:12,markerHeight:24,markerWidth:24,path:{d:"M7.912,21.498c3.106-2.029,9.859-7.873,9.859-7.873c2.059-1.807,2.142-1.542,0.146-3.208c0,0-7.434-6.084-10.005-7.576C7.583,2.649,6.903,3.446,6.271,4.233c-0.308,0.384,2.209,6.051,2.209,6.051v3.388c0,0-2.215,4.583-2.25,6.03C6.222,19.986,7.629,21.684,7.912,21.498z"
}},lastPointOffset:0,vmlEndArrow:"none",weight:7,iconWidth:6},18:{marker:{viewBox:"0 0 24 24",refX:12,refY:12,markerHeight:24,markerWidth:24,path:{d:"M7.61,22.688c4.045-2.642,11.312-8.906,11.312-8.906c1.92-1.781,1.938-2-0.124-3.781c0,0-8.151-6.334-11.5-8.276C6.87,1.475,5.516,2.62,5.732,3.093c2.146,4.694,2.063,4.741,2.612,7.469l0.016,2.75c0,0-1.573,5.458-2.619,7.958C5.599,21.611,7.241,22.93,7.61,22.688z"}},lastPointOffset:DG.Browser.vml?-2:-5,vmlEndArrow:"none",weight:8,iconWidth:8},19:{marker:{viewBox:"0 0 24 24",refX:12,refY:12,markerHeight:27,markerWidth:27,path:{d:"M6.254472,23.8475c4.560355,-2.972281 12.747538,-10.032785 12.747538,-10.032785c2.167521,-2.006556 2.178242,-2.253353 -0.13949,-4.25991c0,0 -9.185101,-7.13562 -12.962148,-9.324594c-0.482861,-0.278985 -2.006558,1.008645 -1.759761,1.534428c2.414306,5.290015 2.414306,5.290015 3.272724,8.294486l0,3.433681c0,0 -2.081665,5.933829 -3.261997,8.755889c-0.160951,0.386288 1.684652,1.867062 2.103134,1.598804z"}},lastPointOffset:DG.Browser.vml?-2:-5,vmlEndArrow:"none",weight:10,iconWidth:12}}}},_getArrowOptions:function(){return{type:"fill",enableAnimation:this.options.enableAnimation,interactive:this.options.interactive,color:this.options.fillColor,weight:3,byZoom:{16:{marker:{refX:12,refY:12,markerHeight:24,markerWidth:24,path:{d:"M11.068,13.011L9.5,17.285l6.379-5.169L9.313,7.19l1.717,3.824"}},lastPointOffset:2,weight:2,iconWidth:4},17:{marker:{refX:12,refY:12,markerHeight:24,markerWidth:24,path:{d:"M10.354,13.969l-2.184,5.18L16.993,12L7.912,5.188l2.38,4.781"}},lastPointOffset:0,weight:3,iconWidth:6},18:{marker:{refX:12,refY:12,markerHeight:24,markerWidth:24,path:{d:"M10.281,13.781L7.42,21.271l11.488-9.308L7.083,3.093L10.219,10"}},lastPointOffset:DG.Browser.vml?0:-5,weight:4,iconWidth:8},19:{marker:{refX:12,refY:12,markerHeight:27,markerWidth:27,path:{d:"M9.344783,13.814714l-3.326375,8.476902l12.983603,-10.51565l-13.305513,-9.979137l3.648286,7.940389"}},lastPointOffset:DG.Browser.vml?0:-5,weight:5,iconWidth:12}}}}}),DG.Path.ANIMATION_AVAILABLE=DG.Browser.svg&&!DG.Browser.mobileWebkit&&-1===navigator.userAgent.toLowerCase().indexOf("presto")&&"[object Function]"===Object.prototype.toString.call(DG.SVG.create("animate").beginElement),DG.Path.include(DG.Path.ANIMATION_AVAILABLE?{runAnimation:function(){var e=this._animationEl=this._addAnimation();return e&&(e.beginElement(),this._removeAnimation(e)),this},stopAnimation:function(e){return this.animations[e]&&this.animations[e].endElement(),this},_addAnimation:function(){var e=this.options.animation,t=this._rings[0],n=null;return e&&t.length>0&&(n=DG.SVG.create("animate"),e.getValues&&(e.values=e.getValues(t)),Object.keys(e).filter(function(t){return"[object Function]"!=={}.toString.call(e[t])}).forEach(function(t){n.setAttribute(t,e[t])}),this._path.appendChild(n)),n},_removeAnimation:function(e){this._map.once("zoomstart",function(){if(e)try{this._path.removeChild(e)}catch(t){}this._animationEl=null},this)}}:{}),DG.Entrance.Arrow=DG.Polyline.extend({initialize:function(e,t){t=t||{},this._setLatLngs(e),t.enableAnimation&&DG.Path.ANIMATION_AVAILABLE&&(t.animation=this.getArrowAnimation(this._convertLatLngs(e))),this._markers=[],L.setOptions(this,t)},onAdd:function(e){var t=this._renderer=e.getArrowRenderer();t._initPath(this),this._project(),this._update(),this._updateStyleByZoom(),t._addPath(this),t._initMarkers(this)},onRemove:function(e){DG.Polyline.prototype.onRemove.call(this,e),this._renderer._removeMarkers(this)},getEvents:function(){return{viewreset:this._reset,moveend:this._update,zoomend:this._updateStyleByZoom}},_projectLatlngs:function(e,t,n){DG.Polyline.prototype._projectLatlngs.call(this,e,t,n),this._offsetLastPathPoint()},_update:function(){DG.Polyline.prototype._update.call(this),this._renderer._updateMarker(this)},_updateStyleByZoom:function(){this._project();var e=this.options.byZoom,t=this._map.getZoom();this.setStyle(e[t])},_offsetLastPathPoint:function(){var e,t,n,a=this._rings[0],i=this.options.byZoom[this._map.getZoom()],o=a.length,r=a[o-1].distanceTo(a[o-2]);i&&(t={x:a[o-1].x-a[o-2].x,y:a[o-1].y-a[o-2].y},r>i.iconWidth?(e=Math.abs(i.lastPointOffset/r),n={x:t.x*e,y:t.y*e},i.lastPointOffset>0?(a[o-1].x+=n.x,a[o-1].y+=n.y):(a[o-1].x-=n.x,a[o-1].y-=n.y)):(e=r/i.iconWidth,0!==t.x&&(a[o-1].x=a[o-2].x+t.x/e),0!==t.y&&(a[o-1].y=a[o-2].y+t.y/e)))}}),DG.Entrance.arrow=function(e,t){return new DG.Entrance.Arrow(e,t)},DG.Entrance.Arrow.SVG=DG.SVG.extend({getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._onMoveEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),DG.Browser.ie&&(e.mousemove=e.zoomend=this._refresh),e},_onMoveEnd:function(e){DG.Browser.ie&&this._refresh(),this._update(e)},_initMarkers:function(e){var t,n,a=e.options.byZoom,i=e._markerId="arrow-marker-"+DG.Util.stamp(e);Object.keys(a).map(function(o){t=DG.SVG.create("marker"),n=a[o].marker,Object.keys(n).filter(function(e){return"polygon"!==e&&"path"!==e}).forEach(function(e){t.setAttribute(e,n[e])}),t.id=i+"-"+o,t.setAttribute("orient","auto"),t.setAttribute("markerUnits","userSpaceOnUse"),t.setAttribute("stroke-width","0"),n.path&&t.appendChild(this._getMarkerChild("path",n.path,e)),n.polygon&&t.appendChild(this._getMarkerChild("polygon",n.polygon,e)),e._markers.push(t),this._getDefs().appendChild(t)},this),this._updateMarker(e)},_getMarkerChild:function(e,t,n){var a=DG.SVG.create("path"),i="path"===e?"d":"points";return a.setAttribute(i,t[i]),a.setAttribute("fill",t.color?t.color:n.options.color),a},_getDefs:function(){return this._defs=this._defs||DG.SVG.create("defs"),this._defs.parentNode||this._container.appendChild(this._defs),this._defs},_updateMarker:function(e){if(e._map){var t=e._map.getZoom(),n=e._map.getBounds(),a=e._latlngs[e._latlngs.length-1],i=t>=DG.Entrance.SHOW_FROM_ZOOM&&n.contains(a)?e._markerId+"-"+t:"";e._path.setAttribute("marker-end","url(#"+i+")")}},_removeMarkers:function(e){var t=this._getDefs(),n=e._markers;(t||n)&&(n.forEach(function(e){t.removeChild(e)}),n.length=0)},_refresh:function(){this._container.parentNode.insertBefore(this._container,this._container)},_updateStyle:function(e){var t=e._path,n=e.options;DG.SVG.prototype._updateStyle.call(this,e),t.setAttribute("visibility",n.visibility),e._markers.forEach(function(e){e.setAttribute("fill-opacity",n.opacity);for(var t=e.getElementsByTagName("path"),a=0;a<t.length;a++)t[a].setAttribute("fill",n.color)}),this._updateMarker(e)}}),L.Map.include({getArrowRenderer:function(){var e=this._arrowRenderer;return e||(e=this._arrowRenderer=new DG.Entrance.Arrow.SVG),this.hasLayer(e)||this.addLayer(e),e}}),DG.Entrance.Arrow.SVG.include(L.Browser.vml?{_initMarkers:function(e){e._markers=L.SVG.create("stroke"),this._updateMarker(e),e._container.appendChild(e._markers)},_updateMarker:function(e){if(e._map){var t=e.options.byZoom[e._map.getZoom()];e._markers.endarrow=t&&t.vmlEndArrow?t.vmlEndArrow:"classic"}},_removeMarkers:function(e){e._container.removeChild(e._markers)},_updateStyle:function(e){var t=e.options,n=e._container;DG.SVG.prototype._updateStyle.call(this,e),t.visibility&&(n.style.visibility=t.visibility)}}:{}),DG.Browser.svg&&DG.Entrance.Arrow.include({getArrowAnimation:function(e){var t={id:"animateArrowPathGeom",attributeName:"d",fill:"freeze",begin:"indefinite"};return t.getValues=this._getAnimationValues(e.length),t.keyTimes=this._getAnimateTiming(e),t.dur=this._getAnimationTime(e.length),t},_getAnimationValues:function(e){return 2===e?this._getShakeAnimationValues:this._getSlideAnimationValues},_getSlideAnimationValues:function(e){var t="",n="",a="",i="M "+e[0].x+" "+e[0].y,o="l -1 0";t=i+" "+o+"; ";for(var r=1;r<e.length;r++){if(a+=e[r].x-e[r-1].x+" "+(e[r].y-e[r-1].y),r===e.length-1){a=e[r].x-e[r-1].x+" "+(e[r].y-e[r-1].y),t+=i+" l "+n+a+";";break}t+=i+" l "+a+"; ",t+=i+" l "+a+" "+o+"; ",a+=" l ",n+=e[r].x-e[r-1].x+" "+(e[r].y-e[r-1].y)+" l "}return t},_getShakeAnimationValues:function(e){var t,n,a=[1,.4,1,.84,1,.94,1],i=e[1].x-e[0].x,o=e[1].y-e[0].y,r=" l "+i+" "+o;return t=e[0].x-i,n=e[0].y-o,a.reduce(function(e,a){return e+" M "+(t+i*a)+" "+(n+o*a)+r+";"},"M "+t+" "+n+r+"; ")},_getPolylineLength:function(e){for(var t=0,n=1;n<e.length;n++)t+=e[n-1].distanceTo(e[n]);return t},_getAnimateTiming:function(e){var t,n,a,i=[0],o=this._getPolylineLength(e);if(2===e.length)t="0; 0.33; 0.495; 0.66; 0.77; 0.88; 0.935; 1";else if(3===e.length)t="0; 0.33; 0.34; 1";else if(4===e.length)t="0; 0.25; 0.26; 0.5; 0.51; 1";else{for(var r=1;r<e.length;r++)a=e[r-1].distanceTo(e[r]),n=a/o,i.push(i[i.length-1]+n),r<e.length-1?i.push(i[i.length-1]):i[i.length-1]=1;t=i.join("; ")}return t},_getAnimationTime:function(e){return 2===e?"0.7s":3===e||4===e?"0.5s":"0.7s"}}),DG.Entrance.EventHandler=DG.Handler.extend({options:{autoClose:!0},initialize:function(e,t,n){DG.Util.setOptions(this,n),this._map=e,this._entrance=t},addHooks:function(){this._map.on({zoomend:this._showOrHideEntrance,projectleave:this._showOrHideEntrance},this),this.options.autoClose&&this._map.on("layeradd",this._removeEntrance,this)},removeHooks:function(){this._map.off({zoomend:this._showOrHideEntrance,projectleave:this._showOrHideEntrance},this),this.options.autoClose&&this._map.off("layeradd",this._removeEntrance,this)},_showOrHideEntrance:function(){this._map.getZoom()>=DG.Entrance.SHOW_FROM_ZOOM?this._entrance.show(!1):this._entrance.hide()},_removeEntrance:function(e){(e.layer instanceof DG.Popup||e.layer instanceof DG.Entrance&&e.layer!==this._entrance)&&this._entrance.removeFrom(this._map)}}),DG.Label=DG.Layer.extend({options:{offset:new DG.Point(12,15),className:"dg-label",zIndexOffset:0},_typeOfString:Object.prototype.toString.call("s"),_defaultZIndex:100,initialize:function(e,t){DG.Util.setOptions(this,t),this._animated=DG.Browser.any3d,this._content=e},onAdd:function(e){this._map=e,this._el||this._initDOM(),this._visible=!0,this.setContent(this._content)._onViewReset(),e.on("viewreset",this._onViewReset,this).on("zoomanim",this._onZoomAnimation,this)},onRemove:function(e){e.off("viewreset",this._onViewReset,this).off("zoomanim",this._onZoomAnimation,this),this._visible=!1,this._el.removeChild(this._container),DG.Util.falseFn(this._container.offsetWidth),this._container=null,e.getPanes().markerPane.removeChild(this._el),this._el=null},_initDOM:function(){this._el=DG.DomUtil.create("div",this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),this._map.getPanes().markerPane),this._el.style.zIndex=this._defaultZIndex+this.options.zIndexOffset,this._container=DG.DomUtil.create("div",this.options.className+"__content",this._el),DG.DomUtil.disableTextSelection(this._container),DG.DomEvent.disableClickPropagation(this._el).on(this._container,"mousewheel",DG.DomEvent.stopPropagation).on(this._container,"contextmenu",DG.DomEvent.stopPropagation)},_onViewReset:function(){this._visible&&this._latlng&&DG.DomUtil.setPosition(this._el,this._map.latLngToLayerPoint(this._latlng).add(this.options.offset),DG.Browser.ie)},_onZoomAnimation:function(e){this._latlng&&DG.DomUtil.setPosition(this._el,this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).add(this.options.offset))},setOffset:function(e){return e instanceof DG.Point&&(this.options.offset=e,this._onViewReset()),this},setZIndexOffset:function(e){return isNaN(+e)||(this.options.zIndexOffset=+e,this._visible&&(this._el.style.zIndex=this._defaultZIndex+this.options.zIndexOffset)),this},setContent:function(e){return Object.prototype.toString.call(e)!==this._typeOfString?this:(this._content=e,this._visible&&(this._container.innerHTML=e),this)},setPosition:function(e){return e instanceof DG.LatLng?(this._latlng=e,this._onViewReset(),this):this}}),DG.label=function(e,t){return new DG.Label(e,t)},DG.Marker.include({bindLabel:function(e,t){return this._label?(this._label.setContent(e),t&&(this.options.offset!==t.offset&&this._label.setOffset(this.options.offset=t.offset),this.options["static"]!==t["static"]&&this.unbindLabel().bindLabel(e,t))):(t=DG.extend({offset:new DG.Point(5,5)},t),this._label=DG.label(e,t),this.once("remove",this._onMarkerRemove),t["static"]?this.showLabel():this.on("mouseover",this._mouseOverLabel).on("mouseout",this._mouseOutLabel).on("dragstart",this._dragStartLabel).on("dragend",this._dragEndLabel),undefined!==this._map?this._updateLabelZIndex():this.once("add",this._updateLabelZIndex)),this},unbindLabel:function(){return this._label&&(this.hideLabel().off("remove",this.unbindLabel).off("mouseover",this._mouseOverLabel).off("mouseout",this._mouseOutLabel).off("dragstart",this._dragStartLabel).off("dragend",this._dragEndLabel).off("move",this._updatePosition).off("add",this._updateLabelZIndex),this._label=null),this},_onMarkerRemove:function(){if(this._label){var e=this._label._content;this.once("add",function(){this._label||this.bindLabel(e)}),this.unbindLabel()}},getLabel:function(){return this._label?this._label:null},_originalUpdateZIndex:DG.Marker.prototype._updateZIndex,_updateZIndex:function(e){return this._zIndex||(this._zIndex=0),this._originalUpdateZIndex(e),this._updateLabelZIndex(),this},_updateLabelZIndex:function(){return this._label&&this._icon&&this._label.setZIndexOffset(this._icon.style.zIndex),this},showLabel:function(){return this._label&&this.on("move",this._updatePosition)._map.addLayer(this._label.setPosition(this.getLatLng())),this},hideLabel:function(){return this._label&&this.off("move",this._updatePosition)._map.removeLayer(this._label),this},_updatePosition:function(){this._label.setPosition(this.getLatLng())},_dragStartLabel:function(){this._label.isMarkerDragging=!0,this.hideLabel()},_dragEndLabel:function(){this._label.isMarkerDragging=!1,this._label.isMouseOverMarker&&this.showLabel()},_mouseOverLabel:function(){this._label.isMouseOverMarker=!0,this._label.isMarkerDragging||this.showLabel()},_mouseOutLabel:function(){this._label.isMouseOverMarker=!1,this.hideLabel()}}),DG.Marker.addInitHook(function(){undefined!==this.options.label&&this.bindLabel(this.options.label)}),DG.Path.include({bindLabel:function(e,t){return this._label?(this._label.setContent(e),this._label.options.offset!==t.offset&&this._label.setOffset(t.offset)):(this._label=DG.label(e,t),this.on(this._labelEvents,this)),this},unbindLabel:function(){return this._label&&(this.off(this._labelEvents,this),this._map.removeLayer(this._label),this._label=null),this},getLabel:function(){return this._label?this._label:null},_labelEvents:{mouseover:function(e){this._map.addLayer(this._label.setPosition(e.latlng))},mousemove:function(e){this._label.setPosition(e.latlng)},mouseout:function(){this._map.removeLayer(this._label)},remove:function(){this._map.removeLayer(this._label)}}}),DG.Path.addInitHook(function(){undefined!==this.options.label&&this.bindLabel(this.options.label)}),DG.Entrance.include({bindLabel:function(e,t){return this._label?(this._label.setContent(e),this._label.options.offset!==t.offset&&this._label.setOffset(t.offset)):(this._label=DG.label(e,t),this.on(this._labelEvents,this)),this},unbindLabel:function(){return this._label&&(this.off(this._labelEvents,this),this._map.removeLayer(this._label),this._label=null),this},getLabel:function(){return this._label?this._label:null},_labelEvents:{mouseover:function(e){this._map.addLayer(this._label.setPosition(e.latlng))},mousemove:function(e){this._label.setPosition(e.latlng)},mouseout:function(){this._label.remove()},remove:function(){this._label.remove()}}}),DG.Entrance.addInitHook(function(){undefined!==this.options.label&&this.bindLabel(this.options.label)}),DG.Map.mergeOptions({poi:!DG.Browser.touch}),DG.Poi=DG.Handler.extend({options:{disableLabel:!1},initialize:function(e,t){this._map=e,DG.Util.setOptions(this,t),this._metaLayer=DG.Meta.layer(DG.config.protocol+DG.config.poiMetaServer,{minZoom:DG.config.poiLayerMinZoom,maxNativeZoom:19,detectRetina:DG.config.detectRetina,eventBubbling:"layer",dataFilter:DG.bind(this._processData,this)})},addHooks:function(){this._map.addLayer(this._metaLayer),this.options.disableLabel||(this._labelHelper=DG.label(),this._metaLayer.on(this._layerEventsListeners,this))},removeHooks:function(){this._map.removeLayer(this._metaLayer),this.options.disableLabel||(this._metaLayer.off(this._layerEventsListeners,this),this._map.removeLayer(this._labelHelper),this._labelHelper=null)},getMetaLayer:function(){return this._metaLayer},_processData:function(e,t){var n=this._map,a=t.scaleBy(this._metaLayer.getTileSize());return""===e.responseText?[]:e.result.poi.map(function(e){var t=DG.Wkt.toGeoJSON(e.hover);return t.coordinates[0]=t.coordinates[0].map(function(e){return n.project([e[1],e[0]]).round().subtract(a)}),{id:e.id,hint:e.links[0].name,linked:e.links[0],geometry:t}})},_layerEventsListeners:{mouseover:function(e){this._setCursor("pointer"),this._labelHelper.setPosition(e.latlng).setContent(e.meta.hint).setZIndexOffset(300),this._map.addLayer(this._labelHelper),this._map.fire("poihover",{latlng:e.latlng,meta:e.meta})},mouseout:function(e){this._setCursor(""),this._map.removeLayer(this._labelHelper),this._map.fire("poileave",{latlng:e.latlng,meta:e.meta})},mousemove:function(e){this._labelHelper.setPosition(e.latlng)}},_setCursor:function(e){this._map.getContainer().style.cursor=e}}),DG.Map.addInitHook("addHandler","poi",DG.Poi),DG.Ruler=DG.Layer.extend({options:{editable:!0},includes:[DG.Locale],statics:{Dictionary:{}},initialize:function(e,t){DG.Util.setOptions(this,t),this._layers={back:null,middle:null,front:null,mouse:null},this._points=[],this._layersContainer=DG.featureGroup(),Object.keys(this._layers).forEach(function(e){this._layersContainer.addLayer(this._layers[e]=DG.featureGroup())},this),this._reset(),DG.Browser.touch?(delete this._lineMouseEvents.mouseover,delete this._lineMouseEvents.mouseout,delete this._lineMouseEvents.mousemove):delete this._lineMouseEvents.click,e&&e.length&&this.setLatLngs(e)},onAdd:function(e){this._map=e.on("langchange",this._updateDistance,this),this._map.getPane("rulerLabelPane")||this._map.createPane("rulerLabelPane"),this._map.getPane("rulerEventPane")||this._map.createPane("rulerEventPane"),this._layersContainer.addTo(this._map),this._points.length&&(this._layers.mouse.fire("layeradd"),this._updateDistance()),this._layers.mouse.on(this._lineMouseEvents,this)},onRemove:function(e){e.off("langchange",this._updateDistance,this).removeLayer(this._layersContainer),this._layers.mouse.off(this._lineMouseEvents,this),this._reset()},getTotalDistance:function(){return this._calcDistance()},spliceLatLngs:function(e){var t=this._points.length,n=e>=0?Math.min(e,t):t-e,a=Array.prototype.splice.apply(this._points,arguments).map(function(e){return this._layers.mouse.removeLayer(e),e.off().getLatLng()},this),i=this._points.length;if(i){for(var o=n;i>o;o++)this._points[o]instanceof DG.Ruler.LayeredMarker||(this._points[o]=this._createPoint(this._points[o],this.options.iconStyles.large).on(this._pointEvents,this).once("add",this._addCloseHandler,this).addTo(this._layers.mouse,this._layers)),o&&!this._points[o-1]._legs&&this._addLegs(this._points[o-1]),this._points[o].setPointStyle(this.options.iconStyles[o&&i-1>o?"small":"large"]),this._points[o]._pos=o;this._removeLegs(this._points[i-1]),t>0&&i>t&&this._points[t-1].collapse(),this._points[n]&&this._updateLegs(this._points[n]),n>1&&this._points[n-1].setPointStyle(this.options.iconStyles.small),this._updateDistance(),this._normalizeRulerPoints()}return DG.Browser.touch&&this._lineMarkerHelper&&this._lineMarkerHelper.collapse(),this._fireChangeEvent(),a},addLatLng:function(e){var t=this._points[this._points.length-1]||null;return e=DG.latLng(e),t&&(e=this._normalizeLatLng(e,t.getLatLng())),this.spliceLatLngs(this._points.length,0,e),this},getLatLngs:function(){return this._points.map(function(e){return e.getLatLng()})},setLatLngs:function(e){var t=e.slice();return t.unshift(0,this._points.length),this.spliceLatLngs.apply(this,t),this},_reset:function(){DG.extend(this,{_lineMarkerHelper:null,_morphingNow:!1})},_lineMouseEvents:{click:function(e){var t=e.layer;if(t instanceof DG.Marker&&t._pos!==this._points.length-1)this._lineMarkerHelper&&this._lineMarkerHelper.collapse(),t.setText(this._getFormatedDistance(t)),this._lineMarkerHelper=t;else if(t instanceof DG.Path&&this.options.editable){var n=e.latlng,a=t._point._pos+1;this.spliceLatLngs(a,0,n)}},mouseover:function(e){var t=e.layer;if(t._hovered=!0,!this._morphingNow)if(t instanceof DG.Marker&&t._pos!==this._points.length-1)t.setText(this._getFormatedDistance(t));else if(t instanceof DG.Path&&!this._lineMarkerHelper){var n=t._point;this._lineMarkerHelper=this._addRunningLabel(this._nearestPoint(n._legs.middle,e.latlng),n)}},mouseout:function(e){var t=e.layer,n=e.originalEvent;t._hovered=!1,this._morphingNow||t._pos===this._points.length-1||(t instanceof DG.Marker?(!n.relatedTarget||n.relatedTarget!==t.querySelector("container")&&n.relatedTarget.parentNode!==t.querySelector("container"))&&t.collapse():this._removeRunningLabel())},mousemove:function(e){if(!this._morphingNow&&this._lineMarkerHelper){var t=e.layer._point,n=this._nearestPoint(t._legs.middle,e.latlng);this._lineMarkerHelper.setLatLng(n).setText(this._getFormatedDistance(t,t.getLatLng().distanceTo(n)))}},layeradd:function(){Object.keys(this._layers).forEach(function(e){this._layers[e].bringToFront()},this)}},_fireChangeEvent:function(){this.fire("changed",{latlngs:this.getLatLngs()})},_addRunningLabel:function(e,t){var n=this._createPoint(e).addTo(this._layers.mouse,this._layers);return this._map.getPane("rulerLabelPane").appendChild(n._icon),n.setText(this._getFormatedDistance(t,t.getLatLng().distanceTo(e)))},_removeRunningLabel:function(){this._lineMarkerHelper&&(this._layers.mouse.removeLayer(this._lineMarkerHelper),this._lineMarkerHelper=null)},_insertPointInLine:function(e){var t,n=this._lineMarkerHelper.getLatLng(),a=e.target._point._pos+1;if(L.Browser.ie){var i=e.originalEvent.target||e.originalEvent.srcElement,o=i.parentNode;o.appendChild(i)}L.DomEvent.stopPropagation(e.originalEvent),this.spliceLatLngs(a,0,n),t=this._points[a],t.setText(this._getFormatedDistance(t)),setTimeout(function(){if(document.createEvent){var e=document.createEvent("MouseEvents");e.initMouseEvent("mouseup",!1,!1,document.defaultView,1,0,0,0,0,!1,!1,!1,!1,1,t._icon),document.dispatchEvent(e),e=document.createEvent("MouseEvents"),e.initMouseEvent("mousedown",!1,!1,document.defaultView,1,0,0,0,0,!1,!1,!1,!1,1,t._icon),t._icon.dispatchEvent(e)}else t._icon.fireEvent("onMouseUp",DG.extend(document.createEventObject(),{button:1,bubbles:!1,cancelable:!1})),t._icon.fireEvent("onMouseDown",DG.extend(document.createEventObject(),{button:1,bubbles:!1,cancelable:!1}))},0),this._removeRunningLabel(),this._updateLegs(t)},_nearestPoint:function(e,t){for(var n,a,i=this,o=this._project(t),r=e.getLatLngs().map(function(e){return i._project(e)}),s=0;s<r.length-1;s++){var l=DG.LineUtil.pointToSegmentDistance(o,r[s],r[s+1]);(n===undefined||n>l)&&(n=l,a=s)}var c=DG.LineUtil.closestPointOnSegment(o,r[a],r[a+1]);return this._unproject(c)},_addCloseHandler:function(e){e.target.on("click",this._deletePoint,this).querySelector("remove-link").style.display="inline-block"},_createPoint:function(e,t){var n=t?t:this.options.iconStyles.large,a={};return Object.keys(n).forEach(function(t){a[t]=DG.circleMarker(e,n[t])}),DG.Ruler.layeredMarker(e,{layers:a,draggable:this.options.editable})},_normalizeLatLng:function(e,t){for(var n=e.lng<t.lng?360:-360,a=e.lng;Math.abs(a-t.lng)>180;)a+=n;return DG.latLng(e.lat,a)},_normalizeRulerPoints:function(e){e=e||this._points[0];var t,n,a,i,o,r=this,s=e._pos,l=[];for(t=s+1;t<this._points.length;t++)n=this._points[t],a=this._points[t-1],i=n.getLatLng(),o=this._normalizeLatLng(i,a.getLatLng()),o.equals(i)||(n.setLatLng(o),l.push(t));for(t=s-1;t>=0;t--)n=this._points[t],a=this._points[t+1],i=n.getLatLng(),o=this._normalizeLatLng(i,a.getLatLng()),o.equals(i)||(n.setLatLng(o),l.push(t));l.sort().reduce(function(e,t){var n=e&&e===t-1;return r._updateLegs(r._points[t],n),t},null)},_pointEvents:{drag:function(e){var t=e.target;this._normalizeRulerPoints(t),DG.Browser.touch||t===this._points[this._points.length-1]||t.setText(this._getFormatedDistance(t)),this._updateLegs(t),this._updateDistance()},dragend:function(e){var t=e.target;this._morphingNow=!1,t._hovered||t===this._points[this._points.length-1]||t.collapse(),this._fireChangeEvent()},dragstart:function(){DG.Browser.touch&&this._lineMarkerHelper&&this._lineMarkerHelper.collapse(),this._morphingNow=!0}},_deletePoint:function(e){var t=e.originalEvent,n=t.target||t.srcElement;"dg-ruler__label-remove-link"!==n.className&&"dg-ruler__remove-link-overlay"!==n.className||(DG.DomEvent.stop(e.originalEvent),this.spliceLatLngs(e.target._pos,1))},_degToRad:function(e){return Math.PI/180*e},_radToDeg:function(e){return 180/Math.PI*e},_project:function(e){return this._map?this._map.project(e):DG.CRS.EPSG3857.latLngToPoint(e,1)},_unproject:function(e){return this._map?this._map.unproject(e):DG.CRS.EPSG3857.pointToLatLng(e,1)},_calcAngle:function(e,t,n){t=this._normalizeLatLng(t,e),n=this._normalizeLatLng(n,e),e=this._project(e),t=this._project(t),n=this._project(n);var a=t.x-e.x,i=n.x-e.x,o=t.y-e.y,r=n.y-e.y,s=a*i+o*r,l=Math.sqrt(a*a+o*o),c=Math.sqrt(i*i+r*r);return Math.acos(s/(l*c))},_calcMidPoint:function(e,t){var n=this._degToRad(e.lng),a=this._degToRad(e.lat),i=this._degToRad(t.lng),o=this._degToRad(t.lat),r=Math.acos(Math.sin(a)*Math.sin(o)+Math.cos(a)*Math.cos(o)*Math.cos(n-i)),s=.5,l=Math.sin((1-s)*r)/Math.sin(r),c=Math.sin(s*r)/Math.sin(r),u=l*Math.cos(a)*Math.cos(n)+c*Math.cos(o)*Math.cos(i),d=l*Math.cos(a)*Math.sin(n)+c*Math.cos(o)*Math.sin(i),h=l*Math.sin(a)+c*Math.sin(o),p=Math.atan2(h,Math.sqrt(u*u+d*d)),f=Math.atan2(d,u);return DG.latLng(this._radToDeg(p),this._radToDeg(f))},_adaptiveSample:function(e,t,n,a){if(n>9)return[];a=a||this._calcMidPoint(e,t);var i=this._calcMidPoint(e,a),o=this._calcMidPoint(a,t),r=this._calcAngle(i,a,e),s=this._calcAngle(a,e,t),l=this._calcAngle(o,a,t),c=3.1;if(r>c&&s>c&&l>c)return[];var u=[];return u=u.concat(this._adaptiveSample(e,a,n+1,i)),u.push(a),u=u.concat(this._adaptiveSample(a,t,n+1,o))},_calcGreatCircle:function(e,t){if(t=this._normalizeLatLng(t,e),e.equals(t,1))return[e,t];if(180==Math.abs(t.lng-e.lng)){var n=e.lat+t.lat>0?90:-90;return[e,DG.latLng(n,e.lng),DG.latLng(n,t.lng),t]}var a=[];a.push(e),a=a.concat(this._adaptiveSample(e,t,0)),a.push(t);for(var i=1;i<a.length;i++)a[i]=this._normalizeLatLng(a[i],a[i-1]);return a},_addLegs:function(e){var t=this.options.pathStyles,n=this._calcGreatCircle(e.getLatLng(),this._points[e._pos+1].getLatLng());e._legs={},Object.keys(t).forEach(function(a){e._legs[a]=DG.polyline(n,t[a]).addTo(this._layers[a])},this),e._legs.mouse._point=e.once("remove",this._clearRemovingPointLegs,this),this.options.editable&&!DG.Browser.touch&&e._legs.mouse.on("mousedown",this._insertPointInLine,this),this._map&&this._layers.mouse.addLayer(e._legs.mouse)},_clearRemovingPointLegs:function(e){this._removeLegs(e.target)},_removeLegs:function(e){e._legs&&(Object.keys(e._legs).forEach(function(t){this._layers[t].removeLayer(e._legs[t])},this),e._legs=null)},_updateLegs:function(e,t){var n,a=e.getLatLng(),i=this._points[e._pos-1],o=this._points[e._pos+1],r=this;i&&!t&&(n=r._calcGreatCircle(i.getLatLng(),a),Object.keys(i._legs).forEach(function(e){i._legs[e].setLatLngs(n)})),o&&(n=r._calcGreatCircle(a,o.getLatLng()),Object.keys(e._legs).forEach(function(t){e._legs[t].setLatLngs(n)}))},_calcDistance:function(e,t){for(var n=t?t:0,a=e?e._pos:this._points.length-1,i=0;a>i;i++)n+=this._points[i].getLatLng().distanceTo(this._points[i+1].getLatLng());return n},_getFormatedDistance:function(){var e=this._calcDistance.apply(this,arguments),t="m";return e>1e3?(e/=1e3,t="km",e>1e3?(e=e.toFixed(),e=e.slice(0,-3)+" "+e.slice(-3)):e=e.toFixed(2).split(".").join(this.t("delimiter"))):e=Math.round(e),(e||0)+" "+this.t(t)},_updateDistance:function(){this._map&&this._points.length&&this._points[this._points.length-1].setText(this._getFormatedDistance())}}),DG.ruler=function(e,t){return new DG.Ruler(e,t)},DG.Ruler.LayeredMarker=DG.Marker.extend({options:{draggable:!1,keyboard:!1,riseOnHover:!0,iconHTML:'<img class="dg-ruler__label-spacer" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" width="26" height="26" />\n<div class="dg-ruler__label-container">\n    <div class="dg-ruler__point"></div>\n    <span class="dg-ruler__label-distance">0 км</span>\n    <span class="dg-ruler__label-remove-link"></span>\n    <div class="dg-ruler__remove-link-overlay"></div>\n</div>'},statics:{domClass:"dg-ruler__label"},addTo:function(e,t){return Object.keys(this._layers).forEach(function(e){t[e].addLayer(this._layers[e])},this),this._viewport=t,DG.Marker.prototype.addTo.call(this.on("move",this._onMove),e)},onRemove:function(e){return Object.keys(this._layers).forEach(function(e){this._viewport[e].removeLayer(this._layers[e])},this),this.off("move",this._onMove),this._viewport=null,this._style=null,DG.Marker.prototype.onRemove.call(this,e)},setText:function(e){return this._iconCollapsed&&this.expand(),this._iconNodes.label.innerHTML=e,this},setPointStyle:function(e){return this._style!==e&&Object.keys(this._style=e).forEach(function(t){this._layers[t].setStyle(e[t])},this),this},expand:function(){return this._iconCollapsed=!1,this._iconNodes.container.style.display="block",this._iconNodes.spacer.style.display="none",this},collapse:function(){return this._iconCollapsed=!0,this._iconNodes.container.style.display="none",this._iconNodes.spacer.style.display="block",this},querySelector:function(e){return this._icon.querySelector("."+DG.Ruler.LayeredMarker.domClass+"-"+e)},_onMove:function(e){var t=e.latlng;Object.keys(this._layers).forEach(function(e){this._layers[e].setLatLng(t)},this)},_initIcon:function(){DG.Marker.prototype._initIcon.call(this),this._iconCollapsed=!0,this._icon.style.width="",this._iconNodes={label:this.querySelector("distance"),spacer:this.querySelector("spacer"),container:this.querySelector("container")}},_setPos:function(e){L.DomUtil.setPosition(this._icon,e),this._shadow&&L.DomUtil.setPosition(this._shadow,e)},_afterInit:function(){this._layers=this.options.layers||null,this.options.icon=DG.divIcon({className:DG.Ruler.LayeredMarker.domClass,iconSize:[26,26],iconAnchor:[13,13],html:this.options.iconHTML})}}),DG.Ruler.LayeredMarker.addInitHook("_afterInit"),DG.Ruler.layeredMarker=function(e,t){return new DG.Ruler.LayeredMarker(e,t)};var rulerRenderer=DG.svg({pane:"rulerLabelPane"});DG.Ruler.mergeOptions({pathStyles:{back:{color:"#fff",opacity:1,weight:12,pointerEvents:"none",noClip:!0,renderer:rulerRenderer,smoothFactor:0},middle:{color:"#0da5d5",opacity:1,weight:4,pointerEvents:"none",noClip:!0,renderer:rulerRenderer,smoothFactor:0},mouse:{color:"#fff",opacity:DG.Browser.vml?.1:0,weight:DG.Browser.touch?40:20,pointerEvents:"painted",noClip:!0,renderer:DG.svg({pane:"rulerEventPane"}),smoothFactor:0}},iconStyles:{large:{back:{color:"#fff",opacity:1,fillColor:"#fff",fillOpacity:1,weight:1,radius:13,renderer:rulerRenderer},middle:{color:"#0da5d5",opacity:1,fillColor:"#0da5d5",fillOpacity:1,weight:1,radius:9,renderer:rulerRenderer},front:{color:"#fff",opacity:1,fillColor:"#0da5d5",fillOpacity:1,weight:4,radius:5,renderer:rulerRenderer}},small:{back:{color:"#fff",opacity:1,fillColor:"#fff",fillOpacity:1,weight:1,radius:9,renderer:rulerRenderer},middle:{color:"#0da5d5",opacity:1,fillColor:"#0da5d5",fillOpacity:1,weight:1,radius:5,renderer:rulerRenderer},front:{color:"#fff",opacity:1,fillColor:"#0da5d5",fillOpacity:1,weight:4,radius:2,renderer:rulerRenderer}}}}),DG.Ruler.Dictionary.ru={km:"км",m:"м",delimiter:","},DG.Ruler.Dictionary.it={km:"km",m:"m",delimiter:","},DG.Ruler.Dictionary.cs={km:"km",m:"m",delimiter:","},DG.Ruler.Dictionary.es={km:"km",m:"m",delimiter:","},DG.Ruler.Dictionary.en={km:"km",m:"m",delimiter:"."},DG.Traffic=DG.TileLayer.extend({options:{period:0,disableLabel:!1},
statics:{Dictionary:{}},initialize:function(e){this._tileUrl=DG.config.protocol+DG.config.trafficTileServer,this._metaUrl=DG.config.protocol+DG.config.trafficMetaServer,this._timeUrl=DG.config.protocol+DG.config.trafficTimestampServer,this._updateInterval=DG.config.trafficLayerUpdateInterval,this._layersOptions={errorTileUrl:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",subdomains:"012345679",maxNativeZoom:18,detectRetina:DG.config.detectRetina,minZoom:DG.config.trafficLayerMinZoom},e=DG.setOptions(this,DG.extend(e||{},this._layersOptions)),e.timestampString=e.period?"":"?"+(new Date).getTime(),this._metaLayer=DG.Meta.layer(null,{detectRetina:e.detectRetina,maxNativeZoom:e.maxNativeZoom,dataFilter:DG.bind(this._processData,this),minZoom:e.minZoom}),this._isDg=!0,this._onTimer=DG.bind(this._onTimer,this),DG.TileLayer.prototype.initialize.call(this,this._tileUrl,e)},onAdd:function(e){this._updateLayerProject(),e.addLayer(this._metaLayer).on("projectchange projectleave",this._onMapProjectChange,this),this.options.disableLabel||(this._metaLayer.on(this._layerEventsListeners,this),this._labelHelper=DG.label()),this._updateInterval&&(this._updateTimer=setInterval(this._onTimer,this._updateInterval)),DG.TileLayer.prototype.onAdd.call(this,e)},onRemove:function(e){clearInterval(this._updateTimer),e.removeLayer(this._metaLayer).off("projectchange projectleave",this._onMapProjectChange,this),this.options.disableLabel||(this._metaLayer.off(this._layerEventsListeners,this),this._map.removeLayer(this._labelHelper),this._labelHelper=null),DG.TileLayer.prototype.onRemove.call(this,e)},update:function(){var e=this;this._getTimestampString().then(function(t){e.options.timestampString="?"+t},function(){e.options.timestampString="?"+(new Date).getTime()}).then(function(){e.fire("update",{timestamp:e.options.timestampString}),e._layerEventsListeners.mouseout.call(e),e._metaLayer.getOrigin().setURL(e._prepareMetaURL(),e),e.redraw()})},getSubdomain:function(){return this._layersOptions.subdomains[Math.floor(Math.random()*this._layersOptions.subdomains.length)]},_getTimestampString:function(){return DG.ajax(DG.Util.template(this._timeUrl,DG.extend({s:this.getSubdomain(),projectCode:this._map.projectDetector.getProject().code},this.options||{})),{type:"get"})},_onTimer:function(){0===this.options.period&&this.update()},_processData:function(e,t){var n=this._map,a=t.scaleBy(this.getTileSize()),i={};return DG.Util.isArray(e)?(e[1].forEach(function(e){this[e.graph_id]=e.speed_text},i),e[0].map(function(e){var t=DG.Wkt.toGeoJSON(e.geometry[0].object[0]);return t.coordinates[0]=t.coordinates[0].map(function(e){return n.project([e[1],e[0]]).round().subtract(a)}),{id:e.graph_id,speed:i[e.graph_id],geometry:t}})):[]},_prepareMetaURL:function(){return DG.Util.template(this._metaUrl,DG.extend({x:"{x}",y:"{y}",z:"{z}",s:"{s}"},this.options))},_updateLayerProject:function(){var e=this._map.projectDetector.getProject();DG.setOptions(this,e&&e.traffic?{projectCode:e.code,bounds:e.latLngBounds,minZoom:Math.max(e.minZoom,this._layersOptions.minZoom),maxZoom:e.maxZoom}:{maxZoom:0,minZoom:0}),this._metaLayer.getOrigin().setURL(this._prepareMetaURL())},_onMapProjectChange:function(){this._updateLayerProject(),this.redraw()},_layerEventsListeners:{mouseover:function(e){this._setCursor("pointer"),this._labelHelper&&e.meta.speed&&this._labelHelper.setPosition(e.latlng).setContent(e.meta.speed+" "+this.t("speed_unit_km_h")).addTo(this._map)},mouseout:function(){this._setCursor(""),this._labelHelper&&this._map.removeLayer(this._labelHelper)},mousemove:function(e){this._labelHelper&&this._labelHelper.setPosition(e.latlng)}},_setCursor:function(e){this._map.getContainer().style.cursor=e}}),DG.Traffic.include(DG.Locale),DG.traffic=function(e){return new DG.Traffic(e)},DG.Traffic.Dictionary.ru={speed_unit_km_h:"км/ч"},DG.Traffic.Dictionary.it={speed_unit_km_h:"km/h"},DG.Traffic.Dictionary.cs={speed_unit_km_h:"km/h"},DG.Traffic.Dictionary.es={speed_unit_km_h:"km/h"},DG.Traffic.Dictionary.en={speed_unit_km_h:"km/h"},DG.config={host:null,port:3e3,defaultSkin:"dark",defaultLang:"ru",trafficLayerMinZoom:10,trafficLayerUpdateInterval:3e5,ppnotLink:"http://2gis.{domain}/{projectCode}/center/{center}/zoom/{zoom}/routeTab/rsType/{rsType}/to/{point}╎{name}",photosLink:"http://2gis.{domain}/photos/{id}",poiLayerMinZoom:11,detectRetina:!0,webApiKey:"ruregt3044",webApiVersion:"2.0",regionListFields:"items.bounds,items.zoom_level,items.time_zone,items.code,items.flags,items.country_code,items.domain",firmInfoFields:"items.reviews,items.photos,items.links,items.external_content",geoAdditionalFields:"items.geometry.selection,items.links,items.adm_div,items.address,items.floors,items.description",geoclickerCatalogApiKey:"ruregt3044",projectLeaveMaxZoom:13,flampUrl:"http://flamp.ru/r/",flampGoogleAnalytics:"utm_source=api2gis&utm_medium=api&utm_campaign=geoclicker",gaCode:"UA-38243181-2",protocol:"http:",baseUrl:"//maps.api.2gis.ru/2.0",tileServer:"//tile{s}.maps.2gis.com/tiles?x={x}&y={y}&z={z}&v=1",trafficTileServer:"//traffic{s}.maps.2gis.com/{projectCode}/traffic/{z}/{x}/{y}/speed/{period}/{timestampString}",trafficMetaServer:"//meta{s}.maps.2gis.com/{projectCode}/meta/{z}/{x}/{y}/graph_speed/{period}/{timestampString}",trafficTimestampServer:"//traffic{s}.maps.2gis.com/{projectCode}/meta/speed/time/",trafficScoreServer:"//traffic{s}.maps.2gis.com/{projectCode}/meta/score/0/",poiMetaServer:"//tile{s}.maps.2gis.com/?x={x}&y={y}&z={z}&v=1&type=poi",webApiServer:"//catalog.api.2gis.ru",analytics:"//maps.api.2gis.ru/analytics/track-user.png",googleAnalytics:"//www.google-analytics.com/analytics.js",loadProjectListTimeout:5e3}}(this,document);var wkt;DG.RouteLayer=DG.Layer.extend({options:{draggable:!0},mode:"",_transformed:!1,includes:[DG.Locale,DG.Mixin.Events],statics:{Dictionary:{}},initialize:function(e,t){DG.Util.setOptions(this,t),this._renderer=DG.svg({pane:"route"}),this._reset(),e&&this.setData(e)},onAdd:function(e){this._map=e,e._panes.route||e.createPane("route"),e._panes.routeMarkers||e.createPane("routeMarkers"),e.addLayer(this.waypoints).addLayer(this.metroEntrances).addLayer(this.legs).on(this._mapEvents,this),this._fixLayerOrder(),this.waypoints.eachLayer(function(e){e.on({change:function(t){t.delGeometry&&this.waypoints.removeLayer(e),this._fireChangeEvent(t.newGeometry||t.delGeometry)},drag:function(e){e.drawTmpGeom&&this._moveTmpDragGeometry(e.geometry)},dragstart:function(e){e.drawTmpGeom&&this._makeTmpDragGeometry(e.geometry,!1,{waypointIndx:e.indx})},dragstartKeypoint:function(e){this.fireEvent("dragstartKeypoint",e)},dragendKeypoint:function(e){this.fireEvent("dragendKeypoint",e)}},this)},this),this.waypoints.on(this._commonEvents),this.metroEntrances.on(this._commonEvents),this.legs.on(this._commonEvents),"auto"==this._mode&&this.legs.on(this._legEvents,this),this.fire("add")},onRemove:function(e){e.removeLayer(this.waypoints).removeLayer(this.metroEntrances).removeLayer(this.legs).off(this._mapEvents,this),this._tmpDragGeom&&(e.removeLayer(this._tmpDragGeom.step),e.removeLayer(this._tmpDragGeom.marker)),e.removeLayer(this._renderer),this.legs.off(this._legEvents,this),this.fire("remove"),this._map=null},getBounds:function(){return this.waypoints.getBounds().extend(this.legs.getBounds())},setData:function(e){return this.searchType=e.searchType,this._city=e.city,this[e.hasOwnProperty("items")?"_mapDrivingRouteData":"_mapTransitRouteData"](e),this},_mapDrivingRouteData:function(e){this._mode="auto",this._data.waypoints=e.waypoints.map(this._mapDrivingWaypoints,this),this._data.projectedPoints=e.items[0].projectedPoints,this._data.legs=this._mapDrivingManeuversToLegs(e.items[0]).filter(function(e){return e}),this._data.waypoints.forEach(this._addWaypoint,this),this._data.legs.forEach(this._addLeg,this)},_mapTransitRouteData:function(e){this._mode="transport",this._data.waypoints=e.waypoints.map(this._mapWaypoints,this),this._data.metroEntrances=e.metroEntrances.map(this._mapWaypoints,this),this._data.legs=e.movements.map(this._mapMovementsToLegs,this),this._data.metroEntrances.forEach(this._addMetroEntrance,this),this._data.waypoints.forEach(this._addWaypoint,this),this._data.legs.forEach(this._addLeg,this)},_reset:function(){this._map=null,this._data={},this._tmpDragGeometryWaypoints={},this.legs=DG.featureGroup(),this.waypoints=DG.featureGroup(),this.metroEntrances=DG.featureGroup()},_mapDrivingWaypoints:function(e){var t=DG.Util.extend({},e);return t.geometry=L.latLng(t),t},_mapWaypoints:function(e){var t=DG.Util.extend({},e);return t.geometry=L.latLng(this._readWKT(t.geometry.selection)),t},_mapDrivingManeuversToLegs:function(e){var t,n,a,i,o={},r=[],s=[],l={ignore:-1,slow:10,normal:5,fast:0};return e.maneuvers.forEach(function(e){e.forEach(function(e){e.outcoming_path&&e.outcoming_path.geometry&&e.outcoming_path.geometry instanceof Array&&e.outcoming_path.geometry.forEach(function(e){n=this._readWKT(e.selection),r=r.concat(n),s=s.concat(n.map(function(n){return t=t||l[e.color],[n.lat,n.lon,l[e.color]]}))},this)},this)},this),e.begin_pedestrian_path&&(n=this._readWKT(e.begin_pedestrian_path.geometry.selection),t?(r=n.concat(r),s=n.map(function(e){return[e.lat,e.lon,l.ignore]}).concat(s)):a={type:"walkway",path:n}),e.end_pedestrian_path&&(n=this._readWKT(e.end_pedestrian_path.geometry.selection),t?(r=r.concat(n),s=s.concat(n.map(function(e){return[e.lat,e.lon,l.ignore]}))):i={type:"walkway",path:n}),o.steps=[a,{style:t&&L.Browser.canvas&&this.options.useGradient?"speedAuto":null,speedPath:s,path:r,start_latlng:null,end_latlng:null},i].filter(function(e){return e}),[o]},_mapMovementsToLegs:function(e){var t={duration:{movement:e.movement_duration,waiting:e.waiting_duration,total:e.total_duration},station_platforms:e.station_platforms,type:e.type,distance:e.distance||0,color:e.color||""};if(t.steps=[],e.alternatives&&e.alternatives[0]&&e.alternatives[0].geometry){var n=e.alternatives[0].geometry;n.length&&(t.steps=n.map(function(e){var t=this._formatGeometry(e);return{path:t.selection,style:t.style,start_latlng:null,end_latlng:null}},this))}return t},_addWaypoint:function(e,t){e.indx=t,e.city=this._city,e.renderer=this._renderer,e.searchType=this.searchType,DG.RouteLayer.waypoint(e).addTo(this.waypoints)},_addMetroEntrance:function(e){e.city=this._city,e.renderer=this._renderer,DG.RouteLayer.metroEntrance(e).addTo(this.metroEntrances)},_addLeg:function(e,t){var n=DG.RouteLayer.leg({legIndx:t});e.steps.forEach(function(a,i){a&&(a.legIndx=t,a.stepIndx=i,a.renderer=this._renderer,DG.RouteLayer.step(a,{color:e.color,styles:[a.style,a.type,e.type,this.searchType]}).addTo(n))},this),n.addTo(this.legs)},_fixLayerOrder:function(){this.legs.eachLayer(function(e){e.fixOrder()}),this.metroEntrances.eachLayer(function(e){e.fixOrder()}),this.waypoints.eachLayer(function(e){e.fixOrder()})},_readWKT:function(e){return wkt||(wkt=require("/lib/wkt.js")()),wkt.parseObject(e).geometry||[]},_formatGeometry:function(e){return{selection:this._readWKT(e.selection),style:e.z_first<0&&e.z_last<0?"underground":null}},_findClosestProjected:function(e){var t=this.getLegById(e.legIndx),n=t.getLayers(),a=[],i=this._data.projectedPoints.length;if(i)for(var o=e.stepIndx;o>=0;o--){for(var r=0;i>r;r++){var s=this._data.projectedPoints[r].projected_point;-1!=this._lineContainsPoint(n[o]._geom,s)&&a.push(r)}if(a.length)break}return{exactProjected:o!=e.stepIndx?a[a.length-1]:null,pointsIndx:a,step:n[o]}},_detectWaypointsForTmpGeometry:function(e,t){if(!t)return null;var n=this._findClosestProjected(t);if(null!==n.exactProjected)return n.exactProjected+1;if(n.pointsIndx.length&&n.step){for(var a=n.pointsIndx,i=0;i<a.length;i++){var o=a[i],r=this._data.projectedPoints[o].projected_point,s=this._cutLineByPoint(n.step._geom,r);if(-1==this._lineContainsPoint(s,e))return o}return a[a.length-1]+1}return null},_findWaypointsForTmpGeometry:function(e,t){var n=this._detectWaypointsForTmpGeometry(e,t)||0;this._setDragGeometryWaypoints(n,n+1)},_lineContainsPoint:function(e,t){t=L.latLng(t);for(var n=e.getLatLngs(),a=0;a<n.length;a++){var i=n[a+1];if(!i)break;var o=n[a],r=i;if(this._pointOnLine(t,o,r))return a}return-1},_distance:function(e,t){return Math.sqrt(Math.pow(e.lat-t.lat,2)+Math.pow(e.lng-t.lng,2))},_pointOnLine:function(e,t,n){return t.lat==n.lat&&t.lng==n.lng?e.lat==t.lat&&e.lng==n.lng:Math.abs(this._distance(t,n)-this._distance(e,t)-this._distance(e,n))<1e-5},_cutLineByPoint:function(e,t){t=L.latLng(t);var n=this._lineContainsPoint(e,t);if(-1!=n){var a=e.getLatLngs().slice(n+1);return a.unshift(t),L.polyline(a)}return L.polyline(e.getLatLngs())},_setDragGeometryWaypoints:function(e,t){this._tmpDragGeometryWaypoints={start:e,end:t}},_legEvents:{mouseover:function(e){if(!(this._marker||this._tmpDragGeom||this._data.waypoints.length>=this.options.waypointsCount||"auto"!=this._mode)){var t=this._getPointPositionOnLine(e);this._markerStroke=L.circleMarker(t,this._extendOption(this.options.iconStyles.stroke));var n={};n="pedestrian"==this.searchType?this.options.iconStyles.markerPedestrian:this.options.iconStyles.marker,this._marker=L.circleMarker(t,this._extendOption(n)),this._markerStroke.addTo(this._map),this._marker.addTo(this._map)}},mousemove:function(e){if(this._marker){var t=this._getPointPositionOnLine(e);this._markerStroke.setLatLng(t),this._marker.setLatLng(t)}},mouseout:function(){this._marker&&(this._map.removeLayer(this._marker),this._map.removeLayer(this._markerStroke),this._marker=!1)},mousedown:function(e){if(!(this._data.waypoints.length>=this.options.waypointsCount||this._tmpDragGeom)){this._map.dragging.disable();var t={};t="pedestrian"==this.searchType?this.options.iconStyles.pointPedestrian:this.options.iconStyles.point;var n=this._getPointPositionOnLine(e),a=L.marker(n,this._extendOption(t));if(a.addTo(this._map),a.on(this._waypointMarkerEvents,this),this._makeTmpDragGeometry(n,a,e.layer.data),document.createEvent){var i=document.createEvent("MouseEvents");i.initMouseEvent("mousedown",!1,!1,document.defaultView,1,0,0,0,0,!1,!1,!1,!1,1,a._icon),a._icon.dispatchEvent(i)}else a._icon.fireEvent("onMouseDown",DG.extend(document.createEventObject(),{button:1,bubbles:!1,cancelable:!1}))}}},_waypointMarkerEvents:{dragstart:function(){this.fire("dragstartMarker")},drag:function(e){this._transformed=!0,this._moveTmpDragGeometry(e.target.getLatLng())},dragend:function(e){this._returnMapEvents(),this._transformed=!1,this._fireAddNewWaypoint(e),this._setDragGeometryWaypoints(),this.fire("dragendMarker")},mouseup:function(e){this._returnMapEvents(),this._transformed||this._fireAddNewWaypoint(e)}},_commonEvents:{click:function(){}},_returnMapEvents:function(){this._map&&!this._map.dragging.enabled()&&this._map.dragging.enable()},_fireAddNewWaypoint:function(e){var t=this._getWaypoints();t.splice(this._tmpDragGeom.position,0,e.target.getLatLng()),this._fireChangeEvent(e.target.getLatLng(),t)},_fireChangeEvent:function(e,t){t=t||this._getWaypoints(),this.fireEvent("change",{waypoints:t,lastChange:e})},_makeTmpDragGeometry:function(e,t,n){void 0!==n.waypointIndx&&this._setDragGeometryWaypoints(n.waypointIndx-1,n.waypointIndx+1);var a=this._tmpDragGeometryWaypoints;void 0!==a.start&&void 0!==a.end||this._findWaypointsForTmpGeometry(e,n);var i=this._tmpDragGeometryWaypoints.start,o=this._data.waypoints[i],r=this._data.waypoints[this._tmpDragGeometryWaypoints.end];this._tmpDragGeom={marker:t,latLngs:[o,e,r],position:i+1};var s={path:this._tmpDragGeom.latLngs,renderer:this._renderer,dragged:!0};this._tmpDragGeom.step=DG.RouteLayer.step(s,{styles:[this.searchType]}),this._map.addLayer(this._tmpDragGeom.step)},_moveTmpDragGeometry:function(e){this._tmpDragGeom.latLngs[1]=e,this._tmpDragGeom.step.updateGeometry(this._tmpDragGeom.latLngs)},_getPointPositionOnLine:function(e){var t=e.layerPoint,n=999,a=!1;return e.layer._parts.forEach(function(e){for(var i=1;i<e.length;i++){var o=L.LineUtil.pointToSegmentDistance(t,e[i-1],e[i]);n>o&&(n=o,a=[e[i-1],e[i]])}}),this._map.layerPointToLatLng(L.LineUtil.closestPointOnSegment(t,a[0],a[1]))},getStepById:function(e,t){var n;return this.legs.eachLayer(function(a){a._data.legIndx==e&&(n=a.getStepById(t))}),n},getLegById:function(e){var t;return this.legs.eachLayer(function(n){n._data.legIndx==e&&(t=n)}),t},_extendOption:function(e){var t=L.Util.extend({},e);return t=L.Util.extend(t,{renderer:this._renderer,pane:"route"})},_getWaypoints:function(){var e=[];return this.waypoints.eachLayer(function(t){e.push(t._geometry)}),e},_mapEvents:{zoomstart:function(){}}}),DG.routeLayer=function(e,t){return new DG.RouteLayer(e,t)},DG.RouteLayer.Leg=DG.FeatureGroup.extend({_data:{},options:{},initialize:function(e,t){this._data=e,this._layers=[],DG.Util.setOptions(this,t)},onAdd:function(e){return DG.FeatureGroup.prototype.onAdd.call(this,e),this.on(this._legEvents),this},onRemove:function(){return this.off(this._legEvents),this.clearLayers(),this},getStepById:function(e){var t;return this._layers.forEach(function(n){n._data.stepIndx==e&&(t=n)},this),t},makeTransparent:function(e){this._layers.forEach(function(t){t.makeTransparent(e)})},fixOrder:function(){function e(e){this._layers.forEach(function(t){t.fixOrder(e)})}for(var t=3,n=0;t>n;n++)e.call(this,n)},_legEvents:{mouseover:function(){this.makeTransparent(!0)},mouseout:function(){this.makeTransparent()}}}),DG.RouteLayer.leg=function(e,t){return new DG.RouteLayer.Leg(e,t)},DG.RouteLayer.Step=DG.FeatureGroup.extend({options:{draggable:!0},layers:[],style:null,includes:[DG.Locale,DG.Mixin.Events],statics:{Dictionary:{}},initialize:function(e,t){this._layers={},DG.Util.setOptions(this,t),this._setStyle(),this._renderer=e.renderer,e&&this.setData(e)},_setStyle:function(){for(var e=0;e<this.options.styles.length;e++){var t=this.options.styles[e];if(this.options.pathStyles.transport[t]){this.style=t;break}}},_getStyleType:function(e){var t=e?"hover":"normal";return this._data.dragged?"dragged":t},_getMainStyles:function(e){var t=this.style;"underground"!=t||this._isDashZoom()||(t="walkway");var n=this._extendOption(t,this._getStyleType(e));return!n.color&&this.options.color&&(n.color=this.options.color),n},_getStrokeStyles:function(e){return this._extendOption("stroke",this._getStyleType(e))},_getStrokeBorderStyles:function(e){return this._extendOption("strokeBorder",this._getStyleType(e))},_extendOption:function(e,t){var n=this.options.pathStyles.transport[e][t];return n=L.Util.extend({},this.options.pathStyles.transport[e].normal,n),n=L.Util.extend(n,{pane:"route",className:"routeSearchGeometry"}),"speedAuto"!=this.style&&(n=L.Util.extend(n,{renderer:this._renderer})),n},onAdd:function(){var e=this._getMainStyles();if("speedAuto"==this.style){if(this._geom=this._prepareGeometry(L.hotline(this._speedGeometry,e)),this.addLayer(this._geom),this.layers=[this._geom],this._geom&&this._geom._renderer&&this._geom._renderer._hotline&&this._geom._renderer._hotline._canvas){var t=this._geom._renderer._hotline._canvas;L.DomUtil.addClass(t,"_shown")}}else this._geom=this._prepareGeometry(L.polyline(this._geometry,e)),this._stroke=this._prepareGeometry(L.polyline(this._geometry,this._getStrokeStyles())),this._strokeBorder=this._prepareGeometry(L.polyline(this._geometry,this._getStrokeBorderStyles())),this.addLayer(this._strokeBorder).addLayer(this._stroke).addLayer(this._geom),this.layers=[this._strokeBorder,this._stroke,this._geom];this._data.dragged||"underground"==this.style&&this._map.on(this._mapEvents,this)},onRemove:function(){if("underground"==this.style&&this._map.off(this._mapEvents,this),"speedAuto"==this.style&&this._geom&&this._geom._renderer&&this._geom._renderer._hotline&&this._geom._renderer._hotline._canvas){var e=this._geom._renderer._hotline._canvas;L.DomUtil.removeClass(e,"_shown")}this.clearLayers()},_resetStyles:function(){this._geom.setStyle(this._getMainStyles())},_isDashZoom:function(e){e=e||this._map.getZoom();var t=16;return e>=t},_mapEvents:{zoomstart:function(){this.lastZoom=this._map.getZoom()},zoomend:function(){this._isDashZoom()!=this._isDashZoom(this.lastZoom)&&this._resetStyles()}},makeTransparent:function(e){var t=this._getMainStyles(e);if("speedAuto"==this.style?(this._geom.setOpacity(t.opacity),this._geom.setStyle({weight:t.weight})):this._geom.setStyle({opacity:t.opacity,weight:t.weight}),this._stroke){var n=this._getStrokeStyles(e);this._stroke.setStyle({opacity:n.opacity})}},_prepareGeometry:function(e){return e.data={legIndx:this._data.legIndx,stepIndx:this._data.stepIndx},e},updateGeometry:function(e){this.layers.forEach(function(t){t.setLatLngs(e)})},setData:function(e){return this._data=e,this._geometry=e.path,this._speedGeometry=e.speedPath,this},fixOrder:function(e){this.layers[e]&&this.layers[e].bringToFront()}}),DG.RouteLayer.step=function(e,t){return new DG.RouteLayer.Step(e,t)},DG.RouteLayer.Waypoint=DG.FeatureGroup.extend({options:{draggable:!0},includes:[DG.Locale,DG.Mixin.Events],statics:{Dictionary:{}},layers:[],_extendOption:function(e,t){var n=this.options.iconStyles[e];return n=L.Util.extend({},n,t),n=L.Util.extend(n,{renderer:this._renderer,pane:"routeMarkers"})},_generateIcon:function(e){var t="";this._data.nextMovementType&&(t+=" _type_"+this._data.nextMovementType),this._data.city&&(t+=" _city_"+this._data.city);var n={};return L.Util.extend(n,e),n.html=n.html.replace("#CLASS#",t||"").replace("#COLOR#",this._data.color||"#2864c8"),L.divIcon(n)},_setMarkerOptions:function(){return this._data.isKeypoint?0==this._data.indx?this._extendOption("start",{icon:this._generateIcon(this.options.iconStyles.start.defaultIconOptions)}):this._extendOption("end",{icon:this._generateIcon(this.options.iconStyles.end.defaultIconOptions)}):"auto"==this._data.searchType?this._extendOption("pointAuto"):"pedestrian"==this._data.searchType?this._extendOption("pointPedestrian"):this._extendOption("point",{icon:this._generateIcon(this.options.iconStyles.point.defaultIconOptions)})},initialize:function(e,t){this._layers={},DG.Util.setOptions(this,t),this._renderer=e.renderer,e&&this.setData(e)},addTo:function(e){return e.addLayer(this),this},onAdd:function(){if("afoot"!=this._data.nextMovementType||this._data.isKeypoint){var e=L.marker(this._geometry,this._setMarkerOptions());e.data={indx:this._data.indx},e.addTo(this),e.on(this._markerEvents,this),this._marker=e}if(this._data.isKeypoint||"auto"!=this._data.searchType&&"pedestrian"!=this._data.searchType){var t,n,a="#909090",i="#2864c8",o=this._data.color!=i&&this._data.color?this._data.color:a;"afoot"!=this._data.nextMovementType&&"subwayAfoot"!=this._data.nextMovementType||this._data.isKeypoint?(t=L.circleMarker(this._geometry,this._extendOption("substrateStroke")),n=L.circleMarker(this._geometry,this._extendOption("substrate",{fillColor:o}))):(t=L.circleMarker(this._geometry,this._extendOption("substrateCrossingStroke")),n=L.circleMarker(this._geometry,this._extendOption("substrateCrossing",{color:o}))),this.addLayer(t).addLayer(n),this.layers=[t,n,n]}},_markerEvents:{dragstart:function(e){this._map.closePopup(),this.fire("dragstart",this._getDragInfo(e)),this._data.isKeypoint&&this.fireEvent("dragendKeypoint",{event:e,marker:this._marker})},drag:function(e){this.fire("drag",this._getDragInfo(e))},dragend:function(e){this._data.isKeypoint&&this.fireEvent("dragendKeypoint",{event:e,marker:this._marker}),this._geometry=this._marker.getLatLng(),this.fireEvent("change",{newGeometry:this._geometry})},dblclick:function(e){"auto"!=this._data.searchType&&"pedestrian"!=this._data.searchType||this._data.isKeypoint||(this._geometry=e.target.getLatLng(),this.fireEvent("change",{delGeometry:this._geometry}))}},_getDragInfo:function(e){return{geometry:e.target.getLatLng(),drawTmpGeom:("auto"==this._data.searchType||"pedestrian"==this._data.searchType)&&!this._data.isKeypoint,indx:this._data.indx}},setData:function(e){return this._data=e,this._geometry=e.geometry,this},fixOrder:function(){this.layers.forEach(function(e){e.bringToFront()})}}),DG.RouteLayer.waypoint=function(e,t){return new DG.RouteLayer.Waypoint(e,t)},DG.RouteLayer.MetroEntrance=DG.RouteLayer.Waypoint.extend({_setMarkerOptions:function(){return this._extendOption("pointMetroEntrance",{icon:this._generateIcon(this.options.iconStyles.point.defaultIconOptions)})},initialize:function(){DG.RouteLayer.Waypoint.prototype.initialize.apply(this,arguments),this.lastZoom=null},_generateIcon:function(e){var t="_type_metroEntrance";this._data.city&&(t+=" _city_"+this._data.city);var n={};return L.Util.extend(n,e),n.html=n.html.replace("#CLASS#",t||"").replace("#COLOR#",this._data.color||"#2864c8"),L.divIcon(n)},onAdd:function(){var e=L.marker(this._geometry,this._setMarkerOptions());e.data=this._data,e.addTo(this),e.on(this._markerEvents,this),this._marker=e;var t=this._data.color,n=L.circleMarker(this._geometry,this._extendOption("substrateMetroEntranceStroke")),a=L.circleMarker(this._geometry,this._extendOption("substrateMetroEntrance",{color:t}));this._map.on(this._mapEvents,this),this.addLayer(n).addLayer(a),this.layers=[n,a,a],this._mapEvents.zoomend.call(this)},onRemove:function(){this.clearLayers(),this._map.off(this._mapEvents,this)},_showOnZoom:function(e){e=e||this._map.getZoom();var t=this._map._metroEntranceThresholdZoom||16;return e>=t},_mapEvents:{zoomstart:function(){this.lastZoom=this._map.getZoom()},zoomend:function(){var e=this._showOnZoom();this.lastZoom&&e==this._showOnZoom(this.lastZoom)||(this.lastZoom||(this.lastZoom=this._map.getZoom()),e?(this._marker.addTo(this),this.eachLayer(function(e){e.setStyle&&e.setStyle({fill:!0})})):(this._marker.removeFrom(this),this.eachLayer(function(e){e.setStyle&&e.setStyle({fill:!1})})))}}}),DG.RouteLayer.metroEntrance=function(e,t){return new DG.RouteLayer.MetroEntrance(e,t)},DG.RouteLayer.mergeOptions({pathStyles:{driving:{}},iconStyles:{point:{draggable:!0,clickable:!0,icon:L.divIcon({iconSize:[14,14],iconAnchor:[7,7],html:'<div class="map__routeIntermidiatePointPpna"></div>'})},pointPedestrian:{draggable:!0,clickable:!0,icon:L.divIcon({iconSize:[14,14],iconAnchor:[7,7],html:'<div class="map__routeIntermidiatePointPpna _pedestrian"></div>'})},stroke:{clickable:!1,color:"#fff",weight:1.5,opacity:1,fillColor:"#fff",fillOpacity:1,radius:6},marker:{clickable:!1,color:"#2864c8",weight:3,opacity:1,fillColor:"#fff",fillOpacity:1,radius:4},markerPedestrian:{clickable:!1,color:"#85004B",weight:3,opacity:1,fillColor:"#fff",fillOpacity:1,radius:4}}}),DG.RouteLayer.Step.mergeOptions({pathStyles:{transport:{auto:{normal:{clickable:!1,lineCap:"round",lineJoin:"round",color:"#2a62c0",weight:6,opacity:1},hover:{opacity:.6,weight:8},dragged:{opacity:.4}},speedAuto:{normal:{lineCap:"round",lineJoin:"round",weight:6,zoomWeight:[{zoom:18,weight:14},{zoom:17,weight:8},{zoom:16,weight:9},{zoom:15,weight:8},{zoom:14,weight:7},{zoom:13,weight:6},{zoom:12,weight:5}],opacity:1,min:0,max:10,unknownColor:"#808080",outlines:[{color:"#505050",weight:3,zoomWeight:[{zoom:18,weight:5},{zoom:17,weight:4},{zoom:15,weight:3},{zoom:14,weight:3},{zoom:13,weight:3}]},{color:"#ffffff",weight:2,zoomWeight:[{zoom:18,weight:4},{zoom:17,weight:3},{zoom:15,weight:2},{zoom:14,weight:2},{zoom:13,weight:2}]}],palette:{0:"#45b700",.5:"#f7ca00",1:"#ec4300"},maxGradient:30,minGradient:2,minColorLength:2,gradientPercent:30},hover:{opacity:.6,weight:8},dragged:{opacity:.4}},pedestrian:{normal:{clickable:!1,lineCap:"round",lineJoin:"round",color:"#85004B",weight:6,opacity:1},hover:{opacity:.6,weight:8},dragged:{opacity:.4}},bus:{normal:{clickable:!1,lineCap:"round",lineJoin:"round",weight:6,opacity:1},hover:{opacity:.6,weight:8},dragged:{}},underground:{normal:{clickable:!1,lineCap:"square",lineJoin:"round",color:"#909090",weight:6,dashArray:"2, 10.5",opacity:1},hover:{opacity:.5,weight:6},dragged:{}},walkway:{normal:{clickable:!1,lineCap:"round",lineJoin:"round",color:"#909090",weight:6,dashArray:"",opacity:1},hover:{opacity:.6,weight:8},dragged:{}},crossing:{normal:{clickable:!1,lineCap:"round",lineJoin:"round",color:"#909090",weight:6,dashArray:"",opacity:1},hover:{opacity:.6,weight:8},dragged:{}},stroke:{normal:{clickable:!1,lineCap:"round",lineJoin:"round",color:"#fff",weight:12,opacity:1},hover:{opacity:.6,weight:8},dragged:{opacity:.4}},strokeBorder:{normal:{noClip:!0,pointerEvents:"painted",clickable:!0,lineCap:"round",lineJoin:"round",color:"#000",weight:14,opacity:.1},hover:{opacity:.1,weight:8},dragged:{opacity:.1}}}}}),DG.RouteLayer.Waypoint.mergeOptions({iconStyles:{start:{draggable:!0,clickable:!0,zIndexOffset:200,defaultIconOptions:{iconSize:[20,20],iconAnchor:[11,11],html:'<div class="map__markerRouteSearch #CLASS#"><div class="map__markerRouteSearchPin" style="border-color: #COLOR#"></div></div>'}},pointAuto:{zIndexOffset:180,draggable:!0,clickable:!0,icon:L.divIcon({iconSize:[14,14],iconAnchor:[7,7],html:'<div class="map__routeIntermidiatePointPpna"></div>'})},pointPedestrian:{zIndexOffset:180,draggable:!0,clickable:!0,icon:L.divIcon({iconSize:[14,14],iconAnchor:[7,7],html:'<div class="map__routeIntermidiatePointPpna _pedestrian"></div>'})},pointMetroEntrance:{zIndexOffset:180,radius:10,icon:L.divIcon({iconSize:[10,10],iconAnchor:[7,7],html:'<div class="map__routeIntermidiatePoint _type_metroEntrance #CLASS#"></div>'})},point:{zIndexOffset:180,defaultIconOptions:{iconSize:[12,8],iconAnchor:[10,10],html:'<div class="map__routeIntermidiatePoint #CLASS#"></div>'}},end:{draggable:!0,zIndexOffset:190,defaultIconOptions:{iconSize:[20,20],iconAnchor:[11,11],html:'<div class="map__markerRouteSearch _end #CLASS#"><div class="map__markerRouteSearchPin" style="border-color: #COLOR#"></div></div>'}},substrateStroke:{stroke:!0,clickable:!1,fillColor:"#fff",fillOpacity:1,radius:13,weight:1,color:"#000",opacity:.1},substrate:{stroke:!1,clickable:!1,fillColor:"#909090",fillOpacity:1,radius:10},substrateCrossingStroke:{stroke:!0,clickable:!1,fillColor:"#fff",fillOpacity:1,radius:9,weight:1,color:"#000",opacity:.1},substrateCrossing:{stroke:!0,clickable:!1,fillColor:"#fff",fillOpacity:1,radius:4,weight:4,color:"#909090",opacity:1},substrateMetroEntranceStroke:{stroke:!0,clickable:!1,fillColor:"#fff",fillOpacity:1,radius:9,weight:1,color:"#000",opacity:.1},substrateMetroEntrance:{stroke:!1,clickable:!1,fillOpacity:1,radius:7}}}),function(){"use strict";function e(t,n){return this instanceof e?(this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&this._initFormat(n),void this.clear()):new e(t,n)}function t(e,t){e.bbox=n(e,0,e.children.length,t)}function n(e,t,n,o){for(var r,s=a(),l=t;n>l;l++)r=e.children[l],i(s,e.leaf?o(r):r.bbox);return s}function a(){return[1/0,1/0,-(1/0),-(1/0)]}function i(e,t){return e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e}function o(e,t){return e.bbox[0]-t.bbox[0]}function r(e,t){return e.bbox[1]-t.bbox[1]}function s(e){return(e[2]-e[0])*(e[3]-e[1])}function l(e){return e[2]-e[0]+(e[3]-e[1])}function c(e,t){return(Math.max(t[2],e[2])-Math.min(t[0],e[0]))*(Math.max(t[3],e[3])-Math.min(t[1],e[1]))}function u(e,t){var n=Math.max(e[0],t[0]),a=Math.max(e[1],t[1]),i=Math.min(e[2],t[2]),o=Math.min(e[3],t[3]);return Math.max(0,i-n)*Math.max(0,o-a)}function d(e,t){return e[0]<=t[0]&&e[1]<=t[1]&&t[2]<=e[2]&&t[3]<=e[3]}function h(e,t){return t[0]<=e[2]&&t[1]<=e[3]&&t[2]>=e[0]&&t[3]>=e[1]}function p(e,t,n,a,i){for(var o,r=[t,n];r.length;)n=r.pop(),t=r.pop(),a>=n-t||(o=t+Math.ceil((n-t)/a/2)*a,f(e,t,n,o,i),r.push(t,o,o,n))}function f(e,t,n,a,i){for(var o,r,s,l,c,u,d,h,p;n>t;){for(n-t>600&&(o=n-t+1,r=a-t+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(0>r-o/2?-1:1),u=Math.max(t,Math.floor(a-r*l/o+c)),d=Math.min(n,Math.floor(a+(o-r)*l/o+c)),f(e,u,d,a,i)),h=e[a],r=t,p=n,m(e,t,a),i(e[n],h)>0&&m(e,t,n);p>r;){for(m(e,r,p),r++,p--;i(e[r],h)<0;)r++;for(;i(e[p],h)>0;)p--}0===i(e[t],h)?m(e,t,p):(p++,m(e,p,n)),a>=p&&(t=p+1),p>=a&&(n=p-1)}}function m(e,t,n){var a=e[t];e[t]=e[n],e[n]=a}e.prototype={all:function(){return this._all(this.data,[]);
},search:function(e){var t=this.data,n=[],a=this.toBBox;if(!h(e,t.bbox))return n;for(var i,o,r,s,l=[];t;){for(i=0,o=t.children.length;o>i;i++)r=t.children[i],s=t.leaf?a(r):r.bbox,h(e,s)&&(t.leaf?n.push(r):d(e,s)?this._all(r,n):l.push(r));t=l.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!h(e,t.bbox))return!1;for(var a,i,o,r,s=[];t;){for(a=0,i=t.children.length;i>a;a++)if(o=t.children[a],r=t.leaf?n(o):o.bbox,h(e,r)){if(t.leaf||d(e,r))return!0;s.push(o)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;n>t;t++)this.insert(e[t]);return this}var a=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){var i=this.data;this.data=a,a=i}this._insert(a,this.data.height-a.height-1,!0)}else this.data=a;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data={children:[],height:1,bbox:a(),leaf:!0},this},remove:function(e){if(!e)return this;for(var t,n,a,i,o=this.data,r=this.toBBox(e),s=[],l=[];o||s.length;){if(o||(o=s.pop(),n=s[s.length-1],t=l.pop(),i=!0),o.leaf&&(a=o.children.indexOf(e),-1!==a))return o.children.splice(a,1),s.push(o),this._condense(s),this;i||o.leaf||!d(o.bbox,r)?n?(t++,o=n.children[t],i=!1):o=null:(s.push(o),l.push(t),t=0,n=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:function(e,t){return e[0]-t[0]},compareMinY:function(e,t){return e[1]-t[1]},toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,n,a,i){var o,r=a-n+1,s=this._maxEntries;if(s>=r)return o={children:e.slice(n,a+1),height:1,bbox:null,leaf:!0},t(o,this.toBBox),o;i||(i=Math.ceil(Math.log(r)/Math.log(s)),s=Math.ceil(r/Math.pow(s,i-1))),o={children:[],height:i,bbox:null};var l,c,u,d,h=Math.ceil(r/s),f=h*Math.ceil(Math.sqrt(s));for(p(e,n,a,f,this.compareMinX),l=n;a>=l;l+=f)for(u=Math.min(l+f-1,a),p(e,l,u,h,this.compareMinY),c=l;u>=c;c+=h)d=Math.min(c+h-1,u),o.children.push(this._build(e,c,d,i-1));return t(o,this.toBBox),o},_chooseSubtree:function(e,t,n,a){for(var i,o,r,l,u,d,h,p;;){if(a.push(t),t.leaf||a.length-1===n)break;for(h=p=1/0,i=0,o=t.children.length;o>i;i++)r=t.children[i],u=s(r.bbox),d=c(e,r.bbox)-u,p>d?(p=d,h=h>u?u:h,l=r):d===p&&h>u&&(h=u,l=r);t=l}return t},_insert:function(e,t,n){var a=this.toBBox,o=n?e.bbox:a(e),r=[],s=this._chooseSubtree(o,this.data,t,r);for(s.children.push(e),i(s.bbox,o);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(o,r,t)},_split:function(e,n){var a=e[n],i=a.children.length,o=this._minEntries;this._chooseSplitAxis(a,o,i);var r=this._chooseSplitIndex(a,o,i),s={children:a.children.splice(r,a.children.length-r),height:a.height};a.leaf&&(s.leaf=!0),t(a,this.toBBox),t(s,this.toBBox),n?e[n-1].children.push(s):this._splitRoot(a,s)},_splitRoot:function(e,n){this.data={children:[e,n],height:e.height+1},t(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,a){var i,o,r,l,c,d,h,p;for(d=h=1/0,i=t;a-t>=i;i++)o=n(e,0,i,this.toBBox),r=n(e,i,a,this.toBBox),l=u(o,r),c=s(o)+s(r),d>l?(d=l,p=i,h=h>c?c:h):l===d&&h>c&&(h=c,p=i);return p},_chooseSplitAxis:function(e,t,n){var a=e.leaf?this.compareMinX:o,i=e.leaf?this.compareMinY:r,s=this._allDistMargin(e,t,n,a),l=this._allDistMargin(e,t,n,i);l>s&&e.children.sort(a)},_allDistMargin:function(e,t,a,o){e.children.sort(o);var r,s,c=this.toBBox,u=n(e,0,t,c),d=n(e,a-t,a,c),h=l(u)+l(d);for(r=t;a-t>r;r++)s=e.children[r],i(u,e.leaf?c(s):s.bbox),h+=l(u);for(r=a-t-1;r>=t;r--)s=e.children[r],i(d,e.leaf?c(s):s.bbox),h+=l(d);return h},_adjustParentBBoxes:function(e,t,n){for(var a=n;a>=0;a--)i(t[a].bbox,e)},_condense:function(e){for(var n,a=e.length-1;a>=0;a--)0===e[a].children.length?a>0?(n=e[a-1].children,n.splice(n.indexOf(e[a]),1)):this.clear():t(e[a],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=Function("a","b",t.join(e[0])),this.compareMinY=Function("a","b",t.join(e[1])),this.toBBox=Function("a","return [a"+e.join(", a")+"];")}},window.L.Util.rbush=e}(),L.MarkerClassList=function(e){this._classList={},this._marker=e},L.Util.extend(L.MarkerClassList.prototype,{add:function(e){return this._classList[e]=1,this._marker._icon&&L.DomUtil.addClass(this._marker._icon,e),this},remove:function(e){return delete this._classList[e],this._marker._icon&&L.DomUtil.removeClass(this._marker._icon,e),this},contains:function(e){return!!this._classList[e]},clear:function(){if(this._marker._icon)for(var e in this._classList)L.DomUtil.removeClass(this._marker._icon,e);this._classList={}},toString:function(){if(Object.keys)return Object.keys(this._classList).join(" ");var e="";for(var t in this._classList)e+=t+" "},_addClasses:function(){if(this._marker._icon)for(var e in this._classList)L.DomUtil.addClass(this._marker._icon,e)}}),L.markerClassList=function(e){return new L.MarkerClassList(e)},L.MarkerEx=L.Marker.extend({_extended:!0,onAdd:function(e){L.Marker.prototype.onAdd.apply(this,arguments),this._immunityLevel==this.IMMUNITY.NO_DELETE&&(this._icon.style.display="block"),this.classes._addClasses()},getEvents:function(){return this._zoomAnimated=!1,L.Marker.prototype.getEvents.apply(this,arguments)},onBeforeRemove:function(){return this._immunityLevel==this.IMMUNITY.NO_HIDE?!1:this._immunityLevel==this.IMMUNITY.NO_DELETE?(this._icon.style.display="none",!1):!0},initialize:function(){L.Marker.prototype.initialize.apply(this,arguments),this.classes=L.markerClassList(this)},IMMUNITY:{NONE:0,NO_DELETE:1,NO_HIDE:2},_immunityLevel:null,immunifyForDeletion:function(){return this._immunityLevel=this.IMMUNITY.NO_DELETE,this},immunifyForHide:function(){return this._immunityLevel=this.IMMUNITY.NO_HIDE,this},revokeImmunity:function(){return this._immunityLevel=this.IMMUNITY.NONE,this}}),L.markerEx=function(e,t){return new L.MarkerEx(e,t)},L.MarkerGeneralizeGroup=L.FeatureGroup.extend({options:{levels:[{margin:30,safeZone:20,size:[25,40],offset:[12.5,40],className:"_pin"},{safeZone:5,size:[6,6],className:"_bullet"},{safeZone:0,className:"_hidden"}],viewportHideOffset:1,checkMarkersIntersection:function(e,t){var n=Math.max(e.safeZone,t.margin);return Math.abs(e.markerX-t.markerX)>n+e.markerWidth/2+t.markerWidth/2||Math.abs(e.markerY-t.markerY)>n+e.markerHeight/2+t.markerHeight/2},checkMarkerMinimumLevel:function(){return 0},pane:"markerPane"},initialize:function(e){L.Util.setOptions(this,e),this._layers={},this._priorityMarkers=[],this._otherMarkers=[],this._calculationBusy=!1,this._calculationQueued=!1,this._zoomReady={},this.setMaxZoom(e.maxZoom),this.setMinZoom(e.minZoom),this.on("invalidationFinish",function(){this.getPane().style.display="block"})},setMaxZoom:function(e){!isNaN(e)&&19>=e&&(this._maxZoom=e)},setMinZoom:function(e){if(!isNaN(e)&&e>=0){if(e>this._getMaxZoom())throw Error("Min zoom must be smaller than max zoom");this._minZoom=e}},_getMaxZoom:function(){return isNaN(this._maxZoom)?this._map.getMaxZoom():this._maxZoom},_getMinZoom:function(){return isNaN(this._minZoom)?this._map.getMinZoom():this._minZoom},_getLevels:function(e){var t,n=this.options;return t="function"==typeof n.levels?n.levels(this._map,e):n.levels,this._prepareLevels(t)},_prepareLevels:function(e){var t,n,a;for(t=0;t<e.length;t++)for(a=e[t],a.index=t,a.markerOffset=[],a.markerDistance=[],a.size||(a.size=[0,0]),a.offset||(a.offset=[a.size[0]/2,a.size[1]/2]),n=0;2>n;n++)a.markerOffset[n]=a.size[n]/2-a.offset[n];return e},_addLayer:function(e){e._positions={},e.showAlways?this._priorityMarkers.push(e):this._otherMarkers.push(e);var t=this._map;t&&(this._map=null),L.LayerGroup.prototype.addLayer.call(this,e),t&&(this._map=t)},_prepareMarker:function(e){for(var t=this._getMaxZoom(),n=this._getMinZoom();t>=n;t--)this._setMarkerPosition(e,t)},_setMarkerPosition:function(e,t){e._positions[t]=this._map.project(e.getLatLng(),t),e.options.classForZoom=e.options.classForZoom||[],e.options.classForZoom[t]="HIDDEN"},_calculateMarkersClassForEachZoom:function(){var e=this;if(this._calculationBusy)return void(this._calculationQueued=!0);this._calculationBusy=!0,this._zoomReady={};for(var t=this._map.getZoom(),n=this._getMaxZoom(),a=[],i=this._getMinZoom();n>=i;i++)i!=t&&a.push(i);a.sort(function(e,n){return Math.abs(t-e)-Math.abs(t-n)}),this._calculateMarkersClassForZoom(t,function(){L.Util.UnblockingFor(function(t,n){var i=a[t];e._calculateMarkersClassForZoom(i,n)},a.length,function(){e._calculationBusy=!1,e.fireEvent("calculationFinish"),e._calculationQueued&&(e._calculationQueued=!1,e._calculateMarkersClassForEachZoom())})})},_calculateMarkersClassForZoom:function(e,t){function n(t,n){var a=[],o=p.length;if(r=c[t],0==c[t].size[0]&&0==c[t].size[1])return void n();for(var s=0;o>s;s++){var f=p[s];if(u.options.checkMarkerMinimumLevel(f)<=t){var m=i(f,r);h=d.search(m),u._validateGroup(m,h)?(d.insert(m),f.options.classForZoom[e]=r.className,l[t].push(f)):a.push(f)}else a.push(f)}p=a.slice(),n()}function a(){u._zoomReady[e]=!0,u._map.getZoom()==e&&u._invalidateMarkers(),t()}function i(t,n){var a=n.safeZone||0,i=n.margin||0,o=Math.max(a,i);t._positions[e]||u._setMarkerPosition(t,e);var r=t._positions[e].x-n.offset[0]-o,s=t._positions[e].y-n.offset[1]-o,l=n.size[0]+2*o,c=n.size[1]+2*o,d=[r,s,r+l,s+c];return d.levelIndex=n.index,d.marker=t,d.safeZone=a,d.margin=i,d.markerX=t._positions[e].x+n.markerOffset[0],d.markerY=t._positions[e].y+n.markerOffset[1],d.markerHeight=n.size[1],d.markerWidth=n.size[0],d}var o,r,s,l={},c=this._getLevels(e),u=this;for(o=0;o<c.length;o++)l[o]=[];var d=L.Util.rbush();for(r=c[0],o=0;o<this._priorityMarkers.length;o++)s=this._prepareMarker(this._priorityMarkers[o]),l[r].push(s),d.insert(i(s,r));var h,p=[];for(o=0;o<this._otherMarkers.length;o++)s=this._otherMarkers[o],p.push(s);L.Util.UnblockingFor(n,c.length,a)},_getPixelBoundsForZoom:function(e){var t,n=Number.MAX_VALUE,a=Number.MAX_VALUE,i=0,o=0;return this.eachLayer(function(r){r._positions[e]||that._setMarkerPosition(r,e),t=r._positions[e],n=Math.min(n,t.x),a=Math.min(a,t.y),i=Math.max(i,t.x),o=Math.max(o,t.y)}),{x:n,y:a,width:i-n,height:o-a}},_validateGroup:function(e,t){if(0==t.length)return!0;var n,a=this.options;for(n=0;n<t.length;n++)if(!a.checkMarkersIntersection(e,t[n]))return!1;return!0},_invalidateMarkers:function(){var e=this._map.getZoom();if(this._zoomReady[e]){var t=this._map.getPixelBounds(),n=(t.max.x-t.min.x)*this.options.viewportHideOffset,a=(t.max.y-t.min.y)*this.options.viewportHideOffset;t.min._subtract({x:n,y:a}),t.max._add({x:n,y:a}),this.eachLayer(function(n){var a=n.options.classForZoom[e],i=n._positions[e],o=n.options.state;n._immunityLevel&&(n._map||this._map.addLayer(n),o!=a&&"HIDDEN"!=a&&L.DomUtil.addClass(n._icon,a)),t.contains(i)?"HIDDEN"!=a&&o!=a&&(n._map||this._map.addLayer(n),o!=a&&(o&&"HIDDEN"!=o&&L.DomUtil.removeClass(n._icon,o),L.DomUtil.addClass(n._icon,a))):a="HIDDEN","HIDDEN"==a&&(!n.onBeforeRemove||n.onBeforeRemove&&n.onBeforeRemove())&&this._map.removeLayer(n),n.options.state=a},this),this.fireEvent("invalidationFinish")}},_zoomStart:function(){this.getPane().style.display="none"},addLayer:function(e){return this._addLayer(e),this._map&&!e._immunityLevel&&(this._prepareMarker(e),this._calculateMarkersClassForEachZoom(),this._invalidateMarkers()),this},addLayers:function(e){var t;for(t=0;t<e.length;t++)this._addLayer(e[t]);return this._map&&(this.eachLayer(this._prepareMarker,this),setTimeout(this._calculateMarkersClassForEachZoom.bind(this),0)),this},_removeLayer:function(e){var t,n=this._layers.length;return-1!=(t=this._priorityMarkers.indexOf(e))?this._priorityMarkers.splice(t,1):-1!=(t=this._otherMarkers.indexOf(e))&&this._otherMarkers.splice(t,1),L.LayerGroup.prototype.removeLayer.call(this,e),n-this._layers.length!=0},removeLayer:function(e){return this._removeLayer(e)&&(this._calculateMarkersClassForEachZoom(),this._invalidateMarkers()),this},getEvents:function(){var e={zoomstart:this._zoomStart,moveend:this._invalidateMarkers};return e},onAdd:function(e){this._map=e,this.getLayers().length&&(this.eachLayer(this._prepareMarker,this),setTimeout(this._calculateMarkersClassForEachZoom.bind(this),0))},onRemove:function(e){this._map&&(L.LayerGroup.prototype.onRemove.call(this,e),this.eachLayer(function(e){e.options.state="HIDDEN"}),this._map=null)},clearLayers:function(){var e;for(e in this._layers)this._removeLayer(this._layers[e]);return this._priorityMarkers=[],this._otherMarkers=[],this}}),L.markerGeneralizeGroup=function(e){return new L.MarkerGeneralizeGroup(e)},L.Util.UnblockingFor=function(e,t,n){function a(t){setTimeout(function(){e(t,i)},0)}function i(){o++,t>o?a(o):n()}n=n||function(){};var o=0;a(o)},"undefined"!=typeof window?window.L.Util.Gradienter=makeGradienter():module.exports=makeGradienter(),function(e,t){"function"==typeof define&&define.amd?define(["leaflet"],t):"object"==typeof exports?module.exports=t:t(e.L)}(this,function(e){if(e.Hotline)return e;e.HotlineUtil=e.extend(e.LineUtil,{clipSegment:function(t,n,a,i,o){var r,s,l,c=i?this._lastCode:e.LineUtil._getBitCode(t,a),u=e.LineUtil._getBitCode(n,a);for(this._lastCode=u;;){if(!(c|u))return[t,n];if(c&u)return!1;r=c||u,s=this._getEdgeIntersection(t,n,r,a,o),l=this._getBitCode(s,a),r===c?(s.z=t.z,t=s,c=l):(s.z=n.z,n=s,u=l)}},_simplifyDP:function(e,t){var n=e.length,a=typeof Uint8Array!=void 0+""?Uint8Array:Array,i=new a(n);i[0]=i[n-1]=1;for(var o=0,r=e.length;r>o;o++)e[o].cantBeDeleted&&(i[o]=1);this._simplifyDPStep(e,i,t,0,n-1);var s,l=[];for(s=0;n>s;s++)i[s]&&l.push(e[s]);return l},_reducePoints:function(t,n){for(var a=[t[0]],i=1,o=0,r=t.length;r>i;i++)(e.LineUtil._sqDist(t[i],t[o])>n||t[i].cantBeDeleted)&&(a.push(t[i]),o=i);return r-1>o&&a.push(t[r-1]),a}});var t=function(e,n){if(!(this instanceof t))return new t(e);var a={0:"green",.5:"yellow",1:"red"};this._map=n,this._canvas=e="string"==typeof e?document.getElementById(e):e,this._ctx=e.getContext("2d"),this._width=e.width,this._height=e.height,this._weight=5,this._min=0,this._max=1,this._data=[],this._dataOrigin=[],this.palette(a)};t.prototype={width:function(e){return this._width=e,this},height:function(e){return this._height=e,this},weight:function(e){return this._weight=e,this},zoomWeight:function(e){return this._zoomWeight=e,this},outlines:function(e){return this._outlines=e,this},palette:function(e){return this._palette=this.calcPalette(e),this},calcPalette:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),a=n.createLinearGradient(0,0,0,256);t.width=1,t.height=256;for(var i in e)a.addColorStop(i,e[i]);return n.fillStyle=a,n.fillRect(0,0,1,256),n.getImageData(0,0,1,256).data},unknownColor:function(e){var t=this.calcPalette([e]);return this._unknownColor=[t[0],t[1],t[2]],this},maxGradient:function(e){return this._maxGradient=e,this},minGradient:function(e){return this._minGradient=e,this},minColorLength:function(e){return this._minColorLength=e,this},gradientPercent:function(e){return this._gradientPercent=e,this},color:function(e){var t=this.calcPalette([e]);this._color=[t[0],t[1],t[2]]},min:function(e){return this._min=e,this},max:function(e){return this._max=e,this},data:function(t){this._dataOrigin=t;var n,a,i,o,r,s=[];for(n=0,i=t.length;i>n;n++){for(o=t[n],s[n]=[],a=0,r=o.length;r>a;a++)s[n][a]=e.point(o[a].x,o[a].y),s[n][a].z=o[a].z;s[n]=this.setGradientPoint(s[n])}return this._data=this.setRGBData(s),this},setGradientPoint:function(t){var n=new e.Util.Gradienter(t,{maxGradient:this._maxGradient,minGradient:this._minGradient,minColorLength:this._minColorLength,gradientPercent:this._gradientPercent});return n.getGradientPath()},setRGBData:function(e){var t,n,a,i,o,r,s,l;for(t=0,a=e.length;a>t;t++){for(i=e[t],n=0,o=i.length;o>n;n++)s=i[n],void 0!==s.z&&(s.rgb=this.getRBGForPoint(s));for(n=0,o=i.length;o>n;n++)r=i[n-1],s=i[n],l=i[n+1],s.rgb||(r&&l&&r.rgb&&l.rgb?s.rgb=[Math.floor((r.rgb[0]+l.rgb[0])/2),Math.floor((r.rgb[1]+l.rgb[1])/2),Math.floor((r.rgb[2]+l.rgb[2])/2)]:s.rgb=this.getRBGForPoint(s))}return e},getRBGForPoint:function(e){var t=e.rgb;return t||(t=void 0===e.z?this._color||this._unknownColor:-1===e.z?this._unknownColor:this.getRGBForValue(e.z)),t},add:function(e){return this.data(this._dataOrigin.push(e)),this},clear:function(e){return e&&(this._data=[]),this._ctx.clearRect(0,0,this._width,this._height),this},draw:function(e){var t=this._ctx;return t.globalCompositeOperation=e?"destination-out":"source-over",t.lineCap="round",t.lineJoin="round",this._drawOutlines(t,e),e?this:(this._drawHotline(t),t.fill(),this)},getRGBForValue:function(e){var t=Math.min(Math.max((e-this._min)/(this._max-this._min),0),.999),n=4*Math.floor(256*t);return[this._palette[n],this._palette[n+1],this._palette[n+2]]},_getActualWeight:function(e){e=e||this;var t=e._zoomWeight||e.zoomWeight;if(t&&t.length){var n,a=t.length,i=this._map.getZoom();for(n=0;a>n;n++)if(i>=t[n].zoom)return t[n].weight;return t[n-1].weight}return e._weight||e.weight},_drawOutlines:function(e,t){if(this._outlines){var n,a;for(n=0,a=this._outlines.length;a>n;n++)this._drawOutline(e,t,this._outlines[n].color,this._getActualWeight(this._outlines[n]))}},_drawOutline:function(e,t,n,a){var i,o,r,s,l,c,u,d=this._getActualWeight();if(t||a)for(i=0,r=this._data.length;r>i;i++)if(s=this._data[i],l=d+2*a,s._prevWidth=e.lineWidth=t?(s._prevWidth||l)+1:l,c=s.length){for(e.strokeStyle=n,e.beginPath(),e.moveTo(s[0].x,s[0].y),o=1,c=s.length;c>o;o++)u=s[o],e.lineTo(u.x,u.y);e.stroke()}},_drawHotline:function(e){var t,n,a,i,o,r,s,l,c,u,d=[];for(e.lineWidth=this._getActualWeight(),t=0,a=this._data.length;a>t;t++)for(i=this._data[t],n=1,o=i.length;o>n;n++)if(r=i[n-1],s=i[n],d.push(r),r.z!==s.z||n===o-1){var h=d[0];for(e.beginPath(),e.strokeStyle="rgb("+h.rgb.join(",")+")",e.moveTo(h.x,h.y),u=1,c=d.length;c>u;u++)e.lineTo(d[u].x,d[u].y);e.stroke(),d=[],l=e.createLinearGradient(r.x,r.y,s.x,s.y),l.addColorStop(0,"rgb("+r.rgb.join(",")+")"),l.addColorStop(1,"rgb("+s.rgb.join(",")+")"),e.strokeStyle=l,e.beginPath(),e.moveTo(r.x,r.y),e.lineTo(s.x,s.y),e.stroke()}}},e.HotlineRenderer=e.Canvas.extend({_initContainer:function(){e.Canvas.prototype._initContainer.call(this),this._hotline=new t(this._container,this._map)},_update:function(){e.Canvas.prototype._update.call(this),this._hotline.width(this._container.width),this._hotline.height(this._container.height)},_updatePoly:function(e){this._redrawBounds=null;var t=e._parts,n=t.length;n&&(this._drawnLayers[e._leaflet_id]=e,this._updateOptions(e),this._hotline.data(t).draw(this._clear))},_updateOptions:function(e){e.options.hasOwnProperty("color")&&this._hotline.color(e.options.color),null!=e.options.min&&this._hotline.min(e.options.min),null!=e.options.max&&this._hotline.max(e.options.max),null!=e.options.weight&&this._hotline.weight(e.options.weight),null!=e.options.zoomWeight&&this._hotline.zoomWeight(e.options.zoomWeight),null!=e.options.outlines&&this._hotline.outlines(e.options.outlines),e.options.palette&&this._hotline.palette(e.options.palette),e.options.unknownColor&&this._hotline.unknownColor(e.options.unknownColor),e.options.maxGradient&&this._hotline.maxGradient(e.options.maxGradient),e.options.minGradient&&this._hotline.minGradient(e.options.minGradient),e.options.minColorLength&&this._hotline.minColorLength(e.options.minColorLength),e.options.gradientPercent&&this._hotline.gradientPercent(e.options.gradientPercent)}}),e.hotlineRenderer=function(t){return new e.HotlineRenderer(t)};var n=function(t){return e.Browser.canvas?e.hotlineRenderer(t):null};return e.Hotline=e.Polyline.extend({statics:{Renderer:e.hotlineRenderer,renderer:n},options:{renderer:n(),min:0,max:1,palette:{0:"green",.5:"yellow",1:"red"},unknownColor:"#aaa",weight:6,zoomWeight:[{zoom:13,weight:5},{zoom:11,weight:4}],outlines:[{color:"#aaa",weight:4,zoomWeight:[{zoom:13,weight:4},{zoom:11,weight:3}]},{color:"white",weight:3,zoomWeight:[{zoom:13,weight:3},{zoom:11,weight:2}]}],maxGradient:30,minGradient:10,minColorLength:10,gradientPercent:30},getRGBForValue:function(e){return this._renderer._hotline.getRGBForValue(e)},_projectLatlngs:function(t,n,a){var i,o,r=t[0]instanceof e.LatLng,s=t.length;if(r){for(o=[],i=0;s>i;i++)o[i]=this._map.latLngToLayerPoint(t[i]),o[i].z=t[i].alt,a&&a.extend(o[i]);n.push(o)}else for(i=0;s>i;i++)this._projectLatlngs(t[i],n,a)},_simplifyPoints:function(){for(var t=this._parts,n=this.options.smoothFactor,a=0,i=t.length;i>a;a++){for(var o=t[a],r=0,s=o.length;s>r;r++)o[r].cantBeDeleted=!o[r-1]||o[r-1].z!==o[r].z||!o[r+1]||o[r+1].z!==o[r].z;t[a]=e.HotlineUtil.simplify(t[a],n)}},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var n,a,i,o,r,s,l,c=this._parts;for(n=0,i=0,o=this._rings.length;o>n;n++)for(l=this._rings[n],a=0,r=l.length;r-1>a;a++)s=e.HotlineUtil.clipSegment(l[a],l[a+1],t,a,!0),s&&(c[i]=c[i]||[],c[i].push(s[0]),(s[1]!==l[a+1]||a===r-2)&&(c[i].push(s[1]),i++))}},setOpacity:function(e){this._renderer&&this._renderer._hotline&&this._renderer._hotline._canvas&&(this._renderer._hotline._canvas.style.opacity=e)},_clickTolerance:function(){var t,n,a=[];for(t=0,n=this.options.outlines.length;n>t;t++)a.push(this.options.outlines[t].weight);return this.options.weight/2+Math.max.apply(this,a)+(e.Browser.touch?10:0)}}),e.hotline=function(t,n){return new e.Hotline(t,n)},e}),function(e,t){"use strict";function n(a){var i,o,r=!!a,s={$:e.jQuery,direction:"v",barOnCls:"_scrollbar",resizeDebounce:0,event:function(e,t,n,i){a.$(e)[i||"on"](t,n)},cssGuru:!1,impact:"scroller",position:"static"};a=a||{};for(var l in s)a[l]===t&&(a[l]=s[l]);a.$||y("error","no jQuery nor params.$ detected, https://github.com/Diokuz/baron/blob/master/docs/logs/no-jquery-detected.md",a),"absolute"==a.position&&"clipper"==a.impact&&y("error","Simultaneous use of `absolute` position and `clipper` impact values detected. Those values cannot be used together. See more https://github.com/Diokuz/baron/issues/138",a),i=a.$&&this instanceof a.$,a._chain?o=a.root:i?a.root=o=this:o=a.$?a.$(a.root||a.scroller):[];var c=new n.fn.constructor(o,a,r);return c.autoUpdate&&c.autoUpdate(),c}function a(n,a){var i=0;for(n.length!==t&&n!==e||(n=[n]);n[i];)a.call(this,n[i],i),i++}function i(){return(new Date).getTime()}function o(t,n,i){t._eventHandlers=t._eventHandlers||[{element:t.scroller,handler:function(e){t.scroll(e)},type:"scroll"},{element:t.root,handler:function(){t.update()},type:"transitionend animationend"},{element:t.scroller,handler:function(){t.update()},type:"keyup"},{element:t.bar,handler:function(e){e.preventDefault(),t.selection(),t.drag.now=1,t.draggingCls&&u(t.root).addClass(t.draggingCls)},type:"touchstart mousedown"},{element:document,handler:function(){t.selection(1),t.drag.now=0,t.draggingCls&&u(t.root).removeClass(t.draggingCls)},type:"mouseup blur touchend"},{element:document,handler:function(e){2!=e.button&&t._pos0(e)},type:"touchstart mousedown"},{element:document,handler:function(e){t.drag.now&&t.drag(e)},type:"mousemove touchmove"},{element:e,handler:function(){t.update()},type:"resize"},{element:t.root,handler:function(){t.update()},type:"sizeChange"},{element:t.clipper,handler:function(){t.clipperOnScroll()},type:"scroll"}],a(t._eventHandlers,function(e){e.element&&n(e.element,e.type,e.handler,i)})}function r(e,t,n,a){var i="data-baron-"+t+"-id";if("on"==n)e.setAttribute(i,a);else{if("off"!=n)return e.getAttribute(i);e.removeAttribute(i)}}function s(e){var t=new w.prototype.constructor(e);return o(t,e.event,"on"),r(t.root,e.direction,"on",p.length),p.push(t),b++,b>100&&!k.liveTooMany&&(y("warn",["You have too many live baron instances on page ("+b+")!","Are you forget to dispose some of them? All baron instances can be found in baron._instances:"].join(" "),p),k.liveTooMany=!0),p.length>1e3&&!k.allTooMany&&(y("warn",["You have too many inited baron instances on page ("+p.length+")!","Some of them are disposed, and thats good news. but baron.init was call too many times, and thats is bad news. All baron instances can be found in baron._instances:"].join(" "),p),k.allTooMany=!0),t.update(),t}function l(e){var t={};e=e||{};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function c(e){if(this.events&&this.events[e])for(var t=0;t<this.events[e].length;t++){var n=Array.prototype.slice.call(arguments,1);this.events[e][t].apply(this,n)}}var u=("undefined"!=typeof window,e.$),d=n,h=["left","top","right","bottom","width","height"],p=[],f={v:{x:"Y",pos:h[1],oppos:h[3],crossPos:h[0],crossOpPos:h[2],size:h[5],crossSize:h[4],crossMinSize:"min-"+h[4],crossMaxSize:"max-"+h[4],client:"clientHeight",crossClient:"clientWidth",scrollEdge:"scrollLeft",offset:"offsetHeight",crossOffset:"offsetWidth",offsetPos:"offsetTop",scroll:"scrollTop",scrollSize:"scrollHeight"},h:{x:"X",pos:h[0],oppos:h[2],crossPos:h[1],crossOpPos:h[3],size:h[4],crossSize:h[5],crossMinSize:"min-"+h[5],crossMaxSize:"max-"+h[5],client:"clientWidth",crossClient:"clientHeight",scrollEdge:"scrollTop",offset:"offsetWidth",crossOffset:"offsetHeight",offsetPos:"offsetLeft",scroll:"scrollLeft",scrollSize:"scrollWidth"}},m=17,g=15,_=/[\s\S]*Macintosh[\s\S]*\) Gecko[\s\S]*/,v=_.test(e.navigator&&e.navigator.userAgent),y=function(){n.fn.log.apply(this,arguments)},b=0,k={liveTooMany:!1,allTooMany:!1};n._instances=p,n.fn={constructor:function(e,n,i){var o=l(n);o.event=function(e,t,i,o){a(e,function(e){n.event(e,t,i,o)})},this.length=0,a.call(this,e,function(e,a){var c=r(e,o.direction),u=+c;if(u==u&&null!==c&&p[u])i&&y("error","repeated initialization for html-node detected, https://github.com/Diokuz/baron/blob/master/docs/logs/repeated.md",n.root),this[a]=p[u];else{var d=l(o);if(o.root&&o.scroller){if(d.scroller=o.$(o.scroller,e),!d.scroller.length)return console.log("Scroller not found!",e,o.scroller),t}else d.scroller=e;d.root=e,this[a]=s(d)}this.length=a+1}),this.params=o},dispose:function(){var e=this.params;a(this,function(t,n){t.dispose(e),p[n]=null}),this.params=null},update:function(){var e=arguments;a(this,function(t,n){t.update.apply(t,e)})},baron:function(e){return e.root=[],this.params.root&&(e.scroller=this.params.scroller),a.call(this,this,function(t){e.root.push(t.root)}),e.direction="v"==this.params.direction?"h":"v",e._chain=!0,n(e)}};var w={};w.prototype={_debounce:function(e,n){var a,o,r=this,s=function(){if(r._disposed)return clearTimeout(a),a=r=null,t;var l=i()-o;n>l&&l>=0?a=setTimeout(s,n-l):(a=null,e())};return function(){o=i(),a||(a=setTimeout(s,n))}},constructor:function(n){function a(e,t){return h(e,t)[0]}function o(e){var t=this.barMinSize||20;e>0&&t>e&&(e=t),this.bar&&h(this.bar).css(this.origin.size,parseInt(e,10)+"px")}function r(e){if(this.bar){var t=h(this.bar).css(this.origin.pos),n=+e+"px";n&&n!=t&&h(this.bar).css(this.origin.pos,n)}}function s(){return y[this.origin.client]-this.barTopLimit-this.bar[this.origin.offset]}function l(e){return e*s.call(this)+this.barTopLimit}function u(e){return(e-this.barTopLimit)/s.call(this)}function d(){return!1}var h,p,_,y,b,k,w,x,C;if(x=w=i(),h=this.$=n.$,this.event=n.event,this.events={},this.root=n.root,this.scroller=a(n.scroller),this.bar=a(n.bar,this.root),y=this.track=a(n.track,this.root),!this.track&&this.bar&&(y=this.bar.parentNode),this.clipper=this.scroller.parentNode,this.direction=n.direction,this.rtl=n.rtl,this.origin=f[this.direction],this.barOnCls=n.barOnCls,this.scrollingCls=n.scrollingCls,this.draggingCls=n.draggingCls,this.impact=n.impact,this.position=n.position,this.rtl=n.rtl,this.barTopLimit=0,this.resizeDebounce=n.resizeDebounce,this.cursor=function(e){return e["client"+this.origin.x]||(((e.originalEvent||e).touches||{})[0]||{})["page"+this.origin.x]},this.pos=function(e){var n="page"+this.origin.x+"Offset",a=this.scroller[n]?n:this.origin.scroll;return e!==t&&(this.scroller[a]=e),this.scroller[a]},this.rpos=function(e){var t,n=this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client];return t=e?this.pos(e*n):this.pos(),t/(n||1)},this.barOn=function(e){this.barOnCls&&(e||this.scroller[this.origin.client]>=this.scroller[this.origin.scrollSize]?h(this.root).hasClass(this.barOnCls)&&h(this.root).removeClass(this.barOnCls):h(this.root).hasClass(this.barOnCls)||h(this.root).addClass(this.barOnCls))},this._pos0=function(e){_=this.cursor(e)-p},this.drag=function(e){var t=u.call(this,this.cursor(e)-_),n=this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client];this.scroller[this.origin.scroll]=t*n},this.selection=function(e){this.event(document,"selectpos selectstart",d,e?"off":"on")},this.resize=function(){function e(){var e=n.scroller[n.origin.crossOffset],t=n.scroller[n.origin.crossClient],a=0;if(v?a=g:t>0&&0===e&&(e=t+m),e)if(n.barOn(),"scroller"==n.impact){var o=e-t+a;if("static"==n.position){var r=n.$(n.scroller).css(n.origin.crossSize),s=n.clipper[n.origin.crossClient]+o+"px";r!=s&&n._setCrossSizes(n.scroller,s)}else{var l={},u=n.rtl?"Left":"Right";"h"==n.direction&&(u="Bottom"),l["padding"+u]=o+"px",n.$(n.scroller).css(l)}}else{var r=h(n.clipper).css(n.origin.crossSize),s=t+"px";r!=s&&n._setCrossSizes(n.clipper,s)}Array.prototype.unshift.call(arguments,"resize"),c.apply(n,arguments),x=i()}var n=this,a=n.resizeDebounce===t?300:n.resizeDebounce,o=0;i()-x<a&&(clearTimeout(b),o=a),o?b=setTimeout(e,o):e()},this.updatePositions=function(){var e,t=this;t.bar&&(e=(y[t.origin.client]-t.barTopLimit)*t.scroller[t.origin.client]/t.scroller[t.origin.scrollSize],parseInt(C,10)!=parseInt(e,10)&&(o.call(t,e),C=e),p=l.call(t,t.rpos()),r.call(t,p)),Array.prototype.unshift.call(arguments,"scroll"),c.apply(t,arguments),w=i()},this.scroll=function(){var e=this;e.updatePositions(),e.scrollingCls&&(k||e.$(e.root).addClass(e.scrollingCls),clearTimeout(k),k=setTimeout(function(){e.$(e.root).removeClass(e.scrollingCls),k=t},300))},this.clipperOnScroll=function(){this.rtl?this.clipper[this.origin.scrollEdge]=this.clipper[this.origin.scrollSize]:this.clipper[this.origin.scrollEdge]=0},this._setCrossSizes=function(e,t){var n={};n[this.origin.crossSize]=t,n[this.origin.crossMinSize]=t,n[this.origin.crossMaxSize]=t,this.$(e).css(n)},this._dumbCss=function(e){if(!n.cssGuru){var t=e?"hidden":null,a=e?"none":null;this.$(this.clipper).css({overflow:t,msOverflowStyle:a,position:"static"==this.position?"":"relative"});var i=e?"scroll":null,o="v"==this.direction?"y":"x",r={};r["overflow-"+o]=i,r["box-sizing"]="border-box",r.margin="0",r.border="0","absolute"==this.position&&(r.position="absolute",r.top="0","h"==this.direction?r.left=r.right="0":(r.bottom="0",r.right=this.rtl?"0":"",r.left=this.rtl?"":"0")),this.$(this.scroller).css(r)}},this._dumbCss(!0),v){var L="paddingRight",I={},T=e.getComputedStyle(this.scroller)[[L]];this.scroller[this.origin.crossOffset]-this.scroller[this.origin.crossClient];"h"==n.direction?L="paddingBottom":n.rtl&&(L="paddingLeft");var S=parseInt(T,10);S!=S&&(S=0),I[L]=g+S+"px",h(this.scroller).css(I)}return this},update:function(e){return this._disposed&&y("error",["Update on disposed baron instance detected. You should clear your stored baron value for this instance:",this].join(" "),e),c.call(this,"upd",e),this.resize(1),this.updatePositions(),this},dispose:function(e){this._disposed&&y("error",["Already disposed:",this].join(" "),e),o(this,this.event,"off"),r(this.root,e.direction,"off"),"v"==e.direction?this._setCrossSizes(this.scroller,""):this._setCrossSizes(this.clipper,""),this._dumbCss(!1),this.barOn(!0),c.call(this,"dispose"),this._disposed=!0},on:function(e,t,n){for(var a=e.split(" "),i=0;i<a.length;i++)"init"==a[i]?t.call(this,n):(this.events[a[i]]=this.events[a[i]]||[],this.events[a[i]].push(function(e){t.call(this,e||n)}))}},n.fn.constructor.prototype=n.fn,w.prototype.constructor.prototype=w.prototype,n.noConflict=function(){return e.baron=d,n},n.version="2.2.4","undefined"!=typeof module?(module.exports=n,
require("./fix"),require("./pull"),require("./controls"),require("./autoUpdate")):(window.baron=n,u&&u.fn&&(u.fn.baron=n))}(this),function(e,t){var n;n="undefined"!=typeof module?require("./core.js"):e.baron;var a=function(){n.fn.log.apply(this,arguments)},o=function(e){function n(e,n,a){var i=1==a?"pos":"oppos";l<(c.minView||0)&&(n=t),this.$(s[e]).css(this.origin.pos,"").css(this.origin.oppos,"").removeClass(c.outside),n!==t&&(n+="px",this.$(s[e]).css(this.origin[i],n).addClass(c.outside))}function o(e){try{i=document.createEvent("WheelEvent"),i.initWebKitWheelEvent(e.originalEvent.wheelDeltaX,e.originalEvent.wheelDeltaY),p.dispatchEvent(i),e.preventDefault()}catch(e){}}function r(e){var t;for(var n in e)c[n]=e[n];if(s=this.$(c.elements,this.scroller)){l=this.scroller[this.origin.client];for(var a=0;a<s.length;a++)t={},t[this.origin.size]=s[a][this.origin.offset],s[a].parentNode!==this.scroller&&this.$(s[a].parentNode).css(t),t={},t[this.origin.crossSize]=s[a].parentNode[this.origin.crossClient],this.$(s[a]).css(t),l-=s[a][this.origin.offset],h[a]=s[a].parentNode[this.origin.offsetPos],u[a]=u[a-1]||0,d[a]=d[a-1]||Math.min(h[a],0),s[a-1]&&(u[a]+=s[a-1][this.origin.offset],d[a]+=s[a-1][this.origin.offset]),0==a&&0==h[a]||(this.event(s[a],"mousewheel",o,"off"),this.event(s[a],"mousewheel",o));c.limiter&&s[0]&&(this.track&&this.track!=this.scroller?(t={},t[this.origin.pos]=s[0].parentNode[this.origin.offset],this.$(this.track).css(t)):this.barTopLimit=s[0].parentNode[this.origin.offset],this.scroll()),c.limiter===!1&&(this.barTopLimit=0)}var i={element:s,handler:function(){for(var e,t=m(this)[0].parentNode,n=t.offsetTop,a=0;a<s.length;a++)s[a]===this&&(e=a);var i=n-u[e];c.scroll?c.scroll({x1:g.scroller.scrollTop,x2:i}):g.scroller.scrollTop=i},type:"click"};c.clickable&&(this._eventHandlers.push(i),f(i.element,i.type,i.handler,"on"))}var s,l,c={outside:"",inside:"",before:"",after:"",past:"",future:"",radius:0,minView:0},u=[],d=[],h=[],p=this.scroller,f=this.event,m=this.$,g=this;"static"!=this.position&&a("error","Fix plugin cannot work properly in non-static baron position. See more https://github.com/Diokuz/baron/issues/135",this.params),this.on("init",r,e);var _=[],v=[];this.on("init scroll",function(){var e,a,i;if(s){for(var o,r=0;r<s.length;r++)e=0,h[r]-this.pos()<d[r]+c.radius?(e=1,a=u[r]):h[r]-this.pos()>d[r]+l-c.radius?(e=2,a=this.scroller[this.origin.client]-s[r][this.origin.offset]-u[r]-l):(e=3,a=t),i=!1,(h[r]-this.pos()<d[r]||h[r]-this.pos()>d[r]+l)&&(i=!0),e==_[r]&&i==v[r]||(n.call(this,r,a,e),_[r]=e,v[r]=i,o=!0);if(o)for(r=0;r<s.length;r++)1==_[r]&&c.past&&this.$(s[r]).addClass(c.past).removeClass(c.future),2==_[r]&&c.future&&this.$(s[r]).addClass(c.future).removeClass(c.past),3==_[r]?((c.future||c.past)&&this.$(s[r]).removeClass(c.past).removeClass(c.future),c.inside&&this.$(s[r]).addClass(c.inside)):c.inside&&this.$(s[r]).removeClass(c.inside),_[r]!=_[r+1]&&1==_[r]&&c.before?this.$(s[r]).addClass(c.before).removeClass(c.after):_[r]!=_[r-1]&&2==_[r]&&c.after?this.$(s[r]).addClass(c.after).removeClass(c.before):this.$(s[r]).removeClass(c.before).removeClass(c.after),c.grad&&(v[r]?this.$(s[r]).addClass(c.grad):this.$(s[r]).removeClass(c.grad))}}),this.on("resize upd",function(e){r.call(this,e&&e.fix)})};n.fn.fix=function(e){for(var t=0;this[t];)o.call(this[t],e),t++;return this}}(this),function(e){var t;t="undefined"!=typeof module?require("./core"):e.baron;var n=e.MutationObserver||e.WebKitMutationObserver||e.MozMutationObserver||null,a=function(){function e(){o.root[o.origin.offset]?a():t()}function t(){i||(i=setInterval(function(){o.root[o.origin.offset]&&(a(),o.update())},300))}function a(){clearInterval(i),i=null}var i,o=this;if(!this._au){var r=o._debounce(function(){o.update()},300);this._observer=new n(function(){e(),o.update(),r()}),this.on("init",function(){o._observer.observe(o.root,{childList:!0,subtree:!0,characterData:!0}),e()}),this.on("dispose",function(){o._observer.disconnect(),a(),delete o._observer}),this._au=!0}};t.fn.autoUpdate=function(e){if(!n)return this;for(var t=0;this[t];)a.call(this[t],e),t++;return this}}(this),function(){function e(){var e=require("ua-parser-js");return new e(navigator.userAgent).getResult()}function t(){if(0===i){var t=e(),n="Mac OS X"==t.os.name&&"Firefox"==t.browser.name,a="iOS"==t.os.name,o="Android"==t.os.name,r="IE"==t.browser.name&&"8"==t.browser.major;i=a||o||n||r}}function n(e){var t={elements:".fix",outside:"_outside",grad:"_grad",before:"_before",after:"_after",past:"_past",future:"_future",radius:2,limiter:!0,clickable:!0,minView:150},n={update:function(){return e.update&&e.update()},dispose:function(){return e.dispose&&e.dispose()},fix:function(a){return!i&&e.fix&&e.fix(a||t)||n}};return n}var a=$.fn.baron,i=0;$.fn.baron=function(e){if(!isNaN(parseInt(this.data("baronVId"))))return n(a());var o={scroller:this,bar:".track__bar",barOnCls:"_scrollbar"};e=e||{};var r=require("lodash");r.defaults(e,o),t();var s=i?{}:a(e);return n(s)}}(),function(e){function t(e,n){var a=this instanceof t?this:r(t.prototype);return a._init(e,n),a}function n(e){"undefined"!=typeof console&&(console.error?console.error(e):console.log("Error: "+e))}function a(e){return e&&(e._uid||(e._uid=++L))}function i(t,n,a,i,o){if(i=i!==e?i:!1,o=o!==e?o:0,1==n){if(0>t){if(t+=a,0>t)return o}else if(t>=a&&(t-=a,t>=a))return o;return t}if(n>1){if(n>=a)return o;if(i){if(0>t)return a-n;if(t>a-n)return 0}else{if(t>a-n)return a-n;if(0>t)return o}return t}}function o(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/%(\d+)/g,function(e,n){return t[+n-1]})}function r(e){var t=I(e);if(arguments.length>1)for(var n=1,a=arguments.length;a>n;n++){var i=arguments[n];i===Object(i)&&s(t,i)}return t}function s(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function l(e){var t=document.createElement("div");return t.innerHTML=e,1==t.childNodes.length&&1==t.firstChild.nodeType?t.firstChild:t}function c(e,t,n){if(n)for(;e=e.parentNode;){if(e==t)return!0;if(e==n)break}else for(;e=e.parentNode;)if(e==t)return!0;return!1}function u(e,t,n){return e==t||c(e,t,n)}function d(e){for(;e&&e.lastChild;)e.removeChild(e.lastChild);return e}function h(e,t,n){var a=new Image;a.onload=a.onerror=function(e){a.onload=a.onerror=null,t.call(n,"load"==e.type,a)},a.src=e}function p(){this.returnValue=!1}function f(){this.cancelBubble=!0}function m(t){if(t.fixed)return t;var n=r(t);if(n.origEvent=t,t.target||(n.target=t.srcElement||document),t.pageX===e&&t.clientX!==e){var a=document.documentElement,i=document.body;n.pageX=t.clientX+(a.scrollLeft||i&&i.scrollLeft||0)-a.clientLeft,n.pageY=t.clientY+(a.scrollTop||i&&i.scrollTop||0)-a.clientTop}return t.which===e&&t.button!==e&&(1&t.button?n.which=1:4&t.button?n.which=2:2&t.button&&(n.which=3)),t.preventDefault||(n.preventDefault=p),t.stopPropagation||(n.stopPropagation=f),n.fixed=!0,n}if("undefined"!=typeof window){var g=document.createElement("div"),_=g.style,v={};!function(){for(var e=["transform","transition","transitionDuration","perspective"],t=["webkit","Moz","ms","O"],n=t.length,a=0,i=e.length;i>a;a++){var o=e[a];if(o in _)v[o]=o;else{v[o]=!1;for(var r=o.charAt(0).toUpperCase()+o.slice(1),s=0;n>s;s++){var l=t[a]+r;if(l in _){v[o]=l;break}}}}}();var y=v.transform,b=v.transitionDuration,k=!!v.perspective,w=(y&&{transform:"transform",webkitTransform:"-webkit-transform",MozTransform:"-moz-transform",msTransform:"-ms-transform",OTransform:"-o-transform"}[y],function(e){return-1!=e.indexOf("msie")?parseInt(e.split("msie")[1]):!1}(navigator.userAgent.toLowerCase())),x="photor__";t.prototype={constructor:t,_events:null,_params:null,slides:null,current:e,frozen:!1,_thumbsType:e,_thumbsDraggable:e,_touch:null,_drag:null,_mouseOverBControl:!1,_mouseOverBThumbs:!1,_autoplayTimerId:e,element:null,bControl:null,btnPrev:null,btnNext:null,bThumbs:null,bViewport:null,bViewportLayer:null,bThumbsLayer:null,bThumbFrame:null,blSlides:null,blThumbs:null,_bViewportLayerOffsetX:0,_bThumbsLayerOffsetX:0,_bViewportWidth:e,_bViewportLayerWidth:e,_bViewportHeight:e,_bThumbsWidth:e,_bThumbsHeight:e,_bThumbsLayerWidth:e,_init:function(e,t){if(e._photor)throw new TypeError("Photor is already initialized for this element");e._photor=this,this._events={};var n=t&&t.photorPrefix?t.photorPrefix:x,a=this._params=s({viewport:n+"viewport",layer:n+"viewportLayer",slide:n+"viewportLayerSlide",slideImg:n+"viewportLayerSlideImg",slideCaption:n+"viewportLayerSlideCaption",control:n+"viewportControl",next:n+"viewportControlNext",prev:n+"viewportControlPrev",thumbs:n+"thumbs",thumbsLayer:n+"thumbsLayer",thumb:n+"thumbsLayerItem",thumbImg:n+"thumbsLayerItemImg",thumbFrame:n+"thumbsLayerFrame",_single:"_single",_dragging:"_dragging",_animated:"_animated",_freeze:"_freeze",_disabled:"_disabled",_current:"_current",_loading:"_loading",_error:"_error",_html:"_html",_caption:"_caption",_hidden:"_hidden",algorithm:"contain",_auto:"_auto",_center:"_center",_portrait:"_portrait",_landscape:"_landscape",_draggable:"_draggable",modifierPrefix:"_",itemPrefix:"_item",ieClassPrefix:"_ie",current:0,autoplay:!1,loop:!1,duration:300,showThumbs:"thumbs",keyboard:!0,slidesOnScreen:1},t);a.slidesOnScreen>1&&(a.showThumbs=!1),this.element=e,this.bControl=e.querySelector("."+a.control),this.btnPrev=e.querySelector("."+a.prev),this.btnNext=e.querySelector("."+a.next),this.bThumbs=e.querySelector("."+a.thumbs),this.bViewport=e.querySelector("."+a.viewport),this.bViewportLayer=e.querySelector("."+a.layer),this.bThumbsLayer=e.querySelector("."+a.thumbsLayer),this.bThumbFrame=document.createElement("div"),w&&E(e,a.ieClassPrefix+w),E(this.bThumbFrame,a.thumbFrame),this._updateDims();var i=a.data;this.setSlides(i&&i.length?i:this.bViewportLayer),this._bindListeners(),this._bindEvents(),a.autoplay&&(this._autoplayTimerId=setTimeout(this._onAutoplayTimerTick,a.autoplay))},_updateDims:function(){var e=this.bViewport,t=this.bViewportLayer,n=this.bThumbs;this._bViewportWidth=window.getComputedStyle?parseFloat(window.getComputedStyle(e).width,10):e.offsetWidth,this._bViewportLayerWidth=window.getComputedStyle?parseFloat(window.getComputedStyle(t).width,10):e.offsetWidth,this._bViewportHeight=e.offsetHeight,this._bThumbsWidth=n&&n.offsetWidth,this._bThumbsHeight=n&&n.offsetHeight},setSlides:function(e){var t=this._params,n=this.element;this._thumbsType=t.showThumbs,this._thumbsDraggable=!1,A(this.bThumbsLayer,0),A(this.bViewportLayer,0),this._setSlides(e);var a=this.slides.length,o=this.current=i(t.current,t.slidesOnScreen,a,t.loop);1==a?E(n,t._single):P(n,t._single),P(n,t.modifierPrefix+"thumbs"),P(n,t.modifierPrefix+"dots"),this._thumbsType&&E(n,t.modifierPrefix+this._thumbsType),this._updateDOM(),E(this.blSlides[o],t._current),E(this.blThumbs[o],t._current),this._prepareActualSlides(function(){"thumbs"==this._thumbsType?this._loadThumbs(function(){this._updateThumbsDims(),this._moveToCurrentItems(!0)}):this._moveToCurrentItems(!0)})},_setSlides:function(t){var n,a=this.slides=[],i={url:e,thumb:e,html:e,element:null,caption:"",width:e,height:e,thumbDims:null,loaded:e,classes:""},o=!1,s=0;if(T(t))for(n=t.length;n>s;s++){var c=t[s];1==c.nodeType&&(c={element:c}),(c.html||c.element)&&(o=!0),c=r(i,{loaded:c.html||c.element},c),c.html&&!c.element&&(c.element=l(c.html)),a.push(c)}else{var u=t.childNodes;for(n=u.length;n>s;s++){var d=u[s];1==d.nodeType&&("IMG"==d.nodeName?a.push(r(i,{url:d.src,thumb:d.getAttribute("data-thumb")||d.src,caption:d.alt,loaded:!1,classes:d.className})):(o=!0,a.push(r(i,{element:d,loaded:!0}))))}}if(!a.length)throw new RangeError("Requires more slides");o&&"thumbs"==this._thumbsType&&(this._thumbsType="dots")},_updateDOM:function(){var e=this._params,t=this.slides,n=this.bViewportLayer,a=this.bThumbsLayer,i=this.blSlides=[],r=this.blThumbs=[];d(n),d(a);for(var s=document.createDocumentFragment(),c=document.createDocumentFragment(),u=0,h=t.length;h>u;u++){var p=t[u],f=p.element,m=o('<div data-index="%1" class="%2 %3 %4 %5">%6%7</div>',u,e.slide,e.itemPrefix+u,f?e._html:e._loading,p.caption?e._caption:"",f?"":o('<img src="" class="%1 %2" alt="%3">',e.slideImg,p.classes,p.caption),p.caption?o('<div class="%1">%2</div>',e.slideCaption,p.caption):""),g=l(m);f&&g.insertBefore(f,g.firstChild),g.style.left=100*u+"%",i.push(g),s.appendChild(g);var _=o('<span data-rel="%1" class="%2 %3 %4">%5</span>',u,e.thumb,e.itemPrefix+u,p.classes,"thumbs"==this._thumbsType&&(p.thumb||p.url)?o('<img src="%1" data-rel="%2" class="%3">',p.thumb||p.url,u,e.thumbImg):""),v=l(_);r.push(v),c.appendChild(v)}n.appendChild(s),a&&this._thumbsType&&(a.appendChild(c),a&&"thumbs"==this._thumbsType&&a.appendChild(this.bThumbFrame))},_prepareActualSlides:function(e){for(var t=this._params._hidden,n=this.blSlides,a=Math.max(0,this.current-1),i=Math.min(n.length-1,this.current+1),o=a;i>=o;o++)P(n[o],t);this._loadActualSlides(e)},_loadActualSlides:function(e){function t(t,i,r){l++,h(r,function(s,c){if(l--,s){var u=o[t],d=u.firstChild;i.width=c.width,i.height=c.height,i.loaded=!0,P(u,a),this._paintSlide(t),d.src=r}else n("Image wasn't loaded: "+r);!l&&e&&this.element._photor&&e.call(this)},this)}for(var a=this._params._loading,i=this.slides,o=this.blSlides,r=Math.max(0,this.current-1),s=Math.min(i.length-1,this.current+1),l=0,c=r;s>=c;c++){var u=i[c];u.loaded||t.call(this,c,u,u.url)}!l&&e&&e.call(this)},_loadThumbs:function(e){for(var t=this.slides,a=0,i=0,o=t.length;o>i;i++){var r=t[i],s=r.thumb||r.url;s&&(a++,h(s,function(t){a--,t||n("Image wasn't loaded: "+s),!a&&e&&e.call(this)},this))}!a&&e&&e.call(this)},_paintSlide:function(e){var t=this._params,n=this.slides[e],a=n.width,i=n.height,o=this.blSlides[e],r=this._bViewportWidth,s=this._bViewportHeight;r>a&&s>i?(n.algorithm="center",P(o,t._auto),E(o,t._center)):(n.algorithm="auto",P(o,t._center),E(o,t._auto));var l=a/i,c=r/s;l>=c?(n.orientation="landscape",P(o,t._portrait),E(o,t._landscape)):(n.orientation="portrait",P(o,t._landscape),E(o,t._portrait));var u=o.firstChild.style;if("auto"==n.algorithm||"cover"==t.algorithm)if(n.orientation==("cover"==t.algorithm?"portrait":"landscape")){var d=Math.round(i*(r/a));u.top=Math.round((s-d)/2)+"px",u.left="0",u.width=r+"px",u.height=d+"px"}else{var h=Math.round(a*(s/i));u.top="0",u.left=Math.round((r-h)/2)+"px",u.width=h+"px",u.height=s+"px"}else u.top=Math.round((s-i)/2)+"px",u.left=Math.round((r-a)/2)+"px"},_updateThumbsDims:function(){if("thumbs"==this._thumbsType){for(var e=this.slides,t=this.blThumbs,n=t.length;n;){var a=t[--n];e[n].thumbDims={top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}}this._bThumbsLayerWidth=this.bThumbsLayer&&this.bThumbsLayer.offsetWidth,this._thumbsDraggable=this._bThumbsWidth<this._bThumbsLayerWidth}},_moveToCurrentItems:function(e){this._moveToCurrentSlide(e),this._moveToCurrentThumb(e)},_moveToCurrentSlide:function(t){var n;if(n=this._params.slidesOnScreen>1?-1*this._bViewportLayerWidth*this.current:-1*this._bViewportWidth*this.current,this._bViewportLayerOffsetX==n)return this._transitionCallback(),e;if(E(this.element,this._params._animated),this._bViewportLayerOffsetX=n,b){var a=t?"0ms":this._params.duration+"ms";this.bViewportLayer.style[b]=a}if(window.getComputedStyle){var i=window.getComputedStyle(this.bViewportLayer,null),o=parseFloat(i[b]);o||this._transitionCallback()}else this._transitionCallback();A(this.bViewportLayer,n)},_moveToCurrentThumb:function(e){if("thumbs"==this._thumbsType){var t=this.slides[this.current].thumbDims,n=this.bThumbsLayer,a=this.bThumbFrame;if(this._computeThumbsOffsetX(),b){var i=e?"0ms":this._params.duration+"ms";n&&n.style&&(n.style[b]=i),a.style[b]=i}A(n,this._bThumbsLayerOffsetX),D(a,t.left,t.top),a.style.width=t.width+"px",a.style.height=t.height+"px"}},_computeThumbsOffsetX:function(){var e,t=this.slides[this.current].thumbDims;if(this._thumbsDraggable)if(e=(this._bThumbsWidth-t.width)/2-t.left,e>0)e=0;else{var n=this._bThumbsWidth-this._bThumbsLayerWidth;n>e&&(e=n)}else e=0;this._bThumbsLayerOffsetX=e},_bindListeners:function(){C(this,["_onBViewportTouchStart","_onBViewportMouseDown","_onBThumbsTouchStart","_onBThumbsMouseDown","_onDocumentTouchMove","_onDocumentTouchEnd","_onDocumentTouchCancel","_onDocumentMouseMove","_onDocumentMouseUp","_onBViewportLayerTransitionEnd","_onWindowResize","_onBViewportMouseEnter","_onBViewportMouseLeave","_onBThumbsMouseEnter","_onBThumbsMouseLeave","_onDocumentKeydown","_onAutoplayTimerTick"])},_bindEvents:function(){var e=this.bViewport,t=this.bThumbs;this._bindEvent(e,"touchstart",this._onBViewportTouchStart),this._bindEvent(e,"mousedown",this._onBViewportMouseDown),this._bindEvent(e,"dragstart",this._handleDragstart),this._bindEvent(t,"touchstart",this._onBThumbsTouchStart),this._bindEvent(t,"mousedown",this._onBThumbsMouseDown),this._bindEvent(t,"dragstart",this._handleDragstart),this._bindTransitionEnd(this.bViewportLayer,this._onBViewportLayerTransitionEnd),this._bindEvent(window,"resize",this._onWindowResize),this._bindEvent(e,"mouseenter",this._onBViewportMouseEnter),this._bindEvent(e,"mouseleave",this._onBViewportMouseLeave),this._bindEvent(t,"mouseenter",this._onBThumbsMouseEnter),this._bindEvent(t,"mouseleave",this._onBThumbsMouseLeave),this._params.keyboard&&this._bindEvent(document,"keydown",this._onDocumentKeydown)},_onBViewportTouchStart:function(e){this._handleTouchStart(e,this.bViewport,!0)},_onBViewportMouseDown:function(e){1==e.which&&this._handleTouchStart(e,this.bViewport,!1)},_onBThumbsTouchStart:function(e){this._handleTouchStart(e,this.bThumbs,!0)},_onBThumbsMouseDown:function(e){1==e.which&&this._handleTouchStart(e,this.bThumbs,!1)},_handleTouchStart:function(e,t,n){if(!this.frozen&&!this.touch){var a=n?e.touches[0]:e;this._touch={start:{clientX:a.clientX,clientY:a.clientY,timeStamp:e.timeStamp,element:t}},this._observeTouch(n)}},_handleDragstart:function(e){return e.preventDefault&&e.preventDefault(),!1},_observeTouch:function(e){e?(this._bindEvent(document,"touchmove",this._onDocumentTouchMove),this._bindEvent(document,"touchend",this._onDocumentTouchEnd),this._bindEvent(document,"touchcancel",this._onDocumentTouchCancel)):(this._bindEvent(document,"mousemove",this._onDocumentMouseMove),this._bindEvent(document,"mouseup",this._onDocumentMouseUp))},_stopTouchObserving:function(e){e?(this._unbindEvent(document,"touchmove",this._onDocumentTouchMove),this._unbindEvent(document,"touchend",this._onDocumentTouchEnd),this._unbindEvent(document,"touchcancel",this._onDocumentTouchCancel)):(this._unbindEvent(document,"mousemove",this._onDocumentMouseMove),this._unbindEvent(document,"mouseup",this._onDocumentMouseUp))},_onDocumentTouchMove:function(e){this._handleTouchMove(e,!0)},_onDocumentTouchEnd:function(e){this._handleTouchEnd(e,!0)},_onDocumentTouchCancel:function(e){this._completeTouch(e,!0,"touchCancel")},_onDocumentMouseMove:function(e){this._handleTouchMove(e,!1)},_onDocumentMouseUp:function(e){this._handleTouchEnd(e,!1)},_onBViewportLayerTransitionEnd:function(e){var t=e.propertyName;"transform"!=t.slice(-9)&&"left"!=t||this._transitionCallback()},_onWindowResize:function(){this.update()},_onBViewportMouseEnter:function(){this._mouseOverBViewport=!0,this._params.autoplay&&clearTimeout(this._autoplayTimerId)},_onBViewportMouseLeave:function(){this._mouseOverBViewport=!1,this._params.autoplay&&(this._autoplayTimerId=setTimeout(this._onAutoplayTimerTick,this._params.autoplay))},_onBThumbsMouseEnter:function(){this._mouseOverBThumbs=!0},_onBThumbsMouseLeave:function(){this._mouseOverBThumbs=!1},_handleTouchMove:function(t,n){var a=this._touch;if(a){var i=a.start,o=a.clientX===e?i:a;a.prev={clientX:o.clientX,clientY:o.clientY,timeStamp:o.timeStamp};var r=n?t.touches[0]:t;if(a.clientX=r.clientX,a.clientY=r.clientY,a.shiftX=a.clientX-i.clientX,a.shiftY=a.clientY-i.clientY,a.timeStamp=t.timeStamp,n&&t.touches.length>1)return this._completeTouch(t,!0,"multitouch"),e;var s,l=this._drag,c=this.bViewportLayer,u=this.bThumbsLayer;if(l)s=l.targetLayer;else{if(n&&Math.abs(a.shiftX)<Math.abs(a.shiftY))return this._completeTouch(t,!0,"scroll"),e;s=i.element==this.bViewport?c:u,l=this._drag={start:{targetLayerOffset:M(s)},targetLayer:s}}t.preventDefault();var d=!1;if(s==c?y&&(E(this.element,this._params._dragging),d=!0):this._thumbsDraggable&&(d=!0),d){var h=l.start.targetLayerOffset+a.shiftX;if(s==u||!this._params.loop)if(h>0)h/=3;else if(0>h){var p;p=s==c?-1*this._bViewportWidth*(this.slides.length-1):this._bThumbsWidth-this._bThumbsLayerWidth,p>h&&(h=p+(h-p)/3)}s==c?this._bViewportLayerOffsetX=h:this._bThumbsLayerOffsetX=h,b&&(s.style[b]="0s"),A(s,h)}}},_handleTouchEnd:function(e,t){this._completeTouch(e,t,"touchEnd")},_completeTouch:function(e,t,n){this._stopTouchObserving(t);var a=this._params,i=this._touch,o=i.start,r=i.end={},s=this.bViewport,l=t?e.touches[0]||i.prev||o:e;r.clientX=l.clientX,r.clientY=l.clientY,r.shiftX=r.clientX-o.clientX,r.shiftY=r.clientY-o.clientY,r.timeStamp=e.timeStamp,this._drag?o.element==s?(y&&P(this.element,a._dragging),"touchEnd"==n?this._completeSlidesDrag():this._moveToCurrentSlide()):Math.abs(r.shiftX)>5||Math.abs(r.shiftY)>5?this._completeThumbsDrag():this._handleThumbsTap(e):"touchEnd"==n&&(o.element==s?u(e.target,this.btnPrev,s)?(e.preventDefault(),this.prev(a.loop)):u(e.target,this.btnNext,s)&&(e.preventDefault(),this.next(a.loop)):this._handleThumbsTap(e)),this._touch=null,this._drag=null},_completeSlidesDrag:function(){var e=this._touch,t=e.start,n=e.end,a=n.timeStamp-t.timeStamp,i=Math.abs(n.shiftX),o=Math.abs(n.shiftY);if(i>=o&&(250>a||i>=this._bViewportLayerWidth/5)){var r,s=Math.max(Math.round(i/this._bViewportLayerWidth),1);if(r=this._params.loop?this.current+(n.shiftX>0?-s:s):n.shiftX>0?Math.max(0,this.current-s):Math.min(this.current+s,this.slides.length-1),this.go(r))return}this._moveToCurrentSlide()},_completeThumbsDrag:function(){if(this._thumbsDraggable){var e=this._touch,t=e.prev,n=e.end,a=n.clientX-t.clientX,i=0>a?-1:1,o=Math.abs(a/(n.timeStamp-t.timeStamp)),r=i*Math.pow(10*o,3)+this._bThumbsLayerOffsetX;if(r>0)r=0;else{var s=this._bThumbsWidth-this._bThumbsLayerWidth;s>r&&(r=s)}this._bThumbsLayerOffsetX=r,b&&(this.bThumbsLayer.style[b]=this._params.duration+"ms"),A(this.bThumbsLayer,r)}},_handleThumbsTap:function(e){for(var t=e.target;t!=this.bThumbs;){if(t.hasAttribute("data-rel")){e.preventDefault(),this.go(+t.getAttribute("data-rel"));break}if(!(t=t.parentNode))break}},_onDocumentKeydown:function(e){if(document.activeElement==document.body&&!e.target.attributes.contenteditable)switch(e.which||e.keyCode){case 32:case 39:this.next(this._params.loop);break;case 37:this.prev(this._params.loop)}},_onAutoplayTimerTick:function(){this.go(this.current+1==this.slides.length?0:this.current+1)},update:function(){this._updateDims(),this._updateThumbsDims();for(var e=this.slides,t=e.length;t;)!e[--t].element&&e[t].loaded&&this._paintSlide(t);this._moveToCurrentItems(!0)},go:function(e){if(this.frozen)return!1;var t=this._params;t.autoplay&&!this._mouseOverBViewport&&(clearTimeout(this._autoplayTimerId),this._autoplayTimerId=setTimeout(this._onAutoplayTimerTick,t.autoplay));var n=this.slides.length,a=this.current;if(e=i(e,t.slidesOnScreen,n,t.loop,!1),e==a||e===!1)return!1;var o=t._current;return P(this.blSlides[a],o),P(this.blThumbs[a],o),a=this.current=e,E(this.blSlides[a],o),E(this.blThumbs[a],o),this._prepareActualSlides(),this._moveToCurrentItems(),!0},canPrev:function(){return this.current>0},canNext:function(){return this.current<this.slides.length-1},prev:function(e){if(this.frozen)return!1;var t=this.current-1;if(!(0>t)||e)return this.go(t)},next:function(e){if(this.frozen)return!1;var t=this.current+1;if(t!=this.slides.length||e)return this.go(t)},freeze:function(){this.frozen=!0},unfreeze:function(){this.frozen=!1},_bindEvent:function(e,t,n){if(e){var i=[a(e),t,a(n)].join("-");if(!this._events.hasOwnProperty(i))if(e.addEventListener)e.addEventListener(t,n,!1),this._events[i]={target:e,type:t,listener:n};else{var o=function(t){n.call(e,m(t||window.event))};o._inner=n,e.attachEvent("on"+t,o),this._events[i]={target:e,type:t,listener:o}}}},_bindTransitionEnd:function(e,t){for(var n=["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd"],a=0,i=n.length;i>a;a++)this._bindEvent(e,n[a],t)},_bindDragstart:function(e,t,n){if(e)for(var a=0,i=e.length;i>a;a++)this._bindEvent(e[a],t,n)},_unbindEvent:function(e,t,n){var i=[a(e),t,a(n)].join("-");this._events.hasOwnProperty(i)&&(e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,this._events[i].listener),delete this._events[i])},_transitionCallback:function(){var e=this._params,t=e._hidden,n=this.blSlides;P(this.element,e._animated);for(var a=Math.max(0,this.current-1),i=Math.min(n.length-1,this.current+1),o=0,r=n.length;r>o;o++)(a>o||o>i)&&E(n[o],t);e.onShow&&e.onShow.call(this)},destroy:function(){clearTimeout(this._autoplayTimerId);var e=this._events;for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];n.target.removeEventListener?n.target.removeEventListener(n.type,n.listener,!1):n.target.detachEvent("on"+n.type,n.listener),delete e[t]}this.element._photor=null}};var C,L=0,I=Object.create||function(e){function t(){}return t.prototype=e,new t},T=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};C=Function.prototype.bind?function(e,t){for(var n=0,a=t.length;a>n;n++)e[t[n]]=e[t[n]].bind(e)}:function(e,t){for(var n=0,a=t.length;a>n;n++)!function(e,t){var n=e[t];e[t]=function(){return n.apply(e,arguments)}}(e,t[n])};var S,E,P;if(g.classList)S=function(e,t){return e.classList.contains(t)},E=function(e,t){e.classList.add(t)},P=function(e,t){e.classList.remove(t)};else{var j=/\S+/g;S=function(e,t){return-1!=(e.className.match(j)||[]).indexOf(t)},E=function(e,t){var n=e.className.match(j)||[];-1==n.indexOf(t)&&(n.push(t),e.className=n.join(" "))},P=function(e,t){var n=e.className.match(j)||[],a=n.indexOf(t);-1!=a&&(n.splice(a,1),e.className=n.join(" "))}}var M,A,D;if(y){var R=/\-?[0-9\.]+/g;M=function(e){var t=window.getComputedStyle(e,null)[y].match(R);return t?parseFloat(t[t.length>6?13:4],10):0},A=function(t,n,a){a===e&&(a="px"),t&&t.style&&(t.style[y]="translate("+n+a+", 0)"+(k?" translateZ(0)":""))},D=function(t,n,a,i){i===e&&(i="px"),t.style[y]="translate("+n+i+", "+a+i+")"+(k?" translateZ(0)":"")}}else M=function(e){var t=window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle;return parseFloat(t.left,10)},A=function(t,n,a){a===e&&(a="px"),t.style.left=n+a},D=function(t,n,a,i){i===e&&(i="px"),t.style.top=a+i,t.style.left=n+i};g=null,_=null,"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=t:exports.Photor=t:window.Photor=t,"function"==typeof jQuery&&(jQuery.fn.photor=function(n,a){if("string"!=typeof n&&(a=n,n=e),n){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){this._photor&&this._photor[n].apply(this._photor,i)})}return this.each(function(){t(this,a)})})}}(),function(e){function t(e,t,n,a){3==arguments.length&&"boolean"!=typeof n&&(a=n,n=!1);var i;return function(){var o=arguments;a=a||this,n&&!i&&e.apply(a,o),clearTimeout(i),i=setTimeout(function(){n||e.apply(a,o),i=null},t)}}function n(t,a){var i=this instanceof n?this:e.extend({},n.prototype),o=i,r=e.extend({scroller:".yostick__scroller",section:".yostick__section",sectionContent:".yostick__list",sectionHeaderWrapper:".yostick__section-header",sectionHeader:".yostick__section-header-in",sectionIsCollapsed:"_collapsed",sectionTitleIsSticked:"_sticked",sectionTitleIsHustled:"_hustled",collapseOnClick:!0},a);o.params=r,o.root=t,o.elements={scroller:t.find(r.scroller),sections:t.find(r.section)},o.data=o._getData(!0),o.listeners=[],o._getHandlers(),o._bindListeners()}if("undefined"!=typeof window){var a={_getHandlers:function(){var n=this;n.listeners.push({eventType:"scroll",selector:n.params.scroller,handler:function(){n._onScroll()}}),n.listeners.push({eventType:"resize",selector:"html, body",handler:t(n.update,1e3)}),n.params.collapseOnClick&&n.listeners.push({eventType:"click",selector:n.params.sectionHeader,handler:function(){var t=e(this);n._onCollapse(t)}})},_bindListeners:function(){for(var t=this,n=0,a=t.listeners.length;a>n;n++)e(t.listeners[n].selector).on(t.listeners[n].eventType,t.listeners[n].handler)},_unbindListeners:function(){for(var t=this,n=0,a=t.listeners.length;a>n;n++)e(t.listeners[n].selector).off(t.listeners[n].eventType,t.listeners[n].handler);t.listeners=[]},_getData:function(t){var n=this,a=[];return n.elements.sections.each(function(i){var o=e(this),r=o.find(n.params.sectionHeaderWrapper),s=o.find(n.params.sectionHeader);a[i]={element:s,position:r[0].offsetTop,width:r.outerWidth(),height:r.outerHeight()},t&&o.attr("data-yostick-section-id",i)}),a},_onScroll:function(){var e=this,t=e.elements.scroller.scrollTop();e._apply(e._getCurrentSection(t),t)},_getCurrentSection:function(e){for(var t,n,a=this,i=0,o=a.data.length;o>i;i++)if(t=a.data[i],n=a.data[i+1],t.position<e&&(!n||n.position>e))return i},_apply:function(e,t){for(var n,a,i,o=this.params,r=this.data[e],s=this.data[e+1],l=0,c=this.data.length;c>l;l++)a=[],l==e?(i=0,a.push(o.sectionTitleIsSticked),s&&s.position<t+r.height&&(i=s.position-t-r.height,a.push(o.sectionTitleIsHustled)),n={position:"absolute",top:0,width:this.data[l].width+"px",transform:"translateY("+i+"px)"}):n={position:"relative",top:"auto",transform:"none"},this.data[l].element.removeClass([o.sectionTitleIsSticked,o.sectionTitleIsHustled].join(" ")).addClass(a.join(" ")).css(n)},_onCollapse:function(e){var t,n,a=this,i=a.elements.scroller,o=i.scrollTop(),r=e.closest(a.params.section),s=+r.attr("data-yostick-section-id"),l=o;r.hasClass(a.params.sectionIsCollapsed)?r.removeClass(a.params.sectionIsCollapsed):r.addClass(a.params.sectionIsCollapsed),a.data=a._getData(),t=a.data[s],n=a.data[s+1],t.position<o?l=t.position:n&&n.position<o+t.height&&(l=n.position-o-t.height),i.scrollTop(l),a._apply(a._getCurrentSection(l),l),a.params.onCollapse&&a.params.onCollapse()},update:function(){var e,t=this;t.elements={scroller:t.root.find(t.params.scroller),sections:t.root.find(t.params.section)},t._unbindListeners(),t._getHandlers(),t._bindListeners(),t.data=t._getData(!0),e=t.elements.scroller.scrollTop(),t._apply(t._getCurrentSection(e),e)},destroy:function(){var t=this;t._unbindListeners(),t.elements.sections.each(function(){var n=e(this);n.removeAttr("data-yostick-section-id").find(t.params.sectionHeader).removeClass([t.params.sectionIsCollapsed,t.params.sectionTitleIsSticked,t.params.sectionTitleIsHustled].join(" ")).attr("style","")}),delete t.root[0].yostick}};n.prototype=a,window.yostick=n,e.fn.yostick=function(t){var i=arguments;return a[t]?this.each(function(){var e=this&&this.yostick;e&&a[t].apply(e,Array.prototype.slice.call(i,1))}):"object"!=typeof t&&t?void e.error("Unknown method: "+t):this.each(function(){this.yostick=new n(e(this),i[0])})}}}(jQuery),function(e){DG.Browser.mobileWebkit=!1,L.Map.Drag.include({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new L.Draggable(e._mapPane,e._container,!1,e),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}this._draggable.enable()}}),L.Draggable.include({map:null,offset:null,initialize:function(e,t,n,a){this._element=e,this._dragStartTarget=t||e,this._preventOutline=n,this.map=a,this.offset=this.map&&this.map.options.offsetInPixels||0},_changeOffsetByBounds:function(e){if(this.map&&this.map.options.cityBounds){var t=this.map.options.cityBounds,n=this._startPos.add(e).subtract(this._newPos),a=this.map.project(this.map.getCenter()).subtract(n),i=this.map.project(t.getSouthWest()),o=this.map.project(t.getNorthEast()),r=0,s=0;return a.x+this.offset>o.x&&n.x<0?r=Math.floor(o.x-a.x-this.offset):a.x+this.offset<i.x&&n.x>0&&(r=Math.ceil(i.x-a.x-this.offset)),
a.y<o.y&&n.y>0?s=Math.ceil(o.y-a.y):a.y>i.y&&n.y<0&&(s=Math.floor(i.y-a.y)),e.x-=r,e.y-=s,{x:r,y:s}}return e},_onMove:function(e){if(e.touches&&e.touches.length>1)return void(this._moved=!0);var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new L.Point(t.clientX,t.clientY),a=n.subtract(this._startPoint);if((a.x||a.y)&&!(L.Browser.touch&&Math.abs(a.x)+Math.abs(a.y)<3)){L.DomEvent.preventDefault(e);var i=this._changeOffsetByBounds(a);this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=L.DomUtil.getPosition(this._element).subtract(a),L.DomUtil.addClass(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,L.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(a),this._moving=!0,L.Util.cancelAnimFrame(this._animRequest),i&&(i.x||i.y)?this._updatePosition():this._animRequest=L.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)}}}),L.Marker.addInitHook(function(){this.on({dragstart:function(){this._map.fire("dragGeneral"),this._map._onlineData.tooltipEnable=!1,this._map._onlineData.geocoderEnable=!1},dragend:function(){var e=this._map;setTimeout(function(){e._onlineData.tooltipEnable=!0,e._onlineData.geocoderEnable=!0},0)}},this)}),L.Map.addInitHook(function(){this.on({dragstart:function(){this.fire("dragGeneral"),this._onlineData.tooltipEnable=!1,this._onlineData.geocoderEnable=!1},dragend:function(){this._onlineData.tooltipEnable=!0,this._onlineData.geocoderEnable=!0}},this)}),L.Map.include({_onlineData:{tooltipEnable:!0,geocoderEnable:!0},isGeocoderEnabled:function(){return this._onlineData.geocoderEnable},isTooltipEnabled:function(){return this._onlineData.tooltipEnable},_limitOffset:function(e,t){t=t||this.options.cityBounds;var n=e;if(t){var a=this.options.offsetInPixels,i=this.project(this.getCenter()),o=this.project(t.getSouthWest()),r=this.project(t.getNorthEast()),s=i.x+a+e.x,l=i.y+e.y,c=0,u=0;s>r.x?c=Math.floor(r.x-s):s<o.x&&(c=Math.ceil(o.x-s)),l<r.y?u=Math.ceil(r.y-l):l>o.y&&(u=Math.floor(o.y-l)),n.x+=c,n.y+=u}return n},checkCenter:function(e,t){var n=L.latLng(e.lat,e.lng)||this.getCenter();if(this.options.cityBounds&&e){if(t==this._zoom)return n;t--;var a=this.unproject(L.point(0,0),t).lng-this.unproject(L.point(this.options.offsetInPixels,0),t).lng,i=this.options.cityBounds,o=i.getSouthWest(),r=i.getNorthEast(),s=0,l=0;n.lng>r.lng?s=-(n.lng-a/2-r.lng):n.lng-a/2<o.lng&&(s=o.lng-n.lng+a/2),n.lat>r.lat?l=-(n.lat-r.lat):n.lat<o.lat&&(l=o.lat-n.lat),(s||l)&&(n.lng+=s,n.lat+=l)}return n},_tryAnimatedZoom:function(e,t,n){if(e=this.checkCenter(e,t),this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var a=this.getZoomScale(t),i=this._getCenterOffset(e)._divideBy(1-1/a);return n.animate===!0||this.getSize().contains(i)?(L.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(e,t,!0)},this),!0):!1}})}(window),function(e,t){function n(e){var t=RegExp(i,"g");return e.replace(t," ")}function a(e,t){var n=!0;if(e=e||[],t=t||[],!e.length||!t.length)return!(e.length||t.length);if(e.length==t.length){for(var a=0;a<e.length;a++)n=n&&e[a].text==t[a].text&&e[a].type==t[a].type;return n&&e.length==t.length}}var i=String.fromCharCode(160),o={input:".surt__input",suggest:".surt__suggests",suggestItemCls:"surt__suggests-item",aunt:99},r=function(e){function t(e,t){if(!e||1!=e.nodeType)throw Error("Surt: html element "+t+" not found or it has wrong nodeType")}var n;e=e||{};for(var a in o)e[a]||(e[a]=o[a]);if(e.root=this[0],e.root=$(e.root)[0],t(e.root,"params.root"),e.input&&(e.input=$(e.input,e.root)[0]),e.input||(e.input=$('[contenteditable="true"]',e.root)),t(e.input,"params.input"),"true"==$(e.root).attr("data-surt-inited"))throw Error("Surt: already initialized");return n=new r.fn.constructor(e)};r.fn={constructor:function(e){function n(){clearTimeout(r._upTimer),r._upTimer=setTimeout(function(){r._pressedKeys=0},300)}function a(n,a){var i=r.args(),o=r.params.selectionCls?i.suggest:t;i.kit=r.suggest[r._activeSuggest],r.set({kit:i.kit,suggest:o},!0),e.pick&&e.pick(i.kit,n,a),r.markSuggest(-1),r.scroll()}function i(e){return 8==e||32==e||46==e||e>47&&91>e||e>95&&112>e||e>159&&177>e||e>187&&193>e||e>218&&223>e||e>256}function o(e){return 37==e||39==e||16==e||17==e||18==e||91==e||35==e||36==e||13==e||8==e||46==e}var r=this,s=e.root;e=e||{},this.params=e,this.inputNode=$(e.input,s)[0],this.root=$(e.root,s)[0],this.suggestNode=$(e.suggest,s)[0],this.cloneNode=$(e.clone,s)[0],this.hintNode=$(e.hint,s)[0],this.delimiter=e.delimiter||"",this.placeholder=e.placeholder||"",this._submitEvents=e.events||["enter"],this._pressedKeys=0,this._time=(new Date).getTime(),this._events={},this.kit=[],this._activeSuggest=-1,$(this.root).attr("data-surt-inited",!0),this.updateHint(),$(this.inputNode).on("keyup.surt",function(n){var s,l=n.keyCode;if(27==l)return n.stopPropagation(),t;if(r._pressedKeys--,r._pressedKeys<0&&(r._pressedKeys=0),(40!=l&&38!=l||!$(r.root).hasClass(e.suggestCls))&&(229!=l||(l=r.text().charCodeAt(r.text().length-1),l==l))){if(r.suggest&&r.suggest[r._activeSuggest]&&!o(l)){var c=r.text(),u=c.charAt(c.length-1);" "==u&&(u=""),a(!1,n);var d=r.text()+r.delimiter+" "+u;r.text(d),r.restoreCursor(d.length)}r.updateInput(),r.updateHint(),s=r.args(),e.change&&i(l)&&e.change(n,s)}}).on("keydown.surt input.surt paste.surt",function(t){var o,s,l=t.keyCode;if("keydown"==t.type&&i(l)&&(r._pressedKeys++,n()),l&&!i(l)?r._pressedKeys=0:$(r.root).removeClass(r.params.placeholderCls),13==l){t.preventDefault();var c=!0;-1!=r._activeSuggest&&r.suggest[r._activeSuggest][0].incomplete_query&&(c=!1);var u=$(r.root).hasClass(e.suggestCls)&&$(r.root).find("."+e.suggestItemCurrentCls).length;return u&&a(c,t),c&&r.params.submit&&-1!=$.inArray("enter",r._submitEvents)&&r.params.submit(t,u),$(r.root).removeClass(e.suggestCls),$(r.root).removeClass(e.autocompleteCls),r.markSuggest(-1),!1}if(40==l)return o=0,r._activeSuggest>=0&&r.suggest&&(o=r._activeSuggest<r.suggest.length-1?r._activeSuggest+1:0),r.markSuggest(o),!1;if(38==l)return o=r.suggest&&r.suggest.length-1,r._activeSuggest>=0&&r.suggest&&(o=r._activeSuggest>0?r._activeSuggest-1:r.suggest.length-1),r.markSuggest(o),!1;if(39==l){var d=r.text().length;if(r.getCursor()>=d&&r.suggest){var h=$(r.root).hasClass(r.params.autocompleteCls)||-1!=r._activeSuggest,p=-1==r._activeSuggest?0:r._activeSuggest;h&&(s=r.args(),s.kit=r.suggest[p],r.set(s,!0),r.params.submit&&-1!=$.inArray("auto",r._submitEvents)&&r.params.submit(t,!0),r.suggest&&r.suggest.length&&r.params.complete&&r.params.complete())}}27==l&&($(r.root).removeClass(r.params.suggestCls),t.preventDefault())}).on("paste.surt",function(){setTimeout(function(){r.parse()},0)}).on("focus.surt click.surt",function(){var e=!$(r.root).hasClass(r.params.suggestCls);$(r.root).addClass(r.params.stateFocusCls),r.suggest&&r.suggest.length&&$(r.root).addClass(r.params.suggestCls),r.updateHint(),e&&r.params.show&&r.params.show(r._suggestExist)}).on("blur.surt",function(){$(r.root).removeClass(r.params.stateFocusCls),$(r.root).removeClass(r.params.readyCls),$(r.root).removeClass(r.params.autocompleteCls),$(r.root).removeClass(r.params.suggestCls)}),$(this.root).on("mousedown.surt","."+r.params.suggestItemCls,function(t){var n=$("."+e.suggestItemCls),i=n.index($(this));if(r.suggest&&r.suggest[i]){var o=-1!=$.inArray("click",r._submitEvents);r._activeSuggest=i,a(o,t),r.params.submit&&o?r.params.submit(t,!0):r.params.change&&r.params.change(t,r.args()),$(t.target).closest(r.params.suggestItemCls).length||$(r.root).removeClass(r.params.suggestCls).removeClass(r.params.autocompleteCls)}})},semanticChanged:function(e){return!a(e,this.kit)},get:function(){return this.kit},set:function(e,n){if(e=e||{},!(this._pressedKeys>0)){e.kit&&e.kit.length===t&&(e.kit=[e.kit]),this.saveCursor();var i=a(e.kit,this.kit);e.kit&&(this.kit=e.kit),i&&!n||this.updateKit(n),e.suggest&&(this.suggest=e.suggest,this.updateSuggest()),this.updateHint(),this.restoreCursor()}},setKit:function(e){this.kit=e,this.updateKit()},update:function(){this.updateKit(),this.updateSuggest(),this.updateHint()},updateInput:function(){var e=this.parse(),t=this.brick(e),n=this.getTail(t);(this.semanticChanged(t)||n)&&(this.setKit(t),n&&"text"!=this.params.inputMode&&($(this.inputNode).append(n.replace(" ","&nbsp;")),this.restoreCursor(999)))},updateKit:function(e){var t=[],n=this.params.tokenCls,a=this.params.textCls||n,i="",o="";if(this.kit){this.saveCursor();for(var r=0;r<this.kit.length;r++){var s=this.trim(this.kit[r].text);this.textMode()||("text"==this.kit[r].type&&a?(i='<div class="'+a+'">',o="</div>"):n&&(i='<div class="'+n+" _type_"+this.kit[r].type+'">',o="</div>"),s=i+s+o),t.push(s)}t=t.join(this.delimiter+" "),("text"!=this.params.inputMode||e)&&(this.html(t),this.restoreCursor())}},updateSuggest:function(){var e,t=[],n=this.params.tokenCls,a=this.params.textCls||n,i=!this._suggestExist;if(this._suggestExist=!(!this.suggest||!this.suggest.length),this.suggest){var o=!(i^this._suggestExist);o&&this.params.show&&this.params.show(this._suggestExist);for(var r=0;r<this.suggest.length;r++){for(var s=[],l=0;l<this.suggest[r].length;l++){var c=this.suggest[r][l].html||this.suggest[r][l].text;c=this.trim(c),this.params.selectionCls&&(c=this.parser.replace.call(this,c)),"text"!=this.suggest[r][l].type?(n&&(c='<div class="'+n+" _type_"+this.suggest[r][l].type+'">'+c+"</div>"),s.push(c)):(a&&(c='<div class="'+a+'">'+c+"</div>"),s.push(c))}e=s.length,s=s.join(this.delimiter+" ");var u="";this.params.suggestItemCountCls&&(u=" "+this.params.suggestItemCountCls+e),t.push('<li class="'+this.params.suggestItemCls+u+'">'+s+"</li>"),this._activeSuggest=-1}e=t.length,t=t.join(""),this.suggestNode&&(t?$(this.root).addClass(this.params.suggestCls):$(this.root).removeClass(this.params.suggestCls),this.suggestNode.innerHTML=t)}},updateHint:function(){this.updateAutocomplete(),this.text()||($(this.root).addClass(this.params.placeholderCls).removeClass(this.params.autocompleteCls),this.updatePlaceholder())},updateAutocomplete:function(){function e(){$(i.hintNode).html(""),$(i.cloneNode).html(""),$(i.root).removeClass(i.params.autocompleteCls)}var t=-1==this._activeSuggest?0:this._activeSuggest,n=this.suggest&&this.suggest.length&&this.suggest[t],a=this.text(),i=this;if(this.hintNode)if($(this.root).removeClass(this.params.placeholderCls),this.kit&&this.kit.length&&this.cloneNode)if(n&&n.length){var o,r,s=(this.kit[this.kit.length-1].text,0);if(o=[],this.suggest[0].length>s)for(var l=s;l<this.suggest[t].length;l++)o.push(this.suggest[t][l].text);o=o.join(this.delimiter+" "),o==a?$(this.root).addClass(this.params.readyCls):(r=0==o.toLowerCase().indexOf(a.toLowerCase()),$(this.root).removeClass(this.params.readyCls)),-1!=this._activeSuggest&&(this.hintNode.innerHTML=o.slice(a.length)),this.cloneNode.innerHTML=this.html(),$(this.root).hasClass(this.params.suggestCls)&&r&&o.length<this.params.aunt?$(this.root).addClass(this.params.autocompleteCls):e()}else e();else e()},updatePlaceholder:function(e){this.placeholder=e||this.placeholder,$(this.hintNode).html(this.placeholder)},query:function(e){var t="";e=e||this.kit;for(var a=0;a<e.length;a++)a>0&&(t+=" "),t+=e[a].text;return n(t)},text:function(e){return e?(this.html(e),t):n($(this.inputNode).text()||$(this.inputNode).val())},html:function(e){var n=$(this.inputNode);return e?("INPUT"==this.inputNode.tagName?n.val(e):n.html(e),this.scroll(),t):n.html()||this.text()},scroll:function(){this.inputNode.scrollLeft=this.inputNode.scrollWidth},args:function(){var e={};return e.kit=this.kit,e.suggest=this.suggest||[],e.text=this.text(),e},parse:function(e){var t=e||this.text();return this.trailingSpace=" "===t[t.length-1],newKit=this.parser(this.kit,t),newKit},invalidate:function(e){var t=this.parse(e);this.kit=t},brick:function(e){var t=!0,n=this.text(),a=[];if(e)for(var i=0;i<e.length;i++){var o=this.suggest&&this.suggest[0]&&this.suggest[0][i];t=t&&o&&e[i].text.toLowerCase()==o.text.toLowerCase(),a.push(o)}return t&&n[n.length-1]==this.delimiter?a:e},markSuggest:function(e){var n=$("."+this.params.suggestItemCls,this.params.root),a=this.params.suggestItemCurrentCls;e===t&&(e=this._activeSuggest),n.removeClass(a),e>=0&&(n.eq(e).addClass(a),this._activeSuggest=e,this.updateHint()),$(this.root).addClass(this.params.placeholderCls),this._activeSuggest=e},getTail:function(e){var t,n=this.text(),a=[];if(e=e||this.kit)for(var i=0;i<e.length;i++)a.push(e[i].text);return a=a.join(this.delimiter+" "),0==n.indexOf(a)&&(t=n.substr(a.length,n.length)),t},minimize:function(){$(this.root).removeClass(this.params.suggestCls)},dispose:function(){$(this.root).attr("data-surt-inited","disposed"),$(this.root).off("surt"),clearTimeout(this._upTimer)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},textMode:function(){return"INPUT"==this.inputNode.tagName||"text"==this.params.inputMode}},r.fn.constructor.prototype=r.fn,$.fn.surt=r,r.version="0.3.0"}(this),function(e,t){function n(e){var t="";if(e)for(var n=0;n<e.length;n++)n>0&&(t+=" "),t+=e[n].text;return t}var a=function(e,a){function i(e){"text"==e.type&&o.length&&"text"==o[o.length-1].type?o[o.length-1].text+=" "+e.text:o.push(e),s=r(s.replace(e.text,""))}var o=[],r=this.trim,s=a;if(this.delimiter&&(s=s.replace(RegExp(this.delimiter,"g")," ")),s=s.replace(RegExp("  ","g")," "),n(e)===s)return e;if(e)for(var l=0;l<e.length;l++){var c=s.indexOf(e[l].text),u=s[c-1],d=s[c+e[l].text.length];if((" "!==d&&d!==t||" "!==u&&u!==t)&&(c=-1),0==c)i(e[l]);else if(c>0){var h=r(s.substring(0,c));i({text:h,type:"text"}),i(e[l])}}return s=r(s),s&&i({text:s,type:"text"}),o};a.replace=function(e){function t(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}var n=t(this.text());return n="((>[^<]*|^[^<>]*))("+n+")([w -]*)",e.replace(RegExp(n,"i"),'$1<span class="'+this.params.selectionCls+'">$3</span>$4')},"undefined"!=typeof module?module.exports=a:$.fn.surt.fn.parser=a}(this),function(){function e(e,t){for(var n=0,a=0;a<e.childNodes.length;a++){var i=$(e.childNodes[a]).text().length;if(n+=i,n>=t)return{child:e.childNodes[a],n:t-(n-i)}}return 0>t&&(n=0),{child:e.childNodes[e.childNodes.length-1],n:n}}var t=$.fn.surt;t.fn.getCursor=function(){var e;if("INPUT"==this.inputNode.tagName)e=this.inputNode.selectionEnd;else{if(!window.getSelection)return;var t=window.getSelection();if(!t.anchorNode)return;var n=t.getRangeAt(0),a=n.startContainer,i=n.startOffset,o=a;for(e=i;o&&o!=this.inputNode;){for(var r,s=o.previousSibling;s;)r=$(s).text(),e+=r.length,s=s.previousSibling;o=o.parentNode}}return e},t.fn.saveCursor=function(){return this.cursorPos=this.getCursor(),this._lastPos=this.cursorPos==this.text().length,this.cursorPos},t.fn.restoreCursor=function(t){if(!this.textMode()&&window.getSelection){var n,a=t,i=document.createRange(),o=window.getSelection(),r=this.inputNode;if(n=this._lastPos?this.text().length:this.cursorPos,a=a||n,"INPUT"!=this.inputNode.tagName)for(;r&&1==r.nodeType;)obj=e(r,a),r=obj.child,a=obj.n;r&&3==r.nodeType&&(a=Math.min(a,$(r).text().length),a=Math.max(a,0),i.setStart(r,a),i.collapse(!0),o.removeAllRanges(),o.addRange(i))}}}(),function(e,t,n){function a(e){function a(e,t){var n=e[P.clientX]||(((e.originalEvent||e).touches||[])[0]||{})[P.pageX];if(t)var a=t.getBoundingClientRect(),n=n-a[P.start];return n}function r(e){e?t(document).on("selectstart.rader",function(){return!1}):t(document).off("selectstart.rader")}function s(e){return Math.min.apply(Math,e)}function l(e){return e>100&&(e=100),0>e&&(e=0),e}function c(e){return null==Y[e]&&(Y[e]=l((e-H)/x*100)),Y[e]}function u(e){return null==K[e]&&(K[e]=e/100*x+H),K[e]}function d(t){var n=W[0],a=W[W.length-1];if(!W)return t;for(var i=0;$[i+1]&&!(t>=$[i]&&t<=$[i+1]);)i++;var o,r=$[i],s=$[i+1]||r,l=W[i],i=W[i+1]||l;return 0>=s-r&&(s=G,r=H),o="log"==e.scale?Math.exp((t-r)/(s-r)*(Math.log(i)-Math.log(l))+Math.log(l)):(t-r)/(s-r)*(i-l)+l,n>o?n:o>a?a:o}function h(t){if(!$)return t;for(var n=$[0],a=$[$.length-1],i=0;W[i+1]&&!(t>=W[i]&&t<=W[i+1]);)i++;i==W.length-1&&i--;var o=W[i],r=W[i+1],s=$[i],i=$[i+1];return t="log"==e.scale?(Math.log(t)-Math.log(o))/(Math.log(r)-Math.log(o))*(i-s)+s:(t-o)/(r-o)*(i-s)+s,n>t?n:t>a?a:t}function p(t,n,a){var i,o,r=t,s=-1,l=1/0;n=n||$;for(var u=0;u<n.length;u++)o="pc"==a?n[u]:c(n[u]),i=Math.abs(o-t),!(l>i)||e.runnersFreeze&&e.runnersFreeze[u]||(r=o,l=i,s=u);return{index:s,a:r}}function f(t,n){var a,i,o,r=1/0,s=t;a=p(t).a;var u=100*e.stickingRadius/C;if(o=Math.abs(a-t),o>u)return t;for(var d=0;d<$.length;d++)a=c($[d]),i=Math.abs(a-t),a*n>t*n&&r>i&&(r=i,s=a);return u>r?s:r>=u?(t=l(t-o*n+u*n),Math.abs(s-t)<u?s:t):void 0}function m(t,a,o){var r;if(e.runnersFreeze&&e.runnersFreeze[a])return A[a];if("init"==i)r=1;else{if(r=A[t]||0,o>r)r=1;else{if(!(r>o))return!1;r=-1}o=l(o),t!=a&&(o=f(o,r))}var s=p(o).a,c=100*e.stickingRadius/C;return s!==n&&s!==o&&Math.abs(s-o)<c&&(!Z&&e.transCls&&(I(N).addClass(e.transCls),Z=setTimeout(function(){I(N).removeClass(e.transCls),Z=n},500)),o=s),s=100*e.bumpRadius/C,A[a+1*r]!==n&&(A[a+1*r]-o<s&&r>0||o-A[a+1*r]<s&&0>r)&&(t=m(t,a+1*r,o+r*s),o*r>(t-s*r)*r&&(o=f(t-s*r,-r))),A[a]=o,t={},t[P.start]=A[a]+"%",I(B[a]).css(t),o}function g(t){if(e.pointInRangeCls){var n,a=R.slice();for(n=0;n<q.length;n++)c($[n])>=A[0]&&c($[n])<=A[A.length-1]?R[n]=1:R[n]=0;for(n=0;n<R.length;n++)(R[n]!=a[n]||t)&&(R[n]?I(q[n]).addClass(e.pointInRangeCls):I(q[n]).removeClass(e.pointInRangeCls))}t={},t[P.start]=s(A)+"%",t[P.size]=Math.max.apply(Math,A)-s(A)+"%",I(z).css(t),e.onUpdate&&e.onUpdate({minPos:s(A),maxPos:Math.max.apply(Math,A),minVal:d(u(s(A))),maxVal:d(u(Math.max.apply(Math,A)))})}function _(e,t){if(null!=e){var n=100/C*(e-T);for(e=c(M[j])+n,n=0;n<A.length;n++)D[n]=A[n];m(j,j,l(e))}e:if(A.length!=D.length)n=!1;else{for(n=0;n<A.length;n++)if(A[n]!==D[n]){n=!1;break e}n=!0}n&&!t||g(t)}function v(){var t=s(A),n=Math.max.apply(Math,A),a=d(u(t)),i=d(u(n));return e.collapseVals&&n-t<100*e.bumpRadius/C+1e-5&&(100==n?a=i:0==t?i=a:A[j]===t?i=a:a=i),{minPos:t,maxPos:n,minVal:a,maxVal:i}}function y(){e.change&&e.change(v())}function b(){e.move&&e.move(v())}function k(){C=N[P.client],Y=[],K=[];var e,t;for(t=0;t<$.length;t++)e={},e[P.start]=c($[t])+"%",I(q[t]).css(e);for(t=0;t<M.length;t++)e={},A[t]=c(M[t]),e[P.start]=A[t]+"%",I(B[t]).css(e);t=c(M[0]);var n=c(M[M.length-1]);e={},e[P.start]=t+"%",e[P.size]=Math.abs(n-t)+"%",I(z).css(e)}function w(){for(var e=0,t=M.length;t>e;e++)M[e]=u(A[e])}var x,C,L,I,T,S=this,E=e.direction||"-",P=o[E],j=-1,M=[],A=[],D=[],R=[];i="init",this.elements={},I=e.dom||t;var N=e.root[0],B=t(e.runners);L={stickingRadius:0,bumpRadius:B[0][P.offset],points:[],pointsPos:[0,10],runnersPos:[]};for(var F in L)null==e[F]&&(e[F]=L[F]);var O=e.track,z=e.trackActive,q=e.points,$=e.pointsPos,U=e.runnersPos;F=e.runnersVal;var H,G,W=e.values;for(H=$[0],G=$[$.length-1],W||(W=$),L=0;L<W.length;L++)W[L]=+W[L];if(2==W.length&&2<$.length){var V=(W[1]-W[0])/($[$.length-1]-$[0]);for(L=1;L<$.length;L++)W[L]=W[0]+($[L]-$[0])*V}if(F&&!U.length)for(L=0;L<F.length;L++)U[L]=h(F[L]);U.length||(U=[H,G]),x=Math.abs(G-H);var Z,Y=[],K=[];for(t(document).on("mouseup.rader blur.rader touchend.rader",function(){-1!=j&&(w(),y(),r(1),j=-1)}),t(document).on("mousedown.rader touchstart.rader",function(e){C=N[P.client],T=a(e)}),t(document).on("mousemove.rader touchmove.rader",function(e){-1!=j&&(e=a(e),_(e,0),b())}),e.click&&t(O||N).on("click.rader",function(t){for(var n,i=0;i<e.runners.length&&!n;i++)n=t.target==e.runners[i]||t.target.parentNode==e.runners[i];n||(n=a(t,this)/this[P.client]*100,i=p(n,A,"pc"),m(i.index,i.index,n),t=a(t),_(t,1),w(),b(),y())}),this.pos=function(e,t){if(null!=t){var n=c(t);return m(e,e,n),w(),g(1),this}return M[e]},this.val=function(e,t){if(null!=t){var n=c(h(t));for(m(e,e,n),n=0;n<A.length;n++)M[n]=u(A[n]);return g(1),this}return d(M[e])},this.invalidate=function(){k(),g(1),b()},this.dispose=function(){t(document).off("rader"),t(B).off("rader"),t(O).off("rader"),t(N).off("rader")},L=0;L<U.length;L++)t(B[L]).on("mousedown.rader touchstart.rader",function(e){return function(t){2!=t.button&&(t.preventDefault(),r(),j=e)}}(L));return function(){C=N[P.client],M=U.slice();for(var e=0;e<U.length;e++)A[e]=c(M[e]);for(e=0;e<U.length;e++)S.pos(e,M[e]),A[e]=c(M[e])}(),k(),_(null,1),i="ready",t(N)[0].setAttribute("data-rader-inited",E),this}var i,o={"-":{start:"left",b:"offsetLeft",client:"clientWidth",offset:"offsetWidth",size:"width",clientX:"clientX",pageX:"pageX"},"|":{start:"top",b:"offsetTop",client:"clientHeight",offset:"offsetHeight",size:"height",clientX:"clientY",pageX:"pageY"}};e.$.fn.rader=function(e){return e=e||{},e.root=e.root||this,new a(e)}}(window,$),this.dg=this.dg||{},function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(e){return i.raw?e:decodeURIComponent(e.replace(a," "))}function n(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),e=t(e);try{return i.json?JSON.parse(e):e}catch(n){}}var a=/\+/g,i=e.cookie=function(a,o,r){if(void 0!==o){if(r=e.extend({},i.defaults,r),"number"==typeof r.expires){var s=r.expires,l=r.expires=new Date;l.setDate(l.getDate()+s)}return o=i.json?JSON.stringify(o):o+"",document.cookie=(i.raw?a:encodeURIComponent(a))+"="+(i.raw?o:encodeURIComponent(o))+(r.expires?"; expires="+r.expires.toUTCString():"")+(r.path?"; path="+r.path:"")+(r.domain?"; domain="+r.domain:"")+(r.secure?"; secure":"")}for(var c=document.cookie.split("; "),u=a?void 0:{},d=0,h=c.length;h>d;d++){var p=c[d].split("="),f=t(p.shift()),m=p.join("=");if(a&&a===f){u=n(m);break}a||(u[f]=n(m))}return u};i.defaults={},e.removeCookie=function(t,n){return void 0!==e.cookie(t)?(e.cookie(t,"",e.extend({},n,{expires:-1})),!0):!1}}),function(e){e.relativeUrl=["projectURL","WebApi.catalogUrl","WebApi.mosesProxyUrl","favorites.url","reviewsApi.url","presentsApi.url","feedbackApi.url","traffic.url","booklet.url","booklet.providers.url","discounts.url","discounts.share.url","apartments.url","proposals.url","extraLayers.url","tyres.url","awardApi.url","analytics.bss.url","analytics.yandex.url","analytics.google.url","analytics.liveInternet.src","analytics.liveInternet.href","googletag.url","floors.data.url","floors.data.chile.url","recaptchaUrl","authApi.url","authApi20.url","photoApi.url","authApi.socialUrl","p2dApi.url","static.api.url","commonCookie.path","gis.url","shortonizerApi.url","suggest.personal.apiUrl","weather.url","lkApi.url"],e.mainModule="::getMainModule",e.plugins=["fpsMeter","ua","onNextFrame"],e["city.frequency.cookieName"]="topCities",e["countryFrom.storageKey"]="countryFrom",e["city.cookieName"]="project",e["city.ieRedirect.cookieName"]="ieRedirectProject",e["commonCookie.mainHost"]="2gis.ru",e["commonCookie.path"]="http://%1/cookie",e["server.checkOrigin"]=!1,e["server.listenPort"]=3e3,e["server.referer"]="http://2gis.ru/",e["WebApi.catalogUrl"]="http://catalog.api.2gis.ru/2.0/",e["WebApi.mosesProxyUrl"]="http://catalog.api.2gis.ru",e["WebApi.key"]="ruczoy1743",e["WebApi.keyDotMarkers"]="ruewin2963",e["WebApi.keyStatic"]="ruoaeh1883",e["WebApi.canPatchKey"]=!1,e["WebApi.timeout"]=1e4,e["WebApi.clientTimeout"]=3e4,e["WebApi.firmsPageSize"]=12,e["WebApi.mediaPageSize"]=12,e["WebApi.stationsPageSize"]=300,e["WebApi.servicingPageSize"]=2e3,e["WebApi.sendCookies"]=!0,e["WebApi.sessionKeys"]={user:{cookieName:"_2gis_webapi_user",expires:new Date("Tue, 19 Jan 2038 03:14:07 GMT"),domain:".2gis.ru",path:"/"},session:{cookieName:"_2gis_webapi_session",domain:".2gis.ru",path:"/"}},e["log.slowQuery"]=5e3,e["reviewsApi.url"]="http://api.reviews.2gis.com/1.0/",e["reviewsApi.pageSize"]=12,e["presentsApi.url"]="http://catalog.api.2gis.ru/presents/api/1.0/",e["presentsApi.key"]="ruczoy1743",e["share.image.presents2015"]="https://content.2gis.ru/content_online/i/6137.png",e["favorites.url"]="https://favorites.api.2gis.ru/1.0/",e["favorites.coverPrefix"]="//i.photo.2gis.com/images/",e["favorites.collectionsCacheTTL"]=0,e["favorites.favoritesCacheTTL"]=6e4,e["favorites.favoritesLimit"]=1e3,e["firmCard.seeAlsoSize"]=2,e["authApi.url"]="https://auth.api.2gis.ru/1.0/",e["authApi20.url"]="https://api.auth.2gis.com/2.0/",e["authApi.socialUrl"]="https://auth.api.2gis.ru/social/login/",e["authApi.cookieName"]="dg_session_token",e["authApi.recaptchaPublicKey"]="6LcYneYSAAAAABU6HB06v4T4-ISjXZdUuEFDUuOI",e["mailer.url"]="http://mailer.n1.nato/index.php?r=api/send",e["mailer.key"]="XP78mJk5gP",e["mailer.logSuccess"]=!1,e["mailer.fallbackLang"]="en",e["p2dApi.url"]="https://push2dial.api.2gis.ru/1.0/sender/",e["p2dApi.cookieName"]="p2d_binded",e["photoApi.url"]="http://api.photo.2gis.com/2.0/",e["photoApi.key.default"]="gYu1s9N1wP",e["photoApi.key.collection"]="zp3p1n0c",e["photoApi.uploadNetworkTimeout"]=2e5,e["photoApi.photoPreviews"]=["100x100","304x190","304x","156x156","472x156","946x156","235x156","311x156","624x156","360x120"],e["photoApi.disableCounters"]=!1,e["apartments.url"]="http://apartments.api.2gis.ru/1.0/",e["apartments.pageSize"]=23,e["apartments.bookletMaxPageSize"]=500,e["apartments.types"]=["apartment.sale","business.sale"],e["proposals.url"]="http://proposals.api.2gis.ru/1.0/",e["logger.app"]={filename:"/var/log/online4/app-{port}.log",json:!1,timestamp:!0},e["logger.logstash"]={name:"graylog2-logstash",graylog:{servers:[{host:"logstash.test",port:12201}],hostname:"2gis.ru"},level:"warn"},e["log.url"]="/log",e.isGrym=!1,e.logStorageSize=200,e.logStoreDuration=12096e5,e["feedbackApi.url"]="http://feedback.api.2gis.ru/",e["feedbackApi.maxFileSize"]=10,e["account.allowCountries"]=["ru","kz","kg","ua","ae","cl","cy","cz"],e["widget.allowCountries"]=["ru","kz","ua","kg"],e["shortonizerApi.url"]="http://go.2gis.com/add/",e["shortonizerApi.reqTimeout"]=2e3,e["traffic.url"]="http://traffic%1.maps.2gis.com/%2/meta/score/0/",e["traffic.updateInterval"]=18e4,e["booklet.url"]="http://booklet.api.2gis.ru/2.0",e["booklet.providers.url"]="http://isp.api.2gis.ru",e["booklet.coverTop"]=50,e["static.api.url"]="http://static.maps.2gis.com/1.0",e["floors.data.url"]="http://floors.api.2gis.ru",e["floors.data.chile.url"]="http://floors.2gis.cl",e["floors.networkTimeout"]=1e4,e["floors.clientNetworkTimeout"]=3e4,e["floors.cacheExpirationTime"]=36e5,e.log_channels=["debug","warn"],e["plusone.libURL"]="/vendor/plusone.js",e.projectListTTL=6e5,e["analytics.impression.hoverTimeout"]=500,e["analytics.poiImpression.timeout"]=9e5,e["analytics.apitracker.showRequestType"]=!1,e["analytics.apitracker.debug"]=!1,e["analytics.yandex.url"]="http://mc.yandex.ru/metrika/watch.js",e["analytics.google.url"]="https://www.google-analytics.com/analytics.js",e["analytics.liveInternet.src"]="http://counter.yadro.ru/hit",e["analytics.liveInternet.href"]="http://www.liveinternet.ru/click",e["analytics.bss.networkTimeout"]=5e3,e["analytics.bss.clientNetworkTimeout"]=1e4,e["analytics.bss.sendDelay"]=100,e["analytics.bss.url"]="http://stat.api.2gis.ru",e["analytics.bss.statVersion"]="2.0",e["googletag.url"]="http://www.googletagservices.com/tag/js/gpt.js",e["license.osm"]="http://www.openstreetmap.org/",e.debug=!0,e.museum=!0,e.projectsDefault={"2gis.ae":99,"2gis.cl":101,"2gis.com.cy":93,"2gis.cz":92,"2gis.it":66,"2gis.kz":68,"2gis.kg":112,"2gis.ru":32,"2gis.ua":107},e.defaultCity=32,e["flags.cookieName"]="flags",e["interest.cookieName"]="interest",e.photoActivateTime=300,e.prefixfreeJsPath="/vendor/prefixfree.min.js",e.defaultRouteColor="#2864c8",e.maxWaypointsCount=20,e["social.vkId"]=3507565,e["social.fbId"]="108008802706249",e.resultsAdsIntervalRotation=2e4,e.dashboardPromoAutoplay=3e4,e.googletagMinHeight=140,e.networkTimeout=5e3,e.clientNetworkTimeout=2e4,e.checkNetworkUpdateTimeout=3e4,e.supportedLocales="ru_RU,ru_KZ,ru_KG,ru_UA,en_CY,es_CL,en_AE,cs_CZ,it_IT",e.rotateStepDegree=45,e.recaptchaUrl="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js",e.universePosition={angle:0,lat:35.93158854684796,lon:63.26140381901139,scale:69078704},e.universeId=100500,e["discounts.url"]="http://discounts.api.2gis.ru/2.0",e["discounts.share.url"]="http://booklet.api.2gis.ru/2.0/share",e["discounts.internationalDiscountsCities"]=[92,99,101],e["share.image.main"]="https://content.2gis.ru/content_online/i/2gis_logo.jpg",e["share.image.main.width"]="256",e["share.image.main.height"]="256",e["share.image.staticMap.size"]="500,350",e["share.image.eventday"]="https://content.2gis.ru/content_online/i/2gis_logo.jpg",e["share.image.victory"]="https://content.2gis.ru/content_online/i/ba4b2bc283c2454c.png",e["share.image.summer"]={ru:{vkontakte:"https://static.2gis.com/i/6282.jpg",twitter:"https://static.2gis.com/i/6284.jpg",facebook:"https://static.2gis.com/i/6283.jpg",odnoklassniki:"https://static.2gis.com/i/6285.jpg"},kz:{vkontakte:"https://static.2gis.com/i/6274.jpg",twitter:"https://static.2gis.com/i/6276.jpg",facebook:"https://static.2gis.com/i/6275.jpg",odnoklassniki:"https://static.2gis.com/i/6277.jpg"},ua:{vkontakte:"https://static.2gis.com/i/6286.jpg",twitter:"https://static.2gis.com/i/6287.jpg",facebook:"https://static.2gis.com/i/6288.jpg",odnoklassniki:"https://static.2gis.com/i/6289.jpg"},kg:{vkontakte:"https://static.2gis.com/i/6278.jpg",twitter:"https://static.2gis.com/i/6280.jpg",facebook:"https://static.2gis.com/i/6279.jpg",odnoklassniki:"https://static.2gis.com/i/6281.jpg"}},e.universeId=100500,e["awardApi.url"]="http://catalog.api.2gis.ru/awards/api/1.0/awards",e["awardApi.cacheExpirationTime"]=72e5,e["awardApi.key"]="ruczoy1743",e["share.image.award2015"]={ru:"https://content.2gis.ru/content_online/i/6154.png",cz:"https://content.2gis.ru/content_online/i/6150.png",cl:"https://content.2gis.ru/content_online/i/6152.png",ae:"https://content.2gis.ru/content_online/i/6151.png"},e["extraLayers.url"]="http://layers.2gis.com/layers",e["extraLayers.tags"]="v4",e["extralayers.onlyActive"]=!1,e["products.pageSize"]=12,e["tyres.url"]="https://tire.api.2gis.ru/tyres/",e["gis.url"]="http://2gis.ru",e["weather.url"]="http://weather.api.2gis.ru",e["weather.timeout"]=1e3,e["weather.clientTimeout"]=5e3,e["weather.timeUpdate"]=18e5,e["weather.cacheExpirationTime"]=3e5,e["online.weatherProvider"]="Gismeteo",e.splits=!0,e["split.performance"]=.04,e["split.dotMarkers3"]=.5,e.disableStash=!1,e["symbols.url"]="/assets/symbols.svg",e["symbols.timeout"]=6e4,e["webvisor.inspectlet.url"]="/vendor/inspectlet.js",e["skver.url"]="http://skver.2gis.ru",e["skver.subscribe.url"]="http://skver.2gis.ru/#subscribe",e.showMausoleumForMuseumBrowsers=!0,e["featureSwitcher.canRewriteReferrer"]=!0,e.canShowStaticByCookie=!0,e["static.cookieName"]="static",e["static.withoutInfo.cookieName"]="staticWithoutInfo",e.canGetHolidaysDateFromURL=!0,e.cityRedirect=!1,e.checkProjectDomain=!1,e["chat.src"]="https://widget.intercom.io/widget/fphnkel7",e["chat.apiId"]="fphnkel7",e["lkApi.url"]="http://account.2gis.ru/api/1.0/users",e.socialLinks={vkontakte:"https://vk.com/all2gis",facebook:"https://www.facebook.com/2gis.ru/",twitter:"https://twitter.com/2gis",instagram:"https://www.instagram.com/2gis/",telegram:"https://telegram.me/twogis"},e["superagent.mockAvailable"]=!0,e["animations.frameShow"]=300,e["animations.frameKill"]=0,e["animations.frameHide"]=400,e["animations.dataViewerExpand"]=200,e["animations.mediaResultsAppearing"]=300,e["animations.filtersGlassDisappear"]=800,e["animations.mapCircleShow"]=1e3,e["data.path"]="./build/private",e["projectConf.cityDomainsFile"]="city_domains.json",e["projectConf.cityCodeDomainsFile"]="citycode_domains.json",e["assetsHistory.countToSave"]=100,e["contextPromo.priority"]=["cityQuora"],e["contextPromo.rubrics"]={cityQuora:[10021,10128,1013,10135,10139,1015,102001,102026,102029,102041,102043,102044,10274,10291,103127,1032,103405,10351,10377,103934,104043,104110,104196,104197,10446,10458,10534,1055,10566,1058,1059,1060,1073,1074,107581,10803,10902,10904,10905,10923,109487,1098,1102,110299,110300,110303,110304,110305,110306,110308,110309,110317,110318,110321,110323,110324,110325,110326,110327,110328,110332,110337,110340,110341,110342,110345,110346,110347,110348,110349,110350,110354,110355,110357,110358,110359,110367,110368,110369,110371,110373,110383,110384,110387,1108,1123,1128,1152,1156,11641,1181,1182,11919,1196,1197,11974,1203,1204,1206,12127,12166,12178,1218,12211,12249,123,1233,1234,1235,1237,1241,1242,1248,12486,1269,127,1273,128,1281,12997,13100,13102,13306,13311,13312,13405,13406,13410,135,13597,13635,13641,13645,13648,13651,13726,13789,13796,139,14142,14190,14376,14398,14426,14431,14444,14488,14685,14942,14967,15075,15095,15281,15287,15335,15366,1549,15502,1556,1558,1559,156,15616,15707,15761,15790,16022,16028,1609,1613,1614,1616,1617,16199,16212,16285,16293,16322,16397,16400,16414,16491,16498,16539,166,16610,16614,16615,16623,1667,16677,1669,16743,16757,16863,16864,16866,16867,16869,16870,16875,16876,169,16904,16928,16968,170,17017,17068,171,17205,173,17379,174,17448,175,176,178,179,181,182,18315,18410,18471,185,18530,186,187,188,18854,18940,18978,18989,19080,191,19119,19132,192,19288,19290,19487,19490,19499,19504,19505,19571,19601,19637,19661,19983,20165,20228,204,205,206,207,20731,20750,20773,208,20857,20863,209,20944,20965,210,21039,21075,211,21121,212,21302,21371,21387,214,21448,21466,21493,21497,21501,21516,217,218,219,22064,221,22115,22129,22159,222,223,22370,22379,22771,22779,22831,230,231,232,233,234,23469,237,23765,23787,23847,239,241,24109,24184,242,243,24392,244,24472,245,24504,246,247,24738,248,24812,25012,25075,25108,25168,25194,254,255,256,259,261,262,264,266,267,268,269,270,272,273,274,275,276,277,278,279,280,281,282,283,284,285,287,288,291,292,293,294,29497,295,29502,296,297,298,299,300,301,302,305,306,307,308,309,311,312,313,316,317,318,319,3198,321,3218,322,3231,3232,3236,324,325,326,328,329,330,331,332,334,337,338,341,342,343,344,345,346,347,348,350,351,352,353,354,355,356,358,359,360,361,362,363,366,367,372,373,375,376,377,378,379,380,381,382,383,384,385,387,388,389,390,391,392,394,395,396,397,398,399,400,401,402,411,417,418,419,421,423,428,429,431,432,435,436,438,4383,4385,439,440,441,4418,442,4420,4427,443,444,4456,446,447,448,4480,4484,44938,4497,450,45018,4509,451,4515,4517,4518,4519,452,4521,4529,453,4530,4531,4534,4535,4537,454,457,458,459,461,462,463,464,46726,469,473,47327,47342,475,476,47633,47672,477,47736,47741,47773,47780,479,480,483,484,485,486,487,489,490,492,495,497,49787,498,49847,50067,50084,501,50186,502,50210,503,50374,504,505,50532,508,50841,50850,50866,50867,50871,509,510,51008,51009,51010,51013,51092,51096,51099,511,51103,51105,512,51202,51208,51214,51221,51241,51256,513,51327,51356,51358,51360,51362,51370,51371,51378,51385,514,51407,51414,51462,515,516,51645,51646,51746,51755,518,51883,519,51905,521,5214,52151,52160,522,52236,52243,52256,523,52495,526,5266,52674,52681,5269,5272,5276,5279,528,52958,52959,52973,53051,531,53116,53136,53139,53175,53266,533,53304,53397,53460,53596,53598,53599,537,538,53832,53833,53975,53982,53986,540,54001,54067,541,54111,54146,5435,54396,544,54403,54409,54450,54452,54644,547,548,549,54913,550,551,554,555,55540,556,55669,55691,55693,557,55723,55727,558,559,5602,5603,56064,561,56108,56161,562,56265,563,56326,564,56437,56455,5655,56557,5659,567,56738,56757,56759,568,5683,570,571,57185,57240,573,574,575,5750,578,5788,579,580,5802,582,583,584,5843,585,58618,58621,58622,587,588,58828,58858,58871,589,590,591,592,59284,593,594,595,596,598,599,600,602,603,604,605,606,607,608,609,610,61066,611,612,613,614,615,616,618,622,623,624,625,626,627,628,630,631,632,633,634,635,636,637,640,641,642,643,644,646,647,648,649,650,6505,651,6510,652,654,655,656,657,658,659,660,661,663,664,665,666,667,669,670,67041,671,67128,67142,67337,67368,67369,674,675,676,678,683,686,687,688,689,690,691,692,69271,694,695,696,697,698,699,69989,700,701,70159,702,703,704,705,706,708,709,710,712,71232,71642,71648,719,721,72370,728,7319,7332,7361,73924,7406,7578,7579,7591,764,766,7662,7666,7669,768,773,774,776,777,785,786,7948,7949,7960,7988,799,802,8020,805,8068,807,808,809,8151,8188,8189,8190,8191,8192,8193,8195,8199,831,834,8367,8368,8402,844,8533,8534,8740,8743,879,9102,921,9220,9228,923,925,926,9281,935,936,937,940,942,945,946,9509,9529,9561,961,9629,9741,9776,9777,9786,9822,9827,99200,99224,99231,993,9956,996,9965,9972,9973,99736]
},e["contextPromo.miniCardPosition"]=3,e["contextPromo.cities"]={cityQuora:["novosibirsk","moscow"]},e["mediaCard.resize"]={columnWidth:320,wrapperPaddings:16,viewportBlindSpot:236,minColumnsNumber:2,minWidthFor3Columns:1280,maxColumnsNumber:3,calculationsDelay:15,allowHide:!1,subStepWidth:30,hideOverlayWidth:42},e["gallery.resize"]={columnWidth:320,wrapperPaddings:192,viewportBlindSpot:138,minColumnsNumber:2,maxColumnsNumber:4,calculationsDelay:15,subStepWidth:30},e.emergencyProjects={99:{id:"99",name:"Dubai",type:"region",locale:"en_AE",locales:["en_AE"],country_code:"ae",code:"dubai",domain:"ae",zoom_level:{min:9,max:18},default_pos:{lon:55.2760172,lat:25.0618775,zoom:11},statistics:{org_count:69152,branch_count:77761,rubric_count:920,route_count:110},flags:{public_transport:!0,metro:!0,road_network:!0,flamp:!1},name_grammatical_cases:{genitive:"Dubai",prepositional:"Dubai"},time_zone:{offset:240,name:"Asia/Dubai"},bounds:"POLYGON((54.869562514047 25.3594948791612,55.6805973057252 25.3594948791612,55.6805973057252 24.7632874786908,54.869562514047 24.7632874786908,54.869562514047 25.3594948791612))"},93:{id:"93",name:"Lemesos",type:"region",locale:"en_CY",locales:["en_CY"],country_code:"cy",code:"limassol",domain:"com.cy",zoom_level:{min:11,max:18},default_pos:{lon:33.0542048,lat:34.7142104,zoom:11},statistics:{org_count:10091,branch_count:11305,rubric_count:801,route_count:40},flags:{public_transport:!0,metro:!1,road_network:!0,flamp:!1},name_grammatical_cases:{genitive:"Lemesos",prepositional:"Lemesos"},time_zone:{offset:180,name:"Indian/Mayotte"},bounds:"POLYGON((32.8183135920874 34.7703607532978,33.1907346326479 34.7703607532978,33.1907346326479 34.5438286066823,32.8183135920874 34.5438286066823,32.8183135920874 34.7703607532978))"},68:{id:"68",name:"Астана",type:"region",locale:"ru_KZ",locales:["ru_KZ"],country_code:"kz",code:"astana",domain:"kz",zoom_level:{min:9,max:17},default_pos:{lon:71.479328,lat:51.142565,zoom:11},statistics:{org_count:13304,branch_count:16178,rubric_count:1017,route_count:67},flags:{public_transport:!0,metro:!1,road_network:!0,flamp:!1},name_grammatical_cases:{genitive:"Астаны",prepositional:"Астане"},time_zone:{offset:360,name:"Asia/Qyzylorda"},bounds:"POLYGON((71.168047 50.934375,71.882776 50.934375,71.882776 51.371657,71.168047 51.371657,71.168047 50.934375))"},107:{name:"Киев",statistics:{org_count:30998,branch_count:56096,rubric_count:1125,route_count:407},flags:{public_transport:!0,metro:!0,road_network:!0,flamp:!1},domain:"ua",hidden:!1,weights_time:1456802100,online_languages:{available:"ru,uk",default_lang:"uk"},bounds:"POLYGON((30.210468 50.190165,31.039178 50.190165,31.039178 50.636093,30.210468 50.636093,30.210468 50.190165))",zoom_level:{min:9,max:17},locale:"ru_UA",code:"kiev",country_code:"ua",id:"107",locales:["ru_UA"],name_grammatical_cases:{genitive:"Киева",prepositional:"Киеве",accusative:"Киев"},type:"region",tips_languages:{ru:"ru",uk:"uk"},time_zone:{name:"Europe/Kiev",offset:120},settlements:["Боярка","Вишневе","Бориспіль","Бровари","Буча","Васильків","Вишгород","Ірпінь"],default_pos:{lon:30.678002,lat:50.448895,zoom:11}},32:{id:"32",name:"Москва",type:"region",locale:"ru_RU",locales:["ru_RU"],country_code:"ru",code:"moscow",domain:"ru",zoom_level:{min:9,max:18},default_pos:{lon:37.6179283,lat:55.7512877,zoom:11},statistics:{org_count:200190,branch_count:302251,rubric_count:1188,route_count:2498},flags:{public_transport:!0,metro:!0,road_network:!0,flamp:!0},name_grammatical_cases:{genitive:"Москвы",prepositional:"Москве"},time_zone:{offset:240,name:"Europe/Moscow"},bounds:"POLYGON((36.7589630188729 56.1094645977258,38.2250238758651 56.1094645977258,38.2250238758651 55.1040131369395,36.7589630188729 55.1040131369395,36.7589630188729 56.1094645977258))"},101:{id:"101",name:"Santiago",type:"region",locale:"es_CL",locales:["es_CL"],country_code:"cl",code:"santiago",domain:"cl",zoom_level:{min:9,max:18},default_pos:{lon:-70.6541827,lat:-33.4447174,zoom:11},statistics:{org_count:35130,branch_count:48584,rubric_count:1034,route_count:341},flags:{public_transport:!0,metro:!0,road_network:!0,flamp:!1},name_grammatical_cases:{genitive:"Santiago",prepositional:"Santiago"},time_zone:{offset:-240,name:"America/Santiago"},bounds:"POLYGON((-70.8571559326759 -33.2933344386246,-70.477275853484 -33.2933344386246,-70.477275853484 -33.6656911332218,-70.8571559326759 -33.6656911332218,-70.8571559326759 -33.2933344386246))"},92:{id:"92",name:"Praha",type:"region",locales:["cs_CZ"],country_code:"cz",code:"praha",domain:"cz",locale:"cs_CZ",zoom_level:{min:10,max:18},default_pos:{lon:14.413851,lat:50.0926185,zoom:11},statistics:{org_count:56015,branch_count:67625,rubric_count:1055,route_count:240},flags:{public_transport:!0,metro:!0,road_network:!0,flamp:!1},name_grammatical_cases:{genitive:"Prahy",prepositional:"Praze"},time_zone:{offset:120,name:"Europe/Zurich"},bounds:"POLYGON((14.2155277221934 50.1810860167697,14.7152445225123 50.1810860167697,14.7152445225123 49.9348968592983,14.2155277221934 49.9348968592983,14.2155277221934 50.1810860167697))"},66:{id:"66",name:"Venezia e Padova",type:"region",locales:["it_IT"],country_code:"it",code:"padova",domain:"it",locale:"it_IT",zoom_level:{min:9,max:18},default_pos:{lon:11.8764368,lat:45.3984413,zoom:11},statistics:{org_count:36698,branch_count:45347,rubric_count:1021,route_count:54},flags:{public_transport:!0,metro:!1,road_network:!1,flamp:!1},name_grammatical_cases:{genitive:"Venezia e Padova",prepositional:"Venezia e Padova"},online_languages:{available:"en",default_lang:"en"},time_zone:{offset:120,name:"Europe/Zurich"},bounds:"POLYGON((11.3550232420912 45.733676894531,12.6119895276371 45.733676894531,12.6119895276371 45.0713376120054,11.3550232420912 45.0713376120054,11.3550232420912 45.733676894531))"},112:{id:"112",name:"Бишкек",type:"region",locales:["ru_KG"],country_code:"kg",code:"bishkek",domain:"kg",locale:"ru_KG",zoom_level:{min:9,max:18},default_pos:{lon:74.589496,lat:42.877821,zoom:11},statistics:{org_count:7420,branch_count:9676,rubric_count:865,route_count:108},flags:{public_transport:!0,metro:!1,road_network:!0,flamp:!1},name_grammatical_cases:{genitive:"Бишкека",prepositional:"Бишкеку",accusative:"Бишкек"},time_zone:{name:"Asia/Bishkek",offset:360},bounds:"POLYGON((74.4117 42.785866,74.882811 42.785866,74.882811 43.081251,74.4117 43.081251,74.4117 42.785866))",settlements:["Кант"]}},e["features.routeSearch"]={mausoleum:!1},e["features.routeSearch.pedestrian"]=!1,e["features.routeSearch.metroEntrances"]=!0,e["features.bookletProviders"]=!0,e["features.traffic"]={mausoleum:!1},e["features.auth"]=!0,e["features.test"]=!1,e["features.extraLayers"]=!0,e["features.print"]={browsers:{ie:99,opera:99},mobile:!1,mausoleum:!1},e["features.plusOne"]=!0,e["features.p2d"]=!0,e["features.performance"]={split:!0},e["features.dotMarkers3"]={countries:["ru","ae"],splittingCountries:["ru"]},e["features.mapAds"]=!0,e["features.impressions"]=!0,e["features.bcPlaces"]=!0,e["features.onlyAdsMushrooms"]=!0,e["features.discountsPromo"]=!0,e["features.photoApi2"]=!0,e["featuresParams.globalMap.countries"]=["ru","kz","ua","kg"],e["features.globalMap"]={phones:!1,mausoleum:!1,countries:e["featuresParams.globalMap.countries"]},e["features.flying"]={browsers:{opera:12}},e["features.pagination"]=!0,e["features.mediaCard"]={countries:{ru:{excludeCities:["makhachkala"]},ua:{includeCities:["odessa","dnepropetrovsk","donetsk","kharkov"]},kz:{includeCities:["astana","ustkam","karaganda","almaty","pavlodar"]},cz:{includeCities:["praha"]}},browsers:{ie:10,opera:12},mausoleum:!1},e["features.mediaResults"]={countries:{ru:{excludeCities:["makhachkala"]},ua:{includeCities:["odessa","dnepropetrovsk","donetsk","kharkov"]},kz:{includeCities:["astana","ustkam","karaganda","almaty","pavlodar"]},cz:{includeCities:["praha"]}},browsers:{ie:10,opera:12},phones:!1,mausoleum:!1},e["features.mediaCard.eat"]={countries:{ru:!0,ua:{includeCities:["odessa","dnepropetrovsk","donetsk","kharkov"]},kz:{includeCities:["astana","ustkam","karaganda","almaty","pavlodar"]},cz:{includeCities:["praha"]}}},e["features.mediaCard.saunas"]={countries:{ru:!0,ua:{includeCities:["odessa","dnepropetrovsk","donetsk","kharkov"]},kz:{includeCities:["astana","ustkam","karaganda","almaty"]}}},e["features.mediaCard.fitness"]={countries:{ru:!0,ua:{includeCities:["odessa","dnepropetrovsk","donetsk","kharkov"]},kz:{includeCities:["ustkam","karaganda","almaty","pavlodar"]}}},e["features.photosUploader"]={fileApi:!0,phones:!1,mausoleum:!1,countries:["ru","kz","kg","ua","cz","ea","cl"]},e["features.mediaCard.providers"]={countries:["ru"]},e["features.mediaCard.reviews"]={countries:["ru","kz","ua"]},e["features.mediaResults.func.metroAndAreas"]={countries:["ru","kz","ua"]},e["features.mediaResults.func.presets"]={countries:["ru","kz","ua"]},e["features.geoLocation.control"]=!0,e["features.geoLocation.location"]=!0,e["features.geoLocation.direction"]=!1,e["features.geoLocation.watchPosition"]=!1,e["features.detectRetina"]={desktop:!1,phones:!0},e["features.promoMobileFull"]=!1,e["features.favorites"]={mausoleum:!1},e["features.trueSearchBuilding"]=!1,e["features.apartments"]={countries:{ru:!0,ua:{includeCities:["odessa"]}}},e["features.bookletApartments"]=!0,e["features.proposals"]={countries:{ru:{includeCities:["novosibirsk","spb","ekaterinburg"]}}},e["features.dashboardWeather"]=!0,e["features.lightboxMobile"]=!1,e["features.markerOnlyClient"]=!0,e["features.markerAllPages"]=!1,e["features.googleTag.stopEmptyRotation"]=!0,e["features.geoCard2"]=!0,e["features.geoCard2.searchNear"]=!1,e["features.loyalty"]=!1,e["features.businessLandingDemoMode"]={iframeParentDomains:["business.2gis.ru","business-landing-staging.web.2gis.local"]},e["features.moscowCityDay"]=!1,e["features.widgets"]=!0,e["features.autoparts"]={countries:{ru:{includeCities:["moscow","ivanovo","spb"]}}},e["features.tyres"]={countries:["ru"],browsers:{ie:9,opera:12},phones:!1},e["features.reviews"]={countries:["ru","ua","kz","kg","ae","cz","cl"]},e["features.widgetSuggest"]=!0,e["features.floors"]={webgl:!0,browsers:{ie:10,opera:18}},e["features.claimToFirm"]={countries:["ru","kz","kg"],phones:!1,mausoleum:!1},e["features.resendBssPackage"]=!1,e["features.presents2015"]=!1,e["features.award2015"]=!1,e["features.summer"]={date:{validFrom:"2016-05-01",validTo:"2016-09-30"},countries:{ru:{includeCities:["barnaul","chelyabinsk","ekaterinburg","irkutsk","kazan","kemerovo","krasnoyarsk","moscow","n_novgorod","nabchelny","novokuznetsk","novorossiysk","novosibirsk","omsk","perm","rostov","samara","saratov","sochi","spb","stavropol","togliatti","tula","tyumen","ufa","ulanude","vladivostok","volgograd","voronezh"]},kz:["almaty","astana","karaganda","ustkam","pavlodar"],ua:["donetsk","dnepropetrovsk","kiev","kharkov"],kg:["bishkek"]},browsers:{ie:9,opera:12}},e["features.victory"]=!1,e["features.lkApi"]=!0,e["features.languageSwitcher"]=!0,e["features.whatsNewExtrasButton"]={mobile:!1,countries:["ru"]},e["features.reviews.forAllFilials"]={mausoleum:!1},e["features.ppnotTime"]=!1,e["features.ginzaProject"]={phones:!1,date:{validFrom:"2016-05-01",validTo:"2016-09-01"},countries:{ru:{includeCities:["spb"]}}},e["globalMap.cityZoom"]=8,e["globalMap.countryZoom"]=3,e["globalMap.globalZoom"]=8,e["globalMap.citySelect.zoom"]=5,e["globalMap.default.zoom"]=2,e["globalMap.default.mapcenter"]={lon:21.779905,lat:16.467695},e["globalMap.countryView"]={ru:{points:[{lat:65.512962,lng:98.085937},{lat:59.534318,lng:50.097656},{lat:63.233627,lng:137.8125}],citiesCount:235,zoom:4},kz:{points:[{lat:47.872143,lng:65.478515}],zoom:6,center:{lat:46.566414,lng:75.113525}},ua:{points:[{lat:49.667627,lng:31.157226}],zoom:6},ae:{points:[{lat:25.0618775,lng:55.2760172}],zoom:8,disableShowCityName:!0},cy:{points:[{lat:35.1548144,lng:33.3496277}],zoom:8,disableShowCityName:!0},cz:{points:[{lat:50.0926185,lng:14.413851}],zoom:8,disableShowCityName:!0},it:{points:[{lat:45.3984413,lng:11.8764368}],zoom:8,disableShowCityName:!0},cl:{points:[{lat:-31.653381,lng:-71.367187}],zoom:8,center:{lat:-33.444717,lng:-70.654183},disableShowCityName:!0},kg:{points:[{lat:42.728857,lng:73.43811}],zoom:7,center:{lat:41.273678,lng:73.861084}}},e["speed.minForFly"]=1500,e["speed.timeout"]=200,e["i18n.locales"]=["en_cy","en_ae","en_it","es_cl","cs_cz","ru_ru","ru_ua","ru_kz","ru_kg","uk_ua"],e["i18n.aliases"]={},e.langTitles={ru:"Русский",uk:"Українська",en:"English"},e.langAbbreviations={ru:"Ру",uk:"Ук",en:"En"},e.multilangCookie="dg4_lang",e["interest.map"]={interest:{"70000201006743397":"Спорт-активный отдых","70000201006743398":"Медицина","70000201006743399":"Развлечения",70000201006743400:"Управляющие","70000201006743401":"Красота","70000201006743402":"Дом-ремонт","70000201006743403":"Родители","70000201006743404":"Путешествующие-отдыхающие","70000201006743405":"Автолюбители","70000201006743406":"Домашние животные","70000201006743407":"Недвижимость","70000201006743408":"Одежда-обувь"},rubric2interest:{259:"70000201006743397",261:"70000201006743397",262:"70000201006743397",264:"70000201006743397",266:"70000201006743397",267:"70000201006743397",268:"70000201006743397",309:"70000201006743397",384:"70000201006743397",505:"70000201006743397",607:"70000201006743397",631:"70000201006743397",633:"70000201006743397",634:"70000201006743397",696:"70000201006743397",764:"70000201006743397",808:"70000201006743397",809:"70000201006743397",1233:"70000201006743397",4515:"70000201006743397",6505:"70000201006743397",8151:"70000201006743397",9965:"70000201006743397",11974:"70000201006743397",12505:"70000201006743397",12506:"70000201006743397",12507:"70000201006743397",12508:"70000201006743397",12509:"70000201006743397",20228:"70000201006743397",20773:"70000201006743397",24472:"70000201006743397",25108:"70000201006743397",51008:"70000201006743397",51221:"70000201006743397",51241:"70000201006743397",51244:"70000201006743397",51256:"70000201006743397",51414:"70000201006743397",51646:"70000201006743397",52236:"70000201006743397",52495:"70000201006743397",53139:"70000201006743397",61066:"70000201006743397",68951:"70000201006743397",71232:"70000201006743397",99736:"70000201006743397",201:"70000201006743398",202:"70000201006743398",206:"70000201006743398",207:"70000201006743398",208:"70000201006743398",210:"70000201006743398",216:"70000201006743398",217:"70000201006743398",218:"70000201006743398",221:"70000201006743398",222:"70000201006743398",224:"70000201006743398",226:"70000201006743398",227:"70000201006743398",229:"70000201006743398",649:"70000201006743398",660:"70000201006743398",661:"70000201006743398",662:"70000201006743398",4509:"70000201006743398",4517:"70000201006743398",4518:"70000201006743398",4519:"70000201006743398",4521:"70000201006743398",4529:"70000201006743398",4530:"70000201006743398",4531:"70000201006743398",4534:"70000201006743398",4537:"70000201006743398",5214:"70000201006743398",9822:"70000201006743398",9956:"70000201006743398",10446:"70000201006743398",10791:"70000201006743398",12211:"70000201006743398",13405:"70000201006743398",13635:"70000201006743398",13641:"70000201006743398",15366:"70000201006743398",16864:"70000201006743398",16866:"70000201006743398",16867:"70000201006743398",16869:"70000201006743398",16870:"70000201006743398",16875:"70000201006743398",16876:"70000201006743398",18410:"70000201006743398",18652:"70000201006743398",18940:"70000201006743398",19585:"70000201006743398",20857:"70000201006743398",23765:"70000201006743398",25075:"70000201006743398",49847:"70000201006743398",51099:"70000201006743398",53175:"70000201006743398",53460:"70000201006743398",55715:"70000201006743398",56064:"70000201006743398",60503:"70000201006743398",69271:"70000201006743398",70190:"70000201006743398",73921:"70000201006743398",73924:"70000201006743398",92576:"70000201006743398",99224:"70000201006743398",159:"70000201006743399",161:"70000201006743399",162:"70000201006743399",164:"70000201006743399",167:"70000201006743399",168:"70000201006743399",169:"70000201006743399",170:"70000201006743399",173:"70000201006743399",192:"70000201006743399",199:"70000201006743399",537:"70000201006743399",946:"70000201006743399",9508:"70000201006743399",11647:"70000201006743399",15791:"70000201006743399",21387:"70000201006743399",24099:"70000201006743399",72370:"70000201006743399",186:"70000201006743400",187:"70000201006743400",188:"70000201006743400",321:"70000201006743400",322:"70000201006743400",328:"70000201006743400",333:"70000201006743400",334:"70000201006743400",339:"70000201006743400",352:"70000201006743400",411:"70000201006743400",436:"70000201006743400",438:"70000201006743400",439:"70000201006743400",441:"70000201006743400",442:"70000201006743400",443:"70000201006743400",444:"70000201006743400",446:"70000201006743400",448:"70000201006743400",450:"70000201006743400",451:"70000201006743400",452:"70000201006743400",457:"70000201006743400",475:"70000201006743400",476:"70000201006743400",477:"70000201006743400",480:"70000201006743400",487:"70000201006743400",490:"70000201006743400",513:"70000201006743400",519:"70000201006743400",521:"70000201006743400",523:"70000201006743400",527:"70000201006743400",528:"70000201006743400",530:"70000201006743400",541:"70000201006743400",551:"70000201006743400",559:"70000201006743400",563:"70000201006743400",564:"70000201006743400",568:"70000201006743400",602:"70000201006743400",604:"70000201006743400",614:"70000201006743400",615:"70000201006743400",616:"70000201006743400",618:"70000201006743400",625:"70000201006743400",637:"70000201006743400",638:"70000201006743400",639:"70000201006743400",642:"70000201006743400",653:"70000201006743400",655:"70000201006743400",656:"70000201006743400",658:"70000201006743400",665:"70000201006743400",666:"70000201006743400",799:"70000201006743400",807:"70000201006743400",831:"70000201006743400",834:"70000201006743400",844:"70000201006743400",921:"70000201006743400",923:"70000201006743400",925:"70000201006743400",940:"70000201006743400",945:"70000201006743400",1073:"70000201006743400",1074:"70000201006743400",1218:"70000201006743400",1234:"70000201006743400",1235:"70000201006743400",1236:"70000201006743400",1238:"70000201006743400",1241:"70000201006743400",1613:"70000201006743400",1614:"70000201006743400",3231:"70000201006743400",3232:"70000201006743400",5276:"70000201006743400",5655:"70000201006743400",5843:"70000201006743400",7578:"70000201006743400",7579:"70000201006743400",7666:"70000201006743400",8743:"70000201006743400",9827:"70000201006743400",11919:"70000201006743400",13102:"70000201006743400",13311:"70000201006743400",13312:"70000201006743400",14142:"70000201006743400",14190:"70000201006743400",14685:"70000201006743400",16028:"70000201006743400",16539:"70000201006743400",17017:"70000201006743400",18315:"70000201006743400",18530:"70000201006743400",18854:"70000201006743400",19288:"70000201006743400",20731:"70000201006743400",20750:"70000201006743400",21302:"70000201006743400",21466:"70000201006743400",21516:"70000201006743400",22129:"70000201006743400",23787:"70000201006743400",25012:"70000201006743400",50210:"70000201006743400",50374:"70000201006743400",51013:"70000201006743400",51322:"70000201006743400",51367:"70000201006743400",51462:"70000201006743400",53975:"70000201006743400",54450:"70000201006743400",54638:"70000201006743400",57185:"70000201006743400",57240:"70000201006743400",60894:"70000201006743400",67337:"70000201006743400",67369:"70000201006743400",103135:"70000201006743400",103405:"70000201006743400",219:"70000201006743401",305:"70000201006743401",382:"70000201006743401",651:"70000201006743401",652:"70000201006743401",5603:"70000201006743401",13597:"70000201006743401",13726:"70000201006743401",14942:"70000201006743401",19637:"70000201006743401",20165:"70000201006743401",51009:"70000201006743401",53986:"70000201006743401",56759:"70000201006743401",58858:"70000201006743401",282:"70000201006743402",287:"70000201006743402",288:"70000201006743402",292:"70000201006743402",297:"70000201006743402",298:"70000201006743402",351:"70000201006743402",379:"70000201006743402",394:"70000201006743402",396:"70000201006743402",538:"70000201006743402",556:"70000201006743402",573:"70000201006743402",574:"70000201006743402",575:"70000201006743402",580:"70000201006743402",584:"70000201006743402",589:"70000201006743402",593:"70000201006743402",709:"70000201006743402",786:"70000201006743402",996:"70000201006743402",1128:"70000201006743402",1556:"70000201006743402",1559:"70000201006743402",1617:"70000201006743402",8199:"70000201006743402",9776:"70000201006743402",9972:"70000201006743402",9973:"70000201006743402",16614:"70000201006743402",19505:"70000201006743402",19983:"70000201006743402",53116:"70000201006743402",203:"70000201006743403",223:"70000201006743403",225:"70000201006743403",237:"70000201006743403",243:"70000201006743403",245:"70000201006743403",270:"70000201006743403",345:"70000201006743403",346:"70000201006743403",567:"70000201006743403",609:"70000201006743403",683:"70000201006743403",685:"70000201006743403",687:"70000201006743403",774:"70000201006743403",5269:"70000201006743403",5683:"70000201006743403",10135:"70000201006743403",10566:"70000201006743403",13100:"70000201006743403",13789:"70000201006743403",15287:"70000201006743403",15761:"70000201006743403",16743:"70000201006743403",16863:"70000201006743403",129:"70000201006743404",269:"70000201006743404",214:"70000201006743404",272:"70000201006743404",330:"70000201006743404",400:"70000201006743404",401:"70000201006743404",416:"70000201006743404",421:"70000201006743404",422:"70000201006743404",517:"70000201006743404",547:"70000201006743404",8463:"70000201006743404",9281:"70000201006743404",16212:"70000201006743404",16615:"70000201006743404",20863:"70000201006743404",22115:"70000201006743404",23469:"70000201006743404",23494:"70000201006743404",52681:"70000201006743404",68617:"70000201006743404",70348:"70000201006743404",99998:"70000201006743404",137:"70000201006743405",233:"70000201006743405",341:"70000201006743405",342:"70000201006743405",404:"70000201006743405",405:"70000201006743405",406:"70000201006743405",408:"70000201006743405",409:"70000201006743405",410:"70000201006743405",412:"70000201006743405",413:"70000201006743405",414:"70000201006743405",425:"70000201006743405",426:"70000201006743405",427:"70000201006743405",430:"70000201006743405",431:"70000201006743405",433:"70000201006743405",437:"70000201006743405",524:"70000201006743405",525:"70000201006743405",645:"70000201006743405",677:"70000201006743405",1140:"70000201006743405",1141:"70000201006743405",4532:"70000201006743405",7689:"70000201006743405",7690:"70000201006743405",7691:"70000201006743405",7692:"70000201006743405",7693:"70000201006743405",7694:"70000201006743405",7695:"70000201006743405",7697:"70000201006743405",7699:"70000201006743405",7757:"70000201006743405",7900:"70000201006743405",8533:"70000201006743405",9041:"70000201006743405",9867:"70000201006743405",9949:"70000201006743405",10412:"70000201006743405",10792:"70000201006743405",12486:"70000201006743405",18305:"70000201006743405",18542:"70000201006743405",18547:"70000201006743405",18630:"70000201006743405",20989:"70000201006743405",22829:"70000201006743405",24814:"70000201006743405",52408:"70000201006743405",54884:"70000201006743405",56428:"70000201006743405",70164:"70000201006743405",156:"70000201006743406",204:"70000201006743406",205:"70000201006743406",380:"70000201006743406",641:"70000201006743406",697:"70000201006743406",16414:"70000201006743406",19661:"70000201006743406",22064:"70000201006743406",51092:"70000201006743406",51368:"70000201006743406",51407:"70000201006743406",52958:"70000201006743406",139:"70000201006743407",275:"70000201006743407",295:"70000201006743407",603:"70000201006743407",16285:"70000201006743407",16293:"70000201006743407",16322:"70000201006743407",19487:"70000201006743407",55693:"70000201006743407",300:"70000201006743408",353:"70000201006743408",354:"70000201006743408",355:"70000201006743408",356:"70000201006743408",359:"70000201006743408",526:"70000201006743408",555:"70000201006743408",605:"70000201006743408",606:"70000201006743408",608:"70000201006743408",612:"70000201006743408",14426:"70000201006743408"}},e.getCountryParam=function(e,t){"use strict";var n=this?this:module.exports;if(e){var a=n[e];if(a){t=t.toLowerCase()||n.defaultCountry;var i=t.split("_"),o=i[1]||i[0];if(o&&o in a)return a[o]}}},e.defaultCountry="ru",e.cookieDomain={ru:".2gis.ru",kz:".2gis.kz",ua:".2gis.ua",ae:".2gis.ae",cy:".2gis.com.cy",cz:".2gis.cz",it:".2gis.it",cl:".2gis.cl",kg:".2gis.kg"},e.projectDomain={ru:"2gis.ru",kz:"2gis.kz",ua:"2gis.ua",cy:"2gis.com.cy",ae:"2gis.ae",cz:"2gis.cz",it:"2gis.it",cl:"2gis.cl",kg:"2gis.kg"},e.projectURL={ru:"http://2gis.ru",kz:"http://2gis.kz",ua:"http://2gis.ua",cy:"http://2gis.com.cy",ae:"http://2gis.ae",cz:"http://2gis.cz",it:"http://2gis.it",cl:"http://2gis.cl",kg:"http://2gis.kg"},e["mailer.replay"]={ru:"no-reply@2gis.ru",kz:"no-reply@2gis.kz",ua:"no-reply@2gis.ua",ae:"no-reply@2gis.ae",cl:"no-reply@2gis.cl",cz:"no-reply@2gis.cz",it:"no-reply@2gis.it",kg:"no-reply@2gis.kg",cy:"no-reply@2gis.com.cy"},e["analytics.google.keys"]={ru:"UA-25529177-1",ua:"UA-50289069-1",kz:"UA-50294176-1",ae:"UA-52121028-1",cy:"UA-41860941-1",cz:"UA-44059075-1",it:"UA-31926139-1",cl:"UA-47442254-1",kg:"UA-69161540-1"},e["analytics.google.bookletsKey"]={ru:"UA-38243181-5"},e["analytics.google.floorsKey"]={ru:"UA-72645814-1"},e["analytics.google.testsKey"]={ru:"UA-76043536-1"},e["analytics.yandex.keys"]={ru:"837864",ua:"25868507",kz:"25868534",ae:"25327145",cy:"21563206",cz:"22313836",it:"14660359",cl:"23730703",kg:"33196313"},e["analytics.yandex.bookletsKey"]={ru:"25091474"},e["analytics.tns"]={ru:{account:"2gis_ru",tmsec:"2gis_site"},ua:{account:"2gis_ru",tmsec:"2gis_site"},kz:{account:"2gis_ru",tmsec:"2gis_site"},ae:null,cz:null,cy:null,cl:null,it:null},e["share.widgetLink"]={ru:"http://api.2gis.ru/?utm_source=2gis.ru&utm_medium=sharelink&utm_campaign=widget",uk_ua:"http://firmsonmap.2gis.ua/?utm_source=2gis.ru&utm_medium=sharelink&utm_campaign=widget"},e["helpLink.feedback"]={ru:"http://help.2gis.ru/feedback/",ua:"http://help.2gis.ua/feedback/",uk_ua:"http://help.2gis.ua/uk/feedback/",kz:"http://help.2gis.kz/feedback/",cy:"http://help.2gis.com.cy/feedback/",cz:"http://info.2gis.cz/feedback/",it:"http://info.2gis.it/feedback/",ae:"http://info.2gis.ae/feedback/",kg:"http://help.2gis.kg/feedback/"},e["helpLink.licensing"]={ru:"http://help.2gis.ru/licensing-agreement/",cy:"http://law.2gis.com.cy/licensing-agreement/",kz:"http://law.2gis.kz/licensing-agreement/",ua:"http://law.2gis.ua/licensing-agreement/",ae:"http://law.2gis.ae/licensing-agreement/",cz:"http://law.2gis.cz/licensing-agreement/",it:"http://privacy.2gis.it",cl:"http://law.2gis.cl/licensing-agreement/",kg:"http://law.2gis.kg/licensing-agreement/"},e["helpLink.photosUploaderRules"]={ru:"http://law.2gis.ru/informational-requirements/",cy:"http://law.2gis.com.cy/informational-requirements/",kz:"http://law.2gis.kz/informational-requirements/",ua:"http://law.2gis.ua/informational-requirements/",ae:"http://law.2gis.ae/informational-requirements/",cz:"http://law.2gis.cz/informational-requirements/",it:"http://law.2gis.it/licensing-agreement/",cl:"http://law.2gis.cl/informational-requirements/",kg:"http://law.2gis.kg/informational-requirements/"},e["law.rules"]={ru:"http://law.2gis.ru/rules/",cy:"http://law.2gis.com.cy/rules/",kz:"http://law.2gis.kz/rules/",ua:"http://law.2gis.ua/rules/",ae:"http://law.2gis.ae/rules/",cz:"http://law.2gis.cz/rules/",it:"http://law.2gis.com.cy/rules",cl:"http://law.2gis.cl/rules",kg:"http://law.2gis.kg/rules/"},e.defaultAccount={ru:"account.2gis.ru"},e.mapsDomain={ru:"2gis.ru"},e["Flamp.name"]={ru:"flamp.ru"},e["Flamp.urlFirm"]={ru:"http://flamp.ru/addreview/$firmId?utm_source=2gis-online-v4&utm_medium=link&utm_campaign=2gis-online-v4"},e["Flamp.url"]={ru:"http://flamp.ru/?utm_source=2gis-online-v4&utm_medium=link&utm_campaign=2gis-online-v4"},e["browsers.chromeLink"]={ru:"http://www.google.ru/intl/ru/chrome/",uk_ua:"https://www.google.com/intl/uk/chrome/browser/desktop/",ae:"http://www.google.com/intl/en/chrome/browser/",cy:"http://www.google.com/intl/en/chrome/browser/",cz:"http://www.google.com/intl/cz/chrome/browser/",it:"http://www.google.com/intl/it/chrome/browser/",cl:"http://www.google.com/intl/es/chrome/browser/"},e["browsers.firefoxLink"]={ru:"http://www.mozilla.org/ru/firefox/new/",uk_ua:"https://www.mozilla.org/uk/firefox/new/",ae:"http://www.mozilla.org/en-US/firefox/",cy:"http://www.mozilla.org/en-US/firefox/",cz:"http://www.mozilla.org/cs-CZ/firefox/",it:"http://www.mozilla.org/it-IT/firefox/",cl:"http://www.mozilla.org/es-CL/firefox/"},e["browsers.safariLink"]={ru:"http://www.apple.com/safari/"},e["browsers.operaLink"]={ru:"http://www.opera.com/ru",uk_ua:"http://www.opera.com/uk",ae:"http://www.opera.com/",cy:"http://www.opera.com/",cz:"http://www.opera.com/cs",it:"http://www.opera.com/it",cl:"http://www.opera.com/es"},e["browsers.ieLink"]={ru:"http://windows.microsoft.com/ru-ru/internet-explorer/download-ie",uk_ua:"http://windows.microsoft.com/uk-ua/internet-explorer/download-ie",ae:"http://windows.microsoft.com/en-us/internet-explorer/download-ie",cy:"http://windows.microsoft.com/en-us/internet-explorer/download-ie",cz:"http://windows.microsoft.com/cs-cz/internet-explorer/download-ie",it:"http://windows.microsoft.com/it-it/internet-explorer/download-ie",cl:"http://windows.microsoft.com/es-cl/internet-explorer/download-ie"},e["storeLink.onlineApp.android"]={ae:"http://ad.apps.fm/NUHv4q4icT7evRDj4blAO15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYe7MFeIzGcYPm4MDEaNaXpxZfG3ClPFzskPlSZugmW2suH4mtsMS_kMWSvITQkyqXE",cl:"http://ad.apps.fm/vE8QVF3-otX4ua9EUdNjxV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYey8eJtC5R9mp3iDHxGzaI_WiJqVyDH8cVnJrPZ3b3m97lVj-r1MZ-GrE696N3TiO8",cz:"http://ad.apps.fm/Y-7hdYgnMitHAAiCn082Ol5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2cr28TuSij5WqSuZpHZeLZ2Kim_su4DP-dBafoeulrJ1NG_hJ_lJ5SHXW-pnqJDBPFyw5ivP5WxXbjtT46vIWYU",cy:"http://ad.apps.fm/2C4UVGWNYWkarDrdq0ZKaF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYdT4TUBWS8dN_Y2AeOJ-TljNG_hJ_lJ5SHXW-pnqJDBPFyw5ivP5WxXbjtT46vIWYU",it:"http://ad.apps.fm/8GdGu3CjXNCkCpRjT4nZ2F5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2Xn0deiA5YI8KOvtbN54ITKbg1HChU2pn6LWS4gVAB4SZfG3ClPFzskPlSZugmW2suH4mtsMS_kMWSvITQkyqXE",ru:"http://ad.apps.fm/nXb38xRCvPeacvj-gVpqe15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XJVuDFaAm5lTPjnEeMzbMh0NG_hJ_lJ5SHXW-pnqJDBPFyw5ivP5WxXbjtT46vIWYU",ua:"http://ad.apps.fm/HIq6qM96MCrmlDsfIMuZMl5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XJm-Ym1J2nYIwP57-EtFemtHXP8gEWJdOsNZzNTRQTo9FkzHIWeR1AowW4hBySXQuA",uk_ua:"https://ad.apps.fm/coVP6ytmWkOXOZE1Z6TY015KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2cgC4PGV_BxgjxiXC0i_IWdISgHxp2VMW1a4Qn7aYmuMHXP8gEWJdOsNZzNTRQTo9EUBRrZiabshcg_uMcgM5nU",kz:"http://ad.apps.fm/2lcX4_ql9cYWEplSu5QXnF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XJzGgqNU2h5bjVA9amoE4wPS6sSwL67eLrj7oxGrDCiv_o-WtjLLbN_OKymCu3fKXI",kg:"https://ad.apps.fm/GHJDNabRR_aYTD50Nz9Ib15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XJOgYJDKFS5UjEBLn4xaXgvS6sSwL67eLrj7oxGrDCiv_o-WtjLLbN_OKymCu3fKXI"},e["storeLink.onlineApp.ios"]={ae:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Dubai-dashboards",cl:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Santiago-dashboards&language=es",cz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Prague-dashboards&language=cs",cy:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Cyprus-dashboards",
it:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Italy-dashboards",ru:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Russia-dashboards&language=ru",ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Ukraine-dashboards&language=ru",uk_ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Ukraine-dashboards&language=uk",kz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Kazakhstan-dashboards&language=ru",kg:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Kyrgyzstan-dashboards&language=ru"},e["storeLink.onlineApp.windowsphone"]={ae:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Dubai-dashboards",cl:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Santiago-dashboards&language=es",cz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Prague-dashboards&language=cs",cy:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Cyprus-dashboards",ru:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Russia-dashboards&language=ru",ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Ukraine-dashboards&language=ru",uk_ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Ukraine-dashboards&language=uk",kz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Kazakhstan-dashboards&language=ru",kg:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Kyrgyzstan-dashboards&language=ru"},e["storeLink.onlineApp.blackberry"]={ru:"http://appworld.blackberry.com/webstore/content/39967127/",it:"http://appworld.blackberry.com/webstore/content/39967127/?lang=it"},e["storeLink.desktopApp.android"]={ru:"http://ad.apps.fm/FF3KkWlV_6tTcWZ_8BCeOF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2e35BTNY3xA31yLzzVCurwY6yKUvQ_r-sVO9RWaT04be_TfyUg6994Zqest3f_8Ydw"},e["storeLink.desktopApp.ios"]={ru:"http://ad.apps.fm/9EcssO0KS1Jrtae30jHwkfE7og6fuV2oOMeOQdRqrE0abUvljpwPHWyPJLNBy9kEtxIa9h_28X4hy8PXNifl2l5X1-VP7Zz4PkMq5iEFAt0"},e["storeLink.desktopApp.windowsphone"]={ru:"http://ad.apps.fm/KVoCAx8F-wd1FLPN7YaptG57kbhTUI_kR12tnKkQtIGI3Ya9k6g5GFB8XT_0ph6DoV-EC0drXsL0OIhN7nQ7ivJUdWOl14Ompve64HhsEBVbvpTYhFEGbgz7p4bhFviXfwpDrHHW550XVQJtfiMs6DBf3U8CiTnTXZf8YBevdZ5ruBBNZQMaCHpW_eGOuXqa"},e["storeLink.desktopApp.blackberry"]={ru:"http://appworld.blackberry.com/webstore/content/39967127/?countrycode=RU&lang=ru"},e["storeLink.phoneBar.android"]={ae:"http://ad.apps.fm/NUf3OHewuL6uimB8mPZqS15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYeM6g1DiBoDaMJbAG4K5RwhFtNLJ62MdGHvw3pbLl211uH4mtsMS_kMWSvITQkyqXE",cl:"http://ad.apps.fm/dqY-4vP3-ZCQIyxH_KMCUF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYdd2piswHXhH4bd6Cj9Kn01obrg3e5-rkTUK88qWPuWbblVj-r1MZ-GrE696N3TiO8",cz:"http://ad.apps.fm/hsgbIHx9tjbnepFTsCos1l5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2cr28TuSij5WqSuZpHZeLZ2v1LFlplxYPZOCCwLD8RG5NdcEwY4CCtSJy7c4vMnXNlyw5ivP5WxXbjtT46vIWYU",cy:"http://ad.apps.fm/SK5iMSIeg62qEADqTu5GnV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYcFdUV5zRcr8ezapwhGFL4_NdcEwY4CCtSJy7c4vMnXNlyw5ivP5WxXbjtT46vIWYU",it:"http://ad.apps.fm/ipeHmL0DVcztaUwcn3knXF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2Xn0deiA5YI8KOvtbN54ITItbXvoN0053O-pysAKNln1FtNLJ62MdGHvw3pbLl211uH4mtsMS_kMWSvITQkyqXE",ru:"http://ad.apps.fm/uFkrLg9IW75r8T7Bt6E0515KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XLKHBCk4ObDVqfDgfpk1MHHNdcEwY4CCtSJy7c4vMnXNlyw5ivP5WxXbjtT46vIWYU",ua:"http://ad.apps.fm/yBhd0qazFI2KbSXXvDOL0V5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XLklIVMAQs2XAqHfrSCVH-w-Avzcxj84L3-7x-XCnzwflkzHIWeR1AowW4hBySXQuA",uk_ua:"https://ad.apps.fm/w_zSpgotHymjb1usQRecvl5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2cgC4PGV_BxgjxiXC0i_IWdRKyiiHHG4acAnXo2RhVVu-Avzcxj84L3-7x-XCnzwfkUBRrZiabshcg_uMcgM5nU",kz:"http://ad.apps.fm/C3PI-hocUOFvtBy_02Zdll5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XID8CCa-WFt7KJSDN1hjbJwuzt56mekiHAV_VW9LLU-E_o-WtjLLbN_OKymCu3fKXI",kg:"https://ad.apps.fm/L5bkHJvyCkSH89EqjvVJ915KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XLHFVIo8aQ7Nuilv5R7DKsnuzt56mekiHAV_VW9LLU-E_o-WtjLLbN_OKymCu3fKXI"},e["storeLink.phoneBar.ios"]={ae:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Dubai-mobile-bar",cl:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Santiago-mobile-bar&language=es",cz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Prague-mobile-bar&language=cs",cy:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Cyprus-mobile-bar",it:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Italy-mobile-bar",ru:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Russia-mobile-bar&language=ru",ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Ukraine-mobile-bar&language=ru",uk_ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Ukraine-mobile-bar&language=uk",kz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Kazakhstan-mobile-bar&language=ru",kg:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Kyrgyzstan-mobile-bar&language=ru"},e["storeLink.phoneBar.windowsphone"]={ae:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Dubai-mobile-bar",cl:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Santiago-mobile-bar&language=es",cz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Prague-mobile-bar&language=cs",cy:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Cyprus-mobile-bar",ru:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Russia-mobile-bar&language=ru",ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Ukraine-mobile-bar&language=ru",uk_ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Ukraine-mobile-bar&language=uk",kz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Kazakhstan-mobile-bar&language=ru",kg:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Kyrgyzstan-mobile-bar&language=ru"},e["storeLink.phoneDashboard.android"]={ae:"http://ad.apps.fm/mkKlRFa-YU29hWqLl7g2B15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYeBdnwyFiUb9LhB0HM9EohqqTQEdjRpdky1-8o3ZjVHxQ8DnPlNgLiU0W4p3txwccc",cl:"http://ad.apps.fm/565H5AoWlVvlzboV0bGChl5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYdGBLjpC-lRsOlYwUyjImyUq_EmKuzbM_DbhvV0_q4mzVkzHIWeR1AowW4hBySXQuA",cz:"http://ad.apps.fm/vKbGqmvJ9A2f3gDwnWiunl5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2cr28TuSij5WqSuZpHZeLZ3fhnqVF6U0qSxEl4n4YaWgvlc9xTDg3Ihwt_88Jg3TK-H4mtsMS_kMWSvITQkyqXE",cy:"http://ad.apps.fm/38KnSI-cnsUK2f-xclqQYF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYckixw2ICnFyWfSEY_Dn_jivlc9xTDg3Ihwt_88Jg3TK-H4mtsMS_kMWSvITQkyqXE",it:"http://ad.apps.fm/r3yk0WEuAMS-luvEXDlLIV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2Xn0deiA5YI8KOvtbN54ITJ3IgH5T1WMToVZ7o2deDSiqTQEdjRpdky1-8o3ZjVHxQ8DnPlNgLiU0W4p3txwccc",ru:"http://ad.apps.fm/oTivfpnruHqoCk23QXz2wV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XLOdwz18lxXXM06AB4sA4rMvlc9xTDg3Ihwt_88Jg3TK-H4mtsMS_kMWSvITQkyqXE",ua:"http://ad.apps.fm/I225B0q1rTEJ7Vn3-lBT0l5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XJhd8Kcj85IcKw31Q0scvm6NQ4k9VbNF2KAs3VOOL8_g1yw5ivP5WxXbjtT46vIWYU",uk_ua:"https://ad.apps.fm/spVzRbXscruFDoyBIC5J_l5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2cgC4PGV_BxgjxiXC0i_IWdgXpwsiEX7CiNHzD9uSrcPNQ4k9VbNF2KAs3VOOL8_g3C4u8b4g02tFhkJWpexiFQ",kz:"http://ad.apps.fm/Fzqb5K8fD2Jdk_Qj-m72VV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XKelgWAtBQtKhSLx2o0aVcgdRE-fQYQ4KcdYQhqLgecvnL5uB-2jc1WHLt9rHMUm7o",kg:"https://ad.apps.fm/sFvjj1lNWI_UpV5GOnSfEl5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XJh2hUIgcrVHREM5sH1e2QbdRE-fQYQ4KcdYQhqLgecvnL5uB-2jc1WHLt9rHMUm7o"},e["storeLink.phoneDashboard.ios"]={ae:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Dubai-mobile-dashboard",cl:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Santiago-mobile-dashboard&language=es",cz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Prague-mobile-dashboard&language=cs",cy:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Cyprus-mobile-dashboard",it:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Italy-mobile-dashboard",ru:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Russia-mobile-dashboard&language=ru",ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Ukraine-mobile-dashboard&language=ru",uk_ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Ukraine-mobile-dashboard&language=uk",kz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Kazakhstan-mobile-dashboard&language=ru",kg:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Kyrgyzstan-mobile-dashboard&language=ru"},e["storeLink.phoneDashboard.windowsphone"]={ae:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Dubai-mobile-dashboard",cl:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Santiago-mobile-dashboard&language=es",cz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Prague-mobile-dashboard&language=cs",cy:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Cyprus-mobile-dashboard",ru:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Russia-mobile-dashboard&language=ru",ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Ukraine-mobile-dashboard&language=ru",uk_ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Ukraine-mobile-dashboard&language=uk",kz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Kazakhstan-mobile-dashboard&language=ru",kg:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Kyrgyzstan-mobile-dashboard&language=ru"},e["storeLink.phoneDashboard.blackberry"]=e["onlineAppStoreLink.blackberry"],e["storeLink.tabletDashboard.android"]={ae:"https://ad.apps.fm/KYrsTVqy6J3yGPSlSXqTjV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYdy1XE-aG_M_SAP4oMuZZ2WmN2HbW82C8bkichF2MLGpQ",cl:"https://ad.apps.fm/kayFSqFJXvTHEjP-YpE3B15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYe4-iPEPnVJJvRXzp0ETiBW962j2rmy6xdZhJ9c9XfxpfCYagKnjd3JTKLywLOw94o",cz:"https://ad.apps.fm/bMtf5V8NWqfpYpUlkuqHM15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2cr28TuSij5WqSuZpHZeLZ30Obwrtl9_VRcNp4Wujo_FFS7pK3kZH689qIod0OfUiw",cy:"https://ad.apps.fm/W7lQB3tNbz_8-uGzMgfY515KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYc3WWWsrgKi3Vv1TxqPBnpaFS7pK3kZH689qIod0OfUiw",it:"https://ad.apps.fm/IKvuUrJgifD0-YjhwVSAuF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2Xn0deiA5YI8KOvtbN54ITIFX3L_MnAk5RzOgZPbTeVImN2HbW82C8bkichF2MLGpQ",ru:"https://ad.apps.fm/I0jKxaayxO_7sM8ZMqI8rF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XIMIcDeFz5VK6woy-4A-oT8FS7pK3kZH689qIod0OfUiw",ua:"https://ad.apps.fm/_wWE5fwVFdQ7vaRRVXdklV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XLxs1JDKylc_A6LP7I1tBqtvSOvMf0_wuxvVTQygrj5PdBAW28aYabvxh6AeQ1YLF8",uk_ua:"https://ad.apps.fm/yObeKdD4zUvAqAO1mK2Ix15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2cgC4PGV_BxgjxiXC0i_IWe5FOMTUvNci8NFwCTINHDUnHc75FoYnNPrn7d1wx37v-AJcmmvEeEAmt0UppTDeEA",kz:"https://ad.apps.fm/f4_CVTNOPSdkv3rb5-6Vw15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XK55mw__pHJKrXQSHG8KPa1b17Bm51M6a3ZV6Orhe_GVuAJcmmvEeEAmt0UppTDeEA",kg:"https://ad.apps.fm/VeImE0q7-z0qr7gK6jDpIF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XKq8u9Bb8I-NtxakW9DRA5Mb17Bm51M6a3ZV6Orhe_GVuAJcmmvEeEAmt0UppTDeEA"},e["storeLink.tabletDashboard.ios"]={ae:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Dubai-dashboards-tablet",cl:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Santiago-dashboards-tablet&language=es",cz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Prague-dashboards-tablet&language=cs",cy:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Cyprus-dashboards-tablet",it:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Italy-dashboards-tablet",ru:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Russia-dashboards-tablet&language=ru",ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Ukraine-dashboards-tablet&language=ru",uk_ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Ukraine-dashboards-tablet&language=uk",kz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Kazakhstan-dashboards-tablet&language=ru",kg:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Kyrgyzstan-dashboards-tablet&language=ru"},e["storeLink.tabletDashboard.windowsphone"]={ae:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Dubai-dashboards-tablet",cl:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Santiago-dashboards-tablet&language=es",cz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Prague-dashboards-tablet&language=cs",cy:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Cyprus-dashboards-tablet",ru:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Russia-dashboards-tablet&language=ru",ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Ukraine-dashboards-tablet&language=ru",uk_ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Ukraine-dashboards-tablet&language=uk",kz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Kazakhstan-dashboards-tablet&language=ru",kg:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Kyrgyzstan-dashboards-tablet&language=ru"},e["storeLink.downloadBtn.android"]={ae:"http://ad.apps.fm/oBR6-D2M-4skWYpObDlDxl5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYcTTcmrjKzNunQM1x7jJr5f2g6gz1h6cDL9SSoFsf60U-AJcmmvEeEAmt0UppTDeEA",cl:"http://ad.apps.fm/hmW_ucgZE5ZSK2vkcH63tl5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYfylzqktgmm2IvlfIkwHhgVFYtFEPb7tjL4V662F3m4h45G5ePbYwASqdTZiTElLjg",cz:"http://ad.apps.fm/yXmPWGOrimtEpZNzu2Wdk15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2cr28TuSij5WqSuZpHZeLZ1TSQRzRzjAJTqTYI39YEbHGrJGvEnYOgWA_jer0Z5RpznvcIcpBNeRwNlg5rDky64",cy:"http://ad.apps.fm/0s3vmV2NMCaF20dmE1YRJF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYc2DkzfkE9O1p28LIyAOARUGrJGvEnYOgWA_jer0Z5RpznvcIcpBNeRwNlg5rDky64",it:"http://ad.apps.fm/tELzqg4njCPD8JOOj8oCjl5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2Xn0deiA5YI8KOvtbN54ITIei0KZKrYX0yRn06N8wvjz2g6gz1h6cDL9SSoFsf60U-AJcmmvEeEAmt0UppTDeEA",ru:"http://ad.apps.fm/6VZUK9PXFvDLCFtR13gWOl5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XKYFktemP4midiSMxOymDBrGrJGvEnYOgWA_jer0Z5RpznvcIcpBNeRwNlg5rDky64",ua:"http://ad.apps.fm/d_-hY4rCJQaY-K6my5kIol5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XI-N9e40Scw3ET-9_wruKv_BiLtYK9kDMV869xajDi7NtVqD_NG2ehaPCfA3pfep5s",uk_ua:"https://ad.apps.fm/M6V7OhNSB2soNIrp04ZruV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2cgC4PGV_BxgjxiXC0i_IWeFkEHP26aZqn5axBglZFdKBiLtYK9kDMV869xajDi7NuXIPaWV7JzveV5JfB1MVu8",kz:"http://ad.apps.fm/Obwd_yvnQ7iKoIIzzycGl15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XL-rVMqfBaCOeAA8dIjGFVboSgqZDGtFf54CkJe4Jc9zgUbrj4AOFxDhZNuL5TZJag",kg:"https://ad.apps.fm/7P7LluFXk4ZzWizcq5ifXl5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XJAgMUbF-WZ1NEU7gmh5DbtoSgqZDGtFf54CkJe4Jc9zgUbrj4AOFxDhZNuL5TZJag"},e["storeLink.downloadBtn.ios"]={ae:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Dubai-Download-button",cl:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Santiago-Download-button&language=es",cz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Prague-Download-button&language=cs",cy:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Cyprus-Download-button",it:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Italy-Download-button",ru:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Russia-Download-button&language=ru",ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Ukraine-Download-button&language=ru",uk_ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Ukraine-Download-button&language=uk",kz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Kazakhstan-Download-button&language=ru",kg:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Kyrgyzstan-Download-button&language=ru"},e["storeLink.downloadBtn.windowsphone"]={ae:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Dubai-Download-button",cl:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Santiago-Download-button&language=es",cz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Prague-Download-button&language=cs",cy:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Cyprus-Download-button",ru:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Russia-Download-button&language=ru",ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Ukraine-Download-button&language=ru",uk_ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Ukraine-Download-button&language=uk",kz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Kazakhstan-Download-button&language=ru",kg:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Kyrgyzstan-Download-button&language=ru"},e["storeLink.downloadBtn.blackberry"]=e["storeLink.onlineApp.blackberry"],e["storeLink.promoMobile.android"]={ae:"http://ad.apps.fm/q1UE4K-6mr1Rnwujo1g2aV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2ZAhlBytoV_2uf8QNqFuCQaviVSOsdJxf0_2toTc7tGratpWe1m7YHatjpEC0NrbU9BAW28aYabvxh6AeQ1YLF8",cl:"http://ad.apps.fm/q1UE4K-6mr1Rnwujo1g2aV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2ZAhlBytoV_2uf8QNqFuCQaviVSOsdJxf0_2toTc7tGratpWe1m7YHatjpEC0NrbU9BAW28aYabvxh6AeQ1YLF8",cz:"http://ad.apps.fm/q1UE4K-6mr1Rnwujo1g2aV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2ZAhlBytoV_2uf8QNqFuCQaviVSOsdJxf0_2toTc7tGratpWe1m7YHatjpEC0NrbU9BAW28aYabvxh6AeQ1YLF8",cy:"http://ad.apps.fm/q1UE4K-6mr1Rnwujo1g2aV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2ZAhlBytoV_2uf8QNqFuCQaviVSOsdJxf0_2toTc7tGratpWe1m7YHatjpEC0NrbU9BAW28aYabvxh6AeQ1YLF8",it:"http://ad.apps.fm/q1UE4K-6mr1Rnwujo1g2aV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2ZAhlBytoV_2uf8QNqFuCQaviVSOsdJxf0_2toTc7tGratpWe1m7YHatjpEC0NrbU9BAW28aYabvxh6AeQ1YLF8",ru:"http://ad.apps.fm/3zkHKhGrgf6mttGjwsoYMF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XKz2A8n8yJTKDtoBW7XlU71FJt4fcIlWx75GiVmvrsqGA",ua:"http://ad.apps.fm/oUlY4oHOpCjZmHro5ycYx15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XJp7Dk9AEH1TUfgWW1OkBFZLIJIhvsLMe9RurFLW7ZPhA",uk_ua:"https://ad.apps.fm/EegjEoqqzO6IEGyPofkCIF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2cgC4PGV_BxgjxiXC0i_IWecpXs5zukiPUWzAgvFg4QNWkX1WzyKsn102Hd2vq4_4A",kz:"http://ad.apps.fm/oukzf-3ydf2y6BCrceG4OF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XIJmhfxtbQY2e_drfoLVCinxyuDTxaV71KgMjsoSrUhyA",kg:"https://ad.apps.fm/8XEcDlr2KLyIY8dTIaLC815KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XLTXd38c04c9eNJWINSD8FgxyuDTxaV71KgMjsoSrUhyA"},e["storeLink.promoMobile.ios"]={ae:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Dubai-promo-card",cl:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Santiago-promo-card&language=es",cz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Prague-promo-card&language=cs",cy:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Cyprus-promo-card",it:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Italy-promo-card",ru:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Russia-promo-card&language=ru",ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Ukraine-promo-card&language=ru",uk_ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Ukraine-promo-card&language=uk",kz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Kazakhstan-promo-card&language=ru",kg:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Kyrgyzstan-promo-card&language=ru"},e["storeLink.promoMobile.windowsphone"]={ae:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Dubai-promo-card",cl:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Santiago-promo-card&language=es",cz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Prague-promo-card&language=cs",cy:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Cyprus-promo-card",ru:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Russia-promo-card&language=ru",ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Ukraine-promo-card&language=ru",uk_ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Ukraine-promo-card&language=uk",kz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Kazakhstan-promo-card&language=ru",kg:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Kyrgyzstan-promo-card&language=ru"},e["storeLink.promoMobile.blackberry"]=e["storeLink.onlineApp.blackberry"],e["storeLink.promoMobileGeoCard.android"]={ae:"http://ad.apps.fm/l900CpIp_vCnxMVKqIRvGl5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYcpwPwn65rVfO_QiYyb3gS6-anTmEUJ-3-FA37QxMGy0Q",cl:"http://ad.apps.fm/9j5-Wc2uVgypm6gEnx5tNl5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYfdCcDN768Og3pHIDLoo9G4w_iOjIfVTWCX02TS-uMDEg",cz:"http://ad.apps.fm/lI-YTtLBme6navjiuUNikV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2cr28TuSij5WqSuZpHZeLZ3fNOLCp4GWSehTFbxvQ2PxppyhrMRTlHrQ9uidsWXt6w",cy:"http://ad.apps.fm/nuATjYuXnWVHyz98ouIvG15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYe8575Z2s_wvh3y9xJymlgoppyhrMRTlHrQ9uidsWXt6w",it:"http://ad.apps.fm/EDV37KOuYczPQ1jdXwIBJl5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2Xn0deiA5YI8KOvtbN54ITKXhV8E-ooYx45OZu70zmc9-anTmEUJ-3-FA37QxMGy0Q",ru:"http://ad.apps.fm/bPD3-X8P9twInkMDpykF7l5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XJqAsATnlDFPugQbfuAMwEgppyhrMRTlHrQ9uidsWXt6w",ua:"http://ad.apps.fm/V8LnWuiXl3YBAbDJ4-BVPV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XL1PgQo1QER9r0J2UVaH2G6B2X-BWOIYEuhnj8bIzONJA",uk_ua:"https://ad.apps.fm/dIHTnJIHjqL2ihYRLiPmWV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2cgC4PGV_BxgjxiXC0i_IWcURWxdXRZan3V5xFimKHEBIOml8NlsC-3QNtQObcEUNQ",kz:"http://ad.apps.fm/xYSKcmnfqIV0lT6sQXpQ7F5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XIQzVaKXAgOmEb4IWjYiqZ88JB9aOBBZpPGDvP2d0KVPQ",kg:"https://ad.apps.fm/tot161bEbCBFZTBOkS97c15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XLmbjbsm829FxZZWRMKbMWo8JB9aOBBZpPGDvP2d0KVPQ"},e["storeLink.promoMobileGeoCard.ios"]={ae:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Dubai-promo-geocard",cl:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Santiago-promo-geocard&language=es",cz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Prague-promo-geocard&language=cs",cy:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Cyprus-promo-geocard",it:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Italy-promo-geocard",ru:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Russia-promo-geocard&language=ru",ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Ukraine-promo-geocard&language=ru",uk_ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Ukraine-promo-geocard&language=uk",kz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Kazakhstan-promo-geocard&language=ru",kg:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=64206&site_id_ipad=64314&offer_id=365620&my_campaign=Kyrgyzstan-promo-geocard&language=ru"},e["storeLink.promoMobileGeoCard.windowsphone"]={ae:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Dubai-promo-geocard",cl:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Santiago-promo-geocard&language=es",cz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Prague-promo-geocard&language=cs",
cy:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Cyprus-promo-geocard",ru:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Russia-promo-geocard&language=ru",ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Ukraine-promo-geocard&language=ru",uk_ua:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Ukraine-promo-geocard&language=uk",kz:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Kazakhstan-promo-geocard&language=ru",kg:"https://152360.api-06.com/serve?action=click&publisher_id=152360&site_id=92168&offer_id=365622&my_campaign=Kyrgyzstan-promo-geocard&language=ru"},e["storeLink.promoMobileGeoCard.blackberry"]=e["storeLink.onlineApp.blackberry"],e["storeLink.promoMobileFull.android"]={ru:"http://ad.apps.fm/ltuAnaPBqhCaO0s67vjLRl5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XKbMvTm9BvxkLhzoGBft0WUKZ8m9ZtAfsro0CRUicGjbJryTAmtAJxMm1cOTsf7Y-w",ua:"http://ad.apps.fm/t1oQ9_xUHWc-ZZviymuLx15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XJObCfvKLus3t8XHocgjyP55fewAzrEUOwhZlojZh8vkwFaLu_Q_r8VA2acVaaZAFY",kz:"http://ad.apps.fm/EQF07UI8IOT66dNzvfij1F5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XJGn66GNdDt_iRPNnrtnPzoIXu-Ygl3m-sKRHr3YyTapxXnD_kNQb3rAi1n8CpE8MQ"},e["storeLink.promoMobileFull.ios"]={ru:"http://ad.apps.fm/dE3lIihY-ENjBF2oP147TvE7og6fuV2oOMeOQdRqrE2npKDfumU1Isr3QZHkRJv6A7vZyp-P73MhidlDfkA9u_AipXqspn3c7W-ThU4K8Aj_MStBuHiNRWnZRi5q2VYs",ua:"http://ad.apps.fm/_f6SFENFmNd2MzWcsS1Na_E7og6fuV2oOMeOQdRqrE3Bhfklw6Cay_me5tmASQc1_YoUTKlnkFLI_FYVCZN4qwekqZiE29A05DZlhM2eDpkFTJ-dniZ_HGy8v7iGZTap",kz:"http://ad.apps.fm/3cBwR_cupsvsx9_nNwZhY_E7og6fuV2oOMeOQdRqrE0O3CmFN5MemqunqDVv2-ugo8lTtUQtRUFnBk-ZcSsTni4Wzk1NyaWL-TX_zZ5WGUx-n88yi9YIGUR-iVBHKz4q"},e["storeLink.promoMobileFull.windowsphone"]={ru:"http://ad.apps.fm/nx1zglRSHOouh0EMn0-zAEBWICJR60NICdfKa2YoID11E8ifHSMUn4YOorUF_7xRzRpc26SkpMU1ZTDEkr5R71u-lNiEUQZuDPunhuEW-JcflIUc_kEVcHVl5b246aTVF4ylOBW94fG-Mly9J9hywKLOmtWoXgcIZmXKtoIFwC4",ua:"http://ad.apps.fm/WqWRS0q4c2ILwRDvlEtrn0BWICJR60NICdfKa2YoID11E8ifHSMUn4YOorUF_7xRzRpc26SkpMU1ZTDEkr5R71u-lNiEUQZuDPunhuEW-JeRge7C3DLLLlrUmbGMLa099-yusmQ4bs_ITKKjFlb5IJWgZ1kRzNs1I8Apf9kmy7fQQFtvGmGm78YegHkNWCxf",kz:"http://ad.apps.fm/kAZe5VLWT5R8HNk8q6Xok0BWICJR60NICdfKa2YoID11E8ifHSMUn4YOorUF_7xRzRpc26SkpMU1ZTDEkr5R71u-lNiEUQZuDPunhuEW-JfCJ1qpgbin4Suyn9mc7-87GwEG36oRHT3nKv2H-fq2I_dGRw-2YZhZ7qPl7xVTqx-a8kwJrQCcTJtXDk7H-2Ps"},e["storeLink.promoMobileFull.blackberry"]=e["storeLink.onlineApp.blackberry"],e["onlineApp.storeLink.p2d.android"]={ae:"http://ad.apps.fm/GCLJIAvrl46rQ6P6VC9YkF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYeZyc35RbU1KU-6dAQGXSaLQ4Hzn2npNs5W10VysRtEtg",cl:"http://ad.apps.fm/g6BNC6Z_vmjymLNmC0u9_F5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYfFtbbnto1fCgSgq1N9UQL0MJd-J3M38I5PUa7un7GvPw",cz:"http://ad.apps.fm/b1WRQ3vNxcwp3DaxwDUUMV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2cr28TuSij5WqSuZpHZeLZ15FnVBvJbaZYAcxUNZgNY-nM22ZRgmhgyCaA5usAlRCg",cy:"http://ad.apps.fm/wyRivO8FLAUdTZ__4ZCjE15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2eYZGDOSSDel1TjxfKOeeYfS0IWu61kCnxcN7lsFedTwnM22ZRgmhgyCaA5usAlRCg",it:"http://ad.apps.fm/thHG1rXXzSUo8UijlKetUF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2Xn0deiA5YI8KOvtbN54ITIbP_6hFLL8A8abj0H2N7WKQ4Hzn2npNs5W10VysRtEtg",ru:"http://ad.apps.fm/Zm-peqqvw-yyLPZDzrTBX15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XI4f30aw0X3m4BmleCLOa5GnM22ZRgmhgyCaA5usAlRCg",ua:"http://ad.apps.fm/-s9i8ug96A-AC3ofJkqkS15KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XI_8FwNP9UqD33uT3aG11XPZCqYTF3HfsEnwAVgzAoZog",uk_ua:"https://ad.apps.fm/fpVrnj5-6LK-QNqx47CSDV5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2cgC4PGV_BxgjxiXC0i_IWeYjTZu_Q5xMe9OYm0Jfd8UG1ZMTcim-4lP1OEK7gDUkQ",kz:"http://ad.apps.fm/CAlxTHLfbKV2DUX7rYH15F5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XKmMK2oKt9nPMnGOY56U9bYqKvBW5rLy_IXIfbUL2hlSA",kg:"https://ad.apps.fm/CgGuPG0L5YMNDeZc3y548l5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfwkJTAbvvqmSDTu4CRsWy2XomoVXb-Z0oHWGV4a_G3XIrWvjhdILCLtjwjzZrN9DGqKvBW5rLy_IXIfbUL2hlSA"},e["desktopApp.storeLink.p2d.android"]={ae:"https://play.google.com/store/apps/details?id=ru.dublgis.dgismobile&hl=en",cl:"https://play.google.com/store/apps/details?id=ru.dublgis.dgismobile&hl=es",cz:"https://play.google.com/store/apps/details?id=ru.dublgis.dgismobile&hl=cs",cy:"https://play.google.com/store/apps/details?id=ru.dublgis.dgismobile&hl=en",it:"https://play.google.com/store/apps/details?id=ru.dublgis.dgismobile&hl=it",ru:"https://play.google.com/store/apps/details?id=ru.dublgis.dgismobile&hl=ru",ua:"https://play.google.com/store/apps/details?id=ru.dublgis.dgismobile&hl=ru",kz:"https://play.google.com/store/apps/details?id=ru.dublgis.dgismobile&hl=ru",kg:"https://play.google.com/store/apps/details?id=ru.dublgis.dgismobile&hl=ru"},e["extension.url"]={ru:"http://apps.2gis.ru/extension/?utm_source=online&utm_medium=icon&utm_campaign=extension_promo",ua:"http://apps.2gis.ua/extension/?utm_source=online&utm_medium=icon&utm_campaign=extension_promo",kz:"http://apps.2gis.kz/extension/?utm_source=online&utm_medium=icon&utm_campaign=extension_promo",ae:"http://apps.2gis.ae/extension/?utm_source=online&utm_medium=icon&utm_campaign=extension_promo",cz:"http://apps.2gis.cz/extension/?utm_source=online&utm_medium=icon&utm_campaign=extension_promo",cy:"http://apps.2gis.com.cy/extension/?utm_source=online&utm_medium=icon&utm_campaign=extension_promo",kg:"http://apps.2gis.kg/extension/?utm_source=online&utm_medium=icon&utm_campaign=extension_promo",cl:"http://apps.2gis.cl/extension/?utm_source=online&utm_medium=icon&utm_campaign=extension_promo"},e["extension.chromeLink"]={ru:"https://chrome.google.com/webstore/detail/jpniccbojbdjnnnclhelaenfhfbknlan"},e.gismeteoDomain={ru:"gismeteo.ru",kz:"gismeteo.kz",ua:"gismeteo.ua",cy:"gismeteo.com",ae:"gismeteo.com",cz:"gismeteo.com",it:"gismeteo.com",cl:"gismeteo.com",kg:"gismeteo.ru"},e["floors.ogImage"]={ru:"https://2gis.ru/static/floors_share.png",kz:"https://2gis.ru/static/floors_share.png",ua:"https://2gis.ru/static/floors_share.png",cy:"https://2gis.ru/static/floors_share_en.png",ae:"https://2gis.ru/static/floors_share_en.png",cz:"https://2gis.ru/static/floors_share_en.png",it:"https://2gis.ru/static/floors_share_en.png",cl:"https://2gis.ru/static/floors_share_en.png",kg:"https://2gis.ru/static/floors_share.png"},e["summer2016.ogImage"]={ru:"https://static.2gis.com/i/6282.jpg",kz:"https://static.2gis.com/i/6274.jpg",ua:"https://static.2gis.com/i/6286.jpg",kg:"https://static.2gis.com/i/6278.jpg"},e["map.dblClickTimeout"]=210,e["map.pointRadius"]=5,e["map.routeSearch.offsetMarker"]=20,e["map.routeSearch.iconAnchor"]=11,e["map.entranceMinZoom"]=18,e["map.metroEntranceThresholdZoom"]={praha:17,santiago:17,dubai:17},e["markers.zIndex"]={routeSearchKeypoint:50,terminalPlatform:100,activeTerminalPlatform:200,mushroomsMarker:300,activeMushroomsMarker:350,superMarker:400,royalizeMarker:450,tooltip:500},e["markers.levels.debug"]=!1,e["markers.levels.common"]=[{safeZone:0,size:[1,1],className:"_general_recovery"},{safeZone:1,size:[22,36],offset:[11,34],className:"_general_commercial"},{safeZone:7,size:[18,26],offset:[9,24],className:"_general_mushroom"},{safeZone:1,size:[6,6],offset:[3,3],className:"_general_bullet"},{safeZone:0,size:[0,0],className:"_general_hidden"}],e["markers.levels.commonNew"]={9:[{className:"_general_recovery",size:["1","1"],offset:["0","0"],margin:"0",safeZone:"0"},{className:"_general_commercial",size:["30","40"],offset:["15","35"],margin:"150",safeZone:0},{className:"_general_mushroom",size:["20","30"],offset:["10","27"],margin:"150",safeZone:"33"},{className:"_general_bullet",size:["14","14"],offset:["7","7"],margin:0,safeZone:0},{className:"_general_hidden",size:["0","0"],offset:["0","0"],margin:"0",safeZone:"0"}],10:[{className:"_general_recovery",size:["1","1"],offset:["0","0"],margin:"0",safeZone:"0"},{className:"_general_commercial",size:["36","44"],offset:["18","36"],margin:"200",safeZone:0},{className:"_general_mushroom",size:["20","30"],offset:["10","27"],margin:"170",safeZone:"39"},{className:"_general_bullet",size:["14","14"],offset:["7","7"],margin:"0",safeZone:0},{className:"_general_hidden",size:["0","0"],offset:["0","0"],margin:"0",safeZone:"0"}],11:[{className:"_general_recovery",size:["1","1"],offset:["0","0"],margin:"0",safeZone:"0"},{className:"_general_commercial",size:["40","42"],offset:["20","37"],margin:"200",safeZone:0},{className:"_general_mushroom",size:["22","30"],offset:["11","27"],margin:"170",safeZone:"35"},{className:"_general_bullet",size:["10","10"],offset:["5","5"],margin:0,safeZone:15},{className:"_general_hidden",size:["0","0"],offset:["0","0"],margin:"0",safeZone:"0"}],12:[{className:"_general_recovery",size:["1","1"],offset:["0","0"],margin:"0",safeZone:"0"},{className:"_general_commercial",size:["42","63"],offset:["21","50"],margin:"140",safeZone:0},{className:"_general_mushroom",size:["22","30"],offset:["11","27"],margin:"140",safeZone:"30"},{className:"_general_bullet",size:["10","10"],offset:["5","5"],margin:0,safeZone:15},{className:"_general_hidden",size:["0","0"],offset:["0","0"],margin:"0",safeZone:"0"}],13:[{className:"_general_recovery",size:["1","1"],offset:["0","0"],margin:"0",safeZone:"0"},{className:"_general_commercial",size:["46","63"],offset:["23","50"],margin:"220",safeZone:0},{className:"_general_mushroom",size:["22","30"],offset:["11","27"],margin:"200",safeZone:"40"},{className:"_general_bullet",size:["14","14"],offset:["7","7"],margin:0,safeZone:0},{className:"_general_hidden",size:["0","0"],offset:["0","0"],margin:"0",safeZone:"0"}],14:[{className:"_general_recovery",size:["1","1"],offset:["0","0"],margin:"0",safeZone:"0"},{className:"_general_commercial",size:["50","67"],offset:["25","52"],margin:"280",safeZone:0},{className:"_general_mushroom",size:["22","30"],offset:["11","27"],margin:"255",safeZone:"45"},{className:"_general_bullet",size:["18","18"],offset:["9","9"],margin:0,safeZone:0},{className:"_general_hidden",size:["0","0"],offset:["0","0"],margin:"0",safeZone:"0"}],15:[{className:"_general_recovery",size:["1","1"],offset:["0","0"],margin:"0",safeZone:"0"},{className:"_general_commercial",size:["80","72"],offset:["40","57"],margin:"340",safeZone:0},{className:"_general_mushroom",size:["20","24"],offset:["11","22"],margin:"310",safeZone:"45"},{className:"_general_bullet",size:["18","18"],offset:["9","9"],margin:0,safeZone:0},{className:"_general_hidden",size:["0","0"],offset:["0","0"],margin:"0",safeZone:"0"}],16:[{className:"_general_recovery",size:["1","1"],offset:["0","0"],margin:"0",safeZone:"0"},{className:"_general_commercial",size:["60","72"],offset:["30","57"],margin:"400",safeZone:0},{className:"_general_mushroom",size:["22","24"],offset:["11","22"],margin:"360",safeZone:"45"},{className:"_general_bullet",size:["20","20"],offset:["10","10"],margin:0,safeZone:0},{className:"_general_hidden",size:["0","0"],offset:["0","0"],margin:"0",safeZone:"0"}],17:[{className:"_general_recovery",size:["1","1"],offset:["0","0"],margin:"0",safeZone:"0"},{className:"_general_commercial",size:["80","72"],offset:["40","57"],margin:"250",safeZone:0},{className:"_general_mushroom",size:["22","24"],offset:["11","22"],margin:"230",safeZone:"50"},{className:"_general_bullet",size:["20","20"],offset:["10","10"],margin:0,safeZone:0},{className:"_general_hidden",size:["0","0"],offset:["0","0"],margin:"0",safeZone:"0"}],18:[{className:"_general_recovery",size:["1","1"],offset:["0","0"],margin:"0",safeZone:"0"},{className:"_general_commercial",size:["28","38"],offset:["14","34"],margin:"70",safeZone:0},{className:"_general_mushroom",size:["22","24"],offset:["11","22"],margin:"70",safeZone:"20"},{className:"_general_bullet",size:["14","14"],offset:["7","7"],margin:0,safeZone:0},{className:"_general_hidden",size:["0","0"],offset:["0","0"],margin:"0",safeZone:"0"}]},e["markers.levels.extraLayers"]=[{safeZone:10,size:[18,18],offset:[9,9],className:"_general_mushroom"},{safeZone:1,size:[10,10],offset:[5,5],className:"_general_bullet"},{safeZone:0,className:"_general_hidden"}],e["markers.levels.favorite"]=[{safeZone:0,size:[22,18],offset:[11,9],className:"_general_mushroom"},{safeZone:0,className:"_general_hidden"}],e["markers.adTimeouts"]={hide:200},e["transport.route.platformZoomVisibility"]={metro:10,"default":15},e["transport.route.geometryStyles"]={geometry:{opacity:1,weight:6},background:{color:"white",opacity:1,weight:10}},e["transport.platform.geometryStyles"]={background:{style:{weight:0,fillColor:"white",fillOpacity:1},radius:10},geometry:{style:{weight:2,opacity:1,fillColor:"white",fillOpacity:1},radius:6}},e["geocoder.objects2ZoomRestrictions"]={"adm_div.city":0,"adm_div.settlement":8,road:8,"adm_div.division":11,"adm_div.district":12,poi:13,street:14,"adm_div.living_area":14,crossroad:14,building:15,"adm_div.place":15,attraction:17,parking:17,gate:18},e["geocoder.objects2ZoomRestrictions.phones"]={poi:13,building:15,attraction:17,parking:17,gate:18},e["mediaCard.rubrics"]={eat:[159,161,162,164,165,15791],eat_ru:[51459],eat_ua:[51459],eat_kz:[51459],eat_cz:[166],saunas:[946],fitness:[267,268],providers:[176]},e["mediaCard.hardcode.currency"]=[{project:"donetsk",value:{id:"RUB",symbol:"руб.",standard:"# ##0,00 ¤","short":"# ##0,## ¤"}}],e["mediaCard.canDisable"]=!0,e["mediaCard.seeAlsoSize"]=4,e["photosUploader.restricts.default"]={maxFileSize:5,minWidth:600,minHeight:600,maxWidth:5e3,maxHeight:5e3,maxVerticalRatio:5,maxHorizontalRatio:5},e["photosUploader.restricts.collection"]={maxFileSize:5,minWidth:360,minHeight:120,maxWidth:5e3,maxHeight:5e3,maxVerticalRatio:5,maxHorizontalRatio:5},e["promoTooltip.delay"]=3e3,e["promoTooltip.discounts"]={active:!1,shareUrl:"http://booklet.api.2gis.ru/2.0/share",promoStorageKey:"discountsPromoClosed",regions:[1,7],moduleName:"discountsPromoEntry",feature:"discountsPromo"},e["promoTooltip.presents2015"]={validFrom:"Dec 01 2015",validTo:"Dec 9 2015",active:!1,moduleName:"promoEvent",type:"presents2015",analyticName:"Newyear",feature:"presents2015",promoStorageKey:"newYearPromoClosed"},e["promoTooltip.award2015"]={validFrom:"Dec 01 2015",validTo:"Jan 31 2016",active:!1,moduleName:"promoEvent",type:"award2015",analyticName:"Awards_2015",feature:"award2015",promoStorageKey:"awardPromoClosed"},e["promoTooltip.summer"]={validFrom:"Jun 1 2015",validTo:"Sep 30 2016",active:!0,moduleName:"promoEvent",type:"summer2016",analyticName:"Summer",feature:"summer",promoStorageKey:"summerPromoClosed"},e["redirect.adv.addFirm"]="http://redirect.2gis.com/adv/?language=$lang&page=add-info&id=$region&utm_source=maps2gis&utm_medium=add_info&utm_campaign=$utm",e["redirect.adv.feedback"]="http://redirect.2gis.com/adv/?language=$lang&page=online_feedback&id=$region&calculate_for=$firmId&utm_source=maps2gis&utm_medium=ad_link&utm_campaign=$utm",e["redirect.adv.owner"]="http://redirect.2gis.com/adv/?language=$lang&page=online_owner&id=$region&calculate_for=$firmId&utm_source=2gis4online&utm_medium=ad_link&utm_campaign=$utm",e["redirect.adv.default"]="http://redirect.2gis.com/adv/?language=$lang&id=$region&utm_source=2gis4online&utm_medium=ad_link&utm_campaign=$utm",e["redirect.infoLink"]="http://redirect.2gis.com/www/?language=$lang&id=$region&utm_source=2gis4online&utm_medium=about_link&utm_campaign=start",e["redirect.license.api"]="http://redirect.2gis.com/api/?language=$lang&id=$region&utm_source=copyright&utm_medium=map&utm_campaign=partners",e["redirect.license.agreement"]="http://redirect.2gis.com/api/?language=$lang&id=$region&utm_source=copyright&utm_medium=map&utm_campaign=partners",e["redirect.account.defaultUrl"]="http://redirect.2gis.com/account/?language=$lang&id=$region&utm_source=products&utm_medium=2gisonline&utm_campaign=$utm",e["redirect.account.firmUrl"]="http://redirect.2gis.com/account/?language=$lang&id=$region&firmId=$firmId&utm_source=products&utm_medium=2gisonline&utm_campaign=$utm",e["redirect.account.ownerPromoFirm"]="http://account.2gis.ru/promo?language=$lang&id=$region&firmId=$firmId&utm_source=products&utm_medium=2gisonline&utm_campaign=$utm&locale=$locale",e["redirect.account.ownerPromoDefault"]="http://account.2gis.ru/promo?language=$lang&id=$region&utm_source=products&utm_medium=2gisonline&utm_campaign=$utm&locale=$locale",e["redirect.storeLink.windows"]="http://redirect.2gis.com/www/?page=distributive_cumulative&id=$region",e["redirect.storeLink.mobile"]="http://mobile.2gis.ru/?utm_source=$domain&utm_medium=online&utm_campaign=$module",e["redirect.businessLink"]="http://redirect.2gis.com/business/?id=$region",e["suggest.defaultCountCities"]=2,e["suggest.countForSearchCity"]=3,e["suggest.personal.apiUrl"]="http://profile.2gis.ru/api/1.0/profile",e["suggest.personal.apiTimeout"]=1e3,e["suggest.personal.numSearches"]=5,e["suggest.personal.numBranches"]=5,e["suggest.personal.mixSearches"]=!1,e["suggest.personal.numMixSearches"]=3,e["suggest.personal.numMixBranches"]=3,e.debug=!1,e["data.path"]="/var/www/online4.data",e.build="release"}("object"==typeof exports&&exports?exports:dg.config={}),this.jst_helpers=this.jst_helpers||{},this.jst_helpers.btn=function(e,t,n,a,i){function o(e,t){var n,a="";return a+=" "+u((n=null==t||t===!1?t:t.key,typeof n===c?n.apply(e):n))+'="'+u(typeof e===c?e.apply(e):e)+'"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c="function",u=this.escapeExpression,d=this;return l+="<",(s=n.tagName)?r=s.call(t,{hash:{},data:i}):(s=t&&t.tagName,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r),r=n.each.call(t,t&&t.attrs,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(r||0===r)&&(l+=r),l+=">",(s=n.text)?r=s.call(t,{hash:{},data:i}):(s=t&&t.text,r=typeof s===c?s.call(t,{hash:{},data:i}):s),(r||0===r)&&(l+=r),l+="</",(s=n.tagName)?r=s.call(t,{hash:{},data:i}):(s=t&&t.tagName,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r)+">"},this.jst_helpers=this.jst_helpers||{},this.jst_helpers.checkbox=function(e,t,n,a,i){function o(e,t){return" _inline"}function r(e,t){return" _primary"}function s(e,t){return" _forced"}function l(e,t){var a,i,o="";return o+=' value="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=m(a)+'"'}function c(e,t){return" disabled checked"}function u(e,t){return" checked"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h,p="",f="function",m=this.escapeExpression,g=this;return p+='<label class="checkbox',d=n["if"].call(t,t&&t.inline,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(d||0===d)&&(p+=d),d=n["if"].call(t,t&&t.primary,{hash:{},inverse:g.noop,fn:g.program(3,r,i),data:i}),(d||0===d)&&(p+=d),d=n["if"].call(t,t&&t.forced,{hash:{},inverse:g.noop,fn:g.program(5,s,i),data:i}),(d||0===d)&&(p+=d),p+='" title="',(h=n.label)?d=h.call(t,{hash:{},data:i}):(h=t&&t.label,d=typeof h===f?h.call(t,{hash:{},data:i}):h),p+=m(d)+'"><input type="checkbox" name="',(h=n.name)?d=h.call(t,{hash:{},data:i}):(h=t&&t.name,d=typeof h===f?h.call(t,{hash:{},data:i}):h),p+=m(d)+'" class="checkbox__self"',d=n["if"].call(t,t&&t.value,{hash:{},inverse:g.noop,fn:g.program(7,l,i),data:i}),(d||0===d)&&(p+=d),d=n["if"].call(t,t&&t.forced,{hash:{},inverse:g.noop,fn:g.program(9,c,i),data:i}),(d||0===d)&&(p+=d),d=n["if"].call(t,t&&t.checked,{hash:{},inverse:g.noop,fn:g.program(11,u,i),data:i}),(d||0===d)&&(p+=d),p+='><span class="checkbox__switch"></span>',(h=n.label)?d=h.call(t,{hash:{},data:i}):(h=t&&t.label,d=typeof h===f?h.call(t,{hash:{},data:i}):h),p+=m(d)+"</label>"},this.jst_helpers=this.jst_helpers||{},this.jst_helpers.customRating=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=" ",(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'" '}function r(e,t){var n="";return n+=" "+h(typeof e===d?e.apply(e):e)}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d="function",h=this.escapeExpression,p=this,f=n.helperMissing;return u+="<",(l=n.tagName)?s=l.call(t,{hash:{},data:i}):(l=t&&t.tagName,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+" ",s=n.each.call(t,t&&t.attrs,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+=' class="customRating ',s=n.each.call(t,t&&t.classNames,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(s||0===s)&&(u+=s),u+='"><div class="customRating__stars _value_',(l=n.value)?s=l.call(t,{hash:{},data:i}):(l=t&&t.value,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+'" style="color: ',(l=n.color)?s=l.call(t,{hash:{},data:i}):(l=t&&t.color,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+'; width: 100%; opacity: .3">'+h((l=n.Icon||t&&t.Icon,c={hash:{"class":"customRating__starsFilled"},data:i},l?l.call(t,"rating_star-small-customizable",c):f.call(t,"Icon","rating_star-small-customizable",c)))+'</div><div class="customRating__stars _value_',(l=n.value)?s=l.call(t,{hash:{},data:i}):(l=t&&t.value,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+'" style="color: ',(l=n.color)?s=l.call(t,{hash:{},data:i}):(l=t&&t.color,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+';">'+h((l=n.Icon||t&&t.Icon,c={hash:{"class":"customRating__starsFilled"},data:i},l?l.call(t,"rating_star-small-customizable",c):f.call(t,"Icon","rating_star-small-customizable",c)))+"</div></",(l=n.tagName)?s=l.call(t,{hash:{},data:i}):(l=t&&t.tagName,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+">"},this.jst_helpers=this.jst_helpers||{},this.jst_helpers.fix=function(e,t,n,a,i){function o(e,t){var n="";return n+=" "+u(typeof e===c?e.apply(e):e)}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c="function",u=this.escapeExpression,d=this;return l+="<",(s=n.tag)?r=s.call(t,{hash:{},data:i}):(s=t&&t.tag,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r)+' class="fix',r=n.each.call(t,t&&t.classNames,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(r||0===r)&&(l+=r),l+='">',(s=n.text)?r=s.call(t,{hash:{},data:i}):(s=t&&t.text,r=typeof s===c?s.call(t,{hash:{},data:i}):s),(r||0===r)&&(l+=r),l+="</",(s=n.tag)?r=s.call(t,{hash:{},data:i}):(s=t&&t.tag,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r)+">"},this.jst_helpers=this.jst_helpers||{},this.jst_helpers.icon=function(e,t,n,a,i){function o(e,t){var a,i,o,l="";return i=n.browser||e&&e.browser,o={hash:{},inverse:p.program(4,s,t),fn:p.program(2,r,t),data:t},a=i?i.call(e,"IE 8",o):f.call(e,"browser","IE 8",o),(a||0===a)&&(l+=a),l}function r(e,t){var a,i,o="";return o+='<span class="'+h((a=e&&e.attrs,a=null==a||a===!1?a:a["class"],typeof a===d?a.apply(e):a))+'" data-icon="',(i=n.icon)?a=i.call(e,{hash:{},data:t}):(i=e&&e.icon,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'"></span>'}function s(e,t){var a,i,o="";return o+='<svg viewBox="0 0 ',(i=n.w)?a=i.call(e,{hash:{},data:t}):(i=e&&e.w,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+" ",(i=n.h)?a=i.call(e,{hash:{},data:t}):(i=e&&e.h,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'" width="',(i=n.w)?a=i.call(e,{hash:{},data:t}):(i=e&&e.w,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'" height="',(i=n.h)?a=i.call(e,{hash:{},data:t}):(i=e&&e.h,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'"',a=n.each.call(e,e&&e.attrs,{hash:{},inverse:p.noop,fn:p.program(5,l,t),data:t}),(a||0===a)&&(o+=a),o+='><use xlink:href="#',(i=n.icon)?a=i.call(e,{hash:{},data:t}):(i=e&&e.icon,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'"></use></svg>'}function l(e,t){var n,a="";return a+=" "+h((n=null==t||t===!1?t:t.key,typeof n===d?n.apply(e):n))+'="'+h(typeof e===d?e.apply(e):e)+'"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u="",d="function",h=this.escapeExpression,p=this,f=n.helperMissing;return c=n["if"].call(t,t&&t.icon,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(c||0===c)&&(u+=c),u},this.jst_helpers=this.jst_helpers||{},this.jst_helpers.link=function(e,t,n,a,i){function o(e,t){var n,a="";return a+=" "+u((n=null==t||t===!1?t:t.key,typeof n===c?n.apply(e):n))+'="'+u(typeof e===c?e.apply(e):e)+'"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c="function",u=this.escapeExpression,d=this;return l+="<",(s=n.tagName)?r=s.call(t,{hash:{},data:i}):(s=t&&t.tagName,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r),r=n.each.call(t,t&&t.attrs,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(r||0===r)&&(l+=r),l+=">",(s=n.text)?r=s.call(t,{hash:{},data:i}):(s=t&&t.text,r=typeof s===c?s.call(t,{hash:{},data:i}):s),(r||0===r)&&(l+=r),l+="</",(s=n.tagName)?r=s.call(t,{hash:{},data:i}):(s=t&&t.tagName,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r)+">"},this.jst_helpers=this.jst_helpers||{},this.jst_helpers.preloader=function(e,t,n,a,i){function o(e,t){var n="";return n+=" "+d(typeof e===u?e.apply(e):e)}function r(e,t){var n,a="";return a+=" "+d((n=null==t||t===!1?t:t.key,typeof n===u?n.apply(e):n))+'="'+d(typeof e===u?e.apply(e):e)+'"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c="",u="function",d=this.escapeExpression,h=this;return c+='<span class="preloader',s=n.each.call(t,t&&t.classNames,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(s||0===s)&&(c+=s),c+='"',s=n.each.call(t,t&&t.attrs,{hash:{},inverse:h.noop,fn:h.program(3,r,i),data:i}),(s||0===s)&&(c+=s),c+=">",(l=n.text)?s=l.call(t,{hash:{},data:i}):(l=t&&t.text,s=typeof l===u?l.call(t,{hash:{},data:i}):l),(s||0===s)&&(c+=s),c+="</span>"},this.jst_helpers=this.jst_helpers||{},this.jst_helpers.radiogroup=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=" _",(i=n.mod)?a=i.call(e,{hash:{},data:t}):(i=e&&e.mod,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)}function r(e,t){var a,i,o="";return o+='<label class="radiogroup__label',a=n["if"].call(e,e&&e.forced,{hash:{},inverse:m.noop,fn:m.program(4,s,t),data:t}),(a||0===a)&&(o+=a),o+='"><input type="radio" class="radiogroup__input" name="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+'" value="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+'"',a=n["if"].call(e,e&&e.checked,{hash:{},inverse:m.noop,fn:m.program(6,l,t),data:t}),(a||0===a)&&(o+=a),a=n["if"].call(e,e&&e.disabled,{hash:{},inverse:m.noop,fn:m.program(8,c,t),data:t}),(a||0===a)&&(o+=a),a=n["if"].call(e,e&&e.forced,{hash:{},inverse:m.noop,fn:m.program(10,u,t),data:t}),(a||0===a)&&(o+=a),o+='><span class="radiogroup__label-in">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+"</span></label>"}function s(e,t){return" _forced"}function l(e,t){return" checked"}function c(e,t){return" disabled"}function u(e,t){return" checked disabled"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h="",p="function",f=this.escapeExpression,m=this;return h+='<div class="radiogroup',d=n["if"].call(t,t&&t.mod,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(d||0===d)&&(h+=d),h+='">',d=n.each.call(t,t&&t.items,{hash:{},inverse:m.noop,fn:m.program(3,r,i),data:i}),(d||0===d)&&(h+=d),h+="</div>"},this.jst_helpers=this.jst_helpers||{},this.jst_helpers.rating=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=" ",(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)+'="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)+'" '}function r(e,t){var n="";return n+=" "+d(typeof e===u?e.apply(e):e)}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c="",u="function",d=this.escapeExpression,h=this;return c+="<",(l=n.tagName)?s=l.call(t,{hash:{},data:i}):(l=t&&t.tagName,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+" ",s=n.each.call(t,t&&t.attrs,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(s||0===s)&&(c+=s),c+=' class="rating _value_',(l=n.value)?s=l.call(t,{hash:{},data:i}):(l=t&&t.value,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+" _style_",(l=n.style)?s=l.call(t,{hash:{},data:i}):(l=t&&t.style,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+" ",s=n.each.call(t,t&&t.classNames,{hash:{},inverse:h.noop,fn:h.program(3,r,i),data:i}),(s||0===s)&&(c+=s),c+='"></',(l=n.tagName)?s=l.call(t,{hash:{},data:i}):(l=t&&t.tagName,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+">"},this.jst_helpers=this.jst_helpers||{},this.jst_helpers.track=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function",c=this.escapeExpression;return s+="<",(r=n.tagName)?o=r.call(t,{hash:{},data:i}):(r=t&&t.tagName,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+' class="track ',(r=n.classNames)?o=r.call(t,{hash:{},data:i}):(r=t&&t.classNames,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'"><span class="track__bar"></span></',(r=n.tagName)?o=r.call(t,{hash:{},data:i}):(r=t&&t.tagName,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+">"},this.jst_helpers=this.jst_helpers||{},this.jst_helpers.wrap=function(e,t,n,a,i){function o(e,t){var n,a="";return a+=" "+u((n=null==t||t===!1?t:t.key,typeof n===c?n.apply(e):n))+'="'+u(typeof e===c?e.apply(e):e)+'"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c="function",u=this.escapeExpression,d=this;return l+="<",(s=n.tagName)?r=s.call(t,{hash:{},data:i}):(s=t&&t.tagName,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r),r=n.each.call(t,t&&t.attrs,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(r||0===r)&&(l+=r),l+=">",(s=n.text)?r=s.call(t,{hash:{},data:i}):(s=t&&t.text,r=typeof s===c?s.call(t,{hash:{},data:i}):s),(r||0===r)&&(l+=r),l+="</",(s=n.tagName)?r=s.call(t,{hash:{},data:i}):(s=t&&t.tagName,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r)+">"},this.jst_helpers=this.jst_helpers||{},this.jst_helpers.index=function(e,t,n,a,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<!DOCTYPE html><html><head><title>Тест шрифтов</title><link rel="stylesheet" type="text/css" href="../../../../../build/public/assets/desktop.css"><link rel="stylesheet" type="text/css" href="style.css"><!--[if IE 8]><link rel="stylesheet" href="ie.css"><![endif]--><!--[if IE 9]><link rel="stylesheet" href="ie.css"><![endif]--><script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script><meta charset="utf-8"><script src="main.js"></script></head><body><div class="link-tools"><input class="link-tools__testText" type="text" value="Съешь ещё этих мягких французских булок да выпей чаю."><ul class="link-tools__list _fonts"></ul><ul class="link-tools__list _sizes"></ul><ul class="link-tools__list _backgroundPosition"><li class="link-tools__listItem"><button class="link-tools__listItemDown">&lt;</button></li><li class="link-tools__listItem _backgroundSizeValue">%</li><li class="link-tools__listItem"><button class="link-tools__listItemUp">&gt;</button></li></ul></div><div class="content"><span class="content__empty">Выберите размер</span></div></body></html>'},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.album=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n["if"].call(e,e&&e.title,{hash:{},inverse:f.noop,fn:f.program(2,r,t),data:t
}),(a||0===a)&&(i+=a),i}function r(e,t){var a,i,o="";return o+='<h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+"</span>",a=n["if"].call(e,e&&e.albumsTemplate,{hash:{},inverse:f.noop,fn:f.program(3,s,t),data:t}),(a||0===a)&&(o+=a),o+="</h2>"}function s(e,t){var a,i,o,r="";return r+='<span class="bookletBuildings__sectionTitleLink"><i class="bookletBuildings__icon _backArrow"></i><span class="link bookletBuildings__albumList" data-partial="',(i=n.albumsTemplate)?a=i.call(e,{hash:{},data:t}):(i=e&&e.albumsTemplate,a=typeof i===d?i.call(e,{hash:{},data:t}):i),r+=h(a)+'"><span>&nbsp;'+h((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Вернуться к альбомам",o):p.call(e,"_gg","Вернуться к альбомам",o)))+"</span></span></span>"}function l(e,t){var i,o="";return o+='<div class="bookletBuildings__gridCell _gridCell_3x1"><div class="bookletBuildings__albumPhoto">',i=f.invokePartial(a.photo,"photo",e,n,a,t),(i||0===i)&&(o+=i),i=f.invokePartial(a.layoutInfo,"layoutInfo",e,n,a,t),(i||0===i)&&(o+=i),o+="</div></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var c,u="",d="function",h=this.escapeExpression,p=n.helperMissing,f=this;return u+='<div class="bookletBuildings__album"><div class="bookletBuildings__section">',c=n.unless.call(t,t&&t.single,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(c||0===c)&&(u+=c),u+='<div class="bookletBuildings__grid _albums_state">',c=n.each.call(t,t&&t.photos,{hash:{},inverse:f.noop,fn:f.program(5,l,i),data:i}),(c||0===c)&&(u+=c),u+="</div></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.albumThumbnail=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var o,r,s="",l="function",c=this.escapeExpression,u=this;return s+='<div class="bookletBuildings__album"><div class="bookletBuildings__overlay"><i class="bookletBuildings__icon _camera"></i>&nbsp;',(r=n.count)?o=r.call(t,{hash:{},data:i}):(r=t&&t.count,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o),o=u.invokePartial(a.editIcon,"editIcon",t,n,a,i),(o||0===o)&&(s+=o),s+='</div><div class="bookletBuildings__imageWrap"><div class="bookletBuildings__crop"><span data-album="',(r=n.id)?o=r.call(t,{hash:{},data:i}):(r=t&&t.id,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'" data-section="',(r=n.section)?o=r.call(t,{hash:{},data:i}):(r=t&&t.section,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'" class="bookletBuildings__action bookletBuildings__cropImg bookletBuildings__photoAlbum" style="background-image:url(',(r=n.thumbnail)?o=r.call(t,{hash:{},data:i}):(r=t&&t.thumbnail,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+');"></span></div></div></div><div class="bookletBuildings__albumTitle">',(r=n.title)?o=r.call(t,{hash:{},data:i}):(r=t&&t.title,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.docsItem=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<p class="bookletBuildings__docsIconDescr">',(i=n.extension)?a=i.call(e,{hash:{},data:t}):(i=e&&e.extension,a=typeof i===c?i.call(e,{hash:{},data:t}):i),o+=u(a)+", ",(i=n.shortSize)?a=i.call(e,{hash:{},data:t}):(i=e&&e.shortSize,a=typeof i===c?i.call(e,{hash:{},data:t}):i),o+=u(a)+"&nbsp;",(i=n.dimension)?a=i.call(e,{hash:{},data:t}):(i=e&&e.dimension,a=typeof i===c?i.call(e,{hash:{},data:t}):i),o+=u(a)+"</p>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c="function",u=this.escapeExpression,d=this;return l+='<div class="bookletBuildings__gridCell _gridCell_3x1"><div class="bookletBuildings__docs"><a class="bookletBuildings__link _linkText bookletBuildings__icon _',(s=n.extension)?r=s.call(t,{hash:{},data:i}):(s=t&&t.extension,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r)+' _absIcon" href="',(s=n.original)?r=s.call(t,{hash:{},data:i}):(s=t&&t.original,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r)+'" target="_blank" data-type="docsDownload">',(s=n.title)?r=s.call(t,{hash:{},data:i}):(s=t&&t.title,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r)+"</a>",r=n["if"].call(t,t&&t.size,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(r||0===r)&&(l+=r),l+="</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.editIcon=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<a href="',(i=n.widgetUrl)?a=i.call(e,{hash:{},data:t}):(i=e&&e.widgetUrl,a=typeof i===l?i.call(e,{hash:{},data:t}):i),r+=c(a)+'" target="_blank" class="bookletBuildings__link bookletBuildings__editLink bookletBuildings__tooltip" data-title="'+c((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Редактировать или удалить",o):u.call(e,"_gg","Редактировать или удалить",o)))+'"><i class="bookletBuildings__icon _edit"></i></a>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l="function",c=this.escapeExpression,u=n.helperMissing,d=this;return r=n["if"].call(t,t&&t.isEditor,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.editRow=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<div class="bookletBuildings__editRow"><a href="',(i=n.widgetUrl)?a=i.call(e,{hash:{},data:t}):(i=e&&e.widgetUrl,a=typeof i===l?i.call(e,{hash:{},data:t}):i),r+=c(a)+'" target="_blank" class="bookletBuildings__btn" data-title="'+c((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Редактировать",o):u.call(e,"_gg","Редактировать",o)))+'"><span class="bookletBuildings__icon _edit _editRow">'+c((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Редактировать",o):u.call(e,"_gg","Редактировать",o)))+"</span></a></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l="function",c=this.escapeExpression,u=n.helperMissing,d=this;return r=n["if"].call(t,t&&t.isEditor,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.editor=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s=n.helperMissing,l=this.escapeExpression;return l((o=n.module||t&&t.module,r={hash:{},data:i},o?o.call(t,"bookletEditor",r):s.call(t,"module","bookletEditor",r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.features=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<div class="bookletBuildings__buildingFeaturesRow"><div class="bookletBuildings__buildingFeaturesCell _is_label"><div class="bookletBuildings__buildingFeaturesWrap"><i class="bookletBuildings__icon _parking"></i><span class="bookletBuildings__buildingFeaturesLabel">'+f((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Паркинг",o):m.call(e,"_gg","Паркинг",o)))+'</span></div></div><div class="bookletBuildings__buildingFeaturesCell"><ul class="bookletBuildings__bullList">',a=n.each.call(e,(a=e&&e.infrastructure,a=null==a||a===!1?a:a.features,null==a||a===!1?a:a.parking),{hash:{},inverse:g.noop,fn:g.program(2,r,t),data:t}),(a||0===a)&&(s+=a),s+="</ul></div></div>"}function r(e,t){var a,i,o="";return o+='<li class="bookletBuildings__bullListItem">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a),a=n["if"].call(e,e&&e.value,{hash:{},inverse:g.noop,fn:g.program(3,s,t),data:t}),(a||0===a)&&(o+=a),o+="</li>"}function s(e,t){var a,i,o,r="";return r+=':\n                            <strong class="bookletBuildings__buildingFeaturesValues">',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===p?i.call(e,{hash:{},data:t}):i),r+=f(a)+"&nbsp;</strong>"+f((i=n._ngg||e&&e._ngg,o={hash:{},data:t},i?i.call(e,"место","места","мест",e&&e.value,o):m.call(e,"_ngg","место","места","мест",e&&e.value,o)))}function l(e,t){var a,i,o,r="";return r+='<div class="bookletBuildings__buildingFeaturesRow"><div class="bookletBuildings__buildingFeaturesCell _is_label"><div class="bookletBuildings__buildingFeaturesWrap"><i class="bookletBuildings__icon _security"></i><span class="bookletBuildings__buildingFeaturesLabel">'+f((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Охрана",o):m.call(e,"_gg","Охрана",o)))+'</span></div></div><div class="bookletBuildings__buildingFeaturesCell"><ul class="bookletBuildings__bullList">',a=n.each.call(e,(a=e&&e.infrastructure,a=null==a||a===!1?a:a.features,null==a||a===!1?a:a.security),{hash:{},inverse:g.noop,fn:g.program(6,c,t),data:t}),(a||0===a)&&(r+=a),r+="</ul></div></div>"}function c(e,t){var n="";return n+='<li class="bookletBuildings__bullListItem">'+f(typeof e===p?e.apply(e):e)+"</li>"}function u(e,t){var a,i,o,r="";return r+='<div class="bookletBuildings__buildingFeaturesRow"><div class="bookletBuildings__buildingFeaturesCell _is_label"><div class="bookletBuildings__buildingFeaturesWrap"><i class="bookletBuildings__icon _yard"></i><span class="bookletBuildings__buildingFeaturesLabel">'+f((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Во дворе",o):m.call(e,"_gg","Во дворе",o)))+'</span></div></div><div class="bookletBuildings__buildingFeaturesCell"><ul class="bookletBuildings__bullList">',a=n.each.call(e,(a=e&&e.infrastructure,a=null==a||a===!1?a:a.features,null==a||a===!1?a:a.houseYard),{hash:{},inverse:g.noop,fn:g.program(6,c,t),data:t}),(a||0===a)&&(r+=a),r+="</ul></div></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h="",p="function",f=this.escapeExpression,m=n.helperMissing,g=this;return h+='<div class="bookletBuildings__buildingFeatures">',d=n["if"].call(t,(d=t&&t.infrastructure,d=null==d||d===!1?d:d.features,null==d||d===!1?d:d.parking),{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(d||0===d)&&(h+=d),d=n["if"].call(t,(d=t&&t.infrastructure,d=null==d||d===!1?d:d.features,null==d||d===!1?d:d.security),{hash:{},inverse:g.noop,fn:g.program(5,l,i),data:i}),(d||0===d)&&(h+=d),d=n["if"].call(t,(d=t&&t.infrastructure,d=null==d||d===!1?d:d.features,null==d||d===!1?d:d.houseYard),{hash:{},inverse:g.noop,fn:g.program(8,u,i),data:i}),(d||0===d)&&(h+=d),h+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.footer=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<p class="bookletBuildings__gridCell _gridCell_3x1 bookletBuildings__companyName">'+h((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Застройщик: ",o):d.call(e,"_gg","Застройщик: ",o)))+h((a=e&&e.footerInfo,a=null==a||a===!1?a:a.companyName,typeof a===p?a.apply(e):a))+".\n                </p>"}function r(e,t){var a,i,o,r="";return r+='<p class="bookletBuildings__gridCell _gridCell_3x1 bookletBuildings__comment">'+h((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Проектная декларация: ",o):d.call(e,"_gg","Проектная декларация: ",o)))+h((a=e&&e.footerInfo,a=null==a||a===!1?a:a.declarationUrl,typeof a===p?a.apply(e):a))+"</p>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d=n.helperMissing,h=this.escapeExpression,p="function",f=this;return u+='<div class="bookletBuildings__footerContainer _state_fixed _positionBottom"><footer class="bookletBuildings__section"><div class="bookletBuildings__grid">',s=n["if"].call(t,(s=t&&t.footerInfo,null==s||s===!1?s:s.companyName),{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(s||0===s)&&(u+=s),s=n["if"].call(t,(s=t&&t.footerInfo,null==s||s===!1?s:s.declarationUrl),{hash:{},inverse:f.noop,fn:f.program(3,r,i),data:i}),(s||0===s)&&(u+=s),u+='<div class="bookletBuildings__gridCell _gridCell_3x1 bookletBuildings__feedback"><span class="bookletBuildings__feedbackLink"><i title="'+h((l=n._gg||t&&t._gg,c={hash:{},data:i},l?l.call(t,"Сообщить об ошибке",c):d.call(t,"_gg","Сообщить об ошибке",c)))+'" class="bookletBuildings__icon _feedback"></i></span></div></div></footer></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.infrastructureBlock=function(e,t,n,a,i){function o(e,t){var n,a="";return a+=' data-value="'+g((n=e&&e.infrastructureBlock,n=null==n||n===!1?n:n.rubricIds,typeof n===m?n.apply(e):n))+'"'}function r(e,t){return" _collapsed"}function s(e,t){var a,i,o="";return o+='<div class="bookletBuildings__infrastructureItem _type_social"><span class="bookletBuildings__rubric bookletBuildings__link bookletBuildings__icon _',(i=n.code)?a=i.call(e,{hash:{},data:t}):(i=e&&e.code,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=g(a)+' _isSocial" data-rubrics="',(i=n.indeces)?a=i.call(e,{hash:{},data:t}):(i=e&&e.indeces,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=g(a)+'"><span class="bookletBuildings__linkText">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=g(a)+'</span></span>,\n                <span class="bookletBuildings__infrastructureCount">',(i=n.count)?a=i.call(e,{hash:{},data:t}):(i=e&&e.count,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=g(a)+"</span></div>"}function l(e,t){var a,i="";return i+='<div class="bookletBuildings__infrastructureItemWrap">',a=n.each.call(e,(a=e&&e.infrastructureBlock,null==a||a===!1?a:a.stops),{hash:{},inverse:v.noop,fn:v.program(8,c,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function c(e,t){var a,i,o,r="";return r+='<div class="bookletBuildings__infrastructureItem _type_transport"><span class="bookletBuildings__infrastructureCount">— ',(i=n.dist)?a=i.call(e,{hash:{},data:t}):(i=e&&e.dist,a=typeof i===m?i.call(e,{hash:{},data:t}):i),r+=g(a)+"&nbsp;"+g((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"м",o):_.call(e,"_gg","м",o)))+'</span><span class="bookletBuildings__icon _bus" title="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===m?i.call(e,{hash:{},data:t}):i),r+=g(a)+'">\n                            «<span class="bookletBuildings__linkText bookletBuildings__link bookletBuildings__stop" data-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===m?i.call(e,{hash:{},data:t}):i),r+=g(a)+'">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===m?i.call(e,{hash:{},data:t}):i),r+=g(a)+"</span>»\n                        </span></div>"}function u(e,t){var a,i,o="";return o+='<span class="bookletBuildings__infrastructureLink bookletBuildings__infrastructureMore"><span class="bookletBuildings__infrastructureLinkIn bookletBuildings__link _underlineDashed bookletBuildings__icon _expand">'+g((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"просмотреть все объекты",i):_.call(e,"_gg","просмотреть все объекты",i)))+"</span></span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var d,h,p,f="",m="function",g=this.escapeExpression,_=n.helperMissing,v=this;return f+='<div class="bookletBuildings__section"><h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner">'+g((h=n._gg||t&&t._gg,p={hash:{},data:i},h?h.call(t,"Инфраструктура",p):_.call(t,"_gg","Инфраструктура",p))),d=v.invokePartial(a.editIcon,"editIcon",t,n,a,i),(d||0===d)&&(f+=d),f+='</span></h2><div class="bookletBuildings__map" ',d=n["if"].call(t,(d=t&&t.infrastructureBlock,null==d||d===!1?d:d.rubricIds),{hash:{},inverse:v.noop,fn:v.program(1,o,i),data:i}),(d||0===d)&&(f+=d),f+='><div class="bookletBuildings__mapLayer _hidden _animated"></div></div><div class="bookletBuildings__infrastructure',d=n["if"].call(t,(d=t&&t.infrastructureBlock,null==d||d===!1?d:d.collapseRubrics),{hash:{},inverse:v.noop,fn:v.program(3,r,i),data:i}),(d||0===d)&&(f+=d),f+='">',d=n.each.call(t,(d=t&&t.infrastructureBlock,null==d||d===!1?d:d.rubrics),{hash:{},inverse:v.noop,fn:v.program(5,s,i),data:i}),(d||0===d)&&(f+=d),d=n["if"].call(t,(d=t&&t.infrastructureBlock,null==d||d===!1?d:d.stops),{hash:{},inverse:v.noop,fn:v.program(7,l,i),data:i}),(d||0===d)&&(f+=d),d=n["if"].call(t,(d=t&&t.infrastructureBlock,null==d||d===!1?d:d.collapseRubrics),{hash:{},inverse:v.noop,fn:v.program(10,u,i),data:i}),(d||0===d)&&(f+=d),f+="</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.installment=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var o,r="",s="function",l=this.escapeExpression,c=this;return r+='<div class="bookletBuildings__section"><h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner"><i class="bookletBuildings__icon _pocket"></i>'+l((o=t&&t.installment,o=null==o||o===!1?o:o.name,typeof o===s?o.apply(t):o)),o=c.invokePartial(a.editIcon,"editIcon",t,n,a,i),(o||0===o)&&(r+=o),r+='</span></h2><p class="bookletBuildings__paragraph">',o=t&&t.installment,o=null==o||o===!1?o:o.description,o=typeof o===s?o.apply(t):o,(o||0===o)&&(r+=o),r+="</p></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.layoutInfo=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="bookletBuildings__planInfoItem"><i class="bookletBuildings__planInfoIcon bookletBuildings__icon _totalArea"></i>&nbsp;\n            <span class="bookletBuildings__planInfoLabel">',a=n["if"].call(e,(a=e&&e.totalArea,null==a||a===!1?a:a.max),{hash:{},inverse:g.program(4,s,t),fn:g.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</span></div>"}function r(e,t){var a,i,o,r="";return r+=f((a=e&&e.totalArea,a=null==a||a===!1?a:a.min,typeof a===p?a.apply(e):a))+" – "+f((a=e&&e.totalArea,a=null==a||a===!1?a:a.max,typeof a===p?a.apply(e):a))+"&nbsp;"+f((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"м",o):m.call(e,"_gg","м",o)))+'<sup class="bookletBuildings__filtersSup">&#178;</sup>'}function s(e,t){var a,i,o,r="";return r+=f((a=e&&e.totalArea,a=null==a||a===!1?a:a.min,typeof a===p?a.apply(e):a))+"&nbsp;"+f((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"м",o):m.call(e,"_gg","м",o)))+'<sup class="bookletBuildings__filtersSup">&#178;</sup>'}function l(e,t){var a,i,o,r="";return r+='<div class="bookletBuildings__planInfoItem"><i class="bookletBuildings__planInfoIcon bookletBuildings__icon _price"></i>&nbsp;\n            <span class="bookletBuildings__planInfoLabel">',a=n["if"].call(e,(a=e&&e.price,null==a||a===!1?a:a.max),{hash:{},inverse:g.program(9,u,t),fn:g.program(7,c,t),data:t}),(a||0===a)&&(r+=a),r+='<span class="bookletBuildings__planInfoLabelPostfix">'+f((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e," тыс. ",o):m.call(e,"_gg"," тыс. ",o)))+'<span class="bookletBuildings__currency _'+f((a=e&&e.price,a=null==a||a===!1?a:a.currency,a=null==a||a===!1?a:a.code,typeof a===p?a.apply(e):a))+'">'+f((a=e&&e.price,a=null==a||a===!1?a:a.currency,a=null==a||a===!1?a:a.symbol,typeof a===p?a.apply(e):a))+"</span></span></span></div>"}function c(e,t){var n,a="";return a+=f((n=e&&e.price,n=null==n||n===!1?n:n.min,typeof n===p?n.apply(e):n))+" – "+f((n=e&&e.price,n=null==n||n===!1?n:n.max,typeof n===p?n.apply(e):n))}function u(e,t){var a,i,o,r="";return r+=f((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"от",o):m.call(e,"_gg","от",o)))+"&nbsp;"+f((a=e&&e.price,a=null==a||a===!1?a:a.min,typeof a===p?a.apply(e):a))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h="",p="function",f=this.escapeExpression,m=n.helperMissing,g=this;return h+='<div class="bookletBuildings__planInfo">',d=n["if"].call(t,t&&t.totalArea,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(d||0===d)&&(h+=d),d=n["if"].call(t,t&&t.price,{hash:{},inverse:g.noop,fn:g.program(6,l,i),data:i}),(d||0===d)&&(h+=d),h+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.others=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<li class="bookletBuildings__bullListItem bookletBuildings__othersItem _collapsed"><span class="bookletBuildings__link bookletBuildings__othersItemLink" data-code="',(i=n.code)?a=i.call(e,{hash:{},data:t}):(i=e&&e.code,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</span>",a=n["if"].call(e,e&&e.distance,{hash:{},inverse:f.noop,fn:f.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+="</li>"}function r(e,t){var a,i,o="";return o+='<span class="bookletBuildings__othersItemDescription">— ',(i=n.distance)?a=i.call(e,{hash:{},data:t}):(i=e&&e.distance,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</span>"}function s(e,t){var a,i,o="";return o+='<div class="bookletBuildings__overall bookletBuildings__othersMore"><span class="bookletBuildings__link" data-action="showBanks">'+p((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"посмотреть все объекты",i):m.call(e,"_gg","посмотреть все объекты",i)))+"</span></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var l,c,u,d="",h="function",p=this.escapeExpression,f=this,m=n.helperMissing;return d+='<div class="bookletBuildings__section"><h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner">'+p((c=n._gg||t&&t._gg,u={hash:{},data:i},c?c.call(t,"Другие объекты",u):m.call(t,"_gg","Другие объекты",u))),l=f.invokePartial(a.editIcon,"editIcon",t,n,a,i),(l||0===l)&&(d+=l),d+='</span></h2><ul class="bookletBuildings__bullList bookletBuildings__othersItems">',l=n.each.call(t,t&&t.others,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+="</ul>",l=n["if"].call(t,t&&t.showMoreOthers,{hash:{},inverse:f.noop,fn:f.program(4,s,i),data:i}),(l||0===l)&&(d+=l),d+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.photo=function(e,t,n,a,i){function o(e,t){var a,i,o="";return(i=n.albumId)?a=i.call(e,{hash:{},data:t}):(i=e&&e.albumId,a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)+"-"}function r(e,t){var a,i,o="";return o+=' data-album="',(i=n.albumId)?a=i.call(e,{hash:{},data:t}):(i=e&&e.albumId,a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)+'"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c="",u="function",d=this.escapeExpression,h=this;return c+='<div class="bookletBuildings__imageWrap"><div class="bookletBuildings__crop"><a href="http://',(l=n.mapsDomain)?s=l.call(t,{hash:{},data:i}):(l=t&&t.mapsDomain,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+"/",(l=n.bookletCode)?s=l.call(t,{hash:{},data:i}):(l=t&&t.bookletCode,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+"/album/",s=n["if"].call(t,t&&t.albumId,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(s||0===s)&&(c+=s),(l=n.section)?s=l.call(t,{hash:{},data:i}):(l=t&&t.section,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+"/photo/",(l=n.id)?s=l.call(t,{hash:{},data:i}):(l=t&&t.id,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+'"\n           class="bookletBuildings__cropImg bookletBuildings__action bookletBuildings__link bookletBuildings__photos"\n           style="background-image:url(',(l=n.thumbnail)?s=l.call(t,{hash:{},data:i}):(l=t&&t.thumbnail,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+')" data-section="',(l=n.section)?s=l.call(t,{hash:{},data:i}):(l=t&&t.section,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+'"',s=n["if"].call(t,t&&t.albumId,{hash:{},inverse:h.noop,fn:h.program(3,r,i),data:i}),(s||0===s)&&(c+=s),c+=' data-photo="',(l=n.id)?s=l.call(t,{hash:{},data:i}):(l=t&&t.id,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+'"></a></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.requestSuccess=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="bookletBuildings__requestSuccess"><div class="frame__controls"><div class="bookletBuildings__requestClose frame__controlsButton _close">'+c((o=n.Icon||t&&t.Icon,r={hash:{},data:i},o?o.call(t,"ui_close",r):l.call(t,"Icon","ui_close",r)))+'</div></div><div class="bookletBuildings__requestSuccessIn"><div class="bookletBuildings__requestTitle">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Ваша заявка отправлена. Компания свяжется с вами в ближайшее время по указанному телефону.",r):l.call(t,"_gg","Ваша заявка отправлена. Компания свяжется с вами в ближайшее время по указанному телефону.",r)))+"</div></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.shortInfo=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<i class="bookletBuildings__infographicsIcon bookletBuildings__icon _finished"></i><span class="bookletBuildings__infographicsText">'+h((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"дом сдан",i):d.call(e,"_gg","дом сдан",i)))+"</span>"}function r(e,t){var a,i,o,r="";return r+='<span class="bookletBuildings__infographicsNum">'+h((a=e&&e.shortInfo,a=null==a||a===!1?a:a.releaseYear,typeof a===p?a.apply(e):a))+'<small class="bookletBuildings__infographicsYear">'+h((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"год",o):d.call(e,"_gg","год",o)))+'&nbsp;\n                        <i class="bookletBuildings__icon _calendarStart"></i></small></span><span class="bookletBuildings__infographicsText">'+h((a=e&&e.shortInfo,a=null==a||a===!1?a:a.releaseQuarter,typeof a===p?a.apply(e):a))+"&nbsp;"+h((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"квартал",o):d.call(e,"_gg","квартал",o)))+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var s,l,c,u="",d=n.helperMissing,h=this.escapeExpression,p="function",f=this;return u+='<div class="bookletBuildings__section"><h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner">'+h((l=n._gg||t&&t._gg,c={hash:{},data:i},l?l.call(t,"Важное о доме",c):d.call(t,"_gg","Важное о доме",c))),s=f.invokePartial(a.editIcon,"editIcon",t,n,a,i),(s||0===s)&&(u+=s),u+='</span></h2><ul class="bookletBuildings__infographics"><li class="bookletBuildings__infographicsItem">',s=n["if"].call(t,(s=t&&t.shortInfo,null==s||s===!1?s:s.finished),{hash:{},inverse:f.program(3,r,i),fn:f.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+='</li><li class="bookletBuildings__infographicsItem"><span class="bookletBuildings__infographicsNum">'+h((s=t&&t.shortInfo,s=null==s||s===!1?s:s.maxFloors,typeof s===p?s.apply(t):s))+'</span><span class="bookletBuildings__infographicsText">'+h((l=n._ngg||t&&t._ngg,c={hash:{},data:i},l?l.call(t,"этаж","этажа","этажей",(s=t&&t.shortInfo,null==s||s===!1?s:s.maxFloors),c):d.call(t,"_ngg","этаж","этажа","этажей",(s=t&&t.shortInfo,null==s||s===!1?s:s.maxFloors),c)))+'</span></li><li class="bookletBuildings__infographicsItem"><span class="bookletBuildings__infographicsNum"><small class="bookletBuildings__infographicsYear">'+h((l=n._gg||t&&t._gg,c={hash:{},data:i},l?l.call(t,"от",c):d.call(t,"_gg","от",c)))+'&nbsp;\n                    <i class="bookletBuildings__icon _building"></i></small>'+h((s=t&&t.shortInfo,s=null==s||s===!1?s:s.minPrice,typeof s===p?s.apply(t):s))+'</span><span class="bookletBuildings__infographicsText">'+h((l=n._gg||t&&t._gg,c={hash:{},data:i},l?l.call(t,"тыс.",c):d.call(t,"_gg","тыс.",c)))+h((s=t&&t.currency,s=null==s||s===!1?s:s.symbol,typeof s===p?s.apply(t):s))+"&nbsp;"+h((l=n._gg||t&&t._gg,c={hash:{},data:i},l?l.call(t,"за м²",c):d.call(t,"_gg","за м²",c)))+"</span></li></ul></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.social=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var o,r="",s="function",l=this.escapeExpression,c=this;return r+='<div class="bookletBuildings__section"><h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner"><i class="bookletBuildings__icon _social"></i>'+l((o=t&&t.socialPrograms,o=null==o||o===!1?o:o.name,typeof o===s?o.apply(t):o)),o=c.invokePartial(a.editIcon,"editIcon",t,n,a,i),(o||0===o)&&(r+=o),r+='</span></h2><p class="bookletBuildings__paragraph">',o=t&&t.socialPrograms,o=null==o||o===!1?o:o.description,o=typeof o===s?o.apply(t):o,(o||0===o)&&(r+=o),r+="</p></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.tradein=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var o,r="",s="function",l=this.escapeExpression,c=this;return r+='<div class="bookletBuildings__section"><h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner"><i class="bookletBuildings__icon _exchange"></i>'+l((o=t&&t.tradein,o=null==o||o===!1?o:o.name,typeof o===s?o.apply(t):o)),o=c.invokePartial(a.editIcon,"editIcon",t,n,a,i),(o||0===o)&&(r+=o),r+='</span></h2><p class="bookletBuildings__paragraph">',o=t&&t.tradein,o=null==o||o===!1?o:o.description,o=typeof o===s?o.apply(t):o,(o||0===o)&&(r+=o),r+="</p></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.address=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n["if"].call(e,e&&e.floorName,{hash:{},inverse:g.noop,fn:g.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var a,i,o,r="";return r+='<div class="card__address _notClickable">',i=n.Link||e&&e.Link,o={hash:{"class":"card__addressLink _undashed"},inverse:g.noop,fn:g.program(3,s,t),data:t},a=i?i.call(e,o):f.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function s(e,t){var a,i,o="";return o+=m((a=n._pt||e&&e._pt,i={hash:{},data:t},a?a.call(e,"Номер этажа","%1 этаж",e&&e.floorName,i):f.call(e,"_pt","Номер этажа","%1 этаж",e&&e.floorName,i)))}function l(e,t){var a,i="";return a=n["if"].call(e,e&&e.address,{hash:{},inverse:g.noop,fn:g.program(6,c,t),data:t}),(a||0===a)&&(i+=a),i}function c(e,t){var a,i="";return i+='<address\n            class="card__address',a=n["if"].call(e,e&&e.notClickable,{hash:{},inverse:g.noop,fn:g.program(7,u,t),data:t}),(a||0===a)&&(i+=a),i+='"\n            data-lat="'+m((a=e&&e.point,a=null==a||a===!1?a:a.lat,typeof a===_?a.apply(e):a))+'"\n            data-lon="'+m((a=e&&e.point,a=null==a||a===!1?a:a.lon,typeof a===_?a.apply(e):a))+'"\n            >',a=n.each.call(e,e&&e.address,{hash:{},inverse:g.noop,fn:g.programWithDepth(9,d,t,e),data:t}),(a||0===a)&&(i+=a),i+="</address>"}function u(e,t){return" _notClickable"}function d(e,t,n){var a,i="";return i+='<span class="card__addressPart"><a href="'+m((a=n&&n.seoLinkAddress,typeof a===_?a.apply(e):a))+'" class="card__addressLink _undashed">',a=typeof e===_?e.apply(e):e,(a||0===a)&&(i+=a),i+="</a></span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p="",f=n.helperMissing,m=this.escapeExpression,g=this,_="function";return h=n["if"].call(t,t&&t.shownInFloors,{hash:{},inverse:g.program(5,l,i),fn:g.program(1,o,i),data:i}),(h||0===h)&&(p+=h),p},this.jst_modules=this.jst_modules||{},
this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.addressForGeoBlock=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n["if"].call(e,e&&e.floorName,{hash:{},inverse:g.noop,fn:g.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var a,i,o,r="";return r+='<div class="card__address _notClickable">',i=n.Link||e&&e.Link,o={hash:{"class":"card__addressLink _undashed"},inverse:g.noop,fn:g.program(3,s,t),data:t},a=i?i.call(e,o):f.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function s(e,t){var a,i,o="";return o+=m((a=n._pt||e&&e._pt,i={hash:{},data:t},a?a.call(e,"Номер этажа","%1 этаж",e&&e.floorName,i):f.call(e,"_pt","Номер этажа","%1 этаж",e&&e.floorName,i)))}function l(e,t){var a,i="";return a=n["if"].call(e,e&&e.addressWithoutCity,{hash:{},inverse:g.noop,fn:g.program(6,c,t),data:t}),(a||0===a)&&(i+=a),i}function c(e,t){var a,i="";return i+='<address\n            class="card__address',a=n["if"].call(e,e&&e.notClickable,{hash:{},inverse:g.noop,fn:g.program(7,u,t),data:t}),(a||0===a)&&(i+=a),i+='"\n            data-lat="'+m((a=e&&e.point,a=null==a||a===!1?a:a.lat,typeof a===_?a.apply(e):a))+'"\n            data-lon="'+m((a=e&&e.point,a=null==a||a===!1?a:a.lon,typeof a===_?a.apply(e):a))+'"\n            >',a=n.each.call(e,e&&e.addressWithoutCity,{hash:{},inverse:g.noop,fn:g.programWithDepth(9,d,t,e),data:t}),(a||0===a)&&(i+=a),i+="</address>"}function u(e,t){return" _notClickable"}function d(e,t,n){var a,i="";return i+='<span class="card__addressPart"><a href="'+m((a=n&&n.seoLinkAddress,typeof a===_?a.apply(e):a))+'" class="card__addressLink _undashed">',a=typeof e===_?e.apply(e):e,(a||0===a)&&(i+=a),i+="</a></span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p="",f=n.helperMissing,m=this.escapeExpression,g=this,_="function";return h=n["if"].call(t,t&&t.shownInFloors,{hash:{},inverse:g.program(5,l,i),fn:g.program(1,o,i),data:i}),(h||0===h)&&(p+=h),p},this.jst_modules=this.jst_modules||{},this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.ads=function(e,t,n,a,i){function o(e,t){var n,a="";return a+='<div class="card__adsWarning">',n=e&&e.ads,n=null==n||n===!1?n:n.warning,n=typeof n===d?n.apply(e):n,(n||0===n)&&(a+=n),a+="</div>"}function r(e,t){var n,a="";return a+='<div class="card__adsLink"><a href="'+h((n=e&&e.ads,n=null==n||n===!1?n:n.link,n=null==n||n===!1?n:n.value,typeof n===d?n.apply(e):n))+'" class="card__adsLinkIn" target="_blank">',n=e&&e.ads,n=null==n||n===!1?n:n.link,n=null==n||n===!1?n:n.text,n=typeof n===d?n.apply(e):n,(n||0===n)&&(a+=n),a+="</a></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d="function",h=this.escapeExpression,p=this,f=n.helperMissing;return u+='<div class="card__ads"><div class="card__adsIn"><a href="'+h((s=t&&t.ads,s=null==s||s===!1?s:s.seoLink,typeof s===d?s.apply(t):s))+'" class="card__adsText">',s=t&&t.ads,s=null==s||s===!1?s:s.text,s=typeof s===d?s.apply(t):s,(s||0===s)&&(u+=s),u+="</a>",s=n["if"].call(t,(s=t&&t.ads,null==s||s===!1?s:s.warning),{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+=h((l=n.Icon||t&&t.Icon,c={hash:{"class":"card__toggle _external"},data:i},l?l.call(t,"card_toggle",c):f.call(t,"Icon","card_toggle",c)))+"</div>",s=n["if"].call(t,(s=t&&t.ads,null==s||s===!1?s:s.link),{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(s||0===s)&&(u+=s),u+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.attributes=function(e,t,n,a,i){function o(e,t){return" _expandable _collapsed"}function r(e,t){var a,i="";return i+='<li class="card__rubricAttrsListItem">',a=n["if"].call(e,e&&e.label,{hash:{},inverse:f.noop,fn:f.program(4,s,t),data:t}),(a||0===a)&&(i+=a),a=n.each.call(e,e&&e.items,{hash:{},inverse:f.noop,fn:f.program(6,l,t),data:t}),(a||0===a)&&(i+=a),i+="</li>"}function s(e,t){var a,i,o="";return o+='<div class="card__rubricAttrsListLabel">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</div>"}function l(e,t){var n="";return n+='<span class="card__rubricAttrsItem">'+p(typeof e===h?e.apply(e):e)+"</span>"}function c(e,t){var a,i,o,r="";return r+='<div class="card__rubricAttrs _cut">',a=n.each.call(e,e&&e.cut,{hash:{},inverse:f.noop,fn:f.program(6,l,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"+p((i=n.Icon||e&&e.Icon,o={hash:{"class":"card__toggle"},data:t},i?i.call(e,"card_toggle",o):m.call(e,"Icon","card_toggle",o)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h="function",p=this.escapeExpression,f=this,m=n.helperMissing;return d+='<div class="card__rubric',u=n["if"].call(t,t&&t.cut,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(u||0===u)&&(d+=u),d+='"><div class="card__rubricAttrs _full"><ul class="card__rubricAttrsList">',u=n.each.call(t,t&&t.full,{hash:{},inverse:f.noop,fn:f.program(3,r,i),data:i}),(u||0===u)&&(d+=u),d+="</ul></div>",u=n["if"].call(t,(u=t&&t.cut,null==u||u===!1?u:u.length),{hash:{},inverse:f.noop,fn:f.program(8,c,i),data:i}),(u||0===u)&&(d+=u),d+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.discounts=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="card__discounts">'+c((o=n.Icon||t&&t.Icon,r={hash:{"class":"card__discountsIcon"},data:i},o?o.call(t,"card_discount",r):l.call(t,"Icon","card_discount",r)))+'<div class="card__discountsTitle"></div><div class="card__discountsDescription"><span class="card__discountsText"></span><span class="card__discountsMore"></span></div>'+c((o=n.Icon||t&&t.Icon,r={hash:{"class":"card__toggle _external"},data:i},o?o.call(t,"card_toggle",r):l.call(t,"Icon","card_toggle",r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.footer=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<div class="card__footerItem card__footerOwner">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.privateLinks,a=null==a||a===!1?a:a.office,null==a||a===!1?a:a.href),target:"_blank","class":"card__footerItemLink card__footerOwnerLink"},inverse:v.noop,fn:v.program(2,r,t),data:t},a=i?i.call(e,o):g.call(e,"Link",o),(a||0===a)&&(s+=a),s+="</div>"}function r(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.privateLinks,a=null==a||a===!1?a:a.office,null==a||a===!1?a:a.isOwner),{hash:{},inverse:v.program(5,l,t),fn:v.program(3,s,t),data:t}),(a||0===a)&&(i+=a),i}function s(e,t){var a,i,o="";return o+=_((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Создать сайт в 2ГИС",i):g.call(e,"_gg","Создать сайт в 2ГИС",i)))}function l(e,t){var a,i,o="";return o+=_((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Я владелец",i):g.call(e,"_t","Я владелец",i)))}function c(e,t){var a,i,o,r="";return r+='<div class="card__footerItem card__footerAdv">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.privateLinks,a=null==a||a===!1?a:a.adv,null==a||a===!1?a:a.href),target:"_blank","class":"card__footerItemLink card__footerAdvLink"},inverse:v.noop,fn:v.program(8,u,t),data:t},a=i?i.call(e,o):g.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function u(e,t){var a,i,o="";return o+=_((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Реклама в 2ГИС",i):g.call(e,"_t","Реклама в 2ГИС",i)))}function d(e,t){var a,i,o="";return o+=_((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Ошибка в данных",i):g.call(e,"_t","Ошибка в данных",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p,f,m="",g=n.helperMissing,_=this.escapeExpression,v=this;return m+='<footer class="card__footer"><div class="card__footerContent">',h=n["if"].call(t,(h=t&&t.privateLinks,h=null==h||h===!1?h:h.office,null==h||h===!1?h:h.href),{hash:{},inverse:v.noop,fn:v.program(1,o,i),data:i}),(h||0===h)&&(m+=h),m+=" ",h=n["if"].call(t,(h=t&&t.privateLinks,null==h||h===!1?h:h.adv),{hash:{},inverse:v.noop,fn:v.program(7,c,i),data:i}),(h||0===h)&&(m+=h),m+=' <div class="card__footerItem card__footerBugReport">',p=n.Link||t&&t.Link,f={hash:{"class":"card__footerItemLink card__footerBugReportLink"},inverse:v.noop,fn:v.program(10,d,i),data:i},h=p?p.call(t,f):g.call(t,"Link",f),(h||0===h)&&(m+=h),m+="</div></div></footer>"},this.jst_modules=this.jst_modules||{},this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.geoFooter=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<div class="card__footerItem card__footerAdv">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.geoAdvLink,null==a||a===!1?a:a.href),target:"_blank","class":"card__footerItemLink card__footerAdvLink"},inverse:f.noop,fn:f.program(2,r,t),data:t},a=i?i.call(e,o):h.call(e,"Link",o),(a||0===a)&&(s+=a),s+="</div>"}function r(e,t){var a,i,o="";return o+=p((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Реклама в 2ГИС",i):h.call(e,"_t","Реклама в 2ГИС",i)))}function s(e,t){var a,i,o="";return o+=p((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Ошибка в данных",i):h.call(e,"_t","Ошибка в данных",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h=n.helperMissing,p=this.escapeExpression,f=this;return d+='<footer class="card__footer"><div class="card__footerContent">',l=n["if"].call(t,t&&t.geoAdvLink,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+=' <div class="card__footerItem card__footerBugReport">',c=n.Link||t&&t.Link,u={hash:{"class":"card__footerItemLink card__footerBugReportLink"},inverse:f.noop,fn:f.program(4,s,i),data:i},l=c?c.call(t,u):h.call(t,"Link",u),(l||0===l)&&(d+=l),d+="</div></div></footer>"},this.jst_modules=this.jst_modules||{},this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.geoHeader=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<h1 class="card__name',a=n["if"].call(e,e&&e.isAddressInTitle,{hash:{},inverse:y.noop,fn:y.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+='">',a=n["if"].call(e,(a=e&&e.address,null==a||a===!1?a:a.length),{hash:{},inverse:y.program(6,l,t),fn:y.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</h1>"}function r(e,t){return" _address"}function s(e,t){var a,i,o="";return(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===g?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o}function l(e,t){var a,i="";return a=n["if"].call(e,e&&e.isSeparatedTitle,{hash:{},inverse:y.program(10,d,t),fn:y.program(7,c,t),data:t}),(a||0===a)&&(i+=a),i}function c(e,t){var a,i="";return a=n.each.call(e,e&&e.title,{hash:{},inverse:y.noop,fn:y.programWithDepth(8,u,t,e),data:t}),(a||0===a)&&(i+=a),i}function u(e,t,a){var i,o,r="";return r+='<span class="card__namePart">'+v((i=n.Link||a&&a.Link,o={hash:{href:a&&a.seoLinkAddress,"class":"_undashed card__addressLink _name"},data:t},i?i.call(e,e,o):_.call(e,"Link",e,o)))+"</span>"}function d(e,t){var a,i,o="";return o+=v((a=n.Link||e&&e.Link,i={hash:{href:e&&e.seoLinkAddress,"class":"_undashed card__addressLink _name"},data:t},a?a.call(e,e&&e.title,i):_.call(e,"Link",e&&e.title,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p,f,m="",g="function",_=n.helperMissing,v=this.escapeExpression,y=this;return m+='<header class="card__headerWrapper">',p=n.Fix||t&&t.Fix,f={hash:{"class":"card__header _innerHeader",tag:"header"},inverse:y.noop,fn:y.program(1,o,i),data:i},h=p?p.call(t,f):_.call(t,"Fix",f),(h||0===h)&&(m+=h),m+="</header>"},this.jst_modules=this.jst_modules||{},this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.mediaButtons=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<span class="card__apartments">'+p((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Посмотреть квартиры на карте",i):h.call(e,"_gg","Посмотреть квартиры на карте",i)))+"</span>"}function r(e,t){var a,i,o="";return o+='<span class="card__proposalsButton">'+p((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Найти места продаж",i):h.call(e,"_gg","Найти места продаж",i)))+"</span>"}function s(e,t){var a,i,o="";return o+='<a href="',(i=n.seoLinkBooklet)?a=i.call(e,{hash:{},data:t}):(i=e&&e.seoLinkBooklet,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=p(a)+'" class="card__booklet">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</a>"}function l(e,t){var a,i,o="";return o+='<a href="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=p(a)+'" class="card__plusOne">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</a>"}function c(e,t){var a,i,o,r="";return r+='<a class="card__floors" href="',(i=n.floorsSeoLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.floorsSeoLink,a=typeof i===f?i.call(e,{hash:{},data:t}):i),r+=p(a)+'">'+p((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Посмотреть на этажах",o):h.call(e,"_t","Посмотреть на этажах",o)))+"</a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h=n.helperMissing,p=this.escapeExpression,f="function",m=this;return d+='<div class="card__buttons">',u=n["if"].call(t,t&&t.apartments,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(u||0===u)&&(d+=u),u=n["if"].call(t,t&&t.proposals,{hash:{},inverse:m.noop,fn:m.program(3,r,i),data:i}),(u||0===u)&&(d+=u),u=n.each.call(t,t&&t.booklets,{hash:{},inverse:m.noop,fn:m.program(5,s,i),data:i}),(u||0===u)&&(d+=u),u=n.each.call(t,t&&t.plusOnes,{hash:{},inverse:m.noop,fn:m.program(7,l,i),data:i}),(u||0===u)&&(d+=u),u=n["if"].call(t,t&&t.floorsSeoLink,{hash:{},inverse:m.noop,fn:m.program(9,c,i),data:i}),(u||0===u)&&(d+=u),d+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.photos=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<a href="'+p((a=e&&e.photos,a=null==a||a===!1?a:a.seoLink,typeof a===h?a.apply(e):a))+'" class="card__photos">',a=n["if"].call(e,(a=e&&e.photos,null==a||a===!1?a:a.preview),{hash:{},inverse:f.noop,fn:f.program(2,r,t),data:t}),(a||0===a)&&(s+=a),s+='<div class="card__photosCount"><span class="card__photosCountNumber">'+p((a=e&&e.photos,a=null==a||a===!1?a:a.count,typeof a===h?a.apply(e):a))+"</span> "+p((i=n._nt||e&&e._nt,o={hash:{},data:t},i?i.call(e,"фото","фото","фото",(a=e&&e.photos,null==a||a===!1?a:a.count),o):m.call(e,"_nt","фото","фото","фото",(a=e&&e.photos,null==a||a===!1?a:a.count),o)))+"</div></a>"}function r(e,t){var a,i="";return i+='<div class="card__photosImg',a=n["if"].call(e,e&&e.dontPreloadPhoto,{hash:{},inverse:f.noop,fn:f.program(3,s,t),data:t}),(a||0===a)&&(i+=a),i+='" data-src="'+p((a=e&&e.photos,a=null==a||a===!1?a:a.preview,typeof a===h?a.apply(e):a))+'"',a=n["if"].call(e,e&&e.dontPreloadPhoto,{hash:{},inverse:f.noop,fn:f.program(5,l,t),data:t}),(a||0===a)&&(i+=a),i+="></div>"}function s(e,t){return" _loaded"}function l(e,t){var n,a="";return a+=' style="background-image: url('+p((n=e&&e.photos,n=null==n||n===!1?n:n.preview,typeof n===h?n.apply(e):n))+')"'}function c(e,t){var a,i,o="";return o+='<div class="card__addPhotoControl">'+p((a=n.Icon||e&&e.Icon,i={hash:{"class":"card__addPhotosIcon"},data:t},a?a.call(e,"photosUploader_smallControl",i):m.call(e,"Icon","photosUploader_smallControl",i)))+'<span class="card__addPhotoControlName">'+p((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Добавить фото",i):m.call(e,"_t","Добавить фото",i)))+"</span></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h="function",p=this.escapeExpression,f=this,m=n.helperMissing;return u=n["if"].call(t,t&&t.photos,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(u||0===u)&&(d+=u),u=n["if"].call(t,t&&t.photosUploaderControl,{hash:{},inverse:f.noop,fn:f.program(7,c,i),data:i}),(u||0===u)&&(d+=u),d},this.jst_modules=this.jst_modules||{},this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.rubrics=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<li class="card__rubricsItem" data-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===l?i.call(e,{hash:{},data:t}):i),r+=c(a)+'">'+c((i=n.Link||e&&e.Link,o={hash:{href:e&&e.seoLinkRubric,"class":"card__rubricsItemLink"},data:t},i?i.call(e,e&&e.name,o):u.call(e,"Link",e&&e.name,o)))+"</li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l="function",c=this.escapeExpression,u=n.helperMissing,d=this;return s+='<section class="card__section"><ul class="card__rubrics">',r=n.each.call(t,t&&t.rubrics,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s+="</ul></section>"},this.jst_modules=this.jst_modules||{},this.jst_modules.feedback=this.jst_modules.feedback||{},this.jst_modules.feedback.app=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return i=n._t||e&&e._t,o={hash:{},data:t},a=i?i.call(e,"%1, если вы нашли ошибку или у Вас возникли трудности, замечания или предложения &#151; пожалуйста, напишите нам",e&&e.name,o):c.call(e,"_t","%1, если вы нашли ошибку или у Вас возникли трудности, замечания или предложения &#151; пожалуйста, напишите нам",e&&e.name,o),(a||0===a)&&(r+=a),r}function r(e,t){var a,i,o,r="";return i=n._t||e&&e._t,o={hash:{},data:t},a=i?i.call(e,"Если вы нашли ошибку или у Вас возникли трудности, замечания или предложения &#151; пожалуйста, напишите нам",o):c.call(e,"_t","Если вы нашли ошибку или у Вас возникли трудности, замечания или предложения &#151; пожалуйста, напишите нам",o),(a||0===a)&&(r+=a),r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c=n.helperMissing,u=this;return s=n["if"].call(t,t&&t.name,{hash:{},inverse:u.program(3,r,i),fn:u.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l},this.jst_modules=this.jst_modules||{},this.jst_modules.feedback=this.jst_modules.feedback||{},this.jst_modules.feedback.bookletError=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return i=n._ht||e&&e._ht,o={hash:{link__href:e&&e.href,link__class:"_scheme_dark",link__target:"_blank"},data:t},a=i?i.call(e,"%1, если вы считаете, что содержание этого буклета нарушает %{Link Соглашение об использовании сервисов 2ГИС} &#151; пожалуйста, напишите нам.",e&&e.name,o):c.call(e,"_ht","%1, если вы считаете, что содержание этого буклета нарушает %{Link Соглашение об использовании сервисов 2ГИС} &#151; пожалуйста, напишите нам.",e&&e.name,o),(a||0===a)&&(r+=a),r}function r(e,t){var a,i,o,r="";return i=n._ht||e&&e._ht,o={hash:{link__href:e&&e.href,link__class:"_scheme_dark",link__target:"_blank"},data:t},a=i?i.call(e,"Если вы считаете, что содержание этого буклета нарушает %{Link Соглашение об использовании сервисов 2ГИС} &#151; пожалуйста, напишите нам.",o):c.call(e,"_ht","Если вы считаете, что содержание этого буклета нарушает %{Link Соглашение об использовании сервисов 2ГИС} &#151; пожалуйста, напишите нам.",o),(a||0===a)&&(r+=a),r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c=n.helperMissing,u=this;return s=n["if"].call(t,t&&t.name,{hash:{},inverse:u.program(3,r,i),fn:u.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l},this.jst_modules=this.jst_modules||{},this.jst_modules.feedback=this.jst_modules.feedback||{},this.jst_modules.feedback.claimToFirmIntro=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+=c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Мы отправим ваше письмо в организацию «%1», и она ответит на указанную почту.",t&&t.filialName,r):l.call(t,"_t","Мы отправим ваше письмо в организацию «%1», и она ответит на указанную почту.",t&&t.filialName,r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.feedback=this.jst_modules.feedback||{},this.jst_modules.feedback.dataError=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function";return(r=n.filialName)?o=r.call(t,{hash:{},data:i}):(r=t&&t.filialName,o=typeof r===l?r.call(t,{hash:{},data:i}):r),(o||0===o)&&(s+=o),s+="<br/>",(r=n.filialAddress)?o=r.call(t,{hash:{},data:i}):(r=t&&t.filialAddress,o=typeof r===l?r.call(t,{hash:{},data:i}):r),(o||0===o)&&(s+=o),s},this.jst_modules=this.jst_modules||{},this.jst_modules.feedback=this.jst_modules.feedback||{},this.jst_modules.feedback.mapError=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function";return(r=n.placeTitle)?o=r.call(t,{hash:{},data:i}):(r=t&&t.placeTitle,o=typeof r===l?r.call(t,{hash:{},data:i}):r),(o||0===o)&&(s+=o),s},this.jst_modules=this.jst_modules||{},this.jst_modules.feedback=this.jst_modules.feedback||{},this.jst_modules.feedback.photoError=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return i=n._ht||e&&e._ht,o={hash:{link__href:e&&e.href,link__target:"_blank",link__class:"_scheme_dark"},data:t},a=i?i.call(e,"%1, если вы считаете, что данное фото нарушает %{Link Соглашение об использовании сервисов 2ГИС} &#151; пожалуйста, напишите нам.",e&&e.name,o):c.call(e,"_ht","%1, если вы считаете, что данное фото нарушает %{Link Соглашение об использовании сервисов 2ГИС} &#151; пожалуйста, напишите нам.",e&&e.name,o),(a||0===a)&&(r+=a),r}function r(e,t){var a,i,o,r="";return i=n._ht||e&&e._ht,o={hash:{link__href:e&&e.href,link__target:"_blank",link__class:"_scheme_dark"},data:t},a=i?i.call(e,"Если вы считаете, что данное фото нарушает %{Link Соглашение об использовании сервисов 2ГИС} &#151; пожалуйста, напишите нам.",o):c.call(e,"_ht","Если вы считаете, что данное фото нарушает %{Link Соглашение об использовании сервисов 2ГИС} &#151; пожалуйста, напишите нам.",o),(a||0===a)&&(r+=a),r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c=n.helperMissing,u=this;return s=n["if"].call(t,t&&t.name,{hash:{},inverse:u.program(3,r,i),fn:u.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l},this.jst_modules=this.jst_modules||{},this.jst_modules.feedback=this.jst_modules.feedback||{},this.jst_modules.feedback.publicTransportRouteError=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function";return(r=n.routeType)?o=r.call(t,{hash:{},data:i}):(r=t&&t.routeType,o=typeof r===l?r.call(t,{hash:{},data:i}):r),(o||0===o)&&(s+=o),s+=" ",(r=n.routeNumber)?o=r.call(t,{hash:{},data:i}):(r=t&&t.routeNumber,o=typeof r===l?r.call(t,{hash:{},data:i}):r),(o||0===o)&&(s+=o),s},this.jst_modules=this.jst_modules||{},this.jst_modules.apartmentsList=this.jst_modules.apartmentsList||{},this.jst_modules.apartmentsList.apartmentsList=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="apartmentsList__extensions">'+d((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"wizard",i):u.call(e,"p","wizard",i)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h="function",p=this;return c+='<div class="apartmentsList__header">'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Недвижимость",l):u.call(t,"_gg","Недвижимость",l)))+'<div class="apartmentsList__headerTotal">',(s=n.count)?r=s.call(t,{hash:{},data:i}):(s=t&&t.count,r=typeof s===h?s.call(t,{hash:{},data:i}):s),c+=d(r)+'</div></div><div class="apartmentsList__clipper"><div class="apartmentsList__scroller">',r=n["if"].call(t,t&&t.wizard,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+='<div class="apartmentsList__list">'+d((s=n.p||t&&t.p,l={hash:{},data:i},s?s.call(t,"list",l):u.call(t,"p","list",l)))+"</div>"+d((s=n.Preloader||t&&t.Preloader,l={hash:{"class":"_scheme_lighten apartmentsList__preloader"},data:i},s?s.call(t,l):u.call(t,"Preloader",l))),(s=n.Track)?r=s.call(t,{hash:{},data:i}):(s=t&&t.Track,r=typeof s===h?s.call(t,{hash:{},data:i}):s),c+=d(r)+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.apps=this.jst_modules.apps||{},this.jst_modules.apps.apps=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<div class="apps__item _desktop"><div class="apps__itemIn">'+d((i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.desktop,null==a||a===!1?a:a.href),target:"_blank","class":"_scheme_dark _large apps__itemLink","data-platform":"desktop"},data:t},i?i.call(e,(a=e&&e.desktop,null==a||a===!1?a:a.title),o):u.call(e,"Link",(a=e&&e.desktop,null==a||a===!1?a:a.title),o)))+"</div></div> "}function r(e,t){var a,i,o,r="";return r+='<div class="apps__item _',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===h?i.call(e,{hash:{},data:t}):i),r+=d(a)+'">'+d((i=n.Link||e&&e.Link,o={hash:{href:e&&e.href,target:"_blank","class":"_scheme_dark apps__itemLink","data-platform":e&&e.type},data:t},i?i.call(e,e&&e.title,o):u.call(e,"Link",e&&e.title,o)))+"</div> "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c="",u=n.helperMissing,d=this.escapeExpression,h="function",p=this;return s=n["if"].call(t,t&&t.desktop,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(s||0===s)&&(c+=s),c+='<div class="apps__title">',(l=n.title)?s=l.call(t,{hash:{},data:i}):(l=t&&t.title,s=typeof l===h?l.call(t,{hash:{},data:i}):l),c+=d(s)+"</div>",s=n.each.call(t,t&&t.mobile,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(s||0===s)&&(c+=s),c},this.jst_modules=this.jst_modules||{},this.jst_modules.articleCard=this.jst_modules.articleCard||{},this.jst_modules.articleCard.articleCard=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<h1 class="articleCard__headerTitle">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+"</h1>",a=n["if"].call(e,e&&e.address,{hash:{},inverse:y.noop,fn:y.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o}function r(e,t){var a,i,o="";return o+='<address class="articleCard__address"><div class="articleCard__addressLink">',(i=n.address)?a=i.call(e,{hash:{},data:t}):(i=e&&e.address,a=typeof i===_?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>",a=n["if"].call(e,e&&e.comment,{hash:{},inverse:y.noop,fn:y.program(3,s,t),data:t}),(a||0===a)&&(o+=a),o+="</address>"}function s(e,t){var a,i,o="";return o+='<div class="articleCard__addressComment"><span class="articleCard__addressCommentText">',(i=n.comment)?a=i.call(e,{hash:{},data:t}):(i=e&&e.comment,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+"</span></div>"}function l(e,t){var n,a="";return a+='<p class="articleCard__paragraph">',n=typeof e===_?e.apply(e):e,(n||0===n)&&(a+=n),a+="</p>"}function c(e,t){var a,i="";return a=n["if"].call(e,e&&e.warning,{hash:{},inverse:y.noop,fn:y.program(8,u,t),data:t}),(a||0===a)&&(i+=a),i}function u(e,t){var a,i,o="";return o+='<div class="articleCard__adsWarning">',(i=n.warning)?a=i.call(e,{hash:{},data:t}):(i=e&&e.warning,a=typeof i===_?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function d(e,t){var a,i,o,r="";return r+='<div class="articleCard__footerLinkWrap _adv">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.advLink,null==a||a===!1?a:a.href),target:"_blank","class":"articleCard__footerLink articleCard__advComeOn"},inverse:y.noop,fn:y.program(11,h,t),data:t},a=i?i.call(e,o):b.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function h(e,t){var a,i,o="";return o+=v((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Ваша реклама в 2ГИС",i):b.call(e,"_t","Ваша реклама в 2ГИС",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var p,f,m,g="",_="function",v=this.escapeExpression,y=this,b=n.helperMissing;return g+='<div class="articleCard__scroller"><div class="articleCard__container"><div class="articleCard__headerWrapper">',f=n.Fix||t&&t.Fix,m={hash:{"class":"articleCard__header",tag:"header"},inverse:y.noop,fn:y.program(1,o,i),data:i},p=f?f.call(t,m):b.call(t,"Fix",m),(p||0===p)&&(g+=p),g+='</div><div class="articleCard__content">',p=n.each.call(t,t&&t.text,{hash:{},inverse:y.noop,fn:y.program(5,l,i),data:i}),(p||0===p)&&(g+=p),g+='</div><div class="articleCard__adsWrapper">',f=n.Fix||t&&t.Fix,m={hash:{"class":"articleCard__ads"},inverse:y.noop,fn:y.program(7,c,i),data:i},p=f?f.call(t,m):b.call(t,"Fix",m),(p||0===p)&&(g+=p),g+='</div><div class="articleCard__footerWrapper">',f=n.Fix||t&&t.Fix,m={hash:{"class":"articleCard__footer",tag:"footer"},inverse:y.noop,fn:y.program(10,d,i),data:i},p=f?f.call(t,m):b.call(t,"Fix",m),(p||0===p)&&(g+=p),g+="</div></div>",(f=n.Track)?p=f.call(t,{hash:{},data:i}):(f=t&&t.Track,p=typeof f===_?f.call(t,{hash:{},data:i}):f),g+=v(p)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.auth=this.jst_modules.auth||{},this.jst_modules.auth.auth=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<header class="auth__popupHeader">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</header>"}function r(e,t){var a,i,o="";return o+='<div class="auth__popupHeaderText">',(i=n.headerText)?a=i.call(e,{hash:{},data:t}):(i=e&&e.headerText,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</div>"}function s(e,t){var a,i,o,r="";return r+='<div class="auth__formField _privateOffice"><div class="auth__privateOfficeTitle">'+p((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Вы владелец компании?",o):f.call(e,"_t","Вы владелец компании?",o)))+"</div>",i=n._ht||e&&e._ht,o={hash:{link__target:"_blank",link__class:"_scheme_dark",link__href:e&&e.privateOffice},data:t},a=i?i.call(e,"Управляйте информацией из %{Link Личного кабинета}",o):f.call(e,"_ht","Управляйте информацией из %{Link Личного кабинета}",o),(a||0===a)&&(r+=a),r+="</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h="function",p=this.escapeExpression,f=n.helperMissing,m=this;return d+='<div class="auth__overlay"></div><div class="auth__popup"><div class="auth__popupClose"></div>',l=n.unless.call(t,t&&t.loyalty,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(l||0===l)&&(d+=l),l=n["if"].call(t,t&&t.headerText,{hash:{},inverse:m.noop,fn:m.program(3,r,i),data:i}),(l||0===l)&&(d+=l),d+=p((c=n.p||t&&t.p,u={hash:{},data:i},c?c.call(t,t&&t.type,"login",u):f.call(t,"p",t&&t.type,"login",u))),l=n["if"].call(t,t&&t.privateOffice,{hash:{},inverse:m.noop,fn:m.program(5,s,i),data:i}),(l||0===l)&&(d+=l),d+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.autoResults=this.jst_modules.autoResults||{},this.jst_modules.autoResults.autoResults=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<section class="autoResults__route"><header class="autoResults__routeHeader" data-route-id="',(i=n.routeId)?a=i.call(e,{hash:{},data:t}):(i=e&&e.routeId,a=typeof i===d?i.call(e,{hash:{},data:t}):i),s+=h(a)+'"><div class="autoResults__routeHeaderContent"><div class="autoResults__routeHeaderContentDuration">',(i=n.duration)?a=i.call(e,{hash:{},data:t}):(i=e&&e.duration,a=typeof i===d?i.call(e,{hash:{},data:t}):i),s+=h(a)+'</div>, <div class="autoResults__routeHeaderContentLength">'+h((i=n._i18n||e&&e._i18n,o={hash:{data:e&&e.length},data:t},i?i.call(e,"DISTANCE",o):f.call(e,"_i18n","DISTANCE",o)))+'</div> <div class="autoResults__routeHeaderContentNote">',(i=n.note)?a=i.call(e,{hash:{},data:t}):(i=e&&e.note,a=typeof i===d?i.call(e,{hash:{},data:t}):i),s+=h(a)+'</div></div><div class="autoResults__routeHeaderShield"><div class="autoResults__routeHeaderShieldIn"></div></div></header><div class="autoResults__routeDetails"><div class="autoResults__scroller">',a=n.each.call(e,e&&e.legs,{hash:{},inverse:p.noop,fn:p.program(2,r,t),data:t}),(a||0===a)&&(s+=a),s+=h((i=n.Track||e&&e.Track,o={hash:{tag:"span"},data:t},i?i.call(e,o):f.call(e,"Track",o)))+"</div></div></section>"}function r(e,t){var a,i="";return i+='<div class="autoResults__routeDetailsItem">',a=n.each.call(e,e&&e.steps,{hash:{},inverse:p.noop,fn:p.program(3,s,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function s(e,t){var a,i,o="";return o+='<article class="autoResults__step _type_',(i=n.icon)?a=i.call(e,{hash:{},data:t}):(i=e&&e.icon,a=typeof i===d?i.call(e,{hash:{},data:t
}):i),o+=h(a)+'" data-route-id="',(i=n.routeId)?a=i.call(e,{hash:{},data:t}):(i=e&&e.routeId,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'" data-leg-id="',(i=n.legId)?a=i.call(e,{hash:{},data:t}):(i=e&&e.legId,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'" data-step-id="',(i=n.stepId)?a=i.call(e,{hash:{},data:t}):(i=e&&e.stepId,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'"><div class="autoResults__stepTitle">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'</div><div class="autoResults__stepNote">',(i=n.note)?a=i.call(e,{hash:{},data:t}):(i=e&&e.note,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+"</div></article>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u="",d="function",h=this.escapeExpression,p=this,f=n.helperMissing;return u+='<div class="autoResults__header">',(c=n.title)?l=c.call(t,{hash:{},data:i}):(c=t&&t.title,l=typeof c===d?c.call(t,{hash:{},data:i}):c),u+=h(l)+'</div><div class="autoResults__wrap">',l=n.each.call(t,t&&t.routes,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(l||0===l)&&(u+=l),u+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.avatar=this.jst_modules.avatar||{},this.jst_modules.avatar.avatar=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<img class="avatar__img" src=',(i=n.avatar)?a=i.call(e,{hash:{},data:t}):(i=e&&e.avatar,a=typeof i===c?i.call(e,{hash:{},data:t}):i),o+=u(a)+" width=",(i=n.size)?a=i.call(e,{hash:{},data:t}):(i=e&&e.size,a=typeof i===c?i.call(e,{hash:{},data:t}):i),o+=u(a)+" height=",(i=n.size)?a=i.call(e,{hash:{},data:t}):(i=e&&e.size,a=typeof i===c?i.call(e,{hash:{},data:t}):i),o+=u(a)+">"}function r(e,t){var a,i,o="";return(i=n.letter)?a=i.call(e,{hash:{},data:t}):(i=e&&e.letter,a=typeof i===c?i.call(e,{hash:{},data:t}):i),o+=u(a)}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c="function",u=this.escapeExpression,d=this;return s=n["if"].call(t,t&&t.avatar,{hash:{},inverse:d.program(3,r,i),fn:d.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l},this.jst_modules=this.jst_modules||{},this.jst_modules.award=this.jst_modules.award||{},this.jst_modules.award.award=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<ul class="award__rubrics">',a=n.each.call(e,e&&e.categories,{hash:{},inverse:m.noop,fn:m.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function r(e,t){var a,i="";return i+='<li class="award__rubricsItem"><span class="award__rubricsItemLink',a=n["if"].call(e,e&&e.checked,{hash:{},inverse:m.noop,fn:m.program(3,s,t),data:t}),(a||0===a)&&(i+=a),i+='" data-rubric="'+_((a=e&&e.name,typeof a===g?a.apply(e):a))+'">'+_((a=e&&e.name,typeof a===g?a.apply(e):a))+"</span></li>"}function s(e,t){return" _current"}function l(e,t){var a,i,o="";return o+='<header class="award__mainIntro">',(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===g?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</header>"}function c(e,t){var a,i,o="";return o+=_((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"group",i):v.call(e,"p","group",i)))}function u(e,t){var a,i="";return i+='<ul class="award__rubrics _bottom">',a=n.each.call(e,e&&e.categories,{hash:{},inverse:m.noop,fn:m.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h,p,f="",m=this,g="function",_=this.escapeExpression,v=n.helperMissing;return f+='<div class="award__scroller"><header class="award__header">'+_((h=n.p||t&&t.p,p={hash:{},data:i},h?h.call(t,t&&t.header,"defaultHeader",p):v.call(t,"p",t&&t.header,"defaultHeader",p)))+"</header>",d=n.unless.call(t,t&&t.is_final,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(d||0===d)&&(f+=d),f+='<section class="award__main">',d=n["if"].call(t,t&&t.text,{hash:{},inverse:m.noop,fn:m.program(5,l,i),data:i}),(d||0===d)&&(f+=d),f+='<div class="award__categories">',d=n.each.call(t,t&&t.groups,{hash:{},inverse:m.noop,fn:m.program(7,c,i),data:i}),(d||0===d)&&(f+=d),f+="</div></section>",d=n.unless.call(t,t&&t.is_final,{hash:{},inverse:m.noop,fn:m.program(9,u,i),data:i}),(d||0===d)&&(f+=d),f+='<footer class="award__footer"><div class="award__footerText">'+_((h=n._t||t&&t._t,p={hash:{},data:i},h?h.call(t,"Популярные новые компании",p):v.call(t,"_t","Популярные новые компании",p)))+" ",(h=n.regionGenitiveName)?d=h.call(t,{hash:{},data:i}):(h=t&&t.regionGenitiveName,d=typeof h===g?h.call(t,{hash:{},data:i}):h),f+=_(d)+" <br />"+_((h=n._t||t&&t._t,p={hash:{},data:i},h?h.call(t,"© 2ГИС",p):v.call(t,"_t","© 2ГИС",p)))+'</div><div class="award__footerSocial"><a href="#" class="award__footerSocialItem _social_facebook"></a><a href="#" class="award__footerSocialItem _social_twitter"></a><a href="#" class="award__footerSocialItem _social_vkontakte"></a></div></footer>',(h=n.Track)?d=h.call(t,{hash:{},data:i}):(h=t&&t.Track,d=typeof h===g?h.call(t,{hash:{},data:i}):h),f+=_(d)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.awardBadge=this.jst_modules.awardBadge||{},this.jst_modules.awardBadge.awardBadge=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+=u((r=n.Icon||t&&t.Icon,s={hash:{"class":"awardBadge__icon"},data:i},r?r.call(t,"awardBadge_flag",s):c.call(t,"Icon","awardBadge_flag",s)))+'<div class="awardBadge__text">',r=n._t||t&&t._t,s={hash:{},data:i},o=r?r.call(t,"Открытие<br>года 2015",s):c.call(t,"_t","Открытие<br>года 2015",s),(o||0===o)&&(l+=o),l+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.awardCard=this.jst_modules.awardCard||{},this.jst_modules.awardCard.awardCard=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=' style="background-image: url(',(i=n.image)?a=i.call(e,{hash:{},data:t}):(i=e&&e.image,a=typeof i===b?i.call(e,{hash:{},data:t}):i),o+=k(a)+')"'}function r(e,t){var a,i="";return a=n["if"].call(e,e&&e.rating,{hash:{},inverse:x.noop,fn:x.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i}function s(e,t){var a,i,o="";return o+=k((a=n.Rating||e&&e.Rating,i={hash:{style:"smallBlue","class":"awardCard__rating"},data:t},a?a.call(e,e&&e.rating,i):w.call(e,"Rating",e&&e.rating,i)))}function l(e,t){var a,i="";return a=n["if"].call(e,e&&e.is_voting_enabled,{hash:{},inverse:x.program(9,u,t),fn:x.program(7,c,t),data:t}),(a||0===a)&&(i+=a),i}function c(e,t){var a,i,o,r="";return r+='<div class="awardCard__votes" data-votes="',(i=n.votes)?a=i.call(e,{hash:{},data:t}):(i=e&&e.votes,a=typeof i===b?i.call(e,{hash:{},data:t}):i),r+=k(a)+'">'+k((i=n.Icon||e&&e.Icon,o={hash:{"class":"awardCard__votesImg"},data:t},i?i.call(e,"award__vote",o):w.call(e,"Icon","award__vote",o)))+"</div>"}function u(e,t){var a,i,o="";return o+='<div class="awardCard__like">'+k((a=n.Icon||e&&e.Icon,i={hash:{"class":"awardCard__likeImg"},data:t},a?a.call(e,"award__like",i):w.call(e,"Icon","award__like",i)))+"</div>"}function d(e,t){var a,i,o="";return o+='<div class="awardCard__desc">',(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===b?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function h(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.profile,null==a||a===!1?a:a.rubrics),{hash:{},inverse:x.noop,fn:x.program(14,p,t),data:t}),(a||0===a)&&(i+=a),i}function p(e,t){var a,i="";return i+='<ul class="awardCard__attrs">',a=n.each.call(e,(a=e&&e.profile,null==a||a===!1?a:a.rubrics),{hash:{},inverse:x.noop,fn:x.program(15,f,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function f(e,t){var a,i,o="";return o+='<li class="awardCard__attrsItem">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===b?i.call(e,{hash:{},data:t}):i),o+=k(a)+"</li>"}function m(e,t){var a,i,o,r="";return r+='<span class="awardCard__footerVotes" data-votes="',(i=n.votes)?a=i.call(e,{hash:{},data:t}):(i=e&&e.votes,a=typeof i===b?i.call(e,{hash:{},data:t}):i),r+=k(a)+'">'+k((i=n.Icon||e&&e.Icon,o={hash:{"class":"awardCard__footerVotesImg"},data:t},i?i.call(e,"award__vote",o):w.call(e,"Icon","award__vote",o)))+'</span> <span class="awardCard__footerShareWrap">'+k((i=n.Icon||e&&e.Icon,o={hash:{"class":"awardCard__footerShare"},data:t},i?i.call(e,"award__like",o):w.call(e,"Icon","award__like",o)))+"</span>"}function g(e,t){var a,i="";return a=n["if"].call(e,e&&e.rating,{hash:{},inverse:x.noop,fn:x.program(20,_,t),data:t}),(a||0===a)&&(i+=a),i}function _(e,t){var a,i,o="";return o+=k((a=n.Rating||e&&e.Rating,i={hash:{style:"smallBlue","class":"awardCard__footerRating"},data:t},a?a.call(e,e&&e.rating,i):w.call(e,"Rating",e&&e.rating,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var v,y="",b="function",k=this.escapeExpression,w=n.helperMissing,x=this;return y+='<div class="awardCard__content"><div class="awardCard__cover"',v=n["if"].call(t,t&&t.image,{hash:{},inverse:x.noop,fn:x.program(1,o,i),data:i}),(v||0===v)&&(y+=v),y+="></div>",v=n["if"].call(t,t&&t["final"],{hash:{},inverse:x.program(6,l,i),fn:x.program(3,r,i),data:i}),(v||0===v)&&(y+=v),y+='<div class="awardCard__title">'+k((v=t&&t.profile,v=null==v||v===!1?v:v.name_ex,v=null==v||v===!1?v:v.primary,typeof v===b?v.apply(t):v))+'</div><address class="awardCard__address">'+k((v=t&&t.profile,v=null==v||v===!1?v:v.address_name,typeof v===b?v.apply(t):v))+"</address>",v=n["if"].call(t,t&&t.text,{hash:{},inverse:x.program(13,h,i),fn:x.program(11,d,i),data:i}),(v||0===v)&&(y+=v),y+='</div><div class="awardCard__footer">',v=n["if"].call(t,t&&t["final"],{hash:{},inverse:x.program(19,g,i),fn:x.program(17,m,i),data:i}),(v||0===v)&&(y+=v),y+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.awardPopup=this.jst_modules.awardPopup||{},this.jst_modules.awardPopup.awardPopup=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="awardPopup__overlay"></div><div class="awardPopup__block">'+c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,t&&t.type,r):l.call(t,"p",t&&t.type,r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.booklet=this.jst_modules.booklet||{},this.jst_modules.booklet.booklet=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+=c((o=n.module||t&&t.module,r={hash:{},data:i},o?o.call(t,t&&t.activeBooklet,r):l.call(t,"module",t&&t.activeBooklet,r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.bookletBuildings=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=d((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,e&&e.subpageName,i):u.call(e,"p",e&&e.subpageName,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h=this;return c+='<div class="bookletBuildings__in"><div class="bookletBuildings__baron bookletBuildings__section"><div class="bookletBuildings__baronWrapper"><div class="bookletBuildings__baronScroller"><div class="bookletBuildings__header">'+d((s=n.module||t&&t.module,l={hash:{},data:i},s?s.call(t,"bookletHeader",l):u.call(t,"module","bookletHeader",l)))+'</div><div class="bookletBuildings__editor _state_hidden"></div><div class="bookletBuildings__main _state_visible">',r=n.unless.call(t,t&&t.editorEnabled,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+='</div><div class="bookletBuildings__footer">',r=h.invokePartial(a.footer,"footer",t,n,a,i),(r||0===r)&&(c+=r),c+='</div><div class="bookletBuildings__requestFormContainer"></div>'+d((s=n.Track||t&&t.Track,l={hash:{"class":"bookletBuildings__track _outerTrack _booklet"},data:i},s?s.call(t,l):u.call(t,"Track",l)))+"</div></div></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletEditor=this.jst_modules.bookletEditor||{},this.jst_modules.bookletEditor.bookletEditor=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<div class="bookletEditor__uploadListItem bookletEditor__coversListItem bookletEditor__gridCell _gridCell_3x1 ',a=n["if"].call(e,e&&e.isSelected,{hash:{},inverse:h.noop,fn:h.program(2,r,t),data:t}),(a||0===a)&&(s+=a),s+='" data-url="'+f(typeof e===p?e.apply(e):e)+'"><div class="bookletEditor__icon _itemIsByOwner bookletEditor__coversItem">'+f((i=n.Preloader||e&&e.Preloader,o={hash:{"class":"bookletEditor__preloader _scheme_lighten"},data:t},i?i.call(e,o):m.call(e,"Preloader",o)))+'<span class="bookletEditor__uploadItemDelete bookletEditor__icon _deleteIcon"></span><div class="bookletEditor__uploadListItemImage" style="background-image: url('+f(typeof e===p?e.apply(e):e)+')"></div></div></div>'}function r(e,t){return"_selected"}function s(e,t){var a,i,o,s="";return s+='<div class="bookletEditor__uploadListItem bookletEditor__logosListItem" data-url="'+f(typeof e===p?e.apply(e):e)+'"><div class="bookletEditor__logosItem ',a=n["if"].call(e,e&&e.isSelected,{hash:{},inverse:h.noop,fn:h.program(2,r,t),data:t}),(a||0===a)&&(s+=a),s+=' _itemIsByOwner  bookletEditor__icon">'+f((i=n.Preloader||e&&e.Preloader,o={hash:{"class":"bookletEditor__preloader _scheme_lighten"},data:t},i?i.call(e,o):m.call(e,"Preloader",o)))+'<div class="bookletEditor__uploadListItemImage" style="background-image: url('+f(typeof e===p?e.apply(e):e)+')"></div><span class="bookletEditor__uploadItemDelete bookletEditor__icon _deleteIcon"></span></div></div>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h=this,p="function",f=this.escapeExpression,m=n.helperMissing;return d+='<div class="bookletEditor__pageContainer _type_',(c=n.templateName)?l=c.call(t,{hash:{},data:i}):(c=t&&t.templateName,l=typeof c===p?c.call(t,{hash:{},data:i}):c),d+=f(l)+'" data-type="covers"><div class="bookletEditor__page"><div class="bookletEditor__grid _listGrid bookletEditor__covers"><div class="bookletEditor__gridCell _gridCell_3x1 bookletEditor__itemUpload"><form action="http://pages.api.dev.test/1.0/addFile" class="bookletEditor__upload" data-uploadtype="cover"><div class="bookletEditor__uploadPreloader">'+f((c=n.Preloader||t&&t.Preloader,u={hash:{"class":"bookletEditor__preloader _scheme_lighten"},data:i},c?c.call(t,u):m.call(t,"Preloader",u)))+'</div><div class="bookletEditor__uploadError"><div class="bookletEditor__uploadErrorDescription">'+f((c=n._gg||t&&t._gg,u={hash:{},data:i},c?c.call(t,"Не удалось загрузить изображение, размер файла превышает 5 Мб",u):m.call(t,"_gg","Не удалось загрузить изображение, размер файла превышает 5 Мб",u)))+'</div><label for="bklCoverUpload" class="bookletEditor__uploadErrorLink">'+f((c=n._gg||t&&t._gg,u={hash:{},data:i},c?c.call(t,"Загрузить ещё раз",u):m.call(t,"_gg","Загрузить ещё раз",u)))+'</label></div><label for="bklCoverUpload" class="bookletEditor__uploadLabel"><input type="file" name="bklCoverUpload" id="bklCoverUpload" class="bookletEditor__uploadInput" accept="image/jpg,image/jpeg,image/gif,image/png"><h3 class="bookletEditor__uploadTitle _uploadIcon bookletEditor__icon">'+f((c=n._gg||t&&t._gg,u={hash:{},data:i},c?c.call(t,"Загрузить обложку",u):m.call(t,"_gg","Загрузить обложку",u)))+'</h3><small class="bookletEditor__uploadDescription">'+f((c=n._gg||t&&t._gg,u={hash:{},data:i},c?c.call(t,"максимальный размер изображения 5 Мб",u):m.call(t,"_gg","максимальный размер изображения 5 Мб",u)))+"</small></label></form></div>",l=n.each.call(t,t&&t.coversCollection,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+='<div class="bookletEditor__uploadListItem bookletEditor__coversListItem bookletEditor__gridCell _gridCell_3x1 _defaultCover" data-url="default"><div class="bookletEditor__coversItem"><div class="bookletEditor__uploadListItemImage" style="background-image: url(',(c=n.defaultCover)?l=c.call(t,{hash:{},data:i}):(c=t&&t.defaultCover,l=typeof c===p?c.call(t,{hash:{},data:i}):c),d+=f(l)+')"></div></div></div></div></div></div><div class="bookletEditor__pageContainer _type_',(c=n.templateName)?l=c.call(t,{hash:{},data:i}):(c=t&&t.templateName,l=typeof c===p?c.call(t,{hash:{},data:i}):c),d+=f(l)+'" data-type="logos"><div class="bookletEditor__page"><div class="bookletEditor__logos"><form action="http://pages.api.dev.test/1.0/addFile" class="bookletEditor__upload _logosEdit bookletEditor__itemUpload" data-uploadtype="logo"><div class="bookletEditor__uploadPreloader">'+f((c=n.Preloader||t&&t.Preloader,u={hash:{"class":"bookletEditor__preloader _scheme_lighten"},data:i},c?c.call(t,u):m.call(t,"Preloader",u)))+'</div><div class="bookletEditor__uploadError"><div class="bookletEditor__uploadErrorDescription">'+f((c=n._gg||t&&t._gg,u={hash:{},data:i},c?c.call(t,"Не удалось загрузить изображение, размер файла превышает 5 Мб",u):m.call(t,"_gg","Не удалось загрузить изображение, размер файла превышает 5 Мб",u)))+'</div><label for="bklLogoUpload" class="bookletEditor__uploadErrorLink">'+f((c=n._gg||t&&t._gg,u={hash:{},data:i},c?c.call(t,"Загрузить ещё раз",u):m.call(t,"_gg","Загрузить ещё раз",u)))+'</label></div><label for="bklLogoUpload" class="bookletEditor__uploadLabel"><input type="file" name="bklLogoUpload" id="bklLogoUpload" class="bookletEditor__uploadInput" accept="image/jpg,image/jpeg,image/gif,image/png"><h3 class="bookletEditor__uploadTitle _uploadIcon bookletEditor__icon">'+f((c=n._gg||t&&t._gg,u={hash:{},data:i},c?c.call(t,"Загрузить логотип",u):m.call(t,"_gg","Загрузить логотип",u)))+'</h3><small class="bookletEditor__uploadDescription">'+f((c=n._gg||t&&t._gg,u={hash:{},data:i},c?c.call(t,"рекомендуемый размер 64х64 пикс.",u):m.call(t,"_gg","рекомендуемый размер 64х64 пикс.",u)))+"</small></label></form>",l=n.each.call(t,t&&t.logosCollection,{hash:{},inverse:h.noop,fn:h.program(4,s,i),data:i}),(l||0===l)&&(d+=l),d+='<div class="bookletEditor__uploadListItem bookletEditor__logosListItem _defaultLogo _',(c=n.templateName)?l=c.call(t,{hash:{},data:i}):(c=t&&t.templateName,l=typeof c===p?c.call(t,{hash:{},data:i}):c),d+=f(l)+'" data-url="default"><div class="bookletEditor__logosItem"><div class="bookletEditor__uploadListItemImage _logosImage"></div></div></div></div></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletHeader=this.jst_modules.bookletHeader||{},this.jst_modules.bookletHeader.bookletHeader=function(e,t,n,a,i){function o(e,t){return" _modeEditor"}function r(e,t){return" _edit"}function s(e,t){var a,i;return(i=n.cover)?a=i.call(e,{hash:{},data:t}):(i=e&&e.cover,a=typeof i===w?i.call(e,{hash:{},data:t}):i),x(a)}function l(e,t){var a,i;return(i=n.defaultCover)?a=i.call(e,{hash:{},data:t}):(i=e&&e.defaultCover,a=typeof i===w?i.call(e,{hash:{},data:t}):i),x(a)}function c(e,t){return" _default"}function u(e,t){return"_notDefaultCover"}function d(e,t){var a,i,o="";return o+=' style="background-image: url(',(i=n.logo)?a=i.call(e,{hash:{},data:t}):(i=e&&e.logo,a=typeof i===w?i.call(e,{hash:{},data:t}):i),o+=x(a)+');"'}function h(e,t){var a,i;return(i=n.logo)?a=i.call(e,{hash:{},data:t}):(i=e&&e.logo,a=typeof i===w?i.call(e,{hash:{},data:t}):i),x(a)}function p(e,t){var a,i;return(i=n.defaultLogo)?a=i.call(e,{hash:{},data:t}):(i=e&&e.defaultLogo,a=typeof i===w?i.call(e,{hash:{},data:t}):i),x(a)}function f(e,t){var a,i,o="";return o+='<span class="bookletHeader__description">',(i=n.subtitle)?a=i.call(e,{hash:{},data:t}):(i=e&&e.subtitle,a=typeof i===w?i.call(e,{hash:{},data:t}):i),o+=x(a)+"</span>"}function m(e,t){var a,i,o="";return o+='<li class="bookletHeader__contactsItem _type_address"><span class="bookletHeader__icon _pinIcon"></span>',(i=n.address)?a=i.call(e,{hash:{},data:t}):(i=e&&e.address,a=typeof i===w?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</li>"}function g(e,t){var a,i,o,r="";return r+='<li class="bookletHeader__contactsItem _type_phone"><span class="bookletHeader__icon _phoneIcon"></span><span class="bookletHeader__hiddenPhone"><span class="bookletHeader__hiddenPhoneNumber">',(i=n.phone)?a=i.call(e,{hash:{},data:t}):(i=e&&e.phone,a=typeof i===w?i.call(e,{hash:{},data:t}):i),r+=x(a)+'</span><span class="bookletHeader__hiddenPhoneOverlay _underlineDashed">'+x((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Посмотреть телефон",o):C.call(e,"_gg","Посмотреть телефон",o)))+"</span></span></li>"}function _(e,t){var a,i,o="";return o+=x((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"saunasNavigation",i):C.call(e,"p","saunasNavigation",i)))}function v(e,t){var a,i,o="";return o+=x((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"buildingsNavigation",i):C.call(e,"p","buildingsNavigation",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var y,b,k="",w="function",x=this.escapeExpression,C=n.helperMissing,L=this;return k+='<div class="bookletHeader__container',y=n["if"].call(t,t&&t.editorMode,{hash:{},inverse:L.noop,fn:L.program(1,o,i),data:i}),(y||0===y)&&(k+=y),k+='"><div class="bookletHeader__wrap _type_',(b=n.templateName)?y=b.call(t,{hash:{},data:i}):(b=t&&t.templateName,y=typeof b===w?b.call(t,{hash:{},data:i}):b),k+=x(y),y=n["if"].call(t,t&&t.editorMode,{hash:{},inverse:L.noop,fn:L.program(3,r,i),data:i}),(y||0===y)&&(k+=y),k+='"\n         style="background-image: url(',y=n["if"].call(t,t&&t.cover,{hash:{},inverse:L.program(7,l,i),fn:L.program(5,s,i),data:i}),(y||0===y)&&(k+=y),k+="); background-position: 50% ",(b=n.coverTop)?y=b.call(t,{hash:{},data:i}):(b=t&&t.coverTop,y=typeof b===w?b.call(t,{hash:{},data:i}):b),k+=x(y)+'%"\n         data-src="',y=n["if"].call(t,t&&t.cover,{hash:{},inverse:L.program(7,l,i),fn:L.program(5,s,i),data:i}),(y||0===y)&&(k+=y),k+='"><div class="bookletHeader__caption"><div class="bookletHeader__logo bookletHeader__icon bookletHeader__logoEdit _',(b=n.templateName)?y=b.call(t,{hash:{},data:i}):(b=t&&t.templateName,y=typeof b===w?b.call(t,{hash:{},data:i}):b),k+=x(y)+"Logo",y=n["if"].call(t,t&&t.isDefaultLogo,{hash:{},inverse:L.noop,fn:L.program(9,c,i),data:i}),(y||0===y)&&(k+=y),k+=" ",y=n.unless.call(t,t&&t.defaultCover,{hash:{},inverse:L.noop,fn:L.program(11,u,i),data:i}),(y||0===y)&&(k+=y),k+='" ',y=n.unless.call(t,t&&t.isDefaultLogo,{hash:{},inverse:L.noop,fn:L.program(13,d,i),data:i}),(y||0===y)&&(k+=y),k+=' data-src="',y=n["if"].call(t,t&&t.logo,{hash:{},inverse:L.program(17,p,i),fn:L.program(15,h,i),data:i}),(y||0===y)&&(k+=y),k+='"></div><h1 class="bookletHeader__title">',(b=n.title)?y=b.call(t,{hash:{},data:i}):(b=t&&t.title,y=typeof b===w?b.call(t,{hash:{},data:i}):b),k+=x(y)+"</h1>",y=n["if"].call(t,t&&t.subtitle,{hash:{},inverse:L.noop,fn:L.program(19,f,i),data:i}),(y||0===y)&&(k+=y),k+='</div><ul class="bookletHeader__contacts">',y=n["if"].call(t,t&&t.address,{hash:{},inverse:L.noop,fn:L.program(21,m,i),data:i}),(y||0===y)&&(k+=y),y=n["if"].call(t,t&&t.phone,{hash:{},inverse:L.noop,fn:L.program(23,g,i),data:i}),(y||0===y)&&(k+=y),k+='</ul><div class="bookletHeader__coverEditor"></div></div>',y=n["if"].call(t,t&&t.isSaunas,{hash:{},inverse:L.noop,fn:L.program(25,_,i),data:i}),(y||0===y)&&(k+=y),y=n["if"].call(t,t&&t.isBuildings,{hash:{},inverse:L.noop,fn:L.program(27,v,i),data:i}),(y||0===y)&&(k+=y),k+='<div class="bookletHeader__editorNavigation"></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletProviders=this.jst_modules.bookletProviders||{},this.jst_modules.bookletProviders.bookletProviders=function(e,t,n,a,i){function o(e,t){return"_mode_aggregator"}function r(e,t){var a,i,o="";return o+=S((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,"bookletHeader",i):T.call(e,"module","bookletHeader",i)))}function s(e,t){var a,i,o="";return o+='<h1 class="bookletProviders__compilationTitle">'+S((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Выбор тарифа",i):T.call(e,"_gg","Выбор тарифа",i)))+"</h1>"}function l(e,t){return" _connected"}function c(e,t){return" _notConnected"}function u(e,t){var n,a="";return a+=' value="'+S((n=e&&e.address,n=null==n||n===!1?n:n.building,typeof n===E?n.apply(e):n))+'"'}function d(e,t){var n,a="";return a+=' value="'+S((n=e&&e.address,n=null==n||n===!1?n:n.apartment,typeof n===E?n.apply(e):n))+'"'}function h(e,t){var n,a="";return a+=S((n=e&&e.address,n=null==n||n===!1?n:n.street,typeof n===E?n.apply(e):n))+", "+S((n=e&&e.address,n=null==n||n===!1?n:n.building,typeof n===E?n.apply(e):n))}function p(e,t){var a,i,o,r="";return r+=S((a=e&&e.provider,a=null==a||a===!1?a:a.name,typeof a===E?a.apply(e):a))+"&nbsp;"+S((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"не подключает по вашему адресу.",o):T.call(e,"_gg","не подключает по вашему адресу.",o)))+"\n                                             ",i=n._hgg||e&&e._hgg,o={hash:{link__href:e&&e.seeOtherSeoLink,link__class:"bookletProviders__link bookletProviders__showAllProviders"},data:t},a=i?i.call(e,"Рекомендуем %{Link посмотреть других провайдеров}.",o):T.call(e,"_hgg","Рекомендуем %{Link посмотреть других провайдеров}.",o),(a||0===a)&&(r+=a),r}function f(e,t){var a,i,o="";return o+=S((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Ваш дом не подключен ни одним провайдером",i):T.call(e,"_gg","Ваш дом не подключен ни одним провайдером",i)))}function m(e,t){var i,o="";return o+='<div class="bookletProviders__filtersContainer">',i=P.invokePartial(a.filters,"filters",e,n,a,t),(i||0===i)&&(o+=i),o+="</div>"}function g(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.provider,null==a||a===!1?a:a.description),{hash:{},inverse:P.noop,fn:P.program(24,_,t),data:t}),(a||0===a)&&(i+=a),i}function _(e,t){var a,i="";return i+='<div class="bookletProviders__about"><h2 class="bookletProviders__title">О провайдере</h2>',a=n["if"].call(e,(a=e&&e.provider,null==a||a===!1?a:a.logoUrl),{hash:{},inverse:P.noop,fn:P.program(25,v,t),data:t}),(a||0===a)&&(i+=a),i+='<div class="bookletProviders__description">',a=e&&e.provider,a=null==a||a===!1?a:a.description,a=typeof a===E?a.apply(e):a,(a||0===a)&&(i+=a),i+="</div></div>"}function v(e,t){var n,a="";return a+='<img src="'+S((n=e&&e.provider,n=null==n||n===!1?n:n.logoUrl,typeof n===E?n.apply(e):n))+'" alt="'+S((n=e&&e.provider,n=null==n||n===!1?n:n.name,typeof n===E?n.apply(e):n))+'" class="bookletProviders__providerLogo">'}function y(e,t){return" _aggregator"}function b(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.provider,null==a||a===!1?a:a.name),{hash:{},inverse:P.noop,fn:P.program(30,k,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.provider,null==a||a===!1?a:a.agreementUrl),{hash:{},inverse:P.noop,fn:P.program(32,w,t),data:t}),(a||0===a)&&(i+=a),i}function k(e,t){var a,i,o,r="";return r+='<div class="bookletProviders__copyright">'+S((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Компания:",o):T.call(e,"_gg","Компания:",o)))+"&nbsp;"+S((a=e&&e.provider,a=null==a||a===!1?a:a.name,typeof a===E?a.apply(e):a))+"</div>"}function w(e,t){var a,i,o,r="";return r+='<a href="'+S((a=e&&e.provider,a=null==a||a===!1?a:a.agreementUrl,typeof a===E?a.apply(e):a))+'" class="bookletProviders__link _agreement" target="_blank">'+S((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Лицензия на оказание услуг связи",o):T.call(e,"_gg","Лицензия на оказание услуг связи",o)))+"</a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var x,C,L,I="",T=n.helperMissing,S=this.escapeExpression,E="function",P=this;return I+='<div class="bookletProviders__container ',x=n.unless.call(t,t&&t.provider,{hash:{},inverse:P.noop,fn:P.program(1,o,i),data:i}),(x||0===x)&&(I+=x),I+='"><div class="bookletProviders__baron bookletProviders__wrap"><div class="bookletProviders__baronWrapper"><div class="bookletProviders__baronScroller"><div class="bookletProviders__header">',x=n["if"].call(t,t&&t.provider,{hash:{},inverse:P.noop,fn:P.program(3,r,i),data:i}),(x||0===x)&&(I+=x),x=n.unless.call(t,t&&t.provider,{hash:{},inverse:P.noop,fn:P.program(5,s,i),data:i}),(x||0===x)&&(I+=x),I+='</div><div class="bookletProviders__editor _hidden"></div><div class="bookletProviders__main"><aside class="bookletProviders__sidebar"><div class="bookletProviders__fixedSidebar"><div class="bookletProviders__address',x=n["if"].call(t,t&&t.connected,{hash:{},inverse:P.noop,fn:P.program(7,l,i),data:i}),(x||0===x)&&(I+=x),x=n["if"].call(t,t&&t.notConnected,{hash:{},inverse:P.noop,fn:P.program(9,c,i),data:i}),(x||0===x)&&(I+=x),I+='"><form action="#" class="bookletProviders__checkAddress"><h2 class="bookletProviders__title">'+S((C=n._gg||t&&t._gg,L={hash:{},data:i},C?C.call(t,"Укажите адрес",L):T.call(t,"_gg","Укажите адрес",L)))+'</h2><ul class="bookletProviders__form"><li class="bookletProviders__formItem">'+S((C=n.module||t&&t.module,L={hash:{},data:i},C?C.call(t,"bookletSuggest",L):T.call(t,"module","bookletSuggest",L)))+'</li><li class="bookletProviders__formItem _width40"><input type="text" name="building" class="bookletProviders__inputText" placeholder="'+S((C=n._gg||t&&t._gg,L={hash:{},data:i},C?C.call(t,"Дом",L):T.call(t,"_gg","Дом",L)))+'" autocomplete="off"',x=n["if"].call(t,t&&t.address,{hash:{},inverse:P.noop,fn:P.program(11,u,i),data:i}),(x||0===x)&&(I+=x),I+='></li><li class="bookletProviders__formItem _width40"><input type="text" name="apartment" class="bookletProviders__inputText" placeholder="'+S((C=n._gg||t&&t._gg,L={hash:{},data:i},C?C.call(t,"Квартира",L):T.call(t,"_gg","Квартира",L)))+'" autocomplete="off" ',x=n["if"].call(t,(x=t&&t.address,null==x||x===!1?x:x.apartment),{hash:{},inverse:P.noop,fn:P.program(13,d,i),data:i}),(x||0===x)&&(I+=x),I+='></li><li class="bookletProviders__formItem _width10"><span class="bookletProviders__inputReset"><i class="bookletProviders__icon _reset"></i></span></li><li class="bookletProviders__formItem"><span class="bookletProviders__checkAddressBtn _disabled">'+S((C=n._gg||t&&t._gg,L={hash:{},data:i},C?C.call(t,"Проверить подключение",L):T.call(t,"_gg","Проверить подключение",L)))+'</span><div class="bookletProviders__preloader"><div class="bookletProviders__preloaderIn"></div></div></li></ul><input type="submit" class="bookletProviders__checkAddressSubmit _hidden" value="Проверить подключение"></form><div class="bookletProviders__checkAddressAnswer bookletProviders__checkAddressConnected"><h2 class="bookletProviders__title bookletProviders__checkAddressAddress _link">',x=n["if"].call(t,t&&t.address,{hash:{},inverse:P.noop,fn:P.program(15,h,i),data:i}),(x||0===x)&&(I+=x),I+='</h2><p class="bookletProviders__par">'+S((C=n._gg||t&&t._gg,L={hash:{},data:i},C?C.call(t,"Дом подключен. Выберите тариф.",L):T.call(t,"_gg","Дом подключен. Выберите тариф.",L)))+'</p></div><div class="bookletProviders__checkAddressAnswer bookletProviders__checkAddressNotConnected"><h2 class="bookletProviders__title">'+S((C=n._gg||t&&t._gg,L={hash:{},data:i},C?C.call(t,"Подключение невозможно",L):T.call(t,"_gg","Подключение невозможно",L)))+'</h2><p class="bookletProviders__par">',x=n["if"].call(t,t&&t.provider,{hash:{},inverse:P.program(19,f,i),fn:P.program(17,p,i),data:i}),(x||0===x)&&(I+=x),I+="</p></div>",x=n.unless.call(t,t&&t.provider,{hash:{},inverse:P.noop,fn:P.program(21,m,i),data:i}),(x||0===x)&&(I+=x),I+="</div>",x=n["if"].call(t,t&&t.provider,{hash:{},inverse:P.noop,fn:P.program(23,g,i),data:i}),(x||0===x)&&(I+=x),I+='</div></aside><section class="bookletProviders__content bookletProviders__tariffsContainer">',x=P.invokePartial(a.tariffs,"tariffs",t,n,a,i),(x||0===x)&&(I+=x),I+="</section></div>",(C=n.Track)?x=C.call(t,{hash:{},data:i}):(C=t&&t.Track,x=typeof C===E?C.call(t,{hash:{},data:i}):C),I+=S(x)+'</div></div></div><footer class="bookletProviders__footer',x=n.unless.call(t,t&&t.provider,{hash:{},inverse:P.noop,fn:P.program(27,y,i),data:i}),(x||0===x)&&(I+=x),I+='"><div class="bookletProviders__footerIn">',x=n["if"].call(t,t&&t.provider,{hash:{},inverse:P.noop,fn:P.program(29,b,i),data:i}),(x||0===x)&&(I+=x),I+='<span title="Сообщить об ошибке" class="bookletProviders__feedbackLink" data-type="feedback" data-value="true"></span></div></footer></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletSaunas=this.jst_modules.bookletSaunas||{},
this.jst_modules.bookletSaunas.bookletSaunas=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="bookletSaunas__content"><div class="bookletSaunas__baron bookletSaunas__wrap"><div class="bookletSaunas__baronWrapper"><div class="bookletSaunas__baronScroller"><div class="bookletSaunas__header">'+c((o=n.module||t&&t.module,r={hash:{},data:i},o?o.call(t,"bookletHeader",r):l.call(t,"module","bookletHeader",r)))+'</div><div class="bookletSaunas__editor _state_hidden"></div><div class="bookletSaunas__main">'+c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,t&&t.activePageType,r):l.call(t,"p",t&&t.activePageType,r)))+'</div><div class="bookletSaunas__footer">'+c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,"footer",r):l.call(t,"p","footer",r)))+"</div>"+c((o=n.Track||t&&t.Track,r={hash:{"class":"_outerTrack"},data:i},o?o.call(t,r):l.call(t,"Track",r)))+"</div></div></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletSuggest=this.jst_modules.bookletSuggest||{},this.jst_modules.bookletSuggest.bookletSuggest=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='name="',(i=n.inputName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.inputName,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'"'}function r(e,t){var a,i,o="";return o+='value="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'"'}function s(e,t){var a;return a=n.unless.call(e,e&&e.query,{hash:{},inverse:p.noop,fn:p.program(6,l,t),data:t}),a||0===a?a:""}function l(e,t){return"autofocus"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u="",d="function",h=this.escapeExpression,p=this;return u+='<div class="suggest__wrapper"><input type="text" ',c=n["if"].call(t,t&&t.inputName,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(c||0===c)&&(u+=c),u+=" ",c=n["if"].call(t,t&&t.value,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(c||0===c)&&(u+=c),u+=' class="providerRequestForm__inputText bookletSuggest__input suggest__suggestInput" maxlength="500" autocomplete="off" autocorrect="off" ',c=n["if"].call(t,t&&t.autofocus,{hash:{},inverse:p.noop,fn:p.program(5,s,i),data:i}),(c||0===c)&&(u+=c),u+=' /><div class="suggest__clone"><span class="suggest__cloneMain"></span><span class="suggest__cloneHint"></span></div><div class="suggest__suggestsWrapper"><ul class="suggest__suggests"></ul></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.card=function(e,t,n,a,i){function o(e,t){var n="";return n+=d(typeof e===u?e.apply(e):e)}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u="function",d=this.escapeExpression,h=n.helperMissing,p=this;return c+='<div class="card__scroller"><div class="card__scrollerIn">'+d((s=n.p||t&&t.p,l={hash:{},data:i},s?s.call(t,t&&t.mainTemplate,l):h.call(t,"p",t&&t.mainTemplate,l)))+"</div>",(s=n.Track)?r=s.call(t,{hash:{},data:i}):(s=t&&t.Track,r=typeof s===u?s.call(t,{hash:{},data:i}):s),c+=d(r)+"</div>",s=n.module||t&&t.module,l={hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i},r=s?s.call(t,"jsonld",l):h.call(t,"module","jsonld",l),(r||0===r)&&(c+=r),c},this.jst_modules=this.jst_modules||{},this.jst_modules.cardActions=this.jst_modules.cardActions||{},this.jst_modules.cardActions.cardActions=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<div class="cardActions__item',a=n["if"].call(e,e&&e.isDouble,{hash:{},inverse:c.noop,fn:c.program(2,r,t),data:t}),(a||0===a)&&(s+=a),s+='">'+d((i=n.module||e&&e.module,o={hash:{},data:t},i?i.call(e,e&&e.module,o):u.call(e,"module",e&&e.module,o)))+"</div>"}function r(e,t){return" _double"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c=this,u=n.helperMissing,d=this.escapeExpression;return s=n.each.call(t,t,{hash:{},inverse:c.noop,fn:c.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l},this.jst_modules=this.jst_modules||{},this.jst_modules.cardActionsButton=this.jst_modules.cardActionsButton||{},this.jst_modules.cardActionsButton.cardActionsButton=function(e,t,n,a,i){function o(e,t){return" _disabled"}function r(e,t){return" _active"}function s(e,t){var a,i,o="";return o+=" href=",(i=n.href)?a=i.call(e,{hash:{},data:t}):(i=e&&e.href,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+' target="_blank"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h="function",p=this.escapeExpression,f=this,m=n.helperMissing;return d+="<",(c=n.tag)?l=c.call(t,{hash:{},data:i}):(c=t&&t.tag,l=typeof c===h?c.call(t,{hash:{},data:i}):c),d+=p(l)+'\n    class="cardActionsButton__btn\n        _type_',(c=n.type)?l=c.call(t,{hash:{},data:i}):(c=t&&t.type,l=typeof c===h?c.call(t,{hash:{},data:i}):c),d+=p(l)+"\n        ",l=n["if"].call(t,t&&t.disabled,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+="\n        ",l=n["if"].call(t,t&&t.active,{hash:{},inverse:f.noop,fn:f.program(3,r,i),data:i}),(l||0===l)&&(d+=l),d+='"\n    ',l=n["if"].call(t,t&&t.href,{hash:{},inverse:f.noop,fn:f.program(5,s,i),data:i}),(l||0===l)&&(d+=l),d+="\n>"+p((c=n.Icon||t&&t.Icon,u={hash:{"class":"cardActionsButton__icon"},data:i},c?c.call(t,t&&t.icon,u):m.call(t,"Icon",t&&t.icon,u)))+"</",(c=n.tag)?l=c.call(t,{hash:{},data:i}):(c=t&&t.tag,l=typeof c===h?c.call(t,{hash:{},data:i}):c),d+=p(l)+">"},this.jst_modules=this.jst_modules||{},this.jst_modules.cardActionsItem=this.jst_modules.cardActionsItem||{},this.jst_modules.cardActionsItem.cardActionsItem=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=c((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):l.call(e,"module",e,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l=n.helperMissing,c=this.escapeExpression,u=this;return s+='<div class="cardActionsItem__buttons">',r=n.each.call(t,t&&t.buttons,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.cardAttractions=this.jst_modules.cardAttractions||{},this.jst_modules.cardAttractions.cardAttractions=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n.each.call(e,e&&e.initedAdditionalAttractionsList,{hash:{},inverse:m.noop,fn:m.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var a,i,o="";return o+='<div class="cardAttractions__item">'+f((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):p.call(e,"module",e,i)))+"</div>"}function s(e,t){var a,i,o,r="";return r+='<!-- Ссылка, чтобы работал нормальный тач на Iphone в safari --><a href="#" class="cardAttractions__more',a=n["if"].call(e,e&&e.isCollapsed,{hash:{},inverse:m.noop,fn:m.program(5,l,t),data:t}),(a||0===a)&&(r+=a),r+='">'+f((i=n.Icon||e&&e.Icon,o={hash:{"class":"cardAttractions__toggle"},data:t},i?i.call(e,"card_toggle",o):p.call(e,"Icon","card_toggle",o)))+'<div class="cardAttractions__moreLabel">',(i=n.expanderLabel)?a=i.call(e,{hash:{},data:t}):(i=e&&e.expanderLabel,a=typeof i===g?i.call(e,{hash:{},data:t}):i),r+=f(a)+"</div></a>"}function l(e,t){return" _collapsed"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u,d,h="",p=n.helperMissing,f=this.escapeExpression,m=this,g="function";return h+='<div class="cardAttractions__item">'+f((u=n.module||t&&t.module,d={hash:{},data:i},u?u.call(t,t&&t.initedFirstAttractionItem,d):p.call(t,"module",t&&t.initedFirstAttractionItem,d)))+"</div>",c=n.unless.call(t,t&&t.isCollapsed,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(c||0===c)&&(h+=c),c=n["if"].call(t,t&&t.isCollapsable,{hash:{},inverse:m.noop,fn:m.program(4,s,i),data:i}),(c||0===c)&&(h+=c),h},this.jst_modules=this.jst_modules||{},this.jst_modules.cardAttractionsItem=this.jst_modules.cardAttractionsItem||{},this.jst_modules.cardAttractionsItem.cardAttractionsItem=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="cardAttractionsItem__content">',a=n["if"].call(e,e&&e.preview,{hash:{},inverse:f.noop,fn:f.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+='<div class="cardAttractionsItem__contentText _full">',a=n.each.call(e,e&&e.text,{hash:{},inverse:f.noop,fn:f.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</div></div>"}function r(e,t){var a,i,o,r="";return r+='<div class="cardAttractionsItem__contentText _preview">'+h((i=n.Icon||e&&e.Icon,o={hash:{"class":"cardAttractionsItem__toggle"},data:t},i?i.call(e,"card_toggle",o):d.call(e,"Icon","card_toggle",o)))+'<p class="cardAttractionsItem__contentTextParagraph">',(i=n.preview)?a=i.call(e,{hash:{},data:t}):(i=e&&e.preview,a=typeof i===p?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+="</p></div>"}function s(e,t){var n,a="";return a+='<p class="cardAttractionsItem__contentTextParagraph">',n=typeof e===p?e.apply(e):e,(n||0===n)&&(a+=n),a+="</p>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u="",d=n.helperMissing,h=this.escapeExpression,p="function",f=this;return u+='<h2 class="cardAttractionsItem__header">',(c=n.header)?l=c.call(t,{hash:{},data:i}):(c=t&&t.header,l=typeof c===p?c.call(t,{hash:{},data:i}):c),u+=h(l)+"</h2>",l=n["if"].call(t,t&&t.text,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(l||0===l)&&(u+=l),u},this.jst_modules=this.jst_modules||{},this.jst_modules.cardFeatures=this.jst_modules.cardFeatures||{},this.jst_modules.cardFeatures.cardFeatures=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="cardFeatures__item">'+c((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):l.call(e,"module",e,i)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l=n.helperMissing,c=this.escapeExpression,u=this;return s+='<div class="cardFeatures__list">',r=n.each.call(t,t,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.cardFeaturesItem=this.jst_modules.cardFeaturesItem||{},this.jst_modules.cardFeaturesItem.cardFeaturesItem=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=h((a=n.Link||e&&e.Link,i={hash:{href:e&&e.seoLink,"class":"_undashed cardFeaturesItem__link"},data:t},a?a.call(e,e&&e.text,i):d.call(e,"Link",e&&e.text,i)))}function r(e,t){var a,i,o="";return(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=h(a)}function s(e,t){var a,i,o="";return o+=" ",(i=n.additional)?a=i.call(e,{hash:{},data:t}):(i=e&&e.additional,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=h(a)}function l(e,t){var a,i,o="";return o+='<span class="cardFeaturesItem__comment">&nbsp;— ',(i=n.comment)?a=i.call(e,{hash:{},data:t}):(i=e&&e.comment,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=h(a)+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u="",d=n.helperMissing,h=this.escapeExpression,p="function",f=this;return c=n["if"].call(t,t&&t.seoLink,{hash:{},inverse:f.program(3,r,i),fn:f.program(1,o,i),data:i}),(c||0===c)&&(u+=c),c=n["if"].call(t,t&&t.additional,{hash:{},inverse:f.noop,fn:f.program(5,s,i),data:i}),(c||0===c)&&(u+=c),c=n["if"].call(t,t&&t.comment,{hash:{},inverse:f.noop,fn:f.program(7,l,i),data:i}),(c||0===c)&&(u+=c),u},this.jst_modules=this.jst_modules||{},this.jst_modules.cardHeader=this.jst_modules.cardHeader||{},this.jst_modules.cardHeader.cardHeader=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=' style="background-color: ',(i=n.firmColor)?a=i.call(e,{hash:{},data:t}):(i=e&&e.firmColor,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+'"'}function r(e,t){var a,i="";return i+='<div class="cardHeader__headerLogo">',a=n["if"].call(e,e&&e.logo,{hash:{},inverse:m.noop,fn:m.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function s(e,t){var a,i,r="";return r+='<img class="cardHeader__headerLogoImg" src="',(i=n.logo)?a=i.call(e,{hash:{},data:t}):(i=e&&e.logo,a=typeof i===p?i.call(e,{hash:{},data:t}):i),r+=f(a)+'"',a=n["if"].call(e,e&&e.firmColor,{hash:{},inverse:m.noop,fn:m.program(1,o,t),data:t}),(a||0===a)&&(r+=a),r+=">"}function l(e,t){var a,i,o="";return o+=' style="color: ',(i=n.textColor)?a=i.call(e,{hash:{},data:t}):(i=e&&e.textColor,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+'"'}function c(e,t){var a,i,o="";return o+='<div class="cardHeader__rating">'+f((a=n.CustomRating||e&&e.CustomRating,i={hash:{color:e&&e.textColor,"class":"cardHeader__ratingStars"},data:t},a?a.call(e,e&&e.rating,i):g.call(e,"CustomRating",e&&e.rating,i)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d,h="",p="function",f=this.escapeExpression,m=this,g=n.helperMissing;return h+='<div class="cardHeader__header"',u=n["if"].call(t,t&&t.firmColor,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(u||0===u)&&(h+=u),h+=">",u=n["if"].call(t,t&&t.showLogo,{hash:{},inverse:m.noop,fn:m.program(3,r,i),data:i}),(u||0===u)&&(h+=u),h+='<div class="cardHeader__headerName"',u=n["if"].call(t,t&&t.textColor,{hash:{},inverse:m.noop,fn:m.program(6,l,i),data:i}),(u||0===u)&&(h+=u),h+='><div class="cardHeader__headerNameWrapper"><h1 class="cardHeader__headerNameText">',(d=n.firmName)?u=d.call(t,{hash:{},data:i}):(d=t&&t.firmName,u=typeof d===p?d.call(t,{hash:{},data:i}):d),(u||0===u)&&(h+=u),h+="</h1>",u=n["if"].call(t,t&&t.rating,{hash:{},inverse:m.noop,fn:m.program(8,c,i),data:i}),(u||0===u)&&(h+=u),h+="</div></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.cardInfrastructureApartmentsList=this.jst_modules.cardInfrastructureApartmentsList||{},this.jst_modules.cardInfrastructureApartmentsList.cardInfrastructureApartmentsList=function(e,t,n,a,i){function o(e,t,a){var i,o,s="";return s+='<a class="cardInfrastructureApartmentsList__listItem _type_'+u((i=a&&a.type,typeof i===c?i.apply(e):i))+'" href="',(o=n.link)?i=o.call(e,{hash:{},data:t}):(o=e&&e.link,i=typeof o===c?o.call(e,{hash:{},data:t}):o),s+=u(i)+'" data-index="'+u((i=null==t||t===!1?t:t.index,typeof i===c?i.apply(e):i))+'"  target="_blank"><div class="cardInfrastructureApartmentsList__listItemName">',i=n.each.call(e,e&&e.nameParts,{hash:{},inverse:d.noop,fn:d.program(2,r,t),data:t}),(i||0===i)&&(s+=i),s+='</div><div class="cardInfrastructureApartmentsList__listItemDesc">',(o=n.desc)?i=o.call(e,{hash:{},data:t}):(o=e&&e.desc,i=typeof o===c?o.call(e,{hash:{},data:t}):o),s+=u(i)+"</div></a>"}function r(e,t){var n="";return n+='<span class="cardInfrastructureApartmentsList__listItemNamePart">'+u(typeof e===c?e.apply(e):e)+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c="function",u=this.escapeExpression,d=this;return l+='<div class="cardInfrastructureApartmentsList__list">',s=n.each.call(t,t&&t.items,{hash:{},inverse:d.noop,fn:d.programWithDepth(1,o,i,t),data:i}),(s||0===s)&&(l+=s),l+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.cardInfrastructure=this.jst_modules.cardInfrastructure||{},this.jst_modules.cardInfrastructure.cardInfrastructure=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="cardInfrastructure__item">'+c((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):l.call(e,"module",e,i)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l=n.helperMissing,c=this.escapeExpression,u=this;return s+='<div class="cardInfrastructure__list">',r=n.each.call(t,t,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.cardInfrastructureFirmsList=this.jst_modules.cardInfrastructureFirmsList||{},this.jst_modules.cardInfrastructureFirmsList.cardInfrastructureFirmsList=function(e,t,n,a,i){function o(e,t,a){var i,o,r,s="";return s+='<li class="cardInfrastructureFirmsList__listItem _type_'+c((i=a&&a.type,typeof i===l?i.apply(e):i))+'" data-id="',(o=n.id)?i=o.call(e,{hash:{},data:t}):(o=e&&e.id,i=typeof o===l?o.call(e,{hash:{},data:t}):o),s+=c(i)+'"><div class="cardInfrastructureFirmsList__listItemName">'+c((o=n.Link||e&&e.Link,r={hash:{href:e&&e.seoLinkOrganization,"class":"_undashed cardInfrastructureFirmsList__listItemNameLink"},data:t},o?o.call(e,e&&e.name,r):u.call(e,"Link",e&&e.name,r)))+'</div><div class="cardInfrastructureFirmsList__listItemDesc">',(o=n.desc)?i=o.call(e,{hash:{},data:t}):(o=e&&e.desc,i=typeof o===l?o.call(e,{hash:{},data:t}):o),s+=c(i)+"</div></li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l="function",c=this.escapeExpression,u=n.helperMissing,d=this;return s+='<ul class="cardInfrastructureFirmsList__list">',r=n.each.call(t,t&&t.items,{hash:{},inverse:d.noop,fn:d.programWithDepth(1,o,i,t),data:i}),(r||0===r)&&(s+=r),s+="</ul>"},this.jst_modules=this.jst_modules||{},this.jst_modules.cardInfrastructureItem=this.jst_modules.cardInfrastructureItem||{},this.jst_modules.cardInfrastructureItem.cardInfrastructureItem=function(e,t,n,a,i){function o(e,t){return" _clickable"}function r(e,t){var a,i,o="";return o+=g((a=n.Icon||e&&e.Icon,i={hash:{"class":"cardInfrastructureItem__toggle _list"},data:t},a?a.call(e,"card_toggle",i):m.call(e,"Icon","card_toggle",i)))}function s(e,t){var a,i,o="";return o+='<div class="cardInfrastructureItem__description">',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===_?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function l(e,t){var a,i,o,r="";return i=n.Link||e&&e.Link,o={hash:{"class":"_undashed cardInfrastructureItem__providersButton"},inverse:v.noop,fn:v.program(8,c,t),data:t},a=i?i.call(e,o):m.call(e,"Link",o),(a||0===a)&&(r+=a),r}function c(e,t){var a,i,o="";return o+=g((a=n.Icon||e&&e.Icon,i={hash:{"class":"cardInfrastructureItem__providersButtonIcon"},data:t},a?a.call(e,"card_connector",i):m.call(e,"Icon","card_connector",i)))+g((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Подключиться к интернету",i):m.call(e,"_gg","Подключиться к интернету",i)))}function u(e,t){var n="";return n+=g(typeof e===_?e.apply(e):e)}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h,p,f="",m=n.helperMissing,g=this.escapeExpression,_="function",v=this;return f+='<a href="',(h=n.seoLinkUrl)?d=h.call(t,{hash:{},data:i}):(h=t&&t.seoLinkUrl,d=typeof h===_?h.call(t,{hash:{},data:i}):h),f+=g(d)+'" class="cardInfrastructureItem__link _type_',(h=n.type)?d=h.call(t,{hash:{},data:i}):(h=t&&t.type,d=typeof h===_?h.call(t,{hash:{},data:i}):h),f+=g(d),d=n["if"].call(t,t&&t.more,{hash:{},inverse:v.noop,fn:v.program(1,o,i),data:i}),(d||0===d)&&(f+=d),f+='"><h3 class="cardInfrastructureItem__title">',(h=n.title)?d=h.call(t,{hash:{},data:i}):(h=t&&t.title,d=typeof h===_?h.call(t,{hash:{},data:i}):h),f+=g(d)+'</h3> <div class="cardInfrastructureItem__counter">',(h=n.count)?d=h.call(t,{hash:{},data:i}):(h=t&&t.count,d=typeof h===_?h.call(t,{hash:{},data:i}):h),f+=g(d)+"</div>",d=n["if"].call(t,t&&t.more,{hash:{},inverse:v.noop,fn:v.program(3,r,i),data:i}),(d||0===d)&&(f+=d),f+="</a>",d=n["if"].call(t,t&&t.description,{hash:{},inverse:v.noop,fn:v.program(5,s,i),data:i}),(d||0===d)&&(f+=d),d=n["if"].call(t,t&&t.hasProvidersButton,{hash:{},inverse:v.noop,fn:v.program(7,l,i),data:i}),(d||0===d)&&(f+=d),h=n.module||t&&t.module,p={hash:{},inverse:v.noop,fn:v.program(10,u,i),data:i},d=h?h.call(t,t&&t.initedInfrastructureList,p):m.call(t,"module",t&&t.initedInfrastructureList,p),(d||0===d)&&(f+=d),f},this.jst_modules=this.jst_modules||{},this.jst_modules.cardLandmarks=this.jst_modules.cardLandmarks||{},this.jst_modules.cardLandmarks.cardLandmarks=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="cardLandmarks__item">'+c((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):l.call(e,"module",e,i)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l=n.helperMissing,c=this.escapeExpression,u=this;return s+='<div class="cardLandmarks__list">',r=n.each.call(t,t,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.cardLandmarksItem=this.jst_modules.cardLandmarksItem||{},this.jst_modules.cardLandmarksItem.cardLandmarksItem=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<span class="cardLandmarksItem__name">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u="function",d=this.escapeExpression,h=this,p=n.helperMissing;return s=n.Link||t&&t.Link,l={hash:{href:t&&t.seoLink,"class":"_undashed cardLandmarksItem__link"},inverse:h.noop,fn:h.program(1,o,i),data:i},r=s?s.call(t,l):p.call(t,"Link",l),(r||0===r)&&(c+=r),c+='<span class="cardLandmarksItem__arrow" style="',(s=n.rotateStyle)?r=s.call(t,{hash:{},data:i}):(s=t&&t.rotateStyle,r=typeof s===u?s.call(t,{hash:{},data:i}):s),c+=d(r)+'">',(s=n.fallback)?r=s.call(t,{hash:{},data:i}):(s=t&&t.fallback,r=typeof s===u?s.call(t,{hash:{},data:i}):s),c+=d(r)+"</span>"+d((s=n._i18n||t&&t._i18n,l={hash:{data:t&&t.distance},data:i},s?s.call(t,"DISTANCE",l):p.call(t,"_i18n","DISTANCE",l)))},this.jst_modules=this.jst_modules||{},this.jst_modules.cardNearStops=this.jst_modules.cardNearStops||{},this.jst_modules.cardNearStops.cardNearStops=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+=c((o=n.Link||t&&t.Link,r={hash:{href:t&&t.seoLink,"class":"_undashed cardNearStops__link"},data:i},o?o.call(t,t&&t.name,r):l.call(t,"Link",t&&t.name,r)))+'<span class="cardNearStops__comment">&nbsp;— '+c((o=n._i18n||t&&t._i18n,r={hash:{data:t&&t.distance},data:i},o?o.call(t,"DISTANCE",r):l.call(t,"_i18n","DISTANCE",r)))+"</span>"},this.jst_modules=this.jst_modules||{},this.jst_modules.cardParking=this.jst_modules.cardParking||{},this.jst_modules.cardParking.cardParking=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n["if"].call(e,e,{hash:{},inverse:d.noop,fn:d.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var n="";return n+='<div class="cardParking__property">'+u(typeof e===c?e.apply(e):e)+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c="function",u=this.escapeExpression,d=this;return s=n.each.call(t,t&&t.properties,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l},this.jst_modules=this.jst_modules||{},this.jst_modules.cardRoutes=this.jst_modules.cardRoutes||{},this.jst_modules.cardRoutes.cardRoutes=function(e,t,n,a,i){function o(e,t){var n,a="";return a+=" _type_"+d((n=e&&e.header,n=null==n||n===!1?n:n.type,typeof n===u?n.apply(e):n))}function r(e,t){var n,a="";return a+=" _"+d((n=e&&e.header,n=null==n||n===!1?n:n.city,typeof n===u?n.apply(e):n))}function s(e,t){var a,i,o="";return o+='<div class="cardRoutes__list">'+d((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):h.call(e,"module",e,i)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c="",u="function",d=this.escapeExpression,h=n.helperMissing,p=this;return c+='<header class="cardRoutes__header"><h3 class="cardRoutes__headerType\n        ',l=n["if"].call(t,(l=t&&t.header,null==l||l===!1?l:l.type),{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(l||0===l)&&(c+=l),c+="\n        ",l=n["if"].call(t,(l=t&&t.header,null==l||l===!1?l:l.city),{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(l||0===l)&&(c+=l),c+='">'+d((l=t&&t.header,l=null==l||l===!1?l:l.text,typeof l===u?l.apply(t):l))+'</h3><span class="cardRoutes__headerTotal">'+d((l=t&&t.header,l=null==l||l===!1?l:l.counter,typeof l===u?l.apply(t):l))+"</span></header>",l=n.each.call(t,t&&t.list,{hash:{},inverse:p.noop,fn:p.program(5,s,i),data:i}),(l||0===l)&&(c+=l),c},this.jst_modules=this.jst_modules||{},this.jst_modules.cardRoutesListItem=this.jst_modules.cardRoutesListItem||{},this.jst_modules.cardRoutesListItem.cardRoutesListItem=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression,d="function";return l+='<div class="cardRoutesListItem__innerWrap"><p class="cardRoutesListItem__name">'+u((r=n.Link||t&&t.Link,s={hash:{"class":"_scheme_none",href:t&&t.seoLinkRoute},data:i},r?r.call(t,t&&t.name,s):c.call(t,"Link",t&&t.name,s)))+'<span class="cardRoutesListItem__note">'+u((o=t&&t.note,typeof o===d?o.apply(t):o))+'</span></p><div class="cardRoutesListItem__stops"><span class="cardRoutesListItem__stopsFrom">'+u((o=t&&t.from_name,typeof o===d?o.apply(t):o))+'</span><span class="cardRoutesListItem__stopsTo">'+u((o=t&&t.to_name,typeof o===d?o.apply(t):o))+"</span></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.chat=this.jst_modules.chat||{},this.jst_modules.chat.chat=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="chat__fakeChat"><div class="chat__fakeChatHeader"><div class="chat__fakeChatHeaderClose"></div></div><div class="chat__fakeChatError">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Что-то пошло не так. Попробуйте ещё раз.",r):l.call(t,"_t","Что-то пошло не так. Попробуйте ещё раз.",r)))+'</div><div class="chat__fakeChatSpinner"></div></div><div class="chat__container"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.checkConnectionWidget=this.jst_modules.checkConnectionWidget||{},this.jst_modules.checkConnectionWidget.checkConnectionWidget=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<h2 class="checkConnectionWidget__title">'+d((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Проверить подключение по адресу",i):u.call(e,"_gg","Проверить подключение по адресу",i)))+"</h2>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h=this,p="function";return r=n["if"].call(t,t&&t.showTitle,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+='<div class="checkConnectionWidget__inputsWrapper"><div class="checkConnectionWidget__inputGroup _street">'+d((s=n.Icon||t&&t.Icon,l={hash:{"class":"checkConnectionWidget__searchIcon"},data:i},s?s.call(t,"media_filters-search",l):u.call(t,"Icon","media_filters-search",l)))+'<input placeholder="'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Улица",l):u.call(t,"_gg","Улица",l)))+'"\n            class="checkConnectionWidget__suggestInput _withIcon"\n            type="text"\n            value="'+d((r=t&&t.address,r=null==r||r===!1?r:r.street,typeof r===p?r.apply(t):r))+'"\n            name="street"\n            autocomplete="off"\n            autocorrect="off"><div class="checkConnectionWidget__suggestWrapper"><ul class="checkConnectionWidget__suggestItems"></ul></div></div><div class="checkConnectionWidget__inputGroup _building"><input placeholder="'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Дом",l):u.call(t,"_gg","Дом",l)))+'"\n            name="building"\n            class="checkConnectionWidget__input"\n            type="text"\n            autocomplete="off"\n            autocorrect="off"\n            value="'+d((r=t&&t.address,r=null==r||r===!1?r:r.building,typeof r===p?r.apply(t):r))+'"></div><div class="checkConnectionWidget__inputGroup _appartment"><input placeholder="'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Кв.",l):u.call(t,"_gg","Кв.",l)))+'"\n            name="apartment"\n            class="checkConnectionWidget__input"\n            type="text"\n            autocomplete="off"\n            autocorrect="off"\n            value="'+d((r=t&&t.address,r=null==r||r===!1?r:r.apartment,typeof r===p?r.apply(t):r))+'"></div><div class="checkConnectionWidget__inputGroup _reset"><div title="'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Очистить форму",l):u.call(t,"_gg","Очистить форму",l)))+'" class="checkConnectionWidget__reset"></div></div><div class="checkConnectionWidget__btn _disabled">'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Проверить подключение",l):u.call(t,"_gg","Проверить подключение",l)))+'</div><div class="checkConnectionWidget__result _hidden"></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.cityFilter=this.jst_modules.cityFilter||{},this.jst_modules.cityFilter.cityFilter=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<input type="text" id="cityFilter__input" class="cityFilter__input" placeholder="'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Введите название города",r):l.call(t,"_t","Введите название города",r)))+'" maxlength="500" autocomplete="off" autocorrect="off"><span class="cityFilter__clearInputVal" title=""></span>'},this.jst_modules=this.jst_modules||{},this.jst_modules.cityQuora=this.jst_modules.cityQuora||{},this.jst_modules.cityQuora.cityQuora=function(e,t,n,a,i){function o(e,t){return' target="hidden_iframe"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=this,d=n.helperMissing,h=this.escapeExpression,p="function";return c+='<div class="cityQuora__scroller"><iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe><form action="https://docs.google.com/forms/d/11OFkmBgVd9PGWZ0CiZXQ2J4jWwMnpOR0wjEmC24bg68/formResponse" method="POST"',r=n["if"].call(t,t&&t.hiddenTarget,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+=' class="cityQuora__form"><div class="cityQuora__flexRow">'+h((s=n.Icon||t&&t.Icon,l={hash:{"class":"cityQuora__icon"},data:i},s?s.call(t,"cityQuora_icon",l):d.call(t,"Icon","cityQuora_icon",l)))+'<h1 class="cityQuora__header">',(s=n.title)?r=s.call(t,{hash:{},data:i}):(s=t&&t.title,r=typeof s===p?s.call(t,{hash:{},data:i}):s),c+=h(r)+'</h1><p class="cityQuora__paragraph">',(s=n.desc)?r=s.call(t,{hash:{},data:i}):(s=t&&t.desc,r=typeof s===p?s.call(t,{hash:{},data:i}):s),c+=h(r)+'</p><p class="cityQuora__paragraph">'+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Задайте свой вопрос, мы получим ответы экспертов и сообщим их вам. Через некоторое время вопросы с ответами будут опубликованы в 2ГИС.",l):d.call(t,"_gg","Задайте свой вопрос, мы получим ответы экспертов и сообщим их вам. Через некоторое время вопросы с ответами будут опубликованы в 2ГИС.",l)))+'</p></div><div class="cityQuora__flexRow _question"><div class="cityQuora__formRow"><label class="cityQuora__label" for="entry_696105752">'+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Вопрос",l):d.call(t,"_gg","Вопрос",l)))+'</label><textarea\n                    class="cityQuora__formQuestion"\n                    name="entry.696105752"\n                    rows="8"\n                    cols="0"\n                    id="entry_696105752"\n                    aria-required="true"\n                    required\n                    aria-label="',(s=n.placeholder)?r=s.call(t,{hash:{},data:i}):(s=t&&t.placeholder,r=typeof s===p?s.call(t,{hash:{},data:i}):s),c+=h(r)+'"\n                    placeholder="',(s=n.placeholder)?r=s.call(t,{hash:{},data:i}):(s=t&&t.placeholder,r=typeof s===p?s.call(t,{hash:{},data:i}):s),c+=h(r)+'"></textarea></div></div><div class="cityQuora__flexRow"><div class="cityQuora__formRow"><label class="cityQuora__label" for="entry_793307176">'+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Район",l):d.call(t,"_gg","Район",l)))+'</label><input class="cityQuora__formDistrict" type="text" name="entry.793307176" id="entry.793307176" aria-label="'+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Район",l):d.call(t,"_gg","Район",l)))+'" placeholder="'+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Где будем искать?",l):d.call(t,"_gg","Где будем искать?",l)))+'" aria-required="true" required title=""></div><div class="cityQuora__formRow"><label class="cityQuora__label" for="entry_1325166398">'+h((s=n._gg||t&&t._gg,
l={hash:{},data:i},s?s.call(t,"Имя",l):d.call(t,"_gg","Имя",l)))+'</label><input class="cityQuora__formName" type="text" name="entry.1325166398" id="entry_1325166398" aria-label="'+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Как вас зовут",l):d.call(t,"_gg","Как вас зовут",l)))+'" placeholder="'+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Как вас зовут",l):d.call(t,"_gg","Как вас зовут",l)))+'" aria-required="true" required title=""></div><div class="cityQuora__formRow"><label class="cityQuora__label" for="entry_2138149165">'+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Почта",l):d.call(t,"_gg","Почта",l)))+'</label><input class="cityQuora__formMail" type="text" name="entry.2138149165" id="entry_2138149165" aria-label="'+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Ваш электронный адрес",l):d.call(t,"_gg","Ваш электронный адрес",l)))+'" placeholder="'+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Ваш электронный адрес",l):d.call(t,"_gg","Ваш электронный адрес",l)))+'" aria-required="true" required autocomplete="off"></div>',s=n._hgg||t&&t._hgg,l={hash:{btn__tag:"input",btn__class:"cityQuora__formSubmit",btn__type:"submit",btn__name:"submit",btn__disabled:t&&t.disableButton},data:i},r=s?s.call(t,"%{Btn Задать вопрос}",l):d.call(t,"_hgg","%{Btn Задать вопрос}",l),(r||0===r)&&(c+=r),c+='<input type="text" name="entry.1091056573" id="entry_1091056573" readonly class="cityQuora__rubric"><input type="text" name="entry.706298087" id="entry_706298087" readonly class="cityQuora__source"><input type="text" name="entry.696264104" id="entry_696264104" readonly class="cityQuora__project"><input type="hidden" name="draftResponse" value="[,,&quot;-2399008892789389327&quot;]"><input type="hidden" name="pageHistory" value="0"><input type="hidden" name="fbzx" value="-2399008892789389327"></div></form><div class="cityQuora__success _hidden">'+h((s=n.Icon||t&&t.Icon,l={hash:{"class":"cityQuora__icon _success"},data:i},s?s.call(t,"cityQuora_icon",l):d.call(t,"Icon","cityQuora_icon",l)))+'<h1 class="cityQuora__successHeader">'+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Мы уже ищем ответ на ваш вопрос!",l):d.call(t,"_gg","Мы уже ищем ответ на ваш вопрос!",l)))+"</h1><p>"+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,'Команда "Сквер" передала вопрос экспертам. Вы получите подробные ответы в течение двух-трех дней.',l):d.call(t,"_gg",'Команда "Сквер" передала вопрос экспертам. Вы получите подробные ответы в течение двух-трех дней.',l)))+"</p>",s=n._hgg||t&&t._hgg,l={hash:{btn__class:"cityQuora__formAnother"},data:i},r=s?s.call(t,"%{Btn Задать ещё один вопрос}",l):d.call(t,"_hgg","%{Btn Задать ещё один вопрос}",l),(r||0===r)&&(c+=r),c+="</div>",(s=n.Track)?r=s.call(t,{hash:{},data:i}):(s=t&&t.Track,r=typeof s===p?s.call(t,{hash:{},data:i}):s),c+=h(r)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.citySelect=this.jst_modules.citySelect||{},this.jst_modules.citySelect.citySelect=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="citySelect__group" data-letter="'+f((a=null==t||t===!1?t:t.key,typeof a===p?a.apply(e):a))+'"><div class="citySelect__groupWrap">',a=n.each.call(e,e,{hash:{},inverse:m.noop,fn:m.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</div></div>"}function r(e,t){var a,i="";return i+='<div class="citySelect__groupItem">',a=n["if"].call(e,e&&e.parts,{hash:{},inverse:m.program(6,c,t),fn:m.program(3,s,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function s(e,t){var a,i,o,r="";return r+='<span class="citySelect__groupItemLink" data-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===p?i.call(e,{hash:{},data:t}):i),r+=f(a)+'" tabindex="1">',i=n.Link||e&&e.Link,o={hash:{href:e&&e.seoLinkCity,"class":"_scheme_none citySelect__groupItemLinkAnchor"},inverse:m.noop,fn:m.program(4,l,t),data:t},a=i?i.call(e,o):g.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</span>"}function l(e,t){var n,a="";return a+='<span class="citySelect__groupItemLinkVisible">'+f((n=e&&e.parts,n=null==n||n===!1?n:n.visible,typeof n===p?n.apply(e):n))+'</span><span class="citySelect__groupItemLinkFade1">'+f((n=e&&e.parts,n=null==n||n===!1?n:n.fade1,typeof n===p?n.apply(e):n))+'</span><span class="citySelect__groupItemLinkFade2">'+f((n=e&&e.parts,n=null==n||n===!1?n:n.fade2,typeof n===p?n.apply(e):n))+'</span><span class="citySelect__groupItemLinkInvisible">'+f((n=e&&e.parts,n=null==n||n===!1?n:n.invisible,typeof n===p?n.apply(e):n))+"</span>"}function c(e,t){var a,i,o,r="";return r+='<span class="citySelect__groupItemLink" data-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===p?i.call(e,{hash:{},data:t}):i),r+=f(a)+'" tabindex="1">'+f((i=n.Link||e&&e.Link,o={hash:{href:e&&e.seoLinkCity,"class":"_scheme_none citySelect__groupItemLinkAnchor"},data:t},i?i.call(e,e&&e.name,o):g.call(e,"Link",e&&e.name,o)))+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d,h="",p="function",f=this.escapeExpression,m=this,g=n.helperMissing;return h+='<input type="text" class="citySelect__suggest"><div class="citySelect__scroller">',u=n.each.call(t,t&&t.list,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(u||0===u)&&(h+=u),(d=n.Track)?u=d.call(t,{hash:{},data:i}):(d=t&&t.Track,u=typeof d===p?d.call(t,{hash:{},data:i}):d),h+=f(u)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.citySelectPhone=this.jst_modules.citySelectPhone||{},this.jst_modules.citySelectPhone.citySelectPhone=function(e,t,n,a,i){function o(e,t){var n,a="";return a+='<a class="citySelectPhone__ads _'+u((n=e&&e.ads,n=null==n||n===!1?n:n.mod,typeof n===c?n.apply(e):n))+'" href="'+u((n=e&&e.ads,n=null==n||n===!1?n:n.href,typeof n===c?n.apply(e):n))+'"><span class="citySelectPhone__adsText">'+u((n=e&&e.ads,n=null==n||n===!1?n:n.title,typeof n===c?n.apply(e):n))+"</span></a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c="function",u=this.escapeExpression,d=this;return l+='<header class="citySelectPhone__header"><img class="citySelectPhone__coa" src="',(s=n.coaPath)?r=s.call(t,{hash:{},data:i}):(s=t&&t.coaPath,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r)+'"><h1 class="citySelectPhone__title">',(s=n.city)?r=s.call(t,{hash:{},data:i}):(s=t&&t.city,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r)+'</h1><time class="citySelectPhone__time">',(s=n.time)?r=s.call(t,{hash:{},data:i}):(s=t&&t.time,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r)+'</time></header><ul class="citySelectPhone__list"></ul>',r=n["if"].call(t,t&&t.ads,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(r||0===r)&&(l+=r),l},this.jst_modules=this.jst_modules||{},this.jst_modules.collections=this.jst_modules.collections||{},this.jst_modules.collections.collections=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<li class="collections__tabsItem _',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===M?i.call(e,{hash:{},data:t}):i),o+=j(a)+"\n                ",a=n["if"].call(e,e&&e.active,{hash:{},inverse:A.noop,fn:A.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+="\n                ",a=n["if"].call(e,e&&e.loading,{hash:{},inverse:A.noop,fn:A.program(4,s,t),data:t}),(a||0===a)&&(o+=a),o+="\n                ",a=n["if"].call(e,e&&e.disabled,{hash:{},inverse:A.noop,fn:A.program(6,l,t),data:t}),(a||0===a)&&(o+=a),o+='"><span class="collections__tabsItemTitle">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===M?i.call(e,{hash:{},data:t}):i),o+=j(a)+"</span>",a=n["if"].call(e,e&&e.loading,{hash:{},inverse:A.program(10,u,t),fn:A.program(8,c,t),data:t}),(a||0===a)&&(o+=a),o+="</li>"}function r(e,t){return"_active"}function s(e,t){return"_loading"}function l(e,t){return"_disabled"}function c(e,t){var a,i,o="";return o+=j((a=n.Preloader||e&&e.Preloader,i={hash:{"class":"_small _scheme_lighten collections__preloader"},data:t},a?a.call(e,i):P.call(e,"Preloader",i)))}function u(e,t){var a,i="";return a=n["if"].call(e,e&&e.loaded,{hash:{},inverse:A.noop,fn:A.program(11,d,t),data:t}),(a||0===a)&&(i+=a),i}function d(e,t){var a,i,o="";return o+='<span class="collections__tabsItemCount">',(i=n.count)?a=i.call(e,{hash:{},data:t}):(i=e&&e.count,a=typeof i===M?i.call(e,{hash:{},data:t}):i),o+=j(a)+"</span>"}function h(e,t){var a,i,o="";return o+=j((a=n.Preloader||e&&e.Preloader,i={hash:{"class":"_scheme_lighten collections__preloader"},data:t},a?a.call(e,i):P.call(e,"Preloader",i)))}function p(e,t){var a,i="";return a=n.unless.call(e,e&&e.loaded,{hash:{},inverse:A.noop,fn:A.program(16,f,t),data:t}),(a||0===a)&&(i+=a),i}function f(e,t){var a,i,o="";return o+='<div class="collections__error"><div class="collections__errorMessage">',(i=n.loadError)?a=i.call(e,{hash:{},data:t}):(i=e&&e.loadError,a=typeof i===M?i.call(e,{hash:{},data:t}):i),o+=j(a)+"</div></div>"}function m(e,t){var a,i="";return a=n["if"].call(e,e&&e.addMode,{hash:{},inverse:A.program(26,b,t),fn:A.program(19,g,t),data:t}),(a||0===a)&&(i+=a),i}function g(e,t){var a,i,o,r="";return r+='<form class="collections__add',a=n["if"].call(e,e&&e.adding,{hash:{},inverse:A.noop,fn:A.program(20,_,t),data:t}),(a||0===a)&&(r+=a),r+=' _mode_edit"><input\n                        type="text"\n                        class="collections__input"\n                        value="',(i=n.addValue)?a=i.call(e,{hash:{},data:t}):(i=e&&e.addValue,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+'"\n                        placeholder="'+j((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Создать подборку",o):P.call(e,"_t","Создать подборку",o)))+'"\n                        ',a=n["if"].call(e,e&&e.adding,{hash:{},inverse:A.noop,fn:A.program(22,v,t),data:t}),(a||0===a)&&(r+=a),r+="\n                    />",a=n["if"].call(e,e&&e.adding,{hash:{},inverse:A.program(24,y,t),fn:A.program(8,c,t),data:t}),(a||0===a)&&(r+=a),r+="</form>"}function _(e,t){return" _mode_busy"}function v(e,t){return"disabled"}function y(e,t){var a,i="";return i+='<button\n                            type="submit"\n                            class="collections__addButton"\n                            ',a=n["if"].call(e,e&&e.addDisabled,{hash:{},inverse:A.noop,fn:A.program(22,v,t),data:t}),(a||0===a)&&(i+=a),i+="\n                        >+</button>"}function b(e,t){var a,i="";return i+='<div class="collections__add ',a=n["if"].call(e,e&&e.adding,{hash:{},inverse:A.noop,fn:A.program(20,_,t),data:t}),(a||0===a)&&(i+=a),i+='">',a=n["if"].call(e,e&&e.adding,{hash:{},inverse:A.program(29,w,t),fn:A.program(27,k,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function k(e,t){var a,i,o,r="";return r+="<span>",(i=n.addValue)?a=i.call(e,{hash:{},data:t}):(i=e&&e.addValue,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+"</span>"+j((i=n.Preloader||e&&e.Preloader,o={hash:{"class":"_small _scheme_lighten collections__preloader"},data:t},i?i.call(e,o):P.call(e,"Preloader",o)))}function w(e,t){var a,i,o="";return o+='<span class="collections__inputSoother">'+j((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Создать подборку",i):P.call(e,"_t","Создать подборку",i)))+'</span><span class="collections__addButtonSoother">+</span>'}function x(e,t){var a,i="";return i+='<ul class="collections__list">',a=n.each.call(e,e&&e.list,{hash:{},inverse:A.noop,fn:A.program(32,C,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function C(e,t){var a,i,o="";return o+='<li class="collections__item">'+j((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):P.call(e,"module",e,i)))+"</li>"}function L(e,t){var a,i,o="";return o+='<div class="collections__empty">'+j((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e&&e.favoritesEmpty,i):P.call(e,"module",e&&e.favoritesEmpty,i)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var I,T,S,E="",P=n.helperMissing,j=this.escapeExpression,M="function",A=this;return E+='<header class="collections__header"><h2 class="collections__title">'+j((T=n.Icon||t&&t.Icon,S={hash:{"class":"collections__icon"},data:i},T?T.call(t,"fav_default",S):P.call(t,"Icon","fav_default",S)))+j((T=n._t||t&&t._t,S={hash:{},data:i},T?T.call(t,"Подборки",S):P.call(t,"_t","Подборки",S)))+'</h2><ul class="collections__tabsList">',I=n.each.call(t,t&&t.tabs,{hash:{},inverse:A.noop,fn:A.program(1,o,i),data:i}),(I||0===I)&&(E+=I),E+='</ul></header><section class="collections__body"><div class="collections__scroller">',I=n["if"].call(t,t&&t.loading,{hash:{},inverse:A.program(15,p,i),fn:A.program(13,h,i),data:i}),(I||0===I)&&(E+=I),I=n["if"].call(t,t&&t.hasAdd,{hash:{},inverse:A.noop,fn:A.program(18,m,i),data:i}),(I||0===I)&&(E+=I),I=n["if"].call(t,(I=t&&t.list,null==I||I===!1?I:I.length),{hash:{},inverse:A.noop,fn:A.program(31,x,i),data:i}),(I||0===I)&&(E+=I),I=n["if"].call(t,t&&t.favoritesEmpty,{hash:{},inverse:A.noop,fn:A.program(34,L,i),data:i}),(I||0===I)&&(E+=I),(T=n.Track)?I=T.call(t,{hash:{},data:i}):(T=t&&t.Track,I=typeof T===M?T.call(t,{hash:{},data:i}):T),E+=j(I)+"</div></section>"},this.jst_modules=this.jst_modules||{},this.jst_modules.collectionsContainer=this.jst_modules.collectionsContainer||{},this.jst_modules.collectionsContainer.collectionsContainer=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+=c((o=n.module||t&&t.module,r={hash:{},data:i},o?o.call(t,"collections",r):l.call(t,"module","collections",r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.collectionsItem=this.jst_modules.collectionsItem||{},this.jst_modules.collectionsItem.collectionsItem=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="collectionsItem__cover',a=n["if"].call(e,e&&e.isCoverMode,{hash:{},inverse:O.noop,fn:O.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+='"\n         style="background-image: url(',(i=n.coverUrl)?a=i.call(e,{hash:{},data:t}):(i=e&&e.coverUrl,a=typeof i===F?i.call(e,{hash:{},data:t}):i),o+=B(a)+')">',a=n["if"].call(e,e&&e.isCoverMode,{hash:{},inverse:O.noop,fn:O.program(4,s,t),data:t}),(a||0===a)&&(o+=a),o+="</div>"}function r(e,t){return" _stopBubling"}function s(e,t){var a,i,o,r="";return r+='<span class="collectionsItem__close">'+B((i=n.Icon||e&&e.Icon,o={hash:{"class":"collectionsItem__closeIcon"},data:t},i?i.call(e,"ui_close",o):N.call(e,"Icon","ui_close",o)))+"</span>",a=n["if"].call(e,e&&e.coverUrl,{hash:{},inverse:O.noop,fn:O.program(5,l,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,e&&e.uploadedCover,{hash:{},inverse:O.program(13,p,t),fn:O.program(7,c,t),data:t}),(a||0===a)&&(r+=a),r}function l(e,t){return'<div class="collectionsItem__darkness"></div>'}function c(e,t){var a,i="";return a=n["if"].call(e,e&&e.showCoverUploader,{hash:{},inverse:O.program(10,d,t),fn:O.program(8,u,t),data:t}),(a||0===a)&&(i+=a),i}function u(e,t){var a,i,o="";return o+=B((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e&&e.coverUploader,i):N.call(e,"module",e&&e.coverUploader,i)))}function d(e,t){var a,i="";return i+='<ul class="collectionsItem__coverTools">',a=n.each.call(e,e&&e.coverTools,{hash:{},inverse:O.noop,fn:O.program(11,h,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function h(e,t){var a,i,o,r="";return r+='<li class="collectionsItem__coverToolsItem _type_',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===F?i.call(e,{hash:{},data:t}):i),r+=B(a)+'"><div class="collectionsItem__coverToolsItemButton">'+B((i=n.Icon||e&&e.Icon,o={hash:{"class":"collectionsItem__coverToolsItemIcon"},data:t},i?i.call(e,e&&e.icon,o):N.call(e,"Icon",e&&e.icon,o)))+'</div><div class="collectionsItem__coverToolsItemTitle">'+B((i=n._i18n||e&&e._i18n,o={hash:{data:e&&e.type},data:t},i?i.call(e,"COLLECTION_TOOL_TITLE",o):N.call(e,"_i18n","COLLECTION_TOOL_TITLE",o)))+"</div></li>"}function p(e,t){var a,i,o="";return o+='<div class="collectionsItem__status">',a=n["if"].call(e,e&&e.uploadingCover,{hash:{},inverse:O.program(16,m,t),fn:O.program(14,f,t),data:t}),(a||0===a)&&(o+=a),o+='<div class="collectionsItem__statusFileName">',(i=n.uploadCoverName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.uploadCoverName,a=typeof i===F?i.call(e,{hash:{},data:t}):i),o+=B(a)+"</div></div>"}function f(e,t){var a,i,o="";return o+=B((a=n.Preloader||e&&e.Preloader,i={hash:{"class":"_scheme_lighten collectionsItem__statusPreloader"},data:t},a?a.call(e,i):N.call(e,"Preloader",i)))}function m(e,t){var a,i,o,r="";return r+=B((i=n.Icon||e&&e.Icon,o={hash:{"class":"collectionsItem__statusSadIcon"},data:t},i?i.call(e,"patchwork_sadSmile",o):N.call(e,"Icon","patchwork_sadSmile",o)))+'<div class="collectionsItem__statusError">',(i=n.uploadCoverError)?a=i.call(e,{hash:{},data:t}):(i=e&&e.uploadCoverError,a=typeof i===F?i.call(e,{hash:{},data:t}):i),r+=B(a)+"</div>"}function g(e,t){var a,i,o="";return o+='<form class="collectionsItem__titleForm"><input class="collectionsItem__titleInput"\n                           value="',(i=n.renameValue)?a=i.call(e,{hash:{},data:t}):(i=e&&e.renameValue,a=typeof i===F?i.call(e,{hash:{},data:t}):i),o+=B(a)+'"\n                           placeholder="',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===F?i.call(e,{hash:{},data:t}):i),o+=B(a)+'"\n                           maxlength="64"\n                           ',a=n["if"].call(e,e&&e.updating,{hash:{},inverse:O.noop,fn:O.program(19,_,t),data:t}),(a||0===a)&&(o+=a),o+="></form>"}function _(e,t){return"disabled"}function v(e,t){var a,i="";return a=n["if"].call(e,e&&e.updating,{hash:{},inverse:O.program(24,b,t),fn:O.program(22,y,t),data:t}),(a||0===a)&&(i+=a),i}function y(e,t){var a,i,o="";return(i=n.updatedTitle)?a=i.call(e,{hash:{},data:t}):(i=e&&e.updatedTitle,a=typeof i===F?i.call(e,{hash:{},data:t}):i),o+=B(a)}function b(e,t){var a,i="";return a=n["if"].call(e,e&&e.title,{hash:{},inverse:O.program(27,w,t),fn:O.program(25,k,t),data:t}),(a||0===a)&&(i+=a),i}function k(e,t){var a,i,o="";return(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===F?i.call(e,{hash:{},data:t}):i),o+=B(a)}function w(e,t){var a,i,o="";return o+=B((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Избранное",i):N.call(e,"_t","Избранное",i)))}function x(e,t){var a,i,o="";return o+=B((a=n.Preloader||e&&e.Preloader,i={hash:{"class":"_small _scheme_lighten collectionsItem__preloader"},data:t},a?a.call(e,i):N.call(e,"Preloader",i)))}function C(e,t){var a,i="";return a=n["if"].call(e,e&&e.deleted,{hash:{},inverse:O.program(34,I,t),fn:O.program(32,L,t),data:t}),(a||0===a)&&(i+=a),i}function L(e,t){var a,i,o="";return o+=B((a=n.Icon||e&&e.Icon,i={hash:{"class":"collectionsItem__restore"},data:t},a?a.call(e,"favorites_restore",i):N.call(e,"Icon","favorites_restore",i)))}function I(e,t){var a,i,o="";return o+='<span class="collectionsItem__count">',(i=n.count)?a=i.call(e,{hash:{},data:t}):(i=e&&e.count,a=typeof i===F?i.call(e,{hash:{},data:t}):i),o+=B(a)+"</span>"}function T(e,t){var a,i,o,r="";return r+='<div class="collectionsItem__description"><form class="collectionsItem__descriptionForm"><textarea class="collectionsItem__descriptionInput"\n                          placeholder="'+B((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Добавить описание",o):N.call(e,"_t","Добавить описание",o)))+'"\n                          maxlength="1000">',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===F?i.call(e,{hash:{},data:t}):i),r+=B(a)+"</textarea></form></div>"}function S(e,t){var a,i="";return a=n["if"].call(e,e&&e.description,{hash:{},inverse:O.noop,fn:O.program(39,E,t),data:t}),(a||0===a)&&(i+=a),i}function E(e,t){var a,i,o="";return o+='<div class="collectionsItem__description">',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===F?i.call(e,{hash:{},data:t}):i),o+=B(a)+"</div>"}function P(e,t){var a,i,o="";return o+='<div class="collectionsItem__sharedIndicator">'+B((a=n.Icon||e&&e.Icon,i={hash:{"class":"collectionsItem__sharedIcon"},data:t},a?a.call(e,"favorites_share",i):N.call(e,"Icon","favorites_share",i)))+"</div>"}function j(e,t){var a,i,o="";return o+='<div class="collectionsItem__tools">'+B((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e&&e.tools,i):N.call(e,"module",e&&e.tools,i)))+"</div>"}function M(e,t){var a,i,o="";return o+='<div class="collectionsItem__share">'+B((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e&&e.shareModule,i):N.call(e,"module",e&&e.shareModule,i)))+"</div>"}function A(e,t){var a,i,o="";return o+=B((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e&&e.deleteDialog,i):N.call(e,"module",e&&e.deleteDialog,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var D,R="",N=n.helperMissing,B=this.escapeExpression,F="function",O=this;return D=n["if"].call(t,t&&t.covered,{hash:{},inverse:O.noop,fn:O.program(1,o,i),data:i}),(D||0===D)&&(R+=D),R+='<main class="collectionsItem__main"><div class="collectionsItem__header"><div class="collectionsItem__title">',D=n["if"].call(t,t&&t.isRenameMode,{hash:{},inverse:O.program(21,v,i),fn:O.program(18,g,i),data:i}),(D||0===D)&&(R+=D),R+="</div>",D=n["if"].call(t,t&&t.busy,{hash:{},inverse:O.program(31,C,i),fn:O.program(29,x,i),data:i}),(D||0===D)&&(R+=D),R+="</div>",D=n["if"].call(t,t&&t.descriptionEdit,{hash:{},inverse:O.program(38,S,i),fn:O.program(36,T,i),data:i}),(D||0===D)&&(R+=D),D=n["if"].call(t,t&&t.isShared,{hash:{},inverse:O.noop,fn:O.program(41,P,i),data:i}),(D||0===D)&&(R+=D),R+="</main>",D=n["if"].call(t,t&&t.tools,{hash:{},inverse:O.noop,fn:O.program(43,j,i),data:i}),(D||0===D)&&(R+=D),D=n["if"].call(t,t&&t.isSharedMode,{hash:{},inverse:O.noop,fn:O.program(45,M,i),data:i}),(D||0===D)&&(R+=D),D=n["if"].call(t,t&&t.deleteDialog,{hash:{},inverse:O.noop,fn:O.program(47,A,i),data:i}),(D||0===D)&&(R+=D),R},this.jst_modules=this.jst_modules||{},this.jst_modules.congestion=this.jst_modules.congestion||{},this.jst_modules.congestion.congestion=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="congestion__control" title=\''+c((o=n._pt||t&&t._pt,r={hash:{},data:i},o?o.call(t,"Контрол на карте","Пробки",r):l.call(t,"_pt","Контрол на карте","Пробки",r)))+"'></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.congestion2=this.jst_modules.congestion2||{},this.jst_modules.congestion2.congestion2=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=p((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Сейчас",i):h.call(e,"_t","Сейчас",i)))}function r(e,t){var a,i,o="";return o+=p((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Обычно",i):h.call(e,"_t","Обычно",i)))}function s(e,t){var a,i,o="";return o+=p((a=n.Link||e&&e.Link,i={hash:{"class":"_scheme_dark _type_local congestion2__detailsForecastWeekItem","data-key":e&&e.key},data:t},a?a.call(e,e&&e.title,i):h.call(e,"Link",e&&e.title,i)))+" "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h=n.helperMissing,p=this.escapeExpression,f="function",m=this;return d+='<div class="congestion2__control" data-value=',(c=n.soHard)?l=c.call(t,{hash:{},data:i}):(c=t&&t.soHard,l=typeof c===f?c.call(t,{hash:{},data:i}):c),d+=p(l)+'></div><div class="congestion2__details"><div class="congestion2__detailsClose"></div><header class="congestion2__detailsPoints _trend_',(c=n.trend)?l=c.call(t,{hash:{},data:i}):(c=t&&t.trend,l=typeof c===f?c.call(t,{hash:{},data:i}):c),d+=p(l)+'">',(c=n.points)?l=c.call(t,{hash:{},data:i}):(c=t&&t.points,l=typeof c===f?c.call(t,{hash:{},data:i}):c),d+=p(l)+'</header><div class="congestion2__detailsDesc">',(c=n.description)?l=c.call(t,{hash:{},data:i}):(c=t&&t.description,l=typeof c===f?c.call(t,{hash:{},data:i}):c),d+=p(l)+'</div><div class="congestion2__detailsMode">',c=n.Link||t&&t.Link,u={hash:{"class":"_scheme_dark _type_local congestion2__detailsModeNow"},inverse:m.noop,fn:m.program(1,o,i),data:i},l=c?c.call(t,u):h.call(t,"Link",u),(l||0===l)&&(d+=l),d+=" ",c=n.Link||t&&t.Link,u={hash:{"class":"_scheme_dark _type_local congestion2__detailsModeForecast"},inverse:m.noop,fn:m.program(3,r,i),data:i},l=c?c.call(t,u):h.call(t,"Link",u),(l||0===l)&&(d+=l),d+='</div><div class="congestion2__detailsForecast"><div class="congestion2__detailsForecastWeek">',l=n.each.call(t,t&&t.days,{hash:{},inverse:m.noop,fn:m.program(5,s,i),data:i}),(l||0===l)&&(d+=l),d+='</div><div class="congestion2__detailsForecastTime"><div class="congestion2__detailsForecastTimeTrack" data-min="',(c=n.timeMin)?l=c.call(t,{hash:{},data:i}):(c=t&&t.timeMin,l=typeof c===f?c.call(t,{hash:{},data:i}):c),d+=p(l)+'" data-max="',(c=n.timeMax)?l=c.call(t,{hash:{},data:i}):(c=t&&t.timeMax,l=typeof c===f?c.call(t,{hash:{},data:i}):c),d+=p(l)+'"><div class="congestion2__detailsForecastTimeRunner"></div></div></div><footer class="congestion2__detailsForecastSource">'+p((c=n._t||t&&t._t,u={hash:{},data:i},c?c.call(t,"По данным статистики 2ГИС",u):h.call(t,"_t","По данным статистики 2ГИС",u)))+"</footer></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.contact=this.jst_modules.contact||{},this.jst_modules.contact.contact=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="contact__phones',a=n.unless.call(e,(a=e&&e.phones,null==a||a===!1?a:a.fade),{hash:{},inverse:A.noop,fn:A.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+='">',a=n["if"].call(e,(a=e&&e.phones,null==a||a===!1?a:a.fade),{hash:{},inverse:A.noop,fn:A.program(4,s,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.phones,null==a||a===!1?a:a.list),{hash:{},inverse:A.noop,fn:A.program(6,l,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function r(e,t){return" _shown"}function s(e,t){var a,i,o,r="";return r+='<div class="contact__phonesFade"><div class="contact__toggle _place_phones">'+j((i=n.Icon||e&&e.Icon,o={hash:{"class":"contact__toggleIcon"},data:t},i?i.call(e,"card_toggle",o):P.call(e,"Icon","card_toggle",o)))+'</div><div class="contact__phonesItem _type_'+j((a=e&&e.phones,a=null==a||a===!1?a:a.type,typeof a===M?a.apply(e):a))+'">'+j((i=n.Icon||e&&e.Icon,o={hash:{"class":"contact__phonesItemIcon"},data:t},i?i.call(e,(a=e&&e.phones,null==a||a===!1?a:a.icon),o):P.call(e,"Icon",(a=e&&e.phones,null==a||a===!1?a:a.icon),o)))+'<span class="contact__phonesItemLink"><span class="contact__phonesItemLinkNumber">'+j((a=e&&e.phones,a=null==a||a===!1?a:a.visiblePhonePart,typeof a===M?a.apply(e):a))+'</span></span></div><div class="contact__phonesFadeShow">'+j((a=e&&e.phones,a=null==a||a===!1?a:a.showText,typeof a===M?a.apply(e):a))+"</div></div>"}function l(e,t){var a,i="";return i+='<div class="contact__phonesVisible">',a=n.each.call(e,(a=e&&e.phones,null==a||a===!1?a:a.list),{hash:{},inverse:A.noop,fn:A.program(7,c,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function c(e,t){var a,i,o,r="";return r+='<div class="contact__phonesItem _type_',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+'">'+j((i=n.Icon||e&&e.Icon,o={hash:{"class":"contact__phonesItemIcon"},data:t},i?i.call(e,e&&e.icon,o):P.call(e,"Icon",e&&e.icon,o)))+'<a href="',(i=n.href)?a=i.call(e,{hash:{},data:t}):(i=e&&e.href,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+'" class="contact__phonesItemLink" data-hint="'+j((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Позвонить",o):P.call(e,"_t","Позвонить",o)))+'" data-group="',(i=n.groupIndex)?a=i.call(e,{hash:{},data:t}):(i=e&&e.groupIndex,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+'" data-index="',(i=n.contactIndex)?a=i.call(e,{hash:{},data:t}):(i=e&&e.contactIndex,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+'"><span class="contact__phonesItemLinkNumber">',(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+"</span></a>",a=n["if"].call(e,e&&e.comment,{hash:{},inverse:A.noop,fn:A.program(8,u,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function u(e,t){var a,i,o="";return o+='<div class="contact__phonesItemComment">',(i=n.comment)?a=i.call(e,{hash:{},data:t}):(i=e&&e.comment,a=typeof i===M?i.call(e,{hash:{},data:t}):i),o+=j(a)+"</div>"}function d(e,t){var a,i="";return i+='<div class="contact__websites">',a=n.each.call(e,e&&e.websites,{hash:{},inverse:A.noop,fn:A.program(11,h,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function h(e,t){var a,i,o,r="";return r+='<div class="contact__link _type_website" data-group="',(i=n.groupIndex)?a=i.call(e,{hash:{},data:t}):(i=e&&e.groupIndex,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+'" data-index="',(i=n.contactIndex)?a=i.call(e,{hash:{},data:t}):(i=e&&e.contactIndex,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+'">'+j((i=n.Link||e&&e.Link,o={hash:{href:e&&e.href,title:e&&e.title,"class":"contact__linkText",target:"_blank"},data:t},i?i.call(e,e&&e.text,o):P.call(e,"Link",e&&e.text,o)))+"</div>"}function p(e,t){var a,i,o,r="";return r+='<div class="contact__claimToFirm"><div class="contact__claimToFirmButton">',i=n.Link||e&&e.Link,o={hash:{"class":"contact__linkText"},inverse:A.noop,fn:A.program(14,f,t),data:t},a=i?i.call(e,o):P.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div></div>"}function f(e,t){var a,i,o="";return o+=j((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Написать письмо",i):P.call(e,"_t","Написать письмо",i)))}function m(e,t){var a,i="";return i+='<div class="contact__socials _size_'+j((a=e&&e.socials,a=null==a||a===!1?a:a.length,typeof a===M?a.apply(e):a))+'">',a=n["if"].call(e,e&&e.socialHeader,{hash:{},inverse:A.noop,fn:A.program(17,g,t),data:t}),(a||0===a)&&(i+=a),a=n.each.call(e,e&&e.socials,{hash:{},inverse:A.noop,fn:A.program(19,_,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function g(e,t){var a,i,o="";return o+='<header class="contact__socialsTitle">'+j((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Организация в социальных сетях",i):P.call(e,"_t","Организация в социальных сетях",i)))+"</header>"}function _(e,t){var a,i,o,r="";return r+='<div class="contact__link _social _type_',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+'" data-group="',(i=n.groupIndex)?a=i.call(e,{hash:{},data:t}):(i=e&&e.groupIndex,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+'" data-index="',(i=n.contactIndex)?a=i.call(e,{hash:{},data:t}):(i=e&&e.contactIndex,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+'">'+j((i=n.Link||e&&e.Link,o={hash:{href:e&&e.href,title:e&&e.title,"class":"contact__linkText",target:"_blank"},data:t},i?i.call(e,e&&e.text,o):P.call(e,"Link",e&&e.text,o)))+"</div>"}function v(e,t){var a,i="";return i+='<div class="contact__other',a=n["if"].call(e,(a=e&&e.other,null==a||a===!1?a:a.expanded),{hash:{},inverse:A.noop,fn:A.program(22,y,t),data:t}),(a||0===a)&&(i+=a),i+='">',a=n.unless.call(e,e&&e.dropdownMode,{hash:{},inverse:A.noop,fn:A.program(24,b,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.other,null==a||a===!1?a:a.contacts),{hash:{},inverse:A.noop,fn:A.program(26,k,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.other,null==a||a===!1?a:a.groups),{hash:{},inverse:A.noop,fn:A.program(30,C,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function y(e,t){return" _expanded"}function b(e,t){var a,i,o="";return o+='<header class="contact__otherHeader">'+j((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Все контакты",i):P.call(e,"_t","Все контакты",i)))+'<div class="contact__toggle _place_other">'+j((a=n.Icon||e&&e.Icon,i={hash:{"class":"contact__toggleIcon"},data:t},a?a.call(e,"card_toggle",i):P.call(e,"Icon","card_toggle",i)))+"</div></header>"}function k(e,t){var a,i="";return i+='<div class="contact__otherList">',a=n.each.call(e,(a=e&&e.other,null==a||a===!1?a:a.contacts),{hash:{},inverse:A.noop,fn:A.program(27,w,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function w(e,t){var a,i,o,r="";return r+='<div class="contact__link _type_',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+'" data-group="',(i=n.groupIndex)?a=i.call(e,{hash:{},data:t}):(i=e&&e.groupIndex,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+'" data-index="',(i=n.contactIndex)?a=i.call(e,{
hash:{},data:t}):(i=e&&e.contactIndex,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+'">'+j((i=n.Link||e&&e.Link,o={hash:{href:e&&e.href,title:e&&e.title,"class":"contact__linkText",target:"_blank"},data:t},i?i.call(e,e&&e.text,o):P.call(e,"Link",e&&e.text,o))),a=n["if"].call(e,e&&e.comment,{hash:{},inverse:A.noop,fn:A.program(28,x,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function x(e,t){var a,i,o="";return o+='<span class="contact__linkComment">',(i=n.comment)?a=i.call(e,{hash:{},data:t}):(i=e&&e.comment,a=typeof i===M?i.call(e,{hash:{},data:t}):i),o+=j(a)+"</span>"}function C(e,t){var a,i="";return i+='<div class="contact__otherGroups">',a=n.each.call(e,(a=e&&e.other,null==a||a===!1?a:a.groups),{hash:{},inverse:A.noop,fn:A.program(31,L,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function L(e,t){var a,i,o,r="";return r+='<div class="contact__otherGroupsItem">',a=n["if"].call(e,e&&e.name,{hash:{},inverse:A.noop,fn:A.program(32,I,t),data:t}),(a||0===a)&&(r+=a),i=n.module||e&&e.module,o={hash:{},inverse:A.noop,fn:A.program(34,T,t),data:t},a=i?i.call(e,e&&e.schedule,o):P.call(e,"module",e&&e.schedule,o),(a||0===a)&&(r+=a),r+=j((i=n.p||e&&e.p,o={hash:{},data:t},i?i.call(e,"contact",o):P.call(e,"p","contact",o)))+"</div>"}function I(e,t){var a,i,o="";return o+='<h2 class="contact__otherGroupsItemTitle">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===M?i.call(e,{hash:{},data:t}):i),o+=j(a)+"</h2>"}function T(e,t){var n="";return n+='<div class="contact__otherGroupsItemSchedule">'+j(typeof e===M?e.apply(e):e)+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var S,E="",P=n.helperMissing,j=this.escapeExpression,M="function",A=this;return S=n["if"].call(t,t&&t.phones,{hash:{},inverse:A.noop,fn:A.program(1,o,i),data:i}),(S||0===S)&&(E+=S),S=n["if"].call(t,(S=t&&t.websites,null==S||S===!1?S:S.length),{hash:{},inverse:A.noop,fn:A.program(10,d,i),data:i}),(S||0===S)&&(E+=S),S=n["if"].call(t,t&&t.claimToFirm,{hash:{},inverse:A.noop,fn:A.program(13,p,i),data:i}),(S||0===S)&&(E+=S),S=n["if"].call(t,(S=t&&t.socials,null==S||S===!1?S:S.length),{hash:{},inverse:A.noop,fn:A.program(16,m,i),data:i}),(S||0===S)&&(E+=S),S=n["if"].call(t,t&&t.other,{hash:{},inverse:A.noop,fn:A.program(21,v,i),data:i}),(S||0===S)&&(E+=S),E},this.jst_modules=this.jst_modules||{},this.jst_modules.contextPromo=this.jst_modules.contextPromo||{},this.jst_modules.contextPromo.contextPromo=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=d((a=n.Icon||e&&e.Icon,i={hash:{"class":"contextProm__icon"},data:t},a?a.call(e,e&&e.icon,i):u.call(e,"Icon",e&&e.icon,i)))}function r(e,t){var a,i,o="";return o+=d((a=n.Btn||e&&e.Btn,i={hash:{},data:t},a?a.call(e,e&&e.buttonText,e&&e.buttonAttrs,i):u.call(e,"Btn",e&&e.buttonText,e&&e.buttonAttrs,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c="",u=n.helperMissing,d=this.escapeExpression,h=this,p="function";return s=n["if"].call(t,t&&t.icon,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(s||0===s)&&(c+=s),c+='<header class="contextPromo__header">',(l=n.title)?s=l.call(t,{hash:{},data:i}):(l=t&&t.title,s=typeof l===p?l.call(t,{hash:{},data:i}):l),c+=d(s)+'</header><p class="contextPromo__message">',(l=n.message)?s=l.call(t,{hash:{},data:i}):(l=t&&t.message,s=typeof l===p?l.call(t,{hash:{},data:i}):l),c+=d(s)+"</p>",s=n["if"].call(t,t&&t.buttonText,{hash:{},inverse:h.noop,fn:h.program(3,r,i),data:i}),(s||0===s)&&(c+=s),c},this.jst_modules=this.jst_modules||{},this.jst_modules.dashboard=this.jst_modules.dashboard||{},this.jst_modules.dashboard.dashboard=function(e,t,n,a,i){function o(e,t){var n="";return n+='<div class="dashboard__weather">'+g(typeof e===m?e.apply(e):e)+"</div>"}function r(e,t){var a,i,o,r="";return i=n.Link||e&&e.Link,o={hash:{href:e&&e.cityLink,"class":"dashboard__cityselectLink _scheme_dark _undashed"},inverse:v.noop,fn:v.program(4,s,t),data:t},a=i?i.call(e,o):_.call(e,"Link",o),(a||0===a)&&(r+=a),r}function s(e,t){var a,i,o="";return o+=g((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Другой город",i):_.call(e,"_t","Другой город",i)))}function l(e,t){var a,i,o="";return o+='<div class="dashboard__metarubrics">'+g((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"meta",i):_.call(e,"p","meta",i)))+"</div>"}function c(e,t){var a,i,o="";return o+='<div class="dashboard__promo">'+g((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e&&e.teaser,i):_.call(e,"module",e&&e.teaser,i)))+"</div>"}function u(e,t){var a,i,o="";return o+='<div class="dashboard__ads">'+g((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e&&e.ads,i):_.call(e,"module",e&&e.ads,i)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h,p,f="",m="function",g=this.escapeExpression,_=n.helperMissing,v=this;return f+='<div class="dashboard__close"></div><div class="dashboard__wrap">',h=n.module||t&&t.module,p={hash:{},inverse:v.noop,fn:v.program(1,o,i),data:i},d=h?h.call(t,"weather",p):_.call(t,"module","weather",p),(d||0===d)&&(f+=d),f+='<div class="dashboard__city"><h1 class="dashboard__cityName"><img src="'+g((d=t&&t.city,d=null==d||d===!1?d:d.logoPath,typeof d===m?d.apply(t):d))+'" alt="'+g((d=t&&t.city,d=null==d||d===!1?d:d.name,typeof d===m?d.apply(t):d))+'" class="dashboard__cityNameLogo">'+g((h=n.Link||t&&t.Link,p={hash:{href:t&&t.cityLink,"class":"dashboard__cityNameText _scheme_dark _undashed"},data:i},h?h.call(t,(d=t&&t.city,null==d||d===!1?d:d.name),p):_.call(t,"Link",(d=t&&t.city,null==d||d===!1?d:d.name),p)))+'</h1><div class="dashboard__cityTimeWrap"><span class="dashboard__cityTime">',(h=n.time)?d=h.call(t,{hash:{},data:i}):(h=t&&t.time,d=typeof h===m?h.call(t,{hash:{},data:i}):h),f+=g(d)+"</span></div>",d=n["if"].call(t,t&&t.showOtherCityLink,{hash:{},inverse:v.noop,fn:v.program(3,r,i),data:i}),(d||0===d)&&(f+=d),f+='</div><div class="dashboard__cityselect">'+g((h=n.module||t&&t.module,p={hash:{},data:i},h?h.call(t,t&&t.citySelectName,p):_.call(t,"module",t&&t.citySelectName,p)))+"</div>",d=n["if"].call(t,t&&t.metaRubrics,{hash:{},inverse:v.noop,fn:v.program(6,l,i),data:i}),(d||0===d)&&(f+=d),d=n["if"].call(t,t&&t.showAds,{hash:{},inverse:v.noop,fn:v.program(8,c,i),data:i}),(d||0===d)&&(f+=d),f+='<div class="dashboard__apps">'+g((h=n.module||t&&t.module,p={hash:{},data:i},h?h.call(t,"apps",p):_.call(t,"module","apps",p)))+"</div></div>",d=n["if"].call(t,t&&t.showAds,{hash:{},inverse:v.noop,fn:v.program(10,u,i),data:i}),(d||0===d)&&(f+=d),f},this.jst_modules=this.jst_modules||{},this.jst_modules.dataViewer=this.jst_modules.dataViewer||{},this.jst_modules.dataViewer.dataViewer=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=d((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):u.call(e,"module",e,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h=this;return c+='<div class="dataViewer__summary"><div class="dataViewer__tab"></div></div><div class="dataViewer__mobileMaximize">'+d((s=n.Icon||t&&t.Icon,l={hash:{"class":"dataViewer__mobileMaximizeIcon"},data:i},s?s.call(t,"ui_control-go-to-card",l):u.call(t,"Icon","ui_control-go-to-card",l)))+'</div><div class="dataViewer__frames">',r=n.each.call(t,t&&t.views,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.deleteDialog=this.jst_modules.deleteDialog||{},this.jst_modules.deleteDialog.deleteDialog=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return i=n._t||e&&e._t,o={hash:{},data:t},a=i?i.call(e,'Удалить "%1" из&nbsp;подборки?',e&&e.name,o):d.call(e,"_t",'Удалить "%1" из&nbsp;подборки?',e&&e.name,o),(a||0===a)&&(r+=a),r}function r(e,t){var a,i,o="";return o+=h((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Удалить подборку?",i):d.call(e,"_t","Удалить подборку?",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d=n.helperMissing,h=this.escapeExpression,p=this;return u+='<div class="deleteDialog__content"><div class="deleteDialog__text">',s=n["if"].call(t,t&&t.name,{hash:{},inverse:p.program(3,r,i),fn:p.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+='</div><span class="deleteDialog__yes">'+h((l=n.Icon||t&&t.Icon,c={hash:{"class":"deleteDialog__icon"},data:i},l?l.call(t,"favoritesWidget_ok",c):d.call(t,"Icon","favoritesWidget_ok",c)))+'</span><span class="deleteDialog__no">'+h((l=n.Icon||t&&t.Icon,c={hash:{"class":"deleteDialog__icon"},data:i},l?l.call(t,"favoritesWidget_cancel",c):d.call(t,"Icon","favoritesWidget_cancel",c)))+"</span></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.discountRating=this.jst_modules.discountRating||{},this.jst_modules.discountRating.discountRating=function(e,t,n,a,i){function o(e,t){return" _hasValue"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=this,d=n.helperMissing,h=this.escapeExpression,p="function";return c+='<div class="discountRating__tooltip"></div><span class="discountRating__button _like',r=n["if"].call(t,(r=t&&t.votes,null==r||r===!1?r:r.likes),{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+='" data-action="like">'+h((s=n.Icon||t&&t.Icon,l={hash:{"class":"discountRating__icon"},data:i},s?s.call(t,"rating_like",l):d.call(t,"Icon","rating_like",l)))+h((r=t&&t.votes,r=null==r||r===!1?r:r.likes,typeof r===p?r.apply(t):r))+'</span><span class="discountRating__button _dislike',r=n["if"].call(t,(r=t&&t.votes,null==r||r===!1?r:r.dislikes),{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+='" data-action="dislike">'+h((s=n.Icon||t&&t.Icon,l={hash:{"class":"discountRating__icon"},data:i},s?s.call(t,"rating_dislike",l):d.call(t,"Icon","rating_dislike",l)))+h((r=t&&t.votes,r=null==r||r===!1?r:r.dislikes,typeof r===p?r.apply(t):r))+"</span>"},this.jst_modules=this.jst_modules||{},this.jst_modules.discountsCard=this.jst_modules.discountsCard||{},this.jst_modules.discountsCard.discountsCard=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<h1 class="discountsCard__headerTitle">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===L?i.call(e,{hash:{},data:t}):i),o+=I(a)+"</h1>"}function r(e,t,a){var i,o,r,d="";return d+='<article class="discountsCard__discount ',i=n["if"].call(e,e&&e.minimized,{hash:{},inverse:S.noop,fn:S.program(4,s,t),data:t}),(i||0===i)&&(d+=i),d+=" ",i=n["if"].call(e,e&&e.current,{hash:{},inverse:S.noop,fn:S.program(6,l,t),data:t}),(i||0===i)&&(d+=i),d+='" data-id=',(o=n.id)?i=o.call(e,{hash:{},data:t}):(o=e&&e.id,i=typeof o===L?o.call(e,{hash:{},data:t}):o),d+=I(i)+'><div class="discountsCard__image" style="background-image: url(',(o=n.cover)?i=o.call(e,{hash:{},data:t}):(o=e&&e.cover,i=typeof o===L?o.call(e,{hash:{},data:t}):o),d+=I(i)+");",i=n["if"].call(e,e&&e.coverTop,{hash:{},inverse:S.noop,fn:S.program(8,c,t),data:t}),(i||0===i)&&(d+=i),d+='"></div><header class="discountsCard__discountTitle">',(o=n.title)?i=o.call(e,{hash:{},data:t}):(o=e&&e.title,i=typeof o===L?o.call(e,{hash:{},data:t}):o),d+=I(i)+'</header><div class="discountsCard__discountDescription _preview">',(o=n.shortText)?i=o.call(e,{hash:{},data:t}):(o=e&&e.shortText,i=typeof o===L?o.call(e,{hash:{},data:t}):o),(i||0===i)&&(d+=i),i=n["if"].call(e,e&&e.canExpand,{hash:{},inverse:S.noop,fn:S.program(10,u,t),data:t}),(i||0===i)&&(d+=i),d+='</div><div class="discountsCard__discountDescription _full">',(o=n.descriptionHTML)?i=o.call(e,{hash:{},data:t}):(o=e&&e.descriptionHTML,i=typeof o===L?o.call(e,{hash:{},data:t}):o),(i||0===i)&&(d+=i),i=n["if"].call(e,e&&e.minimized,{hash:{},inverse:S.noop,fn:S.program(13,h,t),data:t}),(i||0===i)&&(d+=i),d+="</div>",i=n["if"].call(e,e&&e.showDetails,{hash:{},inverse:S.noop,fn:S.program(15,p,t),data:t}),(i||0===i)&&(d+=i),d+='<div class="discountsCard__discountTime">'+I((o=n.Icon||e&&e.Icon,r={hash:{"class":"discountsCard__discountTimeIcon"},data:t},o?o.call(e,"discountsCard_time",r):T.call(e,"Icon","discountsCard_time",r))),(o=n.formattedDate)?i=o.call(e,{hash:{},data:t}):(o=e&&e.formattedDate,i=typeof o===L?o.call(e,{hash:{},data:t}):o),d+=I(i)+"</div>",o=n.module||e&&e.module,r={hash:{},inverse:S.noop,fn:S.program(20,g,t),data:t},i=o?o.call(e,e&&e.discountRating,r):T.call(e,"module",e&&e.discountRating,r),(i||0===i)&&(d+=i),d+='<div class="discountsCard__discountShare"><span class="discountsCard__discountShareLink _type_social">'+I((o=n.Icon||e&&e.Icon,r={hash:{"class":"discountsCard__discountShareLinkIcon"},data:t},o?o.call(e,"discountsCard_share",r):T.call(e,"Icon","discountsCard_share",r)))+I((o=n._t||e&&e._t,r={hash:{},data:t},o?o.call(e,"Поделиться ссылкой",r):T.call(e,"_t","Поделиться ссылкой",r)))+'</span><div class="discountsCard__discountShareSection _type_social _hidden"><div class="discountsCard__discountShareSocial">',i=n.each.call(e,a&&a.socials,{hash:{},inverse:S.noop,fn:S.program(22,_,t),data:t}),(i||0===i)&&(d+=i),d+='</div><div class="discountsCard__discountShareUrl"><input type="text" class="discountsCard__discountShareUrlInput" value="'+I((o=n._t||a&&a._t,r={hash:{},data:t},o?o.call(e,"Загружаю...",r):T.call(e,"_t","Загружаю...",r)))+'"></div></div></div></article>'}function s(e,t){return"_minimized"}function l(e,t){return"_current"}function c(e,t){var a,i,o="";return o+=" background-position: 50% ",(i=n.coverTop)?a=i.call(e,{hash:{},data:t}):(i=e&&e.coverTop,a=typeof i===L?i.call(e,{hash:{},data:t}):i),o+=I(a)+"%;"}function u(e,t){var a,i,o,r="";return i=n.Link||e&&e.Link,o={hash:{"class":"discountsCard__discountDescriptionMore","data-id":e&&e.id},inverse:S.noop,fn:S.program(11,d,t),data:t},a=i?i.call(e,o):T.call(e,"Link",o),(a||0===a)&&(r+=a),r}function d(e,t){var a,i,o="";return o+=I((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Читать полностью",i):T.call(e,"_t","Читать полностью",i)))}function h(e,t){var a,i,o,r="";return r+='<span class="discountsCard__discountDescriptionLess" data-id=',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===L?i.call(e,{hash:{},data:t}):i),r+=I(a)+">"+I((i=n.Icon||e&&e.Icon,o={hash:{"class":"discountsCard__minimize"},data:t},i?i.call(e,"discountsCard_minimize",o):T.call(e,"Icon","discountsCard_minimize",o)))+"</span>"}function p(e,t){var a,i="";return i+='<small class="discountsCard__discountDetails">',a=n["if"].call(e,e&&e.details,{hash:{},inverse:S.noop,fn:S.program(16,f,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.source,{hash:{},inverse:S.noop,fn:S.program(18,m,t),data:t}),(a||0===a)&&(i+=a),i+="</small>"}function f(e,t){var a,i,o="";return(i=n.details)?a=i.call(e,{hash:{},data:t}):(i=e&&e.details,a=typeof i===L?i.call(e,{hash:{},data:t}):i),o+=I(a)+"&nbsp;\n                            "}function m(e,t){var a,i,o,r="";return r+=I((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Данные взяты с",o):T.call(e,"_t","Данные взяты с",o)))+'&nbsp;\n                                <a href="',(i=n.source)?a=i.call(e,{hash:{},data:t}):(i=e&&e.source,a=typeof i===L?i.call(e,{hash:{},data:t}):i),r+=I(a)+'" class="discountsCard__discountDetailsLink" target="_blank">',(i=n.source)?a=i.call(e,{hash:{},data:t}):(i=e&&e.source,a=typeof i===L?i.call(e,{hash:{},data:t}):i),r+=I(a)+"</a>.\n                            "}function g(e,t){var n="";return n+='<div class="discountsCard__ratingContainer">'+I(typeof e===L?e.apply(e):e)+"</div>"}function _(e,t){var a,i,o,r="";return r+='<span data-social="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===L?i.call(e,{hash:{},data:t}):i),r+=I(a)+'" class="discountsCard__discountShareSocialItem _',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===L?i.call(e,{hash:{},data:t}):i),r+=I(a)+'">'+I((i=n.Icon||e&&e.Icon,o={hash:{"class":"discountsCard__discountShareSocialItemIcon"},data:t},i?i.call(e,e&&e.icon,o):T.call(e,"Icon",e&&e.icon,o)))+"</span>"}function v(e,t){var a,i,o,r="";return r+='<li class="discountsCard__footerLinkWrap _adv">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.advLink,null==a||a===!1?a:a.href),target:"_blank","class":"discountsCard__footerLink"},inverse:S.noop,fn:S.program(25,y,t),data:t},a=i?i.call(e,o):T.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</li> "}function y(e,t){var a,i,o="";return o+=I((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Реклама в 2ГИС",i):T.call(e,"_t","Реклама в 2ГИС",i)))}function b(e,t){var a,i,o="";return o+=I((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Ошибка в данных",i):T.call(e,"_t","Ошибка в данных",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var k,w,x,C="",L="function",I=this.escapeExpression,T=n.helperMissing,S=this;return C+='<div class="discountsCard__scroller"><div class="discountsCard__scrollerIn _type_discounts"><div class="discountsCard__header">',w=n.Fix||t&&t.Fix,x={hash:{"class":"discountsCard__headerIn _type_discounts",tag:"header"},inverse:S.noop,fn:S.program(1,o,i),data:i},k=w?w.call(t,x):T.call(t,"Fix",x),(k||0===k)&&(C+=k),C+='</div><main class="discountsCard__content">',k=n.each.call(t,t&&t.discounts,{hash:{},inverse:S.noop,fn:S.programWithDepth(3,r,i,t),data:i}),(k||0===k)&&(C+=k),C+='</main><footer class="discountsCard__footer"><ul class="discountsCard__footerIn">',k=n["if"].call(t,t&&t.advLink,{hash:{},inverse:S.noop,fn:S.program(24,v,i),data:i}),(k||0===k)&&(C+=k),C+='<li class="discountsCard__footerLinkWrap _report">',w=n.Link||t&&t.Link,x={hash:{"class":"discountsCard__footerLink discountsCard__sendError"},inverse:S.noop,fn:S.program(27,b,i),data:i},k=w?w.call(t,x):T.call(t,"Link",x),(k||0===k)&&(C+=k),C+='</li></ul></footer><div class="discountsCard__header">'+I((w=n.Fix||t&&t.Fix,x={hash:{"class":"discountsCard__headerIn _type_fixed",tag:"header"},data:i},w?w.call(t,x):T.call(t,"Fix",x)))+"</div></div>",(w=n.Track)?k=w.call(t,{hash:{},data:i}):(w=t&&t.Track,k=typeof w===L?w.call(t,{hash:{},data:i}):w),C+=I(k)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.discountsPromo=this.jst_modules.discountsPromo||{},this.jst_modules.discountsPromo.discountsPromo=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="discountsPromo__area _top"><div class="discountsPromo__pointer discountsPromo__filterPointer _type_filter"><div class="discountsPromo__pointerTitle">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Все заведения со скидками",r):l.call(t,"_gg","Все заведения со скидками",r)))+'</div></div></div><div class="discountsPromo__area _bottom"><div class="discountsPromo__pointer discountsPromo__buttonPointer _type_button"><div class="discountsPromo__pointerTitle">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Нажмите кнопку",r):l.call(t,"_gg","Нажмите кнопку",r)))+'</div><div class="discountsPromo__pointerText">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"и мы покажем скидки",r):l.call(t,"_gg","и мы покажем скидки",r)))+"</div></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.discountsPromoEntry=this.jst_modules.discountsPromoEntry||{},this.jst_modules.discountsPromoEntry.discountsPromoEntry=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="discountsPromoEntry__icon"></div><div class="discountsPromoEntry__close"></div><div class="discountsPromoEntry__content">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Скидки в кафе и ресторанах города",r):l.call(t,"_gg","Скидки в кафе и ресторанах города",r)))+"</div>"+c((o=n.Link||t&&t.Link,r={hash:{target:"_blank","class":"_scheme_dark"},data:i},o?o.call(t,t&&t.linkText,r):l.call(t,"Link",t&&t.linkText,r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.download=this.jst_modules.download||{},this.jst_modules.download.download=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return i=n.Link||e&&e.Link,o={hash:{href:e&&e.desktopLink,target:"_blank","class":"_scheme_none download__button"},inverse:f.noop,fn:f.program(2,r,t),data:t},a=i?i.call(e,o):m.call(e,"Link",o),(a||0===a)&&(s+=a),s}function r(e,t){var a,i,o="";return o+='<span class="download__buttonText">',(i=n.titleBtn)?a=i.call(e,{hash:{},data:t}):(i=e&&e.titleBtn,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</span>"}function s(e,t){var a,i,o="";return o+='<div class="download__title">'+p((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Мобильная версия",i):m.call(e,"_t","Мобильная версия",i)))+"</div>"}function l(e,t){var a,i,o,r="";return r+='<a href="',(i=n.href)?a=i.call(e,{hash:{},data:t}):(i=e&&e.href,a=typeof i===h?i.call(e,{hash:{},data:t}):i),r+=p(a)+'" target="_blank" class="download__productsItemLink _',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===h?i.call(e,{hash:{},data:t}):i),r+=p(a)+'">'+p((i=n.Link||e&&e.Link,o={hash:{"class":"_scheme_dark _small"},data:t},i?i.call(e,e&&e.title,o):m.call(e,"Link",e&&e.title,o)))+"</a> "}function c(e,t){var a,i,o,r="";return r+='<div class="download__mobilePromo">'+p((i=n.Icon||e&&e.Icon,o={hash:{"class":"download__mobileIcon"},data:t},i?i.call(e,"download_mobile",o):m.call(e,"Icon","download_mobile",o))),i=n._ht||e&&e._ht,o={hash:{link__href:e&&e.href,link__class:"_scheme_dark download__mobilePromoLink",link__target:"_blank"},data:t},a=i?i.call(e,"%{Link Узнать больше о новом мобильном 2ГИС}",o):m.call(e,"_ht","%{Link Узнать больше о новом мобильном 2ГИС}",o),(a||0===a)&&(r+=a),r+="</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h="function",p=this.escapeExpression,f=this,m=n.helperMissing;return d+='<div class="download__overlay"></div><div class="download__popup">',u=n["if"].call(t,t&&t.showDownload,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(u||0===u)&&(d+=u),u=n.unless.call(t,t&&t.mobilePromo,{hash:{},inverse:f.noop,fn:f.program(4,s,i),data:i}),(u||0===u)&&(d+=u),d+='<div class="download__products">',u=n.each.call(t,t&&t.mobile,{hash:{},inverse:f.noop,fn:f.program(6,l,i),data:i}),(u||0===u)&&(d+=u),d+="</div>",u=n["if"].call(t,t&&t.mobilePromo,{hash:{},inverse:f.noop,fn:f.program(8,c,i),data:i}),(u||0===u)&&(d+=u),d+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.errorMsg=this.jst_modules.errorMsg||{},this.jst_modules.errorMsg.errorMsg=function(e,t,n,a,i){function o(e,t){var n,a="";return a+='<div  class="errorMsg__errorText">',n=typeof e===l?e.apply(e):e,(n||0===n)&&(a+=n),a+="</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l="function",c=this;return r=n.each.call(t,t&&t.errMessagesArray,{hash:{},inverse:c.noop,fn:c.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},this.jst_modules=this.jst_modules||{},this.jst_modules.eventCard=this.jst_modules.eventCard||{},this.jst_modules.eventCard.eventCard=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<li class="eventCard__paginationItem ',(i=n.dateMods)?a=i.call(e,{hash:{},data:t}):(i=e&&e.dateMods,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'" data-date="',(i=n.fullDate)?a=i.call(e,{hash:{},data:t}):(i=e&&e.fullDate,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'">',(i=n.monthDay)?a=i.call(e,{hash:{},data:t}):(i=e&&e.monthDay,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'<div class="eventCard__paginationItemDay">',(i=n.weekDay)?a=i.call(e,{hash:{},data:t}):(i=e&&e.weekDay,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</div></li>"}function r(e,t){var a,i;return p((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"KudaGo.com",i):f.call(e,"_gg","KudaGo.com",i)))}function s(e,t){var a,i;return p((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"ялюблюмоскву.рф",i):f.call(e,"_gg","ялюблюмоскву.рф",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h="function",p=this.escapeExpression,f=n.helperMissing,m=this;return d+='<div class="eventCard__scroller"><header class="eventCard__header"><h1 class="eventCard__headerTitle">'+p((c=n._gg||t&&t._gg,u={hash:{},data:i},c?c.call(t,"Москва, с Днём рождения!",u):f.call(t,"_gg","Москва, с Днём рождения!",u)))+'</h1><div class="eventCard__headerSocials"><button class="eventCard__headerSocialsItem _social_facebook">'+p((c=n.Icon||t&&t.Icon,u={hash:{"class":"eventCard__headerSocialsItemIcon"},data:i},c?c.call(t,"victory_shareFb",u):f.call(t,"Icon","victory_shareFb",u)))+'</button><button class="eventCard__headerSocialsItem _social_twitter">'+p((c=n.Icon||t&&t.Icon,u={hash:{"class":"eventCard__headerSocialsItemIcon"},data:i},c?c.call(t,"victory_shareTw",u):f.call(t,"Icon","victory_shareTw",u)))+'</button><button class="eventCard__headerSocialsItem _social_vkontakte">'+p((c=n.Icon||t&&t.Icon,u={hash:{"class":"eventCard__headerSocialsItemIcon"},data:i},c?c.call(t,"victory_shareVk",u):f.call(t,"Icon","victory_shareVk",u)))+'</button></div><h2 class="eventCard__headerSubTitle">',(c=n.mainTitle)?l=c.call(t,{hash:{},data:i}):(c=t&&t.mainTitle,l=typeof c===h?c.call(t,{hash:{},data:i}):c),(l||0===l)&&(d+=l),d+='</h2><ul class="eventCard__pagination">',l=n.each.call(t,t&&t.days,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+='</ul></header><div class="eventCard__content">'+p((c=n.p||t&&t.p,u={hash:{},data:i},c?c.call(t,"content",u):f.call(t,"p","content",u)))+'</div><div class="eventCard__copyright">'+p((c=n._gg||t&&t._gg,u={hash:{},data:i},c?c.call(t,"Источник ",u):f.call(t,"_gg","Источник ",u))),c=n.Link||t&&t.Link,u={hash:{href:"http://kudago.com/",target:"_blank","class":"_undashed"},inverse:m.noop,fn:m.program(3,r,i),data:i},l=c?c.call(t,u):f.call(t,"Link",u),(l||0===l)&&(d+=l),d+=",\n         ",c=n.Link||t&&t.Link,u={hash:{href:"http://xn--90acxcbgoyu6hch.xn--p1ai/",target:"_blank","class":"_undashed"},inverse:m.noop,fn:m.program(5,s,i),data:i},l=c?c.call(t,u):f.call(t,"Link",u),(l||0===l)&&(d+=l),d+="</div>",(c=n.Track)?l=c.call(t,{hash:{},data:i}):(c=t&&t.Track,l=typeof c===h?c.call(t,{hash:{},data:i}):c),d+=p(l)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.extraLayers=this.jst_modules.extraLayers||{},this.jst_modules.extraLayers.extraLayers=function(e,t,n,a,i){function o(e,t){return"_notification"}function r(e,t){var a,i,o="";return o+=h((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,e&&e.type,"listItem",i):d.call(e,"p",e&&e.type,"listItem",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d=n.helperMissing,h=this.escapeExpression,p=this,f="function";return u+='<div class="extraLayers__control ',s=n["if"].call(t,t&&t.newLayersLength,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+='"><div class="extraLayers__controlButton" data-new-layers="',(l=n.newLayersLength)?s=l.call(t,{hash:{},data:i}):(l=t&&t.newLayersLength,s=typeof l===f?l.call(t,{hash:{},data:i}):l),u+=h(s)+"\" title='"+h((l=n._pt||t&&t._pt,c={hash:{},data:i},l?l.call(t,"Контрол дополнительных слоев","Слои",c):d.call(t,"_pt","Контрол дополнительных слоев","Слои",c)))+"'>"+h((l=n.Preloader||t&&t.Preloader,c={hash:{"class":"extraLayers__preloader _scheme_lighten _small"},data:i},l?l.call(t,c):d.call(t,"Preloader",c)))+'</div><div class="extraLayers__layersWrap"><div class="extraLayers__layers">'+h((l=n.module||t&&t.module,c={hash:{},data:i},l?l.call(t,t&&t.extraLayersGinza,c):d.call(t,"module",t&&t.extraLayersGinza,c)))+'<ul class="extraLayers__list extraLayers__menu">',s=n.each.call(t,t&&t.layers,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(s||0===s)&&(u+=s),u+="</ul></div></div>"+h((l=n.module||t&&t.module,c={hash:{},data:i},l?l.call(t,t&&t.extraLayersGinzaPromo,c):d.call(t,"module",t&&t.extraLayersGinzaPromo,c)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.extraLayersCard=this.jst_modules.extraLayersCard||{},this.jst_modules.extraLayersCard.extraLayersCard=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n["if"].call(e,e&&e.address,{hash:{},inverse:I.program(4,s,t),fn:I.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var a,i,o="";return o+='<h1 class="_large extraLayersCard__headerTitle">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+"</h1>"}function s(e,t){var a,i,o,r="";return i=n.Link||e&&e.Link,o={hash:{tag:"h1","class":"_large extraLayersCard__headerTitle extraLayersCard__adressTitle _undashed"},inverse:I.noop,fn:I.program(5,l,t),data:t},a=i?i.call(e,o):T.call(e,"Link",o),(a||0===a)&&(r+=a),r}function l(e,t){var a,i,o="";return(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)}function c(e,t){var a,i,o,r="";return i=n.Link||e&&e.Link,o={hash:{tag:"div","class":"extraLayersCard__address extraLayersCard__adressTitle _undashed"},inverse:I.noop,fn:I.program(8,u,t),data:t},a=i?i.call(e,o):T.call(e,"Link",o),(a||0===a)&&(r+=a),r}function u(e,t){var a,i,o="";return(i=n.address)?a=i.call(e,{hash:{},data:t}):(i=e&&e.address,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)}function d(e,t){var n="";return n+='<div class="extraLayersCard__actions">'+L(typeof e===C?e.apply(e):e)+"</div>"}function h(e,t){var a,i,o,r="";return r+='<a href="',(i=n.previewUrl)?a=i.call(e,{hash:{},data:t}):(i=e&&e.previewUrl,a=typeof i===C?i.call(e,{hash:{},data:t}):i),r+=L(a)+'" class="extraLayersCard__photos">',a=n["if"].call(e,e&&e.previewUrl,{hash:{},inverse:I.noop,fn:I.program(13,p,t),data:t}),(a||0===a)&&(r+=a),r+='<div class="extraLayersCard__photosCount"><span class="extraLayersCard__photosCountNumber">',(i=n.photosCount)?a=i.call(e,{hash:{},data:t}):(i=e&&e.photosCount,a=typeof i===C?i.call(e,{hash:{},data:t}):i),r+=L(a)+"</span> "+L((i=n._nt||e&&e._nt,o={hash:{},data:t},i?i.call(e,"фото","фото","фото",e&&e.photosCount,o):T.call(e,"_nt","фото","фото","фото",e&&e.photosCount,o)))+"</div></a>"}function p(e,t){var a,i,o="";return o+='<div class="extraLayersCard__photosImg',a=n["if"].call(e,e&&e.dontPreloadPhoto,{hash:{},inverse:I.noop,fn:I.program(14,f,t),data:t}),(a||0===a)&&(o+=a),o+='" data-src="',(i=n.previewUrl)?a=i.call(e,{hash:{},data:t}):(i=e&&e.previewUrl,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+'" ',a=n["if"].call(e,e&&e.dontPreloadPhoto,{hash:{},inverse:I.noop,fn:I.program(16,m,t),data:t}),(a||0===a)&&(o+=a),o+="></div>"}function f(e,t){return" _loaded"}function m(e,t){var a,i,o="";return o+=" style=\"background-image: url('",(i=n.previewUrl)?a=i.call(e,{hash:{},data:t}):(i=e&&e.previewUrl,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+"')\""}function g(e,t){var a,i,o="";return(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===C?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o}function _(e,t){var a,i,o,r="";return r+='<div class="extraLayersCard__footerItem">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.advLink,null==a||a===!1?a:a.href),target:"_blank","class":"extraLayersCard__footerItemLink _type_adv _undashed"},inverse:I.noop,fn:I.program(21,v,t),data:t},a=i?i.call(e,o):T.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function v(e,t){var a,i,o="";return o+=L((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Реклама в 2ГИС",i):T.call(e,"_t","Реклама в 2ГИС",i)))}function y(e,t){var a,i,o="";return o+=L((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Ошибка в данных",i):T.call(e,"_t","Ошибка в данных",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var b,k,w,x="",C="function",L=this.escapeExpression,I=this,T=n.helperMissing;return x+='<div class="extraLayersCard__scroller"><div class="extraLayersCard__scrollerIn"><div class="extraLayersCard__content"><div class="extraLayersCard__headerWrapper">',k=n.Fix||t&&t.Fix,w={hash:{"class":"extraLayersCard__header _innerHeader",tag:"header"},inverse:I.noop,fn:I.program(1,o,i),data:i},b=k?k.call(t,w):T.call(t,"Fix",w),(b||0===b)&&(x+=b),x+="</div>",b=n["if"].call(t,t&&t.address,{hash:{},inverse:I.noop,fn:I.program(7,c,i),data:i}),(b||0===b)&&(x+=b),k=n.module||t&&t.module,w={hash:{},inverse:I.noop,fn:I.program(10,d,i),data:i},b=k?k.call(t,"cardActions",w):T.call(t,"module","cardActions",w),
(b||0===b)&&(x+=b),b=n["if"].call(t,t&&t.previewUrl,{hash:{},inverse:I.noop,fn:I.program(12,h,i),data:i}),(b||0===b)&&(x+=b),x+='<div class="extraLayersCard__text">',b=n["if"].call(t,t&&t.description,{hash:{},inverse:I.noop,fn:I.program(18,g,i),data:i}),(b||0===b)&&(x+=b),x+='</div></div><footer class="extraLayersCard__footer"><div class="extraLayersCard__footerContent">',b=n["if"].call(t,t&&t.advLink,{hash:{},inverse:I.noop,fn:I.program(20,_,i),data:i}),(b||0===b)&&(x+=b),x+='<div class="extraLayersCard__footerItem extraLayersCard__footerBugReport">',k=n.Link||t&&t.Link,w={hash:{"class":"\n                     extraLayersCard__footerItemLink\n                     _type_bugReport _undashed"},inverse:I.noop,fn:I.program(23,y,i),data:i},b=k?k.call(t,w):T.call(t,"Link",w),(b||0===b)&&(x+=b),x+="</div></div></footer></div>",(k=n.Track)?b=k.call(t,{hash:{},data:i}):(k=t&&t.Track,b=typeof k===C?k.call(t,{hash:{},data:i}):k),x+=L(b)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.extraLayersGinza=this.jst_modules.extraLayersGinza||{},this.jst_modules.extraLayersGinza.extraLayersGinza=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<div class="extraLayersGinza__icon">'+u((r=n.Icon||t&&t.Icon,s={hash:{},data:i},r?r.call(t,"extraLayers_ginzaProject",s):c.call(t,"Icon","extraLayers_ginzaProject",s)))+'</div><span class="extraLayersGinza__switcher"><input type="checkbox" id="ginzaID" class="extraLayersGinza__switcherInput"><label for="ginzaID" class="extraLayersGinza__switcherLabel"></label></span><span class="extraLayersGinza__layerName">',r=n._gg||t&&t._gg,s={hash:{},data:i},o=r?r.call(t,"Почувствуй лето в&nbsp;ресторанах&nbsp;Ginza&nbsp;Project!",s):c.call(t,"_gg","Почувствуй лето в&nbsp;ресторанах&nbsp;Ginza&nbsp;Project!",s),(o||0===o)&&(l+=o),l+=' <span id="ginzaID" class="link _scheme_dark _undashed extraLayersGinza__ginzaLink">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"Показать и выбрать в 2ГИС",s):c.call(t,"_gg","Показать и выбрать в 2ГИС",s)))+'</span></span><div class="extraLayersGinza__close"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.extras=this.jst_modules.extras||{},this.jst_modules.extras.extras=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="extras__group"><div class="extras__btn _withText _type_download" title="'+b((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Скачать",i):y.call(e,"_t","Скачать",i)))+'"><span class="extras__btnText">'+b((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Скачать",i):y.call(e,"_t","Скачать",i)))+"</span></div></div>"}function r(e,t){var a,i,o="";return o+='<div class="extras__btn _type_print" title="'+b((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Печать",i):y.call(e,"_t","Печать",i)))+'"></div>'}function s(e,t){var a,i,o,r="";return r+='<div class="extras__btn _type_whatsNew" data-news-count="'+b((a=e&&e.whatsNew,a=null==a||a===!1?a:a.newItemsCount,typeof a===k?a.apply(e):a))+'" title="'+b((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Новое в 2ГИС",o):y.call(e,"_gg","Новое в 2ГИС",o)))+'"></div>'}function l(e,t){var a,i="";return i+='<div class="extras__group _events">',a=n["if"].call(e,(a=e&&e.events,null==a||a===!1?a:a.presents2015),{hash:{},inverse:w.noop,fn:w.program(8,c,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.events,null==a||a===!1?a:a.summer),{hash:{},inverse:w.noop,fn:w.program(10,u,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.events,null==a||a===!1?a:a.award2015),{hash:{},inverse:w.noop,fn:w.program(12,d,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.events,null==a||a===!1?a:a.victory),{hash:{},inverse:w.noop,fn:w.program(14,h,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function c(e,t){var a,i,o="";return o+='<div class="extras__btn _type_gifts" title="'+b((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Новый год!",i):y.call(e,"_gg","Новый год!",i)))+'">'+b((a=n.Icon||e&&e.Icon,i={hash:{"class":"extras__btnIcon"},data:t},a?a.call(e,"extras_gifts",i):y.call(e,"Icon","extras_gifts",i)))+"</div>"}function u(e,t){var a,i,o="";return o+='<div class="extras__btn _type_summer" title="'+b((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Лето в городе!",i):y.call(e,"_gg","Лето в городе!",i)))+'">'+b((a=n.Icon||e&&e.Icon,i={hash:{"class":"extras__btnIcon"},data:t},a?a.call(e,"extras_summer",i):y.call(e,"Icon","extras_summer",i)))+"</div>"}function d(e,t){var a,i,o="";return o+='<div class="extras__btn _type_award" title="'+b((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Открытия года!",i):y.call(e,"_t","Открытия года!",i)))+'">'+b((a=n.Icon||e&&e.Icon,i={hash:{"class":"extras__btnIcon"},data:t},a?a.call(e,"extras_award",i):y.call(e,"Icon","extras_award",i)))+"</div>"}function h(e,t){var a,i,o="";return o+='<div class="extras__btn _type_victory" title="'+b((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"День победы!",i):y.call(e,"_gg","День победы!",i)))+'">'+b((a=n.Icon||e&&e.Icon,i={hash:{"class":"extras__btnIcon"},data:t},a?a.call(e,"victory_extras",i):y.call(e,"Icon","victory_extras",i)))+"</div>"}function p(e,t){var a,i,o,r="";return r+='<div class="extras__group _floors"><a href="',(i=n.floorListSeoLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.floorListSeoLink,a=typeof i===k?i.call(e,{hash:{},data:t}):i),r+=b(a)+'" class="extras__btn _type_floors" title="'+b((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Этажи",o):y.call(e,"_t","Этажи",o)))+'">'+b((i=n.Icon||e&&e.Icon,o={hash:{"class":"extras__btnIcon"},data:t},i?i.call(e,"extras_floors",o):y.call(e,"Icon","extras_floors",o)))+"</a></div>"}function f(e,t){var n,a="";return a+='<div class="extras__group _langSwitcher"><div class="extras__btn _type_langSwitcher">'+b((n=e&&e.languageSwitcher,n=null==n||n===!1?n:n.activeLanguage,typeof n===k?n.apply(e):n))+"</div></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var m,g,_,v="",y=n.helperMissing,b=this.escapeExpression,k="function",w=this;return m=n["if"].call(t,t&&t.showDownloadBtn,{hash:{},inverse:w.noop,fn:w.program(1,o,i),data:i}),(m||0===m)&&(v+=m),v+='<div class="extras__group _general"><div class="extras__btn _type_share" title="'+b((g=n._t||t&&t._t,_={hash:{},data:i},g?g.call(t,"Поделиться ссылкой",_):y.call(t,"_t","Поделиться ссылкой",_)))+'"></div><div class="extras__btn _type_feedback" title="'+b((g=n._t||t&&t._t,_={hash:{},data:i},g?g.call(t,"Обратная связь",_):y.call(t,"_t","Обратная связь",_)))+'"></div>',m=n["if"].call(t,t&&t.showPrint,{hash:{},inverse:w.noop,fn:w.program(3,r,i),data:i}),(m||0===m)&&(v+=m),m=n["if"].call(t,t&&t.whatsNew,{hash:{},inverse:w.noop,fn:w.program(5,s,i),data:i}),(m||0===m)&&(v+=m),v+='<div class="extras__btn _type_more" title="'+b((g=n._t||t&&t._t,_={hash:{},data:i},g?g.call(t,"Ещё",_):y.call(t,"_t","Ещё",_)))+'"></div></div>',m=n["if"].call(t,t&&t.events,{hash:{},inverse:w.noop,fn:w.program(7,l,i),data:i}),(m||0===m)&&(v+=m),m=n["if"].call(t,t&&t.floors,{hash:{},inverse:w.noop,fn:w.program(16,p,i),data:i}),(m||0===m)&&(v+=m),m=n["if"].call(t,t&&t.languageSwitcher,{hash:{},inverse:w.noop,fn:w.program(18,f,i),data:i}),(m||0===m)&&(v+=m),v+='<div class="extras__overlay"></div><nav class="extras__menu"></nav>'},this.jst_modules=this.jst_modules||{},this.jst_modules.favoriteShare=this.jst_modules.favoriteShare||{},this.jst_modules.favoriteShare.favoriteShare=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="favoriteShare__title">'+g((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Поделитесь подборкой с друзьями",i):m.call(e,"_t","Поделитесь подборкой с друзьями",i)))+"</div>"}function r(e,t){var a,i="";return a=n["if"].call(e,e&&e.vkontakte,{hash:{},inverse:_.noop,fn:_.program(4,s,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.twitter,{hash:{},inverse:_.noop,fn:_.program(6,l,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.facebook,{hash:{},inverse:_.noop,fn:_.program(8,c,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.odnoklassniki,{hash:{},inverse:_.noop,fn:_.program(10,u,t),data:t}),(a||0===a)&&(i+=a),i}function s(e,t){var a,i,o="";return o+='<li class="favoriteShare__item _type_vkontakte">'+g((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoriteShare__itemIcon"},data:t},a?a.call(e,"whatsNew_socials_vkontakte",i):m.call(e,"Icon","whatsNew_socials_vkontakte",i)))+"</li>"}function l(e,t){var a,i,o="";return o+='<li class="favoriteShare__item _type_twitter">'+g((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoriteShare__itemIcon"},data:t},a?a.call(e,"whatsNew_socials_twitter",i):m.call(e,"Icon","whatsNew_socials_twitter",i)))+"</li>"}function c(e,t){var a,i,o="";return o+='<li class="favoriteShare__item _type_facebook">'+g((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoriteShare__itemIcon"},data:t},a?a.call(e,"whatsNew_socials_facebook",i):m.call(e,"Icon","whatsNew_socials_facebook",i)))+"</li>"}function u(e,t){var a,i,o="";return o+='<li class="favoriteShare__item _type_odnoklassniki">'+g((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoriteShare__itemIcon"},data:t},a?a.call(e,"whatsNew_socials_odnoklassniki",i):m.call(e,"Icon","whatsNew_socials_odnoklassniki",i)))+"</li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h,p,f="",m=n.helperMissing,g=this.escapeExpression,_=this,v="function";return f+='<span class="favoriteShare__close">'+g((h=n.Icon||t&&t.Icon,p={hash:{"class":"favoriteShare__closeIcon"},data:i},h?h.call(t,"ui_close",p):m.call(t,"Icon","ui_close",p)))+"</span>",d=n.unless.call(t,t&&t.compactMode,{hash:{},inverse:_.noop,fn:_.program(1,o,i),data:i}),(d||0===d)&&(f+=d),f+='<ul class="favoriteShare__list">',d=n.each.call(t,t&&t.socials,{hash:{},inverse:_.noop,fn:_.program(3,r,i),data:i}),(d||0===d)&&(f+=d),f+='</ul><div class="favoriteShare__link"><input type="text" value="',(h=n.shortUrl)?d=h.call(t,{hash:{},data:i}):(h=t&&t.shortUrl,d=typeof h===v?h.call(t,{hash:{},data:i}):h),f+=g(d)+'" class="favoriteShare__linkInput"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.favoriteTools=this.jst_modules.favoriteTools||{},this.jst_modules.favoriteTools.favoriteTools=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<ul class="favoriteTools__group">',a=n.each.call(e,e,{hash:{},inverse:b.noop,fn:b.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function r(e,t){var a,i="";return a=n["if"].call(e,e&&e.changeCover,{hash:{},inverse:b.noop,fn:b.program(3,s,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.rename,{hash:{},inverse:b.noop,fn:b.program(5,l,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e["delete"],{hash:{},inverse:b.noop,fn:b.program(7,c,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.share,{hash:{},inverse:b.noop,fn:b.program(9,u,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.shared,{hash:{},inverse:b.noop,fn:b.program(11,d,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.unshare,{hash:{},inverse:b.noop,fn:b.program(13,h,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.description,{hash:{},inverse:b.noop,fn:b.program(15,p,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.subscribe,{hash:{},inverse:b.noop,fn:b.program(17,f,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.unsubscribe,{hash:{},inverse:b.noop,fn:b.program(19,m,t),data:t}),(a||0===a)&&(i+=a),i}function s(e,t){var a,i,o="";return o+='<li\n                    class="favoriteTools__item _type_changeCover"\n                    title="'+y((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Изменить обложку",i):v.call(e,"_t","Изменить обложку",i)))+'"\n                >'+y((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoriteTools__icon"},data:t},a?a.call(e,"favorites_addCover",i):v.call(e,"Icon","favorites_addCover",i)))+"</li>"}function l(e,t){var a,i,o="";return o+='<li\n                    class="favoriteTools__item _type_rename"\n                    title="'+y((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Переименовать",i):v.call(e,"_t","Переименовать",i)))+'"\n                >'+y((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoriteTools__icon"},data:t},a?a.call(e,"favorites_edit",i):v.call(e,"Icon","favorites_edit",i)))+"</li>"}function c(e,t){var a,i,o="";return o+='<li\n                    class="favoriteTools__item _type_delete"\n                    title="'+y((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Удалить",i):v.call(e,"_t","Удалить",i)))+'"\n                >'+y((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoriteTools__icon"},data:t},a?a.call(e,"favorites_delete",i):v.call(e,"Icon","favorites_delete",i)))+"</li>"}function u(e,t){var a,i,o="";return o+='<li\n                    class="favoriteTools__item _type_share"\n                    title="'+y((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Поделиться",i):v.call(e,"_t","Поделиться",i)))+'"\n                >'+y((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoriteTools__icon"},data:t},a?a.call(e,"favorites_share",i):v.call(e,"Icon","favorites_share",i)))+"</li>"}function d(e,t){var a,i,o="";return o+='<li\n                    class="favoriteTools__item _type_shared"\n                    title="'+y((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Поделиться",i):v.call(e,"_t","Поделиться",i)))+'"\n                >'+y((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoriteTools__icon"},data:t},a?a.call(e,"favorites_share",i):v.call(e,"Icon","favorites_share",i)))+"</li>"}function h(e,t){var a,i,o="";return o+='<li\n                    class="favoriteTools__item _type_unshare"\n                    title="'+y((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Отменить доступ",i):v.call(e,"_t","Отменить доступ",i)))+'"\n                >'+y((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoriteTools__icon"},data:t},a?a.call(e,"favorites_share",i):v.call(e,"Icon","favorites_share",i)))+"</li>"}function p(e,t){var a,i,o="";return o+='<li\n                    class="favoriteTools__item _type_description"\n                    title="'+y((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Добавить описание",i):v.call(e,"_t","Добавить описание",i)))+'"\n                >'+y((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoriteTools__icon"},data:t},a?a.call(e,"favorites_note",i):v.call(e,"Icon","favorites_note",i)))+"</li>"}function f(e,t){var a,i,o="";return o+='<li\n                    class="favoriteTools__item _type_subscribe"\n                    title="'+y((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Подписаться",i):v.call(e,"_t","Подписаться",i)))+'"\n                >'+y((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoriteTools__icon"},data:t},a?a.call(e,"favorites_heart",i):v.call(e,"Icon","favorites_heart",i)))+"</li>"}function m(e,t){var a,i,o="";return o+='<li\n                    class="favoriteTools__item _type_unsubscribe"\n                    title="'+y((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Отписаться",i):v.call(e,"_t","Отписаться",i)))+'"\n                >'+y((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoriteTools__icon"},data:t},a?a.call(e,"favorites_heart",i):v.call(e,"Icon","favorites_heart",i)))+"</li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var g,_="",v=n.helperMissing,y=this.escapeExpression,b=this;return g=n.each.call(t,t&&t.groups,{hash:{},inverse:b.noop,fn:b.program(1,o,i),data:i}),(g||0===g)&&(_+=g),_},this.jst_modules=this.jst_modules||{},this.jst_modules.favorites=this.jst_modules.favorites||{},this.jst_modules.favorites.favorites=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="favorites__error">'+q((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e&&e.error,i):z.call(e,"module",e&&e.error,i)))+"</div>"}function r(e,t){var a,i,o="";return o+='<div class="favorites__scroll"><header class="favorites__header">',a=n["if"].call(e,e&&e.collectionLoading,{hash:{},inverse:U.program(6,l,t),fn:U.program(4,s,t),data:t}),(a||0===a)&&(o+=a),o+='</header><div class="favorites__body">',a=n["if"].call(e,e&&e.listLoading,{hash:{},inverse:U.program(38,S,t),fn:U.program(4,s,t),data:t}),(a||0===a)&&(o+=a),a=n["if"].call(e,e&&e.mediaModeChanging,{hash:{},inverse:U.noop,fn:U.program(44,M,t),data:t}),(a||0===a)&&(o+=a),o+="</div>",(i=n.Track)?a=i.call(e,{hash:{},data:t}):(i=e&&e.Track,a=typeof i===$?i.call(e,{hash:{},data:t}):i),o+=q(a)+"</div>",a=n["if"].call(e,(a=e&&e.collection,null==a||a===!1?a:a.is_owned),{hash:{},inverse:U.noop,fn:U.program(46,A,t),data:t}),(a||0===a)&&(o+=a),o}function s(e,t){var a,i,o="";return o+=q((a=n.Preloader||e&&e.Preloader,i={hash:{"class":"_scheme_lighten favorites__preloader"},data:t},a?a.call(e,i):z.call(e,"Preloader",i)))}function l(e,t){var a,i="";return a=n["if"].call(e,e&&e.collectionLoaded,{hash:{},inverse:U.noop,fn:U.program(7,c,t),data:t}),(a||0===a)&&(i+=a),i}function c(e,t){var a,i="";return i+='<div class="favorites__headerTop"><h2 class="favorites__title">',a=n["if"].call(e,(a=e&&e.collection,null==a||a===!1?a:a.title),{hash:{},inverse:U.program(10,d,t),fn:U.program(8,u,t),data:t}),(a||0===a)&&(i+=a),i+="</h2>",a=n["if"].call(e,e&&e.listLoading,{hash:{},inverse:U.program(14,p,t),fn:U.program(12,h,t),data:t}),(a||0===a)&&(i+=a),i+="</div>",a=n["if"].call(e,(a=e&&e.collection,null==a||a===!1?a:a.description),{hash:{},inverse:U.noop,fn:U.program(17,m,t),data:t}),(a||0===a)&&(i+=a),a=n.unless.call(e,(a=e&&e.collection,null==a||a===!1?a:a.is_owned),{hash:{},inverse:U.noop,fn:U.program(19,g,t),data:t}),(a||0===a)&&(i+=a),i}function u(e,t){var n,a="";return a+=q((n=e&&e.collection,n=null==n||n===!1?n:n.title,typeof n===$?n.apply(e):n))}function d(e,t){var a,i,o="";return o+=q((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Избранное",i):z.call(e,"_t","Избранное",i)))}function h(e,t){var a,i,o="";return o+=q((a=n.Preloader||e&&e.Preloader,i={hash:{"class":"_scheme_lighten _small favorites__preloader"},data:t},a?a.call(e,i):z.call(e,"Preloader",i)))}function p(e,t){var a,i="";return a=n.unless.call(e,e&&e.listLoaded,{hash:{},inverse:U.noop,fn:U.program(15,f,t),data:t}),(a||0===a)&&(i+=a),i}function f(e,t){var a,i,o="";return o+=q((a=n.Icon||e&&e.Icon,i={hash:{"class":"favorites__warning _small"},data:t},a?a.call(e,"general-photos-warning",i):z.call(e,"Icon","general-photos-warning",i)))}function m(e,t){var n,a="";return a+='<div class="favorites__description">'+q((n=e&&e.collection,n=null==n||n===!1?n:n.description,typeof n===$?n.apply(e):n))+"</div>"}function g(e,t){var a,i,o,r="";return r+='<div class="favorites__headerFooter">',a=n["if"].call(e,(a=e&&e.collection,null==a||a===!1?a:a.is_owned),{hash:{},inverse:U.program(23,y,t),fn:U.program(20,_,t),data:t}),(a||0===a)&&(r+=a),r+='<div class="favorites__actions"><div class="favorites__subscribe\n                                    ',a=n["if"].call(e,(a=e&&e.collection,null==a||a===!1?a:a.is_owned),{hash:{},inverse:U.program(28,w,t),fn:U.program(26,k,t),data:t}),(a||0===a)&&(r+=a),r+='"\n\n                                    ',a=n.unless.call(e,(a=e&&e.collection,null==a||a===!1?a:a.is_owned),{hash:{},inverse:U.noop,fn:U.program(33,L,t),data:t}),(a||0===a)&&(r+=a),r+="\n                                >"+q((i=n.Icon||e&&e.Icon,o={hash:{"class":"favorites__actionIcon"},data:t},i?i.call(e,"favorites_follow",o):z.call(e,"Icon","favorites_follow",o)))+"</div></div></div>"}function _(e,t){var a,i,o,r="";return r+='<div class="favorites__edit"><span class="favorites__delete">'+q((i=n.Icon||e&&e.Icon,o={hash:{"class":"favorites__deleteIcon"},data:t},i?i.call(e,"favorites_delete",o):z.call(e,"Icon","favorites_delete",o)))+q((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Удалить",o):z.call(e,"_t","Удалить",o)))+"</span>",a=n["if"].call(e,(a=e&&e.collection,null==a||a===!1?a:a.is_shared),{hash:{},inverse:U.noop,fn:U.program(21,v,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function v(e,t){var a,i,o="";return o+='<span class="favorites__lock">'+q((a=n.Icon||e&&e.Icon,i={hash:{"class":"favorites__lockIcon"},data:t},a?a.call(e,"favorites_lock",i):z.call(e,"Icon","favorites_lock",i)))+q((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Закрыть доступ",i):z.call(e,"_t","Закрыть доступ",i)))+"</span>"}function y(e,t){var a,i="";return i+='<div class="favorites__user">',a=n["if"].call(e,(a=e&&e.collection,null==a||a===!1?a:a.user),{hash:{},inverse:U.noop,fn:U.program(24,b,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function b(e,t){var a,i,o,r="";return r+=q((i=n.module||e&&e.module,o={hash:{},data:t},i?i.call(e,(a=e&&e.collection,a=null==a||a===!1?a:a.user,null==a||a===!1?a:a.avatar),o):z.call(e,"module",(a=e&&e.collection,a=null==a||a===!1?a:a.user,null==a||a===!1?a:a.avatar),o)))+'<span class="favorites__userName">'+q((a=e&&e.collection,a=null==a||a===!1?a:a.user,a=null==a||a===!1?a:a.display_name,typeof a===$?a.apply(e):a))+"</span>"}function k(e,t){return"\n                                        _owned\n                                    "}function w(e,t){var a,i="";return i+="\n                                        ",a=n["if"].call(e,(a=e&&e.collection,null==a||a===!1?a:a.is_subscribed),{hash:{},inverse:U.program(31,C,t),fn:U.program(29,x,t),data:t}),(a||0===a)&&(i+=a),i+="\n                                    "}function x(e,t){return"\n                                            _unsubscribe\n                                        "}function C(e,t){return"\n                                            _subscribe\n                                        "}function L(e,t){var a,i="";return i+="\n                                        ",a=n["if"].call(e,(a=e&&e.collection,null==a||a===!1?a:a.is_subscribed),{hash:{},inverse:U.program(36,T,t),fn:U.program(34,I,t),data:t}),(a||0===a)&&(i+=a),i+="\n                                    "}function I(e,t){var a,i,o="";return o+='\n                                            \n                                            title="'+q((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Отписаться",i):z.call(e,"_t","Отписаться",i)))+'"\n                                        '}function T(e,t){var a,i,o="";return o+='\n                                            \n                                            title="'+q((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Подписаться",i):z.call(e,"_t","Подписаться",i)))+'"\n                                        '}function S(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.list,null==a||a===!1?a:a.length),{hash:{},inverse:U.program(42,j,t),fn:U.program(39,E,t),data:t}),(a||0===a)&&(i+=a),i}function E(e,t){var a,i="";return i+='<ul class="favorites__list">',a=n.each.call(e,e&&e.list,{hash:{},inverse:U.noop,fn:U.program(40,P,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function P(e,t){var a,i,o="";return o+=q((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):z.call(e,"module",e,i)))}function j(e,t){var a,i,o="";return o+='<div class="favorites__favoritesEmpty">'+q((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e&&e.favoritesEmpty,i):z.call(e,"module",e&&e.favoritesEmpty,i)))+"</div>"}function M(e,t){return'<div class="favorites__glass"></div>'}function A(e,t){var a,i="";return i+='<div class="favorites__mediaToggle',a=n["if"].call(e,e&&e.mediaModeChanging,{hash:{},inverse:U.noop,fn:U.program(47,D,t),data:t}),(a||0===a)&&(i+=a),i+='">',a=n["if"].call(e,e&&e.mediaModeChanging,{hash:{},inverse:U.program(49,R,t),fn:U.program(12,h,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function D(e,t){return" _mode_busy"}function R(e,t){var a,i="";return a=n["if"].call(e,e&&e.mediaMode,{hash:{},inverse:U.program(52,B,t),fn:U.program(50,N,t),data:t}),(a||0===a)&&(i+=a),i}function N(e,t){var a,i,o="";return o+=q((a=n.Icon||e&&e.Icon,i={hash:{"class":"favorites__mediaToggleIcon"},data:t},a?a.call(e,"favorites_simpleMode",i):z.call(e,"Icon","favorites_simpleMode",i)))}function B(e,t){var a,i,o="";return o+=q((a=n.Icon||e&&e.Icon,i={hash:{"class":"favorites__mediaToggleIcon"},data:t},a?a.call(e,"favorites_mediaMode",i):z.call(e,"Icon","favorites_mediaMode",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var F,O="",z=n.helperMissing,q=this.escapeExpression,$="function",U=this;return F=n["if"].call(t,t&&t.error,{hash:{},inverse:U.program(3,r,i),fn:U.program(1,o,i),data:i}),(F||0===F)&&(O+=F),O},this.jst_modules=this.jst_modules||{},this.jst_modules.favorites404=this.jst_modules.favorites404||{},this.jst_modules.favorites404.favorites404=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+=u((r=n.Icon||t&&t.Icon,s={hash:{"class":"favorites404__icon"},data:i},r?r.call(t,"favorites_ufo",s):c.call(t,"Icon","favorites_ufo",s)))+'<h2 class="favorites404__title">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Подборки больше нет",s):c.call(t,"_t","Подборки больше нет",s)))+'</h2><p class="favorites404__text">',r=n._t||t&&t._t,s={hash:{},data:i},o=r?r.call(t,"Автор удалил или скрыл</br>от&nbsp;посторонних свою подборку",s):c.call(t,"_t","Автор удалил или скрыл</br>от&nbsp;посторонних свою подборку",s),(o||0===o)&&(l+=o),l+="</p>"},this.jst_modules=this.jst_modules||{},this.jst_modules.favoritesContainer=this.jst_modules.favoritesContainer||{},this.jst_modules.favoritesContainer.favoritesContainer=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+=c((o=n.module||t&&t.module,r={hash:{},data:i},o?o.call(t,"favorites",r):l.call(t,"module","favorites",r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.favoritesEmpty=this.jst_modules.favoritesEmpty||{},this.jst_modules.favoritesEmpty.favoritesEmpty=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=m((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"В подборке пока пусто",i):f.call(e,"_t","В подборке пока пусто",i)))}function r(e,t){var a,i,o="";return o+=m((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"В подборках пока ничего нет",i):f.call(e,"_t","В подборках пока ничего нет",i)))}function s(e,t){var a,i="";return a=n["if"].call(e,e&&e.isOwn,{hash:{},inverse:g.noop,fn:g.program(6,l,t),data:t}),(a||0===a)&&(i+=a),i}function l(e,t){var a,i,o="";return o+=m((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Добавляйте любимые места и организации!",i):f.call(e,"_t","Добавляйте любимые места и организации!",i)))}function c(e,t){var a,i,o="";return o+=m((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Добавляйте любимые места и организации, составляйте подборки и делитесь ими с друзьями",i):f.call(e,"_t","Добавляйте любимые места и организации, составляйте подборки и делитесь ими с друзьями",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d,h,p="",f=n.helperMissing,m=this.escapeExpression,g=this;return p+=m((d=n.Icon||t&&t.Icon,h={hash:{"class":"favoritesEmpty__icon"},data:i},d?d.call(t,"favorites_empty",h):f.call(t,"Icon","favorites_empty",h)))+'<h2 class="favoritesEmpty__title">',u=n["if"].call(t,t&&t.isFavorites,{hash:{},inverse:g.program(3,r,i),fn:g.program(1,o,i),data:i}),(u||0===u)&&(p+=u),p+='</h2><p class="favoritesEmpty__text">',u=n["if"].call(t,t&&t.isFavorites,{hash:{},inverse:g.program(8,c,i),fn:g.program(5,s,i),data:i}),(u||0===u)&&(p+=u),p+="</p>"},this.jst_modules=this.jst_modules||{},this.jst_modules.favoritesItem=this.jst_modules.favoritesItem||{},this.jst_modules.favoritesItem.favoritesItem=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=j((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoritesItem__icon"},data:t},a?a.call(e,"favorites_pin",i):P.call(e,"Icon","favorites_pin",i)))}function r(e,t){var a,i="";return i+='<header class="favoritesItem__header" ',a=n["if"].call(e,e&&e.photo,{hash:{},inverse:A.noop,fn:A.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+='><div class="favoritesItem__reviews">',a=n["if"].call(e,e&&e.rating,{hash:{},inverse:A.noop,fn:A.program(6,l,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.reviewsCount,{hash:{},inverse:A.noop,fn:A.program(11,d,t),data:t}),(a||0===a)&&(i+=a),i+="</div></header>"}function s(e,t){var a,i,o="";return o+=' style="background-image: url(',(i=n.photo)?a=i.call(e,{hash:{},data:t}):(i=e&&e.photo,a=typeof i===M?i.call(e,{hash:{},data:t}):i),o+=j(a)+')" '}function l(e,t){var a,i="";return a=n["if"].call(e,e&&e.photo,{hash:{},inverse:A.program(9,u,t),fn:A.program(7,c,t),data:t}),(a||0===a)&&(i+=a),i}function c(e,t){var a,i,o="";return o+=j((a=n.Rating||e&&e.Rating,i={hash:{style:"hugeWhite","class":"favoritesItem__rating"},data:t},a?a.call(e,e&&e.rating,i):P.call(e,"Rating",e&&e.rating,i)))}function u(e,t){var a,i,o="";return o+=j((a=n.Rating||e&&e.Rating,i={hash:{style:"hugeGray","class":"favoritesItem__rating"},data:t},a?a.call(e,e&&e.rating,i):P.call(e,"Rating",e&&e.rating,i)))}function d(e,t){var a,i,o="";return o+='<div class="favoritesItem__reviewsCount">'+j((a=n._nt||e&&e._nt,i={hash:{},data:t},a?a.call(e,"%1 отзыв","%1 отзыва","%1 отзывов",e&&e.reviewsCount,i):P.call(e,"_nt","%1 отзыв","%1 отзыва","%1 отзывов",e&&e.reviewsCount,i)))+"</div>"}function h(e,t){var a,i,o,r="";return r+='<div class="favoritesItem__input"><textarea\n                class="favoritesItem__inputSelf _title"\n                placeholder="'+j((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Добавить название",o):P.call(e,"_t","Добавить название",o)))+'"\n                name="title"\n                maxlength="128"\n            >',(i=n.titleInputValue)?a=i.call(e,{hash:{},data:t}):(i=e&&e.titleInputValue,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+'</textarea><div class="favoritesItem__titleButtons">'+j((i=n.module||e&&e.module,o={hash:{},data:t},i?i.call(e,e&&e.titleButtons,o):P.call(e,"module",e&&e.titleButtons,o)))+"</div></div>"}function p(e,t){var a,i="";return a=n.unless.call(e,e&&e.titleEdit,{hash:{},inverse:A.noop,fn:A.program(16,f,t),data:t}),(a||0===a)&&(i+=a),i}function f(e,t){var a,i="";return a=n["if"].call(e,e&&e.rating,{hash:{},inverse:A.noop,fn:A.program(17,m,t),data:t}),(a||0===a)&&(i+=a),i}function m(e,t){var a,i,o="";return o+=j((a=n.Rating||e&&e.Rating,i={hash:{style:"smallBlue","class":"favoritesItem__rating _blue"},data:t},a?a.call(e,e&&e.rating,i):P.call(e,"Rating",e&&e.rating,i)))}function g(e,t){var a,i,o="";return o+='<div class="favoritesItem__title">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===M?i.call(e,{hash:{},data:t}):i),o+=j(a)+"</div>"}function _(e,t){var a,i,o="";return o+='<div class="favoritesItem__name">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===M?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function v(e,t){var a,i,o="";return o+='<div class="favoritesItem__address">',(i=n.address)?a=i.call(e,{hash:{},data:t}):(i=e&&e.address,a=typeof i===M?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function y(e,t){var a,i,o="";return o+='<div class="favoritesItem__desc">',(i=n.desc)?a=i.call(e,{hash:{},data:t}):(i=e&&e.desc,a=typeof i===M?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function b(e,t){var a,i,o="";return o+='<div class="favoritesItem__additionalText">',(i=n.additionalText)?a=i.call(e,{hash:{},data:t}):(i=e&&e.additionalText,a=typeof i===M?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function k(e,t){var a,i,o="";return o+='<div class="favoritesItem__description">',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===M?i.call(e,{hash:{},data:t}):i),o+=j(a)+"</div>"}function w(e,t){var a,i,o,r="";return r+='<div class="favoritesItem__input _description"><textarea\n                class="favoritesItem__inputSelf _description"\n                placeholder="'+j((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Добавить описание",o):P.call(e,"_t","Добавить описание",o)))+'"\n                name="description"\n                maxlength="1000"\n            >',(i=n.descriptionInputValue)?a=i.call(e,{hash:{},data:t}):(i=e&&e.descriptionInputValue,a=typeof i===M?i.call(e,{hash:{},data:t}):i),r+=j(a)+"</textarea>"+j((i=n.module||e&&e.module,o={hash:{},data:t},i?i.call(e,e&&e.descriptionButtons,o):P.call(e,"module",e&&e.descriptionButtons,o)))+"</div>";
}function x(e,t){var a,i="";return a=n["if"].call(e,e&&e.attrs,{hash:{},inverse:A.noop,fn:A.program(34,C,t),data:t}),(a||0===a)&&(i+=a),i}function C(e,t){var a,i="";return i+='<div class="favoritesItem__attrs">',a=n.each.call(e,e&&e.attrs,{hash:{},inverse:A.noop,fn:A.program(35,L,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function L(e,t){var n,a="";return a+='<span class="favoritesItem__attrsItem">',n=typeof e===M?e.apply(e):e,(n||0===n)&&(a+=n),a+="</span>"}function I(e,t){var a,i,o="";return o+='<div class="favoritesItem__tools">'+j((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e&&e.tools,i):P.call(e,"module",e&&e.tools,i)))+"</div>"}function T(e,t){var a,i,o="";return o+=j((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e&&e.deleteDialog,i):P.call(e,"module",e&&e.deleteDialog,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var S,E="",P=n.helperMissing,j=this.escapeExpression,M="function",A=this;return S=n.unless.call(t,t&&t.mediaMode,{hash:{},inverse:A.noop,fn:A.program(1,o,i),data:i}),(S||0===S)&&(E+=S),S=n["if"].call(t,t&&t.mediaMode,{hash:{},inverse:A.noop,fn:A.program(3,r,i),data:i}),(S||0===S)&&(E+=S),E+='<div class="favoritesItem__content">',S=n["if"].call(t,t&&t.titleEdit,{hash:{},inverse:A.noop,fn:A.program(13,h,i),data:i}),(S||0===S)&&(E+=S),S=n.unless.call(t,t&&t.mediaMode,{hash:{},inverse:A.noop,fn:A.program(15,p,i),data:i}),(S||0===S)&&(E+=S),S=n["if"].call(t,t&&t.title,{hash:{},inverse:A.noop,fn:A.program(19,g,i),data:i}),(S||0===S)&&(E+=S),S=n["if"].call(t,t&&t.name,{hash:{},inverse:A.noop,fn:A.program(21,_,i),data:i}),(S||0===S)&&(E+=S),S=n["if"].call(t,t&&t.address,{hash:{},inverse:A.noop,fn:A.program(23,v,i),data:i}),(S||0===S)&&(E+=S),S=n["if"].call(t,t&&t.desc,{hash:{},inverse:A.noop,fn:A.program(25,y,i),data:i}),(S||0===S)&&(E+=S),S=n["if"].call(t,t&&t.additionalText,{hash:{},inverse:A.noop,fn:A.program(27,b,i),data:i}),(S||0===S)&&(E+=S),S=n["if"].call(t,t&&t.description,{hash:{},inverse:A.noop,fn:A.program(29,k,i),data:i}),(S||0===S)&&(E+=S),S=n["if"].call(t,t&&t.descriptionEdit,{hash:{},inverse:A.noop,fn:A.program(31,w,i),data:i}),(S||0===S)&&(E+=S),S=n["if"].call(t,t&&t.mediaMode,{hash:{},inverse:A.noop,fn:A.program(33,x,i),data:i}),(S||0===S)&&(E+=S),E+="</div>",S=n["if"].call(t,t&&t.tools,{hash:{},inverse:A.noop,fn:A.program(37,I,i),data:i}),(S||0===S)&&(E+=S),S=n["if"].call(t,t&&t.deleteDialog,{hash:{},inverse:A.noop,fn:A.program(39,T,i),data:i}),(S||0===S)&&(E+=S),E},this.jst_modules=this.jst_modules||{},this.jst_modules.favoritesTooltip=this.jst_modules.favoritesTooltip||{},this.jst_modules.favoritesTooltip.favoritesTooltip=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="favoritesTooltip__close"></div>'+c((o=n.Icon||t&&t.Icon,r={hash:{"class":"favoritesTooltip__icon"},data:i},o?o.call(t,t&&t.icon,r):l.call(t,"Icon",t&&t.icon,r)))+'<div class="favoritesTooltip__text">'+c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,t&&t.textPartial,r):l.call(t,"p",t&&t.textPartial,r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.favoritesWidget=this.jst_modules.favoritesWidget||{},this.jst_modules.favoritesWidget.favoritesWidget=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+=c((o=n.module||t&&t.module,r={hash:{},data:i},o?o.call(t,"favoritesWidgetToggle",r):l.call(t,"module","favoritesWidgetToggle",r)))+c((o=n.module||t&&t.module,r={hash:{},data:i},o?o.call(t,"favoritesWidgetDropDown",r):l.call(t,"module","favoritesWidgetDropDown",r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.favoritesWidgetDropDown=this.jst_modules.favoritesWidgetDropDown||{},this.jst_modules.favoritesWidgetDropDown.favoritesWidgetDropDown=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=p((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):h.call(e,"module",e,i)))}function r(e,t){var a,i,o="";return o+='<form class="favoritesWidgetDropDown__createCollectionForm"><input\n                class="favoritesWidgetDropDown__createCollectionInput"\n                placeholder="'+p((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Новая подборка",i):h.call(e,"_t","Новая подборка",i)))+'"\n                type="text"/><button class="favoritesWidgetDropDown__createCollectionOk">'+p((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoritesWidgetDropDown__createCollectionOkIcon"},data:t},a?a.call(e,"favoritesWidget_ok",i):h.call(e,"Icon","favoritesWidget_ok",i)))+'</button><button class="favoritesWidgetDropDown__createCollectionCancel" type="button">'+p((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoritesWidgetDropDown__createCollectionCancelIcon"},data:t},a?a.call(e,"favoritesWidget_cancel",i):h.call(e,"Icon","favoritesWidget_cancel",i)))+"</button></form>"}function s(e,t){var a,i,o="";return o+='<div class="favoritesWidgetDropDown__setCreatingMode"><div class="favoritesWidgetDropDown__btnSetCreatingMode">'+p((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Создать подборку",i):h.call(e,"_t","Создать подборку",i)))+"</div></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h=n.helperMissing,p=this.escapeExpression,f=this;return d+='<div class="favoritesWidgetDropDown__glass"></div><div class="favoritesWidgetDropDown__content"><div class="favoritesWidgetDropDown__title">'+p((c=n._t||t&&t._t,u={hash:{},data:i},c?c.call(t,"Добавить в подборки",u):h.call(t,"_t","Добавить в подборки",u)))+"</div>",l=n.each.call(t,t&&t.items,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(l||0===l)&&(d+=l),l=n["if"].call(t,t&&t.creatingMode,{hash:{},inverse:f.program(5,s,i),fn:f.program(3,r,i),data:i}),(l||0===l)&&(d+=l),d+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.favoritesWidgetDropDownItem=this.jst_modules.favoritesWidgetDropDownItem||{},this.jst_modules.favoritesWidgetDropDownItem.favoritesWidgetDropDownItem=function(e,t,n,a,i){function o(e,t){var a,i,o="";return(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)}function r(e,t){var a,i,o="";return o+=d((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Избранное",i):h.call(e,"_t","Избранное",i)))}function s(e,t){var a,i,o="";return o+=d((a=n.Icon||e&&e.Icon,i={hash:{"class":"favoritesWidgetDropDownItem__checkedIcon"},data:t},a?a.call(e,"favoritesWidget_ok",i):h.call(e,"Icon","favoritesWidget_ok",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c="",u="function",d=this.escapeExpression,h=n.helperMissing,p=this;return l=n["if"].call(t,t&&t.title,{hash:{},inverse:p.program(3,r,i),fn:p.program(1,o,i),data:i}),(l||0===l)&&(c+=l),l=n["if"].call(t,t&&t.checked,{hash:{},inverse:p.noop,fn:p.program(5,s,i),data:i}),(l||0===l)&&(c+=l),c},this.jst_modules=this.jst_modules||{},this.jst_modules.favoritesWidgetToggle=this.jst_modules.favoritesWidgetToggle||{},this.jst_modules.favoritesWidgetToggle.favoritesWidgetToggle=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=c((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,e&&e.template,i):l.call(e,"p",e&&e.template,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l=n.helperMissing,c=this.escapeExpression,u=this;return r=n["if"].call(t,t&&t.template,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},this.jst_modules=this.jst_modules||{},this.jst_modules.feedback=this.jst_modules.feedback||{},this.jst_modules.feedback.feedback=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="feedback__popup"><div class="feedback__popupClose"></div>'+c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,t&&t.type,"form",r):l.call(t,"p",t&&t.type,"form",r)))+'</div><div class="feedback__overlay"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.filters=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+=c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,t&&t.template,"catalog",r):l.call(t,"p",t&&t.template,"catalog",r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.firmCard=this.jst_modules.firmCard||{},this.jst_modules.firmCard.firmCard=function(e,t,n,a,i){function o(e,t){var n="";return n+='<div class="firmCard__awardBadge">'+re(typeof e===oe?e.apply(e):e)+"</div>"}function r(e,t){var a,i,o="";return o+='<div class="firmCard__legal">',(i=n.legal)?a=i.call(e,{hash:{},data:t}):(i=e&&e.legal,a=typeof i===oe?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function s(e,t){var a,i="";return a=n["if"].call(e,e&&e.floorName,{hash:{},inverse:le.noop,fn:le.program(6,l,t),data:t}),(a||0===a)&&(i+=a),i}function l(e,t){var a,i,o,r="";return r+='<div class="firmCard__address _notClickable">',i=n.Link||e&&e.Link,o={hash:{"class":"firmCard__addressLink _undashed"},inverse:le.noop,fn:le.program(7,c,t),data:t},a=i?i.call(e,o):se.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function c(e,t){var a,i,o="";return o+=re((a=n._pt||e&&e._pt,i={hash:{},data:t},a?a.call(e,"Номер этажа","%1 этаж",e&&e.floorName,i):se.call(e,"_pt","Номер этажа","%1 этаж",e&&e.floorName,i)))}function u(e,t){var a,i="";return a=n["if"].call(e,e&&e.address,{hash:{},inverse:le.noop,fn:le.program(10,d,t),data:t}),(a||0===a)&&(i+=a),i}function d(e,t){var a,i,o,r="";return r+='<div\n                            class="firmCard__address',a=n["if"].call(e,(a=e&&e.address,null==a||a===!1?a:a.notClickable),{hash:{},inverse:le.noop,fn:le.program(11,h,t),data:t}),(a||0===a)&&(r+=a),r+='"\n                            data-lat="'+re((a=e&&e.address,a=null==a||a===!1?a:a.lat,typeof a===oe?a.apply(e):a))+'"\n                            data-lon="'+re((a=e&&e.address,a=null==a||a===!1?a:a.lon,typeof a===oe?a.apply(e):a))+'"\n                            >',i=n.Link||e&&e.Link,o={hash:{href:e&&e.seoLinkAddress,"class":"firmCard__addressLink _undashed"},inverse:le.noop,fn:le.program(13,p,t),data:t},a=i?i.call(e,o):se.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function h(e,t){return" _notClickable"}function p(e,t){var a,i,o="";return o+=re((a=n.p||e&&e.p,i={hash:{context:e&&e.address},data:t},a?a.call(e,"address",i):se.call(e,"p","address",i)))}function f(e,t){var a,i,o,r="";return r+='<div class="firmCard__filials">',i=n._hnt||e&&e._hnt,o={hash:{link__href:(a=e&&e.filials,null==a||a===!1?a:a.seoLink),link__class:"firmCard__filialsLink"},data:t},a=i?i.call(e,"У организации %{Link %1 филиал}","У организации %{Link %1 филиала}","У организации %{Link %1 филиалов}",(a=e&&e.filials,null==a||a===!1?a:a.count),o):se.call(e,"_hnt","У организации %{Link %1 филиал}","У организации %{Link %1 филиала}","У организации %{Link %1 филиалов}",(a=e&&e.filials,null==a||a===!1?a:a.count),o),(a||0===a)&&(r+=a),r+="</div>"}function m(e,t){var n="";return n+='<div class="firmCard__actions">'+re(typeof e===oe?e.apply(e):e)+"</div>"}function g(e,t){var a,i,o="";return o+=re((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"mediaButtons",i):se.call(e,"p","mediaButtons",i)))}function _(e,t){var a,i,o,r="";return r+='<a href="'+re((a=e&&e.photos,a=null==a||a===!1?a:a.seoLink,typeof a===oe?a.apply(e):a))+'" class="firmCard__photos">',a=n["if"].call(e,(a=e&&e.photos,null==a||a===!1?a:a.preview),{hash:{},inverse:le.noop,fn:le.program(22,v,t),data:t}),(a||0===a)&&(r+=a),r+='<div class="firmCard__photosCount"><span class="firmCard__photosCountNumber">'+re((a=e&&e.photos,a=null==a||a===!1?a:a.count,typeof a===oe?a.apply(e):a))+"</span> "+re((i=n._nt||e&&e._nt,o={hash:{},data:t},i?i.call(e,"фото","фото","фото",(a=e&&e.photos,null==a||a===!1?a:a.count),o):se.call(e,"_nt","фото","фото","фото",(a=e&&e.photos,null==a||a===!1?a:a.count),o)))+"</div></a>"}function v(e,t){var a,i="";return i+='<div class="firmCard__photosImg',a=n["if"].call(e,e&&e.dontPreloadPhoto,{hash:{},inverse:le.noop,fn:le.program(23,y,t),data:t}),(a||0===a)&&(i+=a),i+='" data-src="'+re((a=e&&e.photos,a=null==a||a===!1?a:a.preview,typeof a===oe?a.apply(e):a))+'"',a=n["if"].call(e,e&&e.dontPreloadPhoto,{hash:{},inverse:le.noop,fn:le.program(25,b,t),data:t}),(a||0===a)&&(i+=a),i+="></div>"}function y(e,t){return" _loaded"}function b(e,t){var n,a="";return a+=' style="background-image: url('+re((n=e&&e.photos,n=null==n||n===!1?n:n.preview,typeof n===oe?n.apply(e):n))+')"'}function k(e,t){var a,i,o="";return o+='<div class="firmCard__addPhotoControl">'+re((a=n.Icon||e&&e.Icon,i={hash:{"class":"firmCard__addPhotosIcon"},data:t},a?a.call(e,"photosUploader_smallControl",i):se.call(e,"Icon","photosUploader_smallControl",i)))+'<span class="firmCard__addPhotoControlName">'+re((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Добавить фото",i):se.call(e,"_t","Добавить фото",i)))+"</span></div>"}function w(e,t){var a,i,o,r="";return r+='<div class="firmCard__ads"><div class="firmCard__adsIn"><a href="'+re((a=e&&e.ads,a=null==a||a===!1?a:a.seoLink,typeof a===oe?a.apply(e):a))+'" class="firmCard__adsText">',a=e&&e.ads,a=null==a||a===!1?a:a.text,a=typeof a===oe?a.apply(e):a,(a||0===a)&&(r+=a),r+="</a>",a=n["if"].call(e,(a=e&&e.ads,null==a||a===!1?a:a.warning),{hash:{},inverse:le.noop,fn:le.program(30,x,t),data:t}),(a||0===a)&&(r+=a),r+=re((i=n.Icon||e&&e.Icon,o={hash:{"class":"firmCard__toggle _external"},data:t},i?i.call(e,"card_toggle",o):se.call(e,"Icon","card_toggle",o)))+"</div>",a=n["if"].call(e,(a=e&&e.ads,null==a||a===!1?a:a.link),{hash:{},inverse:le.noop,fn:le.program(32,C,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function x(e,t){var n,a="";return a+='<div class="firmCard__adsWarning">',n=e&&e.ads,n=null==n||n===!1?n:n.warning,n=typeof n===oe?n.apply(e):n,(n||0===n)&&(a+=n),a+="</div>"}function C(e,t){var n,a="";return a+='<div class="firmCard__adsLink"><a href="'+re((n=e&&e.ads,n=null==n||n===!1?n:n.link,n=null==n||n===!1?n:n.value,typeof n===oe?n.apply(e):n))+'" class="firmCard__adsLinkIn" target="_blank">',n=e&&e.ads,n=null==n||n===!1?n:n.link,n=null==n||n===!1?n:n.text,n=typeof n===oe?n.apply(e):n,(n||0===n)&&(a+=n),a+="</a></div>"}function L(e,t){var a,i,o="";return o+='<div class="firmCard__discounts">'+re((a=n.Icon||e&&e.Icon,i={hash:{"class":"firmCard__discountsIcon"},data:t},a?a.call(e,"card_discount",i):se.call(e,"Icon","card_discount",i)))+'<div class="firmCard__discountsTitle"></div><div class="firmCard__discountsDescription"><span class="firmCard__discountsText"></span><span class="firmCard__discountsMore"></span></div>'+re((a=n.Icon||e&&e.Icon,i={hash:{"class":"firmCard__toggle _external"},data:t},a?a.call(e,"card_toggle",i):se.call(e,"Icon","card_toggle",i)))+"</div>"}function I(e,t){var a,i="";return i+='<ul class="firmCard__payment">',a=n.each.call(e,e&&e.payment,{hash:{},inverse:le.noop,fn:le.program(37,T,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function T(e,t){var a,i,o="";return o+='<li class="firmCard__paymentItem">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===oe?i.call(e,{hash:{},data:t}):i),o+=re(a)+"</li>"}function S(e,t){var n="";return n+='<section class="firmCard__section _schedule">'+re(typeof e===oe?e.apply(e):e)+"</section>"}function E(e,t){var n="";return n+='<section class="firmCard__section _contact">'+re(typeof e===oe?e.apply(e):e)+"</section>"}function P(e,t){var a,i,o,r="";return r+='<section class="firmCard__section"><div class="firmCard__geo">',a=n["if"].call(e,(a=e&&e.geo,null==a||a===!1?a:a.photos),{hash:{},inverse:le.noop,fn:le.program(44,j,t),data:t}),(a||0===a)&&(r+=a),r+='<div\n                            class="firmCard__geoName',a=n["if"].call(e,(a=e&&e.address,null==a||a===!1?a:a.notClickable),{hash:{},inverse:le.noop,fn:le.program(11,h,t),data:t}),(a||0===a)&&(r+=a),r+='"\n                            data-lat="'+re((a=e&&e.address,a=null==a||a===!1?a:a.lat,typeof a===oe?a.apply(e):a))+'"\n                            data-lon="'+re((a=e&&e.address,a=null==a||a===!1?a:a.lon,typeof a===oe?a.apply(e):a))+'"\n                            >',i=n.Link||e&&e.Link,o={hash:{href:e&&e.seoLinkAddress,"class":"firmCard__geoNameLink","data-noclick":(a=e&&e.address,null==a||a===!1?a:a.notClickable)},inverse:le.noop,fn:le.program(13,p,t),data:t},a=i?i.call(e,o):se.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>",a=n["if"].call(e,(a=e&&e.geo,a=null==a||a===!1?a:a.comment,null==a||a===!1?a:a.length),{hash:{},inverse:le.noop,fn:le.program(46,M,t),data:t}),(a||0===a)&&(r+=a),a=n.each.call(e,(a=e&&e.geo,null==a||a===!1?a:a.nearStops),{hash:{},inverse:le.noop,fn:le.program(49,D,t),data:t}),(a||0===a)&&(r+=a),a=n.each.call(e,(a=e&&e.geo,null==a||a===!1?a:a.landmarks),{hash:{},inverse:le.noop,fn:le.program(54,B,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,(a=e&&e.geo,null==a||a===!1?a:a.facilities),{hash:{},inverse:le.noop,fn:le.program(57,O,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,(a=e&&e.geo,null==a||a===!1?a:a.parkings),{hash:{},inverse:le.noop,fn:le.program(60,q,t),data:t}),(a||0===a)&&(r+=a),r+="</div></section>"}function j(e,t){var n,a="";return a+='<a href="'+re((n=e&&e.geo,n=null==n||n===!1?n:n.photos,n=null==n||n===!1?n:n.seoLink,typeof n===oe?n.apply(e):n))+'" class="firmCard__geoPhotos" style="background-image: url('+re((n=e&&e.geo,n=null==n||n===!1?n:n.photos,n=null==n||n===!1?n:n.preview,typeof n===oe?n.apply(e):n))+');" data-count="'+re((n=e&&e.geo,n=null==n||n===!1?n:n.photos,n=null==n||n===!1?n:n.count,typeof n===oe?n.apply(e):n))+'"></a>'}function M(e,t){var a,i="";return i+='<div class="firmCard__geoComment">',a=n.each.call(e,(a=e&&e.geo,null==a||a===!1?a:a.comment),{hash:{},inverse:le.noop,fn:le.program(47,A,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function A(e,t){var n="";return n+='<p class="firmCard__geoCommentItem">'+re(typeof e===oe?e.apply(e):e)+"</p>"}function D(e,t){var a,i,o,r="";return r+='<div class="firmCard__nearStop" style="',a=n["if"].call(e,e&&e.color,{hash:{},inverse:le.noop,fn:le.program(50,R,t),data:t}),(a||0===a)&&(r+=a),r+='">',i=n.Link||e&&e.Link,o={hash:{href:e&&e.seoLink,"class":"firmCard__nearStopLink","data-id":e&&e.id,"data-type":e&&e.type},inverse:le.noop,fn:le.program(52,N,t),data:t},a=i?i.call(e,o):se.call(e,"Link",o),(a||0===a)&&(r+=a),r+='<span class="firmCard__nearStopComment">&nbsp;— '+re((i=n._i18n||e&&e._i18n,o={hash:{data:e&&e.distance},data:t},i?i.call(e,"DISTANCE",o):se.call(e,"_i18n","DISTANCE",o)))+"</span></div>"}function R(e,t){var a,i,o="";return o+="border-color: ",(i=n.color)?a=i.call(e,{hash:{},data:t}):(i=e&&e.color,a=typeof i===oe?i.call(e,{hash:{},data:t}):i),o+=re(a)+";"}function N(e,t){var a,i,o="";return o+='<span class="firmCard__nearStopName">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===oe?i.call(e,{hash:{},data:t}):i),o+=re(a)+"</span>"}function B(e,t){var a,i,o,r="";return r+='<div class="firmCard__landmark">',i=n.Link||e&&e.Link,o={hash:{href:e&&e.seoLink,"class":"firmCard__landmarkLink","data-id":e&&e.id,"data-type":e&&e.type,"data-station-id":e&&e.stationId,"data-subtype":e&&e.subtype},inverse:le.noop,fn:le.program(55,F,t),data:t},a=i?i.call(e,o):se.call(e,"Link",o),(a||0===a)&&(r+=a),r+='<span class="firmCard__landmarkArrow" style="',(i=n.rotateStyle)?a=i.call(e,{hash:{},data:t}):(i=e&&e.rotateStyle,a=typeof i===oe?i.call(e,{hash:{},data:t}):i),r+=re(a)+'">',(i=n.fallback)?a=i.call(e,{hash:{},data:t}):(i=e&&e.fallback,a=typeof i===oe?i.call(e,{hash:{},data:t}):i),r+=re(a)+"</span>"+re((i=n._i18n||e&&e._i18n,o={hash:{data:e&&e.distance},data:t},i?i.call(e,"DISTANCE",o):se.call(e,"_i18n","DISTANCE",o)))+"</div>"}function F(e,t){var a,i,o="";return o+='<span class="firmCard__landmarkName">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===oe?i.call(e,{hash:{},data:t}):i),o+=re(a)+"</span>"}function O(e,t){var a,i,o,r="";return r+='<div class="firmCard__facilities">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.geo,a=null==a||a===!1?a:a.facilities,null==a||a===!1?a:a.seoLink),"class":"firmCard__facilitiesLink"},inverse:le.noop,fn:le.program(58,z,t),data:t},a=i?i.call(e,o):se.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function z(e,t){var a,i,o="";return o+=re((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Доступно для инвалидов",i):se.call(e,"_t","Доступно для инвалидов",i)))}function q(e,t){var a,i,o,r="";return r+='<div class="firmCard__parkings">',i=n.Link||e&&e.Link,o={hash:{"class":"firmCard__parkingsLink"},inverse:le.noop,fn:le.program(61,$,t),data:t},a=i?i.call(e,o):se.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function $(e,t){var a,i,o="";return o+=re((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Найти парковки рядом",i):se.call(e,"_t","Найти парковки рядом",i)))}function U(e,t){var n,a="";return a+='<section class="firmCard__section"><div class="firmCard__review">',n=typeof e===oe?e.apply(e):e,(n||0===n)&&(a+=n),a+="</div></section>"}function H(e,t){var a,i="";return i+='<section class="firmCard__section"><ul class="firmCard__rubrics">',a=n.each.call(e,e&&e.rubrics,{hash:{},inverse:le.noop,fn:le.program(66,G,t),data:t}),(a||0===a)&&(i+=a),i+="</ul></section>"}function G(e,t){var a,i,o,r="";return r+='<li class="firmCard__rubricsItem" data-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===oe?i.call(e,{hash:{},data:t}):i),r+=re(a)+'">'+re((i=n.Link||e&&e.Link,o={hash:{href:e&&e.seoLinkRubric,"class":"firmCard__rubricsItemLink"},data:t},i?i.call(e,e&&e.name,o):se.call(e,"Link",e&&e.name,o)))+"</li>"}function W(e,t){var a,i="";return i+='<div class="firmCard__recoveryAds"',a=n["if"].call(e,e&&e.recoveryAdsRerender,{hash:{},inverse:le.noop,fn:le.program(69,V,t),data:t}),(a||0===a)&&(i+=a),i+=">",a=typeof e===oe?e.apply(e):e,(a||0===a)&&(i+=a),i+="</div>"}function V(e,t){return' data-rerender="1"'}function Z(e,t){var a,i,o,r="";return r+='<div class="firmCard__footerItem firmCard__footerOwner">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.privateLinks,a=null==a||a===!1?a:a.office,null==a||a===!1?a:a.href),target:"_blank","class":"firmCard__footerItemLink firmCard__footerOwnerLink"},inverse:le.noop,fn:le.program(72,Y,t),data:t},a=i?i.call(e,o):se.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function Y(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.privateLinks,a=null==a||a===!1?a:a.office,null==a||a===!1?a:a.isOwner),{hash:{},inverse:le.program(75,X,t),fn:le.program(73,K,t),data:t}),(a||0===a)&&(i+=a),i}function K(e,t){var a,i,o="";return o+=re((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Создать сайт в 2ГИС",i):se.call(e,"_gg","Создать сайт в 2ГИС",i)))}function X(e,t){var a,i,o="";return o+=re((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Я владелец",i):se.call(e,"_t","Я владелец",i)))}function J(e,t){var a,i,o,r="";return r+='<div class="firmCard__footerItem firmCard__footerAdv">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.privateLinks,a=null==a||a===!1?a:a.adv,null==a||a===!1?a:a.href),target:"_blank","class":"firmCard__footerItemLink firmCard__footerAdvLink"},inverse:le.noop,fn:le.program(78,Q,t),data:t},a=i?i.call(e,o):se.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function Q(e,t){var a,i,o="";return o+=re((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Реклама в 2ГИС",i):se.call(e,"_t","Реклама в 2ГИС",i)))}function ee(e,t){var a,i,o="";return o+=re((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Ошибка в данных",i):se.call(e,"_t","Ошибка в данных",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var te,ne,ae,ie="",oe="function",re=this.escapeExpression,se=n.helperMissing,le=this;return ie+='<div class="firmCard__scroller"><div class="firmCard__scrollerIn">'+re((ne=n.module||t&&t.module,ae={hash:{},data:i},ne?ne.call(t,"cardHeader",ae):se.call(t,"module","cardHeader",ae)))+'<div class="firmCard__content">',ne=n.module||t&&t.module,ae={hash:{},inverse:le.noop,fn:le.program(1,o,i),data:i},te=ne?ne.call(t,"awardBadge",ae):se.call(t,"module","awardBadge",ae),(te||0===te)&&(ie+=te),ie+='<section class="firmCard__section _primary">',te=n["if"].call(t,t&&t.legal,{hash:{},inverse:le.noop,fn:le.program(3,r,i),data:i}),(te||0===te)&&(ie+=te),te=n["if"].call(t,t&&t.shownInFloors,{hash:{},inverse:le.program(9,u,i),fn:le.program(5,s,i),data:i}),(te||0===te)&&(ie+=te),te=n["if"].call(t,t&&t.filials,{hash:{},inverse:le.noop,fn:le.program(15,f,i),data:i}),(te||0===te)&&(ie+=te),ie+=re((ne=n.module||t&&t.module,ae={hash:{},data:i},ne?ne.call(t,"microSchedule",ae):se.call(t,"module","microSchedule",ae))),ne=n.module||t&&t.module,ae={hash:{},inverse:le.noop,fn:le.program(17,m,i),data:i},te=ne?ne.call(t,"cardActions",ae):se.call(t,"module","cardActions",ae),(te||0===te)&&(ie+=te),ie+=re((ne=n.module||t&&t.module,ae={hash:{},data:i},ne?ne.call(t,"favoritesWidget",ae):se.call(t,"module","favoritesWidget",ae)))+'<div class="firmCard__phonesDropdown"></div><div class="firmCard__buttons">',te=n["with"].call(t,t&&t.mediaButtons,{hash:{},inverse:le.noop,fn:le.program(19,g,i),data:i}),(te||0===te)&&(ie+=te),ie+="</div>"+re((ne=n.module||t&&t.module,ae={hash:{},data:i},ne?ne.call(t,"promoMobile",ae):se.call(t,"module","promoMobile",ae))),te=n["if"].call(t,t&&t.photos,{hash:{},inverse:le.noop,fn:le.program(21,_,i),data:i}),(te||0===te)&&(ie+=te),te=n["if"].call(t,t&&t.photosUploaderControl,{hash:{},inverse:le.noop,fn:le.program(27,k,i),data:i}),(te||0===te)&&(ie+=te),te=n["if"].call(t,t&&t.ads,{hash:{},inverse:le.noop,fn:le.program(29,w,i),data:i}),(te||0===te)&&(ie+=te),te=n["if"].call(t,t&&t.discounts,{hash:{},inverse:le.noop,fn:le.program(34,L,i),data:i}),(te||0===te)&&(ie+=te),ie+='</section><section class="firmCard__section _attrs">'+re((ne=n.p||t&&t.p,ae={hash:{context:t&&t.attributes},data:i},ne?ne.call(t,"attributes",ae):se.call(t,"p","attributes",ae))),te=n["if"].call(t,(te=t&&t.payment,null==te||te===!1?te:te.length),{hash:{},inverse:le.noop,fn:le.program(36,I,i),data:i}),(te||0===te)&&(ie+=te),ie+="</section>",ne=n.module||t&&t.module,ae={hash:{},inverse:le.noop,fn:le.program(39,S,i),data:i},te=ne?ne.call(t,"schedule",ae):se.call(t,"module","schedule",ae),(te||0===te)&&(ie+=te),ne=n.module||t&&t.module,ae={hash:{},inverse:le.noop,fn:le.program(41,E,i),data:i},te=ne?ne.call(t,"contact",ae):se.call(t,"module","contact",ae),(te||0===te)&&(ie+=te),te=n["if"].call(t,t&&t.geo,{hash:{},inverse:le.noop,fn:le.program(43,P,i),data:i}),(te||0===te)&&(ie+=te),ne=n.module||t&&t.module,ae={hash:{},inverse:le.noop,fn:le.program(63,U,i),data:i},te=ne?ne.call(t,"firmCardReview",ae):se.call(t,"module","firmCardReview",ae),(te||0===te)&&(ie+=te),te=n["if"].call(t,t&&t.rubrics,{hash:{},inverse:le.noop,fn:le.program(65,H,i),data:i}),(te||0===te)&&(ie+=te),ne=n.module||t&&t.module,ae={hash:{},inverse:le.noop,fn:le.program(68,W,i),data:i},te=ne?ne.call(t,"recoveryAds",ae):se.call(t,"module","recoveryAds",ae),(te||0===te)&&(ie+=te),ie+='<div class="firmCard__proposals"></div></div><footer class="firmCard__footer"><div class="firmCard__footerContent">',te=n["if"].call(t,(te=t&&t.privateLinks,te=null==te||te===!1?te:te.office,null==te||te===!1?te:te.href),{hash:{},inverse:le.noop,fn:le.program(71,Z,i),data:i}),(te||0===te)&&(ie+=te),ie+=" ",te=n["if"].call(t,(te=t&&t.privateLinks,null==te||te===!1?te:te.adv),{hash:{},inverse:le.noop,fn:le.program(77,J,i),data:i}),(te||0===te)&&(ie+=te),ie+=' <div class="firmCard__footerItem firmCard__footerBugReport">',ne=n.Link||t&&t.Link,ae={hash:{"class":"firmCard__footerItemLink firmCard__footerBugReportLink"},inverse:le.noop,fn:le.program(80,ee,i),data:i},te=ne?ne.call(t,ae):se.call(t,"Link",ae),(te||0===te)&&(ie+=te),ie+="</div></div></footer></div>",(ne=n.Track)?te=ne.call(t,{hash:{},data:i}):(ne=t&&t.Track,te=typeof ne===oe?ne.call(t,{hash:{},data:i}):ne),ie+=re(te)+"</div>"+re((ne=n.module||t&&t.module,ae={hash:{},data:i},ne?ne.call(t,"jsonld",ae):se.call(t,"module","jsonld",ae)))},this.jst_modules=this.jst_modules||{},this.jst_modules.firmCardReview=this.jst_modules.firmCardReview||{},this.jst_modules.firmCardReview.firmCardReview=function(e,t,n,a,i){function o(e,t){var a,i,o,u="";return u+='<header class="firmCardReview__header">',a=n["if"].call(e,e&&e.rating,{hash:{},inverse:b.noop,fn:b.program(2,r,t),data:t}),(a||0===a)&&(u+=a),u+=" ",(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===y?i.call(e,{hash:{},data:t}):i),u+=v(a)+'</header><div class="firmCardReview__review',a=n["if"].call(e,(a=e&&e.text,null==a||a===!1?a:a.cut),{hash:{},inverse:b.noop,fn:b.program(4,s,t),data:t}),(a||0===a)&&(u+=a),a=n["if"].call(e,e&&e.source,{hash:{},inverse:b.noop,fn:b.program(6,l,t),data:t}),(a||0===a)&&(u+=a),u+='"><div class="firmCardReview__reviewInfo"><img src="'+v((a=e&&e.user,a=null==a||a===!1?a:a.image,typeof a===y?a.apply(e):a))+'" class="firmCardReview__reviewUserpic"><div class="firmCardReview__reviewName">'+v((a=e&&e.user,a=null==a||a===!1?a:a.name,typeof a===y?a.apply(e):a))+'</div><div class="firmCardReview__reviewMeta"><div class="firmCardReview__reviewMetaItem">',(i=n.time)?a=i.call(e,{hash:{},data:t}):(i=e&&e.time,a=typeof i===y?i.call(e,{hash:{},data:t}):i),u+=v(a)+"</div></div></div>",a=n["if"].call(e,(a=e&&e.text,a=null==a||a===!1?a:a.full,null==a||a===!1?a:a.length),{hash:{},inverse:b.noop,fn:b.program(8,c,t),data:t}),(a||0===a)&&(u+=a),a=n["if"].call(e,(a=e&&e.text,null==a||a===!1?a:a.cut),{hash:{},inverse:b.noop,fn:b.program(11,d,t),data:t}),(a||0===a)&&(u+=a),u+=v((i=n.Icon||e&&e.Icon,o={hash:{"class":"firmCardReview__toggle"},data:t},i?i.call(e,"card_toggle",o):_.call(e,"Icon","card_toggle",o)))+'</div><div class="firmCardReview__reviewFooter">',a=n["if"].call(e,(a=e&&e.reviewsLink,null==a||a===!1?a:a.text),{hash:{},inverse:b.noop,fn:b.program(13,h,t),data:t}),(a||0===a)&&(u+=a),u+="</div>"}function r(e,t){var a,i,o="";return o+=v((a=n.Rating||e&&e.Rating,i={hash:{style:"smallBlue","class":"firmCardReview__headerRating"},data:t},a?a.call(e,e&&e.rating,i):_.call(e,"Rating",e&&e.rating,i)))}function s(e,t){return" _expandable"}function l(e,t){var a,i,o="";return o+=" _source_",(i=n.source)?a=i.call(e,{hash:{},data:t}):(i=e&&e.source,a=typeof i===y?i.call(e,{hash:{},data:t}):i),o+=v(a)}function c(e,t){var a,i="";return i+='<div class="firmCardReview__reviewText _full">',a=n.each.call(e,(a=e&&e.text,null==a||a===!1?a:a.full),{hash:{},inverse:b.noop,fn:b.program(9,u,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function u(e,t){var n,a="";return a+='<p class="firmCardReview__reviewTextParagraph">',n=typeof e===y?e.apply(e):e,(n||0===n)&&(a+=n),a+="</p>"}function d(e,t){var n,a="";return a+='<div class="firmCardReview__reviewText _cut">'+v((n=e&&e.text,n=null==n||n===!1?n:n.cut,typeof n===y?n.apply(e):n))+"</div>"}function h(e,t){var a,i,o,r="";return r+=v((i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.reviewsLink,null==a||a===!1?a:a.href),"class":"_undashed firmCardReview__reviewFooterLink"},data:t},i?i.call(e,(a=e&&e.reviewsLink,null==a||a===!1?a:a.text),o):_.call(e,"Link",(a=e&&e.reviewsLink,null==a||a===!1?a:a.text),o)))}function p(e,t){var a,i="";return a=n["if"].call(e,e&&e.writeLink,{hash:{},inverse:b.noop,fn:b.program(16,f,t),data:t}),(a||0===a)&&(i+=a),i}function f(e,t){var a,i,o,r="";return i=n._hgg||e&&e._hgg,o={hash:{link__href:e&&e.writeLink,link__class:"firmCardReview__empty _undashed",link__target:"_blank"},data:t},a=i?i.call(e,"%{Link Оставить отзыв} на Флампе",o):_.call(e,"_hgg","%{Link Оставить отзыв} на Флампе",o),(a||0===a)&&(r+=a),r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var m,g="",_=n.helperMissing,v=this.escapeExpression,y="function",b=this;return m=n["if"].call(t,t&&t.hasReview,{hash:{},inverse:b.program(15,p,i),fn:b.program(1,o,i),data:i}),(m||0===m)&&(g+=m),g},this.jst_modules=this.jst_modules||{},this.jst_modules.floorList=this.jst_modules.floorList||{},this.jst_modules.floorList.floorList=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<li class="floorList__card">'+d((a=n.module||e&&e.module,
i={hash:{},data:t},a?a.call(e,e,i):u.call(e,"module",e,i)))+"</li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h=this;return c+='<div class="floorList__scroller"><div class="floorList__scrollerIn"><div class="floorList__header"><div class="floorList__title">',s=n._t||t&&t._t,l={hash:{},data:i},r=s?s.call(t,"Детальный план<br>вашего шопинга",l):u.call(t,"_t","Детальный план<br>вашего шопинга",l),(r||0===r)&&(c+=r),c+='</div><div class="floorList__description">',s=n._t||t&&t._t,l={hash:{},data:i},r=s?s.call(t,"Посмотрите, на каком этаже нужные магазины,<br>найдите банкомат и узнайте короткий путь<br>до фудкорта. Вы точно не потеряетесь.",l):u.call(t,"_t","Посмотрите, на каком этаже нужные магазины,<br>найдите банкомат и узнайте короткий путь<br>до фудкорта. Вы точно не потеряетесь.",l),(r||0===r)&&(c+=r),c+='</div></div><div class="floorList__content"><ul class="floorList__cards">',r=n.each.call(t,t&&t.cards,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+="</ul>"+d((s=n.Preloader||t&&t.Preloader,l={hash:{"class":"floorList__loader _scheme_circles"},data:i},s?s.call(t,l):u.call(t,"Preloader",l)))+'<div class="floorList__pagination">'+d((s=n.module||t&&t.module,l={hash:{},data:i},s?s.call(t,"pagination",l):u.call(t,"module","pagination",l)))+"</div></div></div>"+d((s=n.Track||t&&t.Track,l={hash:{"class":"_scheme_media"},data:i},s?s.call(t,l):u.call(t,"Track",l)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.floorSelect=this.jst_modules.floorSelect||{},this.jst_modules.floorSelect.floorSelect=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<li class="floorSelect__item',a=n["if"].call(e,e&&e.isLong,{hash:{},inverse:c.noop,fn:c.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+='" data-index="'+d((a=e&&e.index,typeof a===u?a.apply(e):a))+'">'+d((a=e&&e.name,typeof a===u?a.apply(e):a))+"</li>"}function r(e,t){return" _long"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c=this,u="function",d=this.escapeExpression;return l+='<div class="floorSelect__wrapper"><ul class="floorSelect__container">',s=n.each.call(t,t&&t.floors,{hash:{},inverse:c.noop,fn:c.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l+="</ul></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.floors=this.jst_modules.floors||{},this.jst_modules.floors.floors=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<div class="floors__canvasWrapper"><div class="floors__canvas"></div></div><div class="floors__close" title="'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Вернуться на карту",s):c.call(t,"_t","Вернуться на карту",s)))+'"></div><div class="floors__zoomControl">',r=n.module||t&&t.module,s={hash:{},data:i},o=r?r.call(t,"zoom",s):c.call(t,"module","zoom",s),(o||0===o)&&(l+=o),l+='</div><div class="floors__selectControl">',r=n.module||t&&t.module,s={hash:{},data:i},o=r?r.call(t,"floorSelect",s):c.call(t,"module","floorSelect",s),(o||0===o)&&(l+=o),l+='</div><div class="floors__rotationControl">',r=n.module||t&&t.module,s={hash:{},data:i},o=r?r.call(t,"rotate",s):c.call(t,"module","rotate",s),(o||0===o)&&(l+=o),l+='</div><div class="floors__floorUp" title="'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Наверх",s):c.call(t,"_t","Наверх",s)))+'"></div><div class="floors__floorDown" title="'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Вниз",s):c.call(t,"_t","Вниз",s)))+'"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.floorsDashboard=this.jst_modules.floorsDashboard||{},this.jst_modules.floorsDashboard.floorsDashboard=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="floorsDashboard__photosUploaderControl">'+d((a=n.Icon||e&&e.Icon,i={hash:{"class":"mediaCard__addPhotoIcon"},data:t},a?a.call(e,"photosUploader_addPhoto",i):u.call(e,"Icon","photosUploader_addPhoto",i)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h=this;return c+='<div class="floorsDashboard__controls"><div class="floorsDashboard__controlsButton _close">'+d((s=n.Icon||t&&t.Icon,l={hash:{},data:i},s?s.call(t,"ui_close",l):u.call(t,"Icon","ui_close",l)))+'</div><div class="floorsDashboard__controlsButton _maximize">'+d((s=n.Icon||t&&t.Icon,l={hash:{},data:i},s?s.call(t,"mediaMaximize",l):u.call(t,"Icon","mediaMaximize",l)))+'</div></div><div class="floorsDashboard__main">',r=n["if"].call(t,t&&t.photosUploaderAvailable,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+='<div class="floorsDashboard__scroller"><div class="floorsDashboard__wrapper">'+d((s=n.p||t&&t.p,l={hash:{},data:i},s?s.call(t,"cardContainer",l):u.call(t,"p","cardContainer",l)))+d((s=n.p||t&&t.p,l={hash:{},data:i},s?s.call(t,"cardFooter",l):u.call(t,"p","cardFooter",l)))+"</div>"+d((s=n.Preloader||t&&t.Preloader,l={hash:{"class":"floorsDashboard__spinner _scheme_circles"},data:i},s?s.call(t,l):u.call(t,"Preloader",l)))+d((s=n.Track||t&&t.Track,l={hash:{"class":"_scheme_media floorsDashboard__track"},data:i},s?s.call(t,l):u.call(t,"Track",l)))+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.floorsResults=this.jst_modules.floorsResults||{},this.jst_modules.floorsResults.floorsResults=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=d((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):u.call(e,"module",e,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h="function",p=this;return c+='<header class="floorsResults__header">',(s=n.title)?r=s.call(t,{hash:{},data:i}):(s=t&&t.title,r=typeof s===h?s.call(t,{hash:{},data:i}):s),c+=d(r)+'<div class="floorsResults__listHeaderCount">',(s=n.total)?r=s.call(t,{hash:{},data:i}):(s=t&&t.total,r=typeof s===h?s.call(t,{hash:{},data:i}):s),c+=d(r)+'</div></header><div class="floorsResults__clipper"><div class="floorsResults__scroller"><div class="floorsResults__content"><div class="floorsResults__list">',r=n.each.call(t,t&&t.miniCards,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+="</div>"+d((s=n.module||t&&t.module,l={hash:{},data:i},s?s.call(t,"pagination",l):u.call(t,"module","pagination",l)))+d((s=n.Preloader||t&&t.Preloader,l={hash:{"class":"_scheme_lighten floorsResults__loader"},data:i},s?s.call(t,l):u.call(t,"Preloader",l)))+"</div>",(s=n.Track)?r=s.call(t,{hash:{},data:i}):(s=t&&t.Track,r=typeof s===h?s.call(t,{hash:{},data:i}):s),c+=d(r)+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.floorsTooltip=this.jst_modules.floorsTooltip||{},this.jst_modules.floorsTooltip.floorsTooltip=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="floorsTooltip__title">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===f?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function r(e,t){var a,i,o="";return o+='<div class="floorsTooltip__subTitle">',(i=n.subTitle)?a=i.call(e,{hash:{},data:t}):(i=e&&e.subTitle,a=typeof i===f?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function s(e,t){var a,i,o,r="";return r+='<div class="floorsTooltip__rating">'+g((i=n.Rating||e&&e.Rating,o={hash:{style:"smallBlue","class":"floorsTooltip__ratingScale"},data:t},i?i.call(e,(a=e&&e.rating,null==a||a===!1?a:a.value),o):m.call(e,"Rating",(a=e&&e.rating,null==a||a===!1?a:a.value),o))),a=n["if"].call(e,(a=e&&e.rating,null==a||a===!1?a:a.count),{hash:{},inverse:_.program(8,c,t),fn:_.program(6,l,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function l(e,t){var a,i,o,r="";return r+='<div class="floorsTooltip__ratingText">'+g((i=n._nt||e&&e._nt,o={hash:{},data:t},i?i.call(e,"%1 отзыв","%1 отзыва","%1 отзывов",(a=e&&e.rating,null==a||a===!1?a:a.count),o):m.call(e,"_nt","%1 отзыв","%1 отзыва","%1 отзывов",(a=e&&e.rating,null==a||a===!1?a:a.count),o)))+"</div>"}function c(e,t){var a,i,o="";return o+='<div class="floorsTooltip__ratingText _inactive">'+g((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"нет отзывов",i):m.call(e,"_t","нет отзывов",i)))+"</div>"}function u(e,t){var a,i="";return i+='<ul class="floorsTooltip__attrs">',a=n.each.call(e,e&&e.attrs,{hash:{},inverse:_.noop,fn:_.program(11,d,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function d(e,t){var n="";return n+='<li class="floorsTooltip__attrsItem">'+g(typeof e===f?e.apply(e):e)+"</li> "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p="",f="function",m=n.helperMissing,g=this.escapeExpression,_=this;return p+='<div class="floorsTooltip__in">',h=n["if"].call(t,t&&t.title,{hash:{},inverse:_.noop,fn:_.program(1,o,i),data:i}),(h||0===h)&&(p+=h),h=n["if"].call(t,t&&t.subTitle,{hash:{},inverse:_.noop,fn:_.program(3,r,i),data:i}),(h||0===h)&&(p+=h),h=n["if"].call(t,t&&t.rating,{hash:{},inverse:_.noop,fn:_.program(5,s,i),data:i}),(h||0===h)&&(p+=h),h=n["if"].call(t,t&&t.attrs,{hash:{},inverse:_.noop,fn:_.program(10,u,i),data:i}),(h||0===h)&&(p+=h),p+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.forecast=this.jst_modules.forecast||{},this.jst_modules.forecast.forecast=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="forecast__today">',(i=n.today)?a=i.call(e,{hash:{},data:t}):(i=e&&e.today,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=m(a)+"</div>"}function r(e,t){var a,i,o="";return o+=m((a=n.p||e&&e.p,i={hash:{context:e&&e.current},data:t},a?a.call(e,"current",i):g.call(e,"p","current",i)))}function s(e,t){var a,i,o="";return o+=m((a=n.p||e&&e.p,i={hash:{context:e&&e.soon},data:t},a?a.call(e,"soon",i):g.call(e,"p","soon",i)))}function l(e,t){var a,i,o="";return o+=m((a=n.p||e&&e.p,i={hash:{context:e&&e.promo},data:t},a?a.call(e,"promo",i):g.call(e,"p","promo",i)))}function c(e,t){var a,i,o="";return o+=m((a=n.p||e&&e.p,i={hash:{context:e&&e.week},data:t},a?a.call(e,"week",i):g.call(e,"p","week",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d,h,p="",f="function",m=this.escapeExpression,g=n.helperMissing,_=this;return p+='<div class="forecast__scroller"><div class="forecast__scrollerIn"><div class="forecast__content"><h1 class="forecast__city">',(d=n.city)?u=d.call(t,{hash:{},data:i}):(d=t&&t.city,u=typeof d===f?d.call(t,{hash:{},data:i}):d),p+=m(u)+"</h1>",u=n["if"].call(t,t&&t.today,{hash:{},inverse:_.noop,fn:_.program(1,o,i),data:i}),(u||0===u)&&(p+=u),u=n["if"].call(t,t&&t.current,{hash:{},inverse:_.noop,fn:_.program(3,r,i),data:i}),(u||0===u)&&(p+=u),u=n["if"].call(t,(u=t&&t.soon,null==u||u===!1?u:u.length),{hash:{},inverse:_.noop,fn:_.program(5,s,i),data:i}),(u||0===u)&&(p+=u),u=n["if"].call(t,t&&t.promo,{hash:{},inverse:_.noop,fn:_.program(7,l,i),data:i}),(u||0===u)&&(p+=u),u=n["if"].call(t,(u=t&&t.week,null==u||u===!1?u:u.length),{hash:{},inverse:_.noop,fn:_.program(9,c,i),data:i}),(u||0===u)&&(p+=u),p+='</div><div class="forecast__copyright">',d=n._ht||t&&t._ht,h={hash:{link__class:"_undashed forecast__copyrightLink",link__target:"_blank",link__href:t&&t.copyrightHref},data:i},u=d?d.call(t,"Погодные данные предоставлены %{Link %1}",t&&t.copyrightDomain,h):g.call(t,"_ht","Погодные данные предоставлены %{Link %1}",t&&t.copyrightDomain,h),(u||0===u)&&(p+=u),p+="</div></div>",(d=n.Track)?u=d.call(t,{hash:{},data:i}):(d=t&&t.Track,u=typeof d===f?d.call(t,{hash:{},data:i}):d),p+=m(u)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.frame=this.jst_modules.frame||{},this.jst_modules.frame.frame=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n["if"].call(e,e&&e.isMinimizableOnPhone,{hash:{},inverse:g.program(4,s,t),fn:g.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var a,i,o="";return o+='<div class="frame__mobileMinimize">'+m((a=n.Icon||e&&e.Icon,i={hash:{"class":"frame__mobileMinimizeIcon"},data:t},a?a.call(e,"ui_control-go-to-map",i):f.call(e,"Icon","ui_control-go-to-map",i)))+"</div>"}function s(e,t){var a,i,o="";return o+='<div class="frame__mobileClose">'+m((a=n.Icon||e&&e.Icon,i={hash:{"class":"frame__mobileCloseIcon"},data:t},a?a.call(e,"ui_close-phone",i):f.call(e,"Icon","ui_close-phone",i)))+"</div>"}function l(e,t){return"<!--googleoff: index--><noindex>"}function c(e,t){return"</noindex><!--googleon: index-->"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d,h,p="",f=n.helperMissing,m=this.escapeExpression,g=this;return p+='<div class="frame__glass"></div><div class="frame__mover">'+m((d=n.Icon||t&&t.Icon,h={hash:{"class":"frame__moverIcon"},data:i},d?d.call(t,"ui_arrow-right",h):f.call(t,"Icon","ui_arrow-right",h)))+'</div><div class="frame__content"><div class="frame__controls"><div class="frame__controlsButton _back">'+m((d=n.Icon||t&&t.Icon,h={hash:{"class":"frame__mediaBackIcon"},data:i},d?d.call(t,"mediaBack",h):f.call(t,"Icon","mediaBack",h)))+m((d=n._t||t&&t._t,h={hash:{},data:i},d?d.call(t,"Назад",h):f.call(t,"_t","Назад",h)))+'</div><div class="frame__controlsButton _minimize">'+m((d=n.Icon||t&&t.Icon,h={hash:{},data:i},d?d.call(t,"ui_minimize",h):f.call(t,"Icon","ui_minimize",h)))+'</div><div class="frame__controlsButton _close">'+m((d=n.Icon||t&&t.Icon,h={hash:{},data:i},d?d.call(t,"ui_close",h):f.call(t,"Icon","ui_close",h)))+'</div><div class="frame__controlsButton _maximize">'+m((d=n.Icon||t&&t.Icon,h={hash:{},data:i},d?d.call(t,"mediaMaximize",h):f.call(t,"Icon","mediaMaximize",h)))+"</div>",u=n["if"].call(t,t&&t.isPhone,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(u||0===u)&&(p+=u),p+="</div>"+m((d=n.Preloader||t&&t.Preloader,h={hash:{"class":"_scheme_lighten frame__preloader"},data:i},d?d.call(t,h):f.call(t,"Preloader",h)))+m((d=n.Preloader||t&&t.Preloader,h={hash:{"class":"_scheme_circles frame__preloader"},data:i},d?d.call(t,h):f.call(t,"Preloader",h))),u=n["if"].call(t,t&&t.isNoindexFrame,{hash:{},inverse:g.noop,fn:g.program(6,l,i),data:i}),(u||0===u)&&(p+=u),p+=m((d=n.module||t&&t.module,h={hash:{},data:i},d?d.call(t,t&&t.activeModule,h):f.call(t,"module",t&&t.activeModule,h))),u=n["if"].call(t,t&&t.isNoindexFrame,{hash:{},inverse:g.noop,fn:g.program(8,c,i),data:i}),(u||0===u)&&(p+=u),p+='</div><div class="frame__resize"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.fromTo=this.jst_modules.fromTo||{},this.jst_modules.fromTo.fromTo=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s=n.helperMissing,l=this.escapeExpression;return l((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,t&&t.templateName,r):s.call(t,"p",t&&t.templateName,r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.gallery=this.jst_modules.gallery||{},this.jst_modules.gallery.gallery=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<h2 class="gallery__headerSubtitle">',(i=n.subtitle)?a=i.call(e,{hash:{},data:t}):(i=e&&e.subtitle,a=typeof i===d?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</h2>"}function r(e,t){var a,i,o="";return o+='<div class="gallery__photosUploaderWrapper _hidden">'+p((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,"photosUploader",i):h.call(e,"module","photosUploader",i)))+'</div><div class="gallery__addPhotoControl _hidden">'+p((a=n.Icon||e&&e.Icon,i={hash:{"class":"gallery__addPhotoIcon"},data:t},a?a.call(e,"photosUploader_addPhoto",i):h.call(e,"Icon","photosUploader_addPhoto",i)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d="function",h=n.helperMissing,p=this.escapeExpression,f=this;return u+='<div class="gallery__header"><h1 class="gallery__headerTitle">',(l=n.title)?s=l.call(t,{hash:{},data:i}):(l=t&&t.title,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=p(s)+"</h1>",s=n["if"].call(t,t&&t.subtitle,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+='<button class="gallery__close">'+p((l=n.Icon||t&&t.Icon,c={hash:{"class":"gallery__closeIcon"},data:i},l?l.call(t,"ui_close-phone",c):h.call(t,"Icon","ui_close-phone",c)))+'</button></div><div class="gallery__scrollerWrap"><div class="gallery__scroller"><div class="gallery__container">',s=n["if"].call(t,t&&t.photosUploaderAvailable,{hash:{},inverse:f.noop,fn:f.program(3,r,i),data:i}),(s||0===s)&&(u+=s),u+='<div class="gallery__list">'+p((l=n.module||t&&t.module,c={hash:{},data:i},l?l.call(t,"patchwork",c):h.call(t,"module","patchwork",c)))+"</div></div>"+p((l=n.Preloader||t&&t.Preloader,c={hash:{"class":"_scheme_lighten gallery__preloader"},data:i},l?l.call(t,c):h.call(t,"Preloader",c))),(l=n.Track)?s=l.call(t,{hash:{},data:i}):(l=t&&t.Track,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=p(s)+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.generalPhotos=this.jst_modules.generalPhotos||{},this.jst_modules.generalPhotos.generalPhotos=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<h2 class="generalPhotos__title"><div class="generalPhotos__titleText">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+"</div></h2>"}function r(e,t){var a,i="";return a=n["if"].call(e,e&&e.useCounter,{hash:{},inverse:g.noop,fn:g.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i}function s(e,t){var a,i,o,r="";return r+='<div class="generalPhotos__counter"><span class="generalPhotos__counterInnerCurrent">',(i=n.countCurrent)?a=i.call(e,{hash:{},data:t}):(i=e&&e.countCurrent,a=typeof i===p?i.call(e,{hash:{},data:t}):i),r+=f(a)+"</span> "+f((i=n._pt||e&&e._pt,o={hash:{},data:t},i?i.call(e,"Часть из общего количества","из",o):m.call(e,"_pt","Часть из общего количества","из",o)))+' <span class="generalPhotos__counterInnerCount">',(i=n.countAll)?a=i.call(e,{hash:{},data:t}):(i=e&&e.countAll,a=typeof i===p?i.call(e,{hash:{},data:t}):i),r+=f(a)+"</span></div>"}function l(e,t){var a,i,o="";return o+='<div class="generalPhotos__viewportLayerFallback"><img class="generalPhotos__viewportLayerFallbackImg" src="',(i=n.fallbackSrc)?a=i.call(e,{hash:{},data:t}):(i=e&&e.fallbackSrc,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+'"/></div>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u,d,h="",p="function",f=this.escapeExpression,m=n.helperMissing,g=this;return h+='<section class="generalPhotos__container" tabindex="1">',c=n["if"].call(t,t&&t.title,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(c||0===c)&&(h+=c),h+='<div class="generalPhotos__close">'+f((u=n.Icon||t&&t.Icon,d={hash:{"class":"generalPhotos__closeIcon"},data:i},u?u.call(t,"general-photos-close",d):m.call(t,"Icon","general-photos-close",d)))+"</div>",c=n["if"].call(t,t&&t.isPhone,{hash:{},inverse:g.noop,fn:g.program(3,r,i),data:i}),(c||0===c)&&(h+=c),h+='<div class="generalPhotos__viewport"><div class="generalPhotos__viewportLayer">',c=n["if"].call(t,t&&t.fallbackSrc,{hash:{},inverse:g.noop,fn:g.program(6,l,i),data:i}),(c||0===c)&&(h+=c),h+='</div><div class="generalPhotos__control"><a href="',(u=n.prevHref)?c=u.call(t,{hash:{},data:i}):(u=t&&t.prevHref,c=typeof u===p?u.call(t,{hash:{},data:i}):u),h+=f(c)+'" class="generalPhotos__controlPrev">'+f((u=n.Icon||t&&t.Icon,d={hash:{"class":"generalPhotos__controlPrevIcon"},data:i},u?u.call(t,"general-photos-arrow-prev",d):m.call(t,"Icon","general-photos-arrow-prev",d)))+'</a><a href="',(u=n.nextHref)?c=u.call(t,{hash:{},data:i}):(u=t&&t.nextHref,c=typeof u===p?u.call(t,{hash:{},data:i}):u),h+=f(c)+'" class="generalPhotos__controlNext">'+f((u=n.Icon||t&&t.Icon,d={hash:{"class":"generalPhotos__controlNextIcon"},data:i},u?u.call(t,"general-photos-arrow-next",d):m.call(t,"Icon","general-photos-arrow-next",d)))+'</a></div></div><div class="generalPhotos__caption"><div class="generalPhotos__description"><h1 class="generalPhotos__descriptionText">',(u=n.captionCurrent)?c=u.call(t,{hash:{},data:i}):(u=t&&t.captionCurrent,c=typeof u===p?u.call(t,{hash:{},data:i}):u),h+=f(c)+'</h1></div><footer class="generalPhotos__captionFooter"><div class="generalPhotos__copyright">'+f((u=n.p||t&&t.p,d={hash:{},data:i},u?u.call(t,"copyright",d):m.call(t,"p","copyright",d)))+'</div><aside class="generalPhotos__captionAside">',c=n.unless.call(t,t&&t.isPhone,{hash:{},inverse:g.noop,fn:g.program(3,r,i),data:i}),(c||0===c)&&(h+=c),h+='<div class="generalPhotos__feedback">'+f((u=n.Icon||t&&t.Icon,d={hash:{"class":"generalPhotos__feedbackIcon"},data:i},u?u.call(t,"general-photos-warning",d):m.call(t,"Icon","general-photos-warning",d)))+'</div><div class="generalPhotos__deletePhoto _hidden">'+f((u=n.Icon||t&&t.Icon,d={hash:{"class":"generalPhotos__deletePhotoIcon"},data:i},u?u.call(t,"general-photos-trash-can",d):m.call(t,"Icon","general-photos-trash-can",d)))+"</div></aside></footer></div></section>"},this.jst_modules=this.jst_modules||{},this.jst_modules.geoCard2=this.jst_modules.geoCard2||{},this.jst_modules.geoCard2.geoCard2=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<h1 class="geoCard2__name',a=n["if"].call(e,e&&e.addressInTitle,{hash:{},inverse:G.noop,fn:G.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+='">',a=n["if"].call(e,e&&e.address,{hash:{},inverse:G.program(6,l,t),fn:G.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</h1>"}function r(e,t){return" _address"}function s(e,t){var a,i,o="";return(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===$?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o}function l(e,t){var a,i="";return a=n["if"].call(e,e&&e.separatedTitle,{hash:{},inverse:G.program(10,d,t),fn:G.program(7,c,t),data:t}),(a||0===a)&&(i+=a),i}function c(e,t){var a,i="";return a=n.each.call(e,e&&e.title,{hash:{},inverse:G.noop,fn:G.programWithDepth(8,u,t,e),data:t}),(a||0===a)&&(i+=a),i}function u(e,t,a){var i,o,r="";return r+='<span class="geoCard2__namePart">'+H((i=n.Link||a&&a.Link,o={hash:{href:a&&a.seoLinkAddress,"class":"_undashed geoCard2__addressLink _name"},data:t},i?i.call(e,e,o):U.call(e,"Link",e,o)))+"</span>"}function d(e,t){var a,i,o="";return o+=H((a=n.Link||e&&e.Link,i={hash:{href:e&&e.seoLinkAddress,"class":"_undashed geoCard2__addressLink _name"},data:t},a?a.call(e,e&&e.title,i):U.call(e,"Link",e&&e.title,i)))}function h(e,t){var a,i="";return i+='<address class="geoCard2__address">',a=n.each.call(e,e&&e.address,{hash:{},inverse:G.noop,fn:G.programWithDepth(13,p,t,e),data:t}),(a||0===a)&&(i+=a),i+="</address>"}function p(e,t,n){var a,i="";return i+='<span class="geoCard2__addressPart"><a href="'+H((a=n&&n.seoLinkAddress,typeof a===$?a.apply(e):a))+'" class="geoCard2__addressLink">',a=typeof e===$?e.apply(e):e,(a||0===a)&&(i+=a),i+="</a></span>"}function f(e,t){var a,i,o="";return o+='<div class="geoCard2__drilldown">',(i=n.drilldown)?a=i.call(e,{hash:{},data:t}):(i=e&&e.drilldown,a=typeof i===$?i.call(e,{hash:{},data:t}):i),o+=H(a)+"</div>"}function m(e,t){var a,i,o,r="";return r+='<div class="geoCard2__parking"><div class="geoCard2__parkingInfo">'+H(typeof e===$?e.apply(e):e)+"</div>",i=n.module||e&&e.module,o={hash:{},inverse:G.noop,fn:G.program(18,g,t),data:t},a=i?i.call(e,"schedule",o):U.call(e,"module","schedule",o),(a||0===a)&&(r+=a),r+="</div>"}function g(e,t){var n="";return n+='<div class="geoCard2__parkingSchedule">'+H(typeof e===$?e.apply(e):e)+"</div>"}function _(e,t){var a,i,o="";return o+='<div class="geoCard2__coordinates">',(i=n.coordinates)?a=i.call(e,{hash:{},data:t}):(i=e&&e.coordinates,a=typeof i===$?i.call(e,{hash:{},data:t}):i),o+=H(a)+"</div>"}function v(e,t){var n="";return n+='<div class="geoCard2__features">'+H(typeof e===$?e.apply(e):e)+"</div>"}function y(e,t){var n="";return n+='<div class="geoCard2__nearStops">'+H(typeof e===$?e.apply(e):e)+"</div>"}function b(e,t){var n="";return n+='<div class="geoCard2__landmarks">'+H(typeof e===$?e.apply(e):e)+"</div>"}function k(e,t){var a,i,o,r="";return r+='<div class="geoCard2__nearParkings">',i=n.Link||e&&e.Link,o={hash:{"class":"_undashed geoCard2__nearParkingsLink"},inverse:G.noop,fn:G.program(29,w,t),data:t},a=i?i.call(e,o):U.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function w(e,t){var a,i,o="";return o+=H((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Найти парковки рядом",i):U.call(e,"_t","Найти парковки рядом",i)))}function x(e,t){var n="";return n+='<div class="geoCard2__actions">'+H(typeof e===$?e.apply(e):e)+"</div>"}function C(e,t){var a,i,o,r="";return r+='<a href="',(i=n.floorsSeoLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.floorsSeoLink,a=typeof i===$?i.call(e,{hash:{},data:t}):i),r+=H(a)+'" class="geoCard2__floors">'+H((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Посмотреть на этажах",o):U.call(e,"_t","Посмотреть на этажах",o)))+"</a>"}function L(e,t){var a,i,o,r="";return r+='<a href="'+H((a=e&&e.photos,a=null==a||a===!1?a:a.seoLinkPhotos,typeof a===$?a.apply(e):a))+'" class="geoCard2__photos">',a=n["if"].call(e,(a=e&&e.photos,null==a||a===!1?a:a.preview),{hash:{},inverse:G.noop,fn:G.program(36,I,t),data:t}),(a||0===a)&&(r+=a),r+='<div class="geoCard2__photosCount"><span class="geoCard2__photosCountNumber">'+H((a=e&&e.photos,a=null==a||a===!1?a:a.count,typeof a===$?a.apply(e):a))+"</span> "+H((i=n._nt||e&&e._nt,o={hash:{},data:t},i?i.call(e,"фото","фото","фото",(a=e&&e.photos,null==a||a===!1?a:a.count),o):U.call(e,"_nt","фото","фото","фото",(a=e&&e.photos,null==a||a===!1?a:a.count),o)))+"</div></a>"}function I(e,t){var a,i="";return i+='<div class="geoCard2__photosImg',a=n["if"].call(e,e&&e.dontPreloadPhoto,{hash:{},inverse:G.noop,fn:G.program(37,T,t),data:t}),(a||0===a)&&(i+=a),i+='" data-src="'+H((a=e&&e.photos,a=null==a||a===!1?a:a.preview,typeof a===$?a.apply(e):a))+'"',a=n["if"].call(e,e&&e.dontPreloadPhoto,{hash:{},inverse:G.noop,fn:G.program(39,S,t),data:t}),(a||0===a)&&(i+=a),i+="></div>"}function T(e,t){return" _loaded"}function S(e,t){var n,a="";return a+=' style="background-image: url('+H((n=e&&e.photos,n=null==n||n===!1?n:n.preview,typeof n===$?n.apply(e):n))+')"'}function E(e,t){var a,i,o="";return o+='<div class="geoCard2__addPhotoControl">'+H((a=n.Icon||e&&e.Icon,i={hash:{"class":"geoCard2__addPhotosIcon"},data:t},a?a.call(e,"photosUploader_smallControl",i):U.call(e,"Icon","photosUploader_smallControl",i)))+'<span class="geoCard2__addPhotoControlName">'+H((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Добавить фото",i):U.call(e,"_t","Добавить фото",i)))+"</span></div>"}function P(e,t){var n="";return n+='<section class="geoCard2__attractions">'+H(typeof e===$?e.apply(e):e)+"</section>"}function j(e,t){var n="";return n+='<section class="geoCard2__infrastructure">'+H(typeof e===$?e.apply(e):e)+"</section>"}function M(e,t){var a,i,o,r="";return r+='<section class="geoCard2__section"><div class="geoCard2__search"><input type="text" class="geoCard2__searchInput" placeholder="'+H((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Найти рядом",o):U.call(e,"_t","Найти рядом",o)))+'"/>'+H((i=n.Icon||e&&e.Icon,o={hash:{"class":"geoCard2__searchIcon"},data:t},i?i.call(e,"card_search",o):U.call(e,"Icon","card_search",o)))+'</div><div class="geoCard2__metarubrics">',a=n.each.call(e,e&&e.metarubrics,{hash:{},inverse:G.noop,fn:G.program(48,A,t),data:t}),(a||0===a)&&(r+=a),r+="</div></section>"}function A(e,t){var a,i,o,r="";return i=n.Link||e&&e.Link,o={hash:{href:e&&e.seoLink,"class":"_undashed geoCard2__metarubricsItem","data-query":e&&e.text},inverse:G.noop,fn:G.program(49,D,t),data:t},a=i?i.call(e,o):U.call(e,"Link",o),(a||0===a)&&(r+=a),r}function D(e,t){var a,i,o,r="";return r+=H((i=n.Icon||e&&e.Icon,o={hash:{"class":"geoCard2__metarubricsItemIcon"},data:t},i?i.call(e,e&&e.icon,o):U.call(e,"Icon",e&&e.icon,o)))+'<span class="geoCard2__metarubricsItemText">',(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===$?i.call(e,{hash:{},data:t}):i),r+=H(a)+"</span>"}function R(e,t){var a,i,o,r="";return r+='<div class="geoCard2__footerItem geoCard2__footerAdv">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.advLink,null==a||a===!1?a:a.href),target:"_blank","class":"_undashed geoCard2__footerItemLink geoCard2__footerAdvLink"},inverse:G.noop,fn:G.program(52,N,t),data:t},a=i?i.call(e,o):U.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function N(e,t){var a,i,o="";return o+=H((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Реклама в 2ГИС",i):U.call(e,"_t","Реклама в 2ГИС",i)))}function B(e,t){var a,i,o="";return o+=H((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Ошибка в данных",i):U.call(e,"_t","Ошибка в данных",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var F,O,z,q="",$="function",U=n.helperMissing,H=this.escapeExpression,G=this;return q+='<div class="geoCard2__scroller"><div class="geoCard2__scrollerIn"><header class="geoCard2__headerWrapper">',O=n.Fix||t&&t.Fix,z={hash:{"class":"geoCard2__header _innerHeader",tag:"header"},inverse:G.noop,fn:G.program(1,o,i),data:i},F=O?O.call(t,z):U.call(t,"Fix",z),(F||0===F)&&(q+=F),q+='</header><div class="geoCard2__content"><section class="geoCard2__section _primary">',F=n["if"].call(t,t&&t.address,{hash:{},inverse:G.noop,fn:G.program(12,h,i),data:i}),(F||0===F)&&(q+=F),F=n["if"].call(t,t&&t.drilldown,{hash:{},inverse:G.noop,fn:G.program(15,f,i),data:i}),(F||0===F)&&(q+=F),O=n.module||t&&t.module,z={hash:{},inverse:G.noop,fn:G.program(17,m,i),data:i},F=O?O.call(t,"cardParking",z):U.call(t,"module","cardParking",z),(F||0===F)&&(q+=F),F=n["if"].call(t,t&&t.coordinates,{hash:{},inverse:G.noop,fn:G.program(20,_,i),data:i}),(F||0===F)&&(q+=F),O=n.module||t&&t.module,z={hash:{},inverse:G.noop,fn:G.program(22,v,i),data:i},F=O?O.call(t,"cardFeatures",z):U.call(t,"module","cardFeatures",z),(F||0===F)&&(q+=F),O=n.module||t&&t.module,z={hash:{},inverse:G.noop,fn:G.program(24,y,i),data:i},F=O?O.call(t,"cardNearStops",z):U.call(t,"module","cardNearStops",z),(F||0===F)&&(q+=F),O=n.module||t&&t.module,z={hash:{},inverse:G.noop,fn:G.program(26,b,i),data:i},F=O?O.call(t,"cardLandmarks",z):U.call(t,"module","cardLandmarks",z),(F||0===F)&&(q+=F),F=n["if"].call(t,t&&t.nearParkings,{hash:{},inverse:G.noop,fn:G.program(28,k,i),data:i}),(F||0===F)&&(q+=F),O=n.module||t&&t.module,z={hash:{},inverse:G.noop,fn:G.program(31,x,i),data:i},F=O?O.call(t,"cardActions",z):U.call(t,"module","cardActions",z),(F||0===F)&&(q+=F),q+='<div class="geoCard2__buttons">',F=n["if"].call(t,t&&t.hasFloors,{hash:{},inverse:G.noop,fn:G.program(33,C,i),data:i}),(F||0===F)&&(q+=F),q+="</div>"+H((O=n.module||t&&t.module,z={hash:{},data:i},O?O.call(t,"promoMobile",z):U.call(t,"module","promoMobile",z))),F=n["if"].call(t,t&&t.photos,{hash:{},inverse:G.noop,fn:G.program(35,L,i),data:i}),(F||0===F)&&(q+=F),F=n["if"].call(t,t&&t.isPhotosUploader,{hash:{},inverse:G.noop,fn:G.program(41,E,i),data:i}),(F||0===F)&&(q+=F),q+="</section>",O=n.module||t&&t.module,z={hash:{},inverse:G.noop,fn:G.program(43,P,i),data:i},F=O?O.call(t,"cardAttractions",z):U.call(t,"module","cardAttractions",z),(F||0===F)&&(q+=F),O=n.module||t&&t.module,z={hash:{},inverse:G.noop,fn:G.program(45,j,i),data:i},F=O?O.call(t,"cardInfrastructure",z):U.call(t,"module","cardInfrastructure",z),(F||0===F)&&(q+=F),F=n["if"].call(t,t&&t.showSearch,{hash:{},inverse:G.noop,fn:G.program(47,M,i),data:i}),(F||0===F)&&(q+=F),q+='<div class="geoCard2__googletag"></div></div><footer class="geoCard2__footer"><div class="geoCard2__footerContent">',F=n["if"].call(t,t&&t.advLink,{hash:{},inverse:G.noop,fn:G.program(51,R,i),data:i}),(F||0===F)&&(q+=F),q+=' <div class="geoCard2__footerItem geoCard2__footerBugReport">',O=n.Link||t&&t.Link,z={hash:{"class":"_undashed geoCard2__footerItemLink geoCard2__footerBugReportLink"},inverse:G.noop,fn:G.program(54,B,i),data:i},F=O?O.call(t,z):U.call(t,"Link",z),(F||0===F)&&(q+=F),q+="</div></div></footer></div>",(O=n.Track)?F=O.call(t,{hash:{},data:i}):(O=t&&t.Track,F=typeof O===$?O.call(t,{hash:{},data:i}):O),q+=H(F)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.geoLocation=this.jst_modules.geoLocation||{},this.jst_modules.geoLocation.geoLocation=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;
return s+='<div class="geoLocation__control"  title=\''+c((o=n._pt||t&&t._pt,r={hash:{},data:i},o?o.call(t,"Контрол на карте","Моё местоположение",r):l.call(t,"_pt","Контрол на карте","Моё местоположение",r)))+'\'></div><div class="geoLocation__tooltip"><div class="geoLocation__tooltipText"></div>'+c((o=n.Icon||t&&t.Icon,r={hash:{"class":"geoLocation__tooltipTail"},data:i},o?o.call(t,"tooltip_tail",r):l.call(t,"Icon","tooltip_tail",r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.holidayWarning=this.jst_modules.holidayWarning||{},this.jst_modules.holidayWarning.holidayWarning=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+=c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,t&&t.template,"detailed",r):l.call(t,"p",t&&t.template,"detailed",r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.jsonld=this.jst_modules.jsonld||{},this.jst_modules.jsonld.jsonld=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<script type="application/ld+json">',(i=n.jsonld)?a=i.call(e,{hash:{},data:t}):(i=e&&e.jsonld,a=typeof i===l?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</script>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l="function",c=this;return r=n["if"].call(t,t&&t.jsonld,{hash:{},inverse:c.noop,fn:c.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},this.jst_modules=this.jst_modules||{},this.jst_modules.landingPage=this.jst_modules.landingPage||{},this.jst_modules.landingPage.landingPage=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression,d="function";return l+='<div class="landingPage__dataViewer">'+u((r=n.module||t&&t.module,s={hash:{},data:i},r?r.call(t,"dataViewer",s):c.call(t,"module","dataViewer",s)))+"</div>"+u((r=n.module||t&&t.module,s={hash:{},data:i},r?r.call(t,"generalPhotos",s):c.call(t,"module","generalPhotos",s))),(r=n.symbols)?o=r.call(t,{hash:{},data:i}):(r=t&&t.symbols,o=typeof r===d?r.call(t,{hash:{},data:i}):r),(o||0===o)&&(l+=o),l},this.jst_modules=this.jst_modules||{},this.jst_modules.lightboxMobile=this.jst_modules.lightboxMobile||{},this.jst_modules.lightboxMobile.lightboxMobile=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<div class="lightboxMobile__content"><a class="lightboxMobile__icon" href=',(r=n.href)?o=r.call(t,{hash:{},data:i}):(r=t&&t.href,o=typeof r===c?r.call(t,{hash:{},data:i}):r),l+=u(o)+' target="_blank">'+u((r=n.Icon||t&&t.Icon,s={hash:{"class":"lightboxMobile__logo"},data:i},r?r.call(t,"promoMobiles_icon",s):d.call(t,"Icon","promoMobiles_icon",s)))+'</a><a class="lightboxMobile__text" href=',(r=n.href)?o=r.call(t,{hash:{},data:i}):(r=t&&t.href,o=typeof r===c?r.call(t,{hash:{},data:i}):r),l+=u(o)+' target="_blank">',r=n._hgg||t&&t._hgg,s={hash:{link__class:"lightboxMobile__link _undashed"},data:i},o=r?r.call(t,"Встречайте,<br>%{Link новый мобильный 2ГИС}",s):d.call(t,"_hgg","Встречайте,<br>%{Link новый мобильный 2ГИС}",s),(o||0===o)&&(l+=o),l+='</a><a class="lightboxMobile__icons" href=',(r=n.href)?o=r.call(t,{hash:{},data:i}):(r=t&&t.href,o=typeof r===c?r.call(t,{hash:{},data:i}):r),l+=u(o)+' target="_blank">'+u((r=n.Icon||t&&t.Icon,s={hash:{"class":"lightboxMobile__apple"},data:i},r?r.call(t,"colorable_apple",s):d.call(t,"Icon","colorable_apple",s)))+u((r=n.Icon||t&&t.Icon,s={hash:{"class":"lightboxMobile__windows"},data:i},r?r.call(t,"colorable_windows",s):d.call(t,"Icon","colorable_windows",s)))+"</a></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.markerSetting=this.jst_modules.markerSetting||{},this.jst_modules.markerSetting.markerSetting=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="markerSetting__item map _markersSize_none ',(i=n.className)?a=i.call(e,{hash:{},data:t}):(i=e&&e.className,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+'"><div class="markerSetting__itemIcon map__marker ',(i=n.className)?a=i.call(e,{hash:{},data:t}):(i=e&&e.className,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+'"></div><div class="markerSetting__itemData"><label class="markerSetting__itemDataLabel"><span class="markerSetting__itemDataTitle _double">Размер ↔</span><input class="markerSetting__itemDataInput _width" type="text" value="',a=n["if"].call(e,e&&e.width,{hash:{},inverse:y.program(4,s,t),fn:y.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+='"><span class="markerSetting__itemDataTitleSecond">↕</span><input class="markerSetting__itemDataInput _height" type="text" value="',a=n["if"].call(e,e&&e.height,{hash:{},inverse:y.program(4,s,t),fn:y.program(6,l,t),data:t}),(a||0===a)&&(o+=a),o+='"></label><label class="markerSetting__itemDataLabel"><span class="markerSetting__itemDataTitle _double">Offset X:</span><input class="markerSetting__itemDataInput _offsetX" type="text" value="',a=n["if"].call(e,e&&e.offsetX,{hash:{},inverse:y.program(4,s,t),fn:y.program(8,c,t),data:t}),(a||0===a)&&(o+=a),o+='"><span class="markerSetting__itemDataTitleSecond">Y:</span><input class="markerSetting__itemDataInput _offsetY" type="text" value="',a=n["if"].call(e,e&&e.offsetY,{hash:{},inverse:y.program(4,s,t),fn:y.program(10,u,t),data:t}),(a||0===a)&&(o+=a),o+='"></label><label class="markerSetting__itemDataLabel"><input type="checkbox" tabindex="-1" class="markerSetting__showRadius ',(i=n.className)?a=i.call(e,{hash:{},data:t}):(i=e&&e.className,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+'"><span class="markerSetting__itemDataTitle">Выжигание:</span><input class="markerSetting__itemDataInput _margin" type="text" value="',a=n["if"].call(e,e&&e.margin,{hash:{},inverse:y.program(4,s,t),fn:y.program(12,d,t),data:t}),(a||0===a)&&(o+=a),o+='"></label><label class="markerSetting__itemDataLabel"><span class="markerSetting__itemDataTitle">Безопасная зона:</span><input class="markerSetting__itemDataInput _safeZone" type="text" value="',a=n["if"].call(e,e&&e.safeZone,{hash:{},inverse:y.program(4,s,t),fn:y.program(14,h,t),data:t}),(a||0===a)&&(o+=a),o+='"></label></div></div>'}function r(e,t){var a,i;return(i=n.width)?a=i.call(e,{hash:{},data:t}):(i=e&&e.width,a=typeof i===_?i.call(e,{hash:{},data:t}):i),v(a)}function s(e,t){return"0"}function l(e,t){var a,i;return(i=n.height)?a=i.call(e,{hash:{},data:t}):(i=e&&e.height,a=typeof i===_?i.call(e,{hash:{},data:t}):i),v(a)}function c(e,t){var a,i;return(i=n.offsetX)?a=i.call(e,{hash:{},data:t}):(i=e&&e.offsetX,a=typeof i===_?i.call(e,{hash:{},data:t}):i),v(a)}function u(e,t){var a,i;return(i=n.offsetY)?a=i.call(e,{hash:{},data:t}):(i=e&&e.offsetY,a=typeof i===_?i.call(e,{hash:{},data:t}):i),v(a)}function d(e,t){var a,i;return(i=n.margin)?a=i.call(e,{hash:{},data:t}):(i=e&&e.margin,a=typeof i===_?i.call(e,{hash:{},data:t}):i),v(a)}function h(e,t){var a,i;return(i=n.safeZone)?a=i.call(e,{hash:{},data:t}):(i=e&&e.safeZone,a=typeof i===_?i.call(e,{hash:{},data:t}):i),v(a)}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var p,f,m,g="",_="function",v=this.escapeExpression,y=this,b=n.helperMissing;return g+='<div class="markerSetting__popup"><div class="markerSetting__visibleMarkers"><span>Видно на карте:</span><span class="markerSetting__visibleMarkersCount"></span></div>',p=n.each.call(t,t&&t.items,{hash:{},inverse:y.noop,fn:y.program(1,o,i),data:i}),(p||0===p)&&(g+=p),g+='<textarea class="markerSetting__resultConfig" readonly></textarea>'+v((f=n.Btn||t&&t.Btn,m={hash:{"class":"markerSetting__saveConfig"},data:i},f?f.call(t,"Сохранить",m):b.call(t,"Btn","Сохранить",m)))+v((f=n.Btn||t&&t.Btn,m={hash:{"class":"markerSetting__setConfig"},data:i},f?f.call(t,"Импорт",m):b.call(t,"Btn","Импорт",m)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaActions=this.jst_modules.mediaActions||{},this.jst_modules.mediaActions.mediaActions=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<ul class="mediaActions__actions">',a=n.each.call(e,e&&e.items,{hash:{},inverse:b.noop,fn:b.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function r(e,t){var a,i,o="";return o+='<li class="mediaActions__actionsItem"><span class="mediaActions__actionsItemIcon',a=n["if"].call(e,e&&e.rubric,{hash:{},inverse:b.noop,fn:b.program(3,s,t),data:t}),(a||0===a)&&(o+=a),o+='">',a=n["if"].call(e,e&&e.percent,{hash:{},inverse:b.program(7,c,t),fn:b.program(5,l,t),data:t}),(a||0===a)&&(o+=a),o+='</span><div class="mediaActions__actionsItemTitleWrapper _fade"><div class="mediaActions__actionsItemTitle" title="',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+'">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+"</div></div>",a=n["if"].call(e,e&&e.period,{hash:{},inverse:b.noop,fn:b.program(10,d,t),data:t}),(a||0===a)&&(o+=a),a=n["if"].call(e,null==t||t===!1?t:t.first,{hash:{},inverse:b.noop,fn:b.program(12,h,t),data:t}),(a||0===a)&&(o+=a),o+="</li>"}function s(e,t){var a,i,o="";return o+=" _type_",(i=n.rubric)?a=i.call(e,{hash:{},data:t}):(i=e&&e.rubric,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)}function l(e,t){var a,i,o="";return o+="\n                            -",(i=n.percent)?a=i.call(e,{hash:{},data:t}):(i=e&&e.percent,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+"%\n                        "}function c(e,t){var a,i="";return a=n["if"].call(e,e&&e.icon,{hash:{},inverse:b.noop,fn:b.program(8,u,t),data:t}),(a||0===a)&&(i+=a),i}function u(e,t){var a,i,o="";return o+=v((a=n.Icon||e&&e.Icon,i={hash:{"class":"mediaActions__actionsItemIconSvg"},data:t},a?a.call(e,e&&e.icon,i):y.call(e,"Icon",e&&e.icon,i)))}function d(e,t){var a,i,o="";return o+='<div class="mediaActions__itemPeriodWrapper"><span class="mediaActions__actionsItemPeriod">',(i=n.period)?a=i.call(e,{hash:{},data:t}):(i=e&&e.period,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+"</span></div>"}function h(e,t){var a,i,o="";return o+='<div class="mediaActions__description">',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===_?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var p,f,m,g="",_="function",v=this.escapeExpression,y=n.helperMissing,b=this;return g+='<h4 class="mediaActions__title">'+v((f=n._t||t&&t._t,m={hash:{},data:i},f?f.call(t,"Акции и предложения",m):y.call(t,"_t","Акции и предложения",m)))+'</h4><div class="mediaActions__block">',p=n["if"].call(t,t&&t.items,{hash:{},inverse:b.noop,fn:b.program(1,o,i),data:i}),(p||0===p)&&(g+=p),g+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaAddress=this.jst_modules.mediaAddress||{},this.jst_modules.mediaAddress.mediaAddress=function(e,t,n,a,i){function o(e,t){var a,i,o="";return(i=n.descriptionAddress)?a=i.call(e,{hash:{},data:t}):(i=e&&e.descriptionAddress,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+" "}function r(e,t){var a,i="";return a=n["if"].call(e,e&&e.seoUrl,{hash:{},inverse:I.program(9,u,t),fn:I.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i}function s(e,t){var a,i,o="";return a=n["if"].call(e,e&&e.buildingName,{hash:{},inverse:I.noop,fn:I.program(5,l,t),data:t}),(a||0===a)&&(o+=a),o+='<a class="mediaAddress__address ',a=n["if"].call(e,(a=e&&e.address,null==a||a===!1?a:a.notClickable),{hash:{},inverse:I.noop,fn:I.program(7,c,t),data:t}),(a||0===a)&&(o+=a),o+='" href="',(i=n.seoUrl)?a=i.call(e,{hash:{},data:t}):(i=e&&e.seoUrl,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+'">',a=e&&e.address,a=null==a||a===!1?a:a.fullAddress,a=typeof a===C?a.apply(e):a,(a||0===a)&&(o+=a),o+="</a>"}function l(e,t){var a,i,o="";return o+='<div class="mediaAddress__buildingName">',(i=n.buildingName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.buildingName,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+"</div>"}function c(e,t){return"_notClickable"}function u(e,t){var n,a="";return a+='<div class="mediaAddress__address _notClickable">',n=e&&e.address,n=null==n||n===!1?n:n.fullAddress,n=typeof n===C?n.apply(e):n,(n||0===n)&&(a+=n),a+="</div>"}function d(e,t){var a,i,o="";return o+='<span class="mediaAddress__description">&nbsp;–&nbsp;',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+"</span>"}function h(e,t){var a,i,o="";return o+='<div class="mediaAddress__facilities">'+L((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Доступно для инвалидов",i):T.call(e,"_t","Доступно для инвалидов",i)))+"</div>"}function p(e,t){var a,i,o="";return o+='<div class="mediaAddress__btnWrapper"><div class="mediaAddress__parkings">'+L((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Найти парковки рядом",i):T.call(e,"_t","Найти парковки рядом",i)))+"</div></div>"}function f(e,t){var a,i,o="";return o+='<div class="mediaAddress__panoramaWrapper"><div class="mediaAddress__panorama" style="background-image: url(',(i=n.panoramaUrl)?a=i.call(e,{hash:{},data:t}):(i=e&&e.panoramaUrl,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+')"></div></div>'}function m(e,t){var a,i,o,r="";return r+='<div class="mediaAddress__stationsHeader">'+L((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Ближайшие остановки транспорта",o):T.call(e,"_t","Ближайшие остановки транспорта",o)))+'</div><ul class="mediaAddress__stations">',a=n.each.call(e,e&&e.stations,{hash:{},inverse:I.noop,fn:I.program(20,g,t),data:t}),(a||0===a)&&(r+=a),r+="</ul>"}function g(e,t){var a,i,o,r="";return r+='<li class="mediaAddress__stationsItem">',a=n["if"].call(e,e&&e.seoLink,{hash:{},inverse:I.program(23,v,t),fn:I.program(21,_,t),data:t}),(a||0===a)&&(r+=a),r+='<span class="mediaAddress__stationsItemDistance">'+L((i=n._i18n||e&&e._i18n,o={hash:{data:e&&e.distance},data:t},i?i.call(e,"DISTANCE",o):T.call(e,"_i18n","DISTANCE",o)))+"</span>",a=n["if"].call(e,e&&e.color,{hash:{},inverse:I.noop,fn:I.program(25,y,t),data:t}),(a||0===a)&&(r+=a),r+="</li>"}function _(e,t){var a,i,o="";return o+='<a class="mediaAddress__stationsItemLabel" href="',(i=n.seoLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.seoLink,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+'" title="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+'" data-type="',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+'" data-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+'">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+"</a>"}function v(e,t){var a,i,o="";return o+='<span class="mediaAddress__stationsItemLabel" title="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+'" data-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+'">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+"</span>"}function y(e,t){var a,i,o="";return o+='<i class="mediaAddress__stationsItemColor" style="background: ',(i=n.color)?a=i.call(e,{hash:{},data:t}):(i=e&&e.color,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+'"></i>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var b,k,w,x="",C="function",L=this.escapeExpression,I=this,T=n.helperMissing;return x+='<h4 class="mediaAddress__title">'+L((k=n._t||t&&t._t,w={hash:{},data:i},k?k.call(t,"Адрес",w):T.call(t,"_t","Адрес",w)))+'</h4><div class="mediaAddress__block">',b=n["if"].call(t,t&&t.descriptionAddress,{hash:{},inverse:I.noop,fn:I.program(1,o,i),data:i}),(b||0===b)&&(x+=b),b=n["if"].call(t,(b=t&&t.address,null==b||b===!1?b:b.fullAddress),{hash:{},inverse:I.noop,fn:I.program(3,r,i),data:i}),(b||0===b)&&(x+=b),b=n["if"].call(t,t&&t.description,{hash:{},inverse:I.noop,fn:I.program(11,d,i),data:i}),(b||0===b)&&(x+=b),b=n["if"].call(t,(b=t&&t.geo,null==b||b===!1?b:b.facilities),{hash:{},inverse:I.noop,fn:I.program(13,h,i),data:i}),(b||0===b)&&(x+=b),b=n["if"].call(t,(b=t&&t.geo,null==b||b===!1?b:b.parkings),{hash:{},inverse:I.noop,fn:I.program(15,p,i),data:i}),(b||0===b)&&(x+=b),b=n["if"].call(t,t&&t.panoramaUrl,{hash:{},inverse:I.noop,fn:I.program(17,f,i),data:i}),(b||0===b)&&(x+=b),b=n["if"].call(t,t&&t.stations,{hash:{},inverse:I.noop,fn:I.program(19,m,i),data:i}),(b||0===b)&&(x+=b),x+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaAdvantages=this.jst_modules.mediaAdvantages||{},this.jst_modules.mediaAdvantages.mediaAdvantages=function(e,t,n,a,i){function o(e,t){var n,a="";return a+='<p class="mediaAdvantages__item">',n=typeof e===c?e.apply(e):e,(n||0===n)&&(a+=n),a+="</p>"}function r(e,t){var a,i,o="";return o+='<span class="mediaAdvantages__articleWarning">',(i=n.articleWarning)?a=i.call(e,{hash:{},data:t}):(i=e&&e.articleWarning,a=typeof i===c?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c="function",u=this;return s=n.each.call(t,t&&t.text,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(s||0===s)&&(l+=s),s=n["if"].call(t,t&&t.articleWarning,{hash:{},inverse:u.noop,fn:u.program(3,r,i),data:i}),(s||0===s)&&(l+=s),l},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaAttributes=this.jst_modules.mediaAttributes||{},this.jst_modules.mediaAttributes.mediaAttributes=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="mediaAttributes__group">',a=n["if"].call(e,e&&e.name,{hash:{},inverse:v.noop,fn:v.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+='<ul class="mediaAttributes__groupList">',a=n.each.call(e,e&&e.attributes,{hash:{},inverse:v.noop,fn:v.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</ul></div>"}function r(e,t){var a,i,o="";return o+='<h3 class="mediaAttributes__groupTitle">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+"</h3>"}function s(e,t){var a,i="";return a=n["if"].call(e,e&&e.price,{hash:{},inverse:v.program(7,c,t),fn:v.program(5,l,t),data:t}),(a||0===a)&&(i+=a),i}function l(e,t){var a,i,o="";return o+='<li class="mediaAttributes__groupListItem">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+'<span class="mediaAttributes__groupListItemSum">',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+'<span class="mediaAttributes__groupListItemSumCurrency _'+_((a=e&&e.currency,a=null==a||a===!1?a:a.code,typeof a===g?a.apply(e):a))+'">'+_((a=e&&e.currency,a=null==a||a===!1?a:a.symbol,typeof a===g?a.apply(e):a))+"</span></span></li>"}function c(e,t){var n="";return n+='<li class="mediaAttributes__groupListItem" title="'+_(typeof e===g?e.apply(e):e)+'">'+_(typeof e===g?e.apply(e):e)+"</li>"}function u(e,t){var a,i="";return i+='<div class="mediaAttributes__rubrics">',a=n.each.call(e,e&&e.rubrics,{hash:{},inverse:v.noop,fn:v.program(10,d,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function d(e,t){var a,i,o="";return o+='<a href="',(i=n.url)?a=i.call(e,{hash:{},data:t}):(i=e&&e.url,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+'" data-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+'" class="mediaAttributes__rubricsItem">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+"</a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p,f,m="",g="function",_=this.escapeExpression,v=this,y=n.helperMissing;return m+='<h4 class="mediaAttributes__title">'+_((p=n._t||t&&t._t,f={hash:{},data:i},p?p.call(t,"Информация",f):y.call(t,"_t","Информация",f)))+'</h4><div class="mediaAttributes__block">',h=n.each.call(t,t&&t.groups,{hash:{},inverse:v.noop,fn:v.program(1,o,i),data:i}),(h||0===h)&&(m+=h),h=n["if"].call(t,t&&t.rubrics,{hash:{},inverse:v.noop,fn:v.program(9,u,i),data:i}),(h||0===h)&&(m+=h),m+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCard=this.jst_modules.mediaCard||{},this.jst_modules.mediaCard.mediaCard=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="mediaCard__photosUploaderControl">'+d((a=n.Icon||e&&e.Icon,i={hash:{"class":"mediaCard__addPhotoIcon"},data:t},a?a.call(e,"photosUploader_addPhoto",i):u.call(e,"Icon","photosUploader_addPhoto",i)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h=this;return c+=d((s=n.p||t&&t.p,l={hash:{},data:i},s?s.call(t,"arrowNavigation",l):u.call(t,"p","arrowNavigation",l)))+'<div class="mediaCard__main">',r=n["if"].call(t,t&&t.photosUploaderAvailable,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+='<div class="mediaCard__scroller"><div class="mediaCard__wrapper">'+d((s=n.p||t&&t.p,l={hash:{},data:i},s?s.call(t,"cardContainer",l):u.call(t,"p","cardContainer",l)))+d((s=n.p||t&&t.p,l={hash:{},data:i},s?s.call(t,"cardFooter",l):u.call(t,"p","cardFooter",l)))+"</div>"+d((s=n.Preloader||t&&t.Preloader,l={hash:{"class":"mediaCard__spinner _scheme_circles"},data:i},s?s.call(t,l):u.call(t,"Preloader",l)))+d((s=n.Track||t&&t.Track,l={hash:{"class":"_scheme_media mediaCard__track"},data:i},s?s.call(t,l):u.call(t,"Track",l)))+'<div class="mediaCard__resizeButton"></div></div></div>'+d((s=n.module||t&&t.module,l={hash:{},data:i},s?s.call(t,"jsonld",l):u.call(t,"module","jsonld",l)))},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCardHeader=this.jst_modules.mediaCardHeader||{},this.jst_modules.mediaCardHeader.mediaCardHeader=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+=c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,t&&t.cardType,r):l.call(t,"p",t&&t.cardType,r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaContacts=this.jst_modules.mediaContacts||{},this.jst_modules.mediaContacts.mediaContacts=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=c((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,e&&e.template,i):l.call(e,"p",e&&e.template,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l=n.helperMissing,c=this.escapeExpression,u=this;return r=n["if"].call(t,t&&t.template,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaDiscount=this.jst_modules.mediaDiscount||{},this.jst_modules.mediaDiscount.mediaDiscount=function(e,t,n,a,i){function o(e,t){return" _withCover"}function r(e,t){var a,i,o="";return o+='<span class="mediaDiscount__percent">',(i=n.percent)?a=i.call(e,{hash:{},data:t}):(i=e&&e.percent,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+"%</span>"}function s(e,t){var a,i="";return a=n["if"].call(e,e&&e.icon,{hash:{},inverse:y.noop,fn:y.program(6,l,t),data:t}),(a||0===a)&&(i+=a),i}function l(e,t){var a,i,o="";return o+=_((a=n.Icon||e&&e.Icon,i={hash:{"class":"mediaDiscounts__itemIcon"},data:t},a?a.call(e,e&&e.icon,i):v.call(e,"Icon",e&&e.icon,i)))}function c(e,t){var a,i,o="";return o+='<div class="mediaDiscount__firmName">',(i=n.firmName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.firmName,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+"</div>"}function u(e,t){var a,i,o="";return o+='<span class="mediaDiscount__period">',(i=n.period)?a=i.call(e,{hash:{},data:t}):(i=e&&e.period,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+"</span>"}function d(e,t){var n="";return n+='<div class="mediaDiscount__ratingContainer">'+_(typeof e===g?e.apply(e):e)+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p,f,m="",g="function",_=this.escapeExpression,v=n.helperMissing,y=this;return m+='<header class="mediaDiscount__header',h=n["if"].call(t,t&&t.cover,{hash:{},inverse:y.noop,fn:y.program(1,o,i),data:i}),(h||0===h)&&(m+=h),m+='" style="background-image: url(',(p=n.cover)?h=p.call(t,{hash:{},data:i}):(p=t&&t.cover,h=typeof p===g?p.call(t,{hash:{},data:i}):p),m+=_(h)+')">',h=n["if"].call(t,t&&t.percent,{hash:{},inverse:y.program(5,s,i),fn:y.program(3,r,i),data:i}),(h||0===h)&&(m+=h),m+='</header><div class="mediaDiscount__body">',h=n["if"].call(t,t&&t.firmName,{hash:{},inverse:y.noop,fn:y.program(8,c,i),data:i}),(h||0===h)&&(m+=h),m+='<h2 class="mediaDiscount__title" title="',(p=n.title)?h=p.call(t,{hash:{},data:i}):(p=t&&t.title,h=typeof p===g?p.call(t,{hash:{},data:i}):p),m+=_(h)+'">',(p=n.title)?h=p.call(t,{hash:{},data:i}):(p=t&&t.title,h=typeof p===g?p.call(t,{hash:{},data:i}):p),m+=_(h)+"</h2>",h=n["if"].call(t,t&&t.period,{hash:{},inverse:y.noop,fn:y.program(10,u,i),data:i}),(h||0===h)&&(m+=h),m+='<div class="mediaDiscount__description"><div class="mediaDiscount__scroller"><div class="mediaDiscount__descriptionIn">',(p=n.description)?h=p.call(t,{hash:{},data:i}):(p=t&&t.description,h=typeof p===g?p.call(t,{hash:{},data:i}):p),(h||0===h)&&(m+=h),m+="</div>"+_((p=n.Track||t&&t.Track,f={hash:{"class":"mediaDiscount__track _scheme_media"},data:i},p?p.call(t,f):v.call(t,"Track",f)))+'</div></div></div><span class="mediaDiscount__more">'+_((p=n._t||t&&t._t,f={hash:{},data:i},p?p.call(t,"Читать полностью",f):v.call(t,"_t","Читать полностью",f)))+"</span>",p=n.module||t&&t.module,f={hash:{},inverse:y.noop,fn:y.program(12,d,i),data:i},h=p?p.call(t,"discountRating",f):v.call(t,"module","discountRating",f),(h||0===h)&&(m+=h),m},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaMiniCard=this.jst_modules.mediaMiniCard||{},this.jst_modules.mediaMiniCard.mediaMiniCard=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+=c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,t&&t.template,r):l.call(t,"p",t&&t.template,r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaMiniCardAd=this.jst_modules.mediaMiniCardAd||{},this.jst_modules.mediaMiniCardAd.mediaMiniCardAd=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<a href="'+v((a=e&&e.advLink,a=null==a||a===!1?a:a.href,typeof a===_?a.apply(e):a))+'" class="mediaMiniCardAd__adlink" target="_blank">'+v((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Реклама в 2ГИС",o):y.call(e,"_t","Реклама в 2ГИС",o)))+"</a>"}function r(e,t){var a,i="";return i+='<ul class="mediaMiniCardAd__list">',a=n.each.call(e,e&&e.items,{hash:{},inverse:b.noop,fn:b.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function s(e,t){var a,i,o="";return o+='<li class="mediaMiniCardAd__listItem',a=n["if"].call(e,e&&e.cover,{hash:{},inverse:b.noop,fn:b.program(5,l,t),data:t}),(a||0===a)&&(o+=a),o+='" data-static-id="',(i=n.staticId)?a=i.call(e,{hash:{},data:t}):(i=e&&e.staticId,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+'" title="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+'"><span class="mediaMiniCardAd__listItemCover',a=n.unless.call(e,e&&e.cover,{hash:{},inverse:b.noop,fn:b.program(7,c,t),data:t}),(a||0===a)&&(o+=a),o+='"',a=n["if"].call(e,e&&e.cover,{hash:{},inverse:b.noop,fn:b.program(9,u,t),data:t}),(a||0===a)&&(o+=a),o+='></span><h3 class="mediaMiniCardAd__listItemName">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+"</h3>",a=n["if"].call(e,e&&e.micro,{hash:{},inverse:b.noop,fn:b.program(11,d,t),data:t}),(a||0===a)&&(o+=a),a=n["if"].call(e,e&&e.address,{hash:{},inverse:b.noop,fn:b.program(13,h,t),data:t}),(a||0===a)&&(o+=a),o+="</li>"}function l(e,t){return" _withCover"}function c(e,t){return" _default"}function u(e,t){var a,i,o="";return o+=' style="background-image: url(',(i=n.cover)?a=i.call(e,{hash:{},data:t}):(i=e&&e.cover,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+')"'}function d(e,t){var a,i,o="";return o+='<span class="mediaMiniCardAd__listItemMicro">',(i=n.micro)?a=i.call(e,{hash:{},data:t}):(i=e&&e.micro,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+"</span>"}function h(e,t){var a,i,o="";return o+='<span class="mediaMiniCardAd__listItemAddress">',(i=n.address)?a=i.call(e,{hash:{},data:t}):(i=e&&e.address,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var p,f,m,g="",_="function",v=this.escapeExpression,y=n.helperMissing,b=this;return g+='<h2 class="mediaMiniCardAd__title">'+v((f=n._t||t&&t._t,m={hash:{},data:i},f?f.call(t,"Предложения других организаций",m):y.call(t,"_t","Предложения других организаций",m)))+"</h2>",p=n["if"].call(t,t&&t.advLink,{hash:{},inverse:b.noop,fn:b.program(1,o,i),data:i}),(p||0===p)&&(g+=p),p=n["if"].call(t,t&&t.items,{hash:{},inverse:b.noop,fn:b.program(3,r,i),data:i}),(p||0===p)&&(g+=p),g},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaPhotoSlider=this.jst_modules.mediaPhotoSlider||{},this.jst_modules.mediaPhotoSlider.mediaPhotoSlider=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<nav class="mediaPhotoSlider__arrowNavigation"><i class="mediaPhotoSlider__arrow mediaPhotoSlider__arrowPrev">'+m((a=n.Icon||e&&e.Icon,i={hash:{"class":"mediaPhotoSlider__arrowIcon"},data:t},a?a.call(e,e&&e.arrowPrev,i):f.call(e,"Icon",e&&e.arrowPrev,i)))+'</i><i class="mediaPhotoSlider__arrow mediaPhotoSlider__arrowNext">'+m((a=n.Icon||e&&e.Icon,i={hash:{"class":"mediaPhotoSlider__arrowIcon"},data:t},a?a.call(e,e&&e.arrowNext,i):f.call(e,"Icon",e&&e.arrowNext,i)))+"</i></nav>"}function r(e,t){return" _preview"}function s(e,t){return" _default"}function l(e,t){return" _advertiser"}function c(e,t){var a,i,o="";return o+=' style="background-image: url(',(i=n.firstPhotoPreview)?a=i.call(e,{hash:{},data:t}):(i=e&&e.firstPhotoPreview,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=m(a)+')"'}function u(e,t){var a,i,o="";return o+='<div class="mediaPhotoSlider__controlWrapper">'+m((a=n.Icon||e&&e.Icon,i={hash:{"class":"mediaPhotoSlider__nophotoIcon"},data:t},a?a.call(e,e&&e.noPhotoIcon,i):f.call(e,"Icon",e&&e.noPhotoIcon,i)))+"</div>"}function d(e,t){var a,i,o="";return o+=m((a=n.Preloader||e&&e.Preloader,i={hash:{"class":"mediaPhotoSlider__spinner _type_mediaCard _scheme_circlesWhite"},data:t},a?a.call(e,i):f.call(e,"Preloader",i)))+m((a=n.Preloader||e&&e.Preloader,i={hash:{"class":"mediaPhotoSlider__spinner _type_mediaMiniCard _scheme_circlesVerySmall"},data:t},a?a.call(e,i):f.call(e,"Preloader",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p="",f=n.helperMissing,m=this.escapeExpression,g="function",_=this;return h=n.unless.call(t,t&&t.singlePhoto,{hash:{},inverse:_.noop,fn:_.program(1,o,i),data:i}),(h||0===h)&&(p+=h),p+='<div class="mediaPhotoSlider__photos"><div class="mediaPhotoSlider__photosItem _visible _first',h=n["if"].call(t,t&&t.showSmallPreview,{hash:{},inverse:_.noop,fn:_.program(3,r,i),data:i}),(h||0===h)&&(p+=h),h=n.unless.call(t,t&&t.firstPhoto,{hash:{},inverse:_.noop,fn:_.program(5,s,i),data:i}),(h||0===h)&&(p+=h),h=n["if"].call(t,t&&t.advertiser,{hash:{},inverse:_.noop,fn:_.program(7,l,i),data:i}),(h||0===h)&&(p+=h),p+='"',h=n["if"].call(t,t&&t.firstPhoto,{hash:{},inverse:_.noop,fn:_.program(9,c,i),data:i}),(h||0===h)&&(p+=h),p+="></div></div>",h=n["if"].call(t,t&&t.noPhotoIcon,{hash:{},inverse:_.noop,fn:_.program(11,u,i),data:i}),(h||0===h)&&(p+=h),h=n["if"].call(t,t&&t.firstPhoto,{hash:{},inverse:_.noop,fn:_.program(13,d,i),data:i}),(h||0===h)&&(p+=h),p},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaPresets=this.jst_modules.mediaPresets||{},this.jst_modules.mediaPresets.mediaPresets=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=p((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"otherItem",i):h.call(e,"p","otherItem",i)));
}function r(e,t){var a,i,o,r="";return r+='<li class="mediaPresets__listItem mediaPresets__preset',a=n["if"].call(e,e&&e.active,{hash:{},inverse:f.noop,fn:f.program(4,s,t),data:t}),(a||0===a)&&(r+=a),r+=" _type_",(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===m?i.call(e,{hash:{},data:t}):i),r+=p(a)+'" data-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===m?i.call(e,{hash:{},data:t}):i),r+=p(a)+'">'+p((i=n.Icon||e&&e.Icon,o={hash:{"class":"mediaPresets__listItemIcon"},data:t},i?i.call(e,e&&e.icon,o):h.call(e,"Icon",e&&e.icon,o))),(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===m?i.call(e,{hash:{},data:t}):i),r+=p(a)+"</li>"}function s(e,t){return" _active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h=n.helperMissing,p=this.escapeExpression,f=this,m="function";return d+='<div class="mediaPresets__other"><span class="mediaPresets__otherLink">'+p((c=n.Icon||t&&t.Icon,u={hash:{"class":"mediaPresets__otherLinkIcon"},data:i},c?c.call(t,"media_presets-other",u):h.call(t,"Icon","media_presets-other",u)))+'</span><ul class="mediaPresets__otherList">',l=n.each.call(t,t&&t.presets,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+='</ul></div><ul class="mediaPresets__list">',l=n.each.call(t,t&&t.presets,{hash:{},inverse:f.noop,fn:f.program(3,r,i),data:i}),(l||0===l)&&(d+=l),d+="</ul>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaRecoveryAds=this.jst_modules.mediaRecoveryAds||{},this.jst_modules.mediaRecoveryAds.mediaRecoveryAds=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<article class="mediaRecoveryAds__article\n        	',a=n["if"].call(e,e&&e.isAds,{hash:{},inverse:d.noop,fn:d.program(2,r,t),data:t}),(a||0===a)&&(s+=a),s+='"\n        	data-static-id="',(i=n.staticId)?a=i.call(e,{hash:{},data:t}):(i=e&&e.staticId,a=typeof i===h?i.call(e,{hash:{},data:t}):i),s+=p(a)+'" title="',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===h?i.call(e,{hash:{},data:t}):i),s+=p(a)+'">'+p((i=n.p||e&&e.p,o={hash:{},data:t},i?i.call(e,"firm",o):f.call(e,"p","firm",o)))+"</article>"}function r(e,t){return" _cute"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d=this,h="function",p=this.escapeExpression,f=n.helperMissing;return u+='<header class="mediaRecoveryAds__titleWrapper"><span class="mediaRecoveryAds__title">'+p((l=n._t||t&&t._t,c={hash:{},data:i},l?l.call(t,"Предложения других организаций",c):f.call(t,"_t","Предложения других организаций",c)))+'</span></header><div class="mediaRecoveryAds__articles">',s=n.each.call(t,t&&t.firms,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaResults=this.jst_modules.mediaResults||{},this.jst_modules.mediaResults.mediaResults=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<div class="mediaResults__filters',a=n["if"].call(e,e&&e.presetsEnabled,{hash:{},inverse:v.noop,fn:v.program(2,r,t),data:t}),(a||0===a)&&(s+=a),s+=' _minimized"><span class="mediaResults__filtersMinimize">'+b((i=n.Icon||e&&e.Icon,o={hash:{"class":"mediaResults__filtersMinimizeIcon"},data:t},i?i.call(e,"media_filters-close",o):y.call(e,"Icon","media_filters-close",o)))+'</span><div class="mediaResults__filtersScroller">'+b((i=n.module||e&&e.module,o={hash:{},data:t},i?i.call(e,"filters",o):y.call(e,"module","filters",o)))+b((i=n.Track||e&&e.Track,o={hash:{"class":"mediaResults__filtersTrack _scheme_mediaSmall"},data:t},i?i.call(e,o):y.call(e,"Track",o)))+'</div></div><span class="mediaResults__maximizeFilters">'+b((i=n.Icon||e&&e.Icon,o={hash:{"class":"mediaResults__maximizeFiltersIcon"},data:t},i?i.call(e,"media_filters-minified",o):y.call(e,"Icon","media_filters-minified",o)))+"</span>"}function r(e,t){return" _underPresets"}function s(e,t){return" _presets_enabled"}function l(e,t){var a,i,o="";return o+='<div class="mediaResults__presets">'+b((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,"mediaPresets",i):y.call(e,"module","mediaPresets",i)))+"</div>"}function c(e,t){return" _filtersEnabled"}function u(e,t){var a,i,o="";return o+=b((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"checkConnection404",i):y.call(e,"p","checkConnection404",i)))}function d(e,t){return" _filters_disabled"}function h(e,t){return" _ads_active"}function p(e,t){var n="";return n+='<div class="mediaResults__pagination">'+b(typeof e===k?e.apply(e):e)+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var f,m,g,_="",v=this,y=n.helperMissing,b=this.escapeExpression,k="function";return f=n["if"].call(t,t&&t.filtersEnabled,{hash:{},inverse:v.noop,fn:v.program(1,o,i),data:i}),(f||0===f)&&(_+=f),_+='<div class="mediaResults__scroller',f=n["if"].call(t,t&&t.presetsEnabled,{hash:{},inverse:v.noop,fn:v.program(4,s,i),data:i}),(f||0===f)&&(_+=f),_+='">',f=n["if"].call(t,t&&t.presetsEnabled,{hash:{},inverse:v.noop,fn:v.program(6,l,i),data:i}),(f||0===f)&&(_+=f),_+='<div class="mediaResults__main',f=n["if"].call(t,t&&t.filtersEnabled,{hash:{},inverse:v.noop,fn:v.program(8,c,i),data:i}),(f||0===f)&&(_+=f),_+=' _filtersCollapsed"><div class="mediaResults__notFound"><span class="mediaResults__notFoundImage"></span><p class="mediaResults__notFoundText">'+b((m=n._t||t&&t._t,g={hash:{},data:i},m?m.call(t,"Организаций не найдено. Попробуйте другие фильтры.",g):y.call(t,"_t","Организаций не найдено. Попробуйте другие фильтры.",g)))+"</p>",f=n["if"].call(t,t&&t.providers,{hash:{},inverse:v.noop,fn:v.program(10,u,i),data:i}),(f||0===f)&&(_+=f),_+='</div><div class="mediaResults__results',f=n.unless.call(t,t&&t.filtersEnabled,{hash:{},inverse:v.noop,fn:v.program(12,d,i),data:i}),(f||0===f)&&(_+=f),f=n["if"].call(t,t&&t.showAds,{hash:{},inverse:v.noop,fn:v.program(14,h,i),data:i}),(f||0===f)&&(_+=f),_+='">'+b((m=n.p||t&&t.p,g={hash:{},data:i},m?m.call(t,"results",g):y.call(t,"p","results",g)))+"</div>"+b((m=n.Preloader||t&&t.Preloader,g={hash:{"class":"mediaResults__resultsPreloader _scheme_circles"},data:i},m?m.call(t,g):y.call(t,"Preloader",g))),m=n.module||t&&t.module,g={hash:{},inverse:v.noop,fn:v.program(16,p,i),data:i},f=m?m.call(t,"pagination",g):y.call(t,"module","pagination",g),(f||0===f)&&(_+=f),_+="</div>"+b((m=n.Track||t&&t.Track,g={hash:{"class":t&&t.trackClass},data:i},m?m.call(t,g):y.call(t,"Track",g)))+'<div class="mediaResults__resizeButton"></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaReview=this.jst_modules.mediaReview||{},this.jst_modules.mediaReview.mediaReview=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<h4 class="mediaReview__recommendLast">',a=n["if"].call(e,e&&e.onlyOneReview,{hash:{},inverse:B.program(4,s,t),fn:B.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</h4>"}function r(e,t){var a,i,o="";return o+=N((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Отзыв от посетителя",i):R.call(e,"_t","Отзыв от посетителя",i)))}function s(e,t){var a,i="";return a=n["if"].call(e,e&&e.flampReviews,{hash:{},inverse:B.program(7,c,t),fn:B.program(5,l,t),data:t}),(a||0===a)&&(i+=a),i}function l(e,t){var a,i,o,r="";return i=n._hnt||e&&e._hnt,o={hash:{wrap__tag:"a",wrap__href:e&&e.tabUrl,wrap__class:"mediaReview__recommendLastTotal _type_reviews"},data:t},a=i?i.call(e,"Один из&nbsp;%{Wrap %1 отзыва}","Один из&nbsp;%{Wrap %1 отзывов}","Один из&nbsp;%{Wrap %1 отзывов}",e&&e.total,o):R.call(e,"_hnt","Один из&nbsp;%{Wrap %1 отзыва}","Один из&nbsp;%{Wrap %1 отзывов}","Один из&nbsp;%{Wrap %1 отзывов}",e&&e.total,o),(a||0===a)&&(r+=a),r}function c(e,t){var a,i,o="";return o+=N((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Отзывы посетителей",i):R.call(e,"_t","Отзывы посетителей",i)))}function u(e,t){return"<!--googleoff: all--><!--noindex-->"}function d(e,t){var a,i,o="";return o+=N((a=n.Rating||e&&e.Rating,i={hash:{style:"mediumBlue2","class":"mediaReview__stars"},data:t},a?a.call(e,e&&e.stars,i):R.call(e,"Rating",e&&e.stars,i)))}function h(e,t){var a,i,o="";return o+='<div class="mediaReview__recommend">'+N((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Рекомендую",i):R.call(e,"_t","Рекомендую",i)))+"</div>"}function p(e,t){var a,i="";return i+='<div class="mediaReview__user">',a=n["if"].call(e,(a=e&&e.user,null==a||a===!1?a:a.avatar),{hash:{},inverse:B.noop,fn:B.program(16,f,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.user,null==a||a===!1?a:a.name),{hash:{},inverse:B.noop,fn:B.program(18,m,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.when,{hash:{},inverse:B.noop,fn:B.program(20,g,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function f(e,t){var n,a="";return a+='<span class="mediaReview__userAvatar" style="background-image: url('+N((n=e&&e.user,n=null==n||n===!1?n:n.avatar,typeof n===F?n.apply(e):n))+')"></span>'}function m(e,t){var n,a="";return a+='<h3 class="mediaReview__userName">'+N((n=e&&e.user,n=null==n||n===!1?n:n.name,typeof n===F?n.apply(e):n))+"</h3>"}function g(e,t){var a,i,o="";return o+='<span class="mediaReview__infoWhen">',(i=n.when)?a=i.call(e,{hash:{},data:t}):(i=e&&e.when,a=typeof i===F?i.call(e,{hash:{},data:t}):i),o+=N(a)+"</span>"}function _(e,t){var a,i,o="";return o+='<div class="mediaReview__filialAddress">'+N((a=n.Link||e&&e.Link,i={hash:{"class":"_undashed mediaReview__filialAddressLink","data-id":e&&e.id},data:t},a?a.call(e,e&&e.address,i):R.call(e,"Link",e&&e.address,i)))+"</div>"}function v(e,t){var a,i,o="";return o+='<div class="mediaReview__photo" style="background-image: url(',(i=n.photo)?a=i.call(e,{hash:{},data:t}):(i=e&&e.photo,a=typeof i===F?i.call(e,{hash:{},data:t}):i),o+=N(a)+')"></div>'}function y(e,t){return" _cutText"}function b(e,t){var a,i,o="";return(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===F?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o}function k(e,t){var a,i,o="";return o+=N((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"У этой организации ещё нет отзывов. Напишите первый.",i):R.call(e,"_t","У этой организации ещё нет отзывов. Напишите первый.",i)))}function w(e,t){var a,i="";return a=n["if"].call(e,e&&e.textCollapsable,{hash:{},inverse:B.noop,fn:B.program(33,x,t),data:t}),(a||0===a)&&(i+=a),i}function x(e,t){var a,i,o="";return o+='<span class="mediaReview__textMore">'+N((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Читать полностью",i):R.call(e,"_t","Читать полностью",i)))+"</span>"}function C(e,t){var a,i,o,r="";return r+='<span class="mediaReview__infoLikes">'+N((i=n.Icon||e&&e.Icon,o={hash:{"class":"mediaReview__infoLikesIcon"},data:t},i?i.call(e,"media_review-like",o):R.call(e,"Icon","media_review-like",o))),(i=n.likes)?a=i.call(e,{hash:{},data:t}):(i=e&&e.likes,a=typeof i===F?i.call(e,{hash:{},data:t}):i),r+=N(a)+"</span>"}function L(e,t){var a,i,o,r="";return r+='<a class="mediaReview__iconLink" href="',(i=n.url)?a=i.call(e,{hash:{},data:t}):(i=e&&e.url,a=typeof i===F?i.call(e,{hash:{},data:t}):i),r+=N(a)+'" target="_blank"><i class="mediaReview__icon _type_',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===F?i.call(e,{hash:{},data:t}):i),r+=N(a)+'">'+N((i=n.Icon||e&&e.Icon,o={hash:{"class":"mediaReview__iconSvg"},data:t},i?i.call(e,e&&e.icon,o):R.call(e,"Icon",e&&e.icon,o)))+"</i></a>"}function I(e,t){var a,i,o,r="";return r+='<i class="mediaReview__icon _type_',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===F?i.call(e,{hash:{},data:t}):i),r+=N(a)+'">'+N((i=n.Icon||e&&e.Icon,o={hash:{"class":"mediaReview__iconSvg"},data:t},i?i.call(e,e&&e.icon,o):R.call(e,"Icon",e&&e.icon,o)))+"</i>"}function T(e,t){var a,i,o,r="";return r+='<a href="',(i=n.leaveReviewUrl)?a=i.call(e,{hash:{},data:t}):(i=e&&e.leaveReviewUrl,a=typeof i===F?i.call(e,{hash:{},data:t}):i),r+=N(a)+'" target="_blank" class="mediaReview__leaveReview">'+N((i=n.Icon||e&&e.Icon,o={hash:{"class":"mediaReview__leaveReviewIcon"},data:t},i?i.call(e,"media_flamp",o):R.call(e,"Icon","media_flamp",o)))+N((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Написать отзыв на Флампе",o):R.call(e,"_t","Написать отзыв на Флампе",o)))+"</a>"}function S(e,t){var a,i="";return a=n.unless.call(e,e&&e.flampReviews,{hash:{},inverse:B.noop,fn:B.program(44,E,t),data:t}),(a||0===a)&&(i+=a),i}function E(e,t){var a,i,o,r="";return r+='<a href="',(i=n.tabUrl)?a=i.call(e,{hash:{},data:t}):(i=e&&e.tabUrl,a=typeof i===F?i.call(e,{hash:{},data:t}):i),r+=N(a)+'" class="mediaReview__showReviews">'+N((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Посмотреть все отзывы",o):R.call(e,"_t","Посмотреть все отзывы",o)))+"</a>"}function P(e,t){return"<!--/noindex--><!--googleon: all-->"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var j,M,A,D="",R=n.helperMissing,N=this.escapeExpression,B=this,F="function";return j=n["if"].call(t,t&&t.showReviewTitle,{hash:{},inverse:B.noop,fn:B.program(1,o,i),data:i}),(j||0===j)&&(D+=j),j=n["if"].call(t,t&&t.noIndex,{hash:{},inverse:B.noop,fn:B.program(9,u,i),data:i}),(j||0===j)&&(D+=j),D+='<div class="mediaReview__block">',j=n["if"].call(t,t&&t.stars,{hash:{},inverse:B.noop,fn:B.program(11,d,i),data:i}),(j||0===j)&&(D+=j),j=n["if"].call(t,t&&t.recommend,{hash:{},inverse:B.noop,fn:B.program(13,h,i),data:i}),(j||0===j)&&(D+=j),j=n["if"].call(t,t&&t.user,{hash:{},inverse:B.noop,fn:B.program(15,p,i),data:i}),(j||0===j)&&(D+=j),j=n["if"].call(t,t&&t.address,{hash:{},inverse:B.noop,fn:B.program(22,_,i),data:i}),(j||0===j)&&(D+=j),j=n["if"].call(t,t&&t.photo,{hash:{},inverse:B.noop,fn:B.program(24,v,i),data:i}),(j||0===j)&&(D+=j),D+='<div class="mediaReview__scrollWrapper"><div class="mediaReview__scroller mediaReviews__reviewsScroller _overflow"><div class="mediaReview__text',j=n["if"].call(t,t&&t.cutText,{hash:{},inverse:B.noop,fn:B.program(26,y,i),data:i}),(j||0===j)&&(D+=j),D+='"><div class="mediaReview__textInner">',j=n["if"].call(t,t&&t.text,{hash:{},inverse:B.program(30,k,i),fn:B.program(28,b,i),data:i}),(j||0===j)&&(D+=j),D+="</div>",j=n["if"].call(t,t&&t.text,{hash:{},inverse:B.noop,fn:B.program(32,w,i),data:i}),(j||0===j)&&(D+=j),D+="</div>"+N((M=n.Track||t&&t.Track,A={hash:{"class":"mediaReview__track _scheme_media"},data:i},M?M.call(t,A):R.call(t,"Track",A)))+'</div></div><div class="mediaReview__info">',j=n["if"].call(t,t&&t.likes,{hash:{},inverse:B.noop,fn:B.program(35,C,i),data:i}),(j||0===j)&&(D+=j),D+='<div class="mediaReview__reviewSource">',j=n["if"].call(t,t&&t.url,{hash:{},inverse:B.program(39,I,i),fn:B.program(37,L,i),data:i}),(j||0===j)&&(D+=j),D+="</div></div>",j=n["if"].call(t,t&&t.showLeaveReviewBtn,{hash:{},inverse:B.noop,fn:B.program(41,T,i),data:i}),(j||0===j)&&(D+=j),j=n["if"].call(t,t&&t.showReviewTitle,{hash:{},inverse:B.noop,fn:B.program(43,S,i),data:i}),(j||0===j)&&(D+=j),D+="</div>",j=n["if"].call(t,t&&t.noIndex,{hash:{},inverse:B.noop,fn:B.program(46,P,i),data:i}),(j||0===j)&&(D+=j),D+=N((M=n.module||t&&t.module,A={hash:{},data:i},M?M.call(t,"jsonld",A):R.call(t,"module","jsonld",A)))},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaRoomCard=this.jst_modules.mediaRoomCard||{},this.jst_modules.mediaRoomCard.mediaRoomCard=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<h4 class="mediaRoomCard__title">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===E?i.call(e,{hash:{},data:t}):i),o+=P(a)+"</h4>"}function r(e,t){var n="";return n+='<div class="mediaRoomCard__gallery">'+P(typeof e===E?e.apply(e):e)+"</div>"}function s(e,t){var a,i,o="";return o+='<div class="mediaRoomCard__cover" style="background-image: url(',(i=n.cover)?a=i.call(e,{hash:{},data:t}):(i=e&&e.cover,a=typeof i===E?i.call(e,{hash:{},data:t}):i),o+=P(a)+')"></div>'}function l(e,t){var a,i,o="";return o+='<span class="mediaRoomCard__type">',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===E?i.call(e,{hash:{},data:t}):i),o+=P(a)+"</span>"}function c(e,t){var a,i="";return i+='<div class="mediaRoomCard__price',a=n["if"].call(e,(a=e&&e.price,null==a||a===!1?a:a.schedule),{hash:{},inverse:j.noop,fn:j.program(10,u,t),data:t}),(a||0===a)&&(i+=a),i+='">'+P((a=e&&e.price,a=null==a||a===!1?a:a.value,typeof a===E?a.apply(e):a))+'&#8201;<span class="mediaRoomCard__priceCurrency _'+P((a=e&&e.price,a=null==a||a===!1?a:a.currency,a=null==a||a===!1?a:a.code,typeof a===E?a.apply(e):a))+'">'+P((a=e&&e.price,a=null==a||a===!1?a:a.currency,a=null==a||a===!1?a:a.symbol,typeof a===E?a.apply(e):a))+"</span>",a=n["if"].call(e,(a=e&&e.price,null==a||a===!1?a:a.schedule),{hash:{},inverse:j.noop,fn:j.program(12,d,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.price,null==a||a===!1?a:a.schedule),{hash:{},inverse:j.noop,fn:j.program(14,h,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function u(e,t){return" _tooltip"}function d(e,t){return'<span class="mediaRoomCard__moreDetails"> подробнее</span>'}function h(e,t){var a,i="";return i+='<div class="mediaRoomCard__priceTooltip">',a=n.each.call(e,(a=e&&e.price,null==a||a===!1?a:a.schedule),{hash:{},inverse:j.noop,fn:j.program(15,p,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function p(e,t){var a,i,o="";return o+='<h4 class="mediaRoomCard__priceTooltipDays">',(i=n.weekdays)?a=i.call(e,{hash:{},data:t}):(i=e&&e.weekdays,a=typeof i===E?i.call(e,{hash:{},data:t}):i),o+=P(a)+'</h4><ul class="mediaRoomCard__priceTooltipTime">',a=n.each.call(e,e&&e.prices,{hash:{},inverse:j.noop,fn:j.program(16,f,t),data:t}),(a||0===a)&&(o+=a),o+="</ul>"}function f(e,t){var a,i,o="";return o+='<li class="mediaRoomCard__priceTooltipTimeItem"><span class="mediaRoomCard__priceTooltipTimeLabel">',(i=n.timeRange)?a=i.call(e,{hash:{},data:t}):(i=e&&e.timeRange,a=typeof i===E?i.call(e,{hash:{},data:t}):i),o+=P(a)+'</span><span class="mediaRoomCard__priceTooltipTimePrice">',(i=n.price)?a=i.call(e,{hash:{},data:t}):(i=e&&e.price,a=typeof i===E?i.call(e,{hash:{},data:t}):i),o+=P(a)+'&nbsp;<span class="mediaRoomCard__priceTooltipCurrency _'+P((a=e&&e.currency,a=null==a||a===!1?a:a.code,typeof a===E?a.apply(e):a))+'">'+P((a=e&&e.currency,a=null==a||a===!1?a:a.symbol,typeof a===E?a.apply(e):a))+"</span></span></li>"}function m(e,t){var a,i="";return i+='<ul class="mediaRoomCard__attributes mediaRoomCard__textBlock',a=n["if"].call(e,e&&e.attrsMore,{hash:{},inverse:j.noop,fn:j.program(19,g,t),data:t}),(a||0===a)&&(i+=a),i+='">',a=n.each.call(e,e&&e.attrs,{hash:{},inverse:j.noop,fn:j.program(21,_,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>",a=n["if"].call(e,e&&e.attrsMore,{hash:{},inverse:j.noop,fn:j.program(23,v,t),data:t}),(a||0===a)&&(i+=a),i}function g(e,t){return" _block_attributes _textCollapsed"}function _(e,t){var n="";return n+='<li title="'+P(typeof e===E?e.apply(e):e)+'" class="mediaRoomCard__attributesItem">'+P(typeof e===E?e.apply(e):e)+"</li>"}function v(e,t){var a,i,o="";return o+='<span class="mediaRoomCard__more _block_attributes">'+P((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Читать полностью",i):M.call(e,"_t","Читать полностью",i)))+"</span>"}function y(e,t){var a,i,o,r="";return r+='<h3 class="mediaRoomCard__subtitle">'+P((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Акции и предложения",o):M.call(e,"_t","Акции и предложения",o)))+'</h3><div class="mediaRoomCard__details">',(i=n.details)?a=i.call(e,{hash:{},data:t}):(i=e&&e.details,a=typeof i===E?i.call(e,{hash:{},data:t}):i),r+=P(a)+"</div>"}function b(e,t){var a,i,o,r="";return r+='<h3 class="mediaRoomCard__subtitle">'+P((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"О номере",o):M.call(e,"_t","О номере",o)))+"</h3>",a=n["if"].call(e,e&&e.isAboutTab,{hash:{},inverse:j.program(33,C,t),fn:j.program(28,k,t),data:t}),(a||0===a)&&(r+=a),r}function k(e,t){var a,i,o,r="";return r+='<div class="mediaRoomCard__descriptionWrapper"><div class="mediaRoomCard__textBlock ',a=n["if"].call(e,e&&e.descriptionMore,{hash:{},inverse:j.noop,fn:j.program(29,w,t),data:t}),(a||0===a)&&(r+=a),r+='"><div class="mediaRoomCard__description">',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===E?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+="</div>"+P((i=n.Track||e&&e.Track,o={hash:{"class":"mediaRoomCard__track _scheme_media"},data:t},i?i.call(e,o):M.call(e,"Track",o)))+"</div>",a=n["if"].call(e,e&&e.descriptionMore,{hash:{},inverse:j.noop,fn:j.program(31,x,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function w(e,t){return" _block_description _textCollapsed"}function x(e,t){var a,i,o="";return o+='<span class="mediaRoomCard__more _block_description">'+P((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Читать полностью",i):M.call(e,"_t","Читать полностью",i)))+"</span>"}function C(e,t){var a,i,o,r="";return r+='<div class="mediaRoomCard__scrollerWrapper mediaRoomCard__textBlock ',a=n["if"].call(e,e&&e.descriptionMore,{hash:{},inverse:j.noop,fn:j.program(29,w,t),data:t}),(a||0===a)&&(r+=a),r+='"><div class="mediaRoomCard__scroller _overflow"><div class="mediaRoomCard__description">',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===E?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+="</div>"+P((i=n.Track||e&&e.Track,o={hash:{"class":"mediaRoomCard__track _scheme_media"},data:t},i?i.call(e,o):M.call(e,"Track",o)))+"</div></div>",a=n["if"].call(e,e&&e.descriptionMore,{hash:{},inverse:j.noop,fn:j.program(31,x,t),data:t}),(a||0===a)&&(r+=a),r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var L,I,T,S="",E="function",P=this.escapeExpression,j=this,M=n.helperMissing;return L=n["if"].call(t,t&&t.isAboutTab,{hash:{},inverse:j.noop,fn:j.program(1,o,i),data:i}),(L||0===L)&&(S+=L),S+='<div class="mediaRoomCard__main">',I=n.module||t&&t.module,T={hash:{},inverse:j.noop,fn:j.program(3,r,i),data:i},L=I?I.call(t,"mediaPhotoSlider",T):M.call(t,"module","mediaPhotoSlider",T),(L||0===L)&&(S+=L),L=n["if"].call(t,t&&t.cover,{hash:{},inverse:j.noop,fn:j.program(5,s,i),data:i}),(L||0===L)&&(S+=L),S+='<i class="mediaRoomCard__thermometer _type_',(I=n.temperatureType)?L=I.call(t,{hash:{},data:i}):(I=t&&t.temperatureType,L=typeof I===E?I.call(t,{hash:{},data:i}):I),S+=P(L)+'">'+P((I=n.Icon||t&&t.Icon,T={hash:{"class":"mediaRoomCard__thermometerIcon"},data:i},I?I.call(t,t&&t.temperatureIcon,T):M.call(t,"Icon",t&&t.temperatureIcon,T)))+"</i>",L=n.unless.call(t,t&&t.isAboutTab,{hash:{},inverse:j.noop,fn:j.program(1,o,i),data:i}),(L||0===L)&&(S+=L),L=n["if"].call(t,t&&t.type,{hash:{},inverse:j.noop,fn:j.program(7,l,i),data:i}),(L||0===L)&&(S+=L),L=n["if"].call(t,t&&t.price,{hash:{},inverse:j.noop,fn:j.program(9,c,i),data:i}),(L||0===L)&&(S+=L),L=n["if"].call(t,t&&t.attrs,{hash:{},inverse:j.noop,fn:j.program(18,m,i),data:i}),(L||0===L)&&(S+=L),L=n["if"].call(t,t&&t.details,{hash:{},inverse:j.noop,fn:j.program(25,y,i),data:i}),(L||0===L)&&(S+=L),L=n["if"].call(t,t&&t.description,{hash:{},inverse:j.noop,fn:j.program(27,b,i),data:i}),(L||0===L)&&(S+=L),S+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaSchedule=this.jst_modules.mediaSchedule||{},this.jst_modules.mediaSchedule.mediaSchedule=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="mediaSchedule__inline">',a=e&&e.inline,a=null==a||a===!1?a:a.work,a=typeof a===f?a.apply(e):a,(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.inline,null==a||a===!1?a:a["break"]),{hash:{},inverse:g.noop,fn:g.program(2,r,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.comment,{hash:{},inverse:g.noop,fn:g.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function r(e,t){var n,a="";return a+='<div class="mediaSchedule__inlineLunch">',n=e&&e.inline,n=null==n||n===!1?n:n["break"],n=typeof n===f?n.apply(e):n,(n||0===n)&&(a+=n),a+="</div>"}function s(e,t){var a,i,o="";return o+='<div class="mediaSchedule__comment">',(i=n.comment)?a=i.call(e,{hash:{},data:t}):(i=e&&e.comment,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=m(a)+"</div>"}function l(e,t){var a,i="";return i+='<div class="mediaSchedule__block"><div class="mediaSchedule__tableWrapper">',a=n["if"].call(e,e&&e.week,{hash:{},inverse:g.noop,fn:g.program(7,c,t),data:t}),(a||0===a)&&(i+=a),i+="</div>",a=n["if"].call(e,e&&e.comment,{hash:{},inverse:g.noop,fn:g.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function c(e,t){var a,i,o="";return o+=m((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"table",i):_.call(e,"p","table",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d,h,p="",f="function",m=this.escapeExpression,g=this,_=n.helperMissing;return p+='<h4 class="mediaSchedule__today">'+m((d=n._t||t&&t._t,h={hash:{},data:i},d?d.call(t,"Время работы",h):_.call(t,"_t","Время работы",h)))+"</h4>",u=n["if"].call(t,t&&t.inline,{hash:{},inverse:g.program(6,l,i),fn:g.program(1,o,i),data:i}),(u||0===u)&&(p+=u),p},this.jst_modules=this.jst_modules||{},this.jst_modules.metroCard=this.jst_modules.metroCard||{},this.jst_modules.metroCard.metroCard=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return i=n.Link||e&&e.Link,o={hash:{tag:"h1","class":"_large metroCard__headerTitle _undashed"},inverse:C.noop,fn:C.program(2,r,t),data:t},a=i?i.call(e,o):L.call(e,"Link",o),(a||0===a)&&(s+=a),s}function r(e,t){var a,i,o="";return o+='<span class="metroCard__headerTitleMarker _',(i=n.city)?a=i.call(e,{hash:{},data:t}):(i=e&&e.city,a=typeof i===w?i.call(e,{hash:{},data:t}):i),o+=x(a)+'" style="background-color: '+x((a=e&&e.line,a=null==a||a===!1?a:a.color,typeof a===w?a.apply(e):a))+'"></span>',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===w?i.call(e,{hash:{},data:t}):i),o+=x(a)}function s(e,t){var a,i,o="";return o+='<div class="metroCard__drilldown">',(i=n.location)?a=i.call(e,{hash:{},data:t}):(i=e&&e.location,a=typeof i===w?i.call(e,{hash:{},data:t}):i),o+=x(a)+"</div>"}function l(e,t){var a,i="";return i+='<div class="metroCard__crossing"><div class="metroCard__crossingTitle">'+x((a=e&&e.crossing,a=null==a||a===!1?a:a.title,typeof a===w?a.apply(e):a))+"</div>",a=n.each.call(e,(a=e&&e.crossing,null==a||a===!1?a:a.items),{hash:{},inverse:C.noop,fn:C.program(7,c,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function c(e,t){var a,i,o,r="";return r+='<article class="metroCard__crossingItem"><span class="metroCard__crossingItemMarker" style="border-color: '+x((a=e&&e.line,a=null==a||a===!1?a:a.color,typeof a===w?a.apply(e):a))+'"></span>'+x((i=n.Link||e&&e.Link,o={hash:{href:e&&e.seoLinkStop,"class":"metroCard__crossingItemTitle _undashed","data-station-id":e&&e.id},data:t},i?i.call(e,e&&e.name,o):L.call(e,"Link",e&&e.name,o)))+",\n\n                            ",a=n["if"].call(e,(a=e&&e.line,null==a||a===!1?a:a.name),{hash:{},inverse:C.noop,fn:C.program(8,u,t),data:t}),(a||0===a)&&(r+=a),r+="</article>"}function u(e,t){var n,a="";return a+='<span class="metroCard__crossingItemLine">'+x((n=e&&e.line,n=null==n||n===!1?n:n.name,typeof n===w?n.apply(e):n))+"</span>"}function d(e,t){var a,i,o="";return o+='<div class="metroCard__scheduleWrapper">'+x((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,"schedule",i):L.call(e,"module","schedule",i)))+"</div>"}function h(e,t){var n="";return n+='<div class="metroCard__actions">'+x(typeof e===w?e.apply(e):e)+"</div>"}function p(e,t){var a,i="";return i+='<div class="metroCard__directions" style="border-color: '+x((a=e&&e.line,a=null==a||a===!1?a:a.color,typeof a===w?a.apply(e):a))+'">',a=n.each.call(e,e&&e.routesList,{hash:{},inverse:C.noop,fn:C.program(15,f,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function f(e,t){var a,i,o="";return o+=x((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):L.call(e,"module",e,i)))}function m(e,t){var a,i,o,r="";return r+='<div class="metroCard__footerItem metroCard__footerAdv">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.advLink,null==a||a===!1?a:a.href),target:"_blank","class":"metroCard__footerItemLink _undashed metroCard__footerAdvLink"},inverse:C.noop,fn:C.program(18,g,t),data:t},a=i?i.call(e,o):L.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function g(e,t){var a,i,o="";return o+=x((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Реклама в 2ГИС",i):L.call(e,"_t","Реклама в 2ГИС",i)))}function _(e,t){var a,i,o="";return o+=x((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Ошибка в данных",i):L.call(e,"_t","Ошибка в данных",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var v,y,b,k="",w="function",x=this.escapeExpression,C=this,L=n.helperMissing;return k+='<div class="metroCard__scroller"><div class="metroCard__scrollerIn"><div class="metroCard__content"><div class="metroCard__headerWrapper">',y=n.Fix||t&&t.Fix,b={hash:{"class":"metroCard__header _innerHeader",tag:"header"},inverse:C.noop,fn:C.program(1,o,i),data:i},v=y?y.call(t,b):L.call(t,"Fix",b),(v||0===v)&&(k+=v),k+='</div><div class="metroCard__type"><span class="metroCard__typeLabel">',(y=n.type)?v=y.call(t,{hash:{},data:i}):(y=t&&t.type,v=typeof y===w?y.call(t,{hash:{},data:i}):y),k+=x(v)+', </span><span class="metroCard__typeLine">'+x((y=n.Link||t&&t.Link,b={hash:{href:t&&t.seoLinkLine,"class":"metroCard__typeLineTitle _undashed"},data:i},y?y.call(t,(v=t&&t.line,null==v||v===!1?v:v.name),b):L.call(t,"Link",(v=t&&t.line,null==v||v===!1?v:v.name),b)))+"</span>",v=n["if"].call(t,t&&t.location,{hash:{},inverse:C.noop,fn:C.program(4,s,i),data:i}),(v||0===v)&&(k+=v),k+="</div>",v=n["if"].call(t,t&&t.crossing,{hash:{},inverse:C.noop,fn:C.program(6,l,i),data:i}),(v||0===v)&&(k+=v),v=n["if"].call(t,t&&t.schedule,{hash:{},inverse:C.noop,fn:C.program(10,d,i),data:i}),(v||0===v)&&(k+=v),y=n.module||t&&t.module,b={hash:{},inverse:C.noop,fn:C.program(12,h,i),data:i},v=y?y.call(t,"cardActions",b):L.call(t,"module","cardActions",b),(v||0===v)&&(k+=v),k+=x((y=n.module||t&&t.module,b={hash:{},data:i},y?y.call(t,"promoMobile",b):L.call(t,"module","promoMobile",b))),v=n["if"].call(t,t&&t.routesList,{hash:{},inverse:C.noop,fn:C.program(14,p,i),data:i}),(v||0===v)&&(k+=v),k+='<div class="metroCard__googletag"></div></div><footer class="metroCard__footer"><div class="metroCard__footerContent">',v=n["if"].call(t,t&&t.advLink,{hash:{},inverse:C.noop,fn:C.program(17,m,i),data:i}),(v||0===v)&&(k+=v),k+=' <div class="metroCard__footerItem metroCard__footerBugReport">',y=n.Link||t&&t.Link,b={hash:{"class":"metroCard__footerItemLink metroCard__footerBugReportLink _undashed"},inverse:C.noop,fn:C.program(20,_,i),data:i},v=y?y.call(t,b):L.call(t,"Link",b),(v||0===v)&&(k+=v),k+="</div></div></footer></div>",(y=n.Track)?v=y.call(t,{hash:{},data:i}):(y=t&&t.Track,v=typeof y===w?y.call(t,{hash:{},data:i}):y),k+=x(v)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.microSchedule=this.jst_modules.microSchedule||{},this.jst_modules.microSchedule.microSchedule=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<div class="microSchedule__title">',(r=n.title)?o=r.call(t,{hash:{},data:i}):(r=t&&t.title,o=typeof r===c?r.call(t,{hash:{},data:i}):r),(o||0===o)&&(l+=o),l+='</div><div class="microSchedule__status">',(r=n.status)?o=r.call(t,{hash:{},data:i}):(r=t&&t.status,o=typeof r===c?r.call(t,{hash:{},data:i}):r),l+=u(o)+"</div>"+u((r=n.module||t&&t.module,s={hash:{},data:i},r?r.call(t,"holidayWarning",s):d.call(t,"module","holidayWarning",s)))},this.jst_modules=this.jst_modules||{},this.jst_modules.miniCard=this.jst_modules.miniCard||{},this.jst_modules.miniCard.miniCard=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<div class="miniCard__recoveryHeader"><span class="miniCard__recoveryHeaderItem _text">'+G((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Предложения других организаций",o):H.call(e,"_t","Предложения других организаций",o)))+'</span><span class="miniCard__recoveryHeaderItem _link">',i=n.Link||e&&e.Link,o={hash:{"class":"miniCard__recoveryHeaderItemLink",href:(a=e&&e.advLink,null==a||a===!1?a:a.href),target:"_blank"},inverse:W.noop,fn:W.program(2,r,t),data:t},a=i?i.call(e,o):H.call(e,"Link",o),(a||0===a)&&(s+=a),s+="</span></div>"}function r(e,t){var a,i,o="";return o+=G((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Реклама в 2ГИС",i):H.call(e,"_t","Реклама в 2ГИС",i)));
}function s(e,t){var a,i="";return i+='<aside class="miniCard__aside">',a=n["if"].call(e,e&&e.photosIcon,{hash:{},inverse:W.noop,fn:W.program(5,l,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.rating,{hash:{},inverse:W.noop,fn:W.program(7,c,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.photosPreview,{hash:{},inverse:W.noop,fn:W.program(10,d,t),data:t}),(a||0===a)&&(i+=a),i+="</aside>"}function l(e,t){return'<div class="miniCard__photosIcon"></div>'}function c(e,t){var a,i,o,r="";return i=n.Rating||e&&e.Rating,o={hash:{"class":"miniCard__rating",style:"minicard"},inverse:W.noop,fn:W.program(8,u,t),data:t},a=i?i.call(e,e&&e.rating,o):H.call(e,"Rating",e&&e.rating,o),(a||0===a)&&(r+=a),r}function u(e,t){var n="";return n}function d(e,t){var a,i,o="";return o+='<div class="miniCard__photosPreview _type_',(i=n.photoType)?a=i.call(e,{hash:{},data:t}):(i=e&&e.photoType,a=typeof i===V?i.call(e,{hash:{},data:t}):i),o+=G(a)+'" style="background-image: url(',(i=n.photosPreview)?a=i.call(e,{hash:{},data:t}):(i=e&&e.photosPreview,a=typeof i===V?i.call(e,{hash:{},data:t}):i),o+=G(a)+')"></div>'}function h(e,t){return" _booklet"}function p(e,t){var a,i,o="";return o+=" _transportType_",(i=n.transportType)?a=i.call(e,{hash:{},data:t}):(i=e&&e.transportType,a=typeof i===V?i.call(e,{hash:{},data:t}):i),o+=G(a)}function f(e,t){var n,a="";return a+=" _city_"+G((n=e&&e.city,n=null==n||n===!1?n:n.code,typeof n===V?n.apply(e):n))}function m(e,t){var a,i,o="";return o+=' style="border-color:',(i=n.transportColor)?a=i.call(e,{hash:{},data:t}):(i=e&&e.transportColor,a=typeof i===V?i.call(e,{hash:{},data:t}):i),o+=G(a)+'"'}function g(e,t){var a,i,o="";return o+='<span class="miniCard__headerNote">',(i=n.note)?a=i.call(e,{hash:{},data:t}):(i=e&&e.note,a=typeof i===V?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</span>"}function _(e,t){var a,i,o="";return o+='<div class="miniCard__description">',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===V?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function v(e,t){var a,i,o="";return o+='<div class="miniCard__micro"',a=n["if"].call(e,e&&e.showAdvWarning,{hash:{},inverse:W.noop,fn:W.program(25,y,t),data:t}),(a||0===a)&&(o+=a),o+=">",(i=n.micro)?a=i.call(e,{hash:{},data:t}):(i=e&&e.micro,a=typeof i===V?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function y(e,t){var a,i,o="";return o+=' data-adv="'+G((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"реклама",i):H.call(e,"_gg","реклама",i)))+'"'}function b(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.floors,null==a||a===!1?a:a.floorName),{hash:{},inverse:W.noop,fn:W.program(28,k,t),data:t}),(a||0===a)&&(i+=a),i}function k(e,t){var a,i,o,r="";return r+='<div class="miniCard__desc">'+G((i=n._pt||e&&e._pt,o={hash:{},data:t},i?i.call(e,"Номер этажа","%1 этаж",(a=e&&e.floors,null==a||a===!1?a:a.floorName),o):H.call(e,"_pt","Номер этажа","%1 этаж",(a=e&&e.floors,null==a||a===!1?a:a.floorName),o)))+"</div>"}function w(e,t){var a,i="";return a=n["if"].call(e,e&&e.phone,{hash:{},inverse:W.program(33,C,t),fn:W.program(31,x,t),data:t}),(a||0===a)&&(i+=a),i}function x(e,t){var a,i,o="";return o+='<div class="miniCard__desc _phone">'+G((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"phone",i):H.call(e,"p","phone",i)))+'<div class="miniCard__filialsWrapper">'+G((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"filials",i):H.call(e,"p","filials",i)))+"</div></div>"}function C(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.desc,null==a||a===!1?a:a.link),{hash:{},inverse:W.program(36,I,t),fn:W.program(34,L,t),data:t}),(a||0===a)&&(i+=a),i}function L(e,t){var a,i,o,r="";return r+='<div class="miniCard__desc"><span class="miniCard__descText">'+G((i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.desc,null==a||a===!1?a:a.link),target:"_blank","class":"_scheme_none miniCard__descWebsite"},data:t},i?i.call(e,(a=e&&e.desc,null==a||a===!1?a:a.text),o):H.call(e,"Link",(a=e&&e.desc,null==a||a===!1?a:a.text),o)))+'</span><div class="miniCard__filialsWrapper">'+G((i=n.p||e&&e.p,o={hash:{},data:t},i?i.call(e,"filials",o):H.call(e,"p","filials",o)))+"</div></div>"}function I(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.desc,null==a||a===!1?a:a.address),{hash:{},inverse:W.program(39,S,t),fn:W.program(37,T,t),data:t}),(a||0===a)&&(i+=a),i}function T(e,t){var a,i,o,r="";return r+='<div class="miniCard__desc _address">'+G((i=n.p||e&&e.p,o={hash:{context:(a=e&&e.desc,null==a||a===!1?a:a.address)},data:t},i?i.call(e,"address",o):H.call(e,"p","address",o)))+'<div class="miniCard__filialsWrapper">'+G((i=n.p||e&&e.p,o={hash:{},data:t},i?i.call(e,"filials",o):H.call(e,"p","filials",o)))+"</div></div>"}function S(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.desc,null==a||a===!1?a:a.text),{hash:{},inverse:W.noop,fn:W.program(40,E,t),data:t}),(a||0===a)&&(i+=a),i}function E(e,t){var n,a="";return a+='<div class="miniCard__desc"><span class="miniCard__descText">',n=e&&e.desc,n=null==n||n===!1?n:n.text,n=typeof n===V?n.apply(e):n,(n||0===n)&&(a+=n),a+="</span></div>"}function P(e,t){var a,i,o="";return o+='<div class="miniCard__addressComment"><span>',(i=n.addressComment)?a=i.call(e,{hash:{},data:t}):(i=e&&e.addressComment,a=typeof i===V?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</span></div>"}function j(e,t){var a,i,o="";return o+='<div class="miniCard__additional">',(i=n.additionalText)?a=i.call(e,{hash:{},data:t}):(i=e&&e.additionalText,a=typeof i===V?i.call(e,{hash:{},data:t}):i),o+=G(a)+"</div>"}function M(e,t){var a,i="";return i+='<div class="miniCard__additional"><ul class="miniCard__attrs">',a=n.each.call(e,e&&e.attrs,{hash:{},inverse:W.noop,fn:W.program(47,A,t),data:t}),(a||0===a)&&(i+=a),i+="</ul></div>"}function A(e,t){var n,a="";return a+='<li class="miniCard__attrsItem">',n=typeof e===V?e.apply(e):e,(n||0===n)&&(a+=n),a+="</li>"}function D(e,t){var a,i="";return i+='<div class="miniCard__schedule',a=n["if"].call(e,(a=e&&e.schedule,null==a||a===!1?a:a.open),{hash:{},inverse:W.noop,fn:W.program(50,R,t),data:t}),(a||0===a)&&(i+=a),i+='">'+G((a=e&&e.schedule,a=null==a||a===!1?a:a.status,typeof a===V?a.apply(e):a))+"</div>"}function R(e,t){return" _open"}function N(e,t){var a,i,o="";return o+='<div class="miniCard__btn miniCard__plusOne">',(i=n.plusOne)?a=i.call(e,{hash:{},data:t}):(i=e&&e.plusOne,a=typeof i===V?i.call(e,{hash:{},data:t}):i),o+=G(a)+"</div>"}function B(e,t){var a,i,o,r="";return r+='<div class="miniCard__btn miniCard__booklet">'+G((i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.booklet,null==a||a===!1?a:a.seoLinkBooklet),"class":"_scheme_none"},data:t},i?i.call(e,(a=e&&e.booklet,null==a||a===!1?a:a.label),o):H.call(e,"Link",(a=e&&e.booklet,null==a||a===!1?a:a.label),o)))+"</div>"}function F(e,t){var a,i,o,r="";return r+='<div class="miniCard__btn miniCard__discounts">'+G((i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.discounts,null==a||a===!1?a:a.seoLink),"class":"_scheme_none"},data:t},i?i.call(e,(a=e&&e.discounts,null==a||a===!1?a:a.label),o):H.call(e,"Link",(a=e&&e.discounts,null==a||a===!1?a:a.label),o)))+"</div>"}function O(e,t){var n,a="";return a+='<a href="'+G((n=e&&e.floorsButton,n=null==n||n===!1?n:n.seoUrl,typeof n===V?n.apply(e):n))+'" class="miniCard__btn miniCard__floors">'+G((n=e&&e.floorsButton,n=null==n||n===!1?n:n.label,typeof n===V?n.apply(e):n))+"</a>"}function z(e,t){var a,i,o="";return o+='<div class="miniCard__warning">',(i=n.warning)?a=i.call(e,{hash:{},data:t}):(i=e&&e.warning,a=typeof i===V?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var q,$,U="",H=n.helperMissing,G=this.escapeExpression,W=this,V="function";return q=n["if"].call(t,t&&t.recoveryHeader,{hash:{},inverse:W.noop,fn:W.program(1,o,i),data:i}),(q||0===q)&&(U+=q),U+='<div class="miniCard__content">',q=n["if"].call(t,t&&t.showAsideBlock,{hash:{},inverse:W.noop,fn:W.program(4,s,i),data:i}),(q||0===q)&&(U+=q),U+='<header class="miniCard__header"><div class="miniCard__icon',q=n["if"].call(t,t&&t.booklet,{hash:{},inverse:W.noop,fn:W.program(12,h,i),data:i}),(q||0===q)&&(U+=q),q=n["if"].call(t,t&&t.transportType,{hash:{},inverse:W.noop,fn:W.program(14,p,i),data:i}),(q||0===q)&&(U+=q),q=n["if"].call(t,t&&t.city,{hash:{},inverse:W.noop,fn:W.program(16,f,i),data:i}),(q||0===q)&&(U+=q),U+='"',q=n["if"].call(t,t&&t.transportColor,{hash:{},inverse:W.noop,fn:W.program(18,m,i),data:i}),(q||0===q)&&(U+=q),U+='></div><h3 class="miniCard__headerTitle"><a href="',($=n.seoLinkBlock)?q=$.call(t,{hash:{},data:i}):($=t&&t.seoLinkBlock,q=typeof $===V?$.call(t,{hash:{},data:i}):$),U+=G(q)+'" class="miniCard__headerTitleLink">',($=n.name)?q=$.call(t,{hash:{},data:i}):($=t&&t.name,q=typeof $===V?$.call(t,{hash:{},data:i}):$),(q||0===q)&&(U+=q),U+="</a></h3>",q=n["if"].call(t,t&&t.note,{hash:{},inverse:W.noop,fn:W.program(20,g,i),data:i}),(q||0===q)&&(U+=q),q=n["if"].call(t,t&&t.description,{hash:{},inverse:W.noop,fn:W.program(22,_,i),data:i}),(q||0===q)&&(U+=q),U+="</header>",q=n["if"].call(t,t&&t.micro,{hash:{},inverse:W.noop,fn:W.program(24,v,i),data:i}),(q||0===q)&&(U+=q),q=n["if"].call(t,t&&t.floors,{hash:{},inverse:W.program(30,w,i),fn:W.program(27,b,i),data:i}),(q||0===q)&&(U+=q),q=n["if"].call(t,t&&t.addressComment,{hash:{},inverse:W.noop,fn:W.program(42,P,i),data:i}),(q||0===q)&&(U+=q),q=n["if"].call(t,t&&t.additionalText,{hash:{},inverse:W.noop,fn:W.program(44,j,i),data:i}),(q||0===q)&&(U+=q),q=n["if"].call(t,t&&t.attrs,{hash:{},inverse:W.noop,fn:W.program(46,M,i),data:i}),(q||0===q)&&(U+=q),q=n["if"].call(t,t&&t.schedule,{hash:{},inverse:W.noop,fn:W.program(49,D,i),data:i}),(q||0===q)&&(U+=q),U+='<div class="miniCard__btnWrap">',q=n["if"].call(t,t&&t.plusOne,{hash:{},inverse:W.noop,fn:W.program(52,N,i),data:i}),(q||0===q)&&(U+=q),q=n["if"].call(t,t&&t.booklet,{hash:{},inverse:W.noop,fn:W.program(54,B,i),data:i}),(q||0===q)&&(U+=q),q=n["if"].call(t,t&&t.discounts,{hash:{},inverse:W.noop,fn:W.program(56,F,i),data:i}),(q||0===q)&&(U+=q),q=n["if"].call(t,t&&t.floorsButton,{hash:{},inverse:W.noop,fn:W.program(58,O,i),data:i}),(q||0===q)&&(U+=q),U+="</div>",q=n["if"].call(t,t&&t.warning,{hash:{},inverse:W.noop,fn:W.program(60,z,i),data:i}),(q||0===q)&&(U+=q),U+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mixedResults=this.jst_modules.mixedResults||{},this.jst_modules.mixedResults.mixedResults=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n["if"].call(e,e&&e.contentModule,{hash:{},inverse:h.noop,fn:h.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var a,i,o,r="";return r+='<div class="mixedResults__list mixedResults__',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===u?i.call(e,{hash:{},data:t}):i),r+=d(a)+"Results",a=n["if"].call(e,e&&e.active,{hash:{},inverse:h.noop,fn:h.program(3,s,t),data:t}),(a||0===a)&&(r+=a),r+='">'+d((i=n.module||e&&e.module,o={hash:{},data:t},i?i.call(e,e&&e.contentModule,o):p.call(e,"module",e&&e.contentModule,o)))+"</div>"}function s(e,t){return" _active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c="",u="function",d=this.escapeExpression,h=this,p=n.helperMissing;return c+='<div class="mixedResults__resultsClipper"><div class="mixedResults__results">',l=n.each.call(t,t&&t.results,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(l||0===l)&&(c+=l),c+="</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.museum=this.jst_modules.museum||{},this.jst_modules.museum.museum=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+=c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,t&&t.template,r):l.call(t,"p",t&&t.template,r)))+'<div class="museum__close"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.newYearGifts=this.jst_modules.newYearGifts||{},this.jst_modules.newYearGifts.newYearGifts=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="newYearGifts__slider"><div class="newYearGifts__sliderViewport"><div class="newYearGifts__sliderLayer">',a=n.each.call(e,(a=e&&e.winners,null==a||a===!1?a:a.items),{hash:{},inverse:w.noop,fn:w.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+='</div></div><div class="newYearGifts__sliderThumbs"><div class="newYearGifts__sliderThumbsLayer"></div></div></div>'}function r(e,t){var a,i="";return i+='<div class="newYearGifts__sliderGroup">',a=n.each.call(e,e,{hash:{},inverse:w.noop,fn:w.program(3,s,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function s(e,t){var a,i="";return a=n["if"].call(e,e&&e.next,{hash:{},inverse:w.program(6,c,t),fn:w.program(4,l,t),data:t}),(a||0===a)&&(i+=a),i}function l(e,t){var a,i,o,r="";return r+='<div class="newYearGifts__prize"><div class="newYearGifts__prizeName" title="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===y?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+='">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===y?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+='</div><div class="newYearGifts__prizeDate">'+k((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"%1 кто-то выиграет",e&&e.day,o):b.call(e,"_gg","%1 кто-то выиграет",e&&e.day,o)))+'</div><span class="newYearGifts__prizeImg" style="background-image: url(',(i=n.image)?a=i.call(e,{hash:{},data:t}):(i=e&&e.image,a=typeof i===y?i.call(e,{hash:{},data:t}):i),r+=k(a)+');" alt="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===y?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+='"></span></div>'}function c(e,t){var a,i,o,r="";return r+='<div class="newYearGifts__winner"><div class="newYearGifts__winnerPrizeName" title="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===y?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+='">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===y?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+='</div><div class="newYearGifts__winnerName">',i=n._hgg||e&&e._hgg,o={hash:{link__href:(a=e&&e.winner,null==a||a===!1?a:a.url),link__rel:"nofollow",link__target:"_blank"},data:t},a=i?i.call(e,"подарили %{Link %1}",(a=e&&e.winner,null==a||a===!1?a:a.full_name),o):b.call(e,"_hgg","подарили %{Link %1}",(a=e&&e.winner,null==a||a===!1?a:a.full_name),o),(a||0===a)&&(r+=a),r+='</div><a href="'+k((a=e&&e.winner,a=null==a||a===!1?a:a.url,typeof a===y?a.apply(e):a))+'" target="_blank" class="newYearGifts__winnerAvatar" style="background-image: url('+k((a=e&&e.winner,a=null==a||a===!1?a:a.avatar,typeof a===y?a.apply(e):a))+');" alt="'+k((a=e&&e.winner,a=null==a||a===!1?a:a.full_name,typeof a===y?a.apply(e):a))+'"></a></div>'}function u(e,t){var a,i,o,r="";return r+='<legend class="newYearGifts__searchEntry">'+k((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Выбирайте подарки по душе",o):b.call(e,"_gg","Выбирайте подарки по душе",o)))+'</legend><ul class="newYearGifts__list">',a=n.each.call(e,(a=e&&e.presents,null==a||a===!1?a:a.items),{hash:{},inverse:w.noop,fn:w.program(9,d,t),data:t}),(a||0===a)&&(r+=a),r+="</ul>"}function d(e,t){var a,i,o="";return o+=k((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"present",i):b.call(e,"p","present",i)))}function h(e,t){var a,i,o,r="";return r+=k((i=n.Icon||e&&e.Icon,o={hash:{"class":"newYearGifts__winnersEntryImg"},data:t},i?i.call(e,"newYearGifts_noResults",o):b.call(e,"Icon","newYearGifts_noResults",o)))+'<legend class="newYearGifts__winnersEntry">'+k((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Победители, получившие подарки",o):b.call(e,"_gg","Победители, получившие подарки",o)))+'</legend><ul class="newYearGifts__winners">',a=n.each.call(e,(a=e&&e.winners,null==a||a===!1?a:a.items),{hash:{},inverse:w.noop,fn:w.program(12,p,t),data:t}),(a||0===a)&&(r+=a),r+="</ul>"}function p(e,t){var a,i="";return i+='<li class="newYearGifts__winnersItemWrap">',a=n["if"].call(e,e&&e.next,{hash:{},inverse:w.program(13,f,t),fn:w.program(4,l,t),data:t}),(a||0===a)&&(i+=a),i+="</li>"}function f(e,t){var a,i,o,r="";return r+='<div class="newYearGifts__winner"><div class="newYearGifts__winnerPrizeName" title="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===y?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+='">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===y?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+='</div><div class="newYearGifts__winnerName">',i=n._hgg||e&&e._hgg,o={hash:{link__href:(a=e&&e.winner,null==a||a===!1?a:a.url),link__rel:"nofollow",link__target:"_blank"},data:t},a=i?i.call(e,"подарили %{Link %1}",(a=e&&e.winner,null==a||a===!1?a:a.full_name),o):b.call(e,"_hgg","подарили %{Link %1}",(a=e&&e.winner,null==a||a===!1?a:a.full_name),o),(a||0===a)&&(r+=a),r+='</div><span class="newYearGifts__prizeImg" style="background-image: url(',(i=n.image)?a=i.call(e,{hash:{},data:t}):(i=e&&e.image,a=typeof i===y?i.call(e,{hash:{},data:t}):i),r+=k(a)+');" alt="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===y?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+='"></span></div>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var m,g,_,v="",y="function",b=n.helperMissing,k=this.escapeExpression,w=this;return v+=k((g=n.Preloader||t&&t.Preloader,_={hash:{"class":"newYearGirts__preloader _scheme_lighten"},data:i},g?g.call(t,_):b.call(t,"Preloader",_)))+'<div class="newYearGifts__scroller"><div class="newYearGifts__header">'+k((g=n.Icon||t&&t.Icon,_={hash:{"class":"newYearGifts__title"},data:i},g?g.call(t,"newYearGifts_title",_):b.call(t,"Icon","newYearGifts_title",_)))+'<p class="newYearGifts__entry">',g=n._gg||t&&t._gg,_={hash:{},data:i},m=g?g.call(t,"Поздравляем с Новым годом и дарим подарки <br/>каждые два дня с 1 по 30 декабря.",_):b.call(t,"_gg","Поздравляем с Новым годом и дарим подарки <br/>каждые два дня с 1 по 30 декабря.",_),(m||0===m)&&(v+=m),v+="</p></div>",m=n["if"].call(t,t&&t.needSlider,{hash:{},inverse:w.noop,fn:w.program(1,o,i),data:i}),(m||0===m)&&(v+=m),v+='<div class="newYearGifts__noResults"><p class="newYearGifts__noResultsText">',g=n._gg||t&&t._gg,_={hash:{},data:i},m=g?g.call(t,"Как же жаль, что мы не Дед Мороз и не можем подарить подарки во всех городах. <nobr>В вашем городе</nobr> конкурс не проводится.",_):b.call(t,"_gg","Как же жаль, что мы не Дед Мороз и не можем подарить подарки во всех городах. <nobr>В вашем городе</nobr> конкурс не проводится.",_),(m||0===m)&&(v+=m),v+="</p>"+k((g=n.Icon||t&&t.Icon,_={hash:{"class":"newYearGifts__noResultsIllustration"},data:i},g?g.call(t,"newYearGifts_noResults",_):b.call(t,"Icon","newYearGifts_noResults",_)))+"</div>",m=n["if"].call(t,(m=t&&t.presents,null==m||m===!1?m:m.total),{hash:{},inverse:w.noop,fn:w.program(8,u,i),data:i}),(m||0===m)&&(v+=m),m=n.unless.call(t,t&&t.isEnoughGifts,{hash:{},inverse:w.noop,fn:w.program(11,h,i),data:i}),(m||0===m)&&(v+=m),v+='<footer class="newYearGifts__footer">',g=n._hgg||t&&t._hgg,_={hash:{link__class:"_undashed",link__href:"http://law.2gis.ru/presents2015-rules/",link__target:"_blank"},data:i},m=g?g.call(t,"«Подарки от 2ГИС». Сроки проведения: 01.12.2015–30.12.2015. %{Link %1}","Правила проведения конкурса",_):b.call(t,"_hgg","«Подарки от 2ГИС». Сроки проведения: 01.12.2015–30.12.2015. %{Link %1}","Правила проведения конкурса",_),(m||0===m)&&(v+=m),v+="</footer>",(g=n.Track)?m=g.call(t,{hash:{},data:i}):(g=t&&t.Track,m=typeof g===y?g.call(t,{hash:{},data:i}):g),v+=k(m)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.newYearGiftsPopup=this.jst_modules.newYearGiftsPopup||{},this.jst_modules.newYearGiftsPopup.newYearGiftsPopup=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<header class="newYearGiftsPopup__header"><h2 class="newYearGiftsPopup__headerText">'+u((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Хочу на Новый год",o):c.call(e,"_gg","Хочу на Новый год",o)))+'</h2><h1 class="newYearGiftsPopup__title">',(i=n.present)?a=i.call(e,{hash:{},data:t}):(i=e&&e.present,a=typeof i===d?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+='</h1></header><div class="newYearGiftsPopup__socials" data-present-id="',(i=n.presentId)?a=i.call(e,{hash:{},data:t}):(i=e&&e.presentId,a=typeof i===d?i.call(e,{hash:{},data:t}):i),r+=u(a)+'"><!-- <button class="newYearGiftsPopup__socialsItem _social_ok"></button> --><button class="newYearGiftsPopup__socialsItem _social_vk"></button><button class="newYearGiftsPopup__socialsItem _social_fb"></button></div><p class="newYearGiftsPopup__text">',i=n._hgg||e&&e._hgg,o={hash:{link__href:"http://law.2gis.ru/presents2015-rules/",link__rel:"nofollow",link__target:"_blank"},data:t},a=i?i.call(e,"Чтобы желание исполнилось, расскажите о&nbsp;нём в&nbsp;социальных сетях и&nbsp;не&nbsp;удаляйте пост до&nbsp;конца конкурса. О&nbsp;том, как&nbsp;выбираем победителей и&nbsp;дарим подарки, %{Link %1}.","читайте в&nbsp;правилах",o):c.call(e,"_hgg","Чтобы желание исполнилось, расскажите о&nbsp;нём в&nbsp;социальных сетях и&nbsp;не&nbsp;удаляйте пост до&nbsp;конца конкурса. О&nbsp;том, как&nbsp;выбираем победителей и&nbsp;дарим подарки, %{Link %1}.","читайте в&nbsp;правилах",o),(a||0===a)&&(r+=a),r+="</p>"}function r(e,t){var a,i,o="";return o+='<header class="newYearGiftsPopup__header"><h2 class="newYearGiftsPopup__headerText">'+u((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Что-то пошло не так.",i):c.call(e,"_gg","Что-то пошло не так.",i)))+'</h2><h1 class="newYearGiftsPopup__title">'+u((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Попробуйте ещё раз",i):c.call(e,"_gg","Попробуйте ещё раз",i)))+"</h1></header>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c=n.helperMissing,u=this.escapeExpression,d="function",h=this;return l+='<div class="newYearGiftsPopup__overlay"></div><div class="newYearGiftsPopup__block"><div class="newYearGiftsPopup__close"></div>',s=n["if"].call(t,t&&t.presentId,{hash:{},inverse:h.program(3,r,i),fn:h.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.noResults=this.jst_modules.noResults||{},this.jst_modules.noResults.noResults=function(e,t,n,a,i){function o(e,t){return'<div class="noResults__googletag"></div>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h=this,p="function";return c+='<div class="noResults__scroller">'+d((s=n.p||t&&t.p,l={hash:{},data:i},s?s.call(t,t&&t.templateName,"catalogServerError",l):u.call(t,"p",t&&t.templateName,"catalogServerError",l))),r=n["if"].call(t,t&&t.needGoogleTag,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+=d((s=n.Icon||t&&t.Icon,l={hash:{"class":"noResults__icon"},data:i},s?s.call(t,t&&t.type,l):u.call(t,"Icon",t&&t.type,l))),(s=n.Track)?r=s.call(t,{hash:{},data:i}):(s=t&&t.Track,r=typeof s===p?s.call(t,{hash:{},data:i}):s),c+=d(r)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.noScript=this.jst_modules.noScript||{},this.jst_modules.noScript.noScript=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s=n.helperMissing,l=this.escapeExpression;return l((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Включите JavaScript",r):s.call(t,"_t","Включите JavaScript",r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.online=this.jst_modules.online||{},this.jst_modules.online.online=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<div class="online__controlsItem _ruler _hide_mobile">',i=n.module||e&&e.module,o={hash:{},data:t},a=i?i.call(e,"ruler",o):k.call(e,"module","ruler",o),(a||0===a)&&(r+=a),r+="</div>"}function r(e,t){var a,i,o,r="";return r+='<div class="online__controlsItem _rotate _hide_mobile">',i=n.module||e&&e.module,o={hash:{},data:t},a=i?i.call(e,"rotate",o):k.call(e,"module","rotate",o),(a||0===a)&&(r+=a),r+="</div>"}function s(e,t){var a,i,o="";return o+='<div class="online__controlsItem _congestion _hide_mobile">'+w((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,"congestion",i):k.call(e,"module","congestion",i)))+"</div>"}function l(e,t){var a,i,o="";return o+='<div class="online__controlsItem _geoLocation">'+w((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,"geoLocation",i):k.call(e,"module","geoLocation",i)))+"</div>"}function c(e,t){var a,i,o="";return o+='<div class="online__controlsItem _extraLayers _hide_mobile">'+w((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,"extraLayers",i):k.call(e,"module","extraLayers",i)))+"</div>"}function u(e,t){var a,i,o,r="";return r+='<span class="online__copyrightApi _scheme_gray">',i=n.Link||e&&e.Link,o={hash:{"class":"_scheme_gray _small online__copyrightApiLink",href:e&&e.api,target:"_blank"},inverse:x.noop,fn:x.program(12,d,t),data:t},a=i?i.call(e,o):k.call(e,"Link",o),(a||0===a)&&(r+=a),r+='</span><span class="online__copyrightOsm _scheme_gray">\n                    &copy; ',i=n.Link||e&&e.Link,o={hash:{"class":"_scheme_gray _small online__copyrightOsmLink",href:e&&e.osm,target:"_blank"},inverse:x.noop,fn:x.program(14,h,t),data:t},a=i?i.call(e,o):k.call(e,"Link",o),(a||0===a)&&(r+=a),r+=", ",i=n.Link||e&&e.Link,o={hash:{"class":"_scheme_gray _small online__copyrightApiLink ",href:e&&e.api,target:"_blank"},inverse:x.noop,fn:x.program(16,p,t),data:t},a=i?i.call(e,o):k.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</span>"}function d(e,t){var a,i,o="";return o+=w((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Работает на API 2GIS",i):k.call(e,"_t","Работает на API 2GIS",i)))}function h(e,t){var a,i,o="";return o+=w((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"OpenStreetMap contributors",i):k.call(e,"_gg","OpenStreetMap contributors",i)))}function p(e,t){var a,i,o="";return o+=w((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"API 2GIS",i):k.call(e,"_gg","API 2GIS",i)))}function f(e,t){var a,i,o="";return o+=w((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Лицензионное соглашение",i):k.call(e,"_t","Лицензионное соглашение",i)))}function m(e,t){var n="";return n+=w(typeof e===C?e.apply(e):e)}function g(e,t){var a,i,o="";return o+='<div class="online__print" data-media="print"><div class="online__printOverlay">'+w((a=n.Preloader||e&&e.Preloader,i={hash:{"class":"_scheme_lighten online__printPreloader"},data:t},a?a.call(e,i):k.call(e,"Preloader",i)))+'<div class="online__printOverlayButton">'+w((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Распечатать страницу",i):k.call(e,"_gg","Распечатать страницу",i)))+"</div></div></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var _,v,y,b="",k=n.helperMissing,w=this.escapeExpression,x=this,C="function";return b+='<div class="online__side"><div class="online__world">',v=n.module||t&&t.module,y={hash:{},data:i},_=v?v.call(t,"world",y):k.call(t,"module","world",y),(_||0===_)&&(b+=_),b+='</div><div class="online__local"><div class="online__searchBar">'+w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"searchBar",y):k.call(t,"module","searchBar",y)))+'</div><div class="online__panels"><div class="online__dashboard">',v=n.module||t&&t.module,y={hash:{},data:i},_=v?v.call(t,"dashboard",y):k.call(t,"module","dashboard",y),(_||0===_)&&(b+=_),b+='</div><div class="online__floorsDashboard">'+w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"floorsDashboard",y):k.call(t,"module","floorsDashboard",y)))+'</div><div class="online__dataViewer">'+w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"dataViewer",y):k.call(t,"module","dataViewer",y)))+'</div></div></div><div class="online__sideOverlay"></div></div><div class="online__controls"><div class="online__controlsItem _zoom">',v=n.module||t&&t.module,y={hash:{},data:i},_=v?v.call(t,"zoom",y):k.call(t,"module","zoom",y),(_||0===_)&&(b+=_),b+="</div>",_=n["if"].call(t,t&&t.showRuler,{hash:{},inverse:x.noop,fn:x.program(1,o,i),data:i}),(_||0===_)&&(b+=_),_=n["if"].call(t,t&&t.showRotate,{hash:{},inverse:x.noop,fn:x.program(3,r,i),data:i}),(_||0===_)&&(b+=_),_=n["if"].call(t,t&&t.showTraffic,{hash:{},inverse:x.noop,fn:x.program(5,s,i),data:i}),(_||0===_)&&(b+=_),_=n["if"].call(t,t&&t.showGeoLocation,{hash:{},inverse:x.noop,fn:x.program(7,l,i),data:i}),(_||0===_)&&(b+=_),_=n["if"].call(t,t&&t.showExtraLayers,{hash:{},inverse:x.noop,fn:x.program(9,c,i),data:i}),(_||0===_)&&(b+=_),b+='</div><div class="online__popup">'+w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"popup",y):k.call(t,"module","popup",y)))+'</div><div class="online__misc"><div class="online__copyright"><div class="online__copyrightIn">',_=n["if"].call(t,t&&t.showApiCopyright,{hash:{},inverse:x.noop,fn:x.program(11,u,i),data:i}),(_||0===_)&&(b+=_),b+="<br>",v=n.Link||t&&t.Link,y={hash:{"class":"_scheme_gray _small online__copyrightLawLink",href:t&&t.agreement,target:"_blank"},inverse:x.noop,fn:x.program(18,f,i),data:i},_=v?v.call(t,y):k.call(t,"Link",y),(_||0===_)&&(b+=_),b+='</div></div><div class="online__extras">'+w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"extras",y):k.call(t,"module","extras",y)))+'</div></div><div class="online__tools">'+w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"tools",y):k.call(t,"module","tools",y)))+'</div><div class="online__push2dial"></div><div class="online__map">'+w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"map",y):k.call(t,"module","map",y)))+'<div class="online__overlay"></div></div><div class="online__flyingOverlay"></div><div class="online__floors">'+w((v=n.Preloader||t&&t.Preloader,y={hash:{"class":"_scheme_circlesDark online__floorsPreloader"},data:i},v?v.call(t,y):k.call(t,"Preloader",y)))+w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"floors",y):k.call(t,"module","floors",y)))+'</div><div class="online__video"></div>',v=n.module||t&&t.module,y={hash:{},inverse:x.noop,fn:x.program(20,m,i),data:i},_=v?v.call(t,"generalPhotos",y):k.call(t,"module","generalPhotos",y),(_||0===_)&&(b+=_),b+=w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"gallery",y):k.call(t,"module","gallery",y)))+w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"chat",y):k.call(t,"module","chat",y)))+'<div class="online__whatsNew">'+w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"whatsNew",y):k.call(t,"module","whatsNew",y)))+"</div>"+w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"jsonld",y):k.call(t,"module","jsonld",y)))+'<div class="online__citySelectPhone">'+w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"citySelectPhone",y):k.call(t,"module","citySelectPhone",y)))+"</div>",_=n["if"].call(t,t&&t.showPrint,{hash:{},inverse:x.noop,fn:x.program(22,g,i),data:i}),(_||0===_)&&(b+=_),b+=w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"noScript",y):k.call(t,"module","noScript",y)))+w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"museum",y):k.call(t,"module","museum",y))),(v=n.symbols)?_=v.call(t,{hash:{},data:i}):(v=t&&t.symbols,_=typeof v===C?v.call(t,{hash:{},data:i}):v),(_||0===_)&&(b+=_),b},this.jst_modules=this.jst_modules||{},this.jst_modules.pagination=this.jst_modules.pagination||{},this.jst_modules.pagination.pagination=function(e,t,n,a,i){function o(e,t){return" _disabled"}function r(e,t){var a,i,o="";return o+="<",(i=n.tag)?a=i.call(e,{hash:{},data:t}):(i=e&&e.tag,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a),a=n["if"].call(e,e&&e.href,{hash:{},inverse:p.noop,fn:p.program(4,s,t),data:t}),(a||0===a)&&(o+=a),o+=' class="pagination__page',a=n["if"].call(e,e&&e.active,{hash:{},inverse:p.noop,fn:p.program(6,l,t),data:t}),(a||0===a)&&(o+=a),o+='">',(i=n.num)?a=i.call(e,{hash:{},data:t}):(i=e&&e.num,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+"</",(i=n.tag)?a=i.call(e,{hash:{},data:t}):(i=e&&e.tag,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+">"}function s(e,t){var a,i,o="";return o+=' href="',(i=n.href)?a=i.call(e,{hash:{},data:t}):(i=e&&e.href,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'"'}function l(e,t){return" _current"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u="",d="function",h=this.escapeExpression,p=this;
return u+='<div class="pagination__arrow _left',c=n.unless.call(t,t&&t.leftEnabled,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(c||0===c)&&(u+=c),u+='"></div><nav class="pagination__pages">',c=n.each.call(t,t&&t.pages,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(c||0===c)&&(u+=c),u+='</nav><div class="pagination__arrow _right',c=n.unless.call(t,t&&t.rightEnabled,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(c||0===c)&&(u+=c),u+='"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.patchwork=this.jst_modules.patchwork||{},this.jst_modules.patchwork.patchwork=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=d((a=n.p||e&&e.p,i={hash:{context:e&&e.mega},data:t},a?a.call(e,"item",i):u.call(e,"p","item",i)))}function r(e,t){var a,i="";return i+='<div class="patchwork__column">',a=n.each.call(e,e&&e.items,{hash:{},inverse:h.noop,fn:h.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function s(e,t){var a,i,o="";return o+=d((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"item",i):u.call(e,"p","item",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c="",u=n.helperMissing,d=this.escapeExpression,h=this;return c+='<div class="patchwork__wrap">',l=n["if"].call(t,t&&t.mega,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(l||0===l)&&(c+=l),l=n.each.call(t,t&&t.columns,{hash:{},inverse:h.noop,fn:h.program(3,r,i),data:i}),(l||0===l)&&(c+=l),c+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.phoneBar=this.jst_modules.phoneBar||{},this.jst_modules.phoneBar.phoneBar=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=d((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Скачать",i):u.call(e,"_t","Скачать",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h=this,p="function";return c+='<div class="phoneBar__install">',s=n.Link||t&&t.Link,l={hash:{"class":"phoneBar__installLink",href:t&&t.href},inverse:h.noop,fn:h.program(1,o,i),data:i},r=s?s.call(t,l):u.call(t,"Link",l),(r||0===r)&&(c+=r),c+='</div><h1 class="phoneBar__title">',(s=n.title)?r=s.call(t,{hash:{},data:i}):(s=t&&t.title,r=typeof s===p?s.call(t,{hash:{},data:i}):s),(r||0===r)&&(c+=r),c+='</h1><div class="phoneBar__rating"></div><footer class="phoneBar__sub">',(s=n.sub)?r=s.call(t,{hash:{},data:i}):(s=t&&t.sub,r=typeof s===p?s.call(t,{hash:{},data:i}):s),c+=d(r)+'</footer><div class="phoneBar__logo"></div><div class="phoneBar__close"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.photosUploader=this.jst_modules.photosUploader||{},this.jst_modules.photosUploader.photosUploader=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<label class="photosUploader__dropArea"><div class="photosUploader__iconWrapper">'+u((r=n.Icon||t&&t.Icon,s={hash:{"class":"photosUploader__addPhotoIcon"},data:i},r?r.call(t,"photosUploader_addPhoto",s):c.call(t,"Icon","photosUploader_addPhoto",s)))+'</div><div class="photosUploader__info"><span class="photosUploader__text">',r=n._ht||t&&t._ht,s={hash:{link__class:"photosUploader__rulesLink",link__target:"blank",link__href:t&&t.photosUploaderRules},data:i},o=r?r.call(t,"%link{Link Правила} размещения фотографий",s):c.call(t,"_ht","%link{Link Правила} размещения фотографий",s),(o||0===o)&&(l+=o),l+='</span></div><input type="file" multiple="multiple" class="photosUploader__fileInput"></label>'},this.jst_modules=this.jst_modules||{},this.jst_modules.photosUploaderTooltip=this.jst_modules.photosUploaderTooltip||{},this.jst_modules.photosUploaderTooltip.photosUploaderTooltip=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="photosUploaderTooltip__close"></div>'+c((o=n.Icon||t&&t.Icon,r={hash:{"class":"photosUploaderTooltip__icon"},data:i},o?o.call(t,"photosUploaderTooltip_camera",r):l.call(t,"Icon","photosUploaderTooltip_camera",r)))+'<div class="photosUploaderTooltip__text">'+c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,t&&t.textPartial,r):l.call(t,"p",t&&t.textPartial,r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.popup=this.jst_modules.popup||{},this.jst_modules.popup.popup=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression,d="function";return l+='<div class="popup__popup"><div class="popup__container"><div class="popup__preloaderForm">'+u((r=n.Preloader||t&&t.Preloader,s={hash:{"class":"_scheme_lighten popup__preloader"},data:i},r?r.call(t,s):c.call(t,"Preloader",s)))+'</div><div class="popup__closeButton"></div><div class="popup__content">',(r=n.content)?o=r.call(t,{hash:{},data:i}):(r=t&&t.content,o=typeof r===d?r.call(t,{hash:{},data:i}):r),(o||0===o)&&(l+=o),l+="</div></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.ppnotTime=this.jst_modules.ppnotTime||{},this.jst_modules.ppnotTime.ppnotTime=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=" value=",(i=n.date)?a=i.call(e,{hash:{},data:t}):(i=e&&e.date,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)}function r(e,t){return" disabled"}function s(e,t){var a,i,o="";return o+=" value=",(i=n.time)?a=i.call(e,{hash:{},data:t}):(i=e&&e.time,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)}function l(e,t){return" checked"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u="",d="function",h=this.escapeExpression,p=this;return u+='<input\n    type="date"\n    class="ppnotTime__date"\n    ',c=n["if"].call(t,t&&t.date,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(c||0===c)&&(u+=c),u+="\n    ",c=n.unless.call(t,t&&t.useSelected,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(c||0===c)&&(u+=c),u+='\n/><input\n    type="time"\n    class="ppnotTime__time"\n    step="1"\n    ',c=n["if"].call(t,t&&t.time,{hash:{},inverse:p.noop,fn:p.program(5,s,i),data:i}),(c||0===c)&&(u+=c),u+="\n    ",c=n.unless.call(t,t&&t.useSelected,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(c||0===c)&&(u+=c),u+='\n/><input\n    type="checkbox"\n    class="ppnotTime__currentTime"\n    ',c=n["if"].call(t,t&&t.useSelected,{hash:{},inverse:p.noop,fn:p.program(7,l,i),data:i}),(c||0===c)&&(u+=c),u+="\n/>"},this.jst_modules=this.jst_modules||{},this.jst_modules.print=this.jst_modules.print||{},this.jst_modules.print.print=function(e,t,n,a,i){function o(e,t){var a,i,o="";return(i=n["static"])?a=i.call(e,{hash:{},data:t}):(i=e&&e["static"],a=typeof i===l?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o}function r(e,t){var a,i,o="";return o+='<div class="print__innerPortrait"><div class="print__innerLandscape">'+u((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,e&&e.partialName,i):c.call(e,"p",e&&e.partialName,i)))+"</div></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="function",c=n.helperMissing,u=this.escapeExpression,d=this;return s=n["if"].call(t,t&&t.isSimple,{hash:{},inverse:d.program(3,r,i),fn:d.program(1,o,i),data:i}),s||0===s?s:""},this.jst_modules=this.jst_modules||{},this.jst_modules.productCard=this.jst_modules.productCard||{},this.jst_modules.productCard.productCard=function(e,t,n,a,i){function o(e,t){var a,i;return y((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Назад",i):v.call(e,"_gg","Назад",i)))}function r(e,t){var a,i="";return i+='<ul class="productCard__parameters">',a=n.each.call(e,(a=e&&e.product,null==a||a===!1?a:a.parameters),{hash:{},inverse:k.noop,fn:k.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function s(e,t){var n="";return n+='<li class="productCard__parametersItem">'+y(typeof e===b?e.apply(e):e)+"</li>"}function l(e,t){var n,a="";return a+='<span class="productCard__price">'+y((n=e&&e.product,n=null==n||n===!1?n:n.price,n=null==n||n===!1?n:n.value,typeof n===b?n.apply(e):n))+'&#8201;<span class="productCard__priceCurrency _'+y((n=e&&e.product,n=null==n||n===!1?n:n.price,n=null==n||n===!1?n:n.currency,n=null==n||n===!1?n:n.code,typeof n===b?n.apply(e):n))+'">'+y((n=e&&e.product,n=null==n||n===!1?n:n.price,n=null==n||n===!1?n:n.currency,n=null==n||n===!1?n:n.value,typeof n===b?n.apply(e):n))+"</span></span>"}function c(e,t){var a,i,o,r="";return r+='<span class="productCard__proposalsNumber">'+y((i=n._ngg||e&&e._ngg,o={hash:{},data:t},i?i.call(e,"%1 предложение","%1 предложения","%1 предложений",(a=e&&e.product,null==a||a===!1?a:a.proposalsNumber),o):v.call(e,"_ngg","%1 предложение","%1 предложения","%1 предложений",(a=e&&e.product,null==a||a===!1?a:a.proposalsNumber),o)))+"</span>"}function u(e,t){var n,a="";return a+='<div class="productCard__productCover" style="background-image: url('+y((n=e&&e.product,n=null==n||n===!1?n:n.coverURL,typeof n===b?n.apply(e):n))+')"></div>'}function d(e,t){var a,i,o,r="";return r+='<span class="productCard__productAttribute"',a=n["if"].call(e,e&&e.title,{hash:{},inverse:k.noop,fn:k.program(13,h,t),data:t}),(a||0===a)&&(r+=a),r+=">"+y((i=n.Icon||e&&e.Icon,o={hash:{"class":"productCard__productAttributeIcon"},data:t},i?i.call(e,e&&e.id,o):v.call(e,"Icon",e&&e.id,o)))+"</span>"}function h(e,t){var n,a="";return a+=' title="'+y((n=e&&e.title,typeof n===b?n.apply(e):n))+'"'}function p(e,t){var a,i,o,r="";return r+='<div class="productCard__proposal" data-index="'+y((a=null==t||t===!1?t:t.index,typeof a===b?a.apply(e):a))+'" data-id="'+y((a=e&&e.firm,a=null==a||a===!1?a:a.orgId,typeof a===b?a.apply(e):a))+'" data-branch="',(i=n.branch)?a=i.call(e,{hash:{},data:t}):(i=e&&e.branch,a=typeof i===b?i.call(e,{hash:{},data:t}):i),r+=y(a)+'">'+y((i=n.p||e&&e.p,o={hash:{},data:t},i?i.call(e,"proposal",o):v.call(e,"p","proposal",o)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var f,m,g,_="",v=n.helperMissing,y=this.escapeExpression,b="function",k=this;return _+='<div class="productCard__scrollerWrapper"><div class="productCard__scroller"><header class="productCard__product"><span class="productCard__back"><span class="productCard__backArrow">'+y((m=n.Icon||t&&t.Icon,g={hash:{"class":"productCard__backArrowIcon"},data:i},m?m.call(t,"products_back",g):v.call(t,"Icon","products_back",g)))+"</span>",m=n.Link||t&&t.Link,g={hash:{"class":"productCard__backLink _undashed"},inverse:k.noop,fn:k.program(1,o,i),data:i},f=m?m.call(t,g):v.call(t,"Link",g),(f||0===f)&&(_+=f),_+='</span><div class="productCard__productDescription"><h1 class="productCard__productName">'+y((f=t&&t.product,f=null==f||f===!1?f:f.name,typeof f===b?f.apply(t):f))+"</h1>",f=n["if"].call(t,(f=t&&t.product,null==f||f===!1?f:f.parameters),{hash:{},inverse:k.noop,fn:k.program(3,r,i),data:i}),(f||0===f)&&(_+=f),_+='<div class="productCard__productExtended">',f=n["if"].call(t,(f=t&&t.product,null==f||f===!1?f:f.price),{hash:{},inverse:k.noop,fn:k.program(6,l,i),data:i}),(f||0===f)&&(_+=f),f=n["if"].call(t,(f=t&&t.product,null==f||f===!1?f:f.proposalsNumber),{hash:{},inverse:k.noop,fn:k.program(8,c,i),data:i}),(f||0===f)&&(_+=f),_+="</div></div>",f=n["if"].call(t,(f=t&&t.product,null==f||f===!1?f:f.coverURL),{hash:{},inverse:k.noop,fn:k.program(10,u,i),data:i}),(f||0===f)&&(_+=f),f=n.each.call(t,(f=t&&t.product,null==f||f===!1?f:f.attributesIcons),{hash:{},inverse:k.noop,fn:k.program(12,d,i),data:i}),(f||0===f)&&(_+=f),_+="</header>",f=n.each.call(t,t&&t.proposals,{hash:{},inverse:k.noop,fn:k.program(15,p,i),data:i}),(f||0===f)&&(_+=f),_+=y((m=n.Track||t&&t.Track,g={hash:{"class":"_scheme_media productCard__track"},data:i},m?m.call(t,g):v.call(t,"Track",g)))+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.productMiniCard=this.jst_modules.productMiniCard||{},this.jst_modules.productMiniCard.productMiniCard=function(e,t,n,a,i){function o(e,t){return"_default"}function r(e,t){var a,i,o="";return o+=" style=\"background-image: url('",(i=n.imageUrl)?a=i.call(e,{hash:{},data:t}):(i=e&&e.imageUrl,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+"')\""}function s(e,t){var a,i,o,r="";return r+='<span class="productMiniCard__attributeIcon"',a=n["if"].call(e,e&&e.title,{hash:{},inverse:y.noop,fn:y.program(6,l,t),data:t}),(a||0===a)&&(r+=a),r+=">"+v((i=n.Icon||e&&e.Icon,o={hash:{"class":"productMiniCard__attributeIconSvg"},data:t},i?i.call(e,e&&e.id,o):b.call(e,"Icon",e&&e.id,o)))+"</span>"}function l(e,t){var n,a="";return a+=' title="'+v((n=e&&e.title,typeof n===_?n.apply(e):n))+'"'}function c(e,t){var a,i,o="";return o+='<div class="productMiniCard__size">',(i=n.size)?a=i.call(e,{hash:{},data:t}):(i=e&&e.size,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=v(a)+"</div>"}function u(e,t){var a,i="";return i+='<ul class="productMiniCard__attributes">',a=n.each.call(e,e&&e.attributes,{hash:{},inverse:y.noop,fn:y.program(11,d,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function d(e,t){var n="";return n+='<li class="productMiniCard__attributesItem">'+v(typeof e===_?e.apply(e):e)+"</li>"}function h(e,t){var a,i,o,r="";return r+='<div class="productMiniCard__price">'+v((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"от",o):b.call(e,"_gg","от",o)))+'<span class="productMiniCard__number">&nbsp;'+v((a=e&&e.price,a=null==a||a===!1?a:a.value,typeof a===_?a.apply(e):a))+'</span><span class="productMiniCard__currency _type_'+v((a=e&&e.price,a=null==a||a===!1?a:a.currency,a=null==a||a===!1?a:a.code,typeof a===_?a.apply(e):a))+'">'+v((a=e&&e.price,a=null==a||a===!1?a:a.currency,a=null==a||a===!1?a:a.value,typeof a===_?a.apply(e):a))+"</span></div>"}function p(e,t){var a,i,o="";return o+='<span class="productMiniCard__proposals">'+v((a=n._ngg||e&&e._ngg,i={hash:{},data:t},a?a.call(e,"%1 предложение","%1 предложения","%1 предложений",e&&e.proposalsNumber,i):b.call(e,"_ngg","%1 предложение","%1 предложения","%1 предложений",e&&e.proposalsNumber,i)))+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var f,m,g="",_="function",v=this.escapeExpression,y=this,b=n.helperMissing;return g+='<a class="productMiniCard__link" href="',(m=n.seoUrl)?f=m.call(t,{hash:{},data:i}):(m=t&&t.seoUrl,f=typeof m===_?m.call(t,{hash:{},data:i}):m),g+=v(f)+'"><div class="productMiniCard__image ',f=n.unless.call(t,t&&t.imageUrl,{hash:{},inverse:y.noop,fn:y.program(1,o,i),data:i}),(f||0===f)&&(g+=f),g+='" ',f=n["if"].call(t,t&&t.imageUrl,{hash:{},inverse:y.noop,fn:y.program(3,r,i),data:i}),(f||0===f)&&(g+=f),g+="></div>",f=n.each.call(t,t&&t.attributesIcons,{hash:{},inverse:y.noop,fn:y.program(5,s,i),data:i}),(f||0===f)&&(g+=f),g+='<div class="productMiniCard__body"><h2 class="productMiniCard__name" title="',(m=n.name)?f=m.call(t,{hash:{},data:i}):(m=t&&t.name,f=typeof m===_?m.call(t,{hash:{},data:i}):m),g+=v(f)+'">',(m=n.name)?f=m.call(t,{hash:{},data:i}):(m=t&&t.name,f=typeof m===_?m.call(t,{hash:{},data:i}):m),g+=v(f)+"</h2>",f=n["if"].call(t,t&&t.size,{hash:{},inverse:y.noop,fn:y.program(8,c,i),data:i}),(f||0===f)&&(g+=f),g+="</div>",f=n["if"].call(t,t&&t.attributes,{hash:{},inverse:y.noop,fn:y.program(10,u,i),data:i}),(f||0===f)&&(g+=f),f=n["if"].call(t,t&&t.price,{hash:{},inverse:y.noop,fn:y.program(13,h,i),data:i}),(f||0===f)&&(g+=f),f=n["if"].call(t,t&&t.proposalsNumber,{hash:{},inverse:y.noop,fn:y.program(15,p,i),data:i}),(f||0===f)&&(g+=f),g+="</a>"},this.jst_modules=this.jst_modules||{},this.jst_modules.products=this.jst_modules.products||{},this.jst_modules.products.products=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="products__filters"><div class="products__filtersScroller">'+c((o=n.module||t&&t.module,r={hash:{},data:i},o?o.call(t,"productsFilters",r):l.call(t,"module","productsFilters",r)))+c((o=n.Track||t&&t.Track,r={hash:{"class":"products__filtersTrack _scheme_products"},data:i},o?o.call(t,r):l.call(t,"Track",r)))+'</div></div><div class="products__scroller"><div class="products__main">'+c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,"main",r):l.call(t,"p","main",r)))+"</div>"+c((o=n.Preloader||t&&t.Preloader,r={hash:{"class":"products__mainPreloader _scheme_circles"},data:i},o?o.call(t,r):l.call(t,"Preloader",r)))+c((o=n.Track||t&&t.Track,r={hash:{"class":"products__track _scheme_media"},data:i},o?o.call(t,r):l.call(t,"Track",r)))+'</div><div class="products__notFound">'+c((o=n.Icon||t&&t.Icon,r={hash:{"class":"products__notFoundIcon"},data:i},o?o.call(t,"products_404",r):l.call(t,"Icon","products_404",r)))+'<span class="products__notFoundText">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Ничего не найдено",r):l.call(t,"_gg","Ничего не найдено",r)))+"<br>"+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Попробуйте другие условия поиска",r):l.call(t,"_gg","Попробуйте другие условия поиска",r)))+'</span><span class="products__notFoundReset">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Очистить фильтры",r):l.call(t,"_gg","Очистить фильтры",r)))+"</span></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.productsFilters=this.jst_modules.productsFilters||{},this.jst_modules.productsFilters.productsFilters=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="productsFilters__group',a=n["if"].call(e,e&&e.type,{hash:{},inverse:m.noop,fn:m.program(2,r,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.mod,{hash:{},inverse:m.noop,fn:m.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+='">',a=n["if"].call(e,e&&e.title,{hash:{},inverse:m.noop,fn:m.program(6,l,t),data:t}),(a||0===a)&&(i+=a),i+='<ul class="productsFilters__list">',a=n.each.call(e,e&&e.filters,{hash:{},inverse:m.noop,fn:m.program(8,c,t),data:t}),(a||0===a)&&(i+=a),i+="</ul></div>"}function r(e,t){var a,i,o="";return o+=" _",(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)}function s(e,t){var a,i,o="";return o+=" _",(i=n.mod)?a=i.call(e,{hash:{},data:t}):(i=e&&e.mod,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)}function l(e,t){var a,i,o="";return o+='<p class="productsFilters__groupTitle">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</p>"}function c(e,t){var a,i,o,r="";return r+='<li class="productsFilters__listItem _type_',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===h?i.call(e,{hash:{},data:t}):i),r+=p(a)+'">'+p((i=n.p||e&&e.p,o={hash:{},data:t},i?i.call(e,e&&e.type,o):f.call(e,"p",e&&e.type,o)))+"</li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h="function",p=this.escapeExpression,f=n.helperMissing,m=this;return u=n.each.call(t,t&&t.groups,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(u||0===u)&&(d+=u),d},this.jst_modules=this.jst_modules||{},this.jst_modules.promoEvent=this.jst_modules.promoEvent||{},this.jst_modules.promoEvent.promoEvent=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="promoEvent__close"></div>'+c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,t&&t.type,r):l.call(t,"p",t&&t.type,r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.promoMobile=this.jst_modules.promoMobile||{},this.jst_modules.promoMobile.promoMobile=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function",c=this.escapeExpression;return s+='<img src="',(r=n.icon)?o=r.call(t,{hash:{},data:i}):(r=t&&t.icon,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'" class=\'promoMobile__icon\' alt="2GIS"><div class="promoMobile__wrapper"><h1 class="promoMobile__title">',(r=n.title)?o=r.call(t,{hash:{},data:i}):(r=t&&t.title,o=typeof r===l?r.call(t,{hash:{},data:i}):r),(o||0===o)&&(s+=o),s+='</h1><footer class="promoMobile__sub">',(r=n.sub)?o=r.call(t,{hash:{},data:i}):(r=t&&t.sub,o=typeof r===l?r.call(t,{hash:{},data:i}):r),(o||0===o)&&(s+=o),s+="</footer></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.promoMobileFull=this.jst_modules.promoMobileFull||{},this.jst_modules.promoMobileFull.promoMobileFull=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<div class="promoMobileFull__overlay"></div><div class="promoMobileFull__popup"><div class="promoMobileFull__close"></div><div class="promoMobileFull__title">',(r=n.title)?o=r.call(t,{hash:{},data:i}):(r=t&&t.title,o=typeof r===c?r.call(t,{hash:{},data:i}):r),l+=u(o)+'</div><footer class="promoMobileFull__sub">',(r=n.sub)?o=r.call(t,{hash:{},data:i}):(r=t&&t.sub,o=typeof r===c?r.call(t,{hash:{},data:i}):r),(o||0===o)&&(l+=o),l+='<div class="promoMobileFull__subSlogan">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"Выбирайте без интернета",s):d.call(t,"_gg","Выбирайте без интернета",s)))+'</div></footer><a href="',(r=n.href)?o=r.call(t,{hash:{},data:i}):(r=t&&t.href,o=typeof r===c?r.call(t,{hash:{},data:i}):r),l+=u(o)+'" class="promoMobileFull__store"><div class="promoMobileFull__storeTitle">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"Загрузить на",s):d.call(t,"_gg","Загрузить на",s)))+'</div></a><div class="promoMobileFull__online">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"Онлайн-версия",s):d.call(t,"_gg","Онлайн-версия",s)))+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.proposals=this.jst_modules.proposals||{},this.jst_modules.proposals.proposals=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<a href="',(i=n.link)?a=i.call(e,{hash:{},data:t}):(i=e&&e.link,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+'" class="proposal__itemLink" target="_blank">'}function r(e,t){var a,i,o="";return o+='<span class="proposals__cover" style="background-image: url(',(i=n.cover)?a=i.call(e,{hash:{},data:t}):(i=e&&e.cover,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+')"></span>'}function s(e,t){var a,i,o="";return o+='<small class="proposals__comment">',(i=n.comment)?a=i.call(e,{hash:{},data:t}):(i=e&&e.comment,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+"</small>"}function l(e,t){return"</a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u,d,h="",p="function",f=this.escapeExpression,m=n.helperMissing,g=this;return h+='<h2 class="proposals__title">'+f((u=n._gg||t&&t._gg,d={hash:{},data:i},u?u.call(t,"Здесь можно купить",d):m.call(t,"_gg","Здесь можно купить",d)))+'</h2><div class="proposals__item">',c=n["if"].call(t,t&&t.link,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(c||0===c)&&(h+=c),c=n["if"].call(t,t&&t.cover,{hash:{},inverse:g.noop,fn:g.program(3,r,i),data:i}),(c||0===c)&&(h+=c),h+='<span class="proposals__link">',(u=n.title)?c=u.call(t,{hash:{},data:i}):(u=t&&t.title,c=typeof u===p?u.call(t,{hash:{},data:i}):u),h+=f(c)+'</span><div class="proposals__description">',(u=n.description)?c=u.call(t,{hash:{},data:i}):(u=t&&t.description,c=typeof u===p?u.call(t,{hash:{},data:i}):u),(c||0===c)&&(h+=c),h+="</div>",c=n["if"].call(t,t&&t.comment,{hash:{},inverse:g.noop,fn:g.program(5,s,i),data:i}),(c||0===c)&&(h+=c),c=n["if"].call(t,t&&t.link,{hash:{},inverse:g.noop,fn:g.program(7,l,i),data:i}),(c||0===c)&&(h+=c),h+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.providerRequestForm=this.jst_modules.providerRequestForm||{},this.jst_modules.providerRequestForm.providerRequestForm=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+=c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,t&&t.template,r):l.call(t,"p",t&&t.template,r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.providerTariffs=this.jst_modules.providerTariffs||{},this.jst_modules.providerTariffs.providerTariffs=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<h2 class="providerTariffs__header">',(i=n.header)?a=i.call(e,{hash:{},data:t}):(i=e&&e.header,a=typeof i===y?i.call(e,{hash:{},data:t}):i),o+=v(a)+'</h2><ul class="providerTariffs__list',a=n.unless.call(e,e&&e.showTvColumn,{hash:{},inverse:b.noop,fn:b.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+='">',a=n.each.call(e,e&&e.tariffs,{hash:{},inverse:b.noop,fn:b.programWithDepth(4,s,t,e),data:t}),(a||0===a)&&(o+=a),o+="</ul>"}function r(e,t){return" _withoutTvColumn"}function s(e,t,a){var i,o,r,s="";return s+='<li class="providerTariffs__item"><div class="providerTariffs__cell _title"><div class="prviderTariffs__cellTitle">',(o=n.name)?i=o.call(e,{hash:{},data:t}):(o=e&&e.name,i=typeof o===y?o.call(e,{hash:{},data:t}):o),s+=v(i)+"</div>",i=n["if"].call(e,e&&e.isAction,{hash:{},inverse:b.noop,fn:b.program(5,l,t),data:t}),(i||0===i)&&(s+=i),s+='</div><div class="providerTariffs__cell _speed">'+v((o=n.p||e&&e.p,r={hash:{context:e&&e.speed},data:t},o?o.call(e,"round",r):_.call(e,"p","round",r)))+'<span class="providerTariffs__cellText">'+v((o=n._gg||e&&e._gg,r={hash:{},data:t},o?o.call(e,"Мбит/сек.",r):_.call(e,"_gg","Мбит/сек.",r)))+"</span></div>",i=n["if"].call(e,a&&a.showTvColumn,{hash:{},inverse:b.noop,fn:b.program(7,c,t),data:t}),(i||0===i)&&(s+=i),s+='<div class="providerTariffs__cell _price">',i=n["if"].call(e,e&&e.price,{hash:{},inverse:b.noop,fn:b.program(14,p,t),data:t}),(i||0===i)&&(s+=i),s+='</div><div class="providerTariffs__cell _purchase"><span class="providerTariffs__cellPurchase" data-tariff-id="',(o=n.id)?i=o.call(e,{hash:{},data:t}):(o=e&&e.id,i=typeof o===y?o.call(e,{hash:{},data:t}):o),s+=v(i)+'">'+v((o=n._gg||e&&e._gg,r={hash:{},data:t},o?o.call(e,"Подключить",r):_.call(e,"_gg","Подключить",r)))+'</span></div><div class="providerTariffs__cell _description">',(o=n.description)?i=o.call(e,{hash:{},data:t}):(o=e&&e.description,i=typeof o===y?o.call(e,{hash:{},data:t}):o),(i||0===i)&&(s+=i),s+="</div></li>"}function l(e,t){var a,i,o="";return o+='<span class="providerTariffs__cellAction">'+v((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"акция",i):_.call(e,"_gg","акция",i)))+"</span>"}function c(e,t){var a,i,o,r="";return r+='<div class="providerTariffs__cell _tv"><span class="providerTariffs__cellValue',a=n["if"].call(e,(a=e&&e.tv,null==a||a===!1?a:a.percent),{hash:{},inverse:b.noop,fn:b.program(8,u,t),data:t}),(a||0===a)&&(r+=a),r+='">'+v((i=n.p||e&&e.p,o={hash:{context:e&&e.tv},data:t},i?i.call(e,"round",o):_.call(e,"p","round",o)))+'</span><span class="providerTariffs__cellText',a=n["if"].call(e,(a=e&&e.tv,null==a||a===!1?a:a.hdChannels),{hash:{},inverse:b.noop,fn:b.program(10,d,t),data:t}),(a||0===a)&&(r+=a),r+='">'+v((i=n._ngg||e&&e._ngg,o={hash:{},data:t},i?i.call(e,"Канал","Канала","Каналов",(a=e&&e.tv,null==a||a===!1?a:a.channels),o):_.call(e,"_ngg","Канал","Канала","Каналов",(a=e&&e.tv,null==a||a===!1?a:a.channels),o)))+"</span>",a=n["if"].call(e,(a=e&&e.tv,null==a||a===!1?a:a.hdChannels),{hash:{},inverse:b.noop,fn:b.program(12,h,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function u(e,t){var n,a="";return a+=" _percent _value_"+v((n=e&&e.tv,n=null==n||n===!1?n:n.percent,typeof n===y?n.apply(e):n))}function d(e,t){return" _type_hd"}function h(e,t){var n,a="";return a+='<div class="providerTariffs__cellHd"><span class="providerTariffs__cellHdValue">'+v((n=e&&e.tv,n=null==n||n===!1?n:n.hdChannels,typeof n===y?n.apply(e):n))+'</span>&#8208;<span class="providerTariffs__cellHdText">HD</span></div>'}function p(e,t){var a,i,o,r="";return r+='<span class="providerTariffs__cellPrice',a=n["if"].call(e,e&&e.isAction,{hash:{},inverse:b.noop,fn:b.program(15,f,t),data:t}),(a||0===a)&&(r+=a),r+='">'+v((a=e&&e.price,a=null==a||a===!1?a:a.value,typeof a===y?a.apply(e):a))+'&nbsp;<span class="providerTariffs__cellPriceCurrency _'+v((a=e&&e.price,a=null==a||a===!1?a:a.currency,a=null==a||a===!1?a:a.code,typeof a===y?a.apply(e):a))+'">'+v((a=e&&e.price,a=null==a||a===!1?a:a.currency,a=null==a||a===!1?a:a.symbol,typeof a===y?a.apply(e):a))+'</span><span class="providerTariffs__cellPricePeriod">'+v((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"/мес",o):_.call(e,"_gg","/мес",o)))+"</span></span>"}function f(e,t){return" _isAction"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var m,g="",_=n.helperMissing,v=this.escapeExpression,y="function",b=this;return m=n["if"].call(t,t&&t.tariffs,{hash:{},inverse:b.noop,fn:b.program(1,o,i),data:i}),(m||0===m)&&(g+=m),g},this.jst_modules=this.jst_modules||{},this.jst_modules.push2dial=this.jst_modules.push2dial||{},this.jst_modules.push2dial.push2dial=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="push2dial__overlay"></div><div class="push2dial__wrap">'+c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,t&&t.type,"panel",r):l.call(t,"p",t&&t.type,"panel",r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.push2dialCaller=this.jst_modules.push2dialCaller||{},this.jst_modules.push2dialCaller.push2dialCaller=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o="";return o},this.jst_modules=this.jst_modules||{},this.jst_modules.recoveryAds=this.jst_modules.recoveryAds||{},this.jst_modules.recoveryAds.recoveryAds=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<header class="recoveryAds__title">'+h((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Предложения других организаций",o):p.call(e,"_t","Предложения других организаций",o)))+'</header><div class="recoveryAds__articles">',a=n.each.call(e,e&&e.firms,{hash:{},inverse:u.noop,fn:u.program(2,r,t),data:t}),(a||0===a)&&(s+=a),s+="</div>"}function r(e,t){var a,i,o,r="";return r+='<article class="recoveryAds__article',a=n["if"].call(e,e&&e.isAds,{hash:{},inverse:u.noop,fn:u.program(3,s,t),data:t}),(a||0===a)&&(r+=a),r+='" data-static-id="',(i=n.staticId)?a=i.call(e,{hash:{},data:t}):(i=e&&e.staticId,a=typeof i===d?i.call(e,{hash:{},data:t}):i),r+=h(a)+'" title="',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===d?i.call(e,{hash:{},data:t}):i),r+=h(a)+'">'+h((i=n.p||e&&e.p,o={hash:{},data:t},i?i.call(e,"firm",o):p.call(e,"p","firm",o)))+"</article>"}function s(e,t){return" _cute"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c="",u=this,d="function",h=this.escapeExpression,p=n.helperMissing;return l=n["if"].call(t,(l=t&&t.firms,null==l||l===!1?l:l.length),{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(l||0===l)&&(c+=l),c},this.jst_modules=this.jst_modules||{},this.jst_modules.reviewsCard=this.jst_modules.reviewsCard||{},this.jst_modules.reviewsCard.reviewsCard=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<div class="reviewsCard__firmWrapper">',i=n.Fix||e&&e.Fix,o={hash:{"class":"reviewsCard__firm _real",tag:"header"},inverse:k.noop,fn:k.program(2,r,t),data:t},a=i?i.call(e,o):v.call(e,"Fix",o),(a||0===a)&&(s+=a),s+="</div>"}function r(e,t){var a,i,o,r="";return r+='<h1 class="reviewsCard__firmName">'+y((i=n.Link||e&&e.Link,o={hash:{href:e&&e.href,"class":"_scheme_none reviewsCard__firmNameLink"},data:t},i?i.call(e,(a=e&&e.firm,null==a||a===!1?a:a.name),o):v.call(e,"Link",(a=e&&e.firm,null==a||a===!1?a:a.name),o)))+'</h1><address class="reviewsCard__firmAddress">',a=n["if"].call(e,e&&e.allFilials,{hash:{},inverse:k.program(5,l,t),fn:k.program(3,s,t),data:t}),(a||0===a)&&(r+=a),r+='</address><div class="reviewsCard__firmRating">',a=n["if"].call(e,(a=e&&e.firm,null==a||a===!1?a:a.rating),{hash:{},inverse:k.noop,fn:k.program(7,c,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,(a=e&&e.firm,null==a||a===!1?a:a.total),{hash:{},inverse:k.noop,fn:k.program(9,u,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,e&&e.reviewsToggle,{hash:{},inverse:k.noop,fn:k.program(11,d,t),data:t}),(a||0===a)&&(r+=a),r+="</div>",a=n["if"].call(e,(a=e&&e.firm,null==a||a===!1?a:a.reviewWriteHref),{hash:{},inverse:k.noop,fn:k.program(13,h,t),data:t}),(a||0===a)&&(r+=a),r}function s(e,t){var a,i,o="";
return o+=y((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Все филиалы организации",i):v.call(e,"_t","Все филиалы организации",i)))}function l(e,t){var n,a="";return n=e&&e.firm,n=null==n||n===!1?n:n.address,n=typeof n===b?n.apply(e):n,(n||0===n)&&(a+=n),a}function c(e,t){var a,i,o,r="";return r+=y((i=n.Rating||e&&e.Rating,o={hash:{style:"mediumBlue","class":"reviewsCard__firmRatingStars"},data:t},i?i.call(e,(a=e&&e.firm,null==a||a===!1?a:a.rating),o):v.call(e,"Rating",(a=e&&e.firm,null==a||a===!1?a:a.rating),o)))}function u(e,t){var a,i,o,r="";return r+='<div class="reviewsCard__firmRatingCounter">',i=n._hnt||e&&e._hnt,o={hash:{wrap__class:"reviewsCard__firmCounterValue"},data:t},a=i?i.call(e,"%{Wrap %1} отзыв","%{Wrap %1} отзыва","%{Wrap %1} отзывов",(a=e&&e.firm,null==a||a===!1?a:a.total),o):v.call(e,"_hnt","%{Wrap %1} отзыв","%{Wrap %1} отзыва","%{Wrap %1} отзывов",(a=e&&e.firm,null==a||a===!1?a:a.total),o),(a||0===a)&&(r+=a),r+="</div>"}function d(e,t){var a,i,o="";return o+=y((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"reviewsToggle",i):v.call(e,"p","reviewsToggle",i)))}function h(e,t){var a,i,o,r="";return i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.firm,null==a||a===!1?a:a.reviewWriteHref),"class":"reviewsCard__firmWriteView _undashed",target:"_blank"},inverse:k.noop,fn:k.program(14,p,t),data:t},a=i?i.call(e,o):v.call(e,"Link",o),(a||0===a)&&(r+=a),r}function p(e,t){var a,i,o="";return o+='<span class="reviewsCard__firmWriteViewTitle">'+y((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Написать отзыв на Флампе",i):v.call(e,"_gg","Написать отзыв на Флампе",i)))+"</span>"}function f(e,t){var a,i,o,r="";return r+='<div class="reviewsCard__list">',a=n.each.call(e,e&&e.list,{hash:{},inverse:k.noop,fn:k.program(17,m,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"+y((i=n.Preloader||e&&e.Preloader,o={hash:{"class":"_scheme_lighten reviewsCard__loader"},data:t},i?i.call(e,o):v.call(e,"Preloader",o)))+'<div class="reviewsCard__firmWrapper">'+y((i=n.Fix||e&&e.Fix,o={hash:{"class":"reviewsCard__firm"},data:t},i?i.call(e,o):v.call(e,"Fix",o)))+"</div>",(i=n.Track)?a=i.call(e,{hash:{},data:t}):(i=e&&e.Track,a=typeof i===b?i.call(e,{hash:{},data:t}):i),r+=y(a)}function m(e,t){var a,i,o="";return o+=y((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"review",i):v.call(e,"p","review",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var g,_="",v=n.helperMissing,y=this.escapeExpression,b="function",k=this;return _+='<div class="reviewsCard__scroller">',g=n["if"].call(t,t&&t.firm,{hash:{},inverse:k.noop,fn:k.program(1,o,i),data:i}),(g||0===g)&&(_+=g),g=n["if"].call(t,(g=t&&t.list,null==g||g===!1?g:g.length),{hash:{},inverse:k.noop,fn:k.program(16,f,i),data:i}),(g||0===g)&&(_+=g),_+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.rotate=this.jst_modules.rotate||{},this.jst_modules.rotate.rotate=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="rotate__wrap" title="'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Повернуть",r):l.call(t,"_gg","Повернуть",r)))+'"><div class="rotate__center"><div class="rotate__needle"></div></div><div class="rotate__ccw"></div><div class="rotate__cw"></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.roundButtons=this.jst_modules.roundButtons||{},this.jst_modules.roundButtons.roundButtons=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n["if"].call(e,e&&e.save,{hash:{},inverse:p.noop,fn:p.program(2,r,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.cancel,{hash:{},inverse:p.noop,fn:p.program(4,s,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.loader,{hash:{},inverse:p.noop,fn:p.program(6,l,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var a,i,o="";return o+='<div class="roundButtons__button _type_save" title="'+h((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Сохранить",i):d.call(e,"_t","Сохранить",i)))+'">'+h((a=n.Icon||e&&e.Icon,i={hash:{"class":"roundButtons__buttonIcon _save"},data:t},a?a.call(e,"roundButtons-ok",i):d.call(e,"Icon","roundButtons-ok",i)))+"</div>"}function s(e,t){var a,i,o="";return o+='<div class="roundButtons__button _type_cancel" title="'+h((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Отменить",i):d.call(e,"_t","Отменить",i)))+'">'+h((a=n.Icon||e&&e.Icon,i={hash:{"class":"roundButtons__buttonIcon _save"},data:t},a?a.call(e,"roundButtons-cancel",i):d.call(e,"Icon","roundButtons-cancel",i)))+"</div>"}function l(e,t){var a,i,o="";return o+='<div class="roundButtons__button _type_loader">'+h((a=n.Preloader||e&&e.Preloader,i={hash:{"class":"_small _scheme_lighten roundButtons__preloader"},data:t},a?a.call(e,i):d.call(e,"Preloader",i)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u="",d=n.helperMissing,h=this.escapeExpression,p=this;return c=n.each.call(t,t&&t.buttons,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(c||0===c)&&(u+=c),u},this.jst_modules=this.jst_modules||{},this.jst_modules.routeCard=this.jst_modules.routeCard||{},this.jst_modules.routeCard.routeCard=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return i=n.Link||e&&e.Link,o={hash:{tag:"h1","class":"_large routeCard__headerTitle _undashed"},inverse:w.noop,fn:w.program(2,r,t),data:t},a=i?i.call(e,o):x.call(e,"Link",o),(a||0===a)&&(s+=a),s+='<span class="routeCard__headerNote">',(i=n.typeName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.typeName,a=typeof i===b?i.call(e,{hash:{},data:t}):i),s+=k(a)+" ",a=n.unless.call(e,e&&e.noteInTitle,{hash:{},inverse:w.noop,fn:w.program(7,c,t),data:t}),(a||0===a)&&(s+=a),s+="</span>"}function r(e,t){var a,i,o="";return o+='<span class="routeCard__headerTitleMarker"',a=n["if"].call(e,e&&e.color,{hash:{},inverse:w.noop,fn:w.program(3,s,t),data:t}),(a||0===a)&&(o+=a),o+="></span>",(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===b?i.call(e,{hash:{},data:t}):i),o+=k(a),a=n["if"].call(e,e&&e.noteInTitle,{hash:{},inverse:w.noop,fn:w.program(5,l,t),data:t}),(a||0===a)&&(o+=a),o}function s(e,t){var a,i,o="";return o+=' style="background-color: ',(i=n.color)?a=i.call(e,{hash:{},data:t}):(i=e&&e.color,a=typeof i===b?i.call(e,{hash:{},data:t}):i),o+=k(a)+'"'}function l(e,t){var a,i,o="";return o+='\n                             <div class="routeCard__headerTitleNote">',(i=n.note)?a=i.call(e,{hash:{},data:t}):(i=e&&e.note,a=typeof i===b?i.call(e,{hash:{},data:t}):i),o+=k(a)+"</div>"}function c(e,t){var a,i;return(i=n.note)?a=i.call(e,{hash:{},data:t}):(i=e&&e.note,a=typeof i===b?i.call(e,{hash:{},data:t}):i),k(a)}function u(e,t){var n="";return n+='<div class="routeCard__actions">'+k(typeof e===b?e.apply(e):e)+"</div>"}function d(e,t){var n,a="";return a+='<div class="routeCard__schedule">'+k((n=e&&e.schedule,n=null==n||n===!1?n:n.days,typeof n===b?n.apply(e):n))+", "+k((n=e&&e.schedule,n=null==n||n===!1?n:n.period,typeof n===b?n.apply(e):n))+" "+k((n=e&&e.schedule,n=null==n||n===!1?n:n.hours,typeof n===b?n.apply(e):n))+'<div class="routeCard__scheduleNow">'+k((n=e&&e.schedule,n=null==n||n===!1?n:n.now,typeof n===b?n.apply(e):n))+"</div></div>"}function h(e,t){var a,i,o="";return o+='<div class="routeCard__directionsItem">'+k((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):x.call(e,"module",e,i)))+"</div>"}function p(e,t){var a,i,o,r="";return r+='<div class="routeCard__footerItem">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.advLink,null==a||a===!1?a:a.href),target:"_blank","class":"routeCard__footerLink routeCard__advComeOn"},inverse:w.noop,fn:w.program(16,f,t),data:t},a=i?i.call(e,o):x.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function f(e,t){var a,i,o="";return o+=k((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Реклама в 2ГИС",i):x.call(e,"_t","Реклама в 2ГИС",i)))}function m(e,t){var a,i,o="";return o+=k((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Ошибка в данных",i):x.call(e,"_t","Ошибка в данных",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var g,_,v,y="",b="function",k=this.escapeExpression,w=this,x=n.helperMissing;return y+='<div class="routeCard__scroller"><div class="routeCard__scrollerIn _type_',(_=n.type)?g=_.call(t,{hash:{},data:i}):(_=t&&t.type,g=typeof _===b?_.call(t,{hash:{},data:i}):_),y+=k(g)+" _",(_=n.city)?g=_.call(t,{hash:{},data:i}):(_=t&&t.city,g=typeof _===b?_.call(t,{hash:{},data:i}):_),y+=k(g)+'"><div class="routeCard__content"><div class="routeCard__headerWrapper">',_=n.Fix||t&&t.Fix,v={hash:{"class":"routeCard__header _innerHeader",tag:"header"},inverse:w.noop,fn:w.program(1,o,i),data:i},g=_?_.call(t,v):x.call(t,"Fix",v),(g||0===g)&&(y+=g),y+="</div>",_=n.module||t&&t.module,v={hash:{},inverse:w.noop,fn:w.program(9,u,i),data:i},g=_?_.call(t,"cardActions",v):x.call(t,"module","cardActions",v),(g||0===g)&&(y+=g),y+=k((_=n.module||t&&t.module,v={hash:{},data:i},_?_.call(t,"promoMobile",v):x.call(t,"module","promoMobile",v))),g=n["if"].call(t,t&&t.schedule,{hash:{},inverse:w.noop,fn:w.program(11,d,i),data:i}),(g||0===g)&&(y+=g),g=n.each.call(t,t&&t.routesList,{hash:{},inverse:w.noop,fn:w.program(13,h,i),data:i}),(g||0===g)&&(y+=g),y+='<div class="routeCard__googletag"></div></div><footer class="routeCard__footer"><div class="routeCard__footerContent">',g=n["if"].call(t,t&&t.advLink,{hash:{},inverse:w.noop,fn:w.program(15,p,i),data:i}),(g||0===g)&&(y+=g),y+='<div class="routeCard__footerItem routeCard__footerBugReport">',_=n.Link||t&&t.Link,v={hash:{"class":"\n                    routeCard__footerItemLink\n                    _type_bugReport _undashed"},inverse:w.noop,fn:w.program(18,m,i),data:i},g=_?_.call(t,v):x.call(t,"Link",v),(g||0===g)&&(y+=g),y+="</div></div></footer></div>",(_=n.Track)?g=_.call(t,{hash:{},data:i}):(_=t&&t.Track,g=typeof _===b?_.call(t,{hash:{},data:i}):_),y+=k(g)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.routeResults=this.jst_modules.routeResults||{},this.jst_modules.routeResults.routeResults=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=u((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"route",i):c.call(e,"p","route",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c=n.helperMissing,u=this.escapeExpression,d="function",h=this;return l+='<header class="routeResults__header"><div class="routeResults__headerText">',(s=n.title)?r=s.call(t,{hash:{},data:i}):(s=t&&t.title,r=typeof s===d?s.call(t,{hash:{},data:i}):s),l+=u(r)+'</div></header><div class="routeResults__wrap">',r=n.each.call(t,t&&t.routes,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(r||0===r)&&(l+=r),l+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.routesList=this.jst_modules.routesList||{},this.jst_modules.routesList.routesList=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<h3 class="routesList__heading" style="border-color: ',(i=n.color)?a=i.call(e,{hash:{},data:t}):(i=e&&e.color,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=h(a)+'">',a=n["if"].call(e,e&&e.isMetro,{hash:{},inverse:f.program(4,s,t),fn:f.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+="</h3>"}function r(e,t){var a,i,o="";return o+=h((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"до ст. %1",e&&e.name,i):d.call(e,"_t","до ст. %1",e&&e.name,i)))}function s(e,t){var a,i,o="";return(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=h(a)}function l(e,t){var a,i,o="";return o+=h((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):d.call(e,"module",e,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u="",d=n.helperMissing,h=this.escapeExpression,p="function",f=this;return c=n["if"].call(t,t&&t.name,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(c||0===c)&&(u+=c),u+='<div class="routesList__list">',c=n.each.call(t,t&&t.stations,{hash:{},inverse:f.noop,fn:f.program(6,l,i),data:i}),(c||0===c)&&(u+=c),u+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.routesListItem=this.jst_modules.routesListItem||{},this.jst_modules.routesListItem.routesListItem=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<article class="routesListItem__transitions"><div class="routesListItem__transitionsHeading">',(i=n.transitionTitle)?a=i.call(e,{hash:{},data:t}):(i=e&&e.transitionTitle,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+"</div>",a=n.each.call(e,e&&e.transitions,{hash:{},inverse:f.noop,fn:f.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+="</article>"}function r(e,t){var a,i,o,r="";return r+='<div class="routesListItem__transitionsItem" style="border-color: ',(i=n.color)?a=i.call(e,{hash:{},data:t}):(i=e&&e.color,a=typeof i===d?i.call(e,{hash:{},data:t}):i),r+=h(a)+'">'+h((i=n.Link||e&&e.Link,o={hash:{href:e&&e.seoLinkStation,"data-station-id":e&&e.station_id,"class":"routesListItem__transitionsItemName _undashed"},data:t},i?i.call(e,e&&e.station_name,o):p.call(e,"Link",e&&e.station_name,o)))+',\n                    <span class="routesListItem__transitionsItemLine">',(i=n.route_name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.route_name,a=typeof i===d?i.call(e,{hash:{},data:t}):i),r+=h(a)+"</span></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d="function",h=this.escapeExpression,p=n.helperMissing,f=this;return u+='<div class="routesListItem__wrap" style="border-color: ',(l=n.color)?s=l.call(t,{hash:{},data:i}):(l=t&&t.color,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+'">'+h((l=n.Link||t&&t.Link,c={hash:{href:t&&t.seoLinkStation,"class":"routesListItem__name _undashed"},data:i},l?l.call(t,t&&t.name,c):p.call(t,"Link",t&&t.name,c))),s=n["if"].call(t,t&&t.transitions,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.rubricsList=this.jst_modules.rubricsList||{},this.jst_modules.rubricsList.rubricsList=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<h1 class="rubricsList__headerTitle">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=g(a)+"</h1>",a=n["if"].call(e,e&&e.rubricsCount,{hash:{},inverse:v.noop,fn:v.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o}function r(e,t){var a,i,o,r="";return r+='<span class="rubricsList__headerCounter"><span class="rubricsList__headerCounterRubrics">',(i=n.rubricsCount)?a=i.call(e,{hash:{},data:t}):(i=e&&e.rubricsCount,a=typeof i===m?i.call(e,{hash:{},data:t}):i),r+=g(a)+"</span>\n                        &nbsp;"+g((i=n._nt||e&&e._nt,o={hash:{},data:t},i?i.call(e,"рубрика","рубрики","рубрик",e&&e.rubricsCount,o):_.call(e,"_nt","рубрика","рубрики","рубрик",e&&e.rubricsCount,o)))+"</span>"}function s(e,t){var a,i="";return i+='<div class="rubricsList__content"><ul class="rubricsList__list">',a=n.each.call(e,e&&e.rubrics,{hash:{},inverse:v.noop,fn:v.program(5,l,t),data:t}),(a||0===a)&&(i+=a),i+="</ul></div>"}function l(e,t){var a,i,o,r="";return r+='<li class="rubricsList__listItem" data-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===m?i.call(e,{hash:{},data:t}):i),r+=g(a)+'" data-name="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===m?i.call(e,{hash:{},data:t}):i),r+=g(a)+'"><h3 class="rubricsList__listItemLink">',i=n.Link||e&&e.Link,o={hash:{href:e&&e.seoLink,"class":"_scheme_none rubricsList__listItemLinkTitle"},inverse:v.noop,fn:v.program(6,c,t),data:t},a=i?i.call(e,o):_.call(e,"Link",o),(a||0===a)&&(r+=a),r+='</h3><span class="rubricsList__listItemDescription">',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===m?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+="</span></li>"}function c(e,t){var a,i,o="";return(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=g(a)}function u(e,t){}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h,p,f="",m="function",g=this.escapeExpression,_=n.helperMissing,v=this;return f+='<div class="rubricsList__scroller"><section class="rubricsList__container"><div class="rubricsList__headerWrapper">',h=n.Fix||t&&t.Fix,p={hash:{"class":"rubricsList__header",tag:"header"},inverse:v.noop,fn:v.program(1,o,i),data:i},d=h?h.call(t,p):_.call(t,"Fix",p),(d||0===d)&&(f+=d),f+="</div>",d=n["if"].call(t,t&&t.rubrics,{hash:{},inverse:v.noop,fn:v.program(4,s,i),data:i}),(d||0===d)&&(f+=d),f+='<div class="rubricsList__footerWrapper">',h=n.Fix||t&&t.Fix,p={hash:{"class":"rubricsList__footer",tag:"footer"},inverse:v.noop,fn:v.program(8,u,i),data:i},d=h?h.call(t,p):_.call(t,"Fix",p),(d||0===d)&&(f+=d),f+="</div></section>",(h=n.Track)?d=h.call(t,{hash:{},data:i}):(h=t&&t.Track,d=typeof h===m?h.call(t,{hash:{},data:i}):h),f+=g(d)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.ruler=this.jst_modules.ruler||{},this.jst_modules.ruler.ruler=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="ruler__control" title=\''+c((o=n._pt||t&&t._pt,r={hash:{},data:i},o?o.call(t,"Инструмент измерения","Линейка",r):l.call(t,"_pt","Инструмент измерения","Линейка",r)))+"'></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.schedule=this.jst_modules.schedule||{},this.jst_modules.schedule.schedule=function(e,t,n,a,i){function o(e,t){return" _expandable"}function r(e,t){var a,i,o="";return o+=m((a=n.Icon||e&&e.Icon,i={hash:{"class":"schedule__toggle"},data:t},a?a.call(e,"card_toggle",i):f.call(e,"Icon","card_toggle",i)))}function s(e,t){var a,i,o="";return(i=n.breaks)?a=i.call(e,{hash:{},data:t}):(i=e&&e.breaks,a=typeof i===g?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o}function l(e,t){var a,i,o="";return o+='<div class="schedule__comment"> ',(i=n.comment)?a=i.call(e,{hash:{},data:t}):(i=e&&e.comment,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=m(a)+"</div>"}function c(e,t){var a,i,o="";return o+='<div class="schedule__dropdown">'+m((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"table",i):f.call(e,"p","table",i)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d,h,p="",f=n.helperMissing,m=this.escapeExpression,g="function",_=this;return p+='<header class="schedule__header',u=n["if"].call(t,t&&t.week,{hash:{},inverse:_.noop,fn:_.program(1,o,i),data:i}),(u||0===u)&&(p+=u),p+='"><div class="schedule__status">'+m((d=n.Icon||t&&t.Icon,h={hash:{"class":"schedule__statusIcon"},data:i},d?d.call(t,"schedule_clock",h):f.call(t,"Icon","schedule_clock",h)))+'<span class="schedule__statusText">',(d=n.today)?u=d.call(t,{hash:{},data:i}):(d=t&&t.today,u=typeof d===g?d.call(t,{hash:{},data:i}):d),(u||0===u)&&(p+=u),p+='</span><span class="schedule__closed">'+m((d=n._t||t&&t._t,h={hash:{},data:i},d?d.call(t,"Закрыто",h):f.call(t,"_t","Закрыто",h)))+"</span>",u=n["if"].call(t,t&&t.week,{hash:{},inverse:_.noop,fn:_.program(3,r,i),data:i}),(u||0===u)&&(p+=u),p+="</div>",u=n["if"].call(t,t&&t.breaks,{hash:{},inverse:_.noop,fn:_.program(5,s,i),data:i}),(u||0===u)&&(p+=u),u=n["if"].call(t,t&&t.comment,{hash:{},inverse:_.noop,fn:_.program(7,l,i),data:i}),(u||0===u)&&(p+=u),p+=m((d=n.module||t&&t.module,h={hash:{},data:i},d?d.call(t,"holidayWarning",h):f.call(t,"module","holidayWarning",h)))+"</header>",u=n["if"].call(t,t&&t.week,{hash:{},inverse:_.noop,fn:_.program(9,c,i),data:i}),(u||0===u)&&(p+=u),p},this.jst_modules=this.jst_modules||{},this.jst_modules.searchBar=this.jst_modules.searchBar||{},this.jst_modules.searchBar.searchBar=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="searchBar__back">'+f((a=n.Icon||e&&e.Icon,i={hash:{"class":"searchBar__backIcon"},data:t},a?a.call(e,"ui_control-back",i):p.call(e,"Icon","ui_control-back",i)))+"</div>"}function r(e,t){return' onsubmit="return false;"'}function s(e,t){var a,i,o="";return o+='<div class="searchBar__ppnotTime">'+f((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e&&e.ppnotTime,i):p.call(e,"module",e&&e.ppnotTime,i)))+"</div>"}function l(e,t){var n="";return n+='<div class="searchBar__cityFilter">'+f(typeof e===m?e.apply(e):e)+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u,d,h="",p=n.helperMissing,f=this.escapeExpression,m="function",g=this;return h+='<div class="searchBar__forms"><div class="searchBar__formsIn"><a class="searchBar__logo" href="',(u=n.citySeoLink)?c=u.call(t,{hash:{},data:i}):(u=t&&t.citySeoLink,c=typeof u===m?u.call(t,{hash:{},data:i}):u),h+=f(c),(u=n.utmString)?c=u.call(t,{hash:{},data:i}):(u=t&&t.utmString,c=typeof u===m?u.call(t,{hash:{},data:i}):u),h+=f(c)+'"></a>',c=n["if"].call(t,t&&t.isPhone,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(c||0===c)&&(h+=c),h+='<form class="searchBar__form" action="/fallbackSearch" method="post"',c=n.unless.call(t,t&&t.isMausoleum,{hash:{},inverse:g.noop,fn:g.program(3,r,i),data:i}),(c||0===c)&&(h+=c),h+='><div class="searchBar__textfield _directory">'+f((u=n.module||t&&t.module,d={hash:{},data:i},u?u.call(t,t&&t.suggest,d):p.call(t,"module",t&&t.suggest,d)))+'</div><button class="searchBar__submit _directory" type="submit">'+f((u=n.Preloader||t&&t.Preloader,d={hash:{"class":"searchBar__preloader _scheme_submit _small"},data:i},u?u.call(t,d):p.call(t,"Preloader",d)))+'</button><div class="searchBar__textfield _from">'+f((u=n.module||t&&t.module,d={hash:{},data:i},u?u.call(t,t&&t.suggestFrom,d):p.call(t,"module",t&&t.suggestFrom,d)))+'<div class="searchBar__switch"></div></div><div class="searchBar__textfield _to">'+f((u=n.module||t&&t.module,d={hash:{},data:i},u?u.call(t,t&&t.suggestTo,d):p.call(t,"module",t&&t.suggestTo,d)))+"</div>",c=n["if"].call(t,t&&t.ppnotTime,{hash:{},inverse:g.noop,fn:g.program(5,s,i),data:i}),(c||0===c)&&(h+=c),h+='<div class="searchBar__transport">'+f((u=n.p||t&&t.p,d={hash:{},data:i},u?u.call(t,"transportTypes",d):p.call(t,"p","transportTypes",d)))+'</div><button class="searchBar__submit _rs" type="submit">'+f((u=n.Preloader||t&&t.Preloader,d={hash:{"class":"searchBar__preloader _scheme_submit _small"},data:i},u?u.call(t,d):p.call(t,"Preloader",d)))+"</button>",u=n.module||t&&t.module,d={hash:{},inverse:g.noop,fn:g.program(7,l,i),data:i},c=u?u.call(t,"cityFilter",d):p.call(t,"module","cityFilter",d),(c||0===c)&&(h+=c),h+='<input type="hidden" name="search[city]" value="',(u=n.cityAlias)?c=u.call(t,{hash:{},data:i}):(u=t&&t.cityAlias,c=typeof u===m?u.call(t,{hash:{},data:i}):u),h+=f(c)+'"></form><div class="searchBar__media">'+f((u=n.p||t&&t.p,d={hash:{},data:i},u?u.call(t,"media",d):p.call(t,"p","media",d)))+'</div></div></div><div class="searchBar__buttons"><div class="searchBar__button searchBar__rsBtn"><div class="searchBar__buttonText">'+f((u=n._pt||t&&t._pt,d={hash:{},data:i},u?u.call(t,"Способ передвижения","Проезд",d):p.call(t,"_pt","Способ передвижения","Проезд",d)))+'</div></div><div class="searchBar__button searchBar__directoryBtn"><div class="searchBar__buttonText">'+f((u=n._pt||t&&t._pt,d={hash:{},data:i},u?u.call(t,"Поиск по организациям","Поиск",d):p.call(t,"_pt","Поиск по организациям","Поиск",d)))+"</div></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.searchResults=this.jst_modules.searchResults||{},this.jst_modules.searchResults.searchResults=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=y((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,"cardHeader",i):v.call(e,"module","cardHeader",i)))}function r(e,t){var a,i,o="";return o+=y((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"header",i):v.call(e,"p","header",i)))}function s(e,t){var a,i,o,r="";return r+='<div class="searchResults__mobileHeader _mode_'+y((a=e&&e.mobileHeader,a=null==a||a===!1?a:a.mode,typeof a===b?a.apply(e):a))+'">'+y((i=n.Icon||e&&e.Icon,o={hash:{"class":"searchResults__mobileHeaderIcon"},data:t},i?i.call(e,(a=e&&e.mobileHeader,null==a||a===!1?a:a.icon),o):v.call(e,"Icon",(a=e&&e.mobileHeader,null==a||a===!1?a:a.icon),o)))+'<div class="searchResults__mobileHeaderText">'+y((a=e&&e.mobileHeader,a=null==a||a===!1?a:a.text,typeof a===b?a.apply(e):a))+"</div></div>"}function l(e,t){var a,i,o,r="";return r+='<div class="searchResults__clipper"><div class="searchResults__scroller"><div class="searchResults__loader _top">'+y((i=n.Preloader||e&&e.Preloader,o={hash:{"class":"_scheme_lighten searchResults__loaderPre"},data:t},i?i.call(e,o):v.call(e,"Preloader",o)))+"</div>",a=n["if"].call(e,e&&e.additional,{hash:{},inverse:k.noop,fn:k.program(8,c,t),data:t}),(a||0===a)&&(r+=a),r+=y((i=n.module||e&&e.module,o={hash:{},data:t},i?i.call(e,"filters",o):v.call(e,"module","filters",o)))+'<div class="searchResults__wizard">'+y((i=n.module||e&&e.module,o={hash:{},data:t},i?i.call(e,"wizard",o):v.call(e,"module","wizard",o)))+"</div>",a=n["if"].call(e,e&&e.providerSeoLink,{hash:{},inverse:k.noop,fn:k.program(10,u,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,e&&e.tyresSeoLink,{hash:{},inverse:k.noop,fn:k.program(12,d,t),data:t}),(a||0===a)&&(r+=a),r+='<div class="searchResults__content">'+y((i=n.p||e&&e.p,o={hash:{},data:t},i?i.call(e,e&&e.contentPartial,o):v.call(e,"p",e&&e.contentPartial,o)))+'</div><div class="searchResults__googletag"></div>',(i=n.Track)?a=i.call(e,{hash:{},data:t}):(i=e&&e.Track,a=typeof i===b?i.call(e,{hash:{},data:t}):i),r+=y(a)+"</div></div>"}function c(e,t){var a,i,o="";return o+=y((a=n.p||e&&e.p,i={hash:{context:e&&e.additional},data:t},a?a.call(e,"additional",i):v.call(e,"p","additional",i)))}function u(e,t){var a,i,o="";return o+=y((a=n.Link||e&&e.Link,i={hash:{href:e&&e.providerSeoLink,"class":"searchResults__providerAggregatorButton"},data:t},a?a.call(e,"Сравнить тарифы провайдеров",i):v.call(e,"Link","Сравнить тарифы провайдеров",i)))}function d(e,t){var a,i,o,r="";return i=n.Link||e&&e.Link,o={hash:{href:e&&e.tyresSeoLink,"class":"searchResults__tyresButton"},inverse:k.noop,fn:k.program(13,h,t),data:t},a=i?i.call(e,o):v.call(e,"Link",o),(a||0===a)&&(r+=a),r}function h(e,t){var a,i,o="";return o+=y((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Подобрать шины",i):v.call(e,"_gg","Подобрать шины",i)))}function p(e,t){var n="";return n+='<div class="searchResults__banner"><div class="searchResults__bannerClose"></div><div class="searchResults__bannerIn">'+y(typeof e===b?e.apply(e):e)+"</div></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var f,m,g,_="",v=n.helperMissing,y=this.escapeExpression,b="function",k=this;return _+=' <div class="searchResults__header">',f=n["if"].call(t,t&&t.expandedView,{hash:{},inverse:k.program(3,r,i),fn:k.program(1,o,i),data:i}),(f||0===f)&&(_+=f),_+="</div>",f=n["if"].call(t,t&&t.mobileHeader,{hash:{},inverse:k.noop,fn:k.program(5,s,i),data:i}),(f||0===f)&&(_+=f),f=n["if"].call(t,t&&t.contentPartial,{hash:{},inverse:k.noop,fn:k.program(7,l,i),data:i}),(f||0===f)&&(_+=f),m=n.module||t&&t.module,g={hash:{},inverse:k.noop,fn:k.program(15,p,i),data:i},f=m?m.call(t,t&&t.mkbBanner,g):v.call(t,"module",t&&t.mkbBanner,g),(f||0===f)&&(_+=f),_+='<div class="searchResults__filterGlass"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.selectBox=this.jst_modules.selectBox||{},this.jst_modules.selectBox.selectBox=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<label class="selectBox__label" for="',(i=n.selectId)?a=i.call(e,{hash:{},data:t}):(i=e&&e.selectId,a=typeof i===S?i.call(e,{hash:{},data:t}):i),o+=E(a)+'">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===S?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</label>"}function r(e,t){var a,i,o,r="";return r+='<div class="selectBox__wrapper"><input\n            type="text"\n            class="selectBox__input',a=n["if"].call(e,e&&e.selectedItem,{hash:{},inverse:P.noop,fn:P.program(4,s,t),data:t}),(a||0===a)&&(r+=a),r+='"\n            ',a=n["if"].call(e,(a=e&&e.attributes,null==a||a===!1?a:a.disabled),{hash:{},inverse:P.noop,fn:P.program(6,l,t),data:t}),(a||0===a)&&(r+=a),r+="\n            ",a=n["if"].call(e,e&&e.placeholder,{hash:{},inverse:P.noop,fn:P.program(8,c,t),data:t}),(a||0===a)&&(r+=a),r+='\n            value="',(i=n.selectedItemLabel)?a=i.call(e,{hash:{},data:t}):(i=e&&e.selectedItemLabel,a=typeof i===S?i.call(e,{hash:{},data:t}):i),r+=E(a)+'"\n            tabIndex="-1">',a=n["if"].call(e,e&&e.marker,{hash:{},inverse:P.noop,fn:P.program(10,u,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,(a=e&&e.icons,null==a||a===!1?a:a.searchIcon),{hash:{},inverse:P.noop,fn:P.program(16,f,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,(a=e&&e.icons,null==a||a===!1?a:a.clearIcon),{hash:{},inverse:P.noop,fn:P.program(19,g,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,e&&e.arrowIcon,{hash:{},inverse:P.noop,fn:P.program(21,_,t),data:t}),(a||0===a)&&(r+=a),r+='</div><div class="selectBox__dropdownWrapper"><div class="selectBox__scroller"><div class="selectBox__dropdown"></div>'+E((i=n.Track||e&&e.Track,o={hash:{"class":e&&e.trackClass},data:t},i?i.call(e,o):j.call(e,"Track",o)))+"</div></div>"}function s(e,t){return" _selected"}function l(e,t){return"\n                disabled\n            "}function c(e,t){var a,i,o="";return o+='\n                placeholder="',(i=n.placeholder)?a=i.call(e,{hash:{},data:t}):(i=e&&e.placeholder,a=typeof i===S?i.call(e,{hash:{},data:t}):i),o+=E(a)+'"\n            '}function u(e,t){var a,i="";return i+='<div class="selectBox__markerColor',a=n["if"].call(e,e&&e.selectedItem,{hash:{},inverse:P.noop,fn:P.program(11,d,t),data:t}),(a||0===a)&&(i+=a),i+='"\n                 ',a=n["if"].call(e,(a=e&&e.selectedItem,null==a||a===!1?a:a.style),{hash:{},inverse:P.noop,fn:P.program(13,h,t),data:t}),(a||0===a)&&(i+=a),i+="></div>"}function d(e,t){return" _visible"}function h(e,t){var a,i="";return i+='\n                    style="',a=n.each.call(e,(a=e&&e.selectedItem,null==a||a===!1?a:a.style),{hash:{},inverse:P.noop,fn:P.program(14,p,t),data:t}),(a||0===a)&&(i+=a),i+='"\n                 '}function p(e,t){var n,a="";return a+=E((n=null==t||t===!1?t:t.key,typeof n===S?n.apply(e):n))+": "+E(typeof e===S?e.apply(e):e)+";"}function f(e,t){var a,i,o,r="";return r+='<div class="selectBox__searchControl',a=n["if"].call(e,e&&e.selectedItem,{hash:{},inverse:P.noop,fn:P.program(17,m,t),data:t}),(a||0===a)&&(r+=a),r+='">'+E((i=n.Icon||e&&e.Icon,o={hash:{"class":"selectBox__searchIcon"},data:t},i?i.call(e,(a=e&&e.icons,null==a||a===!1?a:a.searchIcon),o):j.call(e,"Icon",(a=e&&e.icons,null==a||a===!1?a:a.searchIcon),o)))+"</div>"}function m(e,t){return" _hidden"}function g(e,t){var a,i,o,r="";return r+='<div class="selectBox__clear">'+E((i=n.Icon||e&&e.Icon,o={hash:{"class":"selectBox__clearIcon"},data:t},i?i.call(e,(a=e&&e.icons,null==a||a===!1?a:a.clearIcon),o):j.call(e,"Icon",(a=e&&e.icons,null==a||a===!1?a:a.clearIcon),o)))+"</div>"}function _(e,t){var a,i,o="";return o+='<div class="selectBox__arrow">'+E((a=n.Icon||e&&e.Icon,i={hash:{"class":"selectBox__arrowIcon"},data:t},a?a.call(e,e&&e.arrowIcon,i):j.call(e,"Icon",e&&e.arrowIcon,i)))+"</div>"}function v(e,t){var a,i="";return i+="\n        ",a=n["if"].call(e,e,{hash:{},inverse:P.noop,fn:P.program(24,y,t),data:t}),(a||0===a)&&(i+=a),i+="\n    "}function y(e,t){var n,a="";return a+=" "+E((n=null==t||t===!1?t:t.key,typeof n===S?n.apply(e):n))}function b(e,t){var a,i,o="";return o+=' name="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===S?i.call(e,{hash:{},data:t}):i),o+=E(a)+'"'}function k(e,t){var a,i,o="";return o+=' tabIndex="',(i=n.tabIndex)?a=i.call(e,{hash:{},data:t}):(i=e&&e.tabIndex,a=typeof i===S?i.call(e,{hash:{},data:t}):i),o+=E(a)+'"'}function w(e,t){return" selected"}function x(e,t){var a,i="";return a=n["if"].call(e,e&&e.items,{hash:{},inverse:P.program(34,L,t),fn:P.program(33,C,t),data:t}),(a||0===a)&&(i+=a),i}function C(e,t){var a,i,o="";return o+='<optgroup label="',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===S?i.call(e,{hash:{},data:t}):i),o+=E(a)+'">',a=n.each.call(e,e&&e.items,{hash:{},inverse:P.noop,fn:P.program(34,L,t),data:t}),(a||0===a)&&(o+=a),
o+="</optgroup>"}function L(e,t){var a,i,o="";return o+='<option value="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===S?i.call(e,{hash:{},data:t}):i),o+=E(a)+'" ',a=n["if"].call(e,e&&e.selected,{hash:{},inverse:P.noop,fn:P.program(30,w,t),data:t}),(a||0===a)&&(o+=a),o+=">",(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===S?i.call(e,{hash:{},data:t}):i),o+=E(a)+"</option>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var I,T="",S="function",E=this.escapeExpression,P=this,j=n.helperMissing;return I=n["if"].call(t,t&&t.label,{hash:{},inverse:P.noop,fn:P.program(1,o,i),data:i}),(I||0===I)&&(T+=I),I=n["if"].call(t,t&&t.isDesktop,{hash:{},inverse:P.noop,fn:P.program(3,r,i),data:i}),(I||0===I)&&(T+=I),T+="<select\n    ",I=n.each.call(t,t&&t.attributes,{hash:{},inverse:P.noop,fn:P.program(23,v,i),data:i}),(I||0===I)&&(T+=I),T+="\n\n    ",I=n["if"].call(t,t&&t.name,{hash:{},inverse:P.noop,fn:P.program(26,b,i),data:i}),(I||0===I)&&(T+=I),T+="\n    ",I=n["if"].call(t,t&&t.tabIndex,{hash:{},inverse:P.noop,fn:P.program(28,k,i),data:i}),(I||0===I)&&(T+=I),T+='\n\n    class="selectBox__original"><option value="'+E((I=t&&t.defaults,I=null==I||I===!1?I:I.value,typeof I===S?I.apply(t):I))+'" ',I=n["if"].call(t,t&&t.selected,{hash:{},inverse:P.noop,fn:P.program(30,w,i),data:i}),(I||0===I)&&(T+=I),T+=">"+E((I=t&&t.defaults,I=null==I||I===!1?I:I.label,typeof I===S?I.apply(t):I))+"</option>",I=n.each.call(t,t&&t.items,{hash:{},inverse:P.noop,fn:P.program(32,x,i),data:i}),(I||0===I)&&(T+=I),T+="</select>"},this.jst_modules=this.jst_modules||{},this.jst_modules.selectBox2=this.jst_modules.selectBox2||{},this.jst_modules.selectBox2.selectBox2=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<label class="selectBox2__label" for="',(i=n.selectId)?a=i.call(e,{hash:{},data:t}):(i=e&&e.selectId,a=typeof i===L?i.call(e,{hash:{},data:t}):i),o+=I(a)+'">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===L?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</label>"}function r(e,t){var a,i,o,r="";return r+='<div class="selectBox2__wrapper"><input\n            type="text"\n            class="selectBox2__input"\n            ',a=n["if"].call(e,(a=e&&e.attributes,null==a||a===!1?a:a.disabled),{hash:{},inverse:S.noop,fn:S.program(4,s,t),data:t}),(a||0===a)&&(r+=a),r+="\n            ",a=n["if"].call(e,e&&e.placeholder,{hash:{},inverse:S.noop,fn:S.program(6,l,t),data:t}),(a||0===a)&&(r+=a),r+='\n            value="',(i=n.selectedItemLabel)?a=i.call(e,{hash:{},data:t}):(i=e&&e.selectedItemLabel,a=typeof i===L?i.call(e,{hash:{},data:t}):i),r+=I(a)+'"\n            tabindex="',a=n["if"].call(e,e&&e.tabindexPresent,{hash:{},inverse:S.program(10,u,t),fn:S.program(8,c,t),data:t}),(a||0===a)&&(r+=a),r+='"\n        >',a=n["if"].call(e,e&&e.marker,{hash:{},inverse:S.noop,fn:S.program(12,d,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,(a=e&&e.icons,null==a||a===!1?a:a.searchIcon),{hash:{},inverse:S.noop,fn:S.program(14,h,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,(a=e&&e.icons,null==a||a===!1?a:a.clearIcon),{hash:{},inverse:S.noop,fn:S.program(16,p,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,e&&e.arrowIcon,{hash:{},inverse:S.noop,fn:S.program(18,f,t),data:t}),(a||0===a)&&(r+=a),r+='</div><div class="selectBox2__dropdownWrapper"><div class="selectBox2__scroller"><div class="selectBox2__dropdown"></div>'+I((i=n.Track||e&&e.Track,o={hash:{"class":e&&e.trackClass},data:t},i?i.call(e,o):T.call(e,"Track",o)))+"</div></div>"}function s(e,t){return"\n                disabled\n            "}function l(e,t){var a,i,o="";return o+='\n                placeholder="',(i=n.placeholder)?a=i.call(e,{hash:{},data:t}):(i=e&&e.placeholder,a=typeof i===L?i.call(e,{hash:{},data:t}):i),o+=I(a)+'"\n            '}function c(e,t){var a,i;return(i=n.tabIndex)?a=i.call(e,{hash:{},data:t}):(i=e&&e.tabIndex,a=typeof i===L?i.call(e,{hash:{},data:t}):i),I(a)}function u(e,t){return"-1"}function d(e,t){return'<div class="selectBox2__markerColor"></div>'}function h(e,t){var a,i,o,r="";return r+='<div class="selectBox2__searchControl">'+I((i=n.Icon||e&&e.Icon,o={hash:{"class":"selectBox2__searchIcon"},data:t},i?i.call(e,(a=e&&e.icons,null==a||a===!1?a:a.searchIcon),o):T.call(e,"Icon",(a=e&&e.icons,null==a||a===!1?a:a.searchIcon),o)))+"</div>"}function p(e,t){var a,i,o,r="";return r+='<div class="selectBox2__clear">'+I((i=n.Icon||e&&e.Icon,o={hash:{"class":"selectBox2__clearIcon"},data:t},i?i.call(e,(a=e&&e.icons,null==a||a===!1?a:a.clearIcon),o):T.call(e,"Icon",(a=e&&e.icons,null==a||a===!1?a:a.clearIcon),o)))+"</div>"}function f(e,t){var a,i,o="";return o+='<div class="selectBox2__arrow">'+I((a=n.Icon||e&&e.Icon,i={hash:{"class":"selectBox2__arrowIcon"},data:t},a?a.call(e,e&&e.arrowIcon,i):T.call(e,"Icon",e&&e.arrowIcon,i)))+"</div>"}function m(e,t){var a,i="";return i+="\n        ",a=n["if"].call(e,e,{hash:{},inverse:S.noop,fn:S.program(21,g,t),data:t}),(a||0===a)&&(i+=a),i+="\n    "}function g(e,t){var n,a="";return a+=" "+I((n=null==t||t===!1?t:t.key,typeof n===L?n.apply(e):n))}function _(e,t){var a,i,o="";return o+=' name="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===L?i.call(e,{hash:{},data:t}):i),o+=I(a)+'"'}function v(e,t){var a,i,o="";return o+=' tabindex="',(i=n.tabIndex)?a=i.call(e,{hash:{},data:t}):(i=e&&e.tabIndex,a=typeof i===L?i.call(e,{hash:{},data:t}):i),o+=I(a)+'"'}function y(e,t){return" selected"}function b(e,t){var a,i="";return a=n["if"].call(e,e&&e.items,{hash:{},inverse:S.program(31,w,t),fn:S.program(30,k,t),data:t}),(a||0===a)&&(i+=a),i}function k(e,t){var a,i,o="";return o+='<optgroup label="',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===L?i.call(e,{hash:{},data:t}):i),o+=I(a)+'">',a=n.each.call(e,e&&e.items,{hash:{},inverse:S.noop,fn:S.program(31,w,t),data:t}),(a||0===a)&&(o+=a),o+="</optgroup>"}function w(e,t){var a,i,o="";return o+='<option value="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===L?i.call(e,{hash:{},data:t}):i),o+=I(a)+'" ',a=n["if"].call(e,e&&e.selected,{hash:{},inverse:S.noop,fn:S.program(27,y,t),data:t}),(a||0===a)&&(o+=a),o+=">",(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===L?i.call(e,{hash:{},data:t}):i),o+=I(a)+"</option>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var x,C="",L="function",I=this.escapeExpression,T=n.helperMissing,S=this;return x=n["if"].call(t,t&&t.label,{hash:{},inverse:S.noop,fn:S.program(1,o,i),data:i}),(x||0===x)&&(C+=x),x=n["if"].call(t,t&&t.isDesktop,{hash:{},inverse:S.noop,fn:S.program(3,r,i),data:i}),(x||0===x)&&(C+=x),C+="<select\n    ",x=n.each.call(t,t&&t.attributes,{hash:{},inverse:S.noop,fn:S.program(20,m,i),data:i}),(x||0===x)&&(C+=x),C+="\n\n    ",x=n["if"].call(t,t&&t.name,{hash:{},inverse:S.noop,fn:S.program(23,_,i),data:i}),(x||0===x)&&(C+=x),C+="\n    ",x=n["if"].call(t,t&&t.tabindexPresent,{hash:{},inverse:S.noop,fn:S.program(25,v,i),data:i}),(x||0===x)&&(C+=x),C+='\n\n    class="selectBox2__original"><option value="'+I((x=t&&t.defaults,x=null==x||x===!1?x:x.value,typeof x===L?x.apply(t):x))+'" ',x=n["if"].call(t,t&&t.selected,{hash:{},inverse:S.noop,fn:S.program(27,y,i),data:i}),(x||0===x)&&(C+=x),C+=">"+I((x=t&&t.defaults,x=null==x||x===!1?x:x.label,typeof x===L?x.apply(t):x))+"</option>",x=n.each.call(t,t&&t.items,{hash:{},inverse:S.noop,fn:S.program(29,b,i),data:i}),(x||0===x)&&(C+=x),C+="</select>"},this.jst_modules=this.jst_modules||{},this.jst_modules.share=this.jst_modules.share||{},this.jst_modules.share.share=function(e,t,n,a,i){function o(e,t){return'<span class="share__popupSocialItem share__popupSocialVkontakte"></span>'}function r(e,t){return'<span class="share__popupSocialItem share__popupSocialFacebook"></span>'}function s(e,t){return'<span class="share__popupSocialItem share__popupSocialTwitter"></span>'}function l(e,t){return'<span class="share__popupSocialItem share__popupSocialOdnoklassniki"></span>'}function c(e,t){var a,i,o,r="";return r+='<div class="share__popupWidget">',i=n.Link||e&&e.Link,o={hash:{href:e&&e.widgetLink,target:"_blank","class":"_scheme_dark share__popupWidgetLink"},inverse:_.noop,fn:_.program(10,u,t),data:t},a=i?i.call(e,o):m.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function u(e,t){var a,i,o="";return o+=g((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Установите карту и справочник на свой сайт",i):m.call(e,"_t","Установите карту и справочник на свой сайт",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h,p,f="",m=n.helperMissing,g=this.escapeExpression,_=this;return f+='<div class="share__overlay"></div><div class="share__popup"><div class="share__popupClose"></div><header class="share__popupHeader">'+g((h=n._t||t&&t._t,p={hash:{},data:i},h?h.call(t,"Поделиться ссылкой",p):m.call(t,"_t","Поделиться ссылкой",p)))+'</header><div class="share__popupSocial">',d=n["if"].call(t,t&&t.hasVkontakte,{hash:{},inverse:_.noop,fn:_.program(1,o,i),data:i}),(d||0===d)&&(f+=d),d=n["if"].call(t,t&&t.hasFacebook,{hash:{},inverse:_.noop,fn:_.program(3,r,i),data:i}),(d||0===d)&&(f+=d),d=n["if"].call(t,t&&t.hasTwitter,{hash:{},inverse:_.noop,fn:_.program(5,s,i),data:i}),(d||0===d)&&(f+=d),d=n["if"].call(t,t&&t.hasOdnoklassniki,{hash:{},inverse:_.noop,fn:_.program(7,l,i),data:i}),(d||0===d)&&(f+=d),f+='</div><div class="share__popupUrl"><input type="text" class="share__popupUrlInput" value="'+g((h=n._t||t&&t._t,p={hash:{},data:i},h?h.call(t,"Загружаю...",p):m.call(t,"_t","Загружаю...",p)))+'" /></div>',d=n["if"].call(t,t&&t.allowWidget,{hash:{},inverse:_.noop,fn:_.program(9,c,i),data:i}),(d||0===d)&&(f+=d),f+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.stopCard=this.jst_modules.stopCard||{},this.jst_modules.stopCard.stopCard=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<h1 class="stopCard__headerHeading _type_',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===v?i.call(e,{hash:{},data:t}):i),r+=y(a)+'">'+y((i=n.Link||e&&e.Link,o={hash:{"class":"_undashed _large stopCard__headerHeadingTitle"},data:t},i?i.call(e,e&&e.name,o):b.call(e,"Link",e&&e.name,o)))+"</h1>"}function r(e,t){var a,i,o="";return o+='<div class="stopCard__drilldown">',(i=n.drilldown)?a=i.call(e,{hash:{},data:t}):(i=e&&e.drilldown,a=typeof i===v?i.call(e,{hash:{},data:t}):i),o+=y(a)+"</div>"}function s(e,t){var n="";return n+='<div class="stopCard__actions">'+y(typeof e===v?e.apply(e):e)+"</div>"}function l(e,t){var a,i="";return i+='<div class="stopCard__list">',a=n.each.call(e,e&&e.routesModules,{hash:{},inverse:k.noop,fn:k.program(8,c,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function c(e,t){var a,i,o="";return o+=y((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):b.call(e,"module",e,i)))}function u(e,t){var a,i,o="";return o+='<div class="stopCard__noRoutesMsg">'+y((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Мы пока не узнали, какие маршруты проходят через эту остановку, но скоро обязательно это исправим.",i):b.call(e,"_t","Мы пока не узнали, какие маршруты проходят через эту остановку, но скоро обязательно это исправим.",i)))+"</div>"}function d(e,t){var a,i,o,r="";return r+='<div class="stopCard__footerItem stopCard__footerAdv">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.advLink,null==a||a===!1?a:a.href),target:"_blank","class":"_undashed stopCard__footerItemLink stopCard__footerAdvLink"},inverse:k.noop,fn:k.program(13,h,t),data:t},a=i?i.call(e,o):b.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function h(e,t){var a,i,o="";return o+=y((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Реклама в 2ГИС",i):b.call(e,"_t","Реклама в 2ГИС",i)))}function p(e,t){var a,i,o="";return o+=y((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Ошибка в данных",i):b.call(e,"_t","Ошибка в данных",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var f,m,g,_="",v="function",y=this.escapeExpression,b=n.helperMissing,k=this;return _+='<div class="stopCard__scroller"><div class="stopCard__scrollerIn"><div class="stopCard__content"><div class="stopCard__headerWrapper">',m=n.Fix||t&&t.Fix,g={hash:{"class":"stopCard__header _innerHeader _type_stop",tag:"header"},inverse:k.noop,fn:k.program(1,o,i),data:i},f=m?m.call(t,g):b.call(t,"Fix",g),(f||0===f)&&(_+=f),_+='</div><div class="stopCard__type">',(m=n.typeName)?f=m.call(t,{hash:{},data:i}):(m=t&&t.typeName,f=typeof m===v?m.call(t,{hash:{},data:i}):m),_+=y(f),f=n["if"].call(t,t&&t.drilldown,{hash:{},inverse:k.noop,fn:k.program(3,r,i),data:i}),(f||0===f)&&(_+=f),_+="</div>",m=n.module||t&&t.module,g={hash:{},inverse:k.noop,fn:k.program(5,s,i),data:i},f=m?m.call(t,"cardActions",g):b.call(t,"module","cardActions",g),(f||0===f)&&(_+=f),_+=y((m=n.module||t&&t.module,g={hash:{},data:i},m?m.call(t,"promoMobile",g):b.call(t,"module","promoMobile",g))),f=n["if"].call(t,t&&t.routesModules,{hash:{},inverse:k.program(10,u,i),fn:k.program(7,l,i),data:i}),(f||0===f)&&(_+=f),_+='<div class="stopCard__googletag"></div></div><footer class="stopCard__footer"><div class="stopCard__footerContent">',f=n["if"].call(t,t&&t.advLink,{hash:{},inverse:k.noop,fn:k.program(12,d,i),data:i}),(f||0===f)&&(_+=f),_+=' <div class="stopCard__footerItem stopCard__footerBugReport">',m=n.Link||t&&t.Link,g={hash:{"class":"_undashed stopCard__footerItemLink stopCard__footerBugReportLink"},inverse:k.noop,fn:k.program(15,p,i),data:i},f=m?m.call(t,g):b.call(t,"Link",g),(f||0===f)&&(_+=f),_+="</div></div></footer></div>",(m=n.Track)?f=m.call(t,{hash:{},data:i}):(m=t&&t.Track,f=typeof m===v?m.call(t,{hash:{},data:i}):m),_+=y(f)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.suggest=this.jst_modules.suggest||{},this.jst_modules.suggest.suggest=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=' style="color: ',(i=n.color)?a=i.call(e,{hash:{},data:t}):(i=e&&e.color,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+';"'}function r(e,t){var a;return a=n.unless.call(e,e&&e.query,{hash:{},inverse:p.noop,fn:p.program(4,s,t),data:t}),a||0===a?a:""}function s(e,t){return"autofocus"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u="",d="function",h=this.escapeExpression,p=this;return u+='<div class="suggest__wrapper"',l=n["if"].call(t,t&&t.color,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(l||0===l)&&(u+=l),u+='><input type="text" class="suggest__input" name="search[query]" value="',(c=n.query)?l=c.call(t,{hash:{},data:i}):(c=t&&t.query,l=typeof c===d?c.call(t,{hash:{},data:i}):c),u+=h(l)+'" maxlength="500" autocomplete="off" ',l=n["if"].call(t,t&&t.autofocus,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(l||0===l)&&(u+=l),u+='><div class="suggest__clone"><span class="suggest__cloneMain"></span><span class="suggest__cloneHint"></span></div><span class="suggest__clearInputLink" title=""></span><div class="suggest__suggestsWrapper"><ul class="suggest__suggests"></ul></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.suggestRs=this.jst_modules.suggestRs||{},this.jst_modules.suggestRs.suggestRs=function(e,t,n,a,i){function o(e,t){var a;return a=n.unless.call(e,e&&e.query,{hash:{},inverse:u.noop,fn:u.program(2,r,t),data:t}),a||0===a?a:""}function r(e,t){return"autofocus"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c="",u=this,d="function",h=this.escapeExpression;return c+='<div class="suggest__wrapper"><input type="text" class="suggest__input" value="',(l=n.query)?s=l.call(t,{hash:{},data:i}):(l=t&&t.query,s=typeof l===d?l.call(t,{hash:{},data:i}):l),c+=h(s)+'" placeholder="',(l=n.placeholder)?s=l.call(t,{hash:{},data:i}):(l=t&&t.placeholder,s=typeof l===d?l.call(t,{hash:{},data:i}):l),c+=h(s)+'" maxlength="500" autocomplete="off" ',s=n["if"].call(t,t&&t.autofocus,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(s||0===s)&&(c+=s),c+='><div class="suggest__clone"><span class="suggest__cloneMain"></span><span class="suggest__cloneHint"></span></div><span class="suggest__clearInputLink" title=""></span><div class="suggest__suggestsWrapper"><ul class="suggest__suggests"></ul></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.summer=this.jst_modules.summer||{},this.jst_modules.summer.summer=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe><form class="summer__form" action="https://docs.google.com/forms/d/1_ebsw7hZBOpQ37MturyiRa3aL-Pp6P8qHDnMSCx9Wp4/formResponse" target="hidden_iframe" method="POST" id="mG61Hd"><div class="summer__formInputs"><input type="email" placeholder="'+d((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Электронная почта",o):u.call(e,"_gg","Электронная почта",o)))+'" class="summer__formInput" jsname="YPqjbf" autocomplete="off" tabindex="0" aria-label="Электронная почта" aria-describedby="i.desc.1238408941 i.err.1238408941" name="entry.1169083752" value="" required="" dir="auto" data-initial-dir="auto" data-initial-value=""><input type="hidden" name="entry.1169083752" jsname="L9xHkb"><input type="hidden" name="fvv" value="1"><input type="hidden" name="draftResponse" value="[,,&quot;2159610506485746232&quot;]"><input type="hidden" name="pageHistory" value="0"><input type="hidden" name="fbzx" value="2159610506485746232"><input type="text" jsname="YPqjbf" autocomplete="off" tabindex="0" aria-label="Новый вопрос" aria-describedby="i.desc.1817479277 i.err.1817479277" value="',(i=n.region)?a=i.call(e,{hash:{},data:t}):(i=e&&e.region,a=typeof i===h?i.call(e,{hash:{},data:t}):i),r+=d(a)+'" dir="auto" data-initial-dir="auto" data-initial-value="" name="entry.196194943" style="display: none;"><input type="hidden" name="entry.1817479277" jsname="L9xHkb"><button type="submit" class="summer__formSubmit _disabled">'+d((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Подписаться",o):u.call(e,"_gg","Подписаться",o)))+'</button></div></form><div class="summer__subscribe"><div class="summer__subscribeText">'+d((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Каждый месяц добавляем новые идеи. Подписывайтесь!",o):u.call(e,"_gg","Каждый месяц добавляем новые идеи. Подписывайтесь!",o)))+'</div> <button class="summer__subscribeButton" alt="'+d((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Подписаться",o):u.call(e,"_gg","Подписаться",o)))+'">'+d((i=n.Icon||e&&e.Icon,o={hash:{"class":"summer__subscribeButtonIcon"},data:t},i?i.call(e,"summer_mail",o):u.call(e,"Icon","summer_mail",o)))+'</button></div><div class="summer__socials"><button class="summer__socialsItem _social_vkontakte">'+d((i=n.Icon||e&&e.Icon,o={hash:{"class":"summer__socialsItemIcon"},data:t},i?i.call(e,"victory_shareVk",o):u.call(e,"Icon","victory_shareVk",o)))+'</button><button class="summer__socialsItem _social_twitter">'+d((i=n.Icon||e&&e.Icon,o={hash:{"class":"summer__socialsItemIcon"},data:t},i?i.call(e,"victory_shareTw",o):u.call(e,"Icon","victory_shareTw",o)))+'</button><button class="summer__socialsItem _social_facebook">'+d((i=n.Icon||e&&e.Icon,o={hash:{"class":"summer__socialsItemIcon"},data:t},i?i.call(e,"victory_shareFb",o):u.call(e,"Icon","victory_shareFb",o)))+'</button><button class="summer__socialsItem _social_odnoklassniki">'+d((i=n.Icon||e&&e.Icon,o={hash:{"class":"summer__socialsItemIcon"},data:t},i?i.call(e,"victory_shareOk",o):u.call(e,"Icon","victory_shareOk",o)))+"</button></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h="function",p=this;return c+=d((s=n.Preloader||t&&t.Preloader,l={hash:{"class":"summer__preloader _scheme_lighten"},data:i},s?s.call(t,l):u.call(t,"Preloader",l)))+'<div class="summer__scroller"><div class="summer__headerWrap">'+d((s=n.p||t&&t.p,l={hash:{},data:i},s?s.call(t,"header",l):u.call(t,"p","header",l)))+"</div>"+d((s=n.module||t&&t.module,l={hash:{},data:i},s?s.call(t,t&&t.collectionsListModule,l):u.call(t,"module",t&&t.collectionsListModule,l)))+'<iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe><div class="summer__controls">',s=n.Fix||t&&t.Fix,l={hash:{"class":"summer__controlsFix",tag:"div"},inverse:p.noop,fn:p.program(1,o,i),data:i},r=s?s.call(t,l):u.call(t,"Fix",l),(r||0===r)&&(c+=r),c+='</div><footer class="summer__footer">'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"© 2ГИС",l):u.call(t,"_gg","© 2ГИС",l)))+"</footer>",(s=n.Track)?r=s.call(t,{hash:{},data:i}):(s=t&&t.Track,r=typeof s===h?s.call(t,{hash:{},data:i}):s),c+=d(r)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.summerCollections=this.jst_modules.summerCollections||{},this.jst_modules.summerCollections.summerCollections=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<li class="summerCollections__item">'+c((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):l.call(e,"module",e,i)))+"</li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l=n.helperMissing,c=this.escapeExpression,u=this;return r=n.each.call(t,t&&t.collectionsItem,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},this.jst_modules=this.jst_modules||{},this.jst_modules.summerMenu=this.jst_modules.summerMenu||{},this.jst_modules.summerMenu.summerMenu=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<li class="summerMenu__item',a=n["if"].call(e,e&&e.isCurrent,{hash:{},inverse:c.noop,fn:c.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+='"  data-rubric="'+d((a=e&&e.name,typeof a===u?a.apply(e):a))+'">'+d((a=e&&e.name,typeof a===u?a.apply(e):a))+"</li>"}function r(e,t){return" _current"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c=this,u="function",d=this.escapeExpression;return s=n.each.call(t,t&&t.items,{hash:{},inverse:c.noop,fn:c.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l},this.jst_modules=this.jst_modules||{},this.jst_modules.tools=this.jst_modules.tools||{},this.jst_modules.tools.tools=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n["if"].call(e,e&&e.userName,{hash:{},inverse:v.program(4,s,t),fn:v.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var a,i,o="";return o+='<div class="tools__btn tools__user" title="',(i=n.userName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.userName,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=g(a)+'">',(i=n.userName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.userName,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=g(a)+"</div>"}function s(e,t){var a,i,o="";return o+='<div class="tools__btn tools__auth" title="'+g((a=n._pt||e&&e._pt,i={hash:{},data:t},a?a.call(e,"Аккаунт","Войти",i):_.call(e,"_pt","Аккаунт","Войти",i)))+'">'+g((a=n._pt||e&&e._pt,i={hash:{},data:t},a?a.call(e,"Аккаунт","Войти",i):_.call(e,"_pt","Аккаунт","Войти",i)))+"</div>"}function l(e,t){var a,i,o="";return o+='<div class="tools__btn tools__favorite" title="'+g((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Избранное",i):_.call(e,"_t","Избранное",i)))+'">'+g((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Избранное",i):_.call(e,"_t","Избранное",i)))+"</div>"}function c(e,t){var a,i,o="";return o+='<div class="tools__btn tools__phone" title="'+g((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Звонки",i):_.call(e,"_t","Звонки",i)))+'">'+g((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Звонки",i):_.call(e,"_t","Звонки",i)))+"</div>"}function u(e,t){var a,i,o,r="";return r+='<a href="',(i=n.businessLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.businessLink,a=typeof i===m?i.call(e,{hash:{},data:t}):i),r+=g(a)+'" target="_blank" class="tools__btn tools__ads" title="'+g((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Владельцам компаний",o):_.call(e,"_gg","Владельцам компаний",o)))+'">'+g((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Для бизнеса",o):_.call(e,"_gg","Для бизнеса",o)))+"</a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h,p,f="",m="function",g=this.escapeExpression,_=n.helperMissing,v=this;return f+='<div class="tools__group"><div class="tools__btn tools__city" title="',(h=n.city)?d=h.call(t,{hash:{},data:i}):(h=t&&t.city,d=typeof h===m?h.call(t,{hash:{},data:i}):h),f+=g(d)+'">'+g((h=n.Link||t&&t.Link,p={hash:{href:t&&t.cityLink,"class":"_scheme_none"},data:i},h?h.call(t,t&&t.city,p):_.call(t,"Link",t&&t.city,p)))+"</div>",d=n["if"].call(t,t&&t.loginButtonVisible,{hash:{},inverse:v.noop,fn:v.program(1,o,i),data:i}),(d||0===d)&&(f+=d),d=n["if"].call(t,t&&t.favorite,{hash:{},inverse:v.noop,fn:v.program(6,l,i),data:i}),(d||0===d)&&(f+=d),d=n["if"].call(t,t&&t.phone,{hash:{},inverse:v.noop,fn:v.program(8,c,i),data:i}),(d||0===d)&&(f+=d),f+='</div><div class="tools__group"><a href="',(h=n.regionInfoLink)?d=h.call(t,{hash:{},data:i}):(h=t&&t.regionInfoLink,d=typeof h===m?h.call(t,{hash:{},data:i}):h),f+=g(d)+'" target="_blank" class="tools__btn tools__about" title="'+g((h=n._t||t&&t._t,p={hash:{},data:i},h?h.call(t,"Сайт 2ГИС",p):_.call(t,"_t","Сайт 2ГИС",p)))+'">'+g((h=n._t||t&&t._t,p={hash:{},data:i},h?h.call(t,"Сайт 2ГИС",p):_.call(t,"_t","Сайт 2ГИС",p)))+'</a><a href="',(h=n.regionAdvLink)?d=h.call(t,{hash:{},data:i}):(h=t&&t.regionAdvLink,d=typeof h===m?h.call(t,{hash:{},data:i}):h),f+=g(d)+'" target="_blank" class="tools__btn tools__ads" title="'+g((h=n._t||t&&t._t,p={hash:{},data:i},h?h.call(t,"Разместить рекламу",p):_.call(t,"_t","Разместить рекламу",p)))+'">',(h=n.regionAdvLinkText)?d=h.call(t,{hash:{},data:i}):(h=t&&t.regionAdvLinkText,d=typeof h===m?h.call(t,{hash:{},data:i}):h),f+=g(d)+"</a>",d=n["if"].call(t,t&&t.businessLinkEnabled,{hash:{},inverse:v.noop,fn:v.program(10,u,i),data:i}),(d||0===d)&&(f+=d),f+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.tooltip25=this.jst_modules.tooltip25||{},this.jst_modules.tooltip25.tooltip25=function(e,t,n,a,i){function o(e,t){return"_wide"}function r(e,t){return"_multiple"}function s(e,t){var a,i,o="";return o+='<div class="tooltip25__title">',a=n["if"].call(e,e&&e.adv,{hash:{},inverse:b.noop,fn:b.program(6,l,t),data:t}),(a||0===a)&&(o+=a),(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===k?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function l(e,t){return'<div class="tooltip25__titleIcon"></div>'}function c(e,t){var a,i,o="";return o+='<div class="tooltip25__address">',(i=n.address)?a=i.call(e,{hash:{},data:t}):(i=e&&e.address,a=typeof i===k?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function u(e,t){var a,i,o="";return o+='<div class="tooltip25__description">',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===k?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function d(e,t){var a,i,o,r="";return i=n.Rating||e&&e.Rating,o={hash:{style:"minicard","class":"tooltip25__rating"},inverse:b.noop,fn:b.program(13,h,t),data:t},a=i?i.call(e,(a=e&&e.rating,null==a||a===!1?a:a.value),o):w.call(e,"Rating",(a=e&&e.rating,null==a||a===!1?a:a.value),o),(a||0===a)&&(r+=a),r}function h(e,t){var n="";return n}function p(e,t){var a,i,o,r="";return r+='<div class="tooltip25__schedule">'+x((i=n.Icon||e&&e.Icon,o={hash:{"class":"tooltip25__scheduleIcon"},data:t},i?i.call(e,(a=e&&e.schedule,null==a||a===!1?a:a.scheduleIcon),o):w.call(e,"Icon",(a=e&&e.schedule,null==a||a===!1?a:a.scheduleIcon),o)))+'<div class="tooltip25__scheduleStatus">'+x((a=e&&e.schedule,a=null==a||a===!1?a:a.status,typeof a===k?a.apply(e):a))+"</div></div>"}function f(e,t){var a,i="";return i+='<ul class="tooltip25__attrs">',a=n.each.call(e,e&&e.attrs,{hash:{},inverse:b.noop,fn:b.program(18,m,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function m(e,t){var n="";return n+='<li class="tooltip25__attrsItem">'+x(typeof e===k?e.apply(e):e)+"</li> "}function g(e,t){var a,i,o="";return o+='<div class="tooltip25__moreFirms">',(i=n.moreFirms)?a=i.call(e,{hash:{},data:t}):(i=e&&e.moreFirms,a=typeof i===k?i.call(e,{hash:{},data:t}):i),o+=x(a)+"</div>"}function _(e,t){var a,i,o="";return o+='<aside class="tooltip25__aside"><div class="tooltip25__photosPreview" style="background-image: url(\'',(i=n.photosPreview)?a=i.call(e,{hash:{},data:t}):(i=e&&e.photosPreview,a=typeof i===k?i.call(e,{hash:{},data:t}):i),o+=x(a)+"')\"></div></aside>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var v,y="",b=this,k="function",w=n.helperMissing,x=this.escapeExpression;return y+='<div class="tooltip25__in ',v=n["if"].call(t,t&&t.photosPreview,{hash:{},inverse:b.noop,fn:b.program(1,o,i),data:i}),(v||0===v)&&(y+=v),y+=" ",v=n["if"].call(t,t&&t.isMultiple,{hash:{},inverse:b.noop,fn:b.program(3,r,i),data:i}),(v||0===v)&&(y+=v),y+='"><div class="tooltip25__content">',v=n["if"].call(t,t&&t.title,{hash:{},inverse:b.noop,fn:b.program(5,s,i),data:i}),(v||0===v)&&(y+=v),v=n["if"].call(t,t&&t.address,{hash:{},inverse:b.noop,fn:b.program(8,c,i),data:i}),(v||0===v)&&(y+=v),v=n["if"].call(t,t&&t.description,{hash:{},inverse:b.noop,fn:b.program(10,u,i),data:i}),(v||0===v)&&(y+=v),v=n["if"].call(t,t&&t.rating,{hash:{},inverse:b.noop,fn:b.program(12,d,i),data:i}),(v||0===v)&&(y+=v),v=n["if"].call(t,t&&t.schedule,{hash:{},inverse:b.noop,fn:b.program(15,p,i),data:i}),(v||0===v)&&(y+=v),v=n["if"].call(t,t&&t.attrs,{hash:{},inverse:b.noop,fn:b.program(17,f,i),data:i}),(v||0===v)&&(y+=v),v=n["if"].call(t,t&&t.moreFirms,{hash:{},inverse:b.noop,fn:b.program(20,g,i),data:i}),(v||0===v)&&(y+=v),y+="</div>",v=n["if"].call(t,t&&t.photosPreview,{hash:{},inverse:b.noop,fn:b.program(22,_,i),data:i}),(v||0===v)&&(y+=v),y+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.tooltipPromo=this.jst_modules.tooltipPromo||{},this.jst_modules.tooltipPromo.tooltipPromo=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return i=n.Link||e&&e.Link,o={hash:{"class":"_scheme_dark tooltipPromo__more"},inverse:h.noop,fn:h.program(2,r,t),data:t},a=i?i.call(e,o):p.call(e,"Link",o),(a||0===a)&&(s+=a),s}function r(e,t){var a,i,o="";return(i=n.more)?a=i.call(e,{hash:{},data:t}):(i=e&&e.more,a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c="",u="function",d=this.escapeExpression,h=this,p=n.helperMissing;return c+='<p class="tooltipPromo__text">',(l=n.text)?s=l.call(t,{hash:{},data:i}):(l=t&&t.text,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+"</p>",s=n["if"].call(t,t&&t.more,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(s||0===s)&&(c+=s),c+='<div class="tooltipPromo__close"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.updateApp=this.jst_modules.updateApp||{},this.jst_modules.updateApp.updateApp=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<div class="updateApp__overlay"></div><div class="updateApp__popup"><div class="updateApp__popupClose"></div><div class="updateApp__popupTitle">',r=n._t||t&&t._t,s={hash:{},data:i},o=r?r.call(t,"Доступна&nbsp;новая&nbsp;версия&nbsp;2ГИС",s):c.call(t,"_t","Доступна&nbsp;новая&nbsp;версия&nbsp;2ГИС",s),(o||0===o)&&(l+=o),l+='</div><div class="updateApp__popupButton">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Установить",s):c.call(t,"_t","Установить",s)))+'</div><div class="updateApp__popupHint">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Бета-версия пока не умеет обновляться самостоятельно, но мы скоро её этому научим",s):c.call(t,"_t","Бета-версия пока не умеет обновляться самостоятельно, но мы скоро её этому научим",s)))+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.victory=this.jst_modules.victory||{},this.jst_modules.victory.victory=function(e,t,n,a,i){function o(e,t){var a,i,o,l="";return l+='<section class="victory__content _type_parade"><div class="victory__event"><div class="victory__eventWrap">'+g((i=n.Icon||e&&e.Icon,o={hash:{"class":"victory__eventIcon"},data:t},i?i.call(e,"victory_parade",o):m.call(e,"Icon","victory_parade",o)))+'<div class="victory__eventTime">',(i=n.parade)?a=i.call(e,{hash:{},data:t}):(i=e&&e.parade,a=typeof i===_?i.call(e,{
hash:{},data:t}):i),l+=g(a)+'</div><div class="victory__eventName">'+g((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"парад",o):m.call(e,"_gg","парад",o)))+'</div></div></div><div class="victory__contentText"><p class="victory__contentPrgph">',i=n._gg||e&&e._gg,o={hash:{},data:t},a=i?i.call(e,"Поздравляем с&nbsp;праздником! Приезжайте смотреть парад и&nbsp;отмечать годовщину Победы на&nbsp;улицах города.",o):m.call(e,"_gg","Поздравляем с&nbsp;праздником! Приезжайте смотреть парад и&nbsp;отмечать годовщину Победы на&nbsp;улицах города.",o),(a||0===a)&&(l+=a),l+="</p>",a=n["if"].call(e,e&&e.hasTrafficData,{hash:{},inverse:v.program(4,s,t),fn:v.program(2,r,t),data:t}),(a||0===a)&&(l+=a),l+="</div></section>"}function r(e,t){var a,i,o,r="";return r+='<p class="victory__contentPrgph">',i=n._hgg||e&&e._hgg,o={hash:{link__class:"victory__contentLink _undashed","link__data-name":"Перекрытые улицы"},data:t},a=i?i.call(e,"Не&nbsp;забывайте о&nbsp;дорогах&nbsp;&mdash; 9&nbsp;мая их&nbsp;%{Link перекроют}. Если вы&nbsp;за&nbsp;рулём, ищите проезд в&nbsp;2ГИС&nbsp;&mdash; мы&nbsp;учтём перекрытия и&nbsp;поможем добраться до&nbsp;места.",o):m.call(e,"_hgg","Не&nbsp;забывайте о&nbsp;дорогах&nbsp;&mdash; 9&nbsp;мая их&nbsp;%{Link перекроют}. Если вы&nbsp;за&nbsp;рулём, ищите проезд в&nbsp;2ГИС&nbsp;&mdash; мы&nbsp;учтём перекрытия и&nbsp;поможем добраться до&nbsp;места.",o),(a||0===a)&&(r+=a),r+="</p>"}function s(e,t){var a,i,o,r="";return r+='<p class="victory__contentPrgph">',i=n._hgg||e&&e._hgg,o={hash:{link__class:"victory__contentLink _undashed","link__data-name":"Перекрытые улицы"},data:t},a=i?i.call(e,"Не&nbsp;забывайте о&nbsp;дорогах&nbsp;&mdash; 9&nbsp;мая их&nbsp;%{Link перекроют}. Если вы&nbsp;за&nbsp;рулём, выбирайте дороги с&nbsp;наименьшей транспортной загрузкой.",o):m.call(e,"_hgg","Не&nbsp;забывайте о&nbsp;дорогах&nbsp;&mdash; 9&nbsp;мая их&nbsp;%{Link перекроют}. Если вы&nbsp;за&nbsp;рулём, выбирайте дороги с&nbsp;наименьшей транспортной загрузкой.",o),(a||0===a)&&(r+=a),r+="</p>"}function l(e,t){var a,i,o,r="";return r+='<section class="victory__content _type_firework"><div class="victory__event"><div class="victory__eventWrap">'+g((i=n.Icon||e&&e.Icon,o={hash:{"class":"victory__eventIcon"},data:t},i?i.call(e,"victory_firework",o):m.call(e,"Icon","victory_firework",o)))+'<div class="victory__eventTime">',(i=n.firework)?a=i.call(e,{hash:{},data:t}):(i=e&&e.firework,a=typeof i===_?i.call(e,{hash:{},data:t}):i),r+=g(a)+'</div><div class="victory__eventName">'+g((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"салют",o):m.call(e,"_gg","салют",o)))+'</div></div></div><div class="victory__contentText">',a=n["if"].call(e,e&&e.isMagnitogorsk,{hash:{},inverse:v.program(9,u,t),fn:v.program(7,c,t),data:t}),(a||0===a)&&(r+=a),r+="</div></section>"}function c(e,t){var a,i,o,r="";return r+='<p class="victory__contentPrgph">',i=n._hgg||e&&e._hgg,o={hash:{link__class:"victory__contentLink _undashed","link__data-name":"Парад и салют"},data:t},a=i?i.call(e,"Вечером пройдёт акция &laquo;Свеча памяти&raquo;. Узнайте, %{Link в&nbsp;каком месте} и&nbsp;присоединяйтесь.",o):m.call(e,"_hgg","Вечером пройдёт акция &laquo;Свеча памяти&raquo;. Узнайте, %{Link в&nbsp;каком месте} и&nbsp;присоединяйтесь.",o),(a||0===a)&&(r+=a),r+="</p>"}function u(e,t){var a,i,o,r="";return r+='<p class="victory__contentPrgph">',i=n._hgg||e&&e._hgg,o={hash:{link__class:"victory__contentLink _undashed","link__data-name":"Парад и салют"},data:t},a=i?i.call(e,"Вечером&nbsp;&mdash; традиционный салют. Узнайте, %{Link откуда запускают} в&nbsp;этом году, и&nbsp;займите лучшие места.",o):m.call(e,"_hgg","Вечером&nbsp;&mdash; традиционный салют. Узнайте, %{Link откуда запускают} в&nbsp;этом году, и&nbsp;займите лучшие места.",o),(a||0===a)&&(r+=a),r+="</p>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h,p,f="",m=n.helperMissing,g=this.escapeExpression,_="function",v=this;return f+='<div class="victory__scroller"><header class="victory__header">'+g((h=n.Icon||t&&t.Icon,p={hash:{"class":"victory__headerImg"},data:i},h?h.call(t,t&&t.icon,p):m.call(t,"Icon",t&&t.icon,p)))+'<h1 class="victory__headerTitle">',(h=n.title)?d=h.call(t,{hash:{},data:i}):(h=t&&t.title,d=typeof h===_?h.call(t,{hash:{},data:i}):h),(d||0===d)&&(f+=d),f+='</h1><div class="victory__headerSocials"><button class="victory__headerSocialsItem _social_facebook">'+g((h=n.Icon||t&&t.Icon,p={hash:{"class":"victory__headerSocialsItemIcon"},data:i},h?h.call(t,"victory_shareFb",p):m.call(t,"Icon","victory_shareFb",p)))+'</button><button class="victory__headerSocialsItem _social_twitter">'+g((h=n.Icon||t&&t.Icon,p={hash:{"class":"victory__headerSocialsItemIcon"},data:i},h?h.call(t,"victory_shareTw",p):m.call(t,"Icon","victory_shareTw",p)))+'</button><button class="victory__headerSocialsItem _social_vkontakte">'+g((h=n.Icon||t&&t.Icon,p={hash:{"class":"victory__headerSocialsItemIcon"},data:i},h?h.call(t,"victory_shareVk",p):m.call(t,"Icon","victory_shareVk",p)))+"</button></div></header>",d=n["if"].call(t,t&&t.parade,{hash:{},inverse:v.noop,fn:v.program(1,o,i),data:i}),(d||0===d)&&(f+=d),d=n["if"].call(t,t&&t.firework,{hash:{},inverse:v.noop,fn:v.program(6,l,i),data:i}),(d||0===d)&&(f+=d),f+='<div class="victory__end">'+g((h=n.Icon||t&&t.Icon,p={hash:{"class":"victory__endIcon"},data:i},h?h.call(t,"victory_extras",p):m.call(t,"Icon","victory_extras",p)))+"</div>",(h=n.Track)?d=h.call(t,{hash:{},data:i}):(h=t&&t.Track,d=typeof h===_?h.call(t,{hash:{},data:i}):h),f+=g(d)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.video=this.jst_modules.video||{},this.jst_modules.video.video=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=d((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Перейти на сайт",i):u.call(e,"_t","Перейти на сайт",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h="function",p=this;return c+='<div class="video"><div class="video__overlay"></div><div class="video__in"><div class="video__close" tabindex="0"></div><div class="video__shield"></div><div class="video__controls"><div class="video__controlsPause"></div><div class="video__controlsVolume"></div></div><video class="video__video"><source class="video__videoSource"></video><a href="',(s=n.link)?r=s.call(t,{hash:{},data:i}):(s=t&&t.link,r=typeof s===h?s.call(t,{hash:{},data:i}):s),c+=d(r)+'" target="_blank" class="video__cover"><img src="//',(s=n.cover)?r=s.call(t,{hash:{},data:i}):(s=t&&t.cover,r=typeof s===h?s.call(t,{hash:{},data:i}):s),c+=d(r)+'" alt="" class="video__coverPic"></a><div class="video__link">',s=n.Link||t&&t.Link,l={hash:{href:t&&t.link,"class":"_scheme_dark",target:"_blank"},inverse:p.noop,fn:p.program(1,o,i),data:i},r=s?s.call(t,l):u.call(t,"Link",l),(r||0===r)&&(c+=r),c+="</div>"+d((s=n.Preloader||t&&t.Preloader,l={hash:{"class":"video__preloader _scheme_darken"},data:i},s?s.call(t,l):u.call(t,"Preloader",l)))+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.weather=this.jst_modules.weather||{},this.jst_modules.weather.weather=function(e,t,n,a,i){function o(e,t){var a,i,o,l="";return l+='<a class="weather__info" href="',(i=n.forecastUrl)?a=i.call(e,{hash:{},data:t}):(i=e&&e.forecastUrl,a=typeof i===u?i.call(e,{hash:{},data:t}):i),l+=d(a)+'"><span class="weather__temperature">'+d((i=n.Icon||e&&e.Icon,o={hash:{"class":"weather__temperatureIcon"},data:t},i?i.call(e,e&&e.icon,o):h.call(e,"Icon",e&&e.icon,o)))+'<span class="weather__temperatureValue">',(i=n.temperature)?a=i.call(e,{hash:{},data:t}):(i=e&&e.temperature,a=typeof i===u?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(l+=a),l+='</span></span><span class="weather__forecast">',(i=n.dayPart)?a=i.call(e,{hash:{},data:t}):(i=e&&e.dayPart,a=typeof i===u?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(l+=a),l+=" ",(i=n.forecastTemperature)?a=i.call(e,{hash:{},data:t}):(i=e&&e.forecastTemperature,a=typeof i===u?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(l+=a),l+="</span></a>",a=n["if"].call(e,e&&e.showPromoLink,{hash:{},inverse:p.noop,fn:p.program(2,r,t),data:t}),(a||0===a)&&(l+=a),a=n["if"].call(e,e&&e.showForecastLink,{hash:{},inverse:p.noop,fn:p.program(4,s,t),data:t}),(a||0===a)&&(l+=a),l}function r(e,t){var a,i,o="";return o+='<a class="weather__promoLink" href="',(i=n.promoUrl)?a=i.call(e,{hash:{},data:t}):(i=e&&e.promoUrl,a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)+'">',(i=n.promoText)?a=i.call(e,{hash:{},data:t}):(i=e&&e.promoText,a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)+"</a>"}function s(e,t){var a,i,o,r="";return r+='<a class="weather__forecastLink" href="',(i=n.forecastUrl)?a=i.call(e,{hash:{},data:t}):(i=e&&e.forecastUrl,a=typeof i===u?i.call(e,{hash:{},data:t}):i),r+=d(a)+'">'+d((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Прогноз погоды",o):h.call(e,"_t","Прогноз погоды",o)))+"</a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c="",u="function",d=this.escapeExpression,h=n.helperMissing,p=this;return l=n["if"].call(t,t&&t.temperature,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(l||0===l)&&(c+=l),c},this.jst_modules=this.jst_modules||{},this.jst_modules.whatsNew=this.jst_modules.whatsNew||{},this.jst_modules.whatsNew.whatsNew=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="whatsNew__headerSocials">',a=n.each.call(e,e&&e.socialLinks,{hash:{},inverse:m.noop,fn:m.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function r(e,t){var a,i,o,r="";return r+='<a href="',(i=n.url)?a=i.call(e,{hash:{},data:t}):(i=e&&e.url,a=typeof i===h?i.call(e,{hash:{},data:t}):i),r+=p(a)+'" class="whatsNew__headerSocialsLink" target="_blank" data-name="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===h?i.call(e,{hash:{},data:t}):i),r+=p(a)+'">'+p((i=n.Icon||e&&e.Icon,o={hash:{"class":"whatsNew__headerSocialsLinkIcon",mods:e&&e.mods},data:t},i?i.call(e,e&&e.icon,o):f.call(e,"Icon",e&&e.icon,o)))+"</a>"}function s(e,t){var a,i,o="";return o+=p((a=n.p||e&&e.p,i={hash:{context:e},data:t},a?a.call(e,"newsItem",i):f.call(e,"p","newsItem",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h="function",p=this.escapeExpression,f=n.helperMissing,m=this;return d+='<div class="whatsNew__overlay"></div><div class="whatsNew__content"><div class="whatsNew__close">'+p((c=n.Icon||t&&t.Icon,u={hash:{"class":"whatsNew__closeIcon"},data:i},c?c.call(t,"ui_close",u):f.call(t,"Icon","ui_close",u)))+'</div><header class="whatsNew__header"><h1 class="whatsNew__headerTitle">',c=n._hgg||t&&t._hgg,u={hash:{wrap__class:"whatsNew__headerTitleHighlight"},data:i},l=c?c.call(t,"Что нового в %{Wrap 2гис}",u):f.call(t,"_hgg","Что нового в %{Wrap 2гис}",u),(l||0===l)&&(d+=l),d+='</h1><div class="whatsNew__headerDescription">',c=n._gg||t&&t._gg,u={hash:{},data:i},l=c?c.call(t,"Главные новости нашего справочника.<br>Читайте и&nbsp;делитесь с&nbsp;друзьями.",u):f.call(t,"_gg","Главные новости нашего справочника.<br>Читайте и&nbsp;делитесь с&nbsp;друзьями.",u),(l||0===l)&&(d+=l),d+="</div>",l=n["if"].call(t,t&&t.socialLinks,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+='</header><div class="whatsNew__list">',l=n.each.call(t,t&&t.news,{hash:{},inverse:m.noop,fn:m.program(4,s,i),data:i}),(l||0===l)&&(d+=l),d+="</div>"+p((c=n.Preloader||t&&t.Preloader,u={hash:{"class":"_scheme_lighten whatsNew__loader"},data:i},c?c.call(t,u):f.call(t,"Preloader",u)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.whatsNewSharing=this.jst_modules.whatsNewSharing||{},this.jst_modules.whatsNewSharing.whatsNewSharing=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<div class="whatsNewSharing__listItem _type_',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===u?i.call(e,{hash:{},data:t}):i),r+=d(a)+'" data-type="',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===u?i.call(e,{hash:{},data:t}):i),r+=d(a)+'"><div class="whatsNewSharing__listItemLink">'+d((i=n.Icon||e&&e.Icon,o={hash:{"class":"whatsNewSharing__listItemIcon"},data:t},i?i.call(e,e&&e.icon,o):h.call(e,"Icon",e&&e.icon,o)))+"</div></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u="function",d=this.escapeExpression,h=n.helperMissing,p=this;return c+='<div class="whatsNewSharing__close">'+d((s=n.Icon||t&&t.Icon,l={hash:{"class":"whatsNewSharing__closeIcon"},data:i},s?s.call(t,"ui_close",l):h.call(t,"Icon","ui_close",l)))+'</div><div class="whatsNewSharing__wrapper"><div class="whatsNewSharing__title">'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Поделитесь новостью с друзьями",l):h.call(t,"_gg","Поделитесь новостью с друзьями",l)))+'</div><div class="whatsNewSharing__list">',r=n.each.call(t,t&&t.sharing,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+="</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.wizard=this.jst_modules.wizard||{},this.jst_modules.wizard.wizard=function(e,t,n,a,i){function o(e,t){var a,i,o,l="";return l+='<div class="wizard__city" data-id=',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===_?i.call(e,{hash:{},data:t}):i),l+=m(a)+'><div class="wizard__cityIcon wizard__',(i=n.code)?a=i.call(e,{hash:{},data:t}):(i=e&&e.code,a=typeof i===_?i.call(e,{hash:{},data:t}):i),l+=m(a)+'Icon">'+m((i=n.Icon||e&&e.Icon,o={hash:{"class":"wizard__defaultIcon"},data:t},i?i.call(e,"wizard-defaultCity",o):f.call(e,"Icon","wizard-defaultCity",o)))+'</div><div class="wizard__guess"><div class="wizard_guessIn">'+m((i=n.Link||e&&e.Link,o={hash:{href:e&&e.href,"class":"wizard__guessLink _undashed"},data:t},i?i.call(e,e&&e.text,o):f.call(e,"Link",e&&e.text,o))),a=n["if"].call(e,e&&e.nearby,{hash:{},inverse:g.noop,fn:g.program(2,r,t),data:t}),(a||0===a)&&(l+=a),l+='</div><div class="wizard__guessNearby">',a=n["if"].call(e,e&&e.nearby,{hash:{},inverse:g.program(9,u,t),fn:g.program(4,s,t),data:t}),(a||0===a)&&(l+=a),l+="</div></div></div>"}function r(e,t){var a,i,o="";return o+='<span class="wizard__cityWhere">, '+m((a=n._pt||e&&e._pt,i={hash:{},data:t},a?a.call(e,"Поиск","город",i):f.call(e,"_pt","Поиск","город",i)))+"</span>"}function s(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.nearby,null==a||a===!1?a:a.countElse),{hash:{},inverse:g.program(7,c,t),fn:g.program(5,l,t),data:t}),(a||0===a)&&(i+=a),i}function l(e,t){var a,i,o,r="";return r+="\n                         ",i=n._hnt||e&&e._hnt,o={hash:{},data:t},a=i?i.call(e,"рядом %2 и ещё %1 город","рядом %2 и ещё %1 города","рядом %2 и ещё %1 городов",(a=e&&e.nearby,null==a||a===!1?a:a.countElse),(a=e&&e.nearby,null==a||a===!1?a:a.text),o):f.call(e,"_hnt","рядом %2 и ещё %1 город","рядом %2 и ещё %1 города","рядом %2 и ещё %1 городов",(a=e&&e.nearby,null==a||a===!1?a:a.countElse),(a=e&&e.nearby,null==a||a===!1?a:a.text),o),(a||0===a)&&(r+=a),r}function c(e,t){var a,i,o,r="";return r+="\n                         ",i=n._t||e&&e._t,o={hash:{},data:t},a=i?i.call(e,"рядом %1",(a=e&&e.nearby,null==a||a===!1?a:a.text),o):f.call(e,"_t","рядом %1",(a=e&&e.nearby,null==a||a===!1?a:a.text),o),(a||0===a)&&(r+=a),r}function u(e,t){var a,i,o="";return o+='<span class="wizard__cityWhere">'+m((a=n._pt||e&&e._pt,i={hash:{},data:t},a?a.call(e,"Поиск","город",i):f.call(e,"_pt","Поиск","город",i)))+"</span>"}function d(e,t){var a,i,o,r="";return r+='<div class="wizard__more">'+m((i=n.Icon||e&&e.Icon,o={hash:{"class":"wizard__icon"},data:t},i?i.call(e,"wizard-place",o):f.call(e,"Icon","wizard-place",o))),a=e&&e.more,a=null==a||a===!1?a:a.generalText,a=typeof a===_?a.apply(e):a,(a||0===a)&&(r+=a),r+='<div class="wizard__moreSum">',a=e&&e.more,a=null==a||a===!1?a:a.alsoText,a=typeof a===_?a.apply(e):a,(a||0===a)&&(r+=a),r+="</div></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p="",f=n.helperMissing,m=this.escapeExpression,g=this,_="function";return h=n.each.call(t,t&&t.cities,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(h||0===h)&&(p+=h),h=n["if"].call(t,t&&t.more,{hash:{},inverse:g.noop,fn:g.program(11,d,i),data:i}),(h||0===h)&&(p+=h),p},this.jst_modules=this.jst_modules||{},this.jst_modules.world=this.jst_modules.world||{},this.jst_modules.world.world=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=p((a=n.p||e&&e.p,i={hash:{context:e&&e.favorites},data:t},a?a.call(e,"list",i):h.call(e,"p","list",i)))}function r(e,t){var a,i,o="";return o+=p((a=n.p||e&&e.p,i={hash:{context:e&&e.countries},data:t},a?a.call(e,"list",i):h.call(e,"p","list",i)))}function s(e,t){var a,i,o="";return o+='<div class="world__globalAds">'+p((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e&&e.globalAds,i):h.call(e,"module",e&&e.globalAds,i)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h=n.helperMissing,p=this.escapeExpression,f="function",m=this;return d+='<header class="world__header"><a href="/" class="world__logo"></a><h1 class="world__title">',c=n._hngg||t&&t._hngg,u={hash:{link__class:"world__titleLink",link__href:t&&t.countriesLink},data:i},l=c?c.call(t,"Точная информация о %{Link %1 городе}","Точная информация о %{Link %1 городах}","Точная информация о %{Link %1 городах}",t&&t.citiesCount,u):h.call(t,"_hngg","Точная информация о %{Link %1 городе}","Точная информация о %{Link %1 городах}","Точная информация о %{Link %1 городах}",t&&t.citiesCount,u),(l||0===l)&&(d+=l),d+='</h1><div class="world__time">',(c=n.time)?l=c.call(t,{hash:{},data:i}):(c=t&&t.time,l=typeof c===f?c.call(t,{hash:{},data:i}):c),d+=p(l)+'</div></header><div class="world__search"><div class="world__searchIn"><input type="text" class="world__searchInput" placeholder="'+p((c=n._gg||t&&t._gg,u={hash:{},data:i},c?c.call(t,"Введите название города",u):h.call(t,"_gg","Введите название города",u)))+'"></div></div><div class="world__main"><div class="world__scroller"><div class="world__favorites">',l=n["if"].call(t,t&&t.favorites,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+='</div><div class="world__countries">',l=n["if"].call(t,t&&t.countries,{hash:{},inverse:m.noop,fn:m.program(3,r,i),data:i}),(l||0===l)&&(d+=l),d+="</div>",(c=n.Track)?l=c.call(t,{hash:{},data:i}):(c=t&&t.Track,l=typeof c===f?c.call(t,{hash:{},data:i}):c),d+=p(l)+'</div></div><div class="world__locationWrapper">'+p((c=n.p||t&&t.p,u={hash:{},data:i},c?c.call(t,"location",u):h.call(t,"p","location",u)))+"</div>",l=n["if"].call(t,t&&t.globalAds,{hash:{},inverse:m.noop,fn:m.program(5,s,i),data:i}),(l||0===l)&&(d+=l),d},this.jst_modules=this.jst_modules||{},this.jst_modules.zoom=this.jst_modules.zoom||{},this.jst_modules.zoom.zoom=function(e,t,n,a,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="zoom__panel"><div class="zoom__button _type_in"><div class="zoom__eventArea zoom__inButton"></div></div></div><div class="zoom__panel _size_small"><div class="zoom__button _type_out"><div class="zoom__eventArea zoom__outButton"></div></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.apartmentsList=this.jst_modules.apartmentsList||{},this.jst_modules.apartmentsList.list=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<a class="apartmentsList__listItem" href="',(i=n.link)?a=i.call(e,{hash:{},data:t}):(i=e&&e.link,a=typeof i===c?i.call(e,{hash:{},data:t}):i),o+=u(a)+'" target="_blank" data-index="'+u((a=null==t||t===!1?t:t.index,typeof a===c?a.apply(e):a))+'"><div class="apartmentsList__listItemName">',a=n.each.call(e,e&&e.nameParts,{hash:{},inverse:d.noop,fn:d.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+='</div><div class="apartmentsList__listItemDesc">',(i=n.desc)?a=i.call(e,{hash:{},data:t}):(i=e&&e.desc,a=typeof i===c?i.call(e,{hash:{},data:t}):i),o+=u(a)+"</div></a>"}function r(e,t){var n="";return n+='<span class="apartmentsList__listItemNamePart">'+u(typeof e===c?e.apply(e):e)+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c="function",u=this.escapeExpression,d=this;return s=n.each.call(t,t&&t.items,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l},this.jst_modules=this.jst_modules||{},this.jst_modules.apartmentsList=this.jst_modules.apartmentsList||{},this.jst_modules.apartmentsList.wizard=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression,d="function";return l+='<div class="apartmentsList__wizard">'+u((r=n.Icon||t&&t.Icon,s={hash:{"class":"apartmentsList__wizardIcon"},data:i},r?r.call(t,"wizard-place",s):c.call(t,"Icon","wizard-place",s)))+u((o=t&&t.wizard,o=null==o||o===!1?o:o.label,typeof o===d?o.apply(t):o))+'&nbsp;<span class="apartmentsList__wizardLink link _undashed" data-type="'+u((o=t&&t.wizard,o=null==o||o===!1?o:o.id,typeof o===d?o.apply(t):o))+'">'+u((o=t&&t.wizard,o=null==o||o===!1?o:o.title,typeof o===d?o.apply(t):o))+"</span></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.auth=this.jst_modules.auth||{},this.jst_modules.auth.captcha=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div id="auth__formCaptcha" class="auth__formCaptcha" style="display: none"><div class="auth__formCaptchaWrap"><div id="recaptcha_image" class="auth__formCaptchaImg"></div></div><div class="auth__formCaptchaField"><input type="text" id="recaptcha_response_field" class="auth__formCaptchaFieldInput" name="recaptcha_response_field" placeholder="'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Два слова с картинки выше",r):l.call(t,"_t","Два слова с картинки выше",r)))+'"></div><a href="#" class="auth__formCaptchaRefresh"></a></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.auth=this.jst_modules.auth||{},this.jst_modules.auth.change=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression,d="function";return l+='<div class="auth__popupSection"><form class="auth__form"><div class="auth__formField"><input type="password" class="auth__formFieldInput auth__formFieldPassword" placeholder="'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Новый пароль",s):c.call(t,"_t","Новый пароль",s)))+'"><input type="text" class="auth__formFieldInput auth__formFieldClone" older="'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Новый пароль",s):c.call(t,"_t","Новый пароль",s)))+'"><input type="checkbox" class="auth__formFieldCheckbox auth__formFieldShowpassword" id="auth__formFieldShowpassword"><label for="auth__formFieldShowpassword" class="auth__formFieldShow"></label></div>'+u((r=n.p||t&&t.p,s={hash:{},data:i},r?r.call(t,"captcha",s):c.call(t,"p","captcha",s)))+'<div class="auth__formSubmit"><button class="auth__formSubmitBtn auth__formChangeSubmitBtn _disabled">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Сменить пароль",s):c.call(t,"_t","Сменить пароль",s)))+u((r=n.Preloader||t&&t.Preloader,s={hash:{"class":"auth__formSubmitBtnPreloader _scheme_submit _small"},data:i},r?r.call(t,s):c.call(t,"Preloader",s)))+'</button></div><input type="hidden" name="email" class="auth__formFieldInput auth__formFieldConfirm" value="',(r=n.authConfirmCode)?o=r.call(t,{hash:{},data:i}):(r=t&&t.authConfirmCode,o=typeof r===d?r.call(t,{hash:{},data:i}):r),l+=u(o)+'" placeholder="'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Код подтверждения",s):c.call(t,"_t","Код подтверждения",s)))+'"></form></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.auth=this.jst_modules.auth||{},this.jst_modules.auth.confirm=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=d((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Отправить код ещё раз",i):u.call(e,"_t","Отправить код ещё раз",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h="function",p=this;return c+='<div class="auth__popupSection"><div class="auth__popupSectionDesc">',(s=n.confirmEmailSentMessage)?r=s.call(t,{hash:{},data:i}):(s=t&&t.confirmEmailSentMessage,r=typeof s===h?s.call(t,{hash:{},data:i}):s),c+=d(r)+'</div><form class="auth__form">'+d((s=n.p||t&&t.p,l={hash:{},data:i},s?s.call(t,"captcha",l):u.call(t,"p","captcha",l)))+'<div class="auth__formSubmit">',s=n.Link||t&&t.Link,l={hash:{"class":"_scheme_dark auth__formSubmitRetry"},inverse:p.noop,fn:p.program(1,o,i),data:i},r=s?s.call(t,l):u.call(t,"Link",l),(r||0===r)&&(c+=r),c+="</div></form></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.auth=this.jst_modules.auth||{},this.jst_modules.auth.confirmed=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="auth__popupResponse">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Вы можете авторизоваться",r):l.call(t,"_t","Вы можете авторизоваться",r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.auth=this.jst_modules.auth||{},this.jst_modules.auth.login=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=f((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Зарегистрироваться",i):p.call(e,"_t","Зарегистрироваться",i)))}function r(e,t){var a,i,o="";return o+=' value="',(i=n.email)?a=i.call(e,{hash:{},data:t}):(i=e&&e.email,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=f(a)+'"'}function s(e,t){var a,i,o="";return o+=' value="',(i=n.password)?a=i.call(e,{hash:{},data:t}):(i=e&&e.password,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=f(a)+'"'}function l(e,t){var a,i,o="";return o+=f((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Восстановить пароль",i):p.call(e,"_t","Восстановить пароль",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u,d,h="",p=n.helperMissing,f=this.escapeExpression,m="function",g=this;return h+='<div class="auth__popupSwitch">',u=n.Link||t&&t.Link,d={hash:{"class":"_scheme_dark auth__signup"},inverse:g.noop,fn:g.program(1,o,i),data:i},c=u?u.call(t,d):p.call(t,"Link",d),(c||0===c)&&(h+=c),h+="</div>"+f((u=n.p||t&&t.p,d={hash:{},data:i},u?u.call(t,"social",d):p.call(t,"p","social",d)))+'<div class="auth__popupSection"><form class="auth__form"><div class="auth__formField"><input type="text" class="auth__formFieldInput auth__formFieldEmail" placeholder="'+f((u=n._t||t&&t._t,d={hash:{},data:i},u?u.call(t,"Электронная почта",d):p.call(t,"_t","Электронная почта",d)))+'"',c=n["if"].call(t,t&&t.email,{hash:{},inverse:g.noop,fn:g.program(3,r,i),data:i}),(c||0===c)&&(h+=c),h+='></div><div class="auth__formField"><input type="password" class="auth__formFieldInput auth__formFieldPassword" placeholder="'+f((u=n._t||t&&t._t,d={hash:{},data:i},u?u.call(t,"Пароль",d):p.call(t,"_t","Пароль",d)))+'"',c=n["if"].call(t,t&&t.password,{hash:{},inverse:g.noop,fn:g.program(5,s,i),data:i}),(c||0===c)&&(h+=c),h+='><input type="text" class="auth__formFieldInput auth__formFieldClone" placeholder="'+f((u=n._t||t&&t._t,d={hash:{},data:i},u?u.call(t,"Пароль",d):p.call(t,"_t","Пароль",d)))+'"',c=n["if"].call(t,t&&t.password,{hash:{},inverse:g.noop,fn:g.program(5,s,i),data:i}),(c||0===c)&&(h+=c),h+='><input type="checkbox" class="auth__formFieldCheckbox auth__formFieldShowpassword" id="auth__formFieldShowpassword"><label for="auth__formFieldShowpassword" class="auth__formFieldShow"></label></div>'+f((u=n.p||t&&t.p,d={hash:{},data:i},u?u.call(t,"captcha",d):p.call(t,"p","captcha",d)))+'<div class="auth__formSubmit"><button class="auth__formSubmitBtn auth__formLoginSubmitBtn _disabled">'+f((u=n._pt||t&&t._pt,d={hash:{},data:i},u?u.call(t,"Аккаунт","Войти",d):p.call(t,"_pt","Аккаунт","Войти",d)))+f((u=n.Preloader||t&&t.Preloader,d={hash:{"class":"auth__formSubmitBtnPreloader _scheme_submit _small"},data:i},u?u.call(t,d):p.call(t,"Preloader",d)))+'</button><div class="auth__formSubmitFunc">',u=n.Link||t&&t.Link,d={hash:{"class":"_scheme_dark auth__recovery"},inverse:g.noop,fn:g.program(7,l,i),data:i},c=u?u.call(t,d):p.call(t,"Link",d),(c||0===c)&&(h+=c),h+="</div></div></form></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.auth=this.jst_modules.auth||{},this.jst_modules.auth.loyalty=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<div class="auth__teaser">'+u((r=n.Icon||t&&t.Icon,s={hash:{"class":"auth__teaserIcon"},data:i},r?r.call(t,"promo_loyaltyCity",s):c.call(t,"Icon","promo_loyaltyCity",s)))+'<div class="auth__teaserTitle">',r=n._gg||t&&t._gg,s={hash:{},data:i},o=r?r.call(t,"Примите участие  в конкурсе  «Городской&nbsp;эксперт»",s):c.call(t,"_gg","Примите участие  в конкурсе  «Городской&nbsp;эксперт»",s),(o||0===o)&&(l+=o),l+='</div><div class="auth__teaserDescription">',r=n._gg||t&&t._gg,s={hash:{},data:i},o=r?r.call(t,"Находите неточности в 2ГИС <nobr>и выиграйте поездку в Прагу<nobr> на двоих",s):c.call(t,"_gg","Находите неточности в 2ГИС <nobr>и выиграйте поездку в Прагу<nobr> на двоих",s),(o||0===o)&&(l+=o),l+='</div><a href="http://www.ufa-urban-expert.2gis.ru?utm_source=online&utm_medium=signup&utm_campaign=contest" target="_blank" class="auth__formSubmitBtn auth__loyaltySubmitBtn">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"Принять участие",s):c.call(t,"_gg","Принять участие",s)))+"</a></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.auth=this.jst_modules.auth||{},this.jst_modules.auth.recovery=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="auth__popupSection"><div class="auth__popupSectionDesc">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Напишите адрес электронной почты, с помощью которой вы зарегистрировались.",r):l.call(t,"_t","Напишите адрес электронной почты, с помощью которой вы зарегистрировались.",r)))+'</div><form class="auth__form"><div class="auth__formField"><input type="text" class="auth__formFieldInput auth__formFieldEmail" placeholder="'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Электронная почта",r):l.call(t,"_t","Электронная почта",r)))+'"></div><div class="auth__formSubmit"><button class="auth__formSubmitBtn auth__formRecoverySubmitBtn _disabled">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Подтвердить",r):l.call(t,"_t","Подтвердить",r)))+c((o=n.Preloader||t&&t.Preloader,r={hash:{"class":"auth__formSubmitBtnPreloader _scheme_submit _small"},data:i},o?o.call(t,r):l.call(t,"Preloader",r)))+"</button></div></form></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.auth=this.jst_modules.auth||{},this.jst_modules.auth.response=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<div class="auth__formSubmit">',i=n.Link||e&&e.Link,o={hash:{"class":"_scheme_dark auth__formSubmitRetry"},inverse:h.noop,fn:h.program(2,r,t),data:t},a=i?i.call(e,o):u.call(e,"Link",o),(a||0===a)&&(s+=a),s+="</div>"}function r(e,t){var a,i,o="";return o+=d((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Отправить код ещё раз",i):u.call(e,"_t","Отправить код ещё раз",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c="",u=n.helperMissing,d=this.escapeExpression,h=this,p="function";return c+='<div class="auth__popupResponse">',(l=n.text)?s=l.call(t,{hash:{},data:i}):(l=t&&t.text,s=typeof l===p?l.call(t,{hash:{},data:i}):l),c+=d(s),s=n["if"].call(t,t&&t.showRetry,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(s||0===s)&&(c+=s),c+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.auth=this.jst_modules.auth||{},this.jst_modules.auth.responseConfirm=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression,d="function";return l+='<div class="auth__popupResponse">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Вы авторизованы.",s):c.call(t,"_t","Вы авторизованы.",s)))+'</div><form class="auth__form _hidden"><div class="auth__formField"><input type="text" class="auth__formFieldInput auth__formFieldConfirm" value="',
(r=n.authConfirmCode)?o=r.call(t,{hash:{},data:i}):(r=t&&t.authConfirmCode,o=typeof r===d?r.call(t,{hash:{},data:i}):r),l+=u(o)+'" placeholder="'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Код подтверждения",s):c.call(t,"_t","Код подтверждения",s)))+'"></div><button class="auth__formSubmitBtn auth__formConfirmSubmitBtn"></button></form>'},this.jst_modules=this.jst_modules||{},this.jst_modules.auth=this.jst_modules.auth||{},this.jst_modules.auth.signup=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=p((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Вход с паролем",i):h.call(e,"_t","Вход с паролем",i)))}function r(e,t){var a,i,o="";return o+=' value="',(i=n.email)?a=i.call(e,{hash:{},data:t}):(i=e&&e.email,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=p(a)+'"'}function s(e,t){var a,i,o="";return o+=' value="',(i=n.password)?a=i.call(e,{hash:{},data:t}):(i=e&&e.password,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=p(a)+'"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h=n.helperMissing,p=this.escapeExpression,f="function",m=this;return d+='<div class="auth__popupSwitch">',c=n.Link||t&&t.Link,u={hash:{"class":"_scheme_dark auth__signin"},inverse:m.noop,fn:m.program(1,o,i),data:i},l=c?c.call(t,u):h.call(t,"Link",u),(l||0===l)&&(d+=l),d+="</div>"+p((c=n.p||t&&t.p,u={hash:{},data:i},c?c.call(t,"social",u):h.call(t,"p","social",u)))+'<div class="auth__popupSection"><form class="auth__form"><div class="auth__formField"><input type="text" class="auth__formFieldInput auth__formFieldEmail" placeholder="'+p((c=n._t||t&&t._t,u={hash:{},data:i},c?c.call(t,"Электронная почта",u):h.call(t,"_t","Электронная почта",u)))+'"',l=n["if"].call(t,t&&t.email,{hash:{},inverse:m.noop,fn:m.program(3,r,i),data:i}),(l||0===l)&&(d+=l),d+='></div><div class="auth__formField"><input type="password" class="auth__formFieldInput auth__formFieldPassword" placeholder="'+p((c=n._t||t&&t._t,u={hash:{},data:i},c?c.call(t,"Пароль",u):h.call(t,"_t","Пароль",u)))+'"',l=n["if"].call(t,t&&t.password,{hash:{},inverse:m.noop,fn:m.program(5,s,i),data:i}),(l||0===l)&&(d+=l),d+='><input type="text" class="auth__formFieldInput auth__formFieldClone" placeholder="'+p((c=n._t||t&&t._t,u={hash:{},data:i},c?c.call(t,"Пароль",u):h.call(t,"_t","Пароль",u)))+'"',l=n["if"].call(t,t&&t.password,{hash:{},inverse:m.noop,fn:m.program(5,s,i),data:i}),(l||0===l)&&(d+=l),d+='><input type="checkbox" class="auth__formFieldCheckbox auth__formFieldShowpassword" id="auth__formFieldShowpassword"><label for="auth__formFieldShowpassword" class="auth__formFieldShow"></label></div><div class="auth__formField _license"><input type="checkbox" name="license" class="auth__formFieldCheckbox auth__formFieldLicense" id="auth__formFieldLicense"><label for="auth__formFieldLicense" class="auth__formFieldPseudocheckbox"></label><label for="auth__formFieldLicense" class="auth__formFieldLabel">',c=n._ht||t&&t._ht,u={hash:{link__class:"_scheme_dark auth__license",link__target:"_blank",link__href:t&&t.agreement},data:i},l=c?c.call(t,"с %{Link пользовательским соглашением} ознакомился и&nbsp;согласен",u):h.call(t,"_ht","с %{Link пользовательским соглашением} ознакомился и&nbsp;согласен",u),(l||0===l)&&(d+=l),d+='</label></div><div class="auth__formSubmit"><button class="auth__formSubmitBtn auth__formSignupSubmitBtn _disabled">'+p((c=n._t||t&&t._t,u={hash:{},data:i},c?c.call(t,"Зарегистрироваться",u):h.call(t,"_t","Зарегистрироваться",u)))+p((c=n.Preloader||t&&t.Preloader,u={hash:{"class":"auth__formSubmitBtn_preloader _scheme_submit _small"},data:i},c?c.call(t,u):h.call(t,"Preloader",u)))+"</button></div></form></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.auth=this.jst_modules.auth||{},this.jst_modules.auth.social=function(e,t,n,a,i){function o(e,t){return'<li class="auth__popupSocialItem auth__popupSocialVkontakte"></li>'}function r(e,t){return'<li class="auth__popupSocialItem auth__popupSocialFacebook"></li>'}function s(e,t){return'<li class="auth__popupSocialItem auth__popupSocialTwitter"></li>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c="",u=this;return c+='<ul class="auth__popupSocial">',l=n["if"].call(t,t&&t.hasVkontakte,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(l||0===l)&&(c+=l),l=n["if"].call(t,t&&t.hasFacebook,{hash:{},inverse:u.noop,fn:u.program(3,r,i),data:i}),(l||0===l)&&(c+=l),l=n["if"].call(t,t&&t.hasTwitter,{hash:{},inverse:u.noop,fn:u.program(5,s,i),data:i}),(l||0===l)&&(c+=l),c+="</ul>"},this.jst_modules=this.jst_modules||{},this.jst_modules.autoResults=this.jst_modules.autoResults||{},this.jst_modules.autoResults.print=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n.each.call(e,e&&e.steps,{hash:{},inverse:f.noop,fn:f.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var a,i="";return a=n["if"].call(e,e&&e.forPrint,{hash:{},inverse:f.noop,fn:f.program(3,s,t),data:t}),(a||0===a)&&(i+=a),i}function s(e,t){var a,i,o="";return o+='<article class="autoResults__step _type_',(i=n.icon)?a=i.call(e,{hash:{},data:t}):(i=e&&e.icon,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'"><div class="autoResults__stepTitle">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</div></article>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h="function",p=this.escapeExpression,f=this,m=n.helperMissing;return d+='<div class="autoResults _free"><div class="autoResults__header">'+p((c=n._t||t&&t._t,u={hash:{},data:i},c?c.call(t,"Автомобильный маршрут",u):m.call(t,"_t","Автомобильный маршрут",u)))+", <br />",(c=n.duration)?l=c.call(t,{hash:{},data:i}):(c=t&&t.duration,l=typeof c===h?c.call(t,{hash:{},data:i}):c),d+=p(l)+", "+p((c=n._i18n||t&&t._i18n,u={hash:{data:t&&t.length},data:i},c?c.call(t,"DISTANCE",u):m.call(t,"_i18n","DISTANCE",u)))+'</div><section class="autoResults__route"><div class="autoResults__routeDetails">',l=n.each.call(t,t&&t.legs,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+="</div></section></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.award=this.jst_modules.award||{},this.jst_modules.award.cl=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<h1 class="award__headerTitle" data-year=" 2015">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"Santiago ranking",s):c.call(t,"_gg","Santiago ranking",s)))+'</h1><div class="award__headerMotto">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"Patrocina:UBER",s):c.call(t,"_gg","Patrocina:UBER",s)))+'</div><p class="award__headerText">',r=n._gg||t&&t._gg,s={hash:{},data:i},o=r?r.call(t,"Los usuarios de 2GIS ya hicieron su elección!<br>Haz click acá y conoce las empresas nuevas más populares del año 2015.",s):c.call(t,"_gg","Los usuarios de 2GIS ya hicieron su elección!<br>Haz click acá y conoce las empresas nuevas más populares del año 2015.",s),(o||0===o)&&(l+=o),l+='</p><div class="award__headerSponsorship"><h2 class="award__headerSponsorshipTitle">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"Tu chofer a sólo un click",s):c.call(t,"_gg","Tu chofer a sólo un click",s)))+'</h2><p class="award__headerSponsorshipText">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"La mejor forma de moverte por la ciudad, seguro, cómodo y más barato que un taxi. Pide un Uber y te recogemos en minutos.",s):c.call(t,"_gg","La mejor forma de moverte por la ciudad, seguro, cómodo y más barato que un taxi. Pide un Uber y te recogemos en minutos.",s)))+'</p><p class="award__headerSponsorshipText">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,'Si nunca has usado la app, regístrate con el código"santiago2gis" y obtén tu primer VIAJE GRATIS por hasta $10.000',s):c.call(t,"_gg",'Si nunca has usado la app, regístrate con el código"santiago2gis" y obtén tu primer VIAJE GRATIS por hasta $10.000',s)))+'</p><div class="award__headerSponsorshipLinks"><a href="https://itunes.apple.com/cl/app/uber/id368677368?mt=8" target="_blank" class="award__headerSponsorshipLinksItem _appStore">AppStore</a><a href="https://play.google.com/store/apps/details?id=com.ubercab&hl=en" target="_blank" class="award__headerSponsorshipLinksItem _googlePlay">GooglePlay</a><a href="https://www.microsoft.com/es-es/store/apps/uber/9wzdncrfhxrd" target="_blank" class="award__headerSponsorshipLinksItem _wpStore">WPStore</a></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.award=this.jst_modules.award||{},this.jst_modules.award.defaultHeader=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<h1 class="award__headerTitle" data-year=" 2015">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Открытия года",s):c.call(t,"_t","Открытия года",s)))+'</h1><p class="award__headerText">',r=n._t||t&&t._t,s={hash:{},data:i},o=r?r.call(t,"Спасибо всем, кто голосовал и помог подвести итоги.<br>Смотрите, выбирайте и советуйте друзьям лучшие новые компании города по версии пользователей 2ГИС.<br>С Новым годом!",s):c.call(t,"_t","Спасибо всем, кто голосовал и помог подвести итоги.<br>Смотрите, выбирайте и советуйте друзьям лучшие новые компании города по версии пользователей 2ГИС.<br>С Новым годом!",s),(o||0===o)&&(l+=o),l+="</p>"},this.jst_modules=this.jst_modules||{},this.jst_modules.award=this.jst_modules.award||{},this.jst_modules.award.group=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n["if"].call(e,e&&e.module,{hash:{},inverse:h.noop,fn:h.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var a,i,o="";return o+=d((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e&&e.module,i):u.call(e,"module",e&&e.module,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c="",u=n.helperMissing,d=this.escapeExpression,h=this,p="function";return c+='<div class="award__categoriesGroup"><div class="award__categoriesGroupTitle _',(l=n.code)?s=l.call(t,{hash:{},data:i}):(l=t&&t.code,s=typeof l===p?l.call(t,{hash:{},data:i}):l),c+=d(s)+'">',(l=n.title)?s=l.call(t,{hash:{},data:i}):(l=t&&t.title,s=typeof l===p?l.call(t,{hash:{},data:i}):l),c+=d(s)+'</div><div class="award__categoriesGroupListWrap"><div class="award__categoriesGroupList">',s=n.each.call(t,(s=t&&t.items,null==s||s===!1?s:s.items),{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(s||0===s)&&(c+=s),c+="</div></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.award=this.jst_modules.award||{},this.jst_modules.award.ru=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<div class="award__headerSponsorship"><div class="award__headerSponsorshipLinks"><a href="http://shop.megafon.ru/vozmitrubku?utm_source=2gis&utm_medium=ag-media_media_special-project_podrobnee-button_month&utm_campaign=fed_flight_shop_login-4_rf" target="_blank" class="award__headerSponsorshipLinksItem">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"Подробнее",s):c.call(t,"_gg","Подробнее",s)))+'</a> <a href="http://shop.megafon.ru/mobile?utm_source=2gis&utm_medium=ag-media_media_special-project_smartphone-button_month&utm_campaign=fed_flight_shop_login-4_rf" target="_blank" class="award__headerSponsorshipLinksItem">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"Смартфоны",s):c.call(t,"_gg","Смартфоны",s)))+'</a> <a href="http://shop.megafon.ru/planshet?utm_source=2gis&utm_medium=ag-media_media_special-project_planshet-button_month&utm_campaign=fed_flight_shop_login-4_rf" target="_blank" class="award__headerSponsorshipLinksItem">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"Планшеты",s):c.call(t,"_gg","Планшеты",s)))+'</a></div></div><h1 class="award__headerTitle" data-year=" 2015">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"Открытия года",s):c.call(t,"_gg","Открытия года",s)))+'</h1><div class="award__headerMotto">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"Совместно с",s):c.call(t,"_gg","Совместно с",s)))+u((r=n.Icon||t&&t.Icon,s={hash:{"class":"award__headerMottoImg"},data:i},r?r.call(t,"award__megafon",s):c.call(t,"Icon","award__megafon",s)))+'</div><p class="award__headerText">',r=n._gg||t&&t._gg,s={hash:{},data:i},o=r?r.call(t,"Спасибо всем, кто голосовал и помог подвести итоги.<br>Смотрите, выбирайте и советуйте друзьям лучшие новые компании города по версии пользователей 2ГИС.<br>С Новым годом!",s):c.call(t,"_gg","Спасибо всем, кто голосовал и помог подвести итоги.<br>Смотрите, выбирайте и советуйте друзьям лучшие новые компании города по версии пользователей 2ГИС.<br>С Новым годом!",s),(o||0===o)&&(l+=o),l+="</p>"},this.jst_modules=this.jst_modules||{},this.jst_modules.awardPopup=this.jst_modules.awardPopup||{},this.jst_modules.awardPopup.justSharing=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<div class="awardPopup__content">'+h((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Остальные компании ждут ваших голосов!",o):d.call(e,"_t","Остальные компании ждут ваших голосов!",o))),i=n.Btn||e&&e.Btn,o={hash:{"class":"awardPopup__btn"},inverse:p.noop,fn:p.program(2,r,t),data:t},a=i?i.call(e,o):d.call(e,"Btn",o),(a||0===a)&&(s+=a),i=n._ht||e&&e._ht,o={hash:{link__target:"_blank",link__href:"https://vk.com/all2gis"},data:t},a=i?i.call(e,"Победителей объявим 30 декабря.<br>%{Link Следите за новостями}.",o):d.call(e,"_ht","Победителей объявим 30 декабря.<br>%{Link Следите за новостями}.",o),(a||0===a)&&(s+=a),s+="</div>"}function r(e,t){var a,i,o="";return o+=h((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Голосовать",i):d.call(e,"_t","Голосовать",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d=n.helperMissing,h=this.escapeExpression,p=this;return u+='<h1 class="awardPopup__title">'+h((l=n._t||t&&t._t,c={hash:{},data:i},l?l.call(t,"Расскажите друзьям о компании, которую считаете лучшей:",c):d.call(t,"_t","Расскажите друзьям о компании, которую считаете лучшей:",c)))+'</h1><div class="awardPopup__socials"><button class="awardPopup__socialsItem _social_vkontakte"></button><button class="awardPopup__socialsItem _social_facebook"></button></div>',s=n.unless.call(t,t&&t["final"],{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u},this.jst_modules=this.jst_modules||{},this.jst_modules.awardPopup=this.jst_modules.awardPopup||{},this.jst_modules.awardPopup.login=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<div class="awardPopup__close">'+u((r=n.Icon||t&&t.Icon,s={hash:{},data:i},r?r.call(t,"ui_close-square",s):c.call(t,"Icon","ui_close-square",s)))+'</div><h1 class="awardPopup__title">',r=n._t||t&&t._t,s={hash:{},data:i},o=r?r.call(t,"Авторизуйтесь,<br>чтобы мы учли ваш голос",s):c.call(t,"_t","Авторизуйтесь,<br>чтобы мы учли ваш голос",s),(o||0===o)&&(l+=o),l+='</h1><div class="awardPopup__socials"><button class="awardPopup__socialsItem _social_vkontakte"></button><button class="awardPopup__socialsItem _social_facebook"></button></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.awardPopup=this.jst_modules.awardPopup||{},this.jst_modules.awardPopup.voted=function(e,t,n,a,i){function o(e,t){var a,i,o="";return(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===h?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o}function r(e,t){var a,i,o="";return o+=f((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Мы засчитали ваш голос",i):p.call(e,"_t","Мы засчитали ваш голос",i)))}function s(e,t){var a,i,o="";return o+=f((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Продолжить",i):p.call(e,"_t","Продолжить",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h="function",p=n.helperMissing,f=this.escapeExpression,m=this;return d+='<h1 class="awardPopup__title">',l=n["if"].call(t,t&&t.title,{hash:{},inverse:m.program(3,r,i),fn:m.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+='</h1><div class="awardPopup__socials"><div class="awardPopup__socialsDesc">',c=n._t||t&&t._t,u={hash:{},data:i},l=c?c.call(t,"Расскажите друзьям о компании, которую<br>считаете лучшей:",u):p.call(t,"_t","Расскажите друзьям о компании, которую<br>считаете лучшей:",u),(l||0===l)&&(d+=l),d+='</div><button class="awardPopup__socialsItem _social_vkontakte"></button><button class="awardPopup__socialsItem _social_facebook"></button></div><div class="awardPopup__content">'+f((c=n._t||t&&t._t,u={hash:{},data:i},c?c.call(t,"Остальные компании тоже ждут голосов!",u):p.call(t,"_t","Остальные компании тоже ждут голосов!",u))),c=n.Btn||t&&t.Btn,u={hash:{"class":"awardPopup__btn"},inverse:m.noop,fn:m.program(5,s,i),data:i},l=c?c.call(t,u):p.call(t,"Btn",u),(l||0===l)&&(d+=l),c=n._ht||t&&t._ht,u={hash:{link__target:"_blank",link__href:"https://vk.com/all2gis"},data:i},l=c?c.call(t,"Победителей объявим 30 декабря.<br>%{Link Следите за новостями}.",u):p.call(t,"_ht","Победителей объявим 30 декабря.<br>%{Link Следите за новостями}.",u),(l||0===l)&&(d+=l),d+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.about=function(e,t,n,a,i){function o(e,t){var i,o="";return i=D.invokePartial(a.shortInfo,"shortInfo",e,n,a,t),(i||0===i)&&(o+=i),o}function r(e,t){var n,a="";return a+='<div class="bookletBuildings__about"><h2 class="bookletBuildings__aboutTitle">'+N((n=e&&e.description,n=null==n||n===!1?n:n.slogan,typeof n===R?n.apply(e):n))+'</h2><p class="bookletBuildings__paragraph">',n=e&&e.description,n=null==n||n===!1?n:n.description,n=typeof n===R?n.apply(e):n,(n||0===n)&&(a+=n),a+="</p></div>"}function s(e,t){var i,o="";return i=D.invokePartial(a.others,"others",e,n,a,t),(i||0===i)&&(o+=i),o}function l(e,t){return"1"}function c(e,t){return"2"}function u(e,t){var i,o="";return o+='<div class="bookletBuildings__section"><h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner">'+N((i=e&&e.aboutPhotos,i=null==i||i===!1?i:i.title,typeof i===R?i.apply(e):i)),i=D.invokePartial(a.editIcon,"editIcon",e,n,a,t),(i||0===i)&&(o+=i),o+='</span></h2><div class="bookletBuildings__sectionWidget"><div class="bookletBuildings__overlay _type_photo"><span class="bookletBuildings__icon _camera"></span>\n                            &nbsp;'+N((i=e&&e.aboutPhotos,i=null==i||i===!1?i:i.count,typeof i===R?i.apply(e):i)),i=D.invokePartial(a.editIcon,"editIcon",e,n,a,t),(i||0===i)&&(o+=i),o+='</div><div class="bookletBuildings__widgetGrid">',i=n["if"].call(e,(i=e&&e.aboutPhotos,null==i||i===!1?i:i.small),{hash:{},inverse:D.program(15,p,t),fn:D.program(12,d,t),data:t}),(i||0===i)&&(o+=i),o+="</div></div></div>"}function d(e,t){var a,i="";return i+='<div class="bookletBuildings__widgetGridCell _gridCell_3x2">',a=n["with"].call(e,(a=e&&e.aboutPhotos,null==a||a===!1?a:a.big),{hash:{},inverse:D.noop,fn:D.program(13,h,t),data:t}),(a||0===a)&&(i+=a),i+='</div><div class="bookletBuildings__widgetGridCell _gridCell_3x1">',a=n.each.call(e,(a=e&&e.aboutPhotos,null==a||a===!1?a:a.small),{hash:{},inverse:D.noop,fn:D.program(13,h,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function h(e,t){var i,o="";return i=D.invokePartial(a.photo,"photo",e,n,a,t),(i||0===i)&&(o+=i),o}function p(e,t){var a,i="";return a=n["with"].call(e,(a=e&&e.aboutPhotos,null==a||a===!1?a:a.big),{hash:{},inverse:D.noop,fn:D.program(13,h,t),data:t}),(a||0===a)&&(i+=a),i}function f(e,t){return'<div class="bookletBuildings__grid">'}function m(e,t){var a,i,o,r="";return r+='<div class="bookletBuildings__section"><h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner">'+N((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Квартиры в продаже",o):B.call(e,"_gg","Квартиры в продаже",o)))+'</span></h2><ul class="bookletBuildings__bullList">',a=n.each.call(e,e&&e.apartmentsBlock,{hash:{},inverse:D.noop,fn:D.program(20,g,t),data:t}),(a||0===a)&&(r+=a),r+='</ul><p class="bookletBuildings__overall"><a href="http://',(i=n.mapsDomain)?a=i.call(e,{hash:{},data:t}):(i=e&&e.mapsDomain,a=typeof i===R?i.call(e,{hash:{},data:t}):i),r+=N(a)+"/",(i=n.bookletCode)?a=i.call(e,{hash:{},data:t}):(i=e&&e.bookletCode,a=typeof i===R?i.call(e,{hash:{},data:t}):i),r+=N(a)+'/page/apartments" class="bookletBuildings__link bookletBuildings__subpage" data-page="apartments">'+N((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"посмотреть все квартиры",o):B.call(e,"_gg","посмотреть все квартиры",o)))+"</a></p></div>"}function g(e,t){var a,i,o,r="";return r+='<li class="bookletBuildings__bullListItem">'+N((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"%1 от %2",e&&e.type,e&&e.price,o):B.call(e,"_gg","%1 от %2",e&&e.type,e&&e.price,o)))+'<span class="bookletBuildings__currency _bullList _'+N((a=e&&e.currency,a=null==a||a===!1?a:a.code,typeof a===R?a.apply(e):a))+'">'+N((a=e&&e.currency,a=null==a||a===!1?a:a.symbol,typeof a===R?a.apply(e):a))+"</span></li>"}function _(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.shortInfo,null==a||a===!1?a:a.apartmentTypes),{hash:{},inverse:D.program(32,x,t),fn:D.program(23,v,t),data:t}),(a||0===a)&&(i+=a),i}function v(e,t){var i,o,r,s="";return s+='<div class="bookletBuildings__section ',i=n.unless.call(e,(i=e&&e.infrastructureBlock,null==i||i===!1?i:i.showMap),{hash:{},inverse:D.noop,fn:D.program(24,y,t),data:t}),(i||0===i)&&(s+=i),s+='"><h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner">'+N((o=n._gg||e&&e._gg,r={hash:{},data:t},o?o.call(e,"В продаже",r):B.call(e,"_gg","В продаже",r))),i=D.invokePartial(a.editIcon,"editIcon",e,n,a,t),(i||0===i)&&(s+=i),s+="</span></h2>",i=n["if"].call(e,(i=e&&e.shortInfo,null==i||i===!1?i:i.minFullPrice),{hash:{},inverse:D.noop,fn:D.program(26,b,t),data:t}),(i||0===i)&&(s+=i),s+='<ul class="bookletBuildings__bullList">',i=n.each.call(e,(i=e&&e.shortInfo,null==i||i===!1?i:i.apartmentTypes),{hash:{},inverse:D.noop,fn:D.program(28,k,t),data:t}),(i||0===i)&&(s+=i),s+="</ul>",i=n["if"].call(e,e&&e.showMoreApartments,{hash:{},inverse:D.noop,fn:D.program(30,w,t),data:t}),(i||0===i)&&(s+=i),s+="</div>"}function y(e,t){return"bookletBuildings__gridCell _gridCell_2x1"}function b(e,t){var a,i,o,r="";return r+='<div class="bookletBuildings__priceFrom"><div class="bookletBuildings__priceFromValue"><small class="bookletBuildings__priceFromDigit">'+N((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"от",o):B.call(e,"_gg","от",o)))+'<span class="bookletBuildings__icon _coins"></span></small>'+N((a=e&&e.shortInfo,a=null==a||a===!1?a:a.minFullPrice,typeof a===R?a.apply(e):a))+'</div><div class="bookletBuildings__priceFromCurrency">'+N((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"тыс.",o):B.call(e,"_gg","тыс.",o)))+'<span class="bookletBuildings__currency _'+N((a=e&&e.currency,a=null==a||a===!1?a:a.code,typeof a===R?a.apply(e):a))+'">'+N((a=e&&e.currency,a=null==a||a===!1?a:a.symbol,typeof a===R?a.apply(e):a))+"</span></div></div>"}function k(e,t){var n="";return n+='<li class="bookletBuildings__bullListItem bookletBuildings__flatItem">'+N(typeof e===R?e.apply(e):e)+"</li>"}function w(e,t){var a,i,o="";return o+='<div class="bookletBuildings__overall bookletBuildings__flatsMore"><span class="bookletBuildings__link bookletBuildings__icon _expand" data-action="showBanks">'+N((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"все варианты жилья ",i):B.call(e,"_gg","все варианты жилья ",i)))+"</span></div>"}function x(e,t){var a,i="";return a=n["if"].call(e,e&&e.flatsVariants,{hash:{},inverse:D.noop,fn:D.program(33,C,t),data:t}),(a||0===a)&&(i+=a),i}function C(e,t){var i,o,r,s="";return s+='<div class="bookletBuildings__section ',i=n.unless.call(e,(i=e&&e.infrastructureBlock,null==i||i===!1?i:i.showMap),{hash:{},inverse:D.noop,fn:D.program(24,y,t),data:t}),(i||0===i)&&(s+=i),s+='"><h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner">'+N((o=n._gg||e&&e._gg,r={hash:{},data:t},o?o.call(e,"Варианты квартир",r):B.call(e,"_gg","Варианты квартир",r))),i=D.invokePartial(a.editIcon,"editIcon",e,n,a,t),(i||0===i)&&(s+=i),s+='</span></h2><ul class="bookletBuildings__bullList _type_inline">',i=n.each.call(e,e&&e.flatsVariants,{hash:{},inverse:D.noop,fn:D.program(34,L,t),data:t}),(i||0===i)&&(s+=i),s+="</ul></div>"}function L(e,t){var n="";return n+='<li class="bookletBuildings__bullListItem">'+N(typeof e===R?e.apply(e):e)+"</li>"}function I(e,t){var i,o,r,s="";return s+='<div class="bookletBuildings__section ',i=n.unless.call(e,(i=e&&e.infrastructureBlock,null==i||i===!1?i:i.showMap),{hash:{},inverse:D.noop,fn:D.program(24,y,t),data:t}),(i||0===i)&&(s+=i),s+='"><h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner">'+N((o=n._gg||e&&e._gg,r={hash:{},data:t},o?o.call(e,"Способы покупки",r):B.call(e,"_gg","Способы покупки",r))),i=D.invokePartial(a.editIcon,"editIcon",e,n,a,t),(i||0===i)&&(s+=i),s+='</span></h2><div class="bookletBuildings__banksList bookletBuildings__grid _size_mini">',i=n.each.call(e,e&&e.firstBanks,{hash:{},inverse:D.noop,fn:D.programWithDepth(37,T,t,e),data:t}),(i||0===i)&&(s+=i),s+='</div><p class="bookletBuildings__overall"><a href="http://',(o=n.mapsDomain)?i=o.call(e,{hash:{},data:t}):(o=e&&e.mapsDomain,i=typeof o===R?o.call(e,{hash:{},data:t}):o),s+=N(i)+"/",(o=n.bookletCode)?i=o.call(e,{hash:{},data:t}):(o=e&&e.bookletCode,i=typeof o===R?o.call(e,{hash:{},data:t}):o),s+=N(i)+'/page/buy" data-page="buy" class="bookletBuildings__link bookletBuildings__subpage">'+N((o=n._gg||e&&e._gg,r={hash:{},data:t},o?o.call(e,"все способы покупки",r):B.call(e,"_gg","все способы покупки",r)))+"</a></p></div>"}function T(e,t,a){var i,o="";return o+='<div class="bookletBuildings__banksListItem bookletBuildings__gridCell _gridCell_'+N((i=a&&a.hypothecColumns,typeof i===R?i.apply(e):i))+'x1"><span data-id="'+N((i=e&&e.id,typeof i===R?i.apply(e):i))+'" title="'+N((i=e&&e.name,typeof i===R?i.apply(e):i))+'" class="bookletBuildings__bankItem _responsive bookletBuildings__link"><img src="'+N((i=e&&e.logo,i=null==i||i===!1?i:i.url,typeof i===R?i.apply(e):i))+'" alt="'+N((i=e&&e.name,typeof i===R?i.apply(e):i))+'" class="bookletBuildings__borderedImg ',i=n["if"].call(e,(i=e&&e.logo,null==i||i===!1?i:i.isDefault),{hash:{},inverse:D.noop,fn:D.program(38,S,t),data:t}),(i||0===i)&&(o+=i),o+='">',i=n["if"].call(e,(i=e&&e.logo,null==i||i===!1?i:i.isDefault),{hash:{},inverse:D.noop,fn:D.program(40,E,t),data:t}),(i||0===i)&&(o+=i),o+="</span></div>"}function S(e,t){return" bookletBuildings__bordered _dummy_img"}function E(e,t){var n,a="";return a+='<span class="bookletBuildings__bankItemTitle">'+N((n=e&&e.name,typeof n===R?n.apply(e):n))+"</span>"}function P(e,t){return"</div>"}function j(e,t){var i,o="";return o+='<div class="bookletBuildings__gridCell _gridCell_3x1">',i=D.invokePartial(a.infrastructureBlock,"infrastructureBlock",e,n,a,t),(i||0===i)&&(o+=i),o+="</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var M,A="",D=this,R="function",N=this.escapeExpression,B=n.helperMissing;return A+='<div class="bookletBuildings__page"><div class="bookletBuildings__grid"><div class="bookletBuildings__gridCell _gridCell_3x1">',M=n["if"].call(t,t&&t.isShortInfoAndPhoto,{hash:{},inverse:D.noop,fn:D.program(1,o,i),data:i}),(M||0===M)&&(A+=M),M=n["if"].call(t,t&&t.description,{hash:{},inverse:D.noop,fn:D.program(3,r,i),data:i}),(M||0===M)&&(A+=M),M=n["if"].call(t,t&&t.others,{hash:{},inverse:D.noop,fn:D.program(5,s,i),data:i}),(M||0===M)&&(A+=M),A+='</div><div class="bookletBuildings__gridCell _gridCell_3x',M=n["if"].call(t,(M=t&&t.infrastructureBlock,null==M||M===!1?M:M.showMap),{hash:{},inverse:D.program(9,c,i),fn:D.program(7,l,i),data:i}),(M||0===M)&&(A+=M),A+='">',M=n["if"].call(t,t&&t.isShortInfoWithoutPhoto,{hash:{},inverse:D.noop,fn:D.program(1,o,i),data:i}),(M||0===M)&&(A+=M),M=n["if"].call(t,t&&t.aboutPhotos,{hash:{},inverse:D.noop,fn:D.program(11,u,i),data:i}),(M||0===M)&&(A+=M),M=n.unless.call(t,(M=t&&t.infrastructureBlock,null==M||M===!1?M:M.showMap),{hash:{},inverse:D.noop,fn:D.program(17,f,i),data:i}),(M||0===M)&&(A+=M),M=n["if"].call(t,t&&t.apartmentsBlock,{hash:{},inverse:D.program(22,_,i),fn:D.program(19,m,i),data:i}),(M||0===M)&&(A+=M),M=n["if"].call(t,t&&t.isHypothec,{hash:{},inverse:D.noop,fn:D.program(36,I,i),data:i}),(M||0===M)&&(A+=M),M=n.unless.call(t,(M=t&&t.infrastructureBlock,null==M||M===!1?M:M.showMap),{hash:{},inverse:D.noop,fn:D.program(42,P,i),data:i}),(M||0===M)&&(A+=M),A+="</div>",M=n["if"].call(t,(M=t&&t.infrastructureBlock,null==M||M===!1?M:M.showMap),{hash:{},inverse:D.noop,fn:D.program(44,j,i),data:i}),(M||0===M)&&(A+=M),A+="</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.apartments=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="bookletBuildings__gridCell _gridCell_3x1 bookletBuildings__apartmentsGroup"><h2 class="bookletBuildings__apartmentsGroupTitle">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=h(a)+'</h2><ul class="bookletBuildings__bullList">',a=n.each.call(e,e&&e.items,{hash:{},inverse:f.noop,fn:f.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+="</ul>",a=n["if"].call(e,e&&e.showMore,{hash:{},inverse:f.noop,fn:f.program(5,l,t),data:t}),(a||0===a)&&(o+=a),o+="</div>"}function r(e,t){var a,i,o,r="";return r+='<li class="bookletBuildings__bullListItem"><a href="',(i=n.link)?a=i.call(e,{hash:{},data:t}):(i=e&&e.link,a=typeof i===p?i.call(e,{hash:{},data:t}):i),r+=h(a)+'" target="_blank" class="bookletBuildings__link bookletBuildings__apartmentLink" data-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===p?i.call(e,{hash:{},data:t}):i),r+=h(a)+'" data-org="'+h((a=e&&e.firm,a=null==a||a===!1?a:a.name,typeof a===p?a.apply(e):a))+'">'+h((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"%1 м² за %2",e&&e.area,e&&e.price,o):d.call(e,"_gg","%1 м² за %2",e&&e.area,e&&e.price,o)))+'<span class="bookletBuildings__currency _link _'+h((a=e&&e.currency,a=null==a||a===!1?a:a.code,typeof a===p?a.apply(e):a))+'">'+h((a=e&&e.currency,a=null==a||a===!1?a:a.symbol,typeof a===p?a.apply(e):a))+"</span>",a=n["if"].call(e,e&&e.floor,{hash:{},inverse:f.noop,fn:f.program(3,s,t),data:t}),(a||0===a)&&(r+=a),r+="</a>&nbsp;– "+h((a=e&&e.firm,a=null==a||a===!1?a:a.name,typeof a===p?a.apply(e):a))+"</li>"}function s(e,t){var a,i,o="";return o+=", "+h((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"%1 этаж",e&&e.floor,i):d.call(e,"_gg","%1 этаж",e&&e.floor,i)))}function l(e,t){var a,i,o="";return o+='<p class="bookletBuildings__apartmentsGroupExpand"><span class="bookletBuildings__link bookletBuildings__apartmentsGroupExpandLink _underlineDashed bookletBuildings__icon _expand">'+h((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"все варианты",i):d.call(e,"_gg","все варианты",i)))+"</span></p>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u="",d=n.helperMissing,h=this.escapeExpression,p="function",f=this;return u+='<div class="bookletBuildings__page"><div class="bookletBuildings__grid bookletBuildings__apartmentsGroups">',c=n.each.call(t,t&&t.apartmentsGroups,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(c||0===c)&&(u+=c),u+="</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.buy=function(e,t,n,a,i){function o(e,t){var i,o="";return i=n["if"].call(e,e&&e.isPaymentTypes,{hash:{},inverse:E.noop,fn:E.program(2,r,t),data:t}),(i||0===i)&&(o+=i),o+='<div class="bookletBuildings__section"><h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner"><span class="bookletBuildings__icon _creditCard"></span>'+T((i=e&&e.hypothec,
i=null==i||i===!1?i:i.name,typeof i===I?i.apply(e):i)),i=E.invokePartial(a.editIcon,"editIcon",e,n,a,t),(i||0===i)&&(o+=i),o+='</span></h2><div class="bookletBuildings__grid _banks_state _collapsed bookletBuildings__gridCollapsed"><div class="bookletBuildings__gridCell _gridCell_2x1"><p class="bookletBuildings__paragraph">',i=e&&e.hypothec,i=null==i||i===!1?i:i.description,i=typeof i===I?i.apply(e):i,(i||0===i)&&(o+=i),o+="</p></div>",i=n.each.call(e,(i=e&&e.hypothec,null==i||i===!1?i:i.banks),{hash:{},inverse:E.noop,fn:E.program(4,s,t),data:t}),(i||0===i)&&(o+=i),i=n["if"].call(e,e&&e.showMoreBanks,{hash:{},inverse:E.noop,fn:E.program(16,f,t),data:t}),(i||0===i)&&(o+=i),o+="</div></div>",i=n["if"].call(e,e&&e.isPaymentTypes,{hash:{},inverse:E.noop,fn:E.program(18,m,t),data:t}),(i||0===i)&&(o+=i),i=n["if"].call(e,e&&e.installment,{hash:{},inverse:E.noop,fn:E.program(20,g,t),data:t}),(i||0===i)&&(o+=i),i=n["if"].call(e,e&&e.socialPrograms,{hash:{},inverse:E.noop,fn:E.program(22,_,t),data:t}),(i||0===i)&&(o+=i),i=n["if"].call(e,e&&e.tradein,{hash:{},inverse:E.noop,fn:E.program(24,v,t),data:t}),(i||0===i)&&(o+=i),i=n["if"].call(e,e&&e.isPaymentTypes,{hash:{},inverse:E.noop,fn:E.program(26,y,t),data:t}),(i||0===i)&&(o+=i),o}function r(e,t){return'<div class="bookletBuildings__grid"><div class="bookletBuildings__gridCell _gridCell_3x2">'}function s(e,t){var a,i="";return i+='<div class="bookletBuildings__gridCell _gridCell_2x1 bookletBuildings__buyItem"><div class="bookletBuildings__buy"><div class="bookletBuildings__buyWrap"><span data-id="'+T((a=e&&e.id,typeof a===I?a.apply(e):a))+'" title="'+T((a=e&&e.name,typeof a===I?a.apply(e):a))+'" class="bookletBuildings__bankItem bookletBuildings__link _bordered"><img src="'+T((a=e&&e.logo,a=null==a||a===!1?a:a.url,typeof a===I?a.apply(e):a))+'" alt="'+T((a=e&&e.name,typeof a===I?a.apply(e):a))+'" class="bookletBuildings__borderedImg ',a=n["if"].call(e,(a=e&&e.logo,null==a||a===!1?a:a.isDefault),{hash:{},inverse:E.noop,fn:E.program(5,l,t),data:t}),(a||0===a)&&(i+=a),i+='">',a=n["if"].call(e,(a=e&&e.logo,null==a||a===!1?a:a.isDefault),{hash:{},inverse:E.noop,fn:E.program(7,c,t),data:t}),(a||0===a)&&(i+=a),i+='</span></div><div class="bookletBuildings__buyInfo">',a=n["if"].call(e,e&&e.isPercentAndTerm,{hash:{},inverse:E.program(14,p,t),fn:E.program(9,u,t),data:t}),(a||0===a)&&(i+=a),i+="</div></div></div>"}function l(e,t){return" _dummy_img"}function c(e,t){var n,a="";return a+='<span class="bookletBuildings__bankItemTitle">'+T((n=e&&e.name,typeof n===I?n.apply(e):n))+"</span>"}function u(e,t){var a,i,o,r="";return r+='<div class="bookletBuildings__buyInfoLine _textBlock"><div class="bookletBuildings__buyInner"><span class="bookletBuildings__buyNum">'+T((a=e&&e.term,typeof a===I?a.apply(e):a))+'<span class="bookletBuildings__buyText">'+T((i=n._ngg||e&&e._ngg,o={hash:{},data:t},i?i.call(e,"год","года","лет",e&&e.term,o):S.call(e,"_ngg","год","года","лет",e&&e.term,o)))+'</span></span></div><span class="bookletBuildings__buyInfoText">'+T((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Макс. срок кредитования",o):S.call(e,"_gg","Макс. срок кредитования",o)))+'</span></div><div class="bookletBuildings__buyInfoLine _textBlock"><div class="bookletBuildings__buyInner">',a=n["if"].call(e,e&&e.separator,{hash:{},inverse:E.program(12,h,t),fn:E.program(10,d,t),data:t}),(a||0===a)&&(r+=a),r+='</div><span class="bookletBuildings__buyInfoText">'+T((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Процентная ставка",o):S.call(e,"_gg","Процентная ставка",o)))+"</span></div>"}function d(e,t){var a,i,o="";return o+='<span class="bookletBuildings__buyNum">'+T((a=e&&e.sepBefore,typeof a===I?a.apply(e):a))+'<small class="bookletBuildings__buyFloat">,',(i=n.sepAfter)?a=i.call(e,{hash:{},data:t}):(i=e&&e.sepAfter,a=typeof i===I?i.call(e,{hash:{},data:t}):i),o+=T(a)+"</small></span>"}function h(e,t){var n,a="";return a+='<span class="bookletBuildings__buyNum">'+T((n=e&&e.percent,typeof n===I?n.apply(e):n))+'<span class="bookletBuildings__buyPercent">%</span></span>'}function p(e,t){var a,i,o="";return o+='<div class="bookletBuildings__buyInfoLine _textBlock"><div class="bookletBuildings__buyInner _type_gray"><i class="bookletBuildings__buyManager bookletBuildings__icon _balloon"></i></div><span class="bookletBuildings__buyInfoText _type_gray">'+T((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Подробности у менеджера",i):S.call(e,"_gg","Подробности у менеджера",i)))+"</span></div>"}function f(e,t){var a,i,o="";return o+='<div class="bookletBuildings__gridCell bookletBuildings__overall bookletBuildings__buyMore"><span class="bookletBuildings__link bookletBuildings__icon _expand _underlineDashed" data-action="showBanks">'+T((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Просмотреть все банки",i):S.call(e,"_gg","Просмотреть все банки",i)))+"</span></div>"}function m(e,t){return'</div><div class="bookletBuildings__gridCell _gridCell_3x1">'}function g(e,t){var i,o="";return i=E.invokePartial(a.installment,"installment",e,n,a,t),(i||0===i)&&(o+=i),o}function _(e,t){var i,o="";return i=E.invokePartial(a.social,"social",e,n,a,t),(i||0===i)&&(o+=i),o}function v(e,t){var i,o="";return i=E.invokePartial(a.tradein,"tradein",e,n,a,t),(i||0===i)&&(o+=i),o}function y(e,t){return"</div></div>"}function b(e,t){var a,i="";return i+='<div class="bookletBuildings__grid">',a=n["if"].call(e,e&&e.installment,{hash:{},inverse:E.noop,fn:E.program(29,k,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.socialPrograms,{hash:{},inverse:E.noop,fn:E.program(31,w,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.tradein,{hash:{},inverse:E.noop,fn:E.program(33,x,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function k(e,t){var i,o="";return o+='<div class="bookletBuildings__gridCell _gridCell_3x1">',i=E.invokePartial(a.installment,"installment",e,n,a,t),(i||0===i)&&(o+=i),o+="</div>"}function w(e,t){var i,o="";return o+='<div class="bookletBuildings__gridCell _gridCell_3x1">',i=E.invokePartial(a.social,"social",e,n,a,t),(i||0===i)&&(o+=i),o+="</div>"}function x(e,t){var i,o="";return o+='<div class="bookletBuildings__gridCell _gridCell_3x1">',i=E.invokePartial(a.tradein,"tradein",e,n,a,t),(i||0===i)&&(o+=i),o+="</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var C,L="",I="function",T=this.escapeExpression,S=n.helperMissing,E=this;return L+='<div class="bookletBuildings__page">',C=n["if"].call(t,t&&t.isHypothec,{hash:{},inverse:E.program(28,b,i),fn:E.program(1,o,i),data:i}),(C||0===C)&&(L+=C),L+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.docs=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n["if"].call(e,e&&e.thumb,{hash:{},inverse:f.program(5,l,t),fn:f.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var a,i,o="";return o+='<div class="bookletBuildings__gridCell _gridCell_3x1 _docsItem"><a href="',(i=n.original)?a=i.call(e,{hash:{},data:t}):(i=e&&e.original,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'" target="_blank" style="background-image: url(',(i=n.thumb)?a=i.call(e,{hash:{},data:t}):(i=e&&e.thumb,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+');" class="bookletBuildings__docs _type_large bookletBuildings__icon _',(i=n.extension)?a=i.call(e,{hash:{},data:t}):(i=e&&e.extension,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'Preview">',a=n["if"].call(e,e&&e.size,{hash:{},inverse:f.noop,fn:f.program(3,s,t),data:t}),(a||0===a)&&(o+=a),o+='</a><a class="bookletBuildings__link _type_large _linkText" href="',(i=n.original)?a=i.call(e,{hash:{},data:t}):(i=e&&e.original,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'" target="_blank" data-type="docsDownload">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</a></div>"}function s(e,t){var a,i,o="";return o+='<div class="bookletBuildings__docSize"><p class="bookletBuildings__docsIconDescr">',(i=n.extension)?a=i.call(e,{hash:{},data:t}):(i=e&&e.extension,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+", ",(i=n.shortSize)?a=i.call(e,{hash:{},data:t}):(i=e&&e.shortSize,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"&nbsp;",(i=n.dimension)?a=i.call(e,{hash:{},data:t}):(i=e&&e.dimension,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</p></div>"}function l(e,t){var i,o="";return i=f.invokePartial(a.docsItem,"docsItem",e,n,a,t),(i||0===i)&&(o+=i),o}function c(e,t){var a,i="";return i+='<hr class="bookletBuildings__docsLine">',a=n.each.call(e,e&&e.allOtherDocs,{hash:{},inverse:f.noop,fn:f.program(5,l,t),data:t}),(a||0===a)&&(i+=a),i}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var u,d="",h="function",p=this.escapeExpression,f=this;return d+='<div class="bookletBuildings__page"><div class="bookletBuildings__grid _albums_state">',u=n.each.call(t,t&&t.firstDocs,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(u||0===u)&&(d+=u),u=n["if"].call(t,t&&t.allOtherDocs,{hash:{},inverse:f.noop,fn:f.program(7,c,i),data:i}),(u||0===u)&&(d+=u),d+="</div>",u=f.invokePartial(a.editRow,"editRow",t,n,a,i),(u||0===u)&&(d+=u),d+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.infrastructure=function(e,t,n,a,i){function o(e,t){return"2"}function r(e,t){return"3"}function s(e,t){var a,i,o,r="";return r+='<div class="bookletBuildings__buildingInfoItem _floors"><span class="bookletBuildings__buildingInfoNumber">'+M((a=e&&e.shortInfo,a=null==a||a===!1?a:a.maxFloors,typeof a===j?a.apply(e):a))+'</span><span class="bookletBuildings__buildingInfoLabel">'+M((i=n._ngg||e&&e._ngg,o={hash:{},data:t},i?i.call(e,"Этаж","Этажа","Этажей",(a=e&&e.shortInfo,null==a||a===!1?a:a.maxFloors),o):A.call(e,"_ngg","Этаж","Этажа","Этажей",(a=e&&e.shortInfo,null==a||a===!1?a:a.maxFloors),o)))+"</span></div>"}function l(e,t){var a,i,o,r="";return r+='<div class="bookletBuildings__buildingInfoItem _flats"><span class="bookletBuildings__buildingInfoNumber">'+M((a=e&&e.infrastructure,a=null==a||a===!1?a:a.flatsNumber,typeof a===j?a.apply(e):a))+'</span><span class="bookletBuildings__buildingInfoLabel">'+M((i=n._ngg||e&&e._ngg,o={hash:{},data:t},i?i.call(e,"Квартира","Квартиры","Квартир",(a=e&&e.infrastructure,null==a||a===!1?a:a.flatsNumber),o):A.call(e,"_ngg","Квартира","Квартиры","Квартир",(a=e&&e.infrastructure,null==a||a===!1?a:a.flatsNumber),o)))+"</span></div>"}function c(e,t){var n,a="";return a+='<div class="bookletBuildings__buildingInfoItem _houseType"><span class="bookletBuildings__icon _'+M((n=e&&e.infrastructure,n=null==n||n===!1?n:n.houseType,n=null==n||n===!1?n:n.icon,typeof n===j?n.apply(e):n))+'"></span><span class="bookletBuildings__buildingInfoLabel">'+M((n=e&&e.infrastructure,n=null==n||n===!1?n:n.houseType,n=null==n||n===!1?n:n.title,typeof n===j?n.apply(e):n))+"</span></div>"}function u(e,t){var a,i,o,r="";return r+='<div class="bookletBuildings__buildingInfoItem _release"><span class="bookletBuildings__icon _calendarRelease"></span><span class="bookletBuildings__buildingInfoLabel">'+M((a=e&&e.shortInfo,a=null==a||a===!1?a:a.startQuarter,typeof a===j?a.apply(e):a))+"&nbsp;"+M((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"кв.",o):A.call(e,"_gg","кв.",o)))+"&nbsp;20"+M((a=e&&e.shortInfo,a=null==a||a===!1?a:a.startYear,typeof a===j?a.apply(e):a))+M((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"г.",o):A.call(e,"_gg","г.",o)))+" -<br>"+M((a=e&&e.shortInfo,a=null==a||a===!1?a:a.releaseQuarter,typeof a===j?a.apply(e):a))+"&nbsp;"+M((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"кв.",o):A.call(e,"_gg","кв.",o)))+"&nbsp;20"+M((a=e&&e.shortInfo,a=null==a||a===!1?a:a.releaseYear,typeof a===j?a.apply(e):a))+M((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"г.",o):A.call(e,"_gg","г.",o)))+"</span></div>"}function d(e,t){var a,i="";return i+='<div class="bookletBuildings__buildingInfoItem _renovation"><span class="bookletBuildings__icon _repairSelf"></span><ul class="bookletBuildings__bullList bookletBuildings__buildingInfoLabel">',a=n.each.call(e,(a=e&&e.infrastructure,null==a||a===!1?a:a.furnishTypes),{hash:{},inverse:D.noop,fn:D.program(14,h,t),data:t}),(a||0===a)&&(i+=a),i+="</ul></div>"}function h(e,t){var a,i,o="";return o+='<li class="bookletBuildings__bullListItem">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===j?i.call(e,{hash:{},data:t}):i),o+=M(a)+"</li>"}function p(e,t){var i,o="";return o+='<div class="bookletBuildings__section"><div class="bookletBuildings__sectionWidget"><div class="bookletBuildings__overlay _type_photo"><span class="bookletBuildings__icon _camera"></span>\n                                        &nbsp;'+M((i=e&&e.infrastructure,i=null==i||i===!1?i:i.photoWidget,i=null==i||i===!1?i:i.count,typeof i===j?i.apply(e):i)),i=D.invokePartial(a.editIcon,"editIcon",e,n,a,t),(i||0===i)&&(o+=i),o+='</div><div class="bookletBuildings__widgetGrid">',i=n["if"].call(e,(i=e&&e.infrastructure,i=null==i||i===!1?i:i.photoWidget,null==i||i===!1?i:i.small),{hash:{},inverse:D.program(20,g,t),fn:D.program(17,f,t),data:t}),(i||0===i)&&(o+=i),o+="</div></div></div>"}function f(e,t){var a,i="";return i+='<div class="bookletBuildings__widgetGridCell _gridCell_3x2">',a=n["with"].call(e,(a=e&&e.infrastructure,a=null==a||a===!1?a:a.photoWidget,null==a||a===!1?a:a.big),{hash:{},inverse:D.noop,fn:D.program(18,m,t),data:t}),(a||0===a)&&(i+=a),i+='</div><div class="bookletBuildings__widgetGridCell _gridCell_3x1">',a=n.each.call(e,(a=e&&e.infrastructure,a=null==a||a===!1?a:a.photoWidget,null==a||a===!1?a:a.small),{hash:{},inverse:D.noop,fn:D.program(18,m,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function m(e,t){var i,o="";return i=D.invokePartial(a.photo,"photo",e,n,a,t),(i||0===i)&&(o+=i),o}function g(e,t){var a,i="";return a=n["with"].call(e,(a=e&&e.infrastructure,a=null==a||a===!1?a:a.photoWidget,null==a||a===!1?a:a.big),{hash:{},inverse:D.noop,fn:D.program(18,m,t),data:t}),(a||0===a)&&(i+=a),i}function _(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.infrastructure,null==a||a===!1?a:a.features),{hash:{},inverse:D.program(25,y,t),fn:D.program(23,v,t),data:t}),(a||0===a)&&(i+=a),i}function v(e,t){var i,o="";return i=D.invokePartial(a.features,"features",e,n,a,t),(i||0===i)&&(o+=i),o}function y(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.infrastructure,null==a||a===!1?a:a.landscaping),{hash:{},inverse:D.noop,fn:D.program(26,b,t),data:t}),(a||0===a)&&(i+=a),i}function b(e,t){var n,a="";return a+=M((n=e&&e.infrastructure,n=null==n||n===!1?n:n.landscaping,typeof n===j?n.apply(e):n))}function k(e,t){var i,o,r,s="";return s+='<div class="bookletBuildings__section"><h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner">'+M((o=n._gg||e&&e._gg,r={hash:{},data:t},o?o.call(e,"Благоустройство",r):A.call(e,"_gg","Благоустройство",r))),i=D.invokePartial(a.editIcon,"editIcon",e,n,a,t),(i||0===i)&&(s+=i),s+='</span></h2><div class="bookletBuildings__grid">',i=n["if"].call(e,(i=e&&e.infrastructure,null==i||i===!1?i:i.landscaping),{hash:{},inverse:D.noop,fn:D.program(29,w,t),data:t}),(i||0===i)&&(s+=i),i=n["if"].call(e,(i=e&&e.infrastructure,null==i||i===!1?i:i.features),{hash:{},inverse:D.noop,fn:D.program(32,C,t),data:t}),(i||0===i)&&(s+=i),s+="</div></div>"}function w(e,t){var a,i="";return i+='<div class="bookletBuildings__gridCell _gridCell_2x',a=n["if"].call(e,(a=e&&e.infrastructure,null==a||a===!1?a:a.features),{hash:{},inverse:D.program(1,o,t),fn:D.program(30,x,t),data:t}),(a||0===a)&&(i+=a),i+='"><p class="bookletBuildings__paragraph">',a=e&&e.infrastructure,a=null==a||a===!1?a:a.landscaping,a=typeof a===j?a.apply(e):a,(a||0===a)&&(i+=a),i+="</p></div>"}function x(e,t){return"1"}function C(e,t){var i,r="";return r+='<div class="bookletBuildings__gridCell _gridCell_2x',i=n["if"].call(e,(i=e&&e.infrastructure,null==i||i===!1?i:i.landscaping),{hash:{},inverse:D.program(1,o,t),fn:D.program(30,x,t),data:t}),(i||0===i)&&(r+=i),r+='">',i=D.invokePartial(a.features,"features",e,n,a,t),(i||0===i)&&(r+=i),r+="</div>"}function L(e,t){var i,o="";return o+='<div class="bookletBuildings__gridCell _gridCell_3x1">',i=D.invokePartial(a.infrastructureBlock,"infrastructureBlock",e,n,a,t),(i||0===i)&&(o+=i),o+="</div>"}function I(e,t){var i,r,s,l="";return l+='<div class="bookletBuildings__section"><h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner">'+M((r=n._gg||e&&e._gg,s={hash:{},data:t},r?r.call(e,"Благоустройство",s):A.call(e,"_gg","Благоустройство",s))),i=D.invokePartial(a.editIcon,"editIcon",e,n,a,t),(i||0===i)&&(l+=i),l+='</span></h2><div class="bookletBuildings__grid"><div class="bookletBuildings__gridCell _gridCell_2x',i=n["if"].call(e,(i=e&&e.infrastructure,i=null==i||i===!1?i:i.landscaping,null==i||i===!1?i:i.features),{hash:{},inverse:D.program(1,o,t),fn:D.program(30,x,t),data:t}),(i||0===i)&&(l+=i),l+='"><p class="bookletBuildings__paragraph">',i=e&&e.infrastructure,i=null==i||i===!1?i:i.landscaping,i=typeof i===j?i.apply(e):i,(i||0===i)&&(l+=i),l+="</p></div></div></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var T,S,E,P="",j="function",M=this.escapeExpression,A=n.helperMissing,D=this;return P+='<div class="bookletBuildings__page"><div class="bookletBuildings__grid"><div class="bookletBuildings__gridCell _gridCell_3x',T=n["if"].call(t,(T=t&&t.infrastructureBlock,null==T||T===!1?T:T.showMap),{hash:{},inverse:D.program(3,r,i),fn:D.program(1,o,i),data:i}),(T||0===T)&&(P+=T),P+='"><div class="bookletBuildings__section"><h2 class="bookletBuildings__sectionTitle"><span class="bookletBuildings__sectionTitleInner">'+M((S=n._gg||t&&t._gg,E={hash:{},data:i},S?S.call(t,"Информация о доме",E):A.call(t,"_gg","Информация о доме",E))),T=D.invokePartial(a.editIcon,"editIcon",t,n,a,i),(T||0===T)&&(P+=T),P+='</span></h2><div class="bookletBuildings__grid _banks_state"><div class="bookletBuildings__gridCell _gridCell_2x1"><div class="bookletBuildings__buildingInfo">',T=n["if"].call(t,(T=t&&t.shortInfo,null==T||T===!1?T:T.maxFloors),{hash:{},inverse:D.noop,fn:D.program(5,s,i),data:i}),(T||0===T)&&(P+=T),T=n["if"].call(t,(T=t&&t.infrastructure,null==T||T===!1?T:T.flatsNumber),{hash:{},inverse:D.noop,fn:D.program(7,l,i),data:i}),(T||0===T)&&(P+=T),P+='<div class="bookletBuildings__buildingInfoDetails">',T=n["if"].call(t,(T=t&&t.infrastructure,null==T||T===!1?T:T.houseType),{hash:{},inverse:D.noop,fn:D.program(9,c,i),data:i}),(T||0===T)&&(P+=T),T=n.unless.call(t,(T=t&&t.shortInfo,null==T||T===!1?T:T.finished),{hash:{},inverse:D.noop,fn:D.program(11,u,i),data:i}),(T||0===T)&&(P+=T),T=n["if"].call(t,(T=t&&t.infrastructure,null==T||T===!1?T:T.furnishTypes),{hash:{},inverse:D.noop,fn:D.program(13,d,i),data:i}),(T||0===T)&&(P+=T),P+='</div></div></div><div class="bookletBuildings__gridCell _gridCell_2x1">',T=n["if"].call(t,(T=t&&t.infrastructure,null==T||T===!1?T:T.photoWidget),{hash:{},inverse:D.program(22,_,i),fn:D.program(16,p,i),data:i}),(T||0===T)&&(P+=T),P+="</div></div></div>",T=n["if"].call(t,(T=t&&t.infrastructure,null==T||T===!1?T:T.featuresAtTheBottom),{hash:{},inverse:D.noop,fn:D.program(28,k,i),data:i}),(T||0===T)&&(P+=T),P+="</div>",T=n["if"].call(t,(T=t&&t.infrastructureBlock,null==T||T===!1?T:T.showMap),{hash:{},inverse:D.noop,fn:D.program(34,L,i),data:i}),(T||0===T)&&(P+=T),P+="</div>",T=n["if"].call(t,(T=t&&t.infrastructure,null==T||T===!1?T:T.featuresAtTheTop),{hash:{},inverse:D.noop,fn:D.program(36,I,i),data:i}),(T||0===T)&&(P+=T),P+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.layouts=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<form class="bookletBuildings__filters"><ul class="bookletBuildings__grid"><li class="bookletBuildings__gridCell _gridCell_3x1"><div class="bookletBuildings__filtersBlock _realty_type_block"><div class="bookletBuildings__filtersGroup bookletBuildings__filtersRadiobuttonGroup"><div class="bookletBuildings__filtersGroupWidgets">',a=n.each.call(e,(a=e&&e.apartmentLayouts,a=null==a||a===!1?a:a.filters,null==a||a===!1?a:a.realtyFilters),{hash:{},inverse:b.noop,fn:b.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+='</div></div></div><div class="bookletBuildings__filtersBlock _flat_type_block"><div class="bookletBuildings__filtersGroup bookletBuildings__filtersButtonGroup"><div class="bookletBuildings__filtersGroupWidgets">',a=n.each.call(e,(a=e&&e.apartmentLayouts,a=null==a||a===!1?a:a.filters,null==a||a===!1?a:a.flatFilters),{hash:{},inverse:b.noop,fn:b.program(7,c,t),data:t}),(a||0===a)&&(i+=a),i+="</div></div></div></li>",a=n["if"].call(e,(a=e&&e.apartmentLayouts,null==a||a===!1?a:a.minArea),{hash:{},inverse:b.noop,fn:b.program(9,u,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.apartmentLayouts,null==a||a===!1?a:a.minPrice),{hash:{},inverse:b.noop,fn:b.program(11,d,t),data:t}),(a||0===a)&&(i+=a),i+="</ul></form>"}function r(e,t){var a,i,o="";return o+='<input\n                                        id="filters_widget_realty_type_'+y((a=null==t||t===!1?t:t.index,typeof a===v?a.apply(e):a))+'"\n                                        class="bookletBuildings__filtersRadio bookletBuildings__filtersRealtyFlatType',a=n["if"].call(e,e&&e.disabled,{hash:{},inverse:b.noop,fn:b.program(3,s,t),data:t}),(a||0===a)&&(o+=a),o+='"\n                                        type="radio"\n                                        value="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===v?i.call(e,{hash:{},data:t}):i),o+=y(a)+'"\n                                        name="realty_flat_type"\n                                        data-filter="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===v?i.call(e,{hash:{},data:t}):i),o+=y(a)+'"\n                                        ',a=n["if"].call(e,e&&e.disabled,{hash:{},inverse:b.noop,fn:b.program(5,l,t),data:t}),(a||0===a)&&(o+=a),o+='><label for="filters_widget_realty_type_'+y((a=null==t||t===!1?t:t.index,typeof a===v?a.apply(e):a))+'" class="bookletBuildings__filtersButton">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===v?i.call(e,{hash:{},data:t}):i),o+=y(a)+"</label>"}function s(e,t){return" _filter_disabled"}function l(e,t){return"disabled"}function c(e,t){var a,i,o="";return o+='<input\n                                        id="filters_widget_realty_flat_type_'+y((a=null==t||t===!1?t:t.index,typeof a===v?a.apply(e):a))+'"\n                                        class="bookletBuildings__filtersCheckbox bookletBuildings__filtersRealtyFlatType\n                                        ',a=n["if"].call(e,e&&e.disabled,{hash:{},inverse:b.noop,fn:b.program(3,s,t),data:t}),(a||0===a)&&(o+=a),o+='"\n                                        type="checkbox"\n                                        value="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===v?i.call(e,{hash:{},data:t}):i),o+=y(a)+'"\n                                        name="realty_flat_type"\n                                        data-filter="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===v?i.call(e,{hash:{},data:t}):i),o+=y(a)+'"\n                                        ',a=n["if"].call(e,e&&e.disabled,{hash:{},inverse:b.noop,fn:b.program(5,l,t),data:t}),(a||0===a)&&(o+=a),o+='><label for="filters_widget_realty_flat_type_'+y((a=null==t||t===!1?t:t.index,typeof a===v?a.apply(e):a))+'" class="bookletBuildings__filtersButton">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===v?i.call(e,{hash:{},data:t}):i),o+=y(a)+"</label>"}function u(e,t){var a,i,o,r="";return r+='<li class="bookletBuildings__gridCell _gridCell_3x1"><div class="bookletBuildings__filterArea bookletBuildings__filtersBlock"><div class="bookletBuildings__filtersGroup"><div class="bookletBuildings__filtersGroupWidgets"><div class="bookletBuildings__filtersRaderDescription"><span class="bookletBuildings__filtersRaderLimit">'+y((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Площадь от ",o):k.call(e,"_gg","Площадь от ",o)))+'<span class="bookletBuildings__filterAreaMin bookletBuildings__filtersRaderLimitValue" data-runner="minArea">'+y((a=e&&e.apartmentLayouts,a=null==a||a===!1?a:a.minArea,typeof a===v?a.apply(e):a))+"</span>"+y((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e," до ",o):k.call(e,"_gg"," до ",o)))+'<span class="bookletBuildings__filterAreaMax bookletBuildings__filtersRaderLimitValue" data-runner="maxArea">'+y((a=e&&e.apartmentLayouts,a=null==a||a===!1?a:a.maxArea,typeof a===v?a.apply(e):a))+"</span>"+y((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e," м",o):k.call(e,"_gg"," м",o)))+'<sup class="bookletBuildings__filtersSup">&#178;</sup></span></div><div class="bookletBuildings__filtersRader"><div class="bookletBuildings__filtersRaderTrack _enabled"><div class="bookletBuildings__filtersRaderTrackActive"></div><div class="bookletBuildings__filtersRaderRunner _pos_left" data-label="minArea"></div><div class="bookletBuildings__filtersRaderRunner _pos_right" data-label="maxArea"></div></div></div></div></div></div></li>'}function d(e,t){var a,i,o,r="";return r+='<li class="bookletBuildings__gridCell _gridCell_3x1"><div class="bookletBuildings__filterPrice bookletBuildings__filtersBlock"><div class="bookletBuildings__filtersGroup"><div class="bookletBuildings__filtersGroupWidgets"><div class="bookletBuildings__filtersRaderDescription"><span class="bookletBuildings__filtersRaderLimit">'+y((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Цена от ",o):k.call(e,"_gg","Цена от ",o)))+'<span class="bookletBuildings__filterPriceMin bookletBuildings__filtersRaderLimitValue _value_min" data-runner="minPrice">'+y((a=e&&e.apartmentLayouts,a=null==a||a===!1?a:a.minPrice,typeof a===v?a.apply(e):a))+"</span>"+y((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e," до ",o):k.call(e,"_gg"," до ",o)))+'<span class="bookletBuildings__filterPriceMax  bookletBuildings__filtersRaderLimitValue _value_max" data-runner="maxPrice">'+y((a=e&&e.apartmentLayouts,a=null==a||a===!1?a:a.maxPrice,typeof a===v?a.apply(e):a))+'</span><div class="bookletBuildings__filtersCurrency">'+y((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e," тыс. ",o):k.call(e,"_gg"," тыс. ",o)))+'<span class="bookletBuildings__currency _'+y((a=e&&e.apartmentLayouts,a=null==a||a===!1?a:a.currency,a=null==a||a===!1?a:a.code,typeof a===v?a.apply(e):a))+'">'+y((a=e&&e.apartmentLayouts,a=null==a||a===!1?a:a.currency,a=null==a||a===!1?a:a.symbol,typeof a===v?a.apply(e):a))+'</span></div></span></div><div class="bookletBuildings__filtersRader"><div class="bookletBuildings__filtersRaderTrack _enabled"><div class="bookletBuildings__filtersRaderTrackActive"></div><div class="bookletBuildings__filtersRaderRunner _pos_left" data-label="minPrice"></div><div class="bookletBuildings__filtersRaderRunner _pos_right" data-label="maxPrice"></div></div></div></div></div></div></li>'}function h(e,t){var a,i="";return a=n.each.call(e,(a=e&&e.apartmentLayouts,null==a||a===!1?a:a.albums),{hash:{},inverse:b.noop,fn:b.program(14,p,t),data:t}),(a||0===a)&&(i+=a),i}function p(e,t){var i,o="";return i=b.invokePartial(a.album,"album",e,n,a,t),(i||0===i)&&(o+=i),o}function f(e,t){var a,i="";return i+='<div class="bookletBuildings__grid _albums_state">',a=n.each.call(e,(a=e&&e.apartmentLayouts,null==a||a===!1?a:a.albums),{hash:{},inverse:b.noop,fn:b.program(17,m,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function m(e,t){var i,o="";return o+='<div class="bookletBuildings__gridCell _gridCell_3x1"><div class="bookletBuildings__plan">',i=b.invokePartial(a.albumThumbnail,"albumThumbnail",e,n,a,t),(i||0===i)&&(o+=i),i=b.invokePartial(a.layoutInfo,"layoutInfo",e,n,a,t),(i||0===i)&&(o+=i),o+="</div></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var g,_="",v="function",y=this.escapeExpression,b=this,k=n.helperMissing;return _+='<div class="bookletBuildings__page bookletBuildings__layouts">',g=n["if"].call(t,(g=t&&t.apartmentLayouts,null==g||g===!1?g:g.filters),{hash:{},inverse:b.noop,fn:b.program(1,o,i),data:i}),(g||0===g)&&(_+=g),_+='<div class="bookletBuildings__albumsList">',g=n["if"].call(t,(g=t&&t.apartmentLayouts,null==g||g===!1?g:g.oneAlbum),{hash:{},inverse:b.program(16,f,i),fn:b.program(13,h,i),data:i}),(g||0===g)&&(_+=g),_+="</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.progress=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n.each.call(e,(a=e&&e.progress,null==a||a===!1?a:a.albums),{hash:{},inverse:d.noop,fn:d.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var i,o="";return i=d.invokePartial(a.album,"album",e,n,a,t),(i||0===i)&&(o+=i),o}function s(e,t){var a,i="";return i+='<div class="bookletBuildings__grid _albums_state">',a=n.each.call(e,(a=e&&e.progress,null==a||a===!1?a:a.albums),{hash:{},inverse:d.noop,fn:d.program(5,l,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function l(e,t){var i,o="";return o+='<div class="bookletBuildings__cropWrap bookletBuildings__gridCell _gridCell_3x1">',i=d.invokePartial(a.albumThumbnail,"albumThumbnail",e,n,a,t),(i||0===i)&&(o+=i),o+="</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var c,u="",d=this;return u+='<div class="bookletBuildings__page bookletBuildings__progress">',c=n["if"].call(t,(c=t&&t.progress,null==c||c===!1?c:c.oneAlbum),{hash:{},inverse:d.program(4,s,i),fn:d.program(1,o,i),data:i}),(c||0===c)&&(u+=c),u+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletBuildings=this.jst_modules.bookletBuildings||{},this.jst_modules.bookletBuildings.requestForm=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="bookletBuildings__request"><form class="bookletBuildings__requestForm" method="post"><div class="bookletBuildings__requestClipper"><div class="frame__controls"><div class="bookletBuildings__requestClose frame__controlsButton _close">'+c((o=n.Icon||t&&t.Icon,r={hash:{},data:i},o?o.call(t,"ui_close",r):l.call(t,"Icon","ui_close",r)))+'</div></div><div class="bookletBuildings__requestTitle"><i class="bookletBuildings__icon _callback"></i>'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Заявка на просмотр",r):l.call(t,"_gg","Заявка на просмотр",r)))+'</div><div class="bookletBuildings__requestRow"><input name="name" class="bookletBuildings__requestInput" type="text" placeholder="'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Имя",r):l.call(t,"_gg","Имя",r)))+'" autofocus autocomplete="off"></div><div class="bookletBuildings__requestRow"><input name="phone" class="bookletBuildings__requestInput bookletBuildings__requestInputPhone" maxlength="20" type="text" placeholder="'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Телефон",r):l.call(t,"_gg","Телефон",r)))+'" autocomplete="off"></div><div class="bookletBuildings__requestRow"><textarea name="wishes" class="bookletBuildings__requestTextarea" placeholder="'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Пожелания к просмотру",r):l.call(t,"_gg","Пожелания к просмотру",r)))+'"></textarea></div><div class="bookletBuildings__requestRow"><div class="bookletBuildings__requestTip">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Компания свяжется с вами в ближайшее время по указанному телефону.",r):l.call(t,"_gg","Компания свяжется с вами в ближайшее время по указанному телефону.",r)))+'</div></div><div class="bookletBuildings__requestRow"><input type="submit" value="'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Отправить заявку",r):l.call(t,"_gg","Отправить заявку",r)))+'" class="bookletBuildings__requestSubmit" disabled="disabled"></div></div><div class="track"><div class="track__bar"></div></div></form></div>';
},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletEditor=this.jst_modules.bookletEditor||{},this.jst_modules.bookletEditor.coverItem=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function",c=this.escapeExpression;return s+='<div class="bookletEditor__uploadListItem bookletEditor__coversListItem bookletEditor__gridCell _gridCell_3x1" data-url="',(r=n.url)?o=r.call(t,{hash:{},data:i}):(r=t&&t.url,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'"><div class="bookletEditor__icon bookletEditor__coversItem _itemIsByOwner"><div class="bookletEditor__preloader"></div><span class="bookletEditor__uploadItemDelete bookletEditor__icon _deleteIcon"></span><div class="bookletEditor__uploadListItemImage" style="background-image: url(',(r=n.url)?o=r.call(t,{hash:{},data:i}):(r=t&&t.url,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+')"></div></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletEditor=this.jst_modules.bookletEditor||{},this.jst_modules.bookletEditor.logoItem=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function",c=this.escapeExpression;return s+='<div class="bookletEditor__uploadListItem bookletEditor__logosListItem" data-url="',(r=n.url)?o=r.call(t,{hash:{},data:i}):(r=t&&t.url,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'"><div class="bookletEditor__logosItem _itemIsByOwner bookletEditor__icon"><div class="bookletEditor__preloader"></div><div class="bookletEditor__uploadListItemImage _logosImage" style="background-image: url(',(r=n.url)?o=r.call(t,{hash:{},data:i}):(r=t&&t.url,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+')"></div><span class="bookletEditor__uploadItemDelete bookletEditor__icon _deleteIcon"></span></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletHeader=this.jst_modules.bookletHeader||{},this.jst_modules.bookletHeader.buildingsNavigation=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<nav class="bookletHeader__navigation _view_menu"><div class="bookletHeader__navigationWrapper _type_',(i=n.templateName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.templateName,a=typeof i===u?i.call(e,{hash:{},data:t}):i),s+=d(a)+'"><ul class="bookletHeader__navigationList">',a=n.each.call(e,e&&e.menuItems,{hash:{},inverse:h.noop,fn:h.programWithDepth(2,r,t,e),data:t}),(a||0===a)&&(s+=a),a=n["if"].call(e,e&&e.emailForRequest,{hash:{},inverse:h.noop,fn:h.programWithDepth(5,l,t,e),data:t}),(a||0===a)&&(s+=a),s+="</ul></div>"+d((i=n.Track||e&&e.Track,o={hash:{"class":"bookletHeader__track _outerTrack _horizontalMenu"},data:t},i?i.call(e,o):p.call(e,"Track",o)))+"</nav>"}function r(e,t,a){var i,o,r="";return r+='<li class="bookletHeader__navigationItem _type_'+d((i=a&&a.templateName,typeof i===u?i.apply(e):i))+'"><a href="/booklet/'+d((i=a&&a.bookletCode,typeof i===u?i.apply(e):i))+"/page/",(o=n.id)?i=o.call(e,{hash:{},data:t}):(o=e&&e.id,i=typeof o===u?o.call(e,{hash:{},data:t}):o),r+=d(i)+'" class="bookletHeader__navigationLink',i=n["if"].call(e,e&&e.active,{hash:{},inverse:h.noop,fn:h.program(3,s,t),data:t}),(i||0===i)&&(r+=i),r+='" data-id="',(o=n.id)?i=o.call(e,{hash:{},data:t}):(o=e&&e.id,i=typeof o===u?o.call(e,{hash:{},data:t}):o),r+=d(i)+'">',(o=n.title)?i=o.call(e,{hash:{},data:t}):(o=e&&e.title,i=typeof o===u?o.call(e,{hash:{},data:t}):o),r+=d(i)+"</a></li>"}function s(e,t){return" _active"}function l(e,t,a){var i,o,r,s="";return s+='<li class="bookletHeader__navigationItem _type_'+d((i=a&&a.templateName,typeof i===u?i.apply(e):i))+'"><span class="bookletBuildings__sendRequest bookletHeader__actionLink bookletHeader__icon _callback">'+d((o=n._gg||a&&a._gg,r={hash:{},data:t},o?o.call(e,"Оставить заявку",r):p.call(e,"_gg","Оставить заявку",r)))+"</span></li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u="function",d=this.escapeExpression,h=this,p=n.helperMissing;return c=n.unless.call(t,t&&t.noNavigation,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),c||0===c?c:""},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletHeader=this.jst_modules.bookletHeader||{},this.jst_modules.bookletHeader.coverEditor=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<a href="',(i=n.widgetUrl)?a=i.call(e,{hash:{},data:t}):(i=e&&e.widgetUrl,a=typeof i===u?i.call(e,{hash:{},data:t}):i),r+=d(a)+'" target="_blank" class="bookletHeader__editBtn bookletHeader__editBooklet bookletHeader__tooltip" data-title="'+d((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Редактировать буклет",o):h.call(e,"_gg","Редактировать буклет",o)))+'"></a>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u="function",d=this.escapeExpression,h=n.helperMissing,p=this;return c+='<div class="bookletHeader__coverSandbox"><img src="',(s=n.activeImage)?r=s.call(t,{hash:{},data:i}):(s=t&&t.activeImage,r=typeof s===u?s.call(t,{hash:{},data:i}):s),c+=d(r)+'" class="bookletHeader__coverSandboxCover"><span class="bookletHeader__coverSandboxAdvice"><ins class="bookletHeader__icon _adviceIcon"></ins>'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Перетащите, чтобы поменять положение обложки",l):h.call(t,"_gg","Перетащите, чтобы поменять положение обложки",l)))+'</span><div class="bookletHeader__coverSandboxDragarea"></div></div><div class="bookletHeader__edit"><span data-action="showEdit" data-subpage="covers" class="bookletHeader__editBtn bookletHeader__coverEdit">'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Сменить обложку",l):h.call(t,"_gg","Сменить обложку",l)))+"</span>",r=n["if"].call(t,t&&t.widgetUrl,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+='</div><div class="bookletHeader__save"><span data-action="hideEdit" class="bookletHeader__editBtn _editPrimary bookletHeader__saveBtn">'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Сохранить изменения",l):h.call(t,"_gg","Сохранить изменения",l)))+'</span><div class="bookletHeader__saveOverlay">'+d((s=n.Preloader||t&&t.Preloader,l={hash:{"class":"bookletHeader__preloader _scheme_lighten _small _typeEditSave"},data:i},s?s.call(t,l):h.call(t,"Preloader",l)))+'</div></div><div class="bookletHeader__cancel"><span data-action="hideEdit" class="bookletHeader__editBtn bookletHeader__cancelBtn">'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Отменить",l):h.call(t,"_gg","Отменить",l)))+'</span><div class="bookletHeader__cancelOerlay">'+d((s=n.Preloader||t&&t.Preloader,l={hash:{"class":"bookletHeader__preloader _scheme_lighten _small _typeEditCancel"},data:i},s?s.call(t,l):h.call(t,"Preloader",l)))+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletHeader=this.jst_modules.bookletHeader||{},this.jst_modules.bookletHeader.editorNavigation=function(e,t,n,a,i){function o(e,t,a){var i,o,s="";return s+='<li class="bookletHeader__navigationItem"><a href="/'+d((i=a&&a.bookletCode,typeof i===u?i.apply(e):i))+"/page/",(o=n.name)?i=o.call(e,{hash:{},data:t}):(o=e&&e.name,i=typeof o===u?o.call(e,{hash:{},data:t}):o),s+=d(i)+'" data-type="editor" data-id="',(o=n.name)?i=o.call(e,{hash:{},data:t}):(o=e&&e.name,i=typeof o===u?o.call(e,{hash:{},data:t}):o),s+=d(i)+'" class="bookletHeader__navigationLink',i=n["if"].call(e,e&&e.active,{hash:{},inverse:h.noop,fn:h.program(2,r,t),data:t}),(i||0===i)&&(s+=i),s+=" _type_",(o=n.name)?i=o.call(e,{hash:{},data:t}):(o=e&&e.name,i=typeof o===u?o.call(e,{hash:{},data:t}):o),s+=d(i)+'">',(o=n.label)?i=o.call(e,{hash:{},data:t}):(o=e&&e.label,i=typeof o===u?o.call(e,{hash:{},data:t}):o),s+=d(i)+"</a></li>"}function r(e,t){return" _active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c="",u="function",d=this.escapeExpression,h=this;return c+='<nav class="bookletHeader__navigation _view_editor"><div class="bookletHeader__navigationWrapper _type_',(l=n.templateName)?s=l.call(t,{hash:{},data:i}):(l=t&&t.templateName,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+'"><ul class="bookletHeader__navigationList">',s=n.each.call(t,t&&t.editorMenuItems,{hash:{},inverse:h.noop,fn:h.programWithDepth(1,o,i,t),data:i}),(s||0===s)&&(c+=s),c+="</ul></div></nav>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletHeader=this.jst_modules.bookletHeader||{},this.jst_modules.bookletHeader.saunasNavigation=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<nav class="bookletHeader__navigation _view_menu"><div class="bookletHeader__navigationWrapper _type_',(i=n.templateName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.templateName,a=typeof i===u?i.call(e,{hash:{},data:t}):i),s+=d(a)+'"><ul class="bookletHeader__navigationList">',a=n.each.call(e,e&&e.menuItems,{hash:{},inverse:h.noop,fn:h.programWithDepth(2,r,t,e),data:t}),(a||0===a)&&(s+=a),s+='</ul><div class="bookletHeader__navigationDropdown _hidden"><span class="bookletHeader__navigationDropdownToggle _underlineDashed">'+d((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Остальные номера",o):p.call(e,"_gg","Остальные номера",o)))+'</span><ul class="bookletHeader__navigationDropdownList _collapsed">',a=n.each.call(e,e&&e.menuItems,{hash:{},inverse:h.noop,fn:h.programWithDepth(5,l,t,e),data:t}),(a||0===a)&&(s+=a),s+="</ul></div></div></nav>"}function r(e,t,a){var i,o,r="";return r+='<li class="bookletHeader__navigationItem"><a href="/booklet/'+d((i=a&&a.bookletId,typeof i===u?i.apply(e):i))+"/page/",(o=n.id)?i=o.call(e,{hash:{},data:t}):(o=e&&e.id,i=typeof o===u?o.call(e,{hash:{},data:t}):o),r+=d(i)+'" class="bookletHeader__navigationLink ',i=n["if"].call(e,e&&e.active,{hash:{},inverse:h.noop,fn:h.program(3,s,t),data:t}),(i||0===i)&&(r+=i),r+='" data-id="',(o=n.id)?i=o.call(e,{hash:{},data:t}):(o=e&&e.id,i=typeof o===u?o.call(e,{hash:{},data:t}):o),r+=d(i)+'">',(o=n.title)?i=o.call(e,{hash:{},data:t}):(o=e&&e.title,i=typeof o===u?o.call(e,{hash:{},data:t}):o),r+=d(i)+"</a></li>"}function s(e,t){return"_active"}function l(e,t,a){var i,o,r="";return r+='<li class="bookletHeader__navigationDropdownItem _hidden"><a href="/booklet/'+d((i=a&&a.bookletId,typeof i===u?i.apply(e):i))+"/page/",(o=n.id)?i=o.call(e,{hash:{},data:t}):(o=e&&e.id,i=typeof o===u?o.call(e,{hash:{},data:t}):o),r+=d(i)+'" class="bookletHeader__navigationDropdownLink ',i=n["if"].call(e,e&&e.active,{hash:{},inverse:h.noop,fn:h.program(3,s,t),data:t}),(i||0===i)&&(r+=i),r+='" data-id="',(o=n.id)?i=o.call(e,{hash:{},data:t}):(o=e&&e.id,i=typeof o===u?o.call(e,{hash:{},data:t}):o),r+=d(i)+'">',(o=n.title)?i=o.call(e,{hash:{},data:t}):(o=e&&e.title,i=typeof o===u?o.call(e,{hash:{},data:t}):o),r+=d(i)+"</a></li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u="function",d=this.escapeExpression,h=this,p=n.helperMissing;return c=n["if"].call(t,t&&t.menuItems,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),c||0===c?c:""},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletProviders=this.jst_modules.bookletProviders||{},this.jst_modules.bookletProviders.editor=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s=n.helperMissing,l=this.escapeExpression;return l((o=n.module||t&&t.module,r={hash:{},data:i},o?o.call(t,"bookletEditor",r):s.call(t,"module","bookletEditor",r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletProviders=this.jst_modules.bookletProviders||{},this.jst_modules.bookletProviders.filters=function(e,t,n,a,i){function o(e,t){var a,i,o,c="";return c+='<div class="bookletProviders__filters"><h2 class="bookletProviders__title _filters">'+p((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Выберите параметры",o):h.call(e,"_gg","Выберите параметры",o)))+"</h2>",a=n["if"].call(e,(a=e&&e.filters,null==a||a===!1?a:a.price),{hash:{},inverse:m.noop,fn:m.program(2,r,t),data:t}),(a||0===a)&&(c+=a),a=n["if"].call(e,(a=e&&e.filters,null==a||a===!1?a:a.speed),{hash:{},inverse:m.noop,fn:m.program(4,s,t),data:t}),(a||0===a)&&(c+=a),c+='</div><form class="bookletProviders__filtersButtons">',a=n.each.call(e,(a=e&&e.filters,null==a||a===!1?a:a.flags),{hash:{},inverse:m.noop,fn:m.program(6,l,t),data:t}),(a||0===a)&&(c+=a),c+="</form>"}function r(e,t){var a,i,o,r="";return r+='<div class="bookletProviders__filterContainer bookletProviders__filterPrice"><span class="bookletProviders__filterTitle">'+p((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Цена от",o):h.call(e,"_gg","Цена от",o)))+'&nbsp;<span class="bookletProviders__filterLabel bookletProviders__filterPriceMin" data-runner="priceMin">'+p((a=e&&e.filters,a=null==a||a===!1?a:a.price,a=null==a||a===!1?a:a.min,typeof a===f?a.apply(e):a))+"</span>&nbsp;"+p((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"до",o):h.call(e,"_gg","до",o)))+'&nbsp;<span class="bookletProviders__filterLabel bookletProviders__filterPriceMax" data-runner="priceMax">'+p((a=e&&e.filters,a=null==a||a===!1?a:a.price,a=null==a||a===!1?a:a.max,typeof a===f?a.apply(e):a))+"</span>&nbsp;"+p((a=e&&e.currency,a=null==a||a===!1?a:a.symbol,typeof a===f?a.apply(e):a))+p((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"/мес",o):h.call(e,"_gg","/мес",o)))+'</span><div class="bookletProviders__filterTrack"><div class="bookletProviders__filterTrackActive"></div><div class="bookletProviders__runner bookletProviders__runnerPosLeft" data-label="priceMin"></div><div class="bookletProviders__runner bookletProviders__runnerPosRight" data-label="priceMax"></div></div></div>'}function s(e,t){var a,i,o,r="";return r+='<div class="bookletProviders__filterContainer bookletProviders__filterSpeed"><span class="bookletProviders__filterTitle">'+p((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Скорость от",o):h.call(e,"_gg","Скорость от",o)))+'&nbsp;<span class="bookletProviders__filterLabel bookletProviders__filterSpeedMin" data-runner="speedMin">'+p((a=e&&e.filters,a=null==a||a===!1?a:a.speed,a=null==a||a===!1?a:a.min,typeof a===f?a.apply(e):a))+"</span>&nbsp;"+p((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"до",o):h.call(e,"_gg","до",o)))+'&nbsp;<span class="bookletProviders__filterLabel bookletProviders__filterSpeedMax" data-runner="speedMax">'+p((a=e&&e.filters,a=null==a||a===!1?a:a.speed,a=null==a||a===!1?a:a.max,typeof a===f?a.apply(e):a))+"</span>&nbsp;"+p((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Мбит/с",o):h.call(e,"_gg","Мбит/с",o)))+'</span><div class="bookletProviders__filterTrack"><div class="bookletProviders__filterTrackActive"></div><div class="bookletProviders__runner bookletProviders__runnerPosLeft" data-label="speedMin"></div><div class="bookletProviders__runner bookletProviders__runnerPosRight" data-label="speedMax"></div></div></div>'}function l(e,t){var a,i,o="";return o+='<input type="checkbox" name="'+p((a=null==t||t===!1?t:t.key,typeof a===f?a.apply(e):a))+'" id="'+p((a=null==t||t===!1?t:t.key,typeof a===f?a.apply(e):a))+'" class="bookletProviders__filterButtonInput"',a=n.unless.call(e,e&&e.activity,{hash:{},inverse:m.noop,fn:m.program(7,c,t),data:t}),(a||0===a)&&(o+=a),o+='><label for="'+p((a=null==t||t===!1?t:t.key,typeof a===f?a.apply(e):a))+'" class="bookletProviders__filterButton">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</label>"}function c(e,t){return" disabled"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h=n.helperMissing,p=this.escapeExpression,f="function",m=this;return u=n["if"].call(t,t&&t.filters,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(u||0===u)&&(d+=u),d},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletProviders=this.jst_modules.bookletProviders||{},this.jst_modules.bookletProviders.tariffs=function(e,t,n,a,i){function o(e,t){var a,i,o,c="";return c+='<div class="bookletProviders__tariffs ',a=n["if"].call(e,e&&e.compilation,{hash:{},inverse:I.noop,fn:I.program(2,r,t),data:t}),(a||0===a)&&(c+=a),c+='"><div class="bookletProviders__tariffsHead"><span class="bookletProviders__tariffsHeadCell _title">'+L((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Тарифы",o):T.call(e,"_gg","Тарифы",o)))+'<span class="bookletProviders__tariffsHeadCellRemark"> ('+L((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"для физических лиц",o):T.call(e,"_gg","для физических лиц",o)))+')</span></span><span class="bookletProviders__tariffsHeadCell _speed">'+L((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Мбит/сек",o):T.call(e,"_gg","Мбит/сек",o)))+'</span><span class="bookletProviders__tariffsHeadCell _tv">'+L((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"ТВ-каналы",o):T.call(e,"_gg","ТВ-каналы",o)))+'</span><span class="bookletProviders__tariffsHeadCell _price"><span class="bookletProviders__currency _'+L((a=e&&e.currency,a=null==a||a===!1?a:a.code,typeof a===C?a.apply(e):a))+'">'+L((a=e&&e.currency,a=null==a||a===!1?a:a.symbol,typeof a===C?a.apply(e):a))+"</span>"+L((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"/мес",o):T.call(e,"_gg","/мес",o)))+'</span></div><div class="bookletProviders__tariffsNotFound _hidden">'+L((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Нет тарифов, соответствующих выбранным фильтрам",o):T.call(e,"_gg","Нет тарифов, соответствующих выбранным фильтрам",o)))+'</div><div class="bookletProviders__tariffsList ',a=n["if"].call(e,e&&e.compilation,{hash:{},inverse:I.noop,fn:I.program(4,s,t),data:t}),(a||0===a)&&(c+=a),c+='">',a=n.each.call(e,e&&e.tariffs,{hash:{},inverse:I.noop,fn:I.program(6,l,t),data:t}),(a||0===a)&&(c+=a),c+="</div></div>"}function r(e,t){return"_aggregator"}function s(e,t){return"_compilation"}function l(e,t){var a,i,o,r="";return r+='<div class="bookletProviders__tariff',a=n["if"].call(e,e&&e.minimize,{hash:{},inverse:I.noop,fn:I.program(7,c,t),data:t}),(a||0===a)&&(r+=a),a=n.unless.call(e,e&&e.description,{hash:{},inverse:I.noop,fn:I.program(9,u,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,e&&e.compilation,{hash:{},inverse:I.noop,fn:I.program(11,d,t),data:t}),(a||0===a)&&(r+=a),r+='" data-tariff-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===C?i.call(e,{hash:{},data:t}):i),r+=L(a)+'">',a=n["if"].call(e,e&&e.compilation,{hash:{},inverse:I.noop,fn:I.program(13,h,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,e&&e.compilation,{hash:{},inverse:I.noop,fn:I.program(15,p,t),data:t}),(a||0===a)&&(r+=a),r+='<span class="bookletProviders__tariffCell _title"><span class="bookletProviders__tariffTitle">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===C?i.call(e,{hash:{},data:t}):i),r+=L(a)+'</span></span><span class="bookletProviders__tariffCell _speed"><i class="bookletProviders__tariffSpeedIcon bookletProviders__icon ',(i=n.speedIcon)?a=i.call(e,{hash:{},data:t}):(i=e&&e.speedIcon,a=typeof i===C?i.call(e,{hash:{},data:t}):i),r+=L(a)+'"></i><span class="bookletProviders__tariffSpeed">',(i=n.speed)?a=i.call(e,{hash:{},data:t}):(i=e&&e.speed,a=typeof i===C?i.call(e,{hash:{},data:t}):i),r+=L(a)+'</span></span><span class="bookletProviders__tariffCell _tv"><span class="bookletProviders__tariffTv">',a=n["if"].call(e,e&&e.tv,{hash:{},inverse:I.program(21,_,t),fn:I.program(19,g,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,e&&e.hd,{hash:{},inverse:I.noop,fn:I.program(23,v,t),data:t}),(a||0===a)&&(r+=a),r+='</span></span><span class="bookletProviders__tariffCell _price"><span class="bookletProviders__tariffPrice">',(i=n.price)?a=i.call(e,{hash:{},data:t}):(i=e&&e.price,a=typeof i===C?i.call(e,{hash:{},data:t}):i),r+=L(a)+'</span></span><span class="bookletProviders__tariffCell _purchase"><span class="bookletProviders__tariffPurchase">'+L((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Подключить",o):T.call(e,"_gg","Подключить",o)))+"</span></span>",a=n["if"].call(e,e&&e.description,{hash:{},inverse:I.noop,fn:I.program(25,y,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function c(e,t){return" _minimized"}function u(e,t){return" _empty"}function d(e,t){return" _compilation"}function h(e,t){return'<i class="bookletProviders__tariffMark bookletProviders__icon _star"></i>'}function p(e,t){var a,i="";return a=n["if"].call(e,e&&e.providerName,{hash:{},inverse:I.noop,fn:I.program(16,f,t),data:t}),(a||0===a)&&(i+=a),i}function f(e,t){var a,i,o="";return o+='<span class="bookletProviders__tariffProviderInfo">',a=n["if"].call(e,e&&e.providerLogo,{hash:{},inverse:I.noop,fn:I.program(17,m,t),data:t}),(a||0===a)&&(o+=a),o+='<span class="bookletProviders__tariffProviderName">',(i=n.providerName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.providerName,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+"</span></span>"}function m(e,t){var a,i,o="";return o+="<i style=\"background-image: url('",(i=n.providerLogo)?a=i.call(e,{hash:{},data:t}):(i=e&&e.providerLogo,a=typeof i===C?i.call(e,{hash:{},data:t}):i),o+=L(a)+'\')" class="bookletProviders__tariffProviderLogo"></i>'}function g(e,t){var a,i;return(i=n.tv)?a=i.call(e,{hash:{},data:t}):(i=e&&e.tv,a=typeof i===C?i.call(e,{hash:{},data:t}):i),L(a)}function _(e,t){return"–"}function v(e,t){var a,i,o,r="";return r+='<span class="bookletProviders__tariffHD">',(i=n.hd)?a=i.call(e,{hash:{},data:t}):(i=e&&e.hd,a=typeof i===C?i.call(e,{hash:{},data:t}):i),r+=L(a)+'<i class="bookletProviders__tariffHDLabel">'+L((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"HD",o):T.call(e,"_gg","HD",o)))+"</i></span>"}function y(e,t){var a,i,o,r="";return r+='<div class="bookletProviders__tariffDescription">',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===C?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+='</div><i class="bookletProviders__icon _minimize bookletProviders__tariffMinimize" title="'+L((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Свернуть",o):T.call(e,"_gg","Свернуть",o)))+'"></i>'}function b(e,t){var a,i="";return a=n.unless.call(e,e&&e.compilation,{hash:{},inverse:I.noop,fn:I.program(28,k,t),data:t}),(a||0===a)&&(i+=a),i}function k(e,t){var a,i,o="";return o+='<p class="bookletProviders__tariffsEmpty">'+L((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"У провайдера нет активных тарифов.",i):T.call(e,"_gg","У провайдера нет активных тарифов.",i)))+"</p>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var w,x="",C="function",L=this.escapeExpression,I=this,T=n.helperMissing;return w=n["if"].call(t,t&&t.tariffs,{hash:{},inverse:I.program(27,b,i),fn:I.program(1,o,i),data:i}),(w||0===w)&&(x+=w),x},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletSaunas=this.jst_modules.bookletSaunas||{},this.jst_modules.bookletSaunas.dropdown=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<li class="bookletSaunas__roomTab"><span class="bookletSaunas__roomTime ',a=n["if"].call(e,e&&e.today,{hash:{},inverse:v.noop,fn:v.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+='">',(i=n.from)?a=i.call(e,{hash:{},data:t}):(i=e&&e.from,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a),a=n["if"].call(e,e&&e.singleDay,{hash:{},inverse:v.noop,fn:v.program(4,s,t),data:t}),(a||0===a)&&(o+=a),o+="</span></li>"}function r(e,t){return"_active"}function s(e,t){var a,i,o="";return o+="-",(i=n.to)?a=i.call(e,{hash:{},data:t}):(i=e&&e.to,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)}function l(e,t){var a,i="";return i+='<li class="bookletSaunas__roomTabsContentItem ',a=n["if"].call(e,e&&e.today,{hash:{},inverse:v.noop,fn:v.program(7,c,t),data:t}),(a||0===a)&&(i+=a),i+='">',a=n.each.call(e,e&&e.prices,{hash:{},inverse:v.noop,fn:v.programWithDepth(9,u,t,e),data:t}),(a||0===a)&&(i+=a),i+="</li>"}function c(e,t){return"_now"}function u(e,t,a){var i,o="";return i=n["if"].call(e,a&&a.roundTheClock,{hash:{},inverse:v.program(13,p,t),fn:v.program(10,d,t),data:t}),(i||0===i)&&(o+=i),o}function d(e,t){var a,i,o,r="";return r+='<div data-from="',(i=n.from)?a=i.call(e,{hash:{},data:t}):(i=e&&e.from,a=typeof i===g?i.call(e,{hash:{},data:t}):i),r+=_(a)+'" data-to="',(i=n.to)?a=i.call(e,{hash:{},data:t}):(i=e&&e.to,a=typeof i===g?i.call(e,{hash:{},data:t}):i),r+=_(a)+'" data-price="',(i=n.cost)?a=i.call(e,{hash:{},data:t}):(i=e&&e.cost,a=typeof i===g?i.call(e,{hash:{},data:t}):i),r+=_(a)+'" data-formatted="',(i=n.costFormatted)?a=i.call(e,{hash:{},data:t}):(i=e&&e.costFormatted,a=typeof i===g?i.call(e,{hash:{},data:t}):i),r+=_(a)+'"\n                            class="bookletSaunas__roomTabsContentTime _type_roundTheClock ',a=n["if"].call(e,e&&e.now,{hash:{},inverse:v.noop,fn:v.program(11,h,t),data:t}),(a||0===a)&&(r+=a),r+='">'+_((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"круглосуточно",o):y.call(e,"_gg","круглосуточно",o)))+'&nbsp;\n                                <span class="bookletSaunas__roomTabsContentCost">',(i=n.costFormatted)?a=i.call(e,{hash:{},data:t}):(i=e&&e.costFormatted,a=typeof i===g?i.call(e,{hash:{},data:t}):i),r+=_(a)+'</span><span class="bookletSaunas__currency _'+_((a=e&&e.currency,a=null==a||a===!1?a:a.code,typeof a===g?a.apply(e):a))+' _type_dropdown">',a=e&&e.currency,a=null==a||a===!1?a:a.symbol,a=typeof a===g?a.apply(e):a,(a||0===a)&&(r+=a),r+="</span></div>"}function h(e,t){return"_currentTime"}function p(e,t){var a,i,o="";return o+='<div data-from="',(i=n.from)?a=i.call(e,{hash:{},data:t}):(i=e&&e.from,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+'" data-to="',(i=n.to)?a=i.call(e,{hash:{},data:t}):(i=e&&e.to,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+'" data-price="',(i=n.cost)?a=i.call(e,{hash:{},data:t}):(i=e&&e.cost,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+'" data-formatted="',(i=n.costFormatted)?a=i.call(e,{hash:{},data:t}):(i=e&&e.costFormatted,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+'"\n                            class="bookletSaunas__roomTabsContentTime ',a=n["if"].call(e,e&&e.now,{hash:{},inverse:v.noop,fn:v.program(11,h,t),data:t}),(a||0===a)&&(o+=a),o+='">',(i=n.from)?a=i.call(e,{hash:{},data:t}):(i=e&&e.from,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+" - ",(i=n.to)?a=i.call(e,{hash:{},data:t}):(i=e&&e.to,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+'<span class="bookletSaunas__roomTabsContentCost">',(i=n.costFormatted)?a=i.call(e,{hash:{},data:t}):(i=e&&e.costFormatted,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+'</span><span class="bookletSaunas__currency _'+_((a=e&&e.currency,a=null==a||a===!1?a:a.code,typeof a===g?a.apply(e):a))+' _type_dropdown">',a=e&&e.currency,a=null==a||a===!1?a:a.symbol,a=typeof a===g?a.apply(e):a,(a||0===a)&&(o+=a),o+="</span></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var f,m="",g="function",_=this.escapeExpression,v=this,y=n.helperMissing;return m+='<div class="bookletSaunas__roomDropdown _collapsed bookletSaunas__roomTabsContainer"><div class="bookletSaunas__roomDropdownCloseButton"></div><div class="bookletSaunas__roomWrapper"><ul class="bookletSaunas__roomTabs">',f=n.each.call(t,t&&t.prices,{hash:{},inverse:v.noop,fn:v.program(1,o,i),data:i}),(f||0===f)&&(m+=f),m+='</ul><ul class="bookletSaunas__roomTabsContent">',f=n.each.call(t,t&&t.prices,{hash:{},inverse:v.noop,fn:v.program(6,l,i),data:i}),(f||0===f)&&(m+=f),m+="</ul></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletSaunas=this.jst_modules.bookletSaunas||{},this.jst_modules.bookletSaunas.editor=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+=c((o=n.module||t&&t.module,r={hash:{},data:i},o?o.call(t,"bookletEditor",r):l.call(t,"module","bookletEditor",r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletSaunas=this.jst_modules.bookletSaunas||{},this.jst_modules.bookletSaunas.footer=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<div class="bookletSaunas__footerContainer _state_fixed _positionBottom _type_',(r=n.templateName)?o=r.call(t,{hash:{},data:i}):(r=t&&t.templateName,o=typeof r===c?r.call(t,{hash:{},data:i}):r),l+=u(o)+'"><footer class="bookletSaunas__wrap"><div class="bookletSaunas__grid"><div class="bookletSaunas__gridCell _gridCell_3x1 bookletSaunas__feedback"><span class="bookletSaunas__feedbackLink"><span title="'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"Сообщить об ошибке",s):d.call(t,"_gg","Сообщить об ошибке",s)))+'" class="bookletSaunas__icon _feedbackIcon"></span></span></div></div></footer></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletSaunas=this.jst_modules.bookletSaunas||{},this.jst_modules.bookletSaunas.gallery=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<img src="'+h((a=e&&e.urls,a=null==a||a===!1?a:a.original,typeof a===d?a.apply(e):a))+'" ',a=n["if"].call(e,e&&e.title,{hash:{},inverse:p.noop,fn:p.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+=">"}function r(e,t){var a,i,o="";return o+=' alt="',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===d?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+='"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d="function",h=this.escapeExpression,p=this,f=n.helperMissing;return u+='<div class="bookletSaunas__photos"><div class="bookletSaunas__photosHeader"><div class="bookletSaunas__photosHeaderWrap"><div class="bookletSaunas__photosHeaderTitle"></div></div></div><div class="bookletSaunas__photosContainer _preloader_visible">'+h((l=n.Preloader||t&&t.Preloader,c={hash:{"class":"bookletSaunas__photosContainerPreloader _scheme_lighten"},data:i},l?l.call(t,c):f.call(t,"Preloader",c)))+'<div class="bookletSaunas__photosViewport"><div class="bookletSaunas__photosViewportLayer">',s=n.each.call(t,t&&t.photos,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+='</div><div class="bookletSaunas__photosControl"><div class="bookletSaunas__photosControlPrev"></div><div class="bookletSaunas__photosControlNext"></div><div class="bookletSaunas__photosCounter"><div class="bookletSaunas__photosCounterInner"><strong class="bookletSaunas__photosCounterInnerCurrent"></strong> '+h((l=n._gg||t&&t._gg,c={hash:{},data:i},l?l.call(t,"из",c):f.call(t,"_gg","из",c)))+' <strong class="bookletSaunas__photosCounterInnerCount"></strong></div></div><div class="bookletSaunas__photosDescription"><div class="bookletSaunas__photosDescriptionFeedback"></div></div></div></div></div><div class="bookletSaunas__photosThumbs"><div class="bookletSaunas__photosThumbsWrap"><div class="bookletSaunas__photosThumbsWrapFrame"></div></div><div class="bookletSaunas__photosThumbsControl"></div></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletSaunas=this.jst_modules.bookletSaunas||{},this.jst_modules.bookletSaunas.main=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="bookletSaunas__pageContainer _pagesList"><div class="bookletSaunas__page"><ul class="bookletSaunas__grid _listGrid">'+c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,"rooms",r):l.call(t,"p","rooms",r)))+"</ul></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletSaunas=this.jst_modules.bookletSaunas||{},this.jst_modules.bookletSaunas.nextRoom=function(e,t,n,a,i){function o(e,t,a){var i,o,r,s="";return s+='<span class="bookletSaunas__pagePrice _timeCost">',(o=n.currentTimeCostFormatted)?i=o.call(e,{hash:{},data:t}):(o=e&&e.currentTimeCostFormatted,i=typeof o===u?o.call(e,{hash:{},data:t}):o),s+=d(i)+'</span><span class="bookletSaunas__currency _'+d((i=a&&a.currency,i=null==i||i===!1?i:i.code,typeof i===u?i.apply(e):i))+'">',i=a&&a.currency,i=null==i||i===!1?i:i.symbol,i=typeof i===u?i.apply(e):i,(i||0===i)&&(s+=i),s+="</span>/ "+d((o=n._gg||a&&a._gg,r={hash:{},data:t},o?o.call(e,"час",r):h.call(e,"_gg","час",r)))+" | "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u="function",d=this.escapeExpression,h=n.helperMissing,p=this;return c+='<div class="bookletSaunas__page _preview" data-num="',
(s=n.num)?r=s.call(t,{hash:{},data:i}):(s=t&&t.num,r=typeof s===u?s.call(t,{hash:{},data:i}):s),c+=d(r)+'"><aside class="bookletSaunas__pageImage"><div class="bookletSaunas__listImage"><div class="bookletSaunas__cropItem"><a href="#" class="bookletSaunas__photoWrap bookletSaunas__pageLink" style="background-image: url(',(s=n.firstPhoto)?r=s.call(t,{hash:{},data:i}):(s=t&&t.firstPhoto,r=typeof s===u?s.call(t,{hash:{},data:i}):s),c+=d(r)+')" data-id="',(s=n.id)?r=s.call(t,{hash:{},data:i}):(s=t&&t.id,r=typeof s===u?s.call(t,{hash:{},data:i}):s),c+=d(r)+'"></a></div></div></aside><div class="bookletSaunas__pageContent"><div class="bookletSaunas__pageTitle">',(s=n.title)?r=s.call(t,{hash:{},data:i}):(s=t&&t.title,r=typeof s===u?s.call(t,{hash:{},data:i}):s),c+=d(r)+'</div><div class="bookletSaunas__pageInfo">',r=n["if"].call(t,t&&t.currentTimeCost,{hash:{},inverse:p.noop,fn:p.programWithDepth(1,o,i,t),data:i}),(r||0===r)&&(c+=r),c+=d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"до ",l):h.call(t,"_gg","до ",l)))+'<span class="bookletSaunas__pageDetailsText ">',(s=n.capacity)?r=s.call(t,{hash:{},data:i}):(s=t&&t.capacity,r=typeof s===u?s.call(t,{hash:{},data:i}):s),c+=d(r)+"</span>"+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t," чел",l):h.call(t,"_gg"," чел",l)))+'.\n        </div><div class="bookletSaunas__pageType ">',(s=n.steamroomType)?r=s.call(t,{hash:{},data:i}):(s=t&&t.steamroomType,r=typeof s===u?s.call(t,{hash:{},data:i}):s),c+=d(r)+'</div><a href="#" class="bookletSaunas__pageLink " data-id="',(s=n.id)?r=s.call(t,{hash:{},data:i}):(s=t&&t.id,r=typeof s===u?s.call(t,{hash:{},data:i}):s),c+=d(r)+'">'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Посмотреть номер",l):h.call(t,"_gg","Посмотреть номер",l)))+"</a></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletSaunas=this.jst_modules.bookletSaunas||{},this.jst_modules.bookletSaunas.room=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n["if"].call(e,e&&e.isActive,{hash:{},inverse:g.noop,fn:g.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var i,o,r="";return r+='<div class="bookletSaunas__page"><div class="bookletSaunas__grid _saunasGrid"><article class="bookletSaunas__gridCell _gridCell_2x3 _gridLeft">',i=g.invokePartial(a.gallery,"gallery",e,n,a,t),(i||0===i)&&(r+=i),i=n["if"].call(e,e&&e.extendedCard,{hash:{},inverse:g.noop,fn:g.program(3,s,t),data:t}),(i||0===i)&&(r+=i),r+='</article><aside class="bookletSaunas__gridCell _gridCell_1x3 _gridRight _firstChild"><div class="bookletSaunas__room _offset" data-id="',(o=n.id)?i=o.call(e,{hash:{},data:t}):(o=e&&e.id,i=typeof o===y?o.call(e,{hash:{},data:t}):o),r+=v(i)+'" data-num="',(o=n.num)?i=o.call(e,{hash:{},data:t}):(o=e&&e.num,i=typeof o===y?o.call(e,{hash:{},data:t}):o),r+=v(i)+'"><div class="bookletSaunas__roomWrap _large">',i=g.invokePartial(a.roomInfo,"roomInfo",e,n,a,t),(i||0===i)&&(r+=i),r+='</div></div></aside><div class="bookletSaunas__gridCell _gridCell_1x3 _gridRight">',i=g.invokePartial(a.roomParams,"roomParams",e,n,a,t),(i||0===i)&&(r+=i),r+="</div></div></div>"}function s(e,t){var a,i="";return i+='<div class="bookletSaunas__sectionWrap">',a=n["if"].call(e,e&&e.description,{hash:{},inverse:g.noop,fn:g.program(4,l,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.prevNextRooms,{hash:{},inverse:g.noop,fn:g.program(7,u,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function l(e,t){var a,i,o,r="";return r+='<div class="bookletSaunas__section _other ',a=n["if"].call(e,e&&e.prevNextRooms,{hash:{},inverse:g.noop,fn:g.program(5,c,t),data:t}),(a||0===a)&&(r+=a),r+='"><h2 class="bookletSaunas__sectionTitle"><span class="bookletSaunas__sectionTitleInner">'+v((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"О номере",o):_.call(e,"_gg","О номере",o)))+'</span></h2><p class="bookletSaunas__p _grey">',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===y?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+="</p></div>"}function c(e,t){return"_notOnly"}function u(e,t){var a,i="";return i+='<div class="bookletSaunas__section _other ',a=n["if"].call(e,e&&e.showPrevNextBoth,{hash:{},inverse:g.noop,fn:g.program(8,d,t),data:t}),(a||0===a)&&(i+=a),i+='">',a=n["if"].call(e,e&&e.showPrevNextBoth,{hash:{},inverse:g.noop,fn:g.program(10,h,t),data:t}),(a||0===a)&&(i+=a),a=n.each.call(e,e&&e.prevNextRooms,{hash:{},inverse:g.noop,fn:g.programWithDepth(12,p,t,e),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function d(e,t){return"_showPrevNextBoth"}function h(e,t){var a,i,o="";return o+='<h2 class="bookletSaunas__sectionTitle"><span class="bookletSaunas__sectionTitleInner">'+v((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Другие номера",i):_.call(e,"_gg","Другие номера",i)))+"</span></h2>"}function p(e,t,i){var o,r="";return o=n.unless.call(e,i&&i.showPrevNextBoth,{hash:{},inverse:g.noop,fn:g.program(10,h,t),data:t}),(o||0===o)&&(r+=o),o=g.invokePartial(a.nextRoom,"nextRoom",e,n,a,t),(o||0===o)&&(r+=o),r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var f,m="",g=this,_=n.helperMissing,v=this.escapeExpression,y="function";return f=n.each.call(t,t&&t.rooms,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(f||0===f)&&(m+=f),m},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletSaunas=this.jst_modules.bookletSaunas||{},this.jst_modules.bookletSaunas.roomInfo=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<div class="bookletSaunas__roomDetailsItem"><div class="bookletSaunas__roomPrice"><div class="bookletSaunas__roomAbout _timeCost">',(i=n.currentTimeCostFormatted)?a=i.call(e,{hash:{},data:t}):(i=e&&e.currentTimeCostFormatted,a=typeof i===v?i.call(e,{hash:{},data:t}):i),s+=_(a)+'</div></div><div class="bookletSaunas__roomDetailsText"><span class="bookletSaunas__roomDetailsCost _'+_((a=e&&e.currentTimeCostCurrency,a=null==a||a===!1?a:a.code,typeof a===v?a.apply(e):a))+'">'+_((a=e&&e.currentTimeCostCurrency,a=null==a||a===!1?a:a.symbol,typeof a===v?a.apply(e):a))+"</span>&nbsp;"+_((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"в час",o):g.call(e,"_gg","в час",o)))+'</div><div class="bookletSaunas__roomDetailsText"><span class="bookletSaunas__saunasCurrentRange">',a=n["if"].call(e,e&&e.workingNow,{hash:{},inverse:y.program(7,c,t),fn:y.program(2,r,t),data:t}),(a||0===a)&&(s+=a),s+='</span><span class="bookletSaunas__saunasSelectedRange"><span class="bookletSaunas__icon _clocks"></span>'+_((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"с ",o):g.call(e,"_gg","с ",o)))+'<span class="bookletSaunas__saunasSelectedRangeFrom">'+_((a=e&&e.closestHour,a=null==a||a===!1?a:a.price,a=null==a||a===!1?a:a.from,typeof a===v?a.apply(e):a))+"</span>"+_((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e," и до ",o):g.call(e,"_gg"," и до ",o)))+'<span class="bookletSaunas__saunasSelectedRangeTo bookletSaunas__roomCurrentTime">'+_((a=e&&e.closestHour,a=null==a||a===!1?a:a.price,a=null==a||a===!1?a:a.to,typeof a===v?a.apply(e):a))+"</span></span>",a=n.unless.call(e,e&&e.fixedPrice,{hash:{},inverse:y.noop,fn:y.program(10,d,t),data:t}),(a||0===a)&&(s+=a),s+="</div></div>"}function r(e,t){var a,i="";return a=n["if"].call(e,e&&e.fixedPrice,{hash:{},inverse:y.program(5,l,t),fn:y.program(3,s,t),data:t}),(a||0===a)&&(i+=a),i}function s(e,t){return'<span class="bookletSaunas__roomText"></span>'}function l(e,t){var a,i,o,r="";return r+='<span class="bookletSaunas__icon _clocks"></span><span class="bookletSaunas__roomText">'+_((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"сейчас и до ",o):g.call(e,"_gg","сейчас и до ",o)))+'</span><span class="bookletSaunas__roomCurrentTime">',(i=n.closestHour)?a=i.call(e,{hash:{},data:t}):(i=e&&e.closestHour,a=typeof i===v?i.call(e,{hash:{},data:t}):i),r+=_(a)+"</span>"}function c(e,t){var a,i="";return a=n["if"].call(e,e&&e.fixedPrice,{hash:{},inverse:y.program(8,u,t),fn:y.program(3,s,t),data:t}),(a||0===a)&&(i+=a),i}function u(e,t){var a,i,o,r="";return r+='<span class="bookletSaunas__icon _clocks"></span>'+_((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"с ",o):g.call(e,"_gg","с ",o)))+'<span class="bookletSaunas__saunasSelectedRangeFrom">'+_((a=e&&e.closestHour,a=null==a||a===!1?a:a.price,a=null==a||a===!1?a:a.from,typeof a===v?a.apply(e):a))+"</span>"+_((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e," и до ",o):g.call(e,"_gg"," и до ",o)))+'<span class="bookletSaunas__saunasSelectedRangeTo bookletSaunas__roomCurrentTime">'+_((a=e&&e.closestHour,a=null==a||a===!1?a:a.price,a=null==a||a===!1?a:a.to,typeof a===v?a.apply(e):a))+"</span>"}function d(e,t){var i,o="";return i=y.invokePartial(a.dropdown,"dropdown",e,n,a,t),(i||0===i)&&(o+=i),o}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var h,p,f,m="",g=n.helperMissing,_=this.escapeExpression,v="function",y=this;return m+='<header class="bookletSaunas__roomTitle">',(p=n.title)?h=p.call(t,{hash:{},data:i}):(p=t&&t.title,h=typeof p===v?p.call(t,{hash:{},data:i}):p),m+=_(h)+'</header><span class="bookletSaunas__icon _',(p=n.hotType)?h=p.call(t,{hash:{},data:i}):(p=t&&t.hotType,h=typeof p===v?p.call(t,{hash:{},data:i}):p),m+=_(h)+' _saunasIcon"></span><span class="bookletSaunas__roomType">',(p=n.steamroomType)?h=p.call(t,{hash:{},data:i}):(p=t&&t.steamroomType,h=typeof p===v?p.call(t,{hash:{},data:i}):p),m+=_(h)+'</span><div class="bookletSaunas__roomDetails">',h=n["if"].call(t,t&&t.currentTimeCost,{hash:{},inverse:y.noop,fn:y.program(1,o,i),data:i}),(h||0===h)&&(m+=h),m+='<div class="bookletSaunas__roomDetailsItem"><div class="bookletSaunas__roomPrice"><div class="bookletSaunas__roomAbout"><small class="bookletSaunas__roomLabel">'+_((p=n._gg||t&&t._gg,f={hash:{},data:i},p?p.call(t,"до ",f):g.call(t,"_gg","до ",f)))+'</small><span class="bookletSaunas__roomCapacity">',(p=n.capacity)?h=p.call(t,{hash:{},data:i}):(p=t&&t.capacity,h=typeof p===v?p.call(t,{hash:{},data:i}):p),m+=_(h)+'</span></div></div><span class="bookletSaunas__roomDetailsText">'+_((p=n._ngg||t&&t._ngg,f={hash:{},data:i},p?p.call(t,"посетителя","посетителей","посетителей",t&&t.capacity,f):g.call(t,"_ngg","посетителя","посетителей","посетителей",t&&t.capacity,f)))+"</span></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletSaunas=this.jst_modules.bookletSaunas||{},this.jst_modules.bookletSaunas.roomParams=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<li class="bookletSaunas__section"><h2 class="bookletSaunas__sectionTitle"><span class="bookletSaunas__sectionTitleInner"><span class="bookletSaunas__icon _bookletsOffer"></span>'+k((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Акции",o):b.call(e,"_gg","Акции",o)))+'</span></h2><p class="bookletSaunas__p _grey">',(i=n.offer)?a=i.call(e,{hash:{},data:t}):(i=e&&e.offer,a=typeof i===w?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+="</p></li>"}function r(e,t){var a,i,o,r="";return r+='<li class="bookletSaunas__section"><h2 class="bookletSaunas__sectionTitle"><span class="bookletSaunas__sectionTitleInner"><span class="bookletSaunas__icon _bookletsAqua"></span>'+k((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Аква-Зона",o):b.call(e,"_gg","Аква-Зона",o)))+'</span></h2><ul class="bookletSaunas__bullList _colorGrey _typeInline _collapsed bookletSaunas__options">',a=n.each.call(e,e&&e.pools,{hash:{},inverse:x.noop,fn:x.program(4,s,t),data:t}),(a||0===a)&&(r+=a),a=n.each.call(e,e&&e.aquas,{hash:{},inverse:x.noop,fn:x.program(8,u,t),data:t}),(a||0===a)&&(r+=a),r+='</ul><span class="bookletSaunas__optionsLink _more"><ins class="bookletSaunas__icon _expandIcon"></ins></span></li>'}function s(e,t){var a,i="";return a=n["if"].call(e,e&&e.isChecked,{hash:{},inverse:x.noop,fn:x.program(5,l,t),data:t}),(a||0===a)&&(i+=a),i}function l(e,t){var a,i,o,r="";return r+='<li class="bookletSaunas__bullListItem bookletSaunas__optionsItem">'+k((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Бассейн ",o):b.call(e,"_gg","Бассейн ",o))),a=n["if"].call(e,e&&e.withSize,{hash:{},inverse:x.noop,fn:x.program(6,c,t),data:t}),(a||0===a)&&(r+=a),r+="</li>"}function c(e,t){var a,i,o,r="";return r+=k((a=e&&e.length,typeof a===w?a.apply(e):a))+"x"+k((a=e&&e.width,typeof a===w?a.apply(e):a))+k((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e," м",o):b.call(e,"_gg"," м",o)))}function u(e,t){var n="";return n+='<li class="bookletSaunas__bullListItem bookletSaunas__optionsItem">'+k(typeof e===w?e.apply(e):e)+"</li>"}function d(e,t){var a,i,o,r="";return r+='<li class="bookletSaunas__section"><h2 class="bookletSaunas__sectionTitle"><span class="bookletSaunas__sectionTitleInner"><span class="bookletSaunas__icon _bookletsEntertainment"></span>'+k((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Развлечения",o):b.call(e,"_gg","Развлечения",o)))+'</span></h2><ul class="bookletSaunas__bullList _colorGrey _typeInline _collapsed bookletSaunas__options">',a=n.each.call(e,e&&e.entertainments,{hash:{},inverse:x.noop,fn:x.program(8,u,t),data:t}),(a||0===a)&&(r+=a),r+='</ul><span class="bookletSaunas__optionsLink _more"><ins class="bookletSaunas__icon _expandIcon"></ins></span></li>'}function h(e,t){var a,i,o,r="";return r+='<li class="bookletSaunas__section"><h2 class="bookletSaunas__sectionTitle"><span class="bookletSaunas__sectionTitleInner"><span class="bookletSaunas__icon _bookletsRest"></span>'+k((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Для отдыха",o):b.call(e,"_gg","Для отдыха",o)))+'</span></h2><ul class="bookletSaunas__bullList _colorGrey _typeInline _collapsed bookletSaunas__options">',a=n.each.call(e,e&&e.rest,{hash:{},inverse:x.noop,fn:x.program(13,p,t),data:t}),(a||0===a)&&(r+=a),r+='</ul><span class="bookletSaunas__optionsLink _more"><ins class="bookletSaunas__icon _expandIcon"></ins></span></li>'}function p(e,t){var a,i="";return i+='<li class="bookletSaunas__bullListItem bookletSaunas__optionsItem">',a=n["if"].call(e,e&&e.text,{hash:{},inverse:x.program(16,m,t),fn:x.program(14,f,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.count,{hash:{},inverse:x.noop,fn:x.program(18,g,t),data:t}),(a||0===a)&&(i+=a),i+="</li>"}function f(e,t){var n;return k((n=e&&e.text,typeof n===w?n.apply(e):n))}function m(e,t){return k(typeof e===w?e.apply(e):e)}function g(e,t){var n,a="";return a+=', <span class="bookletSaunas__optionsQuantity">'+k((n=e&&e.count,typeof n===w?n.apply(e):n))+"</span>"}function _(e,t){var a,i,o,r="";return r+='<li class="bookletSaunas__section"><h2 class="bookletSaunas__sectionTitle"><span class="bookletSaunas__sectionTitleInner"><span class="bookletSaunas__icon _bookletsServices"></span>'+k((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Сервис",o):b.call(e,"_gg","Сервис",o)))+'</span></h2><ul class="bookletSaunas__bullList _colorGrey _typeInline _collapsed bookletSaunas__options">',a=n.each.call(e,e&&e.services,{hash:{},inverse:x.noop,fn:x.program(8,u,t),data:t}),(a||0===a)&&(r+=a),r+='</ul><span class="bookletSaunas__optionsLink _more"><ins class="bookletSaunas__icon _expandIcon"></ins></span></li>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var v,y="",b=n.helperMissing,k=this.escapeExpression,w="function",x=this;return y+='<ul class="bookletSaunas__params">',v=n["if"].call(t,t&&t.isSpecialOffer,{hash:{},inverse:x.noop,fn:x.program(1,o,i),data:i}),(v||0===v)&&(y+=v),v=n["if"].call(t,t&&t.isAqua,{hash:{},inverse:x.noop,fn:x.program(3,r,i),data:i}),(v||0===v)&&(y+=v),v=n["if"].call(t,t&&t.entertainments,{hash:{},inverse:x.noop,fn:x.program(10,d,i),data:i}),(v||0===v)&&(y+=v),v=n["if"].call(t,t&&t.rest,{hash:{},inverse:x.noop,fn:x.program(12,h,i),data:i}),(v||0===v)&&(y+=v),v=n["if"].call(t,t&&t.services,{hash:{},inverse:x.noop,fn:x.program(20,_,i),data:i}),(v||0===v)&&(y+=v),y+="</ul>"},this.jst_modules=this.jst_modules||{},this.jst_modules.bookletSaunas=this.jst_modules.bookletSaunas||{},this.jst_modules.bookletSaunas.rooms=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<li class="bookletSaunas__gridCell _gridCell_3x1"><div class="bookletSaunas__section bookletSaunas__room" data-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===s?i.call(e,{hash:{},data:t}):i),r+=l(a)+'" data-num="',(i=n.num)?a=i.call(e,{hash:{},data:t}):(i=e&&e.num,a=typeof i===s?i.call(e,{hash:{},data:t}):i),r+=l(a)+'"><div class="bookletSaunas__bookletSaunasWrap"><div class="bookletSaunas__listImage"><div class="bookletSaunas__cropItem"><span class="bookletSaunas__photoWrap" style="background-image: url(',(i=n.firstPhoto)?a=i.call(e,{hash:{},data:t}):(i=e&&e.firstPhoto,a=typeof i===s?i.call(e,{hash:{},data:t}):i),r+=l(a)+');"></span></div></div><div class="bookletSaunas__roomWrap">'+l((i=n.p||e&&e.p,o={hash:{},data:t},i?i.call(e,"roomInfo",o):c.call(e,"p","roomInfo",o)))+'</div></div><div class="bookletSaunas__info"><p class="bookletSaunas__p _grey">',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===s?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+='</p></div><span class="bookletSaunas__readMore _active">'+l((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"читать далее",o):c.call(e,"_gg","читать далее",o)))+"</span></div></li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="function",l=this.escapeExpression,c=n.helperMissing,u=this;return r=n.each.call(t,t&&t.rooms,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),r||0===r?r:""},this.jst_modules=this.jst_modules||{},this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.buildingTemplate=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="card__drilldown">',(i=n.drilldown)?a=i.call(e,{hash:{},data:t}):(i=e&&e.drilldown,a=typeof i===k?i.call(e,{hash:{},data:t}):i),o+=w(a)+"</div>"}function r(e,t){var n="";return n+='<div class="card__features">'+w(typeof e===k?e.apply(e):e)+"</div>"}function s(e,t){var n="";return n+='<div class="card__nearStops">'+w(typeof e===k?e.apply(e):e)+"</div>"}function l(e,t){var n="";return n+='<div class="card__landmarks">'+w(typeof e===k?e.apply(e):e)+"</div>"}function c(e,t){var a,i,o,r="";return r+='<div class="card__nearParkings">',i=n.Link||e&&e.Link,o={hash:{"class":"_undashed card__nearParkingsLink"},inverse:C.noop,fn:C.program(10,u,t),data:t},a=i?i.call(e,o):x.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function u(e,t){var a,i,o="";return o+=w((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Найти парковки рядом",i):x.call(e,"_t","Найти парковки рядом",i)))}function d(e,t){var n="";return n+='<div class="card__actions">'+w(typeof e===k?e.apply(e):e)+"</div>"}function h(e,t){var a,i="";return i+='<div class="card__buttons">',a=n["if"].call(e,e&&e.floorsSeoLink,{hash:{},inverse:C.noop,fn:C.program(15,p,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function p(e,t){var a,i,o,r="";return r+='<a class="card__floors" href="',(i=n.floorsSeoLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.floorsSeoLink,a=typeof i===k?i.call(e,{hash:{},data:t}):i),r+=w(a)+'">'+w((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Посмотреть на этажах",o):x.call(e,"_t","Посмотреть на этажах",o)))+"</a>"}function f(e,t){var n="";return n+='<section class="card__attractions">'+w(typeof e===k?e.apply(e):e)+"</section>"}function m(e,t){var n="";return n+='<section class="card__firmsInBuilding _buildingView">'+w(typeof e===k?e.apply(e):e)+"</section>"}function g(e,t){var n="";return n+='<section class="card__infrastructure">'+w(typeof e===k?e.apply(e):e)+"</section>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var _,v,y,b="",k="function",w=this.escapeExpression,x=n.helperMissing,C=this;return b+=w((v=n.p||t&&t.p,y={hash:{},data:i},v?v.call(t,"geoHeader",y):x.call(t,"p","geoHeader",y)))+'<div class="card__content"><section class="card__section _primary">'+w((v=n.p||t&&t.p,y={hash:{},data:i},v?v.call(t,"address",y):x.call(t,"p","address",y))),_=n["if"].call(t,t&&t.drilldown,{hash:{},inverse:C.noop,fn:C.program(1,o,i),data:i}),(_||0===_)&&(b+=_),v=n.module||t&&t.module,y={hash:{},inverse:C.noop,fn:C.program(3,r,i),data:i},_=v?v.call(t,"cardFeatures",y):x.call(t,"module","cardFeatures",y),(_||0===_)&&(b+=_),v=n.module||t&&t.module,y={hash:{},inverse:C.noop,fn:C.program(5,s,i),data:i},_=v?v.call(t,"cardNearStops",y):x.call(t,"module","cardNearStops",y),(_||0===_)&&(b+=_),v=n.module||t&&t.module,y={hash:{},inverse:C.noop,fn:C.program(7,l,i),data:i},_=v?v.call(t,"cardLandmarks",y):x.call(t,"module","cardLandmarks",y),(_||0===_)&&(b+=_),_=n["if"].call(t,t&&t.nearParkings,{hash:{},inverse:C.noop,fn:C.program(9,c,i),data:i}),(_||0===_)&&(b+=_),v=n.module||t&&t.module,y={hash:{},inverse:C.noop,fn:C.program(12,d,i),data:i},_=v?v.call(t,"cardActions",y):x.call(t,"module","cardActions",y),(_||0===_)&&(b+=_),b+='<div class="card__phonesDropdown"></div>',_=n["if"].call(t,t&&t.floorsSeoLink,{hash:{},inverse:C.noop,fn:C.program(14,h,i),data:i}),(_||0===_)&&(b+=_),b+=w((v=n.module||t&&t.module,y={hash:{},data:i},v?v.call(t,"promoMobile",y):x.call(t,"module","promoMobile",y)))+w((v=n.p||t&&t.p,y={hash:{},data:i},v?v.call(t,"photos",y):x.call(t,"p","photos",y)))+"</section>",v=n.module||t&&t.module,y={hash:{},inverse:C.noop,fn:C.program(17,f,i),data:i},_=v?v.call(t,"cardAttractions",y):x.call(t,"module","cardAttractions",y),(_||0===_)&&(b+=_),v=n.module||t&&t.module,y={hash:{},inverse:C.noop,fn:C.program(19,m,i),data:i},_=v?v.call(t,"cardInfrastructureItem",y):x.call(t,"module","cardInfrastructureItem",y),(_||0===_)&&(b+=_),v=n.module||t&&t.module,y={hash:{},inverse:C.noop,fn:C.program(21,g,i),data:i},_=v?v.call(t,"cardInfrastructure",y):x.call(t,"module","cardInfrastructure",y),(_||0===_)&&(b+=_),b+='<div class="card__googletag"></div></div>'+w((v=n.p||t&&t.p,y={hash:{},data:i},v?v.call(t,"geoFooter",y):x.call(t,"p","geoFooter",y)))},this.jst_modules=this.jst_modules||{},this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.firmTemplate=function(e,t,n,a,i){function o(e,t){var n="";return n+='<div class="card__awardBadge">'+q(typeof e===z?e.apply(e):e)+"</div>"}function r(e,t){var a,i,o="";return o+='<div class="card__legal">',(i=n.legal)?a=i.call(e,{hash:{},data:t}):(i=e&&e.legal,a=typeof i===z?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function s(e,t){var a,i,o,r="";return r+='<div class="card__filials">',i=n._hnt||e&&e._hnt,o={hash:{link__href:(a=e&&e.filials,null==a||a===!1?a:a.seoLink),link__class:"card__filialsLink undashed"},data:t},a=i?i.call(e,"У организации %{Link %1 филиал}","У организации %{Link %1 филиала}","У организации %{Link %1 филиалов}",(a=e&&e.filials,null==a||a===!1?a:a.count),o):$.call(e,"_hnt","У организации %{Link %1 филиал}","У организации %{Link %1 филиала}","У организации %{Link %1 филиалов}",(a=e&&e.filials,null==a||a===!1?a:a.count),o),(a||0===a)&&(r+=a),r+="</div>"}function l(e,t){var n="";return n+='<div class="card__actions">'+q(typeof e===z?e.apply(e):e)+"</div>"}function c(e,t){var a,i,o="";return o+=q((a=n.p||e&&e.p,i={hash:{context:e&&e.mediaButtons},data:t},a?a.call(e,"mediaButtons",i):$.call(e,"p","mediaButtons",i)))}function u(e,t){var a,i,o="";return o+=q((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"ads",i):$.call(e,"p","ads",i)))}function d(e,t){var a,i,o="";return o+='<section class="card__section">'+q((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"discounts",i):$.call(e,"p","discounts",i)))+"</section>"}function h(e,t){var a,i,o="";return o+=q((a=n.p||e&&e.p,i={hash:{context:e&&e.attributes},data:t},a?a.call(e,"attributes",i):$.call(e,"p","attributes",i)))}function p(e,t){var a,i="";return i+='<ul class="card__payment">',a=n.each.call(e,e&&e.payment,{hash:{},inverse:U.noop,fn:U.program(18,f,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function f(e,t){var a,i,o="";return o+='<li class="card__paymentItem">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===z?i.call(e,{hash:{},data:t}):i),o+=q(a)+"</li>"}function m(e,t){var n="";return n+='<section class="card__section"><section class="card__firmsInBuilding">'+q(typeof e===z?e.apply(e):e)+"</section></section>"}function g(e,t){var n="";return n+='<section class="card__section _schedule">'+q(typeof e===z?e.apply(e):e)+"</section>"}function _(e,t){var n="";return n+='<section class="card__section _contact">'+q(typeof e===z?e.apply(e):e)+"</section>"}function v(e,t){var a,i,o="";return o+='<div class="card__addressComment">',(i=n.addressComment)?a=i.call(e,{hash:{},data:t}):(i=e&&e.addressComment,a=typeof i===z?i.call(e,{hash:{},data:t}):i),o+=q(a)+"</div>"}function y(e,t){var a,i,o="";return o+='<div class="card__drilldown">',(i=n.drilldown)?a=i.call(e,{hash:{},data:t}):(i=e&&e.drilldown,a=typeof i===z?i.call(e,{hash:{},data:t}):i),o+=q(a)+"</div>"}function b(e,t){var a,i="";return i+='<div class="card__shortBuildingInfo">',a=n["if"].call(e,e&&e.buildingName,{hash:{},inverse:U.noop,fn:U.program(31,k,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.floorsCount,{hash:{},inverse:U.noop,fn:U.program(33,w,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function k(e,t){var a,i,o="";return(i=n.buildingName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.buildingName,a=typeof i===z?i.call(e,{hash:{},data:t}):i),o+=q(a)}function w(e,t){var a,i,o="";return o+=q((a=n._nt||e&&e._nt,i={hash:{},data:t},a?a.call(e,"%1 этаж","%1 этажа","%1 этажей",e&&e.floorsCount,i):$.call(e,"_nt","%1 этаж","%1 этажа","%1 этажей",e&&e.floorsCount,i)))}function x(e,t){var n="";return n+='<div class="card__nearStops">'+q(typeof e===z?e.apply(e):e)+"</div>"}function C(e,t){var n="";return n+='<div class="card__landmarks">'+q(typeof e===z?e.apply(e):e)+"</div>"}function L(e,t){var a,i,o,r="";return r+='<div class="card__facilities">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.facilities,null==a||a===!1?a:a.seoLink),"class":"card__facilitiesLink"},inverse:U.noop,fn:U.program(40,I,t),data:t},a=i?i.call(e,o):$.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function I(e,t){var a,i,o="";return o+=q((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Доступно для инвалидов",i):$.call(e,"_t","Доступно для инвалидов",i)))}function T(e,t){var n="";return n+='<div class="card__features">'+q(typeof e===z?e.apply(e):e)+"</div>"}function S(e,t){var a,i,o,r="";return r+='<div class="card__nearParkings">',i=n.Link||e&&e.Link,o={hash:{"class":"_undashed card__nearParkingsLink"},inverse:U.noop,fn:U.program(45,E,t),data:t},a=i?i.call(e,o):$.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function E(e,t){var a,i,o="";return o+=q((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Найти парковки рядом",i):$.call(e,"_t","Найти парковки рядом",i)))}function P(e,t){var n,a="";return a+='<section class="card__section"><div class="card__review">',n=typeof e===z?e.apply(e):e,(n||0===n)&&(a+=n),a+="</div></section>"}function j(e,t){var n="";return n+='<section class="card__attractions">'+q(typeof e===z?e.apply(e):e)+"</section>"}function M(e,t){var a,i,o="";return o+=q((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"rubrics",i):$.call(e,"p","rubrics",i)))}function A(e,t){var a,i="";return i+='<div class="card__recoveryAds"',a=n["if"].call(e,e&&e.recoveryAdsRerender,{hash:{},inverse:U.noop,fn:U.program(54,D,t),data:t}),(a||0===a)&&(i+=a),i+=">",a=typeof e===z?e.apply(e):e,(a||0===a)&&(i+=a),i+="</div>"}function D(e,t){return' data-rerender="1"'}function R(e,t){var n="";return n+='<section class="card__infrastructure">'+q(typeof e===z?e.apply(e):e)+"</section>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var N,B,F,O="",z="function",q=this.escapeExpression,$=n.helperMissing,U=this;return O+=q((B=n.module||t&&t.module,F={hash:{},data:i},B?B.call(t,"cardHeader",F):$.call(t,"module","cardHeader",F)))+'<div class="card__content">',B=n.module||t&&t.module,F={hash:{},inverse:U.noop,fn:U.program(1,o,i),data:i},N=B?B.call(t,"awardBadge",F):$.call(t,"module","awardBadge",F),(N||0===N)&&(O+=N),O+='<section class="card__section _primary">',N=n["if"].call(t,t&&t.legal,{hash:{},inverse:U.noop,fn:U.program(3,r,i),data:i}),(N||0===N)&&(O+=N),O+=q((B=n.p||t&&t.p,F={hash:{},data:i},B?B.call(t,"address",F):$.call(t,"p","address",F))),N=n["if"].call(t,t&&t.filials,{hash:{},inverse:U.noop,fn:U.program(5,s,i),data:i}),(N||0===N)&&(O+=N),O+=q((B=n.module||t&&t.module,F={hash:{},data:i},B?B.call(t,"microSchedule",F):$.call(t,"module","microSchedule",F))),B=n.module||t&&t.module,F={hash:{},inverse:U.noop,fn:U.program(7,l,i),data:i},N=B?B.call(t,"cardActions",F):$.call(t,"module","cardActions",F),(N||0===N)&&(O+=N),O+='<div class="card__phonesDropdown"></div>',N=n["if"].call(t,(N=t&&t.mediaButtons,null==N||N===!1?N:N.hasButtons),{hash:{},inverse:U.noop,fn:U.program(9,c,i),data:i}),(N||0===N)&&(O+=N),O+=q((B=n.module||t&&t.module,F={hash:{},data:i},B?B.call(t,"promoMobile",F):$.call(t,"module","promoMobile",F)))+q((B=n.p||t&&t.p,F={hash:{},data:i},B?B.call(t,"photos",F):$.call(t,"p","photos",F))),N=n["if"].call(t,t&&t.ads,{hash:{},inverse:U.noop,fn:U.program(11,u,i),data:i}),(N||0===N)&&(O+=N),O+="</section>",N=n["if"].call(t,t&&t.discounts,{hash:{},inverse:U.noop,fn:U.program(13,d,i),data:i}),(N||0===N)&&(O+=N),O+='<section class="card__section _attrs">',N=n["if"].call(t,(N=t&&t.attributes,N=null==N||N===!1?N:N.full,null==N||N===!1?N:N.length),{hash:{},inverse:U.noop,fn:U.program(15,h,i),data:i}),(N||0===N)&&(O+=N),N=n["if"].call(t,(N=t&&t.payment,null==N||N===!1?N:N.length),{hash:{},inverse:U.noop,fn:U.program(17,p,i),data:i}),(N||0===N)&&(O+=N),O+="</section>",B=n.module||t&&t.module,F={hash:{},inverse:U.noop,fn:U.program(20,m,i),data:i},N=B?B.call(t,"cardInfrastructureItem",F):$.call(t,"module","cardInfrastructureItem",F),(N||0===N)&&(O+=N),B=n.module||t&&t.module,F={hash:{},inverse:U.noop,fn:U.program(22,g,i),data:i},N=B?B.call(t,"schedule",F):$.call(t,"module","schedule",F),(N||0===N)&&(O+=N),B=n.module||t&&t.module,F={hash:{},inverse:U.noop,fn:U.program(24,_,i),data:i},N=B?B.call(t,"contact",F):$.call(t,"module","contact",F),(N||0===N)&&(O+=N),O+='<div class="card__section _geo">'+q((B=n.p||t&&t.p,F={hash:{},data:i},B?B.call(t,"addressForGeoBlock",F):$.call(t,"p","addressForGeoBlock",F)))+'<div class="card__geoComments">',N=n["if"].call(t,t&&t.addressComment,{hash:{},inverse:U.noop,fn:U.program(26,v,i),data:i}),(N||0===N)&&(O+=N),N=n["if"].call(t,t&&t.drilldown,{hash:{},inverse:U.noop,fn:U.program(28,y,i),data:i}),(N||0===N)&&(O+=N),O+="</div>",N=n["if"].call(t,t&&t.showBuildingInfo,{hash:{},inverse:U.noop,fn:U.program(30,b,i),data:i}),(N||0===N)&&(O+=N),B=n.module||t&&t.module,F={hash:{},inverse:U.noop,fn:U.program(35,x,i),data:i},N=B?B.call(t,"cardNearStops",F):$.call(t,"module","cardNearStops",F),(N||0===N)&&(O+=N),B=n.module||t&&t.module,F={hash:{},inverse:U.noop,fn:U.program(37,C,i),data:i},N=B?B.call(t,"cardLandmarks",F):$.call(t,"module","cardLandmarks",F),(N||0===N)&&(O+=N),N=n["if"].call(t,t&&t.facilities,{hash:{},inverse:U.noop,fn:U.program(39,L,i),data:i}),(N||0===N)&&(O+=N),B=n.module||t&&t.module,F={hash:{},inverse:U.noop,fn:U.program(42,T,i),data:i},N=B?B.call(t,"cardFeatures",F):$.call(t,"module","cardFeatures",F),(N||0===N)&&(O+=N),N=n["if"].call(t,t&&t.nearParkings,{hash:{},inverse:U.noop,fn:U.program(44,S,i),data:i}),(N||0===N)&&(O+=N),O+="</div>",B=n.module||t&&t.module,F={hash:{},inverse:U.noop,fn:U.program(47,P,i),data:i},N=B?B.call(t,"firmCardReview",F):$.call(t,"module","firmCardReview",F),(N||0===N)&&(O+=N),B=n.module||t&&t.module,F={hash:{},inverse:U.noop,fn:U.program(49,j,i),data:i},N=B?B.call(t,"cardAttractions",F):$.call(t,"module","cardAttractions",F),(N||0===N)&&(O+=N),N=n["if"].call(t,t&&t.rubrics,{hash:{},inverse:U.noop,fn:U.program(51,M,i),data:i}),(N||0===N)&&(O+=N),B=n.module||t&&t.module,F={hash:{},inverse:U.noop,fn:U.program(53,A,i),data:i},N=B?B.call(t,"recoveryAds",F):$.call(t,"module","recoveryAds",F),(N||0===N)&&(O+=N),O+='<div class="card__proposals"></div>',B=n.module||t&&t.module,F={hash:{},inverse:U.noop,fn:U.program(56,R,i),data:i},N=B?B.call(t,"cardInfrastructure",F):$.call(t,"module","cardInfrastructure",F),(N||0===N)&&(O+=N),O+="</div>"+q((B=n.p||t&&t.p,F={hash:{},data:i},B?B.call(t,"footer",F):$.call(t,"p","footer",F)));
},this.jst_modules=this.jst_modules||{},this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.geoTemplate=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="card__drilldown">',(i=n.drilldown)?a=i.call(e,{hash:{},data:t}):(i=e&&e.drilldown,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+"</div>"}function r(e,t){var n="";return n+='<div class="card__features">'+f(typeof e===p?e.apply(e):e)+"</div>"}function s(e,t){var n="";return n+='<div class="card__actions">'+f(typeof e===p?e.apply(e):e)+"</div>"}function l(e,t){var n="";return n+='<section class="card__attractions">'+f(typeof e===p?e.apply(e):e)+"</section>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u,d,h="",p="function",f=this.escapeExpression,m=n.helperMissing,g=this;return h+=f((u=n.p||t&&t.p,d={hash:{},data:i},u?u.call(t,"geoHeader",d):m.call(t,"p","geoHeader",d)))+'<div class="card__content"><section class="card__section _primary">'+f((u=n.p||t&&t.p,d={hash:{},data:i},u?u.call(t,"address",d):m.call(t,"p","address",d))),c=n["if"].call(t,t&&t.drilldown,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(c||0===c)&&(h+=c),u=n.module||t&&t.module,d={hash:{},inverse:g.noop,fn:g.program(3,r,i),data:i},c=u?u.call(t,"cardFeatures",d):m.call(t,"module","cardFeatures",d),(c||0===c)&&(h+=c),u=n.module||t&&t.module,d={hash:{},inverse:g.noop,fn:g.program(5,s,i),data:i},c=u?u.call(t,"cardActions",d):m.call(t,"module","cardActions",d),(c||0===c)&&(h+=c),h+='<div class="card__phonesDropdown"></div>'+f((u=n.module||t&&t.module,d={hash:{},data:i},u?u.call(t,"promoMobile",d):m.call(t,"module","promoMobile",d)))+f((u=n.p||t&&t.p,d={hash:{},data:i},u?u.call(t,"photos",d):m.call(t,"p","photos",d)))+"</section>",u=n.module||t&&t.module,d={hash:{},inverse:g.noop,fn:g.program(7,l,i),data:i},c=u?u.call(t,"cardAttractions",d):m.call(t,"module","cardAttractions",d),(c||0===c)&&(h+=c),h+='<div class="card__googletag"></div></div>'+f((u=n.p||t&&t.p,d={hash:{},data:i},u?u.call(t,"geoFooter",d):m.call(t,"p","geoFooter",d)))},this.jst_modules=this.jst_modules||{},this.jst_modules.card=this.jst_modules.card||{},this.jst_modules.card.print=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<address class="cardToPrint__address"><div class="cardToPrint__addressLink">',a=e&&e.address,a=null==a||a===!1?a:a.street,a=typeof a===g?a.apply(e):a,(a||0===a)&&(i+=a),i+="</div>",a=n["if"].call(e,(a=e&&e.address,null==a||a===!1?a:a.comment),{hash:{},inverse:v.noop,fn:v.program(2,r,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.drilldown,{hash:{},inverse:v.noop,fn:v.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</address>"}function r(e,t){var n,a="";return a+='<div class="cardToPrint__addressComment"><span class="cardToPrint__addressCommentText">'+_((n=e&&e.address,n=null==n||n===!1?n:n.comment,typeof n===g?n.apply(e):n))+"</span></div>"}function s(e,t){var a,i,o="";return o+='<div class="cardToPrint__drilldown">',(i=n.drilldown)?a=i.call(e,{hash:{},data:t}):(i=e&&e.drilldown,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=_(a)+"</div>"}function l(e,t){var a,i="";return i+='<address class="card__address">',a=n.each.call(e,e&&e.address,{hash:{},inverse:v.noop,fn:v.program(7,c,t),data:t}),(a||0===a)&&(i+=a),i+="</address>"}function c(e,t){var n,a="";return a+='<span class="card__addressPart"><span class="card__addressLink">',n=typeof e===g?e.apply(e):e,(n||0===n)&&(a+=n),a+="</span></span>"}function u(e,t){var a,i,o="";return(i=n.contact)?a=i.call(e,{hash:{},data:t}):(i=e&&e.contact,a=typeof i===g?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o}function d(e,t){var a,i,o="";return o+='<div class="cardToPrint__schedule">',(i=n.schedule)?a=i.call(e,{hash:{},data:t}):(i=e&&e.schedule,a=typeof i===g?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function h(e,t){var a,i,o,r="";return r+='<div class="cardToPrint__nearStop"><span class="cardToPrint__nearStopName">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===g?i.call(e,{hash:{},data:t}):i),r+=_(a)+'</span><span class="cardToPrint__nearStopComment"> — '+_((i=n._i18n||e&&e._i18n,o={hash:{data:e&&e.distance},data:t},i?i.call(e,"DISTANCE",o):y.call(e,"_i18n","DISTANCE",o)))+"</span></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var p,f,m="",g="function",_=this.escapeExpression,v=this,y=n.helperMissing;return m+='<div class="cardToPrint _module_firmCard"><header class="cardToPrint__header"><h1 class="cardToPrint__headerTitle">',(f=n.name)?p=f.call(t,{hash:{},data:i}):(f=t&&t.name,p=typeof f===g?f.call(t,{hash:{},data:i}):f),m+=_(p)+'</h1></header><div class="cardToPrint__printDetails">',p=n["if"].call(t,(p=t&&t.address,null==p||p===!1?p:p.street),{hash:{},inverse:v.noop,fn:v.program(1,o,i),data:i}),(p||0===p)&&(m+=p),p=n["if"].call(t,t&&t.address,{hash:{},inverse:v.noop,fn:v.program(6,l,i),data:i}),(p||0===p)&&(m+=p),p=n["if"].call(t,t&&t.contact,{hash:{},inverse:v.noop,fn:v.program(9,u,i),data:i}),(p||0===p)&&(m+=p),p=n["if"].call(t,t&&t.schedule,{hash:{},inverse:v.noop,fn:v.program(11,d,i),data:i}),(p||0===p)&&(m+=p),p=n.each.call(t,(p=t&&t.geo,null==p||p===!1?p:p.nearStops),{hash:{},inverse:v.noop,fn:v.program(13,h,i),data:i}),(p||0===p)&&(m+=p),m+="</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.checkConnectionWidget=this.jst_modules.checkConnectionWidget||{},this.jst_modules.checkConnectionWidget.resultMessage=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=p((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Дом подключен. Выберите тариф.",i):h.call(e,"_gg","Дом подключен. Выберите тариф.",i)))}function r(e,t){var a,i="";return a=n["if"].call(e,e&&e.providerName,{hash:{},inverse:f.program(7,c,t),fn:f.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i}function s(e,t){var a,i,o,r="";return r+=p((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,'"%1" не подключает по вашему адресу.',e&&e.providerName,o):h.call(e,"_gg",'"%1" не подключает по вашему адресу.',e&&e.providerName,o))),a=n["if"].call(e,e&&e.otherProvidersLink,{hash:{},inverse:f.noop,fn:f.program(5,l,t),data:t}),(a||0===a)&&(r+=a),r}function l(e,t){var a,i,o,r="";return r+="\n             ",i=n._hgg||e&&e._hgg,o={hash:{link__class:"checkConnectionWidget__showAllProviders"},data:t},a=i?i.call(e,"Рекомендуем %{Link посмотреть других провайдеров}.",o):h.call(e,"_hgg","Рекомендуем %{Link посмотреть других провайдеров}.",o),(a||0===a)&&(r+=a),r}function c(e,t){var a,i,o="";return o+=p((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Ваш дом не подключен ни одним провайдером",i):h.call(e,"_gg","Ваш дом не подключен ни одним провайдером",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h=n.helperMissing,p=this.escapeExpression,f=this;return u=n["if"].call(t,t&&t.connected,{hash:{},inverse:f.program(3,r,i),fn:f.program(1,o,i),data:i}),(u||0===u)&&(d+=u),d},this.jst_modules=this.jst_modules||{},this.jst_modules.checkConnectionWidget=this.jst_modules.checkConnectionWidget||{},this.jst_modules.checkConnectionWidget.suggestList=function(e,t,n,a,i){function o(e,t){var n="";return n+='<li class="checkConnectionWidget__suggestItem"><div class="checkConnectionWidget__suggestText">'+c(typeof e===l?e.apply(e):e)+"</div></li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l="function",c=this.escapeExpression,u=this;return r=n.each.call(t,t&&t.suggestions,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},this.jst_modules=this.jst_modules||{},this.jst_modules.citySelectPhone=this.jst_modules.citySelectPhone||{},this.jst_modules.citySelectPhone.citySelectList=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<li class="citySelectPhone__item" data-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===c?i.call(e,{hash:{},data:t}):i),o+=u(a)+'"',a=n["if"].call(e,e&&e.letter,{hash:{},inverse:d.noop,fn:d.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+=">",(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===c?i.call(e,{hash:{},data:t}):i),o+=u(a)+"</li>"}function r(e,t){var a,i,o="";return o+=' data-letter="',(i=n.letter)?a=i.call(e,{hash:{},data:t}):(i=e&&e.letter,a=typeof i===c?i.call(e,{hash:{},data:t}):i),o+=u(a)+'"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c="function",u=this.escapeExpression,d=this;return s=n.each.call(t,t&&t.list,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l},this.jst_modules=this.jst_modules||{},this.jst_modules.contact=this.jst_modules.contact||{},this.jst_modules.contact.print=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="contact__group">',a=n.each.call(e,e&&e.phones,{hash:{},inverse:h.noop,fn:h.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function r(e,t){var a,i="";return i+='<div class="contact__groupItem _itemType_phone">'+d((a=e&&e.text,typeof a===u?a.apply(e):a)),a=n["if"].call(e,e&&e.comment,{hash:{},inverse:h.noop,fn:h.program(3,s,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function s(e,t){var n,a="";return a+='\n                 (<span class="contact__groupItemComment">'+d((n=e&&e.comment,typeof n===u?n.apply(e):n))+"</span>)\n            "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c="",u="function",d=this.escapeExpression,h=this;return l=n["if"].call(t,t&&t.phones,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(l||0===l)&&(c+=l),c},this.jst_modules=this.jst_modules||{},this.jst_modules.dashboard=this.jst_modules.dashboard||{},this.jst_modules.dashboard.meta=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<a href="',(i=n.seoLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.seoLink,a=typeof i===l?i.call(e,{hash:{},data:t}):i),o+=c(a)+'" class="dashboard__metarubricsItem _type_',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===l?i.call(e,{hash:{},data:t}):i),o+=c(a)+'" data-rubric-query="',(i=n.rubricQuery)?a=i.call(e,{hash:{},data:t}):(i=e&&e.rubricQuery,a=typeof i===l?i.call(e,{hash:{},data:t}):i),o+=c(a)+'"><span class="dashboard__metarubricsItemWrap">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===l?i.call(e,{hash:{},data:t}):i),o+=c(a)+"</span></a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l="function",c=this.escapeExpression,u=this;return r=n.each.call(t,t&&t.metaRubrics,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},this.jst_modules=this.jst_modules||{},this.jst_modules.dashboard=this.jst_modules.dashboard||{},this.jst_modules.dashboard.teaserGap=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<div class="dashboard__teaserGap"><div class="dashboard__teaserGapClose"></div><div class="dashboard__teaserGapTitle">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Отключите Adblock",s):c.call(t,"_t","Отключите Adblock",s)))+'</div><div class="dashboard__teaserGapText">',r=n._t||t&&t._t,s={hash:{},data:i},o=r?r.call(t,"Мы покажем вам новое<br>и интересное на 2gis.ru",s):c.call(t,"_t","Мы покажем вам новое<br>и интересное на 2gis.ru",s),(o||0===o)&&(l+=o),l+="</div>"+u((r=n.Icon||t&&t.Icon,s={hash:{"class":"dashboard__teaserGapIcon"},data:i},r?r.call(t,"dashboard__adBlock",s):c.call(t,"Icon","dashboard__adBlock",s)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.discountRating=this.jst_modules.discountRating||{},this.jst_modules.discountRating.tooltip=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<span class="discountRating__ratingTooltipResultTitle">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===c?i.call(e,{hash:{},data:t}):i),o+=u(a)+"</span>,\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c="function",u=this.escapeExpression,d=this;return r=n["if"].call(t,t&&t.title,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(r||0===r)&&(l+=r),(s=n.body)?r=s.call(t,{hash:{},data:i}):(s=t&&t.body,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r)},this.jst_modules=this.jst_modules||{},this.jst_modules.discountsCard=this.jst_modules.discountsCard||{},this.jst_modules.discountsCard.print=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<article class="discountsCard__discount"><div class="discountsCard__image"><img class="discountsCard__imageImg" src="',(i=n.cover)?a=i.call(e,{hash:{},data:t}):(i=e&&e.cover,a=typeof i===h?i.call(e,{hash:{},data:t}):i),s+=p(a)+'"></div><header class="discountsCard__discountTitle">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===h?i.call(e,{hash:{},data:t}):i),s+=p(a)+'</header><p class="discountsCard__discountDescription _full">',(i=n.descriptionHTML)?a=i.call(e,{hash:{},data:t}):(i=e&&e.descriptionHTML,a=typeof i===h?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(s+=a),s+="</p>",a=n["if"].call(e,e&&e.showDetails,{hash:{},inverse:m.noop,fn:m.program(2,r,t),data:t}),(a||0===a)&&(s+=a),s+='<div class="discountsCard__discountTime">'+p((i=n.Icon||e&&e.Icon,o={hash:{"class":"discountsCard__discountTimeIcon"},data:t},i?i.call(e,"discountsCard_time",o):f.call(e,"Icon","discountsCard_time",o))),(i=n.formattedDate)?a=i.call(e,{hash:{},data:t}):(i=e&&e.formattedDate,a=typeof i===h?i.call(e,{hash:{},data:t}):i),s+=p(a)+"</div></article>"}function r(e,t){var a,i="";return i+='<small class="discountsCard__discountDetails">',a=n["if"].call(e,e&&e.details,{hash:{},inverse:m.noop,fn:m.program(3,s,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.source,{hash:{},inverse:m.noop,fn:m.program(5,l,t),data:t}),(a||0===a)&&(i+=a),i+="</small>"}function s(e,t){var a,i,o="";return(i=n.details)?a=i.call(e,{hash:{},data:t}):(i=e&&e.details,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"&nbsp;\n                        "}function l(e,t){var a,i,o,r="";return r+=p((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Данные взяты с",o):f.call(e,"_t","Данные взяты с",o)))+'&nbsp;\n                            <a href="',(i=n.source)?a=i.call(e,{hash:{},data:t}):(i=e&&e.source,a=typeof i===h?i.call(e,{hash:{},data:t}):i),r+=p(a)+'" class="discountsCard__discountDetailsLink" target="_blank">',(i=n.source)?a=i.call(e,{hash:{},data:t}):(i=e&&e.source,a=typeof i===h?i.call(e,{hash:{},data:t}):i),r+=p(a)+"</a>.\n                        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u,d="",h="function",p=this.escapeExpression,f=n.helperMissing,m=this;return d+='<div class="discountsCard"><div class="discountsCard__header"><h1 class="discountsCard__headerTitle">',(u=n.name)?c=u.call(t,{hash:{},data:i}):(u=t&&t.name,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+'</h1></div><main class="discountsCard__content">',c=n.each.call(t,t&&t.discounts,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(c||0===c)&&(d+=c),d+="</main></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.eventCard=this.jst_modules.eventCard||{},this.jst_modules.eventCard.content=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<div class="eventCard__transport"><h2 class="eventCard__transportTitle">',i=n._gg||e&&e._gg,o={hash:{},data:t},a=i?i.call(e,"Прежде чем выдвигаться в город посмотрите<br>какие улицы перекроют и какие остановки не будут работать.",o):C.call(e,"_gg","Прежде чем выдвигаться в город посмотрите<br>какие улицы перекроют и какие остановки не будут работать.",o),(a||0===a)&&(s+=a),s+="</h2>",a=n["if"].call(e,(a=e&&e.transport,null==a||a===!1?a:a.street),{hash:{},inverse:I.noop,fn:I.program(2,r,t),data:t}),(a||0===a)&&(s+=a),a=n["if"].call(e,(a=e&&e.transport,null==a||a===!1?a:a.station),{hash:{},inverse:I.noop,fn:I.program(5,l,t),data:t}),(a||0===a)&&(s+=a),s+="</div>"}function r(e,t){var a,i,o,r="";return i=n.Link||e&&e.Link,o={hash:{"class":"_type_local eventCard__transportLink","data-layer-name":(a=e&&e.transport,null==a||a===!1?a:a.street),"data-type":"Street"},inverse:I.noop,fn:I.program(3,s,t),data:t},a=i?i.call(e,o):C.call(e,"Link",o),(a||0===a)&&(r+=a),r}function s(e,t){var a,i;return L((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Перекрытые улицы",i):C.call(e,"_gg","Перекрытые улицы",i)))}function l(e,t){var a,i,o,r="";return i=n.Link||e&&e.Link,o={hash:{"class":"_type_local eventCard__transportLink","data-layer-name":(a=e&&e.transport,null==a||a===!1?a:a.station),"data-type":"Station"},inverse:I.noop,fn:I.program(6,c,t),data:t},a=i?i.call(e,o):C.call(e,"Link",o),(a||0===a)&&(r+=a),r}function c(e,t){var a,i;return L((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Закрытые остановки",i):C.call(e,"_gg","Закрытые остановки",i)))}function u(e,t){var a,i,o,r="";return r+='<div class="eventCard__section" name="places"><h2 class="eventCard__sectionTitle">'+L((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Посмотрите интересные места",o):C.call(e,"_gg","Посмотрите интересные места",o))),a=n["if"].call(e,e&&e.events,{hash:{},inverse:I.noop,fn:I.program(9,d,t),data:t}),(a||0===a)&&(r+=a),r+='</h2><p class="eventCard__sectionPara">',a=e&&e.text,a=null==a||a===!1?a:a.places,a=typeof a===T?a.apply(e):a,(a||0===a)&&(r+=a),r+='</p><ul class="eventCard__places">',a=n.each.call(e,e&&e.places,{hash:{},inverse:I.noop,fn:I.program(12,p,t),data:t}),(a||0===a)&&(r+=a),r+="</ul></div>"}function d(e,t){var a,i,o,r="";return r+="<br>"+L((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"или ",o):C.call(e,"_gg","или ",o))),i=n.Link||e&&e.Link,o={hash:{href:"#events","data-link-type":"events","class":"_type_local eventCard__sectionTitleLink"},inverse:I.noop,fn:I.program(10,h,t),data:t},a=i?i.call(e,o):C.call(e,"Link",o),(a||0===a)&&(r+=a),r}function h(e,t){var a,i;return L((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"события",i):C.call(e,"_gg","события",i)))}function p(e,t){var a,i,o,r="";return r+='<li class="eventCard__placesItem" data-object-id="',(i=n.objectId)?a=i.call(e,{hash:{},data:t}):(i=e&&e.objectId,a=typeof i===T?i.call(e,{hash:{},data:t}):i),r+=L(a)+'" data-result-view="',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===T?i.call(e,{hash:{},data:t}):i),r+=L(a)+'"><div class="eventCard__placesItemName">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===T?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+="</div>"+L((i=n.Link||e&&e.Link,o={hash:{href:e&&e.seoLink,"class":"_undashed eventCard__placesItemAddress"},data:t},i?i.call(e,e&&e.address,o):C.call(e,"Link",e&&e.address,o)))+'<img src="',(i=n.img)?a=i.call(e,{hash:{},data:t}):(i=e&&e.img,a=typeof i===T?i.call(e,{hash:{},data:t}):i),r+=L(a)+'" alt="',(i=n.address)?a=i.call(e,{hash:{},data:t}):(i=e&&e.address,a=typeof i===T?i.call(e,{hash:{},data:t}):i),r+=L(a)+'" class="eventCard__placesItemImg">',a=n.each.call(e,e&&e.description,{hash:{},inverse:I.noop,fn:I.program(13,f,t),data:t}),(a||0===a)&&(r+=a),r+="</li>"}function f(e,t){var n,a="";return a+='<p class="eventCard__placesItemDescPara">',n=typeof e===T?e.apply(e):e,(n||0===n)&&(a+=n),a+="</p>"}function m(e,t){var a,i,o,r="";return r+='<div class="eventCard__section" name="events"><h2 class="eventCard__sectionTitle">'+L((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Афиша дня",o):C.call(e,"_gg","Афиша дня",o))),a=n["if"].call(e,e&&e.places,{hash:{},inverse:I.noop,fn:I.program(16,g,t),data:t}),(a||0===a)&&(r+=a),r+='</h2><p class="eventCard__sectionPara">',a=e&&e.text,a=null==a||a===!1?a:a.event,a=typeof a===T?a.apply(e):a,(a||0===a)&&(r+=a),r+='</p><div class="eventCard__events">',a=n.each.call(e,e&&e.events,{hash:{},inverse:I.noop,fn:I.program(19,v,t),data:t}),(a||0===a)&&(r+=a),r+="</div></div>"}function g(e,t){var a,i,o,r="";return r+="<br>"+L((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"или посетить ",o):C.call(e,"_gg","или посетить ",o))),i=n.Link||e&&e.Link,o={hash:{href:"#places","data-link-type":"places","class":"_type_local eventCard__sectionTitleLink"},inverse:I.noop,fn:I.program(17,_,t),data:t},a=i?i.call(e,o):C.call(e,"Link",o),(a||0===a)&&(r+=a),r}function _(e,t){var a,i;return L((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"интересные места",i):C.call(e,"_gg","интересные места",i)))}function v(e,t){var a,i,o="";return o+='<a href="',(i=n.seoLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.seoLink,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=L(a)+'" class="eventCard__eventsItem _',(i=n.size)?a=i.call(e,{hash:{},data:t}):(i=e&&e.size,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=L(a)+'" data-name="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=L(a)+'" data-object-id="',(i=n.objectId)?a=i.call(e,{hash:{},data:t}):(i=e&&e.objectId,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=L(a)+'" data-result-view="',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=L(a)+'" ',a=n["if"].call(e,e&&e.main,{hash:{},inverse:I.noop,fn:I.program(20,y,t),data:t}),(a||0===a)&&(o+=a),o+='><div class="eventCard__eventsImgWrapper"><img src="',(i=n.img)?a=i.call(e,{hash:{},data:t}):(i=e&&e.img,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=L(a)+'" alt="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=L(a)+'" class="eventCard__eventsImg"></div><div class="eventCard__eventsContent"><div class="eventCard__eventsDataBlock"><div class="eventCard__eventsType">',(i=n.eventType)?a=i.call(e,{hash:{},data:t}):(i=e&&e.eventType,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=L(a)+'</div><div class="eventCard__eventsName">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===T?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+='</div><div class="eventCard__eventsDesc">',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===T?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+='</div></div> <div class="eventCard__eventsDataBlock"><div class="eventCard__eventsPlace">',(i=n.place)?a=i.call(e,{hash:{},data:t}):(i=e&&e.place,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=L(a)+'</div><div class="eventCard__eventsAttr">',(i=n.attr)?a=i.call(e,{hash:{},data:t}):(i=e&&e.attr,a=typeof i===T?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div></div></div></a>"}function y(e,t){var a,i,o="";return o+=' data-title="'+L((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Выбор редакции",i):C.call(e,"_gg","Выбор редакции",i)))+'"'}function b(e,t){var a,i,o,r="";return r+='<div class="eventCard__section _parks"><h2 class="eventCard__sectionTitle">'+L((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Праздник в парке",o):C.call(e,"_gg","Праздник в парке",o)))+'</h2><p class="eventCard__sectionPara">',i=n._gg||e&&e._gg,o={hash:{},data:t},a=i?i.call(e,"Праздничные гуляния пройдут по&nbsp;всей Москве.<br>Если вы&nbsp;хотите повеселиться ближе к&nbsp;дому, то&nbsp;выбирайте парк&nbsp;&mdash; если он<br>в&nbsp;нашем списке, то&nbsp;будьте уверены, что там будет на&nbsp;что посмотреть.",o):C.call(e,"_gg","Праздничные гуляния пройдут по&nbsp;всей Москве.<br>Если вы&nbsp;хотите повеселиться ближе к&nbsp;дому, то&nbsp;выбирайте парк&nbsp;&mdash; если он<br>в&nbsp;нашем списке, то&nbsp;будьте уверены, что там будет на&nbsp;что посмотреть.",o),(a||0===a)&&(r+=a),r+='</p><ul class="eventCard__districts">',a=n.each.call(e,e&&e.districts,{hash:{},inverse:I.noop,fn:I.program(23,k,t),data:t}),(a||0===a)&&(r+=a),r+='</ul><div class="eventCard__parksWrap">'+L((i=n.p||e&&e.p,o={hash:{},data:t},i?i.call(e,"parks",o):C.call(e,"p","parks",o)))+"</div></div>"}function k(e,t){var a,i,o="";return o+='<li class="eventCard__districtsItem">'+L((a=n.Link||e&&e.Link,i={hash:{"class":"_type_local eventCard__districtsItemLink","data-district":e},data:t},a?a.call(e,e,i):C.call(e,"Link",e,i)))+"</li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var w,x="",C=n.helperMissing,L=this.escapeExpression,I=this,T="function";return w=n["if"].call(t,t&&t.transport,{hash:{},inverse:I.noop,fn:I.program(1,o,i),data:i}),(w||0===w)&&(x+=w),w=n["if"].call(t,t&&t.places,{hash:{},inverse:I.noop,fn:I.program(8,u,i),data:i}),(w||0===w)&&(x+=w),w=n["if"].call(t,t&&t.events,{hash:{},inverse:I.noop,fn:I.program(15,m,i),data:i}),(w||0===w)&&(x+=w),w=n["if"].call(t,t&&t.parks,{hash:{},inverse:I.noop,fn:I.program(22,b,i),data:i}),(w||0===w)&&(x+=w),x},this.jst_modules=this.jst_modules||{},this.jst_modules.eventCard=this.jst_modules.eventCard||{},this.jst_modules.eventCard.parkEvent=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r="",s="function",l=this.escapeExpression;return r+='<li class="eventCard__parksEventsItem"><time class="eventCard__parksEventsItemTime">'+l((o=t&&t.time,typeof o===s?o.apply(t):o))+'</time><div class="eventCard__parksEventsItemTitle">',o=t&&t.title,o=typeof o===s?o.apply(t):o,(o||0===o)&&(r+=o),r+='</div><div class="eventCard__parksEventsItemText">',o=t&&t.text,o=typeof o===s?o.apply(t):o,(o||0===o)&&(r+=o),r+="</div></li>"},this.jst_modules=this.jst_modules||{},this.jst_modules.eventCard=this.jst_modules.eventCard||{},this.jst_modules.eventCard.parks=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<li class="eventCard__parksItem" data-name="'+u(typeof e===c?e.apply(e):e)+'"><span class="eventCard__parksItemName">'+u(typeof e===c?e.apply(e):e)+'</span><span class="eventCard__parksItemPointer"><span class="eventCard__parksItemPointerText">'+u((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"на карте",i):d.call(e,"_gg","на карте",i)))+"</span></span></li>"}function r(e,t){var a,i,o="";return o+=u((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"parkEvent",i):d.call(e,"p","parkEvent",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c="function",u=this.escapeExpression,d=n.helperMissing,h=this;return l+='<ul class="eventCard__parks">',s=n.each.call(t,t&&t.parks,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l+='</ul><ul class="eventCard__parksEvents">',s=n.each.call(t,t&&t.parkEvents,{hash:{},inverse:h.noop,fn:h.program(3,r,i),data:i}),(s||0===s)&&(l+=s),l+="</ul>"},this.jst_modules=this.jst_modules||{},this.jst_modules.extraLayers=this.jst_modules.extraLayers||{},this.jst_modules.extraLayers.listItem=function(e,t,n,a,i){function o(e,t){return" _new"}function r(e,t){var a,i,o="";return o+='<div class="extraLayers__layerIconWrap"><img class="extraLayers__layerIcon" src="',(i=n.icon)?a=i.call(e,{hash:{},data:t}):(i=e&&e.icon,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+'"></div>'}function s(e,t){var a,i,o="";return o+=' data-sublayer="',(i=n.sublayer)?a=i.call(e,{hash:{},data:t}):(i=e&&e.sublayer,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+'"'}function l(e,t){var a,i="";return i+='<div class="extraLayers__subLayers"><ul class="extraLayers__list">',a=n.each.call(e,e&&e.subLayers,{hash:{},inverse:g.noop,fn:g.program(8,c,t),data:t}),(a||0===a)&&(i+=a),i+="</ul></div>"}function c(e,t){var a,i,o="";return o+=f((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,e&&e.type,"listItem",i):m.call(e,"p",e&&e.type,"listItem",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d,h="",p="function",f=this.escapeExpression,m=n.helperMissing,g=this;return h+='<li class="extraLayers__listItem ',(d=n.menuClasses)?u=d.call(t,{hash:{},data:i}):(d=t&&t.menuClasses,u=typeof d===p?d.call(t,{hash:{},data:i}):d),h+=f(u),u=n["if"].call(t,t&&t.isNew,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(u||0===u)&&(h+=u),h+='">',u=n["if"].call(t,t&&t.icon,{hash:{},inverse:g.noop,fn:g.program(3,r,i),data:i}),(u||0===u)&&(h+=u),h+='<span class="extraLayers__layerSwitcher"><input type="checkbox" id="',(d=n.id)?u=d.call(t,{hash:{},data:i}):(d=t&&t.id,u=typeof d===p?d.call(t,{hash:{},data:i}):d),h+=f(u)+'" data-type="',(d=n.type)?u=d.call(t,{hash:{},data:i}):(d=t&&t.type,u=typeof d===p?d.call(t,{hash:{},data:i}):d),h+=f(u)+'" data-layer="',(d=n.layer)?u=d.call(t,{hash:{},data:i}):(d=t&&t.layer,u=typeof d===p?d.call(t,{hash:{},data:i}):d),h+=f(u)+'"',u=n["if"].call(t,t&&t.sublayer,{hash:{},inverse:g.noop,fn:g.program(5,s,i),data:i}),(u||0===u)&&(h+=u),h+=" ",(d=n.checked)?u=d.call(t,{hash:{},data:i}):(d=t&&t.checked,u=typeof d===p?d.call(t,{hash:{},data:i}):d),h+=f(u)+' class="extraLayers__layerSwitcherInput"><label for="',(d=n.id)?u=d.call(t,{hash:{},data:i}):(d=t&&t.id,u=typeof d===p?d.call(t,{hash:{},data:i}):d),h+=f(u)+'" class="extraLayers__layerSwitcherLabel"></label></span><span class="extraLayers__layer" data-id="',(d=n.id)?u=d.call(t,{hash:{},data:i}):(d=t&&t.id,u=typeof d===p?d.call(t,{hash:{},data:i}):d),h+=f(u)+'">',(d=n.name)?u=d.call(t,{hash:{},data:i}):(d=t&&t.name,u=typeof d===p?d.call(t,{hash:{},data:i}):d),h+=f(u)+"</span>",u=n["if"].call(t,t&&t.subLayers,{hash:{},inverse:g.noop,fn:g.program(7,l,i),data:i}),(u||0===u)&&(h+=u),h+="</li>"},this.jst_modules=this.jst_modules||{},this.jst_modules.extraLayers=this.jst_modules.extraLayers||{},this.jst_modules.extraLayers.tooltip=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<div class="extraLayers__tooltip _hidden">'+u((r=n.Icon||t&&t.Icon,s={hash:{"class":"extraLayers__tooltipIcon"},data:i},r?r.call(t,"victory_tooltipIcon",s):c.call(t,"Icon","victory_tooltipIcon",s))),r=n._gg||t&&t._gg,s={hash:{},data:i},o=r?r.call(t,"Узнайте о параде, салюте<br>и перекрытых улицах",s):c.call(t,"_gg","Узнайте о параде, салюте<br>и перекрытых улицах",s),(o||0===o)&&(l+=o),l+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.extras=this.jst_modules.extras||{},this.jst_modules.extras.menuLanguages=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<a  href="'+u((a=e&&e.href,typeof a===c?a.apply(e):a))+'"\n        class="extras__menuItem _language',a=n["if"].call(e,e&&e.active,{hash:{},inverse:d.noop,fn:d.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+='"\n        data-lang-code="'+u((a=e&&e.code,typeof a===c?a.apply(e):a))+'">',a=e&&e.title,a=typeof a===c?a.apply(e):a,(a||0===a)&&(i+=a),i+="</a>"}function r(e,t){return" _active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c="function",u=this.escapeExpression,d=this;return s=n.each.call(t,t&&t.languages,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l},this.jst_modules=this.jst_modules||{},this.jst_modules.extras=this.jst_modules.extras||{},this.jst_modules.extras.menuMore=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<a href="',(i=n.extensionLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.extensionLink,a=typeof i===c?i.call(e,{hash:{},data:t}):i),r+=u(a)+'" target="_blank" class="extras__menuItem _extension" title="'+u((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"2ГИС для браузера",o):d.call(e,"_t","2ГИС для браузера",o)))+'">'+u((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"2ГИС для браузера",o):d.call(e,"_t","2ГИС для браузера",o)))+"</a>"}function r(e,t){var a,i,o,r="";return r+='<a href="',(i=n.regionAddFirmLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.regionAddFirmLink,a=typeof i===c?i.call(e,{hash:{},data:t}):i),r+=u(a)+'" target="_blank" class="extras__menuItem _addFirm" title="'+u((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Добавить организацию",o):d.call(e,"_t","Добавить организацию",o)))+'">'+u((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Добавить организацию",o):d.call(e,"_t","Добавить организацию",o)))+"</a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c="function",u=this.escapeExpression,d=n.helperMissing,h=this;return s=n["if"].call(t,t&&t.extensionLink,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(s||0===s)&&(l+=s),s=n["if"].call(t,t&&t.regionAddFirmLink,{hash:{},inverse:h.noop,fn:h.program(3,r,i),data:i}),(s||0===s)&&(l+=s),l},this.jst_modules=this.jst_modules||{},this.jst_modules.favoritesTooltip=this.jst_modules.favoritesTooltip||{},this.jst_modules.favoritesTooltip.auth=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],
n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<span class="favoritesTooltip__textHeader">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Единое избранное",s):c.call(t,"_t","Единое избранное",s)))+"</span>",r=n._ht||t&&t._ht,s={hash:{link__class:"_scheme_dark favoritesTooltip__textLink"},data:i},o=r?r.call(t,"%{Link Авторизуйтесь}, чтобы объединить ваше избранное на всех устройствах",s):c.call(t,"_ht","%{Link Авторизуйтесь}, чтобы объединить ваше избранное на всех устройствах",s),(o||0===o)&&(l+=o),l},this.jst_modules=this.jst_modules||{},this.jst_modules.favoritesTooltip=this.jst_modules.favoritesTooltip||{},this.jst_modules.favoritesTooltip.overflow=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<span class="favoritesTooltip__textHeader">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Всё. Места совсем нет",s):c.call(t,"_t","Всё. Места совсем нет",s)))+"</span>",r=n._ht||t&&t._ht,s={hash:{link__class:"_scheme_dark favoritesTooltip__textLink"},data:i},o=r?r.call(t,"Чтобы увеличить объём избранного, необходимо %{Link авторизоваться}.",s):c.call(t,"_ht","Чтобы увеличить объём избранного, необходимо %{Link авторизоваться}.",s),(o||0===o)&&(l+=o),l},this.jst_modules=this.jst_modules||{},this.jst_modules.favoritesTooltip=this.jst_modules.favoritesTooltip||{},this.jst_modules.favoritesTooltip.overflowRemote=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<span class="favoritesTooltip__textHeader">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Слишком много избранного",s):c.call(t,"_t","Слишком много избранного",s)))+"</span>",r=n._ht||t&&t._ht,s={hash:{link__class:"_scheme_dark favoritesTooltip__textLink"},data:i},o=r?r.call(t,"Чтобы добавить что-нибудь нужное, удалите что-нибудь ненужное",s):c.call(t,"_ht","Чтобы добавить что-нибудь нужное, удалите что-нибудь ненужное",s),(o||0===o)&&(l+=o),l},this.jst_modules=this.jst_modules||{},this.jst_modules.favoritesWidgetToggle=this.jst_modules.favoritesWidgetToggle||{},this.jst_modules.favoritesWidgetToggle.action=function(e,t,n,a,i){function o(e,t){return" _disabled"}function r(e,t){return" _checked"}function s(e,t){return" _opened"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h=this,p=n.helperMissing,f=this.escapeExpression;return d+='<div class="favoritesWidgetToggle__btn\n    ',l=n["if"].call(t,t&&t.disabled,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+="\n    ",l=n["if"].call(t,t&&t.checked,{hash:{},inverse:h.noop,fn:h.program(3,r,i),data:i}),(l||0===l)&&(d+=l),d+="\n    ",l=n["if"].call(t,t&&t.opened,{hash:{},inverse:h.noop,fn:h.program(5,s,i),data:i}),(l||0===l)&&(d+=l),d+='">'+f((c=n.Icon||t&&t.Icon,u={hash:{"class":"favoritesWidgetToggle__btnIcon"},data:i},c?c.call(t,"action-favorite",u):p.call(t,"Icon","action-favorite",u)))+'</div><div class="favoritesWidgetToggle__text">'+f((c=n._t||t&&t._t,u={hash:{},data:i},c?c.call(t,"Избранное",u):p.call(t,"_t","Избранное",u)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.favoritesWidgetToggle=this.jst_modules.favoritesWidgetToggle||{},this.jst_modules.favoritesWidgetToggle.mediaCard=function(e,t,n,a,i){function o(e,t){return" _disabled"}function r(e,t){return" _checked"}function s(e,t){return" _opened"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h=this,p=n.helperMissing,f=this.escapeExpression;return d+='<div class="favoritesWidgetToggle__btn\n    ',l=n["if"].call(t,t&&t.disabled,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+="\n    ",l=n["if"].call(t,t&&t.checked,{hash:{},inverse:h.noop,fn:h.program(3,r,i),data:i}),(l||0===l)&&(d+=l),d+="\n    ",l=n["if"].call(t,t&&t.opened,{hash:{},inverse:h.noop,fn:h.program(5,s,i),data:i}),(l||0===l)&&(d+=l),d+='">'+f((c=n.Icon||t&&t.Icon,u={hash:{"class":"favoritesWidgetToggle__btnIcon"},data:i},c?c.call(t,"action-favorite",u):p.call(t,"Icon","action-favorite",u)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.favoritesWidgetToggle=this.jst_modules.favoritesWidgetToggle||{},this.jst_modules.favoritesWidgetToggle.mediaMiniCard=function(e,t,n,a,i){function o(e,t){return" _disabled"}function r(e,t){return" _checked"}function s(e,t){return" _opened"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h=this,p=n.helperMissing,f=this.escapeExpression;return d+='<div class="favoritesWidgetToggle__btn\n    ',l=n["if"].call(t,t&&t.disabled,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+="\n    ",l=n["if"].call(t,t&&t.checked,{hash:{},inverse:h.noop,fn:h.program(3,r,i),data:i}),(l||0===l)&&(d+=l),d+="\n    ",l=n["if"].call(t,t&&t.opened,{hash:{},inverse:h.noop,fn:h.program(5,s,i),data:i}),(l||0===l)&&(d+=l),d+='">'+f((c=n.Icon||t&&t.Icon,u={hash:{"class":"favoritesWidgetToggle__btnIcon _regular"},data:i},c?c.call(t,"media_like",u):p.call(t,"Icon","media_like",u)))+f((c=n.Icon||t&&t.Icon,u={hash:{"class":"favoritesWidgetToggle__btnIcon _checked"},data:i},c?c.call(t,"media_like-active",u):p.call(t,"Icon","media_like-active",u)))+f((c=n.Icon||t&&t.Icon,u={hash:{"class":"favoritesWidgetToggle__btnIcon _hovered"},data:i},c?c.call(t,"media_like-hover",u):p.call(t,"Icon","media_like-hover",u)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.feedback=this.jst_modules.feedback||{},this.jst_modules.feedback.form=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="feedback__popupSection">'+I((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,e&&e.introPartialName,i):L.call(e,"p",e&&e.introPartialName,i)))+"</div>"}function r(e,t){var a,i="";return i+='<div class="feedback__formFieldRating">',a=n.each.call(e,e&&e.rating,{hash:{},inverse:S.noop,fn:S.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function s(e,t){var a,i,o="";return o+='<input type="radio" name="feedback_rating" id="',(i=n.mod)?a=i.call(e,{hash:{},data:t}):(i=e&&e.mod,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=I(a)+'" class="feedback__formRatingInput" value="',(i=n.evaluation)?a=i.call(e,{hash:{},data:t}):(i=e&&e.evaluation,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=I(a)+'"> <label for="',(i=n.mod)?a=i.call(e,{hash:{},data:t}):(i=e&&e.mod,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=I(a)+'" class="feedback__formRatingLabel _type_',(i=n.mod)?a=i.call(e,{hash:{},data:t}):(i=e&&e.mod,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=I(a)+'">',(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=I(a)+"</label>"}function l(e,t){var a,i,o,r="";return r+='<div class="feedback__formField"><input type="text" class="feedback__formFieldInput feedback__formFieldName" placeholder="'+I((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Имя",o):L.call(e,"_t","Имя",o)))+'" name="name" maxlength="256" value="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===T?i.call(e,{hash:{},data:t}):i),r+=I(a)+'"></div>'}function c(e,t){var a,i,o="";return o+='<div class="feedback__formField"><input type="text" class="feedback__formFieldInput feedback__formFieldEmail" placeholder="',(i=n.emailPlaceholder)?a=i.call(e,{hash:{},data:t}):(i=e&&e.emailPlaceholder,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=I(a)+'" name="email" maxlength="256" value="',(i=n.email)?a=i.call(e,{hash:{},data:t}):(i=e&&e.email,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=I(a)+'"></div>'}function u(e,t){var a,i,o,r="";return r+='<div class="feedback__formField _attachment feedback__formAttach"><div class="feedback__formFieldFiledesc"><div class="feedback__formFieldFiledescName"></div> ',i=n.Link||e&&e.Link,o={hash:{"class":"feedback__formFieldFiledescClear _scheme_dark _small"},inverse:S.noop,fn:S.program(11,d,t),data:t},a=i?i.call(e,o):L.call(e,"Link",o),(a||0===a)&&(r+=a),r+='</div> <div class="feedback__formFieldFile">',i=n.Link||e&&e.Link,o={hash:{target:"_blank","class":"_scheme_dark _small"},inverse:S.noop,fn:S.program(13,h,t),data:t},a=i?i.call(e,o):L.call(e,"Link",o),(a||0===a)&&(r+=a),r+=' <div class="feedback__formFieldFileWrap"><input type="file" class="feedback__formFieldFileInput feedback__formFile" name="file"></div></div><div class="feedback__formFieldFilecomment">\n                −\n                '+I((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"png, gif, jpg или bmp не более %1 Мб",e&&e.maxFileSize,o):L.call(e,"_t","png, gif, jpg или bmp не более %1 Мб",e&&e.maxFileSize,o)))+"</div></div>"}function d(e,t){var a,i,o="";return o+=I((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"удалить",i):L.call(e,"_t","удалить",i)))}function h(e,t){var a,i,o="";return o+=I((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Прикрепить скриншот",i):L.call(e,"_t","Прикрепить скриншот",i)))}function p(e,t){var a,i,o="";return o+='<div class="feedback__formField _chat">'+I((a=n.Link||e&&e.Link,i={hash:{"class":"feedback__chatLink _scheme_dark  _small"},data:t},a?a.call(e,"Онлайн-чат",i):L.call(e,"Link","Онлайн-чат",i)))+"\n            —\n            "+I((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Сообщите об ошибке в данных, обновлении информации или новой фирме.",i):L.call(e,"_gg","Сообщите об ошибке в данных, обновлении информации или новой фирме.",i)))+"</div>"}function f(e,t){var a,i,o,r="";return r+='<div class="feedback__formField _loyalty">'+I((i=n.Link||e&&e.Link,o={hash:{href:"http://ufa-urban-expert.2gis.ru?utm_source=online&utm_medium=feedback&utm_campaign=contest",target:"_blank","class":"feedback__teaserLink _scheme_dark _undashed"},data:t},i?i.call(e,"Знаете Уфу лучше всех?",o):L.call(e,"Link","Знаете Уфу лучше всех?",o)))+'<div class="feedback__teaserDescription">',i=n._gg||e&&e._gg,o={hash:{},data:t},a=i?i.call(e,"Находите неточности в 2ГИС и&nbsp;выиграйте&nbsp;поездку в Прагу на двоих",o):L.call(e,"_gg","Находите неточности в 2ГИС и&nbsp;выиграйте&nbsp;поездку в Прагу на двоих",o),(a||0===a)&&(r+=a),r+="</div>"+I((i=n.Icon||e&&e.Icon,o={hash:{"class":"feedback__teaserIcon"},data:t},i?i.call(e,"promo_loyaltyCity",o):L.call(e,"Icon","promo_loyaltyCity",o)))+'</div><div class="feedback__formField _extra">',a=n["if"].call(e,e&&e.phone,{hash:{},inverse:S.noop,fn:S.program(18,m,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function m(e,t){var a,i,o="";return o+='<div class="feedback__reference">'+I((a=n.Link||e&&e.Link,i={hash:{href:"tel:88002003600",target:"_blank","class":"feedback__phoneLink _scheme_dark _undashed _small"},data:t},a?a.call(e,"8 800 2003-600",i):L.call(e,"Link","8 800 2003-600",i)))+"&nbsp;—&nbsp;"+I((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"cправочная 2ГИС.",i):L.call(e,"_gg","cправочная 2ГИС.",i)))+"</div> "}function g(e,t){var a,i="";return a=n["if"].call(e,e&&e.phone,{hash:{},inverse:S.noop,fn:S.program(21,_,t),data:t}),(a||0===a)&&(i+=a),i}function _(e,t){var a,i,o,r="";return r+='<div class="feedback__formField _phone">'+I((i=n.Link||e&&e.Link,o={hash:{href:"tel:88002003600",target:"_blank","class":"feedback__phoneLink _scheme_dark  _small"},data:t},i?i.call(e,"8 800 2003-600",o):L.call(e,"Link","8 800 2003-600",o)))+"\n                —\n                ",i=n._gg||e&&e._gg,o={hash:{},data:t},a=i?i.call(e,"Единая справочная 2ГИС.<br />Обновление информации, техподдержка.",o):L.call(e,"_gg","Единая справочная 2ГИС.<br />Обновление информации, техподдержка.",o),(a||0===a)&&(r+=a),r+="</div>"}function v(e,t){var a,i,o,r="";return r+='<div class="feedback__formField _privateOffice">'+I((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Вы владелец компании?",o):L.call(e,"_t","Вы владелец компании?",o)))+" ",a=n["if"].call(e,e&&e.claimToFirm,{hash:{},inverse:S.program(26,b,t),fn:S.program(24,y,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function y(e,t){var a,i,o,r="";return i=n._ht||e&&e._ht,o={hash:{link__target:"_blank",link__class:"feedback__ownerEr _scheme_dark _small",link__href:e&&e.firmPrivateOfficeLink},data:t},a=i?i.call(e,"Укажите актуальную электронную почту в %{Link Личном кабинете}, чтобы получать вопросы пользователей.",o):L.call(e,"_ht","Укажите актуальную электронную почту в %{Link Личном кабинете}, чтобы получать вопросы пользователей.",o),(a||0===a)&&(r+=a),r}function b(e,t){var a,i,o,r="";return i=n._ht||e&&e._ht,o={hash:{link__target:"_blank",link__class:"feedback__ownerEr _scheme_dark _small",link__href:e&&e.firmPrivateOfficeLink},data:t},a=i?i.call(e,"Изменяйте устаревшие и&nbsp;добавляйте новые данные в %{Link Личном кабинете}",o):L.call(e,"_ht","Изменяйте устаревшие и&nbsp;добавляйте новые данные в %{Link Личном кабинете}",o),(a||0===a)&&(r+=a),r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var k,w,x,C="",L=n.helperMissing,I=this.escapeExpression,T="function",S=this;return C+='<header class="feedback__popupHeader">',(w=n.title)?k=w.call(t,{hash:{},data:i}):(w=t&&t.title,k=typeof w===T?w.call(t,{hash:{},data:i}):w),C+=I(k)+"</header>",k=n["if"].call(t,t&&t.introPartialName,{hash:{},inverse:S.noop,fn:S.program(1,o,i),data:i}),(k||0===k)&&(C+=k),C+='<form class="feedback__form">',k=n["if"].call(t,t&&t.rating,{hash:{},inverse:S.noop,fn:S.program(3,r,i),data:i}),(k||0===k)&&(C+=k),k=n.unless.call(t,t&&t.dontAskName,{hash:{},inverse:S.noop,fn:S.program(6,l,i),data:i}),(k||0===k)&&(C+=k),k=n.unless.call(t,t&&t.dontAskEmail,{hash:{},inverse:S.noop,fn:S.program(8,c,i),data:i}),(k||0===k)&&(C+=k),C+='<div class="feedback__formField _message"><textarea class="feedback__formFieldTextarea feedback__formFieldText ',(w=n.textareaDirectoryMod)?k=w.call(t,{hash:{},data:i}):(w=t&&t.textareaDirectoryMod,k=typeof w===T?w.call(t,{hash:{},data:i}):w),C+=I(k)+'" placeholder="',(w=n.messagePlaceholder)?k=w.call(t,{hash:{},data:i}):(w=t&&t.messagePlaceholder,k=typeof w===T?w.call(t,{hash:{},data:i}):w),C+=I(k)+'" maxlength="2001" name="message" novalidate>',(w=n.text)?k=w.call(t,{hash:{},data:i}):(w=t&&t.text,k=typeof w===T?w.call(t,{hash:{},data:i}):w),C+=I(k)+"</textarea></div>",k=n["if"].call(t,t&&t.attachment,{hash:{},inverse:S.noop,fn:S.program(10,u,i),data:i}),(k||0===k)&&(C+=k),C+='<div class="feedback__formSubmit"><button type="submit" class="feedback__formSubmitBtn _disabled">'+I((w=n._t||t&&t._t,x={hash:{},data:i},w?w.call(t,"Отправить",x):L.call(t,"_t","Отправить",x)))+I((w=n.Preloader||t&&t.Preloader,x={hash:{"class":"feedback__formSubmitBtnPreloader _scheme_submit _small"},data:i},w?w.call(t,x):L.call(t,"Preloader",x)))+"</button></div>",k=n["if"].call(t,t&&t.chat,{hash:{},inverse:S.noop,fn:S.program(15,p,i),data:i}),(k||0===k)&&(C+=k),k=n["if"].call(t,t&&t.loyalty,{hash:{},inverse:S.program(20,g,i),fn:S.program(17,f,i),data:i}),(k||0===k)&&(C+=k),k=n["if"].call(t,t&&t.firmPrivateOfficeLink,{hash:{},inverse:S.noop,fn:S.program(23,v,i),data:i}),(k||0===k)&&(C+=k),C+="</form>"},this.jst_modules=this.jst_modules||{},this.jst_modules.feedback=this.jst_modules.feedback||{},this.jst_modules.feedback.response=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r="",s="function",l=this.escapeExpression;return r+='<header class="feedback__popupHeader">'+l((o=t&&t.message,o=null==o||o===!1?o:o.title,typeof o===s?o.apply(t):o))+'</header><div class="feedback__popupResponse">',o=t&&t.message,o=null==o||o===!1?o:o.text,o=typeof o===s?o.apply(t):o,(o||0===o)&&(r+=o),r+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.buttons=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="filters__radios">'+c((o=n.Radiogroup||t&&t.Radiogroup,r={hash:{},data:i},o?o.call(t,t,r):l.call(t,"Radiogroup",t,r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.catalog=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<header class="filters__header">',i=n.Fix||e&&e.Fix,o={hash:{"class":"filters__headerIn"},inverse:I.noop,fn:I.program(2,r,t),data:t},a=i?i.call(e,o):C.call(e,"Fix",o),(a||0===a)&&(s+=a),s+='</header><div class="filters__main">',a=n["if"].call(e,e&&e.primary,{hash:{},inverse:I.noop,fn:I.program(5,l,t),data:t}),(a||0===a)&&(s+=a),s+="</div>"}function r(e,t){var a,i,o,r="";return r+='<div class="filters__headerInner"><h2 class="filters__headerTitle">'+L((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Фильтры",o):C.call(e,"_t","Фильтры",o)))+'</h2><div class="filters__headerClear">',i=n.Link||e&&e.Link,o={hash:{"class":"_type_local"},inverse:I.noop,fn:I.program(3,s,t),data:t},a=i?i.call(e,o):C.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div></div>"}function s(e,t){var a,i,o="";return o+=L((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"очистить все",i):C.call(e,"_t","очистить все",i)))}function l(e,t){var a,i="";return a=n.each.call(e,e&&e.primary,{hash:{},inverse:I.noop,fn:I.program(6,c,t),data:t}),(a||0===a)&&(i+=a),i}function c(e,t){var a,i,o="";return o+=L((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,e&&e.type,i):C.call(e,"p",e&&e.type,i)))}function u(e,t){var a,i,o,r="";return r+='<div class="filters__primary"><div class="filters__primaryIn">',a=n["if"].call(e,e&&e.primary,{hash:{},inverse:I.noop,fn:I.program(5,l,t),data:t}),(a||0===a)&&(r+=a),r+='<div class="filters__primaryExtended"><span class="filters__primaryExtendedCount">',(i=n.activeCount)?a=i.call(e,{hash:{},data:t}):(i=e&&e.activeCount,a=typeof i===T?i.call(e,{hash:{},data:t}):i),r+=L(a)+"</span>"+L((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Фильтры",o):C.call(e,"_t","Фильтры",o)))+"</div></div>",a=n["if"].call(e,e&&e.primaryAdditional,{hash:{},inverse:I.noop,fn:I.program(9,d,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function d(e,t){var a,i="";return i+='<div class="filters__primaryAdditional">',a=n.each.call(e,e&&e.primaryAdditional,{hash:{},inverse:I.noop,fn:I.program(10,h,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function h(e,t){var a,i,o="";return o+=L((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,e&&e.type,"link",i):C.call(e,"p",e&&e.type,"link",i)))}function p(e,t){var a,i="";return i+='<div class="filters__widgets',a=n["if"].call(e,e&&e.widgetsLabel,{hash:{},inverse:I.noop,fn:I.program(13,f,t),data:t}),(a||0===a)&&(i+=a),i+='">',a=n["if"].call(e,e&&e.widgetsLabel,{hash:{},inverse:I.noop,fn:I.program(15,m,t),data:t}),(a||0===a)&&(i+=a),a=n.each.call(e,e&&e.widgets,{hash:{},inverse:I.noop,fn:I.program(17,g,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function f(e,t){return" _hasLabel"}function m(e,t){var a,i,o="";return o+='<h1 class="filters__widgetsLabel">',(i=n.widgetsLabel)?a=i.call(e,{hash:{},data:t}):(i=e&&e.widgetsLabel,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=L(a)+"</h1>"}function g(e,t){var a,i,o,r="";return r+='<div class="filters__section',a=n["if"].call(e,e&&e.expandable,{hash:{},inverse:I.noop,fn:I.program(18,_,t),data:t}),(a||0===a)&&(r+=a),r+='">',a=n["if"].call(e,e&&e.expandable,{hash:{},inverse:I.program(22,y,t),fn:I.program(20,v,t),data:t}),(a||0===a)&&(r+=a),r+=L((i=n.p||e&&e.p,o={hash:{},data:t},i?i.call(e,e&&e.template,o):C.call(e,"p",e&&e.template,o)))+"</div>"}function _(e,t){return" _expandable"}function v(e,t){var a,i,o="";return o+=L((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"expander",i):C.call(e,"p","expander",i)))}function y(e,t){var a,i="";return a=n["if"].call(e,e&&e.label,{hash:{},inverse:I.noop,fn:I.program(23,b,t),data:t}),(a||0===a)&&(i+=a),i}function b(e,t){var a,i,o="";return o+='<p class="filters__sectionTitle">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=L(a)+"</p>"}function k(e,t){var a,i,o="";return(i=n.Track)?a=i.call(e,{hash:{},data:t}):(i=e&&e.Track,a=typeof i===T?i.call(e,{hash:{},data:t}):i),o+=L(a)}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var w,x="",C=n.helperMissing,L=this.escapeExpression,I=this,T="function";return x+='<div class="filters__scroller">',w=n.unless.call(t,t&&t.snippet,{hash:{},inverse:I.noop,fn:I.program(1,o,i),data:i}),(w||0===w)&&(x+=w),w=n["if"].call(t,t&&t.snippet,{hash:{},inverse:I.noop,fn:I.program(8,u,i),data:i}),(w||0===w)&&(x+=w),w=n["if"].call(t,t&&t.widgets,{hash:{},inverse:I.noop,fn:I.program(12,p,i),data:i}),(w||0===w)&&(x+=w),w=n.unless.call(t,t&&t.snippet,{hash:{},inverse:I.noop,fn:I.program(25,k,i),data:i}),(w||0===w)&&(x+=w),x+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.checkboxlist=function(e,t,n,a,i,o){function r(e,t){return" _snippet"}function s(e,t){var a,i,o="";return o+=d((a=n.Checkbox||e&&e.Checkbox,i={hash:{},data:t},a?a.call(e,e,i):u.call(e,"Checkbox",e,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c="",u=n.helperMissing,d=this.escapeExpression,h=this;return c+='<div class="filters__checkboxes',l=n["if"].call(t,o&&o.snippet,{hash:{},inverse:h.noop,fn:h.program(1,r,i),data:i}),(l||0===l)&&(c+=l),c+='">',l=n.each.call(t,t&&t.items,{hash:{},inverse:h.noop,fn:h.program(3,s,i),data:i}),(l||0===l)&&(c+=l),c+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.checkbutton=function(e,t,n,a,i){function o(e,t){return" _disabled"}function r(e,t){var a,i,o="";return o+=' value="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=g(a)+'"'}function s(e,t){return" checked"}function l(e,t){return" checked disabled"}function c(e,t){return" filters__button"}function u(e,t){return" _forced"}function d(e,t){var a,i,o="";return o+=g((a=n.Icon||e&&e.Icon,i={hash:{"class":"filters__buttonIcon"},data:t},a?a.call(e,e&&e.icon,i):_.call(e,"Icon",e&&e.icon,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p,f="",m="function",g=this.escapeExpression,_=n.helperMissing,v=this;return f+='<input id="',(p=n.id)?h=p.call(t,{hash:{},data:i}):(p=t&&t.id,h=typeof p===m?p.call(t,{hash:{},data:i}):p),f+=g(h)+'" type="checkbox" name="',(p=n.name)?h=p.call(t,{hash:{},data:i}):(p=t&&t.name,h=typeof p===m?p.call(t,{hash:{},data:i}):p),f+=g(h)+'" class="checkbox filters__flagInput',h=n["if"].call(t,t&&t.disabled,{hash:{},inverse:v.noop,fn:v.program(1,o,i),data:i}),(h||0===h)&&(f+=h),f+='"',h=n["if"].call(t,t&&t.value,{hash:{},inverse:v.noop,fn:v.program(3,r,i),data:i}),(h||0===h)&&(f+=h),h=n["if"].call(t,t&&t.checked,{hash:{},inverse:v.noop,fn:v.program(5,s,i),data:i}),(h||0===h)&&(f+=h),h=n["if"].call(t,t&&t.forced,{hash:{},inverse:v.noop,fn:v.program(7,l,i),data:i}),(h||0===h)&&(f+=h),f+='><label for="',(p=n.id)?h=p.call(t,{hash:{},data:i}):(p=t&&t.id,h=typeof p===m?p.call(t,{hash:{},data:i}):p),f+=g(h)+'" class="filters__flag',h=n["if"].call(t,t&&t.button,{hash:{},inverse:v.noop,fn:v.program(9,c,i),data:i}),(h||0===h)&&(f+=h),f+=" _type_",(p=n.name)?h=p.call(t,{hash:{},data:i}):(p=t&&t.name,h=typeof p===m?p.call(t,{hash:{},data:i}):p),f+=g(h),h=n["if"].call(t,t&&t.forced,{hash:{},inverse:v.noop,fn:v.program(11,u,i),data:i}),(h||0===h)&&(f+=h),f+='" title="',(p=n.label)?h=p.call(t,{hash:{},data:i}):(p=t&&t.label,h=typeof p===m?p.call(t,{hash:{},data:i}):p),f+=g(h)+'">',h=n["if"].call(t,t&&t.icon,{hash:{},inverse:v.noop,fn:v.program(13,d,i),data:i}),(h||0===h)&&(f+=h),(p=n.label)?h=p.call(t,{hash:{},data:i}):(p=t&&t.label,h=typeof p===m?p.call(t,{hash:{},data:i}):p),f+=g(h)+"</label>"},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.expander=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<div class="filters__expander"><h2 class="filters__sectionTitle">',(r=n.label)?o=r.call(t,{hash:{},data:i}):(r=t&&t.label,o=typeof r===c?r.call(t,{hash:{},data:i}):r),l+=u(o)+'</h2><div class="filters__expanderWrapper"><span class="filters__expanderTitle">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Посмотреть все",s):d.call(t,"_t","Посмотреть все",s)))+"</span>"+u((r=n.Icon||t&&t.Icon,s={hash:{"class":"filters__expanderIcon"},data:i},r?r.call(t,"toggle",s):d.call(t,"Icon","toggle",s)))+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.link=function(e,t,n,a,i){function o(e,t){var a,i,o="";return(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===u?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u="function",d=this,h=n.helperMissing;return c+='<div class="filters__link">',s=n.Link||t&&t.Link,l={hash:{href:t&&t.url,"class":"filters__linkItem _undashed","data-id":t&&t.id},inverse:d.noop,fn:d.program(1,o,i),data:i},r=s?s.call(t,l):h.call(t,"Link",l),(r||0===r)&&(c+=r),c+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.media=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="filters__group\n        ',a=n["if"].call(e,e&&e.buttons,{hash:{},inverse:x.noop,fn:x.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="\n        ",a=n["if"].call(e,e&&e.selectbox,{hash:{},inverse:x.noop,fn:x.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+='"\n        ',a=n["if"].call(e,e&&e.name,{hash:{},inverse:x.noop,fn:x.program(6,l,t),data:t}),(a||0===a)&&(i+=a),i+=">",a=n["if"].call(e,e&&e.checkConnection,{hash:{},inverse:x.program(10,u,t),fn:x.program(8,c,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function r(e,t){return" _buttons"}function s(e,t){return" _selectbox"}function l(e,t){var a,i,o="";return o+=' data-name="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===b?i.call(e,{hash:{},data:t}):i),o+=k(a)+'"'}function c(e,t){var a,i,o="";return o+=k((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,"checkConnectionWidget",i):w.call(e,"module","checkConnectionWidget",i)))}function u(e,t){var a,i="";return a=n["if"].call(e,e&&e.label,{hash:{},inverse:x.noop,fn:x.program(11,d,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.single,{hash:{},inverse:x.program(18,m,t),fn:x.program(13,h,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.expandable,{hash:{},inverse:x.noop,fn:x.program(21,_,t),data:t}),(a||0===a)&&(i+=a),i}function d(e,t){var a,i,o="";return o+='<p class="filters__groupTitle">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===b?i.call(e,{hash:{},data:t}):i),o+=k(a)+"</p>"}function h(e,t){var a,i="";return a=n["if"].call(e,e&&e.selectbox,{hash:{},inverse:x.noop,fn:x.program(14,p,t),data:t}),(a||0===a)&&(i+=a),a=n.each.call(e,e&&e.items,{hash:{},inverse:x.noop,fn:x.program(16,f,t),data:t}),(a||0===a)&&(i+=a),i}function p(e,t){var a,i,o="";return o+=k((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"selectbox",i):w.call(e,"p","selectbox",i)))}function f(e,t){var a,i,o="";return o+=k((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"mediaItem",i):w.call(e,"p","mediaItem",i)))}function m(e,t){var a,i="";return i+='<ul class="filters__list">',a=n.each.call(e,e&&e.items,{hash:{},inverse:x.noop,fn:x.program(19,g,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function g(e,t){var a,i,o="";return o+='<li class="filters__listItem">'+k((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"mediaItem",i):w.call(e,"p","mediaItem",i)))+"</li>"}function _(e,t){return'<span class="filters__expand">&#8230;</span>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var v,y="",b="function",k=this.escapeExpression,w=n.helperMissing,x=this;return v=n.each.call(t,t&&t.widgets,{hash:{},inverse:x.noop,fn:x.program(1,o,i),data:i}),(v||0===v)&&(y+=v),y},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.mediaItem=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=h((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"checkbutton",i):d.call(e,"p","checkbutton",i)))}function r(e,t){var a,i,o="";return o+=h((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"mediaSlider",i):d.call(e,"p","mediaSlider",i)))}function s(e,t){var a,i,o="";return o+=h((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"time",i):d.call(e,"p","time",i)))}function l(e,t){var a,i,o="";return o+=h((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"mediaRadios",i):d.call(e,"p","mediaRadios",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u="",d=n.helperMissing,h=this.escapeExpression,p=this;return c=n["if"].call(t,t&&t.checkboxlist,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(c||0===c)&&(u+=c),c=n["if"].call(t,t&&t.button,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(c||0===c)&&(u+=c),c=n["if"].call(t,t&&t.slider,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(c||0===c)&&(u+=c),c=n["if"].call(t,t&&t.time,{hash:{},inverse:p.noop,fn:p.program(5,s,i),data:i}),(c||0===c)&&(u+=c),c=n["if"].call(t,t&&t.radios,{hash:{},inverse:p.noop,fn:p.program(7,l,i),data:i}),(c||0===c)&&(u+=c),u},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.mediaRadios=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=" _",(i=n.mod)?a=i.call(e,{hash:{},data:t}):(i=e&&e.mod,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)}function r(e,t){var a,i,o="";return o+='<label class="filters__radiogroupLabel"><input type="radio" class="radiogroup__input" name="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'" value="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'" ',a=n["if"].call(e,e&&e.checked,{hash:{},inverse:f.noop,fn:f.program(4,s,t),data:t}),(a||0===a)&&(o+=a),a=n["if"].call(e,e&&e.disabled,{hash:{},inverse:f.noop,fn:f.program(6,l,t),data:t}),(a||0===a)&&(o+=a),a=n["if"].call(e,e&&e.forced,{hash:{},inverse:f.noop,fn:f.program(8,c,t),data:t}),(a||0===a)&&(o+=a),o+='><span class="filters__radiogroupLabelIn">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</span></label>"}function s(e,t){return" checked"}function l(e,t){return" disabled"}function c(e,t){return" checked disabled"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h="function",p=this.escapeExpression,f=this;return d+='<div class="filters__radiogroup',u=n["if"].call(t,t&&t.mod,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(u||0===u)&&(d+=u),d+='">',u=n.each.call(t,t&&t.items,{hash:{},inverse:f.noop,fn:f.program(3,r,i),data:i}),(u||0===u)&&(d+=u),d+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.mediaSlider=function(e,t,n,a,i){function o(e,t){var n,a="";return a+='<span class="filters__raderRunnerLabelCurrency _'+u((n=e&&e.currency,n=null==n||n===!1?n:n.code,typeof n===c?n.apply(e):n))+'">'+u((n=e&&e.currency,n=null==n||n===!1?n:n.symbol,typeof n===c?n.apply(e):n))+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c="function",u=this.escapeExpression,d=this;return l+='<div class="filters__rader" id="',(s=n.id)?r=s.call(t,{hash:{},data:i}):(s=t&&t.id,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r)+'"><div class="filters__raderTrack"><div class="filters__raderTrackActive"></div><div class="filters__raderRunner filters__raderRunnerLeft _type_min"></div><div class="filters__raderRunner filters__raderRunnerRight _type_max"><div class="filters__raderRunnerLabel"><span class="filters__raderRunnerLabelNumber">'+u((r=t&&t.range,r=null==r||r===!1?r:r.max,typeof r===c?r.apply(t):r))+"</span>&thinsp;\n                ",r=n["if"].call(t,t&&t.currency,{hash:{},inverse:d.noop,
fn:d.program(1,o,i),data:i}),(r||0===r)&&(l+=r),l+="</div></div></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.range=function(e,t,n,a,i){function o(e,t){var n,a="";return a+=d((n=e&&e.min,n=null==n||n===!1?n:n.label,typeof n===u?n.apply(e):n))+' <span class="filters__raderDescValue _min">'+d((n=e&&e.min,n=null==n||n===!1?n:n.value,typeof n===u?n.apply(e):n))+"</span> "+d((n=e&&e.min,n=null==n||n===!1?n:n.postfix,typeof n===u?n.apply(e):n))}function r(e,t){var n,a="";return a+=d((n=e&&e.max,n=null==n||n===!1?n:n.label,typeof n===u?n.apply(e):n))+' <span class="filters__raderDescValue _max">'+d((n=e&&e.max,n=null==n||n===!1?n:n.value,typeof n===u?n.apply(e):n))+"</span> "+d((n=e&&e.max,n=null==n||n===!1?n:n.postfix,typeof n===u?n.apply(e):n))}function s(e,t){var n,a="";return a+=d((n=e&&e.single,n=null==n||n===!1?n:n.label,typeof n===u?n.apply(e):n))+' <span class="filters__raderDescValue _single">'+d((n=e&&e.single,n=null==n||n===!1?n:n.value,typeof n===u?n.apply(e):n))+"</span> "+d((n=e&&e.single,n=null==n||n===!1?n:n.postfix,typeof n===u?n.apply(e):n))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c="",u="function",d=this.escapeExpression,h=this;return l=n["if"].call(t,t&&t.min,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(l||0===l)&&(c+=l),l=n["if"].call(t,t&&t.max,{hash:{},inverse:h.noop,fn:h.program(3,r,i),data:i}),(l||0===l)&&(c+=l),l=n["if"].call(t,t&&t.single,{hash:{},inverse:h.noop,fn:h.program(5,s,i),data:i}),(l||0===l)&&(c+=l),c},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.selectbox=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="filters__selectbox">'+c((o=n.module||t&&t.module,r={hash:{},data:i},o?o.call(t,t&&t.selectBox,r):l.call(t,"module",t&&t.selectBox,r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.slider=function(e,t,n,a,i){function o(e,t){return" _disabled"}function r(e,t){var a,i,o="";return o+=h((a=n.p||e&&e.p,i={hash:{context:e&&e.desc},data:t},a?a.call(e,"range",i):d.call(e,"p","range",i)))}function s(e,t){return'<span class="filters__raderPoint _type_lr"></span>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u="",d=n.helperMissing,h=this.escapeExpression,p="function",f=this;return u+='<div id="',(c=n.id)?l=c.call(t,{hash:{},data:i}):(c=t&&t.id,l=typeof c===p?c.call(t,{hash:{},data:i}):c),u+=h(l)+'" class="filters__rader',l=n["if"].call(t,t&&t.forced,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(l||0===l)&&(u+=l),u+='"><div class="filters__raderDesc" data-rader-id="',(c=n.id)?l=c.call(t,{hash:{},data:i}):(c=t&&t.id,l=typeof c===p?c.call(t,{hash:{},data:i}):c),u+=h(l)+'">',l=n["if"].call(t,t&&t.desc,{hash:{},inverse:f.noop,fn:f.program(3,r,i),data:i}),(l||0===l)&&(u+=l),u+='</div><div class="filters__raderTrack"><div class="filters__raderTrackEnabled">',l=n.each.call(t,t&&t.points,{hash:{},inverse:f.noop,fn:f.program(5,s,i),data:i}),(l||0===l)&&(u+=l),u+='<div class="filters__raderTrackActive"></div><div class="filters__raderRunner _pos_left"></div><div class="filters__raderRunner _pos_right"></div></div></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.time=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=" _",(i=n.mod)?a=i.call(e,{hash:{},data:t}):(i=e&&e.mod,a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)}function r(e,t){var n="";return n+='<div class="filters__raderScalePoint" data-val='+d(typeof e===u?e.apply(e):e)+">"+d(typeof e===u?e.apply(e):e)+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c="",u="function",d=this.escapeExpression,h=this;return c+='<div id="',(l=n.id)?s=l.call(t,{hash:{},data:i}):(l=t&&t.id,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+'" class="filters__rader _hours',s=n["if"].call(t,t&&t.mod,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(s||0===s)&&(c+=s),c+='"><div class="filters__raderScale _type_'+d((s=t&&t.scale,s=null==s||s===!1?s:s.type,typeof s===u?s.apply(t):s))+'">',s=n.each.call(t,(s=t&&t.scale,null==s||s===!1?s:s.points),{hash:{},inverse:h.noop,fn:h.program(3,r,i),data:i}),(s||0===s)&&(c+=s),c+='</div><div class="filters__raderTrack"><div class="filters__raderTrackEnabled"><div class="filters__raderRunner"><div class="filters__raderRunnerIn"></div></div></div></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.widget=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=c((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,e&&e.type,i):l.call(e,"p",e&&e.type,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l=n.helperMissing,c=this.escapeExpression,u=this;return r=n.each.call(t,t&&t.items,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},this.jst_modules=this.jst_modules||{},this.jst_modules.filters=this.jst_modules.filters||{},this.jst_modules.filters.workhours=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=c((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,e&&e.type,i):l.call(e,"p",e&&e.type,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l=n.helperMissing,c=this.escapeExpression,u=this;return s+='<div class="filters__workhours">',r=n.each.call(t,t&&t.items,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.firmCard=this.jst_modules.firmCard||{},this.jst_modules.firmCard.action=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=d((a=n.Icon||e&&e.Icon,i={hash:{"class":"firmCard__actionsItemIcon"},data:t},a?a.call(e,e&&e.icon,i):u.call(e,"Icon",e&&e.icon,i)))}function r(e,t){var a,i,o="";return(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=d(a)}function s(e,t){var a,i,o="";return o+=d((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,"favoritesWidget",i):u.call(e,"module","favoritesWidget",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c="",u=n.helperMissing,d=this.escapeExpression,h="function",p=this;return l=n["if"].call(t,t&&t.icon,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(l||0===l)&&(c+=l),l=n["if"].call(t,t&&t.text,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(l||0===l)&&(c+=l),l=n["if"].call(t,t&&t.isFavorite,{hash:{},inverse:p.noop,fn:p.program(5,s,i),data:i}),(l||0===l)&&(c+=l),c},this.jst_modules=this.jst_modules||{},this.jst_modules.firmCard=this.jst_modules.firmCard||{},this.jst_modules.firmCard.address=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<span class="firmCard__buildingName">',(i=n.buildingName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.buildingName,a=typeof i===c?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+=",&nbsp;</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c="function",u=this;return r=n["if"].call(t,t&&t.buildingName,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(l+=r),l+='<span class="firmCard__addressStreet">',(s=n.street)?r=s.call(t,{hash:{},data:i}):(s=t&&t.street,r=typeof s===c?s.call(t,{hash:{},data:i}):s),(r||0===r)&&(l+=r),l+="</span>"},this.jst_modules=this.jst_modules||{},this.jst_modules.firmCard=this.jst_modules.firmCard||{},this.jst_modules.firmCard.attributes=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="firmCard__rubric',a=n["if"].call(e,e&&e.cut,{hash:{},inverse:m.noop,fn:m.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+='"><div class="firmCard__rubricAttrs _full"><ul class="firmCard__rubricAttrsList">',a=n.each.call(e,e&&e.full,{hash:{},inverse:m.noop,fn:m.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</ul></div>",a=n["if"].call(e,(a=e&&e.cut,null==a||a===!1?a:a.length),{hash:{},inverse:m.noop,fn:m.program(9,u,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function r(e,t){return" _expandable _collapsed"}function s(e,t){var a,i="";return i+='<li class="firmCard__rubricAttrsListItem">',a=n["if"].call(e,e&&e.label,{hash:{},inverse:m.noop,fn:m.program(5,l,t),data:t}),(a||0===a)&&(i+=a),a=n.each.call(e,e&&e.items,{hash:{},inverse:m.noop,fn:m.program(7,c,t),data:t}),(a||0===a)&&(i+=a),i+="</li>"}function l(e,t){var a,i,o="";return o+='<div class="firmCard__rubricAttrsListLabel">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+"</div>"}function c(e,t){var n="";return n+='<span class="firmCard__rubricAttrsItem">'+f(typeof e===p?e.apply(e):e)+"</span>"}function u(e,t){var a,i,o,r="";return r+='<div class="firmCard__rubricAttrs _cut">',a=n.each.call(e,e&&e.cut,{hash:{},inverse:m.noop,fn:m.program(7,c,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"+f((i=n.Icon||e&&e.Icon,o={hash:{"class":"firmCard__toggle"},data:t},i?i.call(e,"card_toggle",o):g.call(e,"Icon","card_toggle",o)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h="",p="function",f=this.escapeExpression,m=this,g=n.helperMissing;return d=n["if"].call(t,(d=t&&t.full,null==d||d===!1?d:d.length),{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(d||0===d)&&(h+=d),h},this.jst_modules=this.jst_modules||{},this.jst_modules.firmCard=this.jst_modules.firmCard||{},this.jst_modules.firmCard.mediaButtons=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n["if"].call(e,e&&e.apartments,{hash:{},inverse:g.noop,fn:g.program(2,r,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.proposals,{hash:{},inverse:g.noop,fn:g.program(4,s,t),data:t}),(a||0===a)&&(i+=a),a=n.each.call(e,e&&e.booklets,{hash:{},inverse:g.noop,fn:g.program(6,l,t),data:t}),(a||0===a)&&(i+=a),a=n.each.call(e,e&&e.plusOnes,{hash:{},inverse:g.noop,fn:g.program(8,c,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.floors,{hash:{},inverse:g.noop,fn:g.program(10,u,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var a,i,o="";return o+='<span class="firmCard__apartments">'+f((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Посмотреть квартиры на карте",i):p.call(e,"_gg","Посмотреть квартиры на карте",i)))+"</span>"}function s(e,t){var a,i,o="";return o+='<span class="firmCard__proposalsButton">'+f((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Найти места продаж",i):p.call(e,"_gg","Найти места продаж",i)))+"</span>"}function l(e,t){var a,i,o="";return o+='<a href="',(i=n.seoLinkBooklet)?a=i.call(e,{hash:{},data:t}):(i=e&&e.seoLinkBooklet,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=f(a)+'" class="firmCard__booklet">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=f(a)+"</a>"}function c(e,t){var a,i,o="";return o+='<a href="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=f(a)+'" class="firmCard__plusOne">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=f(a)+"</a>"}function u(e,t){var a,i,o,r="";return r+='<a class="firmCard__floors" href="',(i=n.floors)?a=i.call(e,{hash:{},data:t}):(i=e&&e.floors,a=typeof i===m?i.call(e,{hash:{},data:t}):i),r+=f(a)+'">'+f((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Посмотреть на этажах",o):p.call(e,"_t","Посмотреть на этажах",o)))+"</a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h="",p=n.helperMissing,f=this.escapeExpression,m="function",g=this;return d=n["if"].call(t,t&&t.hasButtons,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(d||0===d)&&(h+=d),h},this.jst_modules=this.jst_modules||{},this.jst_modules.firmCard=this.jst_modules.firmCard||{},this.jst_modules.firmCard.print=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<address class="cardToPrint__address"><div class="cardToPrint__addressLink">',a=e&&e.address,a=null==a||a===!1?a:a.street,a=typeof a===f?a.apply(e):a,(a||0===a)&&(i+=a),i+="</div>",a=n["if"].call(e,(a=e&&e.address,null==a||a===!1?a:a.comment),{hash:{},inverse:g.noop,fn:g.program(2,r,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.drilldown,{hash:{},inverse:g.noop,fn:g.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</address>"}function r(e,t){var n,a="";return a+='<div class="cardToPrint__addressComment"><span class="cardToPrint__addressCommentText">'+m((n=e&&e.address,n=null==n||n===!1?n:n.comment,typeof n===f?n.apply(e):n))+"</span></div>"}function s(e,t){var a,i,o="";return o+='<div class="cardToPrint__drilldown">',(i=n.drilldown)?a=i.call(e,{hash:{},data:t}):(i=e&&e.drilldown,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=m(a)+"</div>"}function l(e,t){var a,i,o="";return(i=n.contact)?a=i.call(e,{hash:{},data:t}):(i=e&&e.contact,a=typeof i===f?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o}function c(e,t){var a,i,o="";return o+='<div class="cardToPrint__schedule">',(i=n.schedule)?a=i.call(e,{hash:{},data:t}):(i=e&&e.schedule,a=typeof i===f?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function u(e,t){var a,i,o,r="";return r+='<div class="cardToPrint__nearStop"><span class="cardToPrint__nearStopName">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===f?i.call(e,{hash:{},data:t}):i),r+=m(a)+'</span><span class="cardToPrint__nearStopComment"> — '+m((i=n._i18n||e&&e._i18n,o={hash:{data:e&&e.distance},data:t},i?i.call(e,"DISTANCE",o):_.call(e,"_i18n","DISTANCE",o)))+"</span></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h,p="",f="function",m=this.escapeExpression,g=this,_=n.helperMissing;return p+='<div class="cardToPrint _module_firmCard"><header class="cardToPrint__header"><h1 class="cardToPrint__headerTitle">',(h=n.name)?d=h.call(t,{hash:{},data:i}):(h=t&&t.name,d=typeof h===f?h.call(t,{hash:{},data:i}):h),p+=m(d)+'</h1></header><div class="cardToPrint__printDetails">',d=n["if"].call(t,(d=t&&t.address,null==d||d===!1?d:d.street),{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(d||0===d)&&(p+=d),d=n["if"].call(t,t&&t.contact,{hash:{},inverse:g.noop,fn:g.program(6,l,i),data:i}),(d||0===d)&&(p+=d),d=n["if"].call(t,t&&t.schedule,{hash:{},inverse:g.noop,fn:g.program(8,c,i),data:i}),(d||0===d)&&(p+=d),d=n.each.call(t,(d=t&&t.geo,null==d||d===!1?d:d.nearStops),{hash:{},inverse:g.noop,fn:g.program(10,u,i),data:i}),(d||0===d)&&(p+=d),p+="</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.floorsDashboard=this.jst_modules.floorsDashboard||{},this.jst_modules.floorsDashboard.block=function(e,t,n,a,i){function o(e,t){return" _appear"}function r(e,t){return" _hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d=this,h="function",p=this.escapeExpression,f=n.helperMissing;return u+='<li class="floorsDashboard__block _animated\n    ',s=n["if"].call(t,t&&t.animate,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+="\n    ",s=n["if"].call(t,(s=t&&t.module,null==s||s===!1?s:s.hidden),{hash:{},inverse:d.noop,fn:d.program(3,r,i),data:i}),(s||0===s)&&(u+=s),u+='"\n    data-type="'+p((s=t&&t.module,s=null==s||s===!1?s:s.type,typeof s===h?s.apply(t):s))+'">'+p((l=n.module||t&&t.module,c={hash:{},data:i},l?l.call(t,t&&t.module,c):f.call(t,"module",t&&t.module,c)))+"</li>"},this.jst_modules=this.jst_modules||{},this.jst_modules.floorsDashboard=this.jst_modules.floorsDashboard||{},this.jst_modules.floorsDashboard.cardContainer=function(e,t,n,a,i){function o(e,t){return" _type_advertiser"}function r(e,t){var a,i,o="";return o+=h((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"tab",i):d.call(e,"p","tab",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d=n.helperMissing,h=this.escapeExpression,p=this;return u+='<div class="floorsDashboard__content',s=n["if"].call(t,t&&t.adsText,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+='"><div class="floorsDashboard__contentTop">'+h((l=n.module||t&&t.module,c={hash:{},data:i},l?l.call(t,"mediaCardHeader",c):d.call(t,"module","mediaCardHeader",c)))+'</div></div><div class="floorsDashboard__container">'+h((l=n.p||t&&t.p,c={hash:{},data:i},l?l.call(t,"navigation",c):d.call(t,"p","navigation",c)))+'<div class="floorsDashboard__tabs">',s=n["with"].call(t,t&&t.activeTab,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(s||0===s)&&(u+=s),u+="</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.floorsDashboard=this.jst_modules.floorsDashboard||{},this.jst_modules.floorsDashboard.cardFooter=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<div class="floorsDashboard__footerItem floorsDashboard__footerOwner">'+f((i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.privateOfficeLink,null==a||a===!1?a:a.href),target:"_blank","class":"floorsDashboard__footerItemLink floorsDashboard__footerOwnerLink"},data:t},i?i.call(e,(a=e&&e.privateOfficeLink,null==a||a===!1?a:a.text),o):p.call(e,"Link",(a=e&&e.privateOfficeLink,null==a||a===!1?a:a.text),o)))+"</div>"}function r(e,t){var a,i,o,r="";return r+='<div class="floorsDashboard__footerItem floorsDashboard__footerAdv">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.advLink,null==a||a===!1?a:a.href),target:"_blank","class":"floorsDashboard__footerItemLink floorsDashboard__footerAdvLink"},inverse:m.noop,fn:m.program(4,s,t),data:t},a=i?i.call(e,o):p.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function s(e,t){var a,i,o="";return o+=f((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Реклама в 2ГИС",i):p.call(e,"_t","Реклама в 2ГИС",i)))}function l(e,t){var a,i,o="";return o+=f((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Ошибка в данных",i):p.call(e,"_t","Ошибка в данных",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u,d,h="",p=n.helperMissing,f=this.escapeExpression,m=this;return h+='<footer class="floorsDashboard__footer"><div class="floorsDashboard__footerContent">',c=n["if"].call(t,t&&t.privateOfficeLink,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(c||0===c)&&(h+=c),h+=" ",c=n["if"].call(t,t&&t.advLink,{hash:{},inverse:m.noop,fn:m.program(3,r,i),data:i}),(c||0===c)&&(h+=c),h+=' <div class="floorsDashboard__footerItem floorsDashboard__footerBugReport">',u=n.Link||t&&t.Link,d={hash:{"class":"floorsDashboard__footerItemLink floorsDashboard__footerBugReportLink"},inverse:m.noop,fn:m.program(6,l,i),data:i},c=u?u.call(t,d):p.call(t,"Link",d),(c||0===c)&&(h+=c),h+="</div></div></footer>"},this.jst_modules=this.jst_modules||{},this.jst_modules.floorsDashboard=this.jst_modules.floorsDashboard||{},this.jst_modules.floorsDashboard.copyright=function(e,t,n,a,i){function o(e,t){var n="";return n+='<span class="floorsDashboard__copyrightItem">'+p(typeof e===h?e.apply(e):e)+"</span>"}function r(e,t){var a,i="";return i+='<span class="floorsDashboard__copyrightItem">'+p((a=e&&e.source,a=null==a||a===!1?a:a.text,typeof a===h?a.apply(e):a)),a=n.each.call(e,(a=e&&e.source,null==a||a===!1?a:a.links),{hash:{},inverse:f.noop,fn:f.program(4,s,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.source,null==a||a===!1?a:a.date),{hash:{},inverse:f.noop,fn:f.program(6,l,t),data:t}),(a||0===a)&&(i+=a),i+="</span>"}function s(e,t){var a,i,o="";return o+='\n                &nbsp;<a class="floorsDashboard__copyrightItemLink" href="',(i=n.url)?a=i.call(e,{hash:{},data:t}):(i=e&&e.url,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'" target="_blank">',(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</a>"}function l(e,t){var a,i,o,r="";return a=n["if"].call(e,(a=e&&e.source,null==a||a===!1?a:a.text),{hash:{},inverse:f.noop,fn:f.program(7,c,t),data:t}),(a||0===a)&&(r+=a),r+=p((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Последние изменения %1",(a=e&&e.source,null==a||a===!1?a:a.date),o):m.call(e,"_t","Последние изменения %1",(a=e&&e.source,null==a||a===!1?a:a.date),o)))}function c(e,t){return". "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h="function",p=this.escapeExpression,f=this,m=n.helperMissing;return d+='<div class="floorsDashboard__copyright">',u=n.each.call(t,t&&t.comments,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(u||0===u)&&(d+=u),u=n["if"].call(t,t&&t.source,{hash:{},inverse:f.noop,fn:f.program(3,r,i),data:i}),(u||0===u)&&(d+=u),d+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.floorsDashboard=this.jst_modules.floorsDashboard||{},this.jst_modules.floorsDashboard.filters=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<ul class="floorsDashboard__filters">',a=n.each.call(e,e&&e.metaRubrics,{hash:{},inverse:h.noop,fn:h.program(2,r,t),data:t}),(a||0===a)&&(s+=a),s+='<a href="',(i=n.firmListLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.firmListLink,a=typeof i===c?i.call(e,{hash:{},data:t}):i),s+=u(a)+'" class="floorsDashboard__filtersItem">'+u((i=n.Icon||e&&e.Icon,o={hash:{"class":"floorsDashboard__filtersIcon"},data:t},i?i.call(e,"metaRubrics_all",o):d.call(e,"Icon","metaRubrics_all",o)))+'<span class="floorsDashboard__filtersTitle">'+u((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Все организации",o):d.call(e,"_t","Все организации",o)))+"</span></a></ul>"}function r(e,t){var a,i,o,r="";return r+='<a href="',(i=n.seoLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.seoLink,a=typeof i===c?i.call(e,{hash:{},data:t}):i),r+=u(a)+'" class="floorsDashboard__filtersItem" data-rubric-title="',(i=n.query)?a=i.call(e,{hash:{},data:t}):(i=e&&e.query,a=typeof i===c?i.call(e,{hash:{},data:t}):i),r+=u(a)+'">'+u((i=n.Icon||e&&e.Icon,o={hash:{"class":"floorsDashboard__filtersIcon"},data:t},i?i.call(e,e&&e.icon,o):d.call(e,"Icon",e&&e.icon,o)))+'<span class="floorsDashboard__filtersTitle">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===c?i.call(e,{hash:{},data:t}):i),r+=u(a)+"</span></a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c="function",u=this.escapeExpression,d=n.helperMissing,h=this;return s=n["if"].call(t,t&&t.metaRubrics,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l},this.jst_modules=this.jst_modules||{},this.jst_modules.floorsDashboard=this.jst_modules.floorsDashboard||{},this.jst_modules.floorsDashboard.navigation=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<nav class="floorsDashboard__navigation"><div class="floorsDashboard__navigationWrapper"><ul class="floorsDashboard__navigationList">',a=n.each.call(e,e&&e.menuItems,{hash:{},inverse:g.noop,fn:g.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</ul></div></nav>"}function r(e,t){var a,i,o="";return o+='<li class="floorsDashboard__navigationItem"><h3 class="floorsDashboard__navigationItemName',a=n["if"].call(e,e&&e.disabled,{hash:{},inverse:g.noop,fn:g.program(3,s,t),data:t}),(a||0===a)&&(o+=a),a=n["if"].call(e,e&&e.active,{hash:{},inverse:g.noop,fn:g.program(5,l,t),data:t}),(a||0===a)&&(o+=a),o+='" data-tab="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=m(a)+'">',a=n["if"].call(e,e&&e.disabled,{hash:{},inverse:g.program(9,u,t),fn:g.program(7,c,t),data:t}),(a||0===a)&&(o+=a),o+="</h3></li>"}function s(e,t){return" _disabled"}function l(e,t){return" _active"}function c(e,t){var a,i,o="";return(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=m(a)}function u(e,t){var a,i,o="";return o+='<a href="',(i=n.url)?a=i.call(e,{hash:{},data:t}):(i=e&&e.url,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=m(a)+'" class="floorsDashboard__navigationItemNameLink">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=m(a),a=n["if"].call(e,e&&e.amount,{hash:{},inverse:g.noop,fn:g.program(10,d,t),data:t}),(a||0===a)&&(o+=a),o+="</a>"}function d(e,t){var a,i,o="";return o+='<span class="floorsDashboard__navigationLinkAmount">',(i=n.amount)?a=i.call(e,{hash:{},data:t}):(i=e&&e.amount,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=m(a)+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p="",f="function",m=this.escapeExpression,g=this;return h=n["if"].call(t,t&&t.menuItems,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(h||0===h)&&(p+=h),p},this.jst_modules=this.jst_modules||{},this.jst_modules.floorsDashboard=this.jst_modules.floorsDashboard||{},this.jst_modules.floorsDashboard.photosPreviews=function(e,t,n,a,i){function o(e,t){var n,a="";return a+='<div class="floorsDashboard__photosArrayItem" style="background-image: url('+d((n=e&&e.preview,typeof n===u?n.apply(e):n))+')" data-photoId="'+d((n=e&&e.id,typeof n===u?n.apply(e):n))+'"></div>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u="function",d=this.escapeExpression,h=n.helperMissing,p=this;return c+='<div class="floorsDashboard__photosCount"><span class="floorsDashboard__photosCountNumber">'+d((r=t&&t.photos,r=null==r||r===!1?r:r.count,typeof r===u?r.apply(t):r))+"</span> "+d((s=n._nt||t&&t._nt,l={hash:{},data:i},s?s.call(t,"фото","фото","фото",(r=t&&t.photos,null==r||r===!1?r:r.count),l):h.call(t,"_nt","фото","фото","фото",(r=t&&t.photos,null==r||r===!1?r:r.count),l)))+'</div><div class="floorsDashboard__photosArray _size_'+d((r=t&&t.photos,r=null==r||r===!1?r:r.previewPhotosNumber,typeof r===u?r.apply(t):r))+'">',r=n.each.call(t,(r=t&&t.photos,null==r||r===!1?r:r.items),{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.floorsDashboard=this.jst_modules.floorsDashboard||{},this.jst_modules.floorsDashboard.tab=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=_((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"filters",i):g.call(e,"p","filters",i)))}function r(e,t){var a,i,o="";return o+='<div class="floorsDashboard__photosWrapper">'+_((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"photosPreviews",i):g.call(e,"p","photosPreviews",i)))+"</div>"}function s(e,t){var a,i,o="";return o+=_((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"block",i):g.call(e,"p","block",i)))}function l(e,t){var a,i,o,r="";return r+='<div class="floorsDashboard__additionalInfo"><div class="floorsDashboard__footerLine"><span class="floorsDashboard__adsNotification">'+_((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"❉ Реклама",o):g.call(e,"_t","❉ Реклама",o)))+'</span></div><span class="floorsDashboard__adsFasText">',a=e&&e.additionalInfo,a=null==a||a===!1?a:a.fas,a=typeof a===y?a.apply(e):a,(a||0===a)&&(r+=a),r+="</span>",a=n["if"].call(e,(a=e&&e.additionalInfo,null==a||a===!1?a:a.copyright),{hash:{},inverse:v.noop,fn:v.program(8,c,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function c(e,t){var i,o="";return i=v.invokePartial(a.copyright,"copyright",(i=e&&e.additionalInfo,null==i||i===!1?i:i.copyright),n,a,t),(i||0===i)&&(o+=i),o}function u(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.additionalInfo,null==a||a===!1?a:a.copyright),{hash:{},inverse:v.noop,fn:v.program(11,d,t),data:t}),(a||0===a)&&(i+=a),i}function d(e,t){var i,o="";return o+='<div class="floorsDashboard__additionalInfo">',i=v.invokePartial(a.copyright,"copyright",(i=e&&e.additionalInfo,null==i||i===!1?i:i.copyright),n,a,t),(i||0===i)&&(o+=i),o+="</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var h,p,f,m="",g=n.helperMissing,_=this.escapeExpression,v=this,y="function";return m+='<div class="floorsDashboard__tab _active _type_',(p=n.id)?h=p.call(t,{hash:{},data:i}):(p=t&&t.id,h=typeof p===y?p.call(t,{hash:{},data:i}):p),m+=_(h)+'" data-id="',(p=n.id)?h=p.call(t,{hash:{},data:i}):(p=t&&t.id,h=typeof p===y?p.call(t,{hash:{},data:i}):p),m+=_(h)+'">',h=n["if"].call(t,t&&t.metaRubrics,{hash:{},inverse:v.noop,fn:v.program(1,o,i),data:i}),(h||0===h)&&(m+=h),h=n["if"].call(t,(h=t&&t.photos,null==h||h===!1?h:h.items),{hash:{},inverse:v.noop,fn:v.program(3,r,i),data:i}),(h||0===h)&&(m+=h),m+='<div class="floorsDashboard__columns">',h=n.each.call(t,t&&t.blocks,{hash:{},inverse:v.noop,fn:v.program(5,s,i),data:i}),(h||0===h)&&(m+=h),m+="</div>",h=n["if"].call(t,(h=t&&t.additionalInfo,null==h||h===!1?h:h.fas),{hash:{},inverse:v.program(10,u,i),fn:v.program(7,l,i),data:i}),(h||0===h)&&(m+=h),m+=_((p=n.Preloader||t&&t.Preloader,f={hash:{"class":"floorsDashboard__resultsPreloader _scheme_circles"},data:i},p?p.call(t,f):g.call(t,"Preloader",f)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.forecast=this.jst_modules.forecast||{},this.jst_modules.forecast.current=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+=d((i=n.Icon||e&&e.Icon,o={hash:{"class":"forecast__weather _size_big",mods:(a=e&&e.weather,null==a||a===!1?a:a.mods)},data:t},i?i.call(e,(a=e&&e.weather,null==a||a===!1?a:a.icon),o):u.call(e,"Icon",(a=e&&e.weather,null==a||a===!1?a:a.icon),o)))}function r(e,t){var a,i,o,r="";return r+='<div class="forecast__currentCell forecast__currentWind" title="'+d((a=e&&e.wind,a=null==a||a===!1?a:a.desc,typeof a===h?a.apply(e):a))+'">'+d((i=n.Icon||e&&e.Icon,o={hash:{"class":"forecast__currentWindDirection",mods:(a=e&&e.wind,null==a||a===!1?a:a.mods)},data:t},i?i.call(e,"weather_wind",o):u.call(e,"Icon","weather_wind",o)))+'<span class="forecast__currentWindValue">'+d((a=e&&e.wind,a=null==a||a===!1?a:a.value,typeof a===h?a.apply(e):a))+'</span><div class="forecast__currentWindUnit">'+d((a=e&&e.wind,a=null==a||a===!1?a:a.unit,typeof a===h?a.apply(e):a))+"</div></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c="",u=n.helperMissing,d=this.escapeExpression,h="function",p=this;return c+='<div class="forecast__current"><div class="forecast__currentCell forecast__currentTemperature">',(l=n.temperature)?s=l.call(t,{hash:{},data:i}):(l=t&&t.temperature,s=typeof l===h?l.call(t,{hash:{},data:i}):l),(s||0===s)&&(c+=s),c+='<div class="forecast__currentWeather">',s=n["if"].call(t,t&&t.weather,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(s||0===s)&&(c+=s),c+='</div></div><div class="forecast__currentCell forecast__currentConditions">',(l=n.conditions)?s=l.call(t,{hash:{},data:i}):(l=t&&t.conditions,s=typeof l===h?l.call(t,{hash:{},data:i}):l),(s||0===s)&&(c+=s),c+="</div>",s=n["if"].call(t,t&&t.wind,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(s||0===s)&&(c+=s),c+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.forecast=this.jst_modules.forecast||{},this.jst_modules.forecast.details=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="forecast__detailsPeriod"><div class="forecast__detailsWeather">',a=n["if"].call(e,e&&e.weather,{hash:{},inverse:d.noop,fn:d.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+='</div><div class="forecast__detailsConditions">',(i=n.period)?a=i.call(e,{hash:{},data:t}):(i=e&&e.period,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=u(a)+'<div class="forecast__detailsTemperature">',(i=n.temperature)?a=i.call(e,{hash:{},data:t}):(i=e&&e.temperature,a=typeof i===h?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div></div></div>"}function r(e,t){var a,i,o,r="";return r+=u((i=n.Icon||e&&e.Icon,o={hash:{"class":"forecast__weather",mods:(a=e&&e.weather,null==a||a===!1?a:a.mods)},data:t},i?i.call(e,(a=e&&e.weather,null==a||a===!1?a:a.icon),o):c.call(e,"Icon",(a=e&&e.weather,null==a||a===!1?a:a.icon),o)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c=n.helperMissing,u=this.escapeExpression,d=this,h="function";return l+='<div class="forecast__details">',s=n.each.call(t,t,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.forecast=this.jst_modules.forecast||{},this.jst_modules.forecast.promo=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";
return r+='<div class="forecast__promo">',(i=n.staticPart)?a=i.call(e,{hash:{},data:t}):(i=e&&e.staticPart,a=typeof i===l?i.call(e,{hash:{},data:t}):i),r+=c(a)+" "+c((i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.linkPart,null==a||a===!1?a:a.href),"class":"forecast__promoLink _undashed"},data:t},i?i.call(e,(a=e&&e.linkPart,null==a||a===!1?a:a.text),o):u.call(e,"Link",(a=e&&e.linkPart,null==a||a===!1?a:a.text),o)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l="function",c=this.escapeExpression,u=n.helperMissing,d=this;return r=n["if"].call(t,t&&t.linkPart,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},this.jst_modules=this.jst_modules||{},this.jst_modules.forecast=this.jst_modules.forecast||{},this.jst_modules.forecast.soon=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="forecast__soonTile"><div class="forecast__soonPeriod">',(i=n.period)?a=i.call(e,{hash:{},data:t}):(i=e&&e.period,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=u(a)+'</div><div class="forecast__soonWeather">',a=n["if"].call(e,e&&e.weather,{hash:{},inverse:h.noop,fn:h.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+='<span class="forecast__soonTemperature">',(i=n.temperature)?a=i.call(e,{hash:{},data:t}):(i=e&&e.temperature,a=typeof i===d?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+='</span></div><div class="forecast__soonConditions">',(i=n.conditions)?a=i.call(e,{hash:{},data:t}):(i=e&&e.conditions,a=typeof i===d?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div></div>"}function r(e,t){var a,i,o,r="";return r+=u((i=n.Icon||e&&e.Icon,o={hash:{"class":"forecast__weather",mods:(a=e&&e.weather,null==a||a===!1?a:a.mods)},data:t},i?i.call(e,(a=e&&e.weather,null==a||a===!1?a:a.icon),o):c.call(e,"Icon",(a=e&&e.weather,null==a||a===!1?a:a.icon),o)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c=n.helperMissing,u=this.escapeExpression,d="function",h=this;return l+='<div class="forecast__soon">',s=n.each.call(t,t,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.forecast=this.jst_modules.forecast||{},this.jst_modules.forecast.summary=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+=d((i=n.Icon||e&&e.Icon,o={hash:{"class":"forecast__weather",mods:(a=e&&e.weather,null==a||a===!1?a:a.mods)},data:t},i?i.call(e,(a=e&&e.weather,null==a||a===!1?a:a.icon),o):u.call(e,"Icon",(a=e&&e.weather,null==a||a===!1?a:a.icon),o)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h="function",p=this;return c+='<div class="forecast__summary"><div class="forecast__summaryCell"><div class="forecast__summaryDate">',(s=n.date)?r=s.call(t,{hash:{},data:i}):(s=t&&t.date,r=typeof s===h?s.call(t,{hash:{},data:i}):s),c+=d(r)+'</div><div class="forecast__summaryWeather">',r=n["if"].call(t,t&&t.weather,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+='</div></div><div class="forecast__summaryCell forecast__summaryTemperature"><span class="forecast__summaryTemperatureMax">',r=t&&t.temperature,r=null==r||r===!1?r:r.max,r=typeof r===h?r.apply(t):r,(r||0===r)&&(c+=r),c+='</span><span class="forecast__summaryTemperatureMin">',r=t&&t.temperature,r=null==r||r===!1?r:r.min,r=typeof r===h?r.apply(t):r,(r||0===r)&&(c+=r),c+='</span></div><div class="forecast__summaryCell forecast__summaryConditions">',(s=n.conditions)?r=s.call(t,{hash:{},data:i}):(s=t&&t.conditions,r=typeof s===h?s.call(t,{hash:{},data:i}):s),(r||0===r)&&(c+=r),c+='</div><div class="forecast__summaryCell forecast__summaryToggle">'+d((s=n.Icon||t&&t.Icon,l={hash:{},data:i},s?s.call(t,"card_toggle",l):u.call(t,"Icon","card_toggle",l)))+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.forecast=this.jst_modules.forecast||{},this.jst_modules.forecast.week=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="forecast__weekDay _dayNum_',(i=n.dayNum)?a=i.call(e,{hash:{},data:t}):(i=e&&e.dayNum,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=h(a),a=n["if"].call(e,e&&e.isOpen,{hash:{},inverse:f.noop,fn:f.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+='">',a=n["if"].call(e,e&&e.summary,{hash:{},inverse:f.noop,fn:f.program(4,s,t),data:t}),(a||0===a)&&(o+=a),a=n["if"].call(e,(a=e&&e.detail,null==a||a===!1?a:a.length),{hash:{},inverse:f.noop,fn:f.program(6,l,t),data:t}),(a||0===a)&&(o+=a),o+="</div>"}function r(e,t){return" _show_details"}function s(e,t){var a,i,o="";return o+=h((a=n.p||e&&e.p,i={hash:{context:e&&e.summary},data:t},a?a.call(e,"summary",i):d.call(e,"p","summary",i)))}function l(e,t){var a,i,o="";return o+=h((a=n.p||e&&e.p,i={hash:{context:e&&e.detail},data:t},a?a.call(e,"details",i):d.call(e,"p","details",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u="",d=n.helperMissing,h=this.escapeExpression,p="function",f=this;return u+='<div class="forecast__week">',c=n.each.call(t,t,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(c||0===c)&&(u+=c),u+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.fromTo=this.jst_modules.fromTo||{},this.jst_modules.fromTo.card=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="fromTo__btn _from">'+c((o=n._pt||t&&t._pt,r={hash:{},data:i},o?o.call(t,"Путь отсюда","От",r):l.call(t,"_pt","Путь отсюда","От",r)))+'</div><div class="fromTo__btn _to">'+c((o=n._pt||t&&t._pt,r={hash:{},data:i},o?o.call(t,"Путь сюда","До",r):l.call(t,"_pt","Путь сюда","До",r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.fromTo=this.jst_modules.fromTo||{},this.jst_modules.fromTo["default"]=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="fromTo__btn _from">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Путь отсюда",r):l.call(t,"_t","Путь отсюда",r)))+'</div><div class="fromTo__btn _to">'+c((o=n._pt||t&&t._pt,r={hash:{},data:i},o?o.call(t,"Путь сюда","сюда",r):l.call(t,"_pt","Путь сюда","сюда",r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.generalPhotos=this.jst_modules.generalPhotos||{},this.jst_modules.generalPhotos.copyright=function(e,t,n,a,i){function o(e,t){var n,a="";return a+=' href="'+c((n=e&&e.copyright,n=null==n||n===!1?n:n.url,typeof n===l?n.apply(e):n))+'" target="_blank"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l="function",c=this.escapeExpression,u=this;return s+='<a class="generalPhotos__copyrightLink"',r=n["if"].call(t,(r=t&&t.copyright,null==r||r===!1?r:r.url),{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s+='><div class="generalPhotos__copyrightIcon">',r=t&&t.copyright,r=null==r||r===!1?r:r.svg,r=typeof r===l?r.apply(t):r,(r||0===r)&&(s+=r),s+='</div><span class="generalPhotos__copyrightText">'+c((r=t&&t.copyright,r=null==r||r===!1?r:r.title,typeof r===l?r.apply(t):r))+"</span></a>"},this.jst_modules=this.jst_modules||{},this.jst_modules.geoCard2=this.jst_modules.geoCard2||{},this.jst_modules.geoCard2.print=function(e,t,n,a,i){function o(e,t){return" _address"}function r(e,t){var a,i="";return i+='<address class="geoCard2__address">',a=n.each.call(e,e&&e.address,{hash:{},inverse:_.noop,fn:_.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</address>"}function s(e,t){var n,a="";return a+='<span class="geoCard2__addressPart">',n=typeof e===g?e.apply(e):e,(n||0===n)&&(a+=n),a+="</span>"}function l(e,t){var a,i,o="";return o+='<div class="geoCard2__drilldown">',(i=n.drilldown)?a=i.call(e,{hash:{},data:t}):(i=e&&e.drilldown,a=typeof i===g?i.call(e,{hash:{},data:t}):i),o+=v(a)+"</div>"}function c(e,t){var n="";return n+='<div class="geoCard2__features">'+v(typeof e===g?e.apply(e):e)+"</div>"}function u(e,t){var n="";return n+='<div class="geoCard2__nearStops">'+v(typeof e===g?e.apply(e):e)+"</div>"}function d(e,t){var n="";return n+='<div class="geoCard2__landmarks">'+v(typeof e===g?e.apply(e):e)+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p,f,m="",g="function",_=this,v=this.escapeExpression,y=n.helperMissing;return m+='<div class="geoCard2"><h1 class="geoCard2__name',h=n["if"].call(t,t&&t.addressInTitle,{hash:{},inverse:_.noop,fn:_.program(1,o,i),data:i}),(h||0===h)&&(m+=h),m+='">',(p=n.title)?h=p.call(t,{hash:{},data:i}):(p=t&&t.title,h=typeof p===g?p.call(t,{hash:{},data:i}):p),(h||0===h)&&(m+=h),m+="</h1>",h=n["if"].call(t,t&&t.address,{hash:{},inverse:_.noop,fn:_.program(3,r,i),data:i}),(h||0===h)&&(m+=h),h=n["if"].call(t,t&&t.drilldown,{hash:{},inverse:_.noop,fn:_.program(6,l,i),data:i}),(h||0===h)&&(m+=h),p=n.module||t&&t.module,f={hash:{},inverse:_.noop,fn:_.program(8,c,i),data:i},h=p?p.call(t,"cardFeatures",f):y.call(t,"module","cardFeatures",f),(h||0===h)&&(m+=h),p=n.module||t&&t.module,f={hash:{},inverse:_.noop,fn:_.program(10,u,i),data:i},h=p?p.call(t,"cardNearStops",f):y.call(t,"module","cardNearStops",f),(h||0===h)&&(m+=h),p=n.module||t&&t.module,f={hash:{},inverse:_.noop,fn:_.program(12,d,i),data:i},h=p?p.call(t,"cardLandmarks",f):y.call(t,"module","cardLandmarks",f),(h||0===h)&&(m+=h),m+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.holidayWarning=this.jst_modules.holidayWarning||{},this.jst_modules.holidayWarning.detailed=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="holidayWarning__datePeriod">'+d((a=e&&e.period,a=null==a||a===!1?a:a.start,typeof a===u?a.apply(e):a)),a=n["if"].call(e,(a=e&&e.period,null==a||a===!1?a:a.end),{hash:{},inverse:h.noop,fn:h.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function r(e,t){var n,a="";return a+="&ndash;"+d((n=e&&e.period,n=null==n||n===!1?n:n.end,typeof n===u?n.apply(e):n))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c="",u="function",d=this.escapeExpression,h=this;return c+='<div class="holidayWarning__date">',s=n["if"].call(t,t&&t.period,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(s||0===s)&&(c+=s),c+='<div class="holidayWarning__dateMonth">',(l=n.month)?s=l.call(t,{hash:{},data:i}):(l=t&&t.month,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+'</div></div><div class="holidayWarning__content"><div class="holidayWarning__contentHeader">',(l=n.holidayName)?s=l.call(t,{hash:{},data:i}):(l=t&&t.holidayName,s=typeof l===u?l.call(t,{hash:{},data:i}):l),(s||0===s)&&(c+=s),c+="</div>",(l=n.alertText)?s=l.call(t,{hash:{},data:i}):(l=t&&t.alertText,s=typeof l===u?l.call(t,{hash:{},data:i}):l),(s||0===s)&&(c+=s),c+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.holidayWarning=this.jst_modules.holidayWarning||{},this.jst_modules.holidayWarning["short"]=function(e,t,n,a,i){function o(e,t){var a,i,o="";return a=n["if"].call(e,(a=e&&e.period,null==a||a===!1?a:a.end),{hash:{},inverse:f.program(4,s,t),fn:f.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+="&nbsp;",(i=n.month)?a=i.call(e,{hash:{},data:t}):(i=e&&e.month,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)}function r(e,t){var a,i,o,r="";return i=n._t||e&&e._t,o={hash:{},data:t},a=i?i.call(e,"С&nbsp;%1&nbsp;по&nbsp;%2",(a=e&&e.period,null==a||a===!1?a:a.start),(a=e&&e.period,null==a||a===!1?a:a.end),o):d.call(e,"_t","С&nbsp;%1&nbsp;по&nbsp;%2",(a=e&&e.period,null==a||a===!1?a:a.start),(a=e&&e.period,null==a||a===!1?a:a.end),o),(a||0===a)&&(r+=a),r}function s(e,t){var n,a="";return a+=p((n=e&&e.period,n=null==n||n===!1?n:n.start,typeof n===h?n.apply(e):n))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u="",d=n.helperMissing,h="function",p=this.escapeExpression,f=this;return u+='<div class="holidayWarning__content"><div class="holidayWarning__contentHeader">',l=n["if"].call(t,t&&t.period,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(l||0===l)&&(u+=l),u+="&nbsp;&ndash;&nbsp;",(c=n.holidayName)?l=c.call(t,{hash:{},data:i}):(c=t&&t.holidayName,l=typeof c===h?c.call(t,{hash:{},data:i}):c),(l||0===l)&&(u+=l),u+=".\n    </div>",(c=n.alertText)?l=c.call(t,{hash:{},data:i}):(c=t&&t.alertText,l=typeof c===h?c.call(t,{hash:{},data:i}):c),(l||0===l)&&(u+=l),u+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.map=this.jst_modules.map||{},this.jst_modules.map.cluster=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o="",r="function",s=this.escapeExpression;return o+='<div class="map__cluster">'+s(typeof t===r?t.apply(t):t)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.map=this.jst_modules.map||{},this.jst_modules.map.geolocation=function(e,t,n,a,i){function o(e,t){return'<div class="map__markerGeolocationWave"></div>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l=this;return s+='<div class="map__markerGeolocation">',r=n.unless.call(t,t&&t.simple,{hash:{},inverse:l.noop,fn:l.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s+='<div class="map__markerGeolocationBase"></div><div class="map__markerGeolocationDot"></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.map=this.jst_modules.map||{},this.jst_modules.map.globalMarker=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression,d="function";return l+=u((r=n.Icon||t&&t.Icon,s={hash:{fallback:"logo_s_default","class":"map__globalMarkerIcon"},data:i},r?r.call(t,t&&t.city,s):c.call(t,"Icon",t&&t.city,s)))+'<div class="map__globalMarkerName">',(r=n.name)?o=r.call(t,{hash:{},data:i}):(r=t&&t.name,o=typeof r===d?r.call(t,{hash:{},data:i}):r),l+=u(o)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.map=this.jst_modules.map||{},this.jst_modules.map.intermediatePoint=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function",c=this.escapeExpression;return s+='<div class="map__routeIntermidiatePoint _type_',(r=n.type)?o=r.call(t,{hash:{},data:i}):(r=t&&t.type,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+" _city_",(r=n.city)?o=r.call(t,{hash:{},data:i}):(r=t&&t.city,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.map=this.jst_modules.map||{},this.jst_modules.map.pin=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o="",r="function",s=this.escapeExpression;return o+='<div class="map__markerPin"><div class="map__cluster">'+s(typeof t===r?t.apply(t):t)+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.map=this.jst_modules.map||{},this.jst_modules.map.platform=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function",c=this.escapeExpression;return s+='<div class="map__markerPlatform _type_',(r=n.type)?o=r.call(t,{hash:{},data:i}):(r=t&&t.type,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+" _city_",(r=n.city)?o=r.call(t,{hash:{},data:i}):(r=t&&t.city,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'" style="background-color: ',(r=n.color)?o=r.call(t,{hash:{},data:i}):(r=t&&t.color,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.map=this.jst_modules.map||{},this.jst_modules.map.platform2=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function",c=this.escapeExpression;return s+='<div class="map__markerPlatform2 _type_',(r=n.type)?o=r.call(t,{hash:{},data:i}):(r=t&&t.type,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+" _city_",(r=n.city)?o=r.call(t,{hash:{},data:i}):(r=t&&t.city,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.map=this.jst_modules.map||{},this.jst_modules.map.routeSearch=function(e,t,n,a,i){function o(e,t){return" _end "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c=this,u="function",d=this.escapeExpression;return l+='<div class="map__markerRouteSearch ',r=n["if"].call(t,t&&t.typeTo,{hash:{},inverse:c.noop,fn:c.program(1,o,i),data:i}),(r||0===r)&&(l+=r),l+='"><div class="map__markerRouteSearchPin" style="border-color: ',(s=n.color)?r=s.call(t,{hash:{},data:i}):(s=t&&t.color,r=typeof s===u?s.call(t,{hash:{},data:i}):s),l+=d(r)+'"></div></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.map=this.jst_modules.map||{},this.jst_modules.map["super"]=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<ul class="map__markerTailAttrs">',a=n.each.call(e,e&&e.attributes,{hash:{},inverse:h.noop,fn:h.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function r(e,t){var n="";return n+='<li class="map__markerTailAttrsItem">'+d(typeof e===u?e.apply(e):e)+"</li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c="",u="function",d=this.escapeExpression,h=this;return c+='<div class="map__markerTail"><div class="map__markerTailClose"></div><header class="map__markerTailHeader">',(l=n.adTitle)?s=l.call(t,{hash:{},data:i}):(l=t&&t.adTitle,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+'</header><div class="map__markerTailText">',(l=n.adDescription)?s=l.call(t,{hash:{},data:i}):(l=t&&t.adDescription,s=typeof l===u?l.call(t,{hash:{},data:i}):l),(s||0===s)&&(c+=s),s=n["if"].call(t,t&&t.attributes,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(s||0===s)&&(c+=s),c+='<div class="map__markerTailAddress">',(l=n.address)?s=l.call(t,{hash:{},data:i}):(l=t&&t.address,s=typeof l===u?l.call(t,{hash:{},data:i}):l),(s||0===s)&&(c+=s),c+="</div></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.map=this.jst_modules.map||{},this.jst_modules.map.tooltip=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function",c=this.escapeExpression;return s+='<div class="map__markerTooltip" style="background-color: ',(r=n.color)?o=r.call(t,{hash:{},data:i}):(r=t&&t.color,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'">',(r=n.name)?o=r.call(t,{hash:{},data:i}):(r=t&&t.name,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCard=this.jst_modules.mediaCard||{},this.jst_modules.mediaCard.adv=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o="";return o},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCard=this.jst_modules.mediaCard||{},this.jst_modules.mediaCard.arrowNavigation=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<nav class="mediaCard__arrowNav"><span class="mediaCard__arrowNavLink _type_prev"><h3 class="mediaCard__arrowNavTitle">',(r=n.prevName)?o=r.call(t,{hash:{},data:i}):(r=t&&t.prevName,o=typeof r===c?r.call(t,{hash:{},data:i}):r),l+=u(o)+'</h3><span class="mediaCard__arrowNavDescription">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"предыдущая фирма",s):d.call(t,"_t","предыдущая фирма",s)))+'</span></span><span class="mediaCard__arrowNavLink _type_next"><h3 class="mediaCard__arrowNavTitle">',(r=n.nextName)?o=r.call(t,{hash:{},data:i}):(r=t&&t.nextName,o=typeof r===c?r.call(t,{hash:{},data:i}):r),l+=u(o)+'</h3><span class="mediaCard__arrowNavDescription">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"следующая фирма",s):d.call(t,"_t","следующая фирма",s)))+"</span></span></nav>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCard=this.jst_modules.mediaCard||{},this.jst_modules.mediaCard.block=function(e,t,n,a,i){function o(e,t){return" _appear"}function r(e,t){return" _hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d=this,h="function",p=this.escapeExpression,f=n.helperMissing;return u+='<div class="mediaCard__block _animated\n    ',s=n["if"].call(t,t&&t.animate,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+="\n    ",s=n["if"].call(t,(s=t&&t.module,null==s||s===!1?s:s.hidden),{hash:{},inverse:d.noop,fn:d.program(3,r,i),data:i}),(s||0===s)&&(u+=s),u+='"\n    data-type="'+p((s=t&&t.module,s=null==s||s===!1?s:s.type,typeof s===h?s.apply(t):s))+'">'+p((l=n.module||t&&t.module,c={hash:{},data:i},l?l.call(t,t&&t.module,c):f.call(t,"module",t&&t.module,c)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCard=this.jst_modules.mediaCard||{},this.jst_modules.mediaCard.cardContainer=function(e,t,n,a,i){function o(e,t){return" _type_advertiser"}function r(e,t){var a,i,o="";return o+=h((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"tab",i):d.call(e,"p","tab",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d=n.helperMissing,h=this.escapeExpression,p=this;return u+='<div class="mediaCard__content',s=n["if"].call(t,t&&t.adsText,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+='"><div class="mediaCard__contentTop">'+h((l=n.module||t&&t.module,c={hash:{},data:i},l?l.call(t,"mediaCardHeader",c):d.call(t,"module","mediaCardHeader",c)))+'</div></div><div class="mediaCard__container"><div class="mediaCard__navWrapper">'+h((l=n.p||t&&t.p,c={hash:{},data:i},l?l.call(t,"navigation",c):d.call(t,"p","navigation",c)))+'</div><div class="mediaCard__tabs">',s=n["with"].call(t,t&&t.activeTab,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(s||0===s)&&(u+=s),u+="</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCard=this.jst_modules.mediaCard||{},this.jst_modules.mediaCard.cardFooter=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<div class="mediaCard__footerItem mediaCard__footerOwner">'+f((i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.privateOfficeLink,null==a||a===!1?a:a.href),target:"_blank","class":"mediaCard__footerItemLink mediaCard__footerOwnerLink"},data:t},i?i.call(e,(a=e&&e.privateOfficeLink,null==a||a===!1?a:a.text),o):p.call(e,"Link",(a=e&&e.privateOfficeLink,null==a||a===!1?a:a.text),o)))+"</div>"}function r(e,t){var a,i,o,r="";return r+='<div class="mediaCard__footerItem mediaCard__footerAdv">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.advLink,null==a||a===!1?a:a.href),target:"_blank","class":"mediaCard__footerItemLink mediaCard__footerAdvLink"},inverse:m.noop,fn:m.program(4,s,t),data:t},a=i?i.call(e,o):p.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function s(e,t){var a,i,o="";return o+=f((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Реклама в 2ГИС",i):p.call(e,"_t","Реклама в 2ГИС",i)))}function l(e,t){var a,i,o="";return o+=f((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Ошибка в данных",i):p.call(e,"_t","Ошибка в данных",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u,d,h="",p=n.helperMissing,f=this.escapeExpression,m=this;return h+='<footer class="mediaCard__footer"><div class="mediaCard__footerContent">',c=n["if"].call(t,t&&t.privateOfficeLink,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(c||0===c)&&(h+=c),h+=" ",c=n["if"].call(t,t&&t.advLink,{hash:{},inverse:m.noop,fn:m.program(3,r,i),data:i}),(c||0===c)&&(h+=c),h+=' <div class="mediaCard__footerItem mediaCard__footerBugReport">',u=n.Link||t&&t.Link,d={hash:{"class":"mediaCard__footerItemLink mediaCard__footerBugReportLink"},inverse:m.noop,fn:m.program(6,l,i),data:i},c=u?u.call(t,d):p.call(t,"Link",d),(c||0===c)&&(h+=c),h+="</div></div></footer>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCard=this.jst_modules.mediaCard||{},this.jst_modules.mediaCard.copyright=function(e,t,n,a,i){function o(e,t){var n="";return n+='<span class="mediaCard__copyrightItem">'+p(typeof e===h?e.apply(e):e)+"</span>"}function r(e,t){var a,i="";return i+='<span class="mediaCard__copyrightItem">'+p((a=e&&e.source,a=null==a||a===!1?a:a.text,typeof a===h?a.apply(e):a)),a=n.each.call(e,(a=e&&e.source,null==a||a===!1?a:a.links),{hash:{},inverse:f.noop,fn:f.program(4,s,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.source,null==a||a===!1?a:a.date),{hash:{},inverse:f.noop,fn:f.program(6,l,t),data:t}),(a||0===a)&&(i+=a),i+="</span>"}function s(e,t){var a,i,o="";return o+='\n                &nbsp;<a class="mediaCard__copyrightItemLink" href="',(i=n.url)?a=i.call(e,{hash:{},data:t}):(i=e&&e.url,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'" target="_blank">',(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</a>"}function l(e,t){var a,i,o,r="";return a=n["if"].call(e,(a=e&&e.source,null==a||a===!1?a:a.text),{hash:{},inverse:f.noop,fn:f.program(7,c,t),data:t}),(a||0===a)&&(r+=a),r+=p((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Последние изменения %1",(a=e&&e.source,null==a||a===!1?a:a.date),o):m.call(e,"_t","Последние изменения %1",(a=e&&e.source,null==a||a===!1?a:a.date),o)))}function c(e,t){return". "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h="function",p=this.escapeExpression,f=this,m=n.helperMissing;return d+='<div class="mediaCard__copyright">',u=n.each.call(t,t&&t.comments,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(u||0===u)&&(d+=u),u=n["if"].call(t,t&&t.source,{hash:{},inverse:f.noop,fn:f.program(3,r,i),data:i}),(u||0===u)&&(d+=u),d+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCard=this.jst_modules.mediaCard||{},this.jst_modules.mediaCard.navigation=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<nav class="mediaCard__navigation"><div class="mediaCard__navigationWrapper"><ul class="mediaCard__navigationList">',a=n.each.call(e,e&&e.menuItems,{hash:{},inverse:g.noop,fn:g.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</ul></div></nav>"}function r(e,t){var a,i,o="";return o+='<li class="mediaCard__navigationItem"><h3 class="mediaCard__navigationItemName',a=n["if"].call(e,e&&e.disabled,{hash:{},inverse:g.noop,fn:g.program(3,s,t),data:t}),(a||0===a)&&(o+=a),a=n["if"].call(e,e&&e.active,{hash:{},inverse:g.noop,fn:g.program(5,l,t),data:t}),(a||0===a)&&(o+=a),o+='" data-tab="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=m(a)+'">',a=n["if"].call(e,e&&e.disabled,{hash:{},inverse:g.program(9,u,t),fn:g.program(7,c,t),data:t}),(a||0===a)&&(o+=a),o+="</h3></li>"}function s(e,t){return" _disabled"}function l(e,t){return" _active"}function c(e,t){var a,i,o="";return(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=m(a)}function u(e,t){var a,i,o="";return o+='<a href="',(i=n.url)?a=i.call(e,{hash:{},data:t}):(i=e&&e.url,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=m(a)+'" class="mediaCard__navigationItemNameLink">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=m(a),a=n["if"].call(e,e&&e.amount,{hash:{},inverse:g.noop,fn:g.program(10,d,t),data:t}),(a||0===a)&&(o+=a),o+="</a>"}function d(e,t){var a,i,o="";return o+='<span class="mediaCard__navigationLinkAmount">',(i=n.amount)?a=i.call(e,{hash:{},data:t}):(i=e&&e.amount,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=m(a)+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p="",f="function",m=this.escapeExpression,g=this;return h=n["if"].call(t,t&&t.menuItems,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(h||0===h)&&(p+=h),p},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCard=this.jst_modules.mediaCard||{},this.jst_modules.mediaCard.photosPreviews=function(e,t,n,a,i){function o(e,t){var n,a="";return a+='<div class="mediaCard__photosArrayItem" style="background-image: url('+d((n=e&&e.preview,typeof n===u?n.apply(e):n))+')" data-photoId="'+d((n=e&&e.id,typeof n===u?n.apply(e):n))+'"></div>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u="function",d=this.escapeExpression,h=n.helperMissing,p=this;return c+='<div class="mediaCard__photosCount"><span class="mediaCard__photosCountNumber">'+d((r=t&&t.photos,r=null==r||r===!1?r:r.count,typeof r===u?r.apply(t):r))+"</span> "+d((s=n._nt||t&&t._nt,l={hash:{},data:i},s?s.call(t,"фото","фото","фото",(r=t&&t.photos,null==r||r===!1?r:r.count),l):h.call(t,"_nt","фото","фото","фото",(r=t&&t.photos,null==r||r===!1?r:r.count),l)))+'</div><div class="mediaCard__photosArray _size_'+d((r=t&&t.photos,r=null==r||r===!1?r:r.previewPhotosNumber,typeof r===u?r.apply(t):r))+'">',r=n.each.call(t,(r=t&&t.photos,null==r||r===!1?r:r.items),{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCard=this.jst_modules.mediaCard||{},this.jst_modules.mediaCard.reviewsToggle=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="mediaCard__reviewsFor',a=n["if"].call(e,e&&e.active,{hash:{},inverse:c.noop,fn:c.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+='" data-for="',(i=n["for"])?a=i.call(e,{hash:{},data:t}):(i=e&&e["for"],a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)+'">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)+"</div>"}function r(e,t){return" _active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c=this,u="function",d=this.escapeExpression;return l+='<div class="mediaCard__reviewsToggle">',s=n.each.call(t,(s=t&&t.reviewsToggle,null==s||s===!1?s:s.items),{hash:{},inverse:c.noop,fn:c.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCard=this.jst_modules.mediaCard||{},this.jst_modules.mediaCard.tab=function(e,t,n,a,i){function o(e,t){var n="";return n+='<div class="mediaCard__checkConnectionWidget">'+b(typeof e===y?e.apply(e):e)+"</div>"}function r(e,t){var a,i,o="";return o+='<div class="mediaCard__photosWrapper">'+b((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"photosPreviews",i):k.call(e,"p","photosPreviews",i)))+"</div>"}function s(e,t){var a,i,o="";return o+='<div class="mediaCard__reviewsToggleWrapper">'+b((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"reviewsToggle",i):k.call(e,"p","reviewsToggle",i)))+"</div>"}function l(e,t){var a,i,o="";return o+=b((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"block",i):k.call(e,"p","block",i)))}function c(e,t){var a,i,o,r="";return r+='<div class="mediaCard__additionalInfo"><div class="mediaCard__footerLine"><span class="mediaCard__adsNotification">'+b((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"❉ Реклама",o):k.call(e,"_t","❉ Реклама",o)))+'</span></div><span class="mediaCard__adsFasText">',a=e&&e.additionalInfo,a=null==a||a===!1?a:a.fas,a=typeof a===y?a.apply(e):a,(a||0===a)&&(r+=a),r+="</span>",a=n["if"].call(e,(a=e&&e.additionalInfo,null==a||a===!1?a:a.copyright),{hash:{},inverse:w.noop,fn:w.program(10,u,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function u(e,t){var i,o="";return i=w.invokePartial(a.copyright,"copyright",(i=e&&e.additionalInfo,null==i||i===!1?i:i.copyright),n,a,t),(i||0===i)&&(o+=i),o}function d(e,t){var a,i="";return a=n["if"].call(e,e&&e.recoveryAds,{hash:{},inverse:w.program(16,f,t),fn:w.program(13,h,t),data:t}),(a||0===a)&&(i+=a),i}function h(e,t){var a,i,o,r="";return r+='<div class="mediaCard__recoveryAds">'+b((i=n.module||e&&e.module,o={hash:{},data:t},i?i.call(e,"mediaRecoveryAds",o):k.call(e,"module","mediaRecoveryAds",o))),a=n["if"].call(e,(a=e&&e.additionalInfo,null==a||a===!1?a:a.copyright),{hash:{},inverse:w.noop,fn:w.program(14,p,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function p(e,t){var i,o="";return o+='<div class="mediaCard__additionalInfo">',i=w.invokePartial(a.copyright,"copyright",(i=e&&e.additionalInfo,null==i||i===!1?i:i.copyright),n,a,t),(i||0===i)&&(o+=i),o+="</div>"}function f(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.additionalInfo,
null==a||a===!1?a:a.copyright),{hash:{},inverse:w.noop,fn:w.program(14,p,t),data:t}),(a||0===a)&&(i+=a),i}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),i=i||{};var m,g,_,v="",y="function",b=this.escapeExpression,k=n.helperMissing,w=this;return v+='<div class="mediaCard__tab _active _type_',(g=n.id)?m=g.call(t,{hash:{},data:i}):(g=t&&t.id,m=typeof g===y?g.call(t,{hash:{},data:i}):g),v+=b(m)+'" data-id="',(g=n.id)?m=g.call(t,{hash:{},data:i}):(g=t&&t.id,m=typeof g===y?g.call(t,{hash:{},data:i}):g),v+=b(m)+'">',g=n.module||t&&t.module,_={hash:{},inverse:w.noop,fn:w.program(1,o,i),data:i},m=g?g.call(t,(m=t&&t.checkConnectionWidget,null==m||m===!1?m:m.module),_):k.call(t,"module",(m=t&&t.checkConnectionWidget,null==m||m===!1?m:m.module),_),(m||0===m)&&(v+=m),m=n["if"].call(t,(m=t&&t.photos,null==m||m===!1?m:m.items),{hash:{},inverse:w.noop,fn:w.program(3,r,i),data:i}),(m||0===m)&&(v+=m),m=n["if"].call(t,t&&t.reviewsToggle,{hash:{},inverse:w.noop,fn:w.program(5,s,i),data:i}),(m||0===m)&&(v+=m),v+='<div class="mediaCard__columns">',m=n.each.call(t,t&&t.blocks,{hash:{},inverse:w.noop,fn:w.program(7,l,i),data:i}),(m||0===m)&&(v+=m),v+="</div>",m=n["if"].call(t,(m=t&&t.additionalInfo,null==m||m===!1?m:m.fas),{hash:{},inverse:w.program(12,d,i),fn:w.program(9,c,i),data:i}),(m||0===m)&&(v+=m),v+=b((g=n.Preloader||t&&t.Preloader,_={hash:{"class":"mediaCard__resultsPreloader _scheme_circles"},data:i},g?g.call(t,_):k.call(t,"Preloader",_)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCardHeader=this.jst_modules.mediaCardHeader||{},this.jst_modules.mediaCardHeader.action=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=d((a=n.Icon||e&&e.Icon,i={hash:{"class":"mediaCardHeader__cardActionsIcon"},data:t},a?a.call(e,e&&e.icon,i):u.call(e,"Icon",e&&e.icon,i)))}function r(e,t){var a,i,o="";return(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=d(a)}function s(e,t){var a,i,o="";return o+=d((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,"favoritesWidget",i):u.call(e,"module","favoritesWidget",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c="",u=n.helperMissing,d=this.escapeExpression,h="function",p=this;return l=n["if"].call(t,t&&t.icon,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(l||0===l)&&(c+=l),l=n["if"].call(t,t&&t.text,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(l||0===l)&&(c+=l),l=n["if"].call(t,t&&t.isFavorite,{hash:{},inverse:p.noop,fn:p.program(5,s,i),data:i}),(l||0===l)&&(c+=l),c},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCardHeader=this.jst_modules.mediaCardHeader||{},this.jst_modules.mediaCardHeader.address=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="mediaCardHeader__buildingName">',(i=n.buildingName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.buildingName,a=typeof i===c?i.call(e,{hash:{},data:t}):i),o+=u(a)+",&nbsp;</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c="function",u=this.escapeExpression,d=this;return r=n["if"].call(t,t&&t.buildingName,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(r||0===r)&&(l+=r),l+='<div class="mediaCardHeader__cardAddressName">',(s=n.street)?r=s.call(t,{hash:{},data:i}):(s=t&&t.street,r=typeof s===c?s.call(t,{hash:{},data:i}):s),(r||0===r)&&(l+=r),l+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCardHeader=this.jst_modules.mediaCardHeader||{},this.jst_modules.mediaCardHeader.desktop=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=j((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"photosUploaderControl",i):P.call(e,"p","photosUploaderControl",i)))}function r(e,t){var a,i="";return i+='<div class="mediaCardHeader__cardSidebar">',a=n["if"].call(e,(a=e&&e.branding,null==a||a===!1?a:a.logo),{hash:{},inverse:A.program(6,l,t),fn:A.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function s(e,t){var n,a="";return a+='<div class="mediaCardHeader__cardLogo" style="background: '+j((n=e&&e.branding,n=null==n||n===!1?n:n.bgColor,typeof n===M?n.apply(e):n))+" url("+j((n=e&&e.branding,n=null==n||n===!1?n:n.logo,typeof n===M?n.apply(e):n))+');"></div>'}function l(e,t){var a,i,o="";return o+='<div class="mediaCardHeader__cardLogo _default">'+j((a=n.Icon||e&&e.Icon,i={hash:{"class":"mediaCardHeader__cardLogoSvg"},data:t},a?a.call(e,"mediaCardHeader_defaultLogo",i):P.call(e,"Icon","mediaCardHeader_defaultLogo",i)))+"</div>"}function c(e,t){var a,i,o,r="";return r+='<div class="mediaCardHeader__cardRatingWrapper">',i=n.Rating||e&&e.Rating,o={hash:{"class":"mediaCardHeader__cardRating",style:"mediumGray"},inverse:A.noop,fn:A.program(9,u,t),data:t},a=i?i.call(e,e&&e.rating,o):P.call(e,"Rating",e&&e.rating,o),(a||0===a)&&(r+=a),r+="</div>"}function u(e,t){var n="";return n}function d(e,t){var a,i="";return i+='<div class="mediaCardHeader__cardInfo">',a=n["if"].call(e,(a=e&&e.ads,null==a||a===!1?a:a.text),{hash:{},inverse:A.noop,fn:A.program(12,h,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.ads,null==a||a===!1?a:a.link),{hash:{},inverse:A.noop,fn:A.program(15,f,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function h(e,t){var a,i="";return i+='<h3 class="mediaCardHeader__cardInfoSubheading">',a=e&&e.ads,a=null==a||a===!1?a:a.text,a=typeof a===M?a.apply(e):a,(a||0===a)&&(i+=a),i+="</h3>\n                        &thinsp;\n                        ",a=n["if"].call(e,(a=e&&e.ads,null==a||a===!1?a:a.warning),{hash:{},inverse:A.noop,fn:A.program(13,p,t),data:t}),(a||0===a)&&(i+=a),i}function p(e,t){return'<span class="mediaCardHeader__cardInfoFootNote">❉</span>'}function f(e,t){var a,i,o,r="";return r+='<a class="mediaCardHeader__cardInfoWrap" href="'+j((a=e&&e.ads,a=null==a||a===!1?a:a.link,a=null==a||a===!1?a:a.value,typeof a===M?a.apply(e):a))+'" target="_blank">'+j((i=n.Icon||e&&e.Icon,o={hash:{"class":"mediaCardHeader__cardInfoIcon"},data:t},i?i.call(e,"mediaCardHeader_link",o):P.call(e,"Icon","mediaCardHeader_link",o)))+'\n                            &thinsp;<span class="mediaCardHeader__cardLink">',a=e&&e.ads,a=null==a||a===!1?a:a.link,a=null==a||a===!1?a:a.text,a=typeof a===M?a.apply(e):a,(a||0===a)&&(r+=a),r+="</span></a>"}function m(e,t){var a,i="";return i+='<div class="mediaCardHeader__cardAddress',a=n["if"].call(e,(a=e&&e.address,null==a||a===!1?a:a.notClickable),{hash:{},inverse:A.noop,fn:A.program(18,g,t),data:t}),(a||0===a)&&(i+=a),i+='">',a=n["if"].call(e,(a=e&&e.name,null==a||a===!1?a:a.description),{hash:{},inverse:A.noop,fn:A.program(20,_,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.isFloors,{hash:{},inverse:A.program(24,y,t),fn:A.program(22,v,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.address,null==a||a===!1?a:a.comment),{hash:{},inverse:A.noop,fn:A.program(27,k,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function g(e,t){return" _notClickable"}function _(e,t){var n,a="";return a+=j((n=e&&e.name,n=null==n||n===!1?n:n.description,typeof n===M?n.apply(e):n))+"; "}function v(e,t){var a,i,o="";return o+='<div class="mediaCardHeader__cardAddressItem">'+j((a=n.p||e&&e.p,i={hash:{context:e&&e.address},data:t},a?a.call(e,"address",i):P.call(e,"p","address",i)))+"</div>"}function y(e,t){var a,i,o,r="";return i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.address,null==a||a===!1?a:a.url),"class":"mediaCardHeader__cardAddressLink _undashed"},inverse:A.noop,fn:A.program(25,b,t),data:t},a=i?i.call(e,o):P.call(e,"Link",o),(a||0===a)&&(r+=a),r}function b(e,t){var a,i,o="";return o+=j((a=n.p||e&&e.p,i={hash:{context:e&&e.address},data:t},a?a.call(e,"address",i):P.call(e,"p","address",i)))}function k(e,t){var n,a="";return a+='<div class="mediaCardHeader__cardAddressComment">&thinsp;&mdash;&thinsp;'+j((n=e&&e.address,n=null==n||n===!1?n:n.comment,typeof n===M?n.apply(e):n))+"</div>"}function w(e,t){var a,i,o="";return o+='<div class="mediaCardHeader__phoneWrapper">'+j((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,"mediaContacts",i):P.call(e,"module","mediaContacts",i)))+"</div>"}function x(e,t){var a,i,o="";return o+='<div class="mediaCardHeader__cardActionsItemWrap mediaCardHeader_tooltip _type_bottomCenter" data-tooltip="'+j((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Проезд отсюда",i):P.call(e,"_t","Проезд отсюда",i)))+'"><span class="mediaCardHeader__cardActionsItem _type_routeA">'+j((a=n.Icon||e&&e.Icon,i={hash:{"class":"mediaCardHeader__cardActionsIcon"},data:t},a?a.call(e,"mediaCardHeader_routeA",i):P.call(e,"Icon","mediaCardHeader_routeA",i)))+"</span></div>"}function C(e,t){var a,i,o="";return o+='<div class="mediaCardHeader__cardActionsItemWrap mediaCardHeader_tooltip _type_bottomCenter" data-tooltip="'+j((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Проезд сюда",i):P.call(e,"_t","Проезд сюда",i)))+'"><span class="mediaCardHeader__cardActionsItem _type_routeB">'+j((a=n.Icon||e&&e.Icon,i={hash:{"class":"mediaCardHeader__cardActionsIcon"},data:t},a?a.call(e,"mediaCardHeader_routeB",i):P.call(e,"Icon","mediaCardHeader_routeB",i)))+"</span></div>"}function L(e,t){var a,i,o="";return o+='<div class="mediaCardHeader__cardActionsItemWrap mediaCardHeader_tooltip _type_bottomCenter" data-tooltip="'+j((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Найти вход",i):P.call(e,"_t","Найти вход",i)))+'"><span class="mediaCardHeader__cardActionsItem _type_entrance">'+j((a=n.Icon||e&&e.Icon,i={hash:{"class":"mediaCardHeader__cardActionsIcon"},data:t},a?a.call(e,"mediaCardHeader_entrance",i):P.call(e,"Icon","mediaCardHeader_entrance",i)))+"</span></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var I,T,S,E="",P=n.helperMissing,j=this.escapeExpression,M="function",A=this;return E+='<div class="mediaCardHeader__content">',I=n["if"].call(t,t&&t.isPhotosUploader,{hash:{},inverse:A.noop,fn:A.program(1,o,i),data:i}),(I||0===I)&&(E+=I),E+='<div class="mediaCardHeader__card">',I=n["if"].call(t,t&&t.ads,{hash:{},inverse:A.noop,fn:A.program(3,r,i),data:i}),(I||0===I)&&(E+=I),E+='<div class="mediaCardHeader__cardInner"><div class="mediaCardHeader__cardInnerWrap"><div class="mediaCardHeader__cardHeader"><h1 class="mediaCardHeader__cardHeaderName">'+j((I=t&&t.name,I=null==I||I===!1?I:I.primary,typeof I===M?I.apply(t):I))+"</h1>&thinsp;\n\n                    ",I=n["if"].call(t,t&&t.rating,{hash:{},inverse:A.noop,fn:A.program(8,c,i),data:i}),(I||0===I)&&(E+=I),E+="</div>"+j((T=n.module||t&&t.module,S={hash:{},data:i},T?T.call(t,"awardBadge",S):P.call(t,"module","awardBadge",S)))+"</div>",I=n["if"].call(t,t&&t.ads,{hash:{},inverse:A.noop,fn:A.program(11,d,i),data:i}),(I||0===I)&&(E+=I),I=n["if"].call(t,t&&t.address,{hash:{},inverse:A.noop,fn:A.program(17,m,i),data:i}),(I||0===I)&&(E+=I),I=n["if"].call(t,t&&t.hasPhone,{hash:{},inverse:A.noop,fn:A.program(29,w,i),data:i}),(I||0===I)&&(E+=I),E+='</div></div><div class="mediaCardHeader__cardActions">',I=n["if"].call(t,(I=t&&t.actions,I=null==I||I===!1?I:I.desktop,null==I||I===!1?I:I.routeA),{hash:{},inverse:A.noop,fn:A.program(31,x,i),data:i}),(I||0===I)&&(E+=I),I=n["if"].call(t,(I=t&&t.actions,I=null==I||I===!1?I:I.desktop,null==I||I===!1?I:I.routeB),{hash:{},inverse:A.noop,fn:A.program(33,C,i),data:i}),(I||0===I)&&(E+=I),E+='<div class="mediaCardHeader__cardActionsItemWrap mediaCardHeader_tooltip _type_bottomCenter" data-tooltip="'+j((T=n._t||t&&t._t,S={hash:{},data:i},T?T.call(t,"Избранное",S):P.call(t,"_t","Избранное",S)))+'">'+j((T=n.module||t&&t.module,S={hash:{},data:i},T?T.call(t,"favoritesWidget",S):P.call(t,"module","favoritesWidget",S)))+"</div>",I=n["if"].call(t,(I=t&&t.actions,I=null==I||I===!1?I:I.desktop,null==I||I===!1?I:I.entrance),{hash:{},inverse:A.noop,fn:A.program(35,L,i),data:i}),(I||0===I)&&(E+=I),E+="</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCardHeader=this.jst_modules.mediaCardHeader||{},this.jst_modules.mediaCardHeader.phone=function(e,t,n,a,i){function o(e,t){var n="";return n+='<div class="firmCard__awardBadge">'+C(typeof e===x?e.apply(e):e)+"</div>"}function r(e,t){var a,i,o,r="";return r+='<div class="mediaCardHeader__cardAddress',a=n["if"].call(e,(a=e&&e.address,null==a||a===!1?a:a.notClickable),{hash:{},inverse:I.noop,fn:I.program(4,s,t),data:t}),(a||0===a)&&(r+=a),r+='">',i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.address,null==a||a===!1?a:a.url),"class":"mediaCardHeader__cardAddressLink _undashed"},inverse:I.noop,fn:I.program(6,l,t),data:t},a=i?i.call(e,o):L.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</div>"}function s(e,t){return" _notClickable"}function l(e,t){var a,i,o="";return o+=C((a=n.p||e&&e.p,i={hash:{context:e&&e.address},data:t},a?a.call(e,"address",i):L.call(e,"p","address",i)))}function c(e,t){var a,i,o,r="";return r+='<div class="mediaCardHeader__filials">',i=n._hnt||e&&e._hnt,o={hash:{link__href:(a=e&&e.filials,null==a||a===!1?a:a.seoLink),link__class:"mediaCardHeader__filialsLink"},data:t},a=i?i.call(e,"У организации %{Link %1 филиал}","У организации %{Link %1 филиала}","У организации %{Link %1 филиалов}",(a=e&&e.filials,null==a||a===!1?a:a.count),o):L.call(e,"_hnt","У организации %{Link %1 филиал}","У организации %{Link %1 филиала}","У организации %{Link %1 филиалов}",(a=e&&e.filials,null==a||a===!1?a:a.count),o),(a||0===a)&&(r+=a),r+="</div>"}function u(e,t){var a,i="";return i+='<div class="mediaCardHeader__cardActionsWrap"><div class="mediaCardHeader__cardActions">',a=n.each.call(e,(a=e&&e.actions,null==a||a===!1?a:a.mobile),{hash:{},inverse:I.noop,fn:I.program(11,d,t),data:t}),(a||0===a)&&(i+=a),i+="</div></div>"}function d(e,t){var a,i="";return i+='<div class="mediaCardHeader__cardActionsItemWrap">',a=n["if"].call(e,e&&e.href,{hash:{},inverse:I.program(15,f,t),fn:I.program(12,h,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function h(e,t){var a,i,o,r="";return r+='<a href="',(i=n.href)?a=i.call(e,{hash:{},data:t}):(i=e&&e.href,a=typeof i===x?i.call(e,{hash:{},data:t}):i),r+=C(a)+'" target="_blank" class="mediaCardHeader__cardActionsItem _type_',(i=n.key)?a=i.call(e,{hash:{},data:t}):(i=e&&e.key,a=typeof i===x?i.call(e,{hash:{},data:t}):i),r+=C(a),a=n["if"].call(e,e&&e.disabled,{hash:{},inverse:I.noop,fn:I.program(13,p,t),data:t}),(a||0===a)&&(r+=a),r+='">'+C((i=n.p||e&&e.p,o={hash:{},data:t},i?i.call(e,"action",o):L.call(e,"p","action",o)))+"</a> "}function p(e,t){return" _disabled"}function f(e,t){var a,i,o,r="";return r+='<span class="mediaCardHeader__cardActionsItem _type_',(i=n.key)?a=i.call(e,{hash:{},data:t}):(i=e&&e.key,a=typeof i===x?i.call(e,{hash:{},data:t}):i),r+=C(a),a=n["if"].call(e,e&&e.disabled,{hash:{},inverse:I.noop,fn:I.program(13,p,t),data:t}),(a||0===a)&&(r+=a),r+='">'+C((i=n.p||e&&e.p,o={hash:{},data:t},i?i.call(e,"action",o):L.call(e,"p","action",o)))+"</span> "}function m(e,t){var a,i,o="";return o+=C((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"photosUploaderControl",i):L.call(e,"p","photosUploaderControl",i)))}function g(e,t){var a,i,o,r="";return r+='<div class="mediaCardHeader__ads"><div class="mediaCardHeader__adsIn"><a href="'+C((a=e&&e.ads,a=null==a||a===!1?a:a.seoLink,typeof a===x?a.apply(e):a))+'" class="mediaCardHeader__adsText">',a=e&&e.ads,a=null==a||a===!1?a:a.text,a=typeof a===x?a.apply(e):a,(a||0===a)&&(r+=a),r+="</a>",a=n["if"].call(e,(a=e&&e.ads,null==a||a===!1?a:a.warning),{hash:{},inverse:I.noop,fn:I.program(20,_,t),data:t}),(a||0===a)&&(r+=a),r+=C((i=n.Icon||e&&e.Icon,o={hash:{"class":"firmCard__toggle _external"},data:t},i?i.call(e,"card_toggle",o):L.call(e,"Icon","card_toggle",o)))+"</div>",a=n["if"].call(e,(a=e&&e.ads,null==a||a===!1?a:a.link),{hash:{},inverse:I.noop,fn:I.program(22,v,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function _(e,t){var n,a="";return a+='<div class="mediaCardHeader__adsWarning">',n=e&&e.ads,n=null==n||n===!1?n:n.warning,n=typeof n===x?n.apply(e):n,(n||0===n)&&(a+=n),a+="</div>"}function v(e,t){var n,a="";return a+='<div class="mediaCardHeader__adsLink"><a href="'+C((n=e&&e.ads,n=null==n||n===!1?n:n.link,n=null==n||n===!1?n:n.value,typeof n===x?n.apply(e):n))+'" class="mediaCardHeader__adsLinkIn" target="_blank">',n=e&&e.ads,n=null==n||n===!1?n:n.link,n=null==n||n===!1?n:n.text,n=typeof n===x?n.apply(e):n,(n||0===n)&&(a+=n),a+="</a></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var y,b,k,w="",x="function",C=this.escapeExpression,L=n.helperMissing,I=this;return w+=C((b=n.module||t&&t.module,k={hash:{},data:i},b?b.call(t,"cardHeader",k):L.call(t,"module","cardHeader",k))),b=n.module||t&&t.module,k={hash:{},inverse:I.noop,fn:I.program(1,o,i),data:i},y=b?b.call(t,"awardBadge",k):L.call(t,"module","awardBadge",k),(y||0===y)&&(w+=y),y=n["if"].call(t,t&&t.address,{hash:{},inverse:I.noop,fn:I.program(3,r,i),data:i}),(y||0===y)&&(w+=y),y=n["if"].call(t,t&&t.filials,{hash:{},inverse:I.noop,fn:I.program(8,c,i),data:i}),(y||0===y)&&(w+=y),w+=C((b=n.module||t&&t.module,k={hash:{},data:i},b?b.call(t,"microSchedule",k):L.call(t,"module","microSchedule",k))),y=n["if"].call(t,(y=t&&t.actions,y=null==y||y===!1?y:y.mobile,null==y||y===!1?y:y.length),{hash:{},inverse:I.noop,fn:I.program(10,u,i),data:i}),(y||0===y)&&(w+=y),w+='<div class="mediaCardHeader__phonesDropdown"></div>'+C((b=n.module||t&&t.module,k={hash:{},data:i},b?b.call(t,"promoMobile",k):L.call(t,"module","promoMobile",k))),y=n["if"].call(t,t&&t.isPhotosUploader,{hash:{},inverse:I.noop,fn:I.program(17,m,i),data:i}),(y||0===y)&&(w+=y),y=n["if"].call(t,t&&t.ads,{hash:{},inverse:I.noop,fn:I.program(19,g,i),data:i}),(y||0===y)&&(w+=y),w},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaCardHeader=this.jst_modules.mediaCardHeader||{},this.jst_modules.mediaCardHeader.photosUploaderControl=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="mediaCardHeader__photosUploaderControl">'+c((o=n.Icon||t&&t.Icon,r={hash:{"class":"mediaCardHeader__controlIcon"},data:i},o?o.call(t,"photosUploader_smallControl",r):l.call(t,"Icon","photosUploader_smallControl",r)))+'<span class="mediaCardHeader__controlName">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Добавить фото",r):l.call(t,"_t","Добавить фото",r)))+"</span></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaContacts=this.jst_modules.mediaContacts||{},this.jst_modules.mediaContacts.claimToFirm=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="mediaContacts__claimToFirmButton">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Написать письмо",r):l.call(t,"_t","Написать письмо",r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaContacts=this.jst_modules.mediaContacts||{},this.jst_modules.mediaContacts.contacts=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n["with"].call(e,e&&e.firstGroup,{hash:{},inverse:v.noop,fn:v.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var a,i,o="";return o+=_((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"group",i):g.call(e,"p","group",i)))}function s(e,t){var a,i,o,r="";return r+=_((i=n.Link||e&&e.Link,o={hash:{href:(a=e&&e.plusOne,null==a||a===!1?a:a.value),"class":"mediaContacts__plusOne"},data:t},i?i.call(e,(a=e&&e.plusOne,null==a||a===!1?a:a.label),o):g.call(e,"Link",(a=e&&e.plusOne,null==a||a===!1?a:a.label),o)))}function l(e,t){var a,i,o="";return o+=_((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"claimToFirm",i):g.call(e,"p","claimToFirm",i)))}function c(e,t){var a,i,o="";return o+='<span class="mediaContacts__filials">'+_((a=n._nt||e&&e._nt,i={hash:{},data:t},a?a.call(e,"Ещё %1 филиал","Ещё %1 филиала","Ещё %1 филиалов",e&&e.moreFilialsCount,i):g.call(e,"_nt","Ещё %1 филиал","Ещё %1 филиала","Ещё %1 филиалов",e&&e.moreFilialsCount,i)))+"</span>"}function u(e,t){var a,i,o="";return o+=_((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"socials",i):g.call(e,"p","socials",i)))}function d(e,t){var a,i,o,r="";return r+='<a href="',(i=n.floorsSeoLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.floorsSeoLink,a=typeof i===y?i.call(e,{hash:{},data:t}):i),r+=_(a)+'" class="mediaContacts__floors">'+_((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Посмотреть на этажах",o):g.call(e,"_t","Посмотреть на этажах",o)))+"</a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p,f,m="",g=n.helperMissing,_=this.escapeExpression,v=this,y="function";return m+='<h4 class="mediaContacts__title">'+_((p=n._t||t&&t._t,f={hash:{},data:i},p?p.call(t,"Контакты",f):g.call(t,"_t","Контакты",f)))+'</h4><div class="mediaContacts__block">',h=n["if"].call(t,t&&t.firstGroup,{hash:{},inverse:v.noop,fn:v.program(1,o,i),data:i}),(h||0===h)&&(m+=h),h=n["if"].call(t,t&&t.plusOne,{hash:{},inverse:v.noop,fn:v.program(4,s,i),data:i}),(h||0===h)&&(m+=h),h=n.each.call(t,t&&t.otherGroups,{hash:{},inverse:v.noop,fn:v.program(2,r,i),data:i}),(h||0===h)&&(m+=h),h=n["if"].call(t,t&&t.claimToFirm,{hash:{},inverse:v.noop,fn:v.program(6,l,i),data:i}),(h||0===h)&&(m+=h),h=n["if"].call(t,t&&t.moreFilialsCount,{hash:{},inverse:v.noop,fn:v.program(8,c,i),data:i}),(h||0===h)&&(m+=h),h=n["if"].call(t,t&&t.socials,{hash:{},inverse:v.noop,fn:v.program(10,u,i),data:i}),(h||0===h)&&(m+=h),h=n["if"].call(t,t&&t.floors,{hash:{},inverse:v.noop,fn:v.program(12,d,i),data:i}),(h||0===h)&&(m+=h),m+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaContacts=this.jst_modules.mediaContacts||{},this.jst_modules.mediaContacts.email=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function",c=this.escapeExpression;return s+='<a href="',(r=n.href)?o=r.call(t,{hash:{},data:i}):(r=t&&t.href,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'" class="mediaContacts__item mediaContacts__email" data-index="',(r=n.index)?o=r.call(t,{hash:{},data:i}):(r=t&&t.index,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'">',(r=n.value)?o=r.call(t,{hash:{},data:i}):(r=t&&t.value,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+"</a>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaContacts=this.jst_modules.mediaContacts||{},this.jst_modules.mediaContacts.firstPhone=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<li class="mediaContacts__groupItem _phone">'+c((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"phone",i):l.call(e,"p","phone",i)))+"</li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l=n.helperMissing,c=this.escapeExpression,u=this;return s+='<ul class="mediaContacts__group">',r=n.each.call(t,t&&t.phones,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s+="</ul>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaContacts=this.jst_modules.mediaContacts||{},this.jst_modules.mediaContacts.group=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<h3 class="mediaContacts__subtitle">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</h3>"}function r(e,t){var a,i="";return i+='<li class="mediaContacts__groupItem _'+p((a=e&&e.type,typeof a===h?a.apply(e):a))+'">',a=n["if"].call(e,e&&e.phone,{hash:{},inverse:m.noop,fn:m.program(4,s,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.fax,{hash:{},inverse:m.noop,fn:m.program(4,s,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.website,{hash:{},inverse:m.noop,fn:m.program(6,l,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.email,{hash:{},inverse:m.noop,fn:m.program(8,c,t),data:t}),(a||0===a)&&(i+=a),i+="</li>"}function s(e,t){var a,i,o="";return o+=p((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"phone",i):f.call(e,"p","phone",i)))}function l(e,t){var a,i,o="";return o+=p((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"website",i):f.call(e,"p","website",i)))}function c(e,t){var a,i,o="";return o+=p((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"email",i):f.call(e,"p","email",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h="function",p=this.escapeExpression,f=n.helperMissing,m=this;return u=n["if"].call(t,t&&t.name,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(u||0===u)&&(d+=u),d+='<ul class="mediaContacts__group">',u=n.each.call(t,t&&t.items,{hash:{},inverse:m.noop,fn:m.program(3,r,i),data:i}),(u||0===u)&&(d+=u),d+="</ul>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaContacts=this.jst_modules.mediaContacts||{},this.jst_modules.mediaContacts.phone=function(e,t,n,a,i){function o(e,t){return" _short"}function r(e,t){var a,i,o="";return o+='<a href="',(i=n.href)?a=i.call(e,{hash:{},data:t}):(i=e&&e.href,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'" class="mediaContacts__phonesNumber" data-value="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'" data-index="',(i=n.index)?a=i.call(e,{hash:{},data:t}):(i=e&&e.index,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'">',(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</a>"}function s(e,t){var a,i,o="";return o+='<span class="mediaContacts__item mediaContacts__phonesNumber" data-value="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'" data-index="',(i=n.index)?a=i.call(e,{hash:{},data:t}):(i=e&&e.index,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'">',(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</span>"}function l(e,t){var a,i,o="";return o+='<span class="mediaContacts__item mediaContacts__phonesLabel">',(i=n.comment)?a=i.call(e,{hash:{},data:t}):(i=e&&e.comment,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</span>"}function c(e,t){var a,i,o,r="";return r+='<span class="mediaContacts__showPhones" data-index="',(i=n.index)?a=i.call(e,{hash:{},data:t}):(i=e&&e.index,a=typeof i===h?i.call(e,{hash:{},data:t}):i),r+=p(a)+'">'+p((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"показать телефон",o):f.call(e,"_t","показать телефон",o)))+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h="function",p=this.escapeExpression,f=n.helperMissing,m=this;return d+='<span class="mediaContacts__phonesItemCut ',u=n["if"].call(t,t&&t.shortNumber,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(u||0===u)&&(d+=u),d+='">',u=n["if"].call(t,t&&t.href,{hash:{},inverse:m.program(5,s,i),fn:m.program(3,r,i),data:i}),(u||0===u)&&(d+=u),u=n["if"].call(t,t&&t.comment,{hash:{},inverse:m.noop,fn:m.program(7,l,i),data:i}),(u||0===u)&&(d+=u),d+="</span>",u=n["if"].call(t,t&&t.last,{hash:{},inverse:m.noop,fn:m.program(9,c,i),data:i}),(u||0===u)&&(d+=u),d},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaContacts=this.jst_modules.mediaContacts||{},this.jst_modules.mediaContacts.socials=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<a href="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===u?i.call(e,{hash:{},data:t}):i),r+=d(a)+'" class="mediaContacts__socialItem mediaContacts__socialItem _',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===u?i.call(e,{hash:{},data:t}):i),r+=d(a)+'" target="_blank" data-index="',(i=n.index)?a=i.call(e,{hash:{},data:t}):(i=e&&e.index,a=typeof i===u?i.call(e,{hash:{},data:t}):i),r+=d(a)+'">'+d((i=n.Icon||e&&e.Icon,o={hash:{"class":"mediaContacts__socialItemIcon"},data:t},i?i.call(e,e&&e.icon,o):h.call(e,"Icon",e&&e.icon,o)))+"</a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u="function",d=this.escapeExpression,h=n.helperMissing,p=this;return c+='<h3 class="mediaContacts__subtitle">'+d((s=n._t||t&&t._t,l={hash:{},data:i},s?s.call(t,"Компания в социальных сетях",l):h.call(t,"_t","Компания в социальных сетях",l)))+'</h3><div class="mediaContacts__social">',r=n.each.call(t,t&&t.socials,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaContacts=this.jst_modules.mediaContacts||{},this.jst_modules.mediaContacts.website=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function",c=this.escapeExpression;return s+='<a href="',(r=n.href)?o=r.call(t,{hash:{},data:i}):(r=t&&t.href,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'" class="mediaContacts__item mediaContacts__website" target="_blank" data-index="',(r=n.index)?o=r.call(t,{hash:{},data:i}):(r=t&&t.index,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'">',(r=n.value)?o=r.call(t,{hash:{},data:i}):(r=t&&t.value,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+"</a>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaMiniCard=this.jst_modules.mediaMiniCard||{},this.jst_modules.mediaMiniCard["default"]=function(e,t,n,a,i){function o(e,t){return" _withoutGallery"}function r(e,t){var a,i,o="";return o+=S((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"rating",i):T.call(e,"p","rating",i)))}function s(e,t){var a,i,o="";return o+='<span class="mediaMiniCard__discount">',(i=n.discount)?a=i.call(e,{hash:{},data:t}):(i=e&&e.discount,a=typeof i===E?i.call(e,{hash:{},data:t}):i),o+=S(a)+"</span>"}function l(e,t){var a,i,o="";return o+='<h4 class="mediaMiniCard__description">',(i=n.description)?a=i.call(e,{hash:{},data:t}):(i=e&&e.description,a=typeof i===E?i.call(e,{hash:{},data:t}):i),o+=S(a)+"</h4>"}function c(e,t){var a,i,o,r="";return r+='<div class="mediaMiniCard__ad">',(i=n.ad)?a=i.call(e,{hash:{},data:t}):(i=e&&e.ad,a=typeof i===E?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+='</div><div class="mediaMiniCard__adMark"><div class="mediaMiniCard__adMarkText">'+S((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"реклама",o):T.call(e,"_t","реклама",o)))+"</div></div>"}function u(e,t){var a,i="";return i+='<ul class="mediaMiniCard__attributes">',a=n["if"].call(e,e&&e.price,{hash:{},inverse:P.noop,fn:P.program(12,d,t),data:t}),(a||0===a)&&(i+=a),a=n.each.call(e,e&&e.attributes,{hash:{},inverse:P.noop,fn:P.program(15,p,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function d(e,t){var a,i,o,r="";return r+='<li class="mediaMiniCard__attributesItem mediaMiniCard__attributesPrice"><span class="mediaMiniCard__attributesPriceSum">'+S((a=e&&e.price,a=null==a||a===!1?a:a.value,typeof a===E?a.apply(e):a))+'&#8201;<span class="mediaMiniCard__attributesPriceSumCurrency _'+S((a=e&&e.price,a=null==a||a===!1?a:a.currency,a=null==a||a===!1?a:a.code,typeof a===E?a.apply(e):a))+'">'+S((a=e&&e.price,a=null==a||a===!1?a:a.currency,a=null==a||a===!1?a:a.symbol,typeof a===E?a.apply(e):a))+'</span><span class="mediaMiniCard__attributesPriceSumDescription">'+S((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"средний чек",o):T.call(e,"_t","средний чек",o)))+"</span></span>",a=n["if"].call(e,(a=e&&e.price,null==a||a===!1?a:a.subtitle),{hash:{},inverse:P.noop,fn:P.program(13,h,t),data:t}),(a||0===a)&&(r+=a),r+="</li>"}function h(e,t){var n,a="";return a+='<span class="mediaMiniCard__attributesPriceTip">'+S((n=e&&e.price,n=null==n||n===!1?n:n.subtitle,typeof n===E?n.apply(e):n))+"</span>"}function p(e,t){var n="";return n+='<li class="mediaMiniCard__attributesItem" title="'+S(typeof e===E?e.apply(e):e)+'">'+S(typeof e===E?e.apply(e):e)+"</li>"}function f(e,t){var a,i,o="";return o+='<span class="mediaMiniCard__filials">'+S((a=n._nt||e&&e._nt,i={hash:{},data:t},a?a.call(e,"%1 филиал","%1 филиала","%1 филиалов",e&&e.filialsNumber,i):T.call(e,"_nt","%1 филиал","%1 филиала","%1 филиалов",e&&e.filialsNumber,i)))+"</span>"}function m(e,t){var a,i,o="";return o+='<small class="mediaMiniCard__warning">',(i=n.warning)?a=i.call(e,{hash:{},data:t}):(i=e&&e.warning,a=typeof i===E?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</small>"}function g(e,t){var a,i="";return i+='<span class="mediaMiniCard__address"',a=n["if"].call(e,e&&e.fullAddressHint,{hash:{},inverse:P.noop,fn:P.program(22,_,t),data:t}),(a||0===a)&&(i+=a),
i+=">",a=n["if"].call(e,(a=e&&e.address,null==a||a===!1?a:a.floorsIndicator),{hash:{},inverse:P.noop,fn:P.program(24,v,t),data:t}),(a||0===a)&&(i+=a),i+='<span class="mediaMiniCard__addressStreet"><span class="mediaMiniCard__addressStreetIn">'+S((a=e&&e.address,a=null==a||a===!1?a:a.street,typeof a===E?a.apply(e):a))+'</span></span><span class="mediaMiniCard__addressNumber">'+S((a=e&&e.address,a=null==a||a===!1?a:a.number,typeof a===E?a.apply(e):a))+"</span></span>"}function _(e,t){var a,i,o="";return o+=' title="',(i=n.fullAddressHint)?a=i.call(e,{hash:{},data:t}):(i=e&&e.fullAddressHint,a=typeof i===E?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+='"'}function v(e,t){var a,i,o="";return o+='<span class="mediaMiniCard__floorsIndicator">'+S((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Этажи",i):T.call(e,"_t","Этажи",i)))+"</span>"}function y(e,t){var a,i,o,r="";return r+='<span class="mediaMiniCard__opened ',a=n["if"].call(e,(a=e&&e.schedule,null==a||a===!1?a:a.status),{hash:{},inverse:P.noop,fn:P.program(27,b,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,(a=e&&e.schedule,null==a||a===!1?a:a.tooltip),{hash:{},inverse:P.noop,fn:P.program(29,k,t),data:t}),(a||0===a)&&(r+=a),r+='"',a=n["if"].call(e,(a=e&&e.schedule,null==a||a===!1?a:a.tooltip),{hash:{},inverse:P.noop,fn:P.program(31,w,t),data:t}),(a||0===a)&&(r+=a),r+=">"+S((i=n.Icon||e&&e.Icon,o={hash:{"class":"mediaMiniCard__workingHoursIcon"},data:t},i?i.call(e,(a=e&&e.schedule,null==a||a===!1?a:a.icon),o):T.call(e,"Icon",(a=e&&e.schedule,null==a||a===!1?a:a.icon),o)))+"</span>"}function b(e,t){var n,a="";return a+=" _"+S((n=e&&e.schedule,n=null==n||n===!1?n:n.status,typeof n===E?n.apply(e):n))}function k(e,t){return" _tooltip _position_topLeft"}function w(e,t){var n,a="";return a+=' data-tooltip="'+S((n=e&&e.schedule,n=null==n||n===!1?n:n.tooltip,typeof n===E?n.apply(e):n))+'"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var x,C,L,I="",T=n.helperMissing,S=this.escapeExpression,E="function",P=this;return I+='<a class="mediaMiniCard__link" href="',(C=n.seoUrl)?x=C.call(t,{hash:{},data:i}):(C=t&&t.seoUrl,x=typeof C===E?C.call(t,{hash:{},data:i}):C),I+=S(x)+'"><div class="mediaMiniCard__head mediaMiniCard__gallery',x=n["if"].call(t,t&&t.withoutGallery,{hash:{},inverse:P.noop,fn:P.program(1,o,i),data:i}),(x||0===x)&&(I+=x),I+='">'+S((C=n.module||t&&t.module,L={hash:{},data:i},C?C.call(t,"mediaPhotoSlider",L):T.call(t,"module","mediaPhotoSlider",L)))+S((C=n.p||t&&t.p,L={hash:{},data:i},C?C.call(t,"favorites",L):T.call(t,"p","favorites",L))),x=n["if"].call(t,t&&t.rating,{hash:{},inverse:P.noop,fn:P.program(3,r,i),data:i}),(x||0===x)&&(I+=x),x=n["if"].call(t,t&&t.discount,{hash:{},inverse:P.noop,fn:P.program(5,s,i),data:i}),(x||0===x)&&(I+=x),I+='</div><div class="mediaMiniCard__body"><h3 class="mediaMiniCard__name" title="',(C=n.name)?x=C.call(t,{hash:{},data:i}):(C=t&&t.name,x=typeof C===E?C.call(t,{hash:{},data:i}):C),I+=S(x)+'">',(C=n.name)?x=C.call(t,{hash:{},data:i}):(C=t&&t.name,x=typeof C===E?C.call(t,{hash:{},data:i}):C),I+=S(x)+"</h3>",x=n["if"].call(t,t&&t.description,{hash:{},inverse:P.noop,fn:P.program(7,l,i),data:i}),(x||0===x)&&(I+=x),x=n["if"].call(t,t&&t.ad,{hash:{},inverse:P.noop,fn:P.program(9,c,i),data:i}),(x||0===x)&&(I+=x),I+='<div class="mediaMiniCard__extended">',x=n["if"].call(t,t&&t.hasAttrs,{hash:{},inverse:P.noop,fn:P.program(11,u,i),data:i}),(x||0===x)&&(I+=x),x=n["if"].call(t,t&&t.filialsNumber,{hash:{},inverse:P.noop,fn:P.program(17,f,i),data:i}),(x||0===x)&&(I+=x),x=n["if"].call(t,t&&t.warning,{hash:{},inverse:P.noop,fn:P.program(19,m,i),data:i}),(x||0===x)&&(I+=x),I+="</div></div>",x=n["if"].call(t,t&&t.address,{hash:{},inverse:P.noop,fn:P.program(21,g,i),data:i}),(x||0===x)&&(I+=x),x=n["if"].call(t,t&&t.schedule,{hash:{},inverse:P.noop,fn:P.program(26,y,i),data:i}),(x||0===x)&&(I+=x),I+="</a>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaMiniCard=this.jst_modules.mediaMiniCard||{},this.jst_modules.mediaMiniCard.favorites=function(e,t,n,a,i){function o(e,t){var n="";return n+='<span class="mediaMiniCard__check">'+d(typeof e===u?e.apply(e):e)+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u="function",d=this.escapeExpression,h=this,p=n.helperMissing;return s=n.module||t&&t.module,l={hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i},r=s?s.call(t,"favoritesButton",l):p.call(t,"module","favoritesButton",l),(r||0===r)&&(c+=r),c},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaMiniCard=this.jst_modules.mediaMiniCard||{},this.jst_modules.mediaMiniCard.providers=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="mediaMiniCard__ratingWrapper">',a=n["if"].call(e,e&&e.ad,{hash:{},inverse:S.program(5,l,t),fn:S.program(2,r,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.reviewsNumber,{hash:{},inverse:S.noop,fn:S.program(7,c,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function r(e,t){var a,i,o,r="";return i=n.Rating||e&&e.Rating,o={hash:{"class":"mediaMiniCard_rating",style:"mediumGolden"},inverse:S.noop,fn:S.program(3,s,t),data:t},a=i?i.call(e,e&&e.rating,o):E.call(e,"Rating",e&&e.rating,o),(a||0===a)&&(r+=a),r}function s(e,t){var n="";return n}function l(e,t){var a,i,o,r="";return i=n.Rating||e&&e.Rating,o={hash:{"class":"mediaMiniCard_rating",style:"mediumBlue2"},inverse:S.noop,fn:S.program(3,s,t),data:t},a=i?i.call(e,e&&e.rating,o):E.call(e,"Rating",e&&e.rating,o),(a||0===a)&&(r+=a),r}function c(e,t){var a,i,o="";return o+='<span class="mediaMiniCard__ratingReviews">'+P((a=n._ngg||e&&e._ngg,i={hash:{},data:t},a?a.call(e,"%1 отзыв","%1 отзыва","%1 отзывов",e&&e.reviewsNumber,i):E.call(e,"_ngg","%1 отзыв","%1 отзыва","%1 отзывов",e&&e.reviewsNumber,i)))+"</span>"}function u(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.cheapestTariff,null==a||a===!1?a:a.name),{hash:{},inverse:S.noop,fn:S.program(10,d,t),data:t}),(a||0===a)&&(i+=a),i+='<ul class="mediaMiniCard__properties">',a=n["if"].call(e,(a=e&&e.cheapestTariff,null==a||a===!1?a:a.price),{hash:{},inverse:S.noop,fn:S.program(12,h,t),data:t}),(a||0===a)&&(i+=a),a=n.each.call(e,(a=e&&e.cheapestTariff,null==a||a===!1?a:a.properties),{hash:{},inverse:S.noop,fn:S.program(14,p,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>",a=n["if"].call(e,e&&e.ad,{hash:{},inverse:S.noop,fn:S.program(16,f,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.isAction,{hash:{},inverse:S.noop,fn:S.program(18,m,t),data:t}),(a||0===a)&&(i+=a),i}function d(e,t){var n,a="";return a+='<div class="mediaMiniCard__tariffName">'+P((n=e&&e.cheapestTariff,n=null==n||n===!1?n:n.name,typeof n===j?n.apply(e):n))+"</div>"}function h(e,t){var a,i,o,r="";return r+='<li class="mediaMiniCard__propertiesItem mediaMiniCard__propertiesPrice"><span class="mediaMiniCard__propertiesPriceSum">'+P((a=e&&e.cheapestTariff,a=null==a||a===!1?a:a.price,a=null==a||a===!1?a:a.value,typeof a===j?a.apply(e):a))+'&#8201;<span class="mediaMiniCard__propertiesPriceSumCurrency _'+P((a=e&&e.cheapestTariff,a=null==a||a===!1?a:a.price,a=null==a||a===!1?a:a.currency,a=null==a||a===!1?a:a.code,typeof a===j?a.apply(e):a))+'">'+P((a=e&&e.cheapestTariff,a=null==a||a===!1?a:a.price,a=null==a||a===!1?a:a.currency,a=null==a||a===!1?a:a.symbol,typeof a===j?a.apply(e):a))+'</span><span class="mediaMiniCard__propertiesPriceSumDescription">'+P((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"в месяц",o):E.call(e,"_t","в месяц",o)))+"</span></span></li>"}function p(e,t){var n="";return n+='<li class="mediaMiniCard__propertiesItem" title="'+P(typeof e===j?e.apply(e):e)+'">'+P(typeof e===j?e.apply(e):e)+"</li>"}function f(e,t){var a,i,o="";return o+='<p class="mediaMiniCard__providerBenefits">',(i=n.ad)?a=i.call(e,{hash:{},data:t}):(i=e&&e.ad,a=typeof i===j?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</p>"}function m(e,t){var a,i,o="";return o+='<span class="mediaMiniCard__actionMark">'+P((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Акция",i):E.call(e,"_t","Акция",i)))+"</span>"}function g(e,t){var a,i,o,r="";return r+='<div class="mediaMiniCard__tariffName _isAbsent">'+P((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Нет информации по тарифам",o):E.call(e,"_t","Нет информации по тарифам",o)))+'</div><div class="mediaMiniCard__contacts"><div class="mediaMiniCard__phone">'+P((i=n.module||e&&e.module,o={hash:{},data:t},i?i.call(e,"mediaContacts",o):E.call(e,"module","mediaContacts",o)))+"</div>",a=n["if"].call(e,e&&e.address,{hash:{},inverse:S.noop,fn:S.program(21,_,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function _(e,t){var n,a="";return a+='<span class="mediaMiniCard__address"><span class="mediaMiniCard__addressStreet"><span class="mediaMiniCard__addressStreetIn">'+P((n=e&&e.address,n=null==n||n===!1?n:n.street,typeof n===j?n.apply(e):n))+'</span></span><span class="mediaMiniCard__addressNumber">'+P((n=e&&e.address,n=null==n||n===!1?n:n.number,typeof n===j?n.apply(e):n))+"</span></span>"}function v(e,t){var a,i,o="";return o+='<img src="',(i=n.logo)?a=i.call(e,{hash:{},data:t}):(i=e&&e.logo,a=typeof i===j?i.call(e,{hash:{},data:t}):i),o+=P(a)+'" alt="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===j?i.call(e,{hash:{},data:t}):i),o+=P(a)+'" class="mediaMiniCard__logo">'}function y(e,t){var a,i,o="";return o+='<div class="mediaMiniCard__defaultLogo">'+P((a=n.Icon||e&&e.Icon,i={hash:{"class":"mediaMiniCard__defaultLogoSvg"},data:t},a?a.call(e,"media_providersPin",i):E.call(e,"Icon","media_providersPin",i)))+"</div>"}function b(e,t){var a,i,o="";return o+='<span class="mediaMiniCard__otherTariffs">'+P((a=n._ngg||e&&e._ngg,i={hash:{},data:t},a?a.call(e,"Ещё %1 тариф","Ещё %1 тарифа","Ещё %1 тарифов",e&&e.otherTariffs,i):E.call(e,"_ngg","Ещё %1 тариф","Ещё %1 тарифа","Ещё %1 тарифов",e&&e.otherTariffs,i)))+"</span>"}function k(e,t){var a,i="";return a=n["if"].call(e,(a=e&&e.site,null==a||a===!1?a:a.text),{hash:{},inverse:S.noop,fn:S.program(30,w,t),data:t}),(a||0===a)&&(i+=a),i}function w(e,t){var n,a="";return a+='<a class="mediaMiniCard__site" href="'+P((n=e&&e.site,n=null==n||n===!1?n:n.url,typeof n===j?n.apply(e):n))+'" target="_blank">'+P((n=e&&e.site,n=null==n||n===!1?n:n.text,typeof n===j?n.apply(e):n))+"</a>"}function x(e,t){var a,i,o="";return o+=P((a=n.Icon||e&&e.Icon,i={hash:{"class":"mediaMiniCard__tipSvg"},data:t},a?a.call(e,"mediaMiniCard_crown",i):E.call(e,"Icon","mediaMiniCard_crown",i)))+'<span class="mediaMiniCard__tip">'+P((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"реклама",i):E.call(e,"_t","реклама",i)))+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var C,L,I,T="",S=this,E=n.helperMissing,P=this.escapeExpression,j="function";return T+='<div class="mediaMiniCard__link"><div class="mediaMiniCard__body"><a class="mediaMiniCard__name" title="',(L=n.name)?C=L.call(t,{hash:{},data:i}):(L=t&&t.name,C=typeof L===j?L.call(t,{hash:{},data:i}):L),T+=P(C)+'" href="',(L=n.seoUrl)?C=L.call(t,{hash:{},data:i}):(L=t&&t.seoUrl,C=typeof L===j?L.call(t,{hash:{},data:i}):L),T+=P(C)+'">',(L=n.name)?C=L.call(t,{hash:{},data:i}):(L=t&&t.name,C=typeof L===j?L.call(t,{hash:{},data:i}):L),T+=P(C)+"</a>",C=n["if"].call(t,t&&t.rating,{hash:{},inverse:S.noop,fn:S.program(1,o,i),data:i}),(C||0===C)&&(T+=C),C=n["if"].call(t,t&&t.cheapestTariff,{hash:{},inverse:S.program(20,g,i),fn:S.program(9,u,i),data:i}),(C||0===C)&&(T+=C),T+="</div>",C=n["if"].call(t,t&&t.logo,{hash:{},inverse:S.program(25,y,i),fn:S.program(23,v,i),data:i}),(C||0===C)&&(T+=C),C=n["if"].call(t,t&&t.otherTariffs,{hash:{},inverse:S.noop,fn:S.program(27,b,i),data:i}),(C||0===C)&&(T+=C),C=n.unless.call(t,t&&t.cheapestTariff,{hash:{},inverse:S.noop,fn:S.program(29,k,i),data:i}),(C||0===C)&&(T+=C),T+=P((L=n.p||t&&t.p,I={hash:{},data:i},L?L.call(t,"favorites",I):E.call(t,"p","favorites",I))),C=n["if"].call(t,t&&t.ad,{hash:{},inverse:S.noop,fn:S.program(32,x,i),data:i}),(C||0===C)&&(T+=C),T+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaMiniCard=this.jst_modules.mediaMiniCard||{},this.jst_modules.mediaMiniCard.rating=function(e,t,n,a,i){function o(e,t){var n="";return n}function r(e,t){var a,i,o,r="";return r+='<span class="mediaMiniCard__reviewsNumber"><meta content="',(i=n.reviewsNumber)?a=i.call(e,{hash:{},data:t}):(i=e&&e.reviewsNumber,a=typeof i===d?i.call(e,{hash:{},data:t}):i),r+=h(a)+'">'+h((i=n._nt||e&&e._nt,o={hash:{},data:t},i?i.call(e,"%1 отзыв","%1 отзыва","%1 отзывов",e&&e.reviewsNumber,o):p.call(e,"_nt","%1 отзыв","%1 отзыва","%1 отзывов",e&&e.reviewsNumber,o)))+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d="function",h=this.escapeExpression,p=n.helperMissing,f=this;return u+='<div class="mediaMiniCard__reviews">',l=n.Rating||t&&t.Rating,c={hash:{"class":"mediaMiniCard__reviewsRating",style:"mediumWhite"},inverse:f.noop,fn:f.program(1,o,i),data:i},s=l?l.call(t,t&&t.rating,c):p.call(t,"Rating",t&&t.rating,c),(s||0===s)&&(u+=s),s=n["if"].call(t,t&&t.reviewsNumber,{hash:{},inverse:f.noop,fn:f.program(3,r,i),data:i}),(s||0===s)&&(u+=s),u+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaPhotoSlider=this.jst_modules.mediaPhotoSlider||{},this.jst_modules.mediaPhotoSlider.photo=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function",c=this.escapeExpression;return s+='<div class="mediaPhotoSlider__photosItem _hidden" style="background-image: url(',(r=n.url)?o=r.call(t,{hash:{},data:i}):(r=t&&t.url,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+')" data-index="',(r=n.index)?o=r.call(t,{hash:{},data:i}):(r=t&&t.index,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaPresets=this.jst_modules.mediaPresets||{},this.jst_modules.mediaPresets.otherItem=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function",c=this.escapeExpression;return s+='<li class="mediaPresets__otherListItem mediaPresets__preset" data-id="',(r=n.id)?o=r.call(t,{hash:{},data:i}):(r=t&&t.id,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+'">',(r=n.title)?o=r.call(t,{hash:{},data:i}):(r=t&&t.title,o=typeof r===l?r.call(t,{hash:{},data:i}):r),s+=c(o)+"</li>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaRecoveryAds=this.jst_modules.mediaRecoveryAds||{},this.jst_modules.mediaRecoveryAds["default"]=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<span class="mediaRecoveryAds__articleAdvWarning">'+p((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"реклама",i):h.call(e,"_t","реклама",i)))+"</span>"}function r(e,t){var a,i,o="";return o+='<div class="mediaRecoveryAds__articleMicro">',(i=n.micro)?a=i.call(e,{hash:{},data:t}):(i=e&&e.micro,a=typeof i===f?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function s(e,t){var a,i,o="";return o+='<div class="mediaRecoveryAds__articleWarning">',(i=n.warning)?a=i.call(e,{hash:{},data:t}):(i=e&&e.warning,a=typeof i===f?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h=n.helperMissing,p=this.escapeExpression,f="function",m=this;return d+=p((c=n.Link||t&&t.Link,u={hash:{"class":"mediaRecoveryAds__articleTitle",href:t&&t.url},data:i},c?c.call(t,t&&t.title,u):h.call(t,"Link",t&&t.title,u))),l=n["if"].call(t,t&&t.showAdvWarning,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+='<div class="mediaRecoveryAds__articleAddress">',(c=n.address)?l=c.call(t,{hash:{},data:i}):(c=t&&t.address,l=typeof c===f?c.call(t,{hash:{},data:i}):c),d+=p(l)+"</div>",l=n["if"].call(t,t&&t.micro,{hash:{},inverse:m.noop,fn:m.program(3,r,i),data:i}),(l||0===l)&&(d+=l),l=n["if"].call(t,t&&t.warning,{hash:{},inverse:m.noop,fn:m.program(5,s,i),data:i}),(l||0===l)&&(d+=l),d},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaRecoveryAds=this.jst_modules.mediaRecoveryAds||{},this.jst_modules.mediaRecoveryAds.firm=function(e,t,n,a,i){function o(e,t){return" _default"}function r(e,t){var a,i,o="";return o+=" style='background-image: url(",(i=n.mainPhotoURL)?a=i.call(e,{hash:{},data:t}):(i=e&&e.mainPhotoURL,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+")'"}function s(e,t){var a,i,o="";return o+='<div class="mediaRecoveryAds__articleExtension">',(i=n.extension)?a=i.call(e,{hash:{},data:t}):(i=e&&e.extension,a=typeof i===h?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h="function",p=this.escapeExpression,f=this,m=n.helperMissing;return d+='<div class="mediaRecoveryAds__articleImage',l=n.unless.call(t,t&&t.mainPhotoURL,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+='"',l=n["if"].call(t,t&&t.mainPhotoURL,{hash:{},inverse:f.noop,fn:f.program(3,r,i),data:i}),(l||0===l)&&(d+=l),d+="></div>"+p((c=n.Link||t&&t.Link,u={hash:{"class":"mediaRecoveryAds__articleTitle",href:t&&t.url,"data-image":t&&t.preview},data:i},c?c.call(t,t&&t.title,u):m.call(t,"Link",t&&t.title,u))),l=n["if"].call(t,t&&t.extension,{hash:{},inverse:f.noop,fn:f.program(5,s,i),data:i}),(l||0===l)&&(d+=l),d+='<div class="mediaRecoveryAds__articleAddress">',(c=n.address)?l=c.call(t,{hash:{},data:i}):(c=t&&t.address,l=typeof c===h?c.call(t,{hash:{},data:i}):c),d+=p(l)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaRecoveryAds=this.jst_modules.mediaRecoveryAds||{},this.jst_modules.mediaRecoveryAds.mediaCard=function(e,t,n,a,i){function o(e,t){return" _default"}function r(e,t){var a,i,o="";return o+=" style='background-image: url(",(i=n.mainPhotoURL)?a=i.call(e,{hash:{},data:t}):(i=e&&e.mainPhotoURL,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+")'"}function s(e,t){var a,i,o="";return o+='<div class="mediaRecoveryAds__articleExtension">',(i=n.extension)?a=i.call(e,{hash:{},data:t}):(i=e&&e.extension,a=typeof i===p?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function l(e,t){var a,i,o="";return o+='<div class="mediaRecoveryAds__articleWarning">',(i=n.warning)?a=i.call(e,{hash:{},data:t}):(i=e&&e.warning,a=typeof i===p?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u,d,h="",p="function",f=this.escapeExpression,m=this,g=n.helperMissing;return h+='<div class="mediaRecoveryAds__articleImage\n    ',c=n.unless.call(t,t&&t.mainPhotoURL,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(c||0===c)&&(h+=c),h+='"\n    ',c=n["if"].call(t,t&&t.mainPhotoURL,{hash:{},inverse:m.noop,fn:m.program(3,r,i),data:i}),(c||0===c)&&(h+=c),h+="></div>"+f((u=n.Link||t&&t.Link,d={hash:{"class":"mediaRecoveryAds__articleTitle",href:t&&t.url,"data-image":t&&t.preview},data:i},u?u.call(t,t&&t.title,d):g.call(t,"Link",t&&t.title,d))),c=n["if"].call(t,t&&t.extension,{hash:{},inverse:m.noop,fn:m.program(5,s,i),data:i}),(c||0===c)&&(h+=c),h+='<div class="mediaRecoveryAds__articleAddress">',(u=n.address)?c=u.call(t,{hash:{},data:i}):(u=t&&t.address,c=typeof u===p?u.call(t,{hash:{},data:i}):u),h+=f(c)+"</div>",c=n["if"].call(t,t&&t.warning,{hash:{},inverse:m.noop,fn:m.program(7,l,i),data:i}),(c||0===c)&&(h+=c),h},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaResults=this.jst_modules.mediaResults||{},this.jst_modules.mediaResults.card=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="mediaResults__resultsItem">'+c((o=n.module||t&&t.module,r={hash:{},data:i},o?o.call(t,t,r):l.call(t,"module",t,r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaResults=this.jst_modules.mediaResults||{},this.jst_modules.mediaResults.checkConnection404=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="mediaResults__notFoundText _checkConnection">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Подключение невозможно. Ваш дом не подключен ни одним провайдером.",r):l.call(t,"_gg","Подключение невозможно. Ваш дом не подключен ни одним провайдером.",r)))+'<div class="mediaResults__checkConnectionReset">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Проверить другой адрес.",r):l.call(t,"_gg","Проверить другой адрес.",r)))+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaResults=this.jst_modules.mediaResults||{},this.jst_modules.mediaResults.results=function(e,t,n,a,i){function o(e,t){var n="";return n+='<div class="mediaResults__resultsItem _mkb"><div class="mediaResults__resultsItemCut">'+p(typeof e===h?e.apply(e):e)+"</div></div>"}function r(e,t){var n="";return n+='<div class="mediaResults__resultsItem _recoveryAds">'+p(typeof e===h?e.apply(e):e)+"</div>"}function s(e,t){var a,i,o="";return o+=p((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"card",i):f.call(e,"p","card",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h="function",p=this.escapeExpression,f=n.helperMissing,m=this;return c=n.module||t&&t.module,u={hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i},l=c?c.call(t,"googleTagAds",u):f.call(t,"module","googleTagAds",u),(l||0===l)&&(d+=l),c=n.module||t&&t.module,u={hash:{},inverse:m.noop,fn:m.program(3,r,i),data:i},l=c?c.call(t,"mediaMiniCardAd",u):f.call(t,"module","mediaMiniCardAd",u),(l||0===l)&&(d+=l),l=n.each.call(t,t&&t.miniCards,{hash:{},inverse:m.noop,fn:m.program(5,s,i),data:i}),(l||0===l)&&(d+=l),d},this.jst_modules=this.jst_modules||{},this.jst_modules.mediaSchedule=this.jst_modules.mediaSchedule||{},this.jst_modules.mediaSchedule.table=function(e,t,n,a,i){function o(e,t){return" _12h"}function r(e,t,a){var i,o="";return o+='<span class="mediaSchedule__tableCellItem',i=n["if"].call(e,e&&e.today,{hash:{},inverse:w.noop,fn:w.program(4,s,t),data:t}),(i||0===i)&&(o+=i),o+='">',i=n["if"].call(e,a&&a.hasSecondColumn,{hash:{},inverse:w.program(8,c,t),fn:w.program(6,l,t),data:t}),(i||0===i)&&(o+=i),o+="</span>"}function s(e,t){return" _active"}function l(e,t){var a,i,o="";return(i=n.key)?a=i.call(e,{hash:{},data:t}):(i=e&&e.key,a=typeof i===b?i.call(e,{hash:{},data:t}):i),o+=k(a)}function c(e,t){var a,i,o="";return(i=n.longkey)?a=i.call(e,{hash:{},data:t}):(i=e&&e.longkey,a=typeof i===b?i.call(e,{hash:{},data:t}):i),o+=k(a)}function u(e,t){var a,i="";return i+='<span class="mediaSchedule__tableCellItem',a=n["if"].call(e,e&&e.today,{hash:{},inverse:w.noop,fn:w.program(4,s,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.dayoff,{hash:{},inverse:w.noop,fn:w.program(11,d,t),data:t}),(a||0===a)&&(i+=a),i+='"><div class="mediaSchedule__hideOverflow">',a=n["if"].call(e,(a=e&&e.parts,null==a||a===!1?a:a.first),{hash:{},inverse:w.program(15,p,t),fn:w.program(13,h,t),data:t}),(a||0===a)&&(i+=a),i+="</div></span>"}function d(e,t){return" _dayoff"}function h(e,t){var n,a="";return a+='<time class="mediaSchedule__tableTime">'+k((n=e&&e.parts,n=null==n||n===!1?n:n.first,n=null==n||n===!1?n:n.from,typeof n===b?n.apply(e):n))+'</time>&thinsp;–&thinsp;<time class="mediaSchedule__tableTime">'+k((n=e&&e.parts,n=null==n||n===!1?n:n.first,n=null==n||n===!1?n:n.to,typeof n===b?n.apply(e):n))+"</time>"}function p(e,t){return'<span class="mediaSchedule__dayoff"></span>'}function f(e,t){var a,i="";return i+='<div class="mediaSchedule__tableCell _lunch">',a=n.each.call(e,e&&e.week,{hash:{},inverse:w.noop,fn:w.program(18,m,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function m(e,t){var a,i="";return i+='<span class="mediaSchedule__tableCellItem',a=n["if"].call(e,e&&e.today,{hash:{},inverse:w.noop,fn:w.program(4,s,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.dayoff,{hash:{},inverse:w.noop,fn:w.program(11,d,t),data:t}),(a||0===a)&&(i+=a),i+='"><div class="mediaSchedule__hideOverflow">',a=n["if"].call(e,e&&e.today,{hash:{},inverse:w.noop,fn:w.program(19,g,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.parts,null==a||a===!1?a:a.second),{hash:{},inverse:w.program(15,p,t),fn:w.program(21,_,t),data:t}),(a||0===a)&&(i+=a),i+="</div></span>"}function g(e,t){var a,i,o="";return o+=k((a=n.Icon||e&&e.Icon,i={hash:{"class":"mediaSchedule__cupIcon"},data:t},a?a.call(e,"mediaSchedule_cup",i):x.call(e,"Icon","mediaSchedule_cup",i)))}function _(e,t){var n,a="";return a+='<time class="mediaSchedule__tableTime">'+k((n=e&&e.parts,n=null==n||n===!1?n:n.second,n=null==n||n===!1?n:n.from,typeof n===b?n.apply(e):n))+'</time>&thinsp;–&thinsp;<time class="mediaSchedule__tableTime">'+k((n=e&&e.parts,n=null==n||n===!1?n:n.second,n=null==n||n===!1?n:n.to,typeof n===b?n.apply(e):n))+"</time>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var v,y="",b="function",k=this.escapeExpression,w=this,x=n.helperMissing;return y+='<div class="mediaSchedule__table',v=n["if"].call(t,t&&t.is12h,{hash:{},inverse:w.noop,fn:w.program(1,o,i),data:i}),(v||0===v)&&(y+=v),y+='"><div class="mediaSchedule__tableCell _keys">',v=n.each.call(t,t&&t.week,{hash:{},inverse:w.noop,fn:w.programWithDepth(3,r,i,t),data:i}),(v||0===v)&&(y+=v),y+='</div><div class="mediaSchedule__tableCell _work">',v=n.each.call(t,t&&t.week,{hash:{},inverse:w.noop,fn:w.program(10,u,i),data:i}),(v||0===v)&&(y+=v),y+="</div>",v=n["if"].call(t,t&&t.hasSecondColumn,{hash:{},inverse:w.noop,fn:w.program(17,f,i),data:i}),(v||0===v)&&(y+=v),y+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.metroCard=this.jst_modules.metroCard||{},this.jst_modules.metroCard.print=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="cardToPrint__drilldown">',(i=n.location)?a=i.call(e,{hash:{},data:t}):(i=e&&e.location,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=g(a)+"</div>"}function r(e,t){var a,i="";return i+='<address class="cardToPrint__address">',a=n["if"].call(e,(a=e&&e.address,null==a||a===!1?a:a.street),{hash:{},inverse:_.noop,fn:_.program(4,s,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,(a=e&&e.address,null==a||a===!1?a:a.comment),{hash:{},inverse:_.noop,fn:_.program(6,l,t),data:t}),(a||0===a)&&(i+=a),i+="</address>"}function s(e,t){var n,a="";return a+='<div class="cardToPrint__addressStreet"><span class="cardToPrint__addressLink">'+g((n=e&&e.address,n=null==n||n===!1?n:n.street,typeof n===m?n.apply(e):n))+"</span></div>"}function l(e,t){var n,a="";return a+='<div class="cardToPrint__addressComment"><span class="cardToPrint__addressCommentText">'+g((n=e&&e.address,n=null==n||n===!1?n:n.comment,typeof n===m?n.apply(e):n))+"</span></div>"}function c(e,t){var a,i,o="";return o+='<div class="cardToPrint__scheduleWrapper"><div class="cardToPrint__schedule">',(i=n.schedule)?a=i.call(e,{hash:{},data:t}):(i=e&&e.schedule,a=typeof i===m?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div></div>"}function u(e,t){var a,i="";return i+='<div class="metroCard__directions" data-print="dynamic" style="border-color: '+g((a=e&&e.line,a=null==a||a===!1?a:a.color,typeof a===m?a.apply(e):a))+'">',a=n.each.call(e,e&&e.metroRoutes,{hash:{},inverse:_.noop,fn:_.program(11,d,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function d(e,t){var a,i,o="";return o+=g((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):v.call(e,"module",e,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p,f="",m="function",g=this.escapeExpression,_=this,v=n.helperMissing;return f+='<div class="cardToPrint _module_metroCard" data-print="static"><header class="cardToPrint__header"><h1 class="cardToPrint__headerTitle">',(p=n.name)?h=p.call(t,{hash:{},data:i}):(p=t&&t.name,h=typeof p===m?p.call(t,{hash:{},data:i}):p),f+=g(h)+'</h1></header><div class="cardToPrint__printDetails"><div class="cardToPrint__type _city_',(p=n.city)?h=p.call(t,{hash:{},data:i}):(p=t&&t.city,h=typeof p===m?p.call(t,{hash:{},data:i}):p),f+=g(h)+'"><span class="cardToPrint__typeLabel">',(p=n.type)?h=p.call(t,{hash:{},data:i}):(p=t&&t.type,h=typeof p===m?p.call(t,{hash:{},data:i}):p),f+=g(h)+"</span>",h=n["if"].call(t,t&&t.location,{hash:{},inverse:_.noop,fn:_.program(1,o,i),data:i}),(h||0===h)&&(f+=h),f+="</div>",h=n["if"].call(t,t&&t.addressBlock,{hash:{},inverse:_.noop,fn:_.program(3,r,i),data:i}),(h||0===h)&&(f+=h),h=n["if"].call(t,t&&t.schedule,{hash:{},inverse:_.noop,fn:_.program(8,c,i),data:i}),(h||0===h)&&(f+=h),f+="</div></div>",h=n["if"].call(t,t&&t.metroRoutes,{hash:{},inverse:_.noop,fn:_.program(10,u,i),data:i}),(h||0===h)&&(f+=h),f},this.jst_modules=this.jst_modules||{},this.jst_modules.miniCard=this.jst_modules.miniCard||{},this.jst_modules.miniCard.address=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<span class="miniCard__buildingName">',(i=n.buildingName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.buildingName,a=typeof i===c?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+=",&nbsp;</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c="function",u=this;return r=n["if"].call(t,t&&t.buildingName,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(l+=r),l+='<span class="miniCard__address">',(s=n.fullAddress)?r=s.call(t,{hash:{},data:i}):(s=t&&t.fullAddress,r=typeof s===c?s.call(t,{hash:{},data:i}):s),(r||0===r)&&(l+=r),l+="</span>"},this.jst_modules=this.jst_modules||{},this.jst_modules.miniCard=this.jst_modules.miniCard||{},this.jst_modules.miniCard.filials=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+="\n     ",i=n.Link||e&&e.Link,o={hash:{href:e&&e.seoLinkFilials,"class":"miniCard__filials","data-filials-id":(a=e&&e.filials,null==a||a===!1?a:a.id)},inverse:d.noop,fn:d.program(2,r,t),data:t},a=i?i.call(e,o):c.call(e,"Link",o),(a||0===a)&&(s+=a),s}function r(e,t){var a,i,o,r="";return r+=u((i=n._nt||e&&e._nt,o={hash:{},data:t},i?i.call(e,"%1 филиал","%1 филиала","%1 филиалов",(a=e&&e.filials,null==a||a===!1?a:a.count),o):c.call(e,"_nt","%1 филиал","%1 филиала","%1 филиалов",(a=e&&e.filials,null==a||a===!1?a:a.count),o)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c=n.helperMissing,u=this.escapeExpression,d=this;return s=n["if"].call(t,(s=t&&t.filials,null==s||s===!1?s:s.count),{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l},this.jst_modules=this.jst_modules||{},this.jst_modules.miniCard=this.jst_modules.miniCard||{},this.jst_modules.miniCard.phone=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return i=n.Link||e&&e.Link,o={hash:{"class":"_scheme_none miniCard__phoneNum _fade",href:(a=e&&e.phone,null==a||a===!1?a:a.href)},inverse:p.noop,fn:p.program(2,r,t),data:t},a=i?i.call(e,o):f.call(e,"Link",o),(a||0===a)&&(s+=a),s}function r(e,t){var n,a="";return a+=h((n=e&&e.phone,n=null==n||n===!1?n:n.parts,n=null==n||n===!1?n:n.visible,typeof n===d?n.apply(e):n))+'<span class="miniCard__phoneNumInvisiblePart">'+h((n=e&&e.phone,n=null==n||n===!1?n:n.parts,n=null==n||n===!1?n:n.invisible,typeof n===d?n.apply(e):n))+"</span>"}function s(e,t){var a,i,o,r="";return r+=h((i=n.Link||e&&e.Link,o={hash:{"class":"_scheme_none miniCard__phoneNum",href:(a=e&&e.phone,null==a||a===!1?a:a.href)},data:t},i?i.call(e,(a=e&&e.phone,null==a||a===!1?a:a.value),o):f.call(e,"Link",(a=e&&e.phone,null==a||a===!1?a:a.value),o)))}function l(e,t){var a,i,o,r="";return r+='<span class="miniCard__phoneShow">',i=n._t||e&&e._t,o={hash:{},data:t},a=i?i.call(e,"Посмотреть телефон",o):f.call(e,"_t","Посмотреть телефон",o),(a||0===a)&&(r+=a),r+=h((i=n.Icon||e&&e.Icon,o={hash:{"class":"miniCard__photoShape"},data:t},i?i.call(e,"card_shape",o):f.call(e,"Icon","card_shape",o)))+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u="",d="function",h=this.escapeExpression,p=this,f=n.helperMissing;return u+='<span class="miniCard__descText miniCard__phone">',c=n["if"].call(t,(c=t&&t.phone,null==c||c===!1?c:c.fade),{hash:{},inverse:p.program(4,s,i),fn:p.program(1,o,i),data:i}),(c||0===c)&&(u+=c),c=n["if"].call(t,(c=t&&t.phone,null==c||c===!1?c:c.fade),{
hash:{},inverse:p.noop,fn:p.program(6,l,i),data:i}),(c||0===c)&&(u+=c),u+="</span>"},this.jst_modules=this.jst_modules||{},this.jst_modules.museum=this.jst_modules.museum||{},this.jst_modules.museum.desktopContext=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<a class="museum__browser museum__safari" target="_blank" href="',(i=n.safariLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.safariLink,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'" title="Загрузить Safari"></a>'}function r(e,t){var a,i,o="";return o+='<a class="museum__browser museum__ie" target="_blank" href="',(i=n.ieLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.ieLink,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'" title="Really?"></a>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d="function",h=this.escapeExpression,p=n.helperMissing,f=this;return u+='<span class="museum__attention">'+h((l=n._t||t&&t._t,c={hash:{},data:i},l?l.call(t,"Мы не гарантируем стабильную работу приложения в вашем браузере. Попробуйте обновиться:",c):p.call(t,"_t","Мы не гарантируем стабильную работу приложения в вашем браузере. Попробуйте обновиться:",c)))+'</span><a class="museum__browser museum__chrome" target="_blank" href="',(l=n.chromeLink)?s=l.call(t,{hash:{},data:i}):(l=t&&t.chromeLink,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+'" title="Загрузить Chrome"></a><a class="museum__browser museum__firefox" target="_blank" href="',(l=n.firefoxLink)?s=l.call(t,{hash:{},data:i}):(l=t&&t.firefoxLink,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+'" title="Загрузить FireFox"></a>',s=n["if"].call(t,t&&t.safariLink,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+='<a class="museum__browser museum__opera" target="_blank" href="',(l=n.operaLink)?s=l.call(t,{hash:{},data:i}):(l=t&&t.operaLink,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+'" title="Загрузить Opera"></a>',s=n["if"].call(t,t&&t.ieLink,{hash:{},inverse:f.noop,fn:f.program(3,r,i),data:i}),(s||0===s)&&(u+=s),u},this.jst_modules=this.jst_modules||{},this.jst_modules.museum=this.jst_modules.museum||{},this.jst_modules.museum.mobileContext=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<span class="museum__attention">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Мы не гарантируем стабильную работу приложения на вашем устройстве.",r):l.call(t,"_t","Мы не гарантируем стабильную работу приложения на вашем устройстве.",r)))+"</span>"},this.jst_modules=this.jst_modules||{},this.jst_modules.newYearGifts=this.jst_modules.newYearGifts||{},this.jst_modules.newYearGifts.present=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<li class="newYearGifts__listRow"><div class="newYearGifts__listCell _thumb"><div class="newYearGifts__listThumb" style="background-image: url(',(i=n.image)?a=i.call(e,{hash:{},data:t}):(i=e&&e.image,a=typeof i===d?i.call(e,{hash:{},data:t}):i),s+=u(a)+');" title="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===d?i.call(e,{hash:{},data:t}):i),s+=u(a)+'"></div></div><div class="newYearGifts__listCell _name"><div class="newYearGifts__listName">',(i=n.fullName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.fullName,a=typeof i===d?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(s+=a),s+="</div>",a=n["if"].call(e,(a=e&&e.org,null==a||a===!1?a:a.primaryName),{hash:{},inverse:h.noop,fn:h.program(2,r,t),data:t}),(a||0===a)&&(s+=a),s+='</div><div class="newYearGifts__listCell _price">',(i=n.price)?a=i.call(e,{hash:{},data:t}):(i=e&&e.price,a=typeof i===d?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(s+=a),s+='</div><div class="newYearGifts__listCell _actions"><a class="newYearGifts__select" data-present-name="',(i=n.fullName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.fullName,a=typeof i===d?i.call(e,{hash:{},data:t}):i),s+=u(a)+'" data-present-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===d?i.call(e,{hash:{},data:t}):i),s+=u(a)+'"><span class="newYearGifts__selectCell">'+u((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Хочу этот",o):c.call(e,"_gg","Хочу этот",o)))+'</span><span class="newYearGifts__selectCell _counter"><span class="newYearGifts__selectCounter">',a=e&&e.stats,a=null==a||a===!1?a:a.reposts_count,a=typeof a===d?a.apply(e):a,(a||0===a)&&(s+=a),s+="</span></span></a></div></li>"}function r(e,t){var a,i,o,r="";return r+='<div class="newYearGifts__listOrg">'+u((i=n.Icon||e&&e.Icon,o={hash:{},data:t},i?i.call(e,"products-crown",o):c.call(e,"Icon","products-crown",o)))+" "+u((i=n.Link||e&&e.Link,o={hash:{"class":"newYearGifts__listOrgLink",href:(a=e&&e.org,null==a||a===!1?a:a.href),"data-id":(a=e&&e.org,null==a||a===!1?a:a.id)},data:t},i?i.call(e,(a=e&&e.org,null==a||a===!1?a:a.primaryName),o):c.call(e,"Link",(a=e&&e.org,null==a||a===!1?a:a.primaryName),o)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c=n.helperMissing,u=this.escapeExpression,d="function",h=this;return s=n["if"].call(t,t&&t.fullName,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l},this.jst_modules=this.jst_modules||{},this.jst_modules.newYearGiftsPopup=this.jst_modules.newYearGiftsPopup||{},this.jst_modules.newYearGiftsPopup.step2=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<div class="newYearGiftsPopup__close"></div><header class="newYearGiftsPopup__header"><h1 class="newYearGiftsPopup__title">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"Следите за конкурсом",s):c.call(t,"_gg","Следите за конкурсом",s)))+'</h1></header><p class="newYearGiftsPopup__text">',r=n._hgg||t&&t._hgg,s={hash:{link__href:"http://vk.com/all2gis",link__rel:"nofollow",link__target:"_blank"},data:i},o=r?r.call(t,"Каждые два дня мы&nbsp;определяем победителей и&nbsp;дарим подарки. Следите за&nbsp;конкурсом %{Link %1}.","в&nbsp;группе&nbsp;2ГИС",s):c.call(t,"_hgg","Каждые два дня мы&nbsp;определяем победителей и&nbsp;дарим подарки. Следите за&nbsp;конкурсом %{Link %1}.","в&nbsp;группе&nbsp;2ГИС",s),(o||0===o)&&(l+=o),l+="</p>"+u((r=n.Btn||t&&t.Btn,s={hash:{"class":"newYearGiftsPopup__btn newYearGiftsPopup__waitingBtn"},data:i},r?r.call(t,"Буду ждать!",s):c.call(t,"Btn","Буду ждать!",s)))},this.jst_modules=this.jst_modules||{},this.jst_modules.noResults=this.jst_modules.noResults||{},this.jst_modules.noResults.catalogFloorsNotFound=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="noResults__metarubrics">',a=n.each.call(e,e&&e.metaRubrics,{hash:{},inverse:f.noop,fn:f.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function r(e,t){var a,i,o,r="";return r+='<a href="',(i=n.seoLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.seoLink,a=typeof i===d?i.call(e,{hash:{},data:t}):i),r+=h(a)+'" class="noResults__metarubricsItem" data-rubric-query="',(i=n.query)?a=i.call(e,{hash:{},data:t}):(i=e&&e.query,a=typeof i===d?i.call(e,{hash:{},data:t}):i),r+=h(a)+'">'+h((i=n.Icon||e&&e.Icon,o={hash:{"class":"noResults__metaRubricsIcon"},data:t},i?i.call(e,e&&e.icon,o):p.call(e,"Icon",e&&e.icon,o)))+'<span class="noResults__metaRubricsTitle">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===d?i.call(e,{hash:{},data:t}):i),r+=h(a)+"</span></a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d="function",h=this.escapeExpression,p=n.helperMissing,f=this;return u+='<header class="noResults__header"><h1 class="noResults__title">',l=n._t||t&&t._t,c={hash:{},data:i},s=l?l.call(t,"Увы, на&nbsp;этажах ничего не&nbsp;найдено",c):p.call(t,"_t","Увы, на&nbsp;этажах ничего не&nbsp;найдено",c),(s||0===s)&&(u+=s),u+='</h1><div class="noResults__hint">'+h((l=n._t||t&&t._t,c={hash:{},data:i},l?l.call(t,"Попробуйте поискать на карте города или воспользуйтесь популярными рубриками:",c):p.call(t,"_t","Попробуйте поискать на карте города или воспользуйтесь популярными рубриками:",c)))+'</div><a class="noResults__inCityHintLink" href="">'+h((l=n.Icon||t&&t.Icon,c={hash:{"class":"noResults__inCityHintLinkIcon"},data:i},l?l.call(t,"floors_citySearch",c):p.call(t,"Icon","floors_citySearch",c)))+h((l=n._t||t&&t._t,c={hash:{},data:i},l?l.call(t,"Искать на карте города",c):p.call(t,"_t","Искать на карте города",c)))+"</a>",s=n["if"].call(t,t&&t.metaRubrics,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+="</header>"},this.jst_modules=this.jst_modules||{},this.jst_modules.noResults=this.jst_modules.noResults||{},this.jst_modules.noResults.catalogNotFound=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="noResults__hint">'+v((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Мы не нашли ни одного места или организации в %1 по вашему запросу. Попробуйте другие ключевые слова или воспользуйтесь быстрым поиском.",e&&e.regionPrepositional,i):_.call(e,"_t","Мы не нашли ни одного места или организации в %1 по вашему запросу. Попробуйте другие ключевые слова или воспользуйтесь быстрым поиском.",e&&e.regionPrepositional,i)))+"</div>"}function r(e,t){var a,i,o,r="";return r+='<h1 class="noResults__title">',i=n._t||e&&e._t,o={hash:{},data:t},a=i?i.call(e,"Увы, мы&nbsp;не&nbsp;знаем ответа на&nbsp;ваш вопрос",o):_.call(e,"_t","Увы, мы&nbsp;не&nbsp;знаем ответа на&nbsp;ваш вопрос",o),(a||0===a)&&(r+=a),r+="</h1>",a=n["if"].call(e,e&&e.dym,{hash:{},inverse:b.program(8,u,t),fn:b.program(4,s,t),data:t}),(a||0===a)&&(r+=a),r}function s(e,t){var a,i,o,r="";return r+='<div class="noResults__hint">'+v((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Возможно, вы имели в виду:",o):_.call(e,"_t","Возможно, вы имели в виду:",o)))+'<ul class="noResults__dym">',a=n.each.call(e,e&&e.dym,{hash:{},inverse:b.noop,fn:b.program(5,l,t),data:t}),(a||0===a)&&(r+=a),r+='</ul></div><div class="noResults__hint">'+v((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Если нет, попробуйте другие ключевые слова или воспользуйтесь быстрым поиском:",o):_.call(e,"_t","Если нет, попробуйте другие ключевые слова или воспользуйтесь быстрым поиском:",o)))+"</div>"}function l(e,t){var a,i,o,r="";return r+='<li class="noResults__dymItem">',i=n.Link||e&&e.Link,o={hash:{href:e&&e.url,"class":"_scheme_none noResults__dymItemLink","data-id":e&&e.id,"data-name":e&&e.name},inverse:b.noop,fn:b.program(6,c,t),data:t},a=i?i.call(e,o):_.call(e,"Link",o),(a||0===a)&&(r+=a),r+="</li>"}function c(e,t){var a,i;return(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===y?i.call(e,{hash:{},data:t}):i),v(a)}function u(e,t){var a,i,o="";return o+='<div class="noResults__hint">'+v((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Попробуйте другие ключевые слова или воспользуйтесь быстрым поиском:",i):_.call(e,"_t","Попробуйте другие ключевые слова или воспользуйтесь быстрым поиском:",i)))+"</div>"}function d(e,t){var a,i="";return i+='<div class="noResults__metarubrics">',a=n.each.call(e,e&&e.metaRubrics,{hash:{},inverse:b.noop,fn:b.program(11,h,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function h(e,t){var a,i,o="";return o+='<a href="',(i=n.seoLink)?a=i.call(e,{hash:{},data:t}):(i=e&&e.seoLink,a=typeof i===y?i.call(e,{hash:{},data:t}):i),o+=v(a)+'" class="noResults__metarubricsItem _type_',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===y?i.call(e,{hash:{},data:t}):i),o+=v(a)+'" data-rubric-query="',(i=n.query)?a=i.call(e,{hash:{},data:t}):(i=e&&e.query,a=typeof i===y?i.call(e,{hash:{},data:t}):i),o+=v(a)+'"><div class="noResults__metarubricsItemWrap">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===y?i.call(e,{hash:{},data:t}):i),o+=v(a)+"</div></a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var p,f,m,g="",_=n.helperMissing,v=this.escapeExpression,y="function",b=this;return g+='<header class="noResults__header"><div class="noResults__wizard">'+v((f=n.module||t&&t.module,m={hash:{},data:i},f?f.call(t,"wizard",m):_.call(t,"module","wizard",m)))+"</div>",p=n["if"].call(t,t&&t.isWizardInited,{hash:{},inverse:b.program(3,r,i),fn:b.program(1,o,i),data:i}),(p||0===p)&&(g+=p),p=n["if"].call(t,t&&t.metaRubrics,{hash:{},inverse:b.noop,fn:b.program(10,d,i),data:i}),(p||0===p)&&(g+=p),g+='</header><a href="',(f=n.addFirmHref)?p=f.call(t,{hash:{},data:i}):(f=t&&t.addFirmHref,p=typeof f===y?f.call(t,{hash:{},data:i}):f),g+=v(p)+'" target="_blank" class="noResults__footer noResults__addFirmBtn"><h2 class="noResults__footerTitle">'+v((f=n._t||t&&t._t,m={hash:{},data:i},f?f.call(t,"Добавить организацию",m):_.call(t,"_t","Добавить организацию",m)))+'</h2><div class="noResults__footerHint">',f=n._t||t&&t._t,m={hash:{},data:i},p=f?f.call(t,"Если вы точно знаете, какой организации не&nbsp;хватает в&nbsp;нашем справочнике&nbsp;&#151; пожалуйста, добавьте&nbsp;её.",m):_.call(t,"_t","Если вы точно знаете, какой организации не&nbsp;хватает в&nbsp;нашем справочнике&nbsp;&#151; пожалуйста, добавьте&nbsp;её.",m),(p||0===p)&&(g+=p),g+="</div></a>"},this.jst_modules=this.jst_modules||{},this.jst_modules.noResults=this.jst_modules.noResults||{},this.jst_modules.noResults.catalogServerError=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<h1 class="noResults__title">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Что-то пошло не так",s):c.call(t,"_t","Что-то пошло не так",s)))+'</h1><div class="noResults__hint">',r=n._t||t&&t._t,s={hash:{},data:i},o=r?r.call(t,"Мы&nbsp;обязательно найдем причину и&nbsp;исправим&nbsp;её. Вы&nbsp;можете повторить попытку через пару минут.",s):c.call(t,"_t","Мы&nbsp;обязательно найдем причину и&nbsp;исправим&nbsp;её. Вы&nbsp;можете повторить попытку через пару минут.",s),(o||0===o)&&(l+=o),l+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.noResults=this.jst_modules.noResults||{},this.jst_modules.noResults.floorsNotAllowedOnPhone=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<h1 class="noResults__title">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Пока без этажей",r):l.call(t,"_t","Пока без этажей",r)))+'</h1><div class="noResults__hint">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Мы ещё не показываем планы ТЦ в мобильном браузере. Посмотрите этажи в приложении 2ГИС или откройте ссылку на компьютере.",r):l.call(t,"_t","Мы ещё не показываем планы ТЦ в мобильном браузере. Посмотрите этажи в приложении 2ГИС или откройте ссылку на компьютере.",r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.noResults=this.jst_modules.noResults||{},this.jst_modules.noResults.floorsWithoutWebGl=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<h1 class="noResults__title">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Не можем показать этажи",r):l.call(t,"_t","Не можем показать этажи",r)))+'</h1><div class="noResults__hint">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Нам не удалось показать планы ТЦ на вашем компьютере. Причины могут быть разные, и все связаны с техникой. Попробуйте открыть 2ГИС в другом браузере.",r):l.call(t,"_t","Нам не удалось показать планы ТЦ на вашем компьютере. Причины могут быть разные, и все связаны с техникой. Попробуйте открыть 2ГИС в другом браузере.",r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.noResults=this.jst_modules.noResults||{},this.jst_modules.noResults.notAllowedOnPhone=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<h1 class="noResults__title">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Не для мобильных",r):l.call(t,"_gg","Не для мобильных",r)))+'</h1><div class="noResults__hint">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Эта страница работает только с настольных компьютеров и не работает с мобильных устройств.",r):l.call(t,"_gg","Эта страница работает только с настольных компьютеров и не работает с мобильных устройств.",r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.noResults=this.jst_modules.noResults||{},this.jst_modules.noResults.notFoundCity=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<div class="noResults__title">',r=n._t||t&&t._t,s={hash:{},data:i},o=r?r.call(t,"Такого города пока нет в&nbsp;базе 2ГИС.",s):c.call(t,"_t","Такого города пока нет в&nbsp;базе 2ГИС.",s),(o||0===o)&&(l+=o),l+="<br>"+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Попробуйте изменить запрос!",s):c.call(t,"_t","Попробуйте изменить запрос!",s)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.noResults=this.jst_modules.noResults||{},this.jst_modules.noResults.notFoundPoints=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+=u((r=n.p||t&&t.p,s={hash:{},data:i},r?r.call(t,"routeType",s):c.call(t,"p","routeType",s)))+'<h1 class="noResults__title">',r=n._t||t&&t._t,s={hash:{},data:i},o=r?r.call(t,"Увы, невозможно построить такой маршрут",s):c.call(t,"_t","Увы, невозможно построить такой маршрут",s),(o||0===o)&&(l+=o),l+='</h1><ul class="noResults__hintsList"><li class="noResults__hintsListItem">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Проверьте, все ли названия написаны верно;",s):c.call(t,"_t","Проверьте, все ли названия написаны верно;",s)))+'</li><li class="noResults__hintsListItem">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Уточните адрес в справочнике организаций;",s):c.call(t,"_t","Уточните адрес в справочнике организаций;",s)))+'</li><li class="noResults__hintsListItem">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Выберите место на карте.",s):c.call(t,"_t","Выберите место на карте.",s)))+"</li></ul>"},this.jst_modules=this.jst_modules||{},this.jst_modules.noResults=this.jst_modules.noResults||{},this.jst_modules.noResults.notFoundRoutes=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return i=n._ht||e&&e._ht,o={hash:{link__class:"noResults__linkBus"},data:t},a=i?i.call(e,"До метро слишком далеко. Попробуйте проложить маршрут на&nbsp;%{Link наземном транспорте}.",o):d.call(e,"_ht","До метро слишком далеко. Попробуйте проложить маршрут на&nbsp;%{Link наземном транспорте}.",o),(a||0===a)&&(r+=a),r}function r(e,t){var a,i,o,r="";return i=n._ht||e&&e._ht,o={hash:{link__class:"noResults__linkTaxi"},data:t},a=i?i.call(e,"Попробуйте доехать на&nbsp;%{Link такси}.",o):d.call(e,"_ht","Попробуйте доехать на&nbsp;%{Link такси}.",o),(a||0===a)&&(r+=a),r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d=n.helperMissing,h=this.escapeExpression,p=this;return u+=h((l=n.p||t&&t.p,c={hash:{},data:i},l?l.call(t,"routeType",c):d.call(t,"p","routeType",c)))+'<h1 class="noResults__title">',l=n._t||t&&t._t,c={hash:{},data:i},s=l?l.call(t,"Увы, невозможно построить такой маршрут",c):d.call(t,"_t","Увы, невозможно построить такой маршрут",c),(s||0===s)&&(u+=s),u+='</h1><div class="noResults__hint">',s=n["if"].call(t,t&&t.isSubway,{hash:{},inverse:p.program(3,r,i),fn:p.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.noResults=this.jst_modules.noResults||{},this.jst_modules.noResults.notFoundRoutesGlobal=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<ul class="noResults__hintsList _projects">',a=n.each.call(e,e&&e.projects,{hash:{},inverse:p.noop,fn:p.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function r(e,t){var a,i,o="";return o+='<li class="noResults__hintsListItem">'+h((a=n.Link||e&&e.Link,i={hash:{href:e&&e.href,"class":"noResults__project _undashed","data-id":e&&e.id},data:t},a?a.call(e,e&&e.text,i):d.call(e,"Link",e&&e.text,i)))+"</li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d=n.helperMissing,h=this.escapeExpression,p=this;return u+=h((l=n.p||t&&t.p,c={hash:{},data:i},l?l.call(t,"routeType",c):d.call(t,"p","routeType",c)))+'<div class="noResults__unavailable">',l=n._t||t&&t._t,c={hash:{},data:i},s=l?l.call(t,"На данный момент функция построения маршрута между городами недоступна. Мы уже работаем над&nbsp;этим.",c):d.call(t,"_t","На данный момент функция построения маршрута между городами недоступна. Мы уже работаем над&nbsp;этим.",c),(s||0===s)&&(u+=s),u+="</div>",s=n["if"].call(t,(s=t&&t.projects,null==s||s===!1?s:s.length),{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u},this.jst_modules=this.jst_modules||{},this.jst_modules.noResults=this.jst_modules.noResults||{},this.jst_modules.noResults.pointsIsEqual=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+=c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,"routeType",r):l.call(t,"p","routeType",r)))+'<h1 class="noResults__title">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Попробуйте ещё раз",r):l.call(t,"_t","Попробуйте ещё раз",r)))+'</h1><div class="noResults__hint">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Начальная и конечная точки маршрута совпадают.",r):l.call(t,"_t","Начальная и конечная точки маршрута совпадают.",r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.noResults=this.jst_modules.noResults||{},this.jst_modules.noResults.routeServerError=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+=c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,"routeType",r):l.call(t,"p","routeType",r)))+'<h1 class="noResults__title">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Что-то пошло не так",r):l.call(t,"_t","Что-то пошло не так",r)))+'</h1><div class="noResults__hint">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Наши серверы отказываются отвечать. Мы уже прикладываем максимум усилий, чтобы вразумить их. Попробуйте ещё раз через несколько минут.",r):l.call(t,"_t","Наши серверы отказываются отвечать. Мы уже прикладываем максимум усилий, чтобы вразумить их. Попробуйте ещё раз через несколько минут.",r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.noResults=this.jst_modules.noResults||{},this.jst_modules.noResults.routeType=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="noResults__routeType">',(i=n.routeType)?a=i.call(e,{hash:{},data:t}):(i=e&&e.routeType,a=typeof i===l?i.call(e,{hash:{},data:t}):i),o+=c(a)+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l="function",c=this.escapeExpression,u=this;return r=n["if"].call(t,t&&t.routeType,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},this.jst_modules=this.jst_modules||{},this.jst_modules.patchwork=this.jst_modules.patchwork||{},this.jst_modules.patchwork.item=function(e,t,n,a,i){function o(e,t){return" _mega"}function r(e,t){return" _loaded"}function s(e,t){return" _isUploadFailed"}function l(e,t){return" _megaPhotoFailed"}function c(e,t){return"data-load-failed"}function u(e,t){return" _uploadInProgress"}function d(e,t){var a,i,o,r="";return r+='<div class="patchwork__itemImg"',a=n["if"].call(e,e&&e.isLoaded,{hash:{},inverse:b.noop,fn:b.program(14,h,t),data:t}),(a||0===a)&&(r+=a),r+="></div>"+y((i=n.Preloader||e&&e.Preloader,o={hash:{"class":"_scheme_lighten patchwork__photoPreloader"},data:t},i?i.call(e,o):k.call(e,"Preloader",o)))}function h(e,t){var a,i,o="";return o+=' style="background-image: url(',(i=n.url)?a=i.call(e,{hash:{},data:t}):(i=e&&e.url,a=typeof i===v?i.call(e,{hash:{},data:t}):i),o+=y(a)+')"'}function p(e,t){var a,i,o,r="";return r+='<div class="patchwork__closeError">'+y((i=n.Icon||e&&e.Icon,o={hash:{},data:t},i?i.call(e,"ui_close",o):k.call(e,"Icon","ui_close",o)))+'</div><div class="patchwork__errorWrapper"><div class="patchwork__iconWrapper">'+y((i=n.Icon||e&&e.Icon,o={hash:{"class":"patchwork__sadSmileIcon"},data:t},i?i.call(e,"patchwork_sadSmile",o):k.call(e,"Icon","patchwork_sadSmile",o)))+'</div><p class="patchwork__errorAlert">'+y((a=e&&e.errorMessages,a=null==a||a===!1?a:a[0],typeof a===v?a.apply(e):a))+'</p><p class="patchwork__fileName">',(i=n.fileName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.fileName,a=typeof i===v?i.call(e,{hash:{},data:t}):i),r+=y(a)+"</p></div>"}function f(e,t){var a,i,o="";return o+='<div class="patchwork__itemIndex">',(i=n.debugIndex)?a=i.call(e,{hash:{},data:t}):(i=e&&e.debugIndex,a=typeof i===v?i.call(e,{hash:{},data:t}):i),o+=y(a)+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var m,g,_="",v="function",y=this.escapeExpression,b=this,k=n.helperMissing;return _+='<div class="patchwork__item _size_',(g=n.size)?m=g.call(t,{hash:{},data:i}):(g=t&&t.size,m=typeof g===v?g.call(t,{hash:{},data:i}):g),_+=y(m)+"\n    ",m=n["if"].call(t,t&&t.isMega,{hash:{},inverse:b.noop,fn:b.program(1,o,i),data:i}),(m||0===m)&&(_+=m),_+="\n    ",m=n["if"].call(t,t&&t.isLoaded,{hash:{},inverse:b.noop,fn:b.program(3,r,i),data:i}),(m||0===m)&&(_+=m),_+="\n    ",m=n["if"].call(t,t&&t.isUploadFailed,{hash:{},inverse:b.noop,fn:b.program(5,s,i),data:i}),(m||0===m)&&(_+=m),_+="\n    ",m=n["if"].call(t,t&&t.megaPhotoFailed,{hash:{},inverse:b.noop,fn:b.program(7,l,i),data:i}),(m||0===m)&&(_+=m),_+='"\n    data-id="',(g=n.id)?m=g.call(t,{hash:{},data:i}):(g=t&&t.id,m=typeof g===v?g.call(t,{hash:{},data:i}):g),_+=y(m)+'"\n    ',m=n["if"].call(t,t&&t.isLoadFailed,{hash:{},inverse:b.noop,fn:b.program(9,c,i),data:i}),(m||0===m)&&(_+=m),_+='\n    data-index="',(g=n.index)?m=g.call(t,{hash:{},data:i}):(g=t&&t.index,m=typeof g===v?g.call(t,{hash:{},data:i}):g),_+=y(m)+'"><a class="patchwork__itemLink',m=n["if"].call(t,t&&t.isUploadInProgress,{hash:{},inverse:b.noop,fn:b.program(11,u,i),data:i}),(m||0===m)&&(_+=m),_+='" href="',(g=n.seoLink)?m=g.call(t,{hash:{},data:i}):(g=t&&t.seoLink,m=typeof g===v?g.call(t,{hash:{},data:i}):g),_+=y(m)+'" data-id="',(g=n.id)?m=g.call(t,{hash:{},data:i}):(g=t&&t.id,m=typeof g===v?g.call(t,{hash:{},data:i}):g),_+=y(m)+'">',m=n.unless.call(t,t&&t.isUploadFailed,{hash:{},inverse:b.program(16,p,i),fn:b.program(13,d,i),data:i}),(m||0===m)&&(_+=m),_+="</a>",m=n["if"].call(t,t&&t.debugIndex,{hash:{},inverse:b.noop,fn:b.program(18,f,i),data:i}),(m||0===m)&&(_+=m),_+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.photosUploaderTooltip=this.jst_modules.photosUploaderTooltip||{},this.jst_modules.photosUploaderTooltip.firm=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<span class="photosUploaderTooltip__textHeader">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Фото организаций​",s):c.call(t,"_t","Фото организаций​",s)))+"</span>",r=n._ht||t&&t._ht,s={hash:{link__class:"_scheme_dark photosUploaderTooltip__textLink _undashed"},data:i},o=r?r.call(t,"%{Link Добавьте} первую фотографию этой компании",s):c.call(t,"_ht","%{Link Добавьте} первую фотографию этой компании",s),(o||0===o)&&(l+=o),l},this.jst_modules=this.jst_modules||{},this.jst_modules.photosUploaderTooltip=this.jst_modules.photosUploaderTooltip||{},this.jst_modules.photosUploaderTooltip.geo=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<span class="photosUploaderTooltip__textHeader">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Фото любимых мест​",s):c.call(t,"_t","Фото любимых мест​",s)))+"</span>",r=n._ht||t&&t._ht,s={hash:{link__class:"_scheme_dark photosUploaderTooltip__textLink _undashed"},data:i},o=r?r.call(t,"%{Link Добавьте} первую фотографию этому месту",s):c.call(t,"_ht","%{Link Добавьте} первую фотографию этому месту",s),(o||0===o)&&(l+=o),l},this.jst_modules=this.jst_modules||{},this.jst_modules.print=this.jst_modules.print||{},this.jst_modules.print.complex=function(e,t,n,a,i){function o(e,t,a){var i,o,r="";return r+='<div class="print__column _orientation_'+v((i=null==t||t===!1?t:t.key,typeof i===_?i.apply(e):i))+'"><div class="print__static">',i=a&&a["static"],i=typeof i===_?i.apply(e):i,(i||0===i)&&(r+=i),r+='</div><div class="print__dynamic _orientation_'+v((i=null==t||t===!1?t:t.key,typeof i===_?i.apply(e):i))+' print__preload">',(o=n.dynamic)?i=o.call(e,{hash:{},data:t}):(o=e&&e.dynamic,i=typeof o===_?o.call(e,{hash:{},data:t}):o),(i||0===i)&&(r+=i),r+="</div></div>"}function r(e,t){var a,i="";return i+='<div class="print__mapWrap"><iframe class="print__iframe" style="height: 3000px; width: 3000px;"></iframe></div>',a=n.each.call(e,e&&e.orientations,{hash:{},inverse:y.noop,fn:y.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i}function s(e,t){var a,i="";return a=n["if"].call(e,e&&e.dynamicSecond,{hash:{},inverse:y.noop,fn:y.program(5,l,t),data:t}),(a||0===a)&&(i+=a),i}function l(e,t){var a,i,o="";return o+='<div class="print__secondColumn _orientation_'+v((a=null==t||t===!1?t:t.key,typeof a===_?a.apply(e):a))+'"><div class="print__dynamic">',(i=n.dynamicSecond)?a=i.call(e,{hash:{},data:t}):(i=e&&e.dynamicSecond,a=typeof i===_?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div></div>"}function c(e,t){var a,i="";return a=n.each.call(e,e&&e.orientations,{hash:{},inverse:y.noop,fn:y.program(8,u,t),data:t}),(a||0===a)&&(i+=a),i}function u(e,t){var a,i="";return a=n["if"].call(e,e&&e.dynamicSecond,{hash:{},inverse:y.noop,fn:y.program(9,d,t),data:t}),(a||0===a)&&(i+=a),i}function d(e,t){var a,i,o="";return o+='<div class="print__dynamic _orientation_'+v((a=null==t||t===!1?t:t.key,typeof a===_?a.apply(e):a))+'">',(i=n.dynamicSecond)?a=i.call(e,{hash:{},data:t}):(i=e&&e.dynamicSecond,a=typeof i===_?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function h(e,t){var a,i="";return i+='<div class="print__wrap _orientation_'+v((a=null==t||t===!1?t:t.key,typeof a===_?a.apply(e):a))+'">',a=n["if"].call(e,e&&e.dynamicNext,{hash:{},inverse:y.noop,fn:y.program(12,p,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function p(e,t){var a,i="";return a=n.each.call(e,e&&e.dynamicNext,{hash:{},inverse:y.noop,fn:y.program(13,f,t),data:t}),(a||0===a)&&(i+=a),i}function f(e,t){var n,a="";return a+='<div class="print__column"><div class="print__dynamic">',n=typeof e===_?e.apply(e):e,(n||0===n)&&(a+=n),a+="</div></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var m,g="",_="function",v=this.escapeExpression,y=this;return m=n.each.call(t,t&&t.orientations,{hash:{},inverse:y.noop,fn:y.programWithDepth(1,o,i,t),data:i}),(m||0===m)&&(g+=m),g+='<div class="print__column">',m=n["if"].call(t,t&&t.map,{hash:{},inverse:y.program(7,c,i),fn:y.program(3,r,i),data:i}),(m||0===m)&&(g+=m),g+="</div>",m=n.each.call(t,t&&t.orientations,{hash:{},inverse:y.noop,fn:y.program(11,h,i),data:i}),(m||0===m)&&(g+=m),g},this.jst_modules=this.jst_modules||{},this.jst_modules.print=this.jst_modules.print||{},this.jst_modules.print.fakeElement=function(e,t,n,a,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="print__fakeElement"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.print=this.jst_modules.print||{},this.jst_modules.print.full=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l="function",c=this.escapeExpression;return s+='<div class="print__card print__static">',(r=n["static"])?o=r.call(t,{hash:{},data:i}):(r=t&&t["static"],o=typeof r===l?r.call(t,{hash:{},data:i}):r),(o||0===o)&&(s+=o),s+='</div><div class="print__mapWrap"><iframe class="print__iframe ',(r=n.mod)?o=r.call(t,{hash:{},data:i}):(r=t&&t.mod,o=typeof r===l?r.call(t,{hash:{},data:i
}):r),s+=c(o)+'" style="height: 3000px; width: 3000px;"></iframe></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.print=this.jst_modules.print||{},this.jst_modules.print.search=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="print__column _orientation_'+f((a=null==t||t===!1?t:t.key,typeof a===p?a.apply(e):a))+'"><div class="print__dynamic _orientation_'+f((a=null==t||t===!1?t:t.key,typeof a===p?a.apply(e):a))+' print__preload">',(i=n.dynamic)?a=i.call(e,{hash:{},data:t}):(i=e&&e.dynamic,a=typeof i===p?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div></div>",a=n["if"].call(e,e&&e.dynamicSecond,{hash:{},inverse:m.noop,fn:m.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o}function r(e,t){var a,i,o="";return o+='<div class="print__column _orientation_'+f((a=null==t||t===!1?t:t.key,typeof a===p?a.apply(e):a))+'"><div class="print__dynamic">',(i=n.dynamicSecond)?a=i.call(e,{hash:{},data:t}):(i=e&&e.dynamicSecond,a=typeof i===p?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div></div>"}function s(e,t){var a,i="";return i+='<div class="print__wrap _orientation_'+f((a=null==t||t===!1?t:t.key,typeof a===p?a.apply(e):a))+'">',a=n["if"].call(e,e&&e.dynamicNext,{hash:{},inverse:m.noop,fn:m.program(5,l,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function l(e,t){var a,i="";return a=n.each.call(e,e&&e.dynamicNext,{hash:{},inverse:m.noop,fn:m.program(6,c,t),data:t}),(a||0===a)&&(i+=a),i}function c(e,t){var n,a="";return a+='<div class="print__column"><div class="print__dynamic">',n=typeof e===p?e.apply(e):e,(n||0===n)&&(a+=n),a+="</div></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d,h="",p="function",f=this.escapeExpression,m=this;return h+='<div class="print__page"><div class="print__static">',(d=n["static"])?u=d.call(t,{hash:{},data:i}):(d=t&&t["static"],u=typeof d===p?d.call(t,{hash:{},data:i}):d),(u||0===u)&&(h+=u),h+="</div>",u=n.each.call(t,t&&t.orientations,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(u||0===u)&&(h+=u),h+="</div>",u=n.each.call(t,t&&t.orientations,{hash:{},inverse:m.noop,fn:m.program(4,s,i),data:i}),(u||0===u)&&(h+=u),h},this.jst_modules=this.jst_modules||{},this.jst_modules.productCard=this.jst_modules.productCard||{},this.jst_modules.productCard.proposal=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return i=n.Rating||e&&e.Rating,o={hash:{"class":"productCard__proposalRating",style:"mediumBlue"},inverse:g.noop,fn:g.program(2,r,t),data:t},a=i?i.call(e,(a=e&&e.firm,null==a||a===!1?a:a.rating),o):_.call(e,"Rating",(a=e&&e.firm,null==a||a===!1?a:a.rating),o),(a||0===a)&&(s+=a),s}function r(e,t){var n="";return n}function s(e,t){var a,i,o="";return o+=v((a=n.Icon||e&&e.Icon,i={hash:{"class":"productCard__proposalAdvertiser"},data:t},a?a.call(e,"products-crown",i):_.call(e,"Icon","products-crown",i)))}function l(e,t){var a,i,o,r="";return i=n.Link||e&&e.Link,o={hash:{href:e&&e.buyLink,"class":"productCard__proposalButton productCard__proposalBuy",target:"_blank"},inverse:g.noop,fn:g.program(7,c,t),data:t},a=i?i.call(e,o):_.call(e,"Link",o),(a||0===a)&&(r+=a),r}function c(e,t){var a,i;return v((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Купить на сайте",i):_.call(e,"_gg","Купить на сайте",i)))}function u(e,t){var a,i,o,r="";return r+='<span class="productCard__proposalFilials">&nbsp;–&nbsp;'+v((i=n._ngg||e&&e._ngg,o={hash:{},data:t},i?i.call(e,"%1 филиал","%1 филиала","%1 филиалов",(a=e&&e.firm,null==a||a===!1?a:a.filials),o):_.call(e,"_ngg","%1 филиал","%1 филиала","%1 филиалов",(a=e&&e.firm,null==a||a===!1?a:a.filials),o)))+"</span>"}function d(e,t){var n,a="";return a+='<span class="productCard__proposalPrice">'+v((n=e&&e.price,n=null==n||n===!1?n:n.value,typeof n===y?n.apply(e):n))+'&#8201;<span class="productCard__proposalPriceCurrency _'+v((n=e&&e.price,n=null==n||n===!1?n:n.currency,n=null==n||n===!1?n:n.code,typeof n===y?n.apply(e):n))+'">'+v((n=e&&e.price,n=null==n||n===!1?n:n.currency,n=null==n||n===!1?n:n.value,typeof n===y?n.apply(e):n))+"</span></span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p,f,m="",g=this,_=n.helperMissing,v=this.escapeExpression,y="function";return h=n["if"].call(t,(h=t&&t.firm,null==h||h===!1?h:h.rating),{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(h||0===h)&&(m+=h),h=n["if"].call(t,(h=t&&t.firm,null==h||h===!1?h:h.advertiser),{hash:{},inverse:g.noop,fn:g.program(4,s,i),data:i}),(h||0===h)&&(m+=h),m+='<div class="productCard__proposalButtons">',h=n["if"].call(t,t&&t.buyLink,{hash:{},inverse:g.noop,fn:g.program(6,l,i),data:i}),(h||0===h)&&(m+=h),m+='<span class="productCard__proposalButton productCard__proposalContacts" data-id="'+v((h=t&&t.firm,h=null==h||h===!1?h:h.id,typeof h===y?h.apply(t):h))+'">'+v((p=n._gg||t&&t._gg,f={hash:{},data:i},p?p.call(t,"Контакты",f):_.call(t,"_gg","Контакты",f)))+'</span></div><div class="productCard__proposalCompany">'+v((p=n.Link||t&&t.Link,f={hash:{href:(h=t&&t.firm,null==h||h===!1?h:h.seoUrl),"data-id":(h=t&&t.firm,null==h||h===!1?h:h.id),"class":"productCard__proposalName _undashed"},data:i},p?p.call(t,(h=t&&t.firm,null==h||h===!1?h:h.name),f):_.call(t,"Link",(h=t&&t.firm,null==h||h===!1?h:h.name),f)))+'<span class="productCard__proposalAddress">'+v((h=t&&t.firm,h=null==h||h===!1?h:h.address,typeof h===y?h.apply(t):h))+"</span>",h=n["if"].call(t,(h=t&&t.firm,null==h||h===!1?h:h.filials),{hash:{},inverse:g.noop,fn:g.program(9,u,i),data:i}),(h||0===h)&&(m+=h),m+="</div>",h=n["if"].call(t,t&&t.price,{hash:{},inverse:g.noop,fn:g.program(11,d,i),data:i}),(h||0===h)&&(m+=h),m},this.jst_modules=this.jst_modules||{},this.jst_modules.products=this.jst_modules.products||{},this.jst_modules.products.main=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="products__results">'+c((o=n.p||t&&t.p,r={hash:{},data:i},o?o.call(t,"results",r):l.call(t,"p","results",r)))+"</div>"+c((o=n.Preloader||t&&t.Preloader,r={hash:{"class":"products__bottomPreloader _scheme_circles"},data:i},o?o.call(t,r):l.call(t,"Preloader",r)))},this.jst_modules=this.jst_modules||{},this.jst_modules.products=this.jst_modules.products||{},this.jst_modules.products.results=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="products__resultsItem">'+c((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):l.call(e,"module",e,i)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l=n.helperMissing,c=this.escapeExpression,u=this;return r=n.each.call(t,t&&t.items,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},this.jst_modules=this.jst_modules||{},this.jst_modules.productsFilters=this.jst_modules.productsFilters||{},this.jst_modules.productsFilters.button=function(e,t,n,a,i){function o(e,t){return" _disabled"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c=this,u="function",d=this.escapeExpression;return l+='<div class="productsFilters__submit ',r=n["if"].call(t,t&&t.disabled,{hash:{},inverse:c.noop,fn:c.program(1,o,i),data:i}),(r||0===r)&&(l+=r),l+='" tabindex="0">',(s=n.label)?r=s.call(t,{hash:{},data:i}):(s=t&&t.label,r=typeof s===u?s.call(t,{hash:{},data:i}):s),l+=d(r)+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.productsFilters=this.jst_modules.productsFilters||{},this.jst_modules.productsFilters.checkbox=function(e,t,n,a,i){function o(e,t){return" _disabled"}function r(e,t){var a,i,o="";return o+=' value="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'"'}function s(e,t){return" checked"}function l(e,t){return" productsFilters__button"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u,d="",h="function",p=this.escapeExpression,f=this;return d+='<input\n    id="',(u=n.name)?c=u.call(t,{hash:{},data:i}):(u=t&&t.name,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+"-",(u=n.value)?c=u.call(t,{hash:{},data:i}):(u=t&&t.value,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+'"\n    type="checkbox"\n    name="',(u=n.name)?c=u.call(t,{hash:{},data:i}):(u=t&&t.name,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+'"\n    class="checkbox productsFilters__flagInput',c=n["if"].call(t,t&&t.disabled,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(c||0===c)&&(d+=c),d+='"\n    ',c=n["if"].call(t,t&&t.value,{hash:{},inverse:f.noop,fn:f.program(3,r,i),data:i}),(c||0===c)&&(d+=c),d+="\n    ",c=n["if"].call(t,t&&t.checked,{hash:{},inverse:f.noop,fn:f.program(5,s,i),data:i}),(c||0===c)&&(d+=c),d+='><label\n    for="',(u=n.name)?c=u.call(t,{hash:{},data:i}):(u=t&&t.name,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+"-",(u=n.value)?c=u.call(t,{hash:{},data:i}):(u=t&&t.value,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+'"\n    class="productsFilters__flag',c=n["if"].call(t,t&&t.button,{hash:{},inverse:f.noop,fn:f.program(7,l,i),data:i}),(c||0===c)&&(d+=c),d+=" _type_",(u=n.name)?c=u.call(t,{hash:{},data:i}):(u=t&&t.name,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+'"\n    title="',(u=n.label)?c=u.call(t,{hash:{},data:i}):(u=t&&t.label,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+'">',(u=n.label)?c=u.call(t,{hash:{},data:i}):(u=t&&t.label,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+"</label>"},this.jst_modules=this.jst_modules||{},this.jst_modules.productsFilters=this.jst_modules.productsFilters||{},this.jst_modules.productsFilters.radio=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=' value="',(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'"'}function r(e,t){return" checked"}function s(e,t){return" productsFilters__button"}function l(e,t){var a,i,o="";return o+='<span class="productsFilters__iconWrap">'+p((a=n.Icon||e&&e.Icon,i={hash:{"class":"productsFilters__icon"},data:t},a?a.call(e,e&&e.icon,i):f.call(e,"Icon",e&&e.icon,i)))+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u,d="",h="function",p=this.escapeExpression,f=n.helperMissing,m=this;return d+='<input id="',(u=n.name)?c=u.call(t,{hash:{},data:i}):(u=t&&t.name,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+"-",(u=n.value)?c=u.call(t,{hash:{},data:i}):(u=t&&t.value,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+'" type="radio" name="',(u=n.name)?c=u.call(t,{hash:{},data:i}):(u=t&&t.name,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+'" class="radio productsFilters__flagInput"',c=n["if"].call(t,t&&t.value,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(c||0===c)&&(d+=c),c=n["if"].call(t,t&&t.checked,{hash:{},inverse:m.noop,fn:m.program(3,r,i),data:i}),(c||0===c)&&(d+=c),d+='><label for="',(u=n.name)?c=u.call(t,{hash:{},data:i}):(u=t&&t.name,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+"-",(u=n.value)?c=u.call(t,{hash:{},data:i}):(u=t&&t.value,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+'" class="productsFilters__flag',c=n["if"].call(t,t&&t.button,{hash:{},inverse:m.noop,fn:m.program(5,s,i),data:i}),(c||0===c)&&(d+=c),d+=" _type_",(u=n.name)?c=u.call(t,{hash:{},data:i}):(u=t&&t.name,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+'" title="',(u=n.label)?c=u.call(t,{hash:{},data:i}):(u=t&&t.label,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+'">',c=n["if"].call(t,t&&t.icon,{hash:{},inverse:m.noop,fn:m.program(7,l,i),data:i}),(c||0===c)&&(d+=c),(u=n.label)?c=u.call(t,{hash:{},data:i}):(u=t&&t.label,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+"</label>"},this.jst_modules=this.jst_modules||{},this.jst_modules.productsFilters=this.jst_modules.productsFilters||{},this.jst_modules.productsFilters.selectbox=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<div class="productsFilters__selectbox" data-name="',(r=n.name)?o=r.call(t,{hash:{},data:i}):(r=t&&t.name,o=typeof r===c?r.call(t,{hash:{},data:i}):r),l+=u(o)+'">'+u((r=n.module||t&&t.module,s={hash:{},data:i},r?r.call(t,t&&t.selectBox,s):d.call(t,"module",t&&t.selectBox,s)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.productsFilters=this.jst_modules.productsFilters||{},this.jst_modules.productsFilters.slider=function(e,t,n,a,i){function o(e,t){var n,a="";return a+='<span class="productsFilters__raderRunnerLabelCurrency _'+d((n=e&&e.currency,n=null==n||n===!1?n:n.code,typeof n===u?n.apply(e):n))+'">'+d((n=e&&e.currency,n=null==n||n===!1?n:n.symbol,typeof n===u?n.apply(e):n))+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u="function",d=this.escapeExpression,h=n.helperMissing,p=this;return c+='<div class="productsFilters__rader" id="',(s=n.name)?r=s.call(t,{hash:{},data:i}):(s=t&&t.name,r=typeof s===u?s.call(t,{hash:{},data:i}):s),c+=d(r)+'"><div class="productsFilters__raderTrack"><div class="productsFilters__raderTrackActive"></div><div class="productsFilters__raderRunner productsFilters__raderRunnerLeft _type_min"></div><div class="productsFilters__raderRunner productsFilters__raderRunnerRight _type_max"><div class="productsFilters__raderRunnerLabel"><span class="productsFilters__raderRunnerLabelText">'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"до",l):h.call(t,"_gg","до",l)))+'&nbsp;</span><span class="productsFilters__raderRunnerLabelNumber">'+d((r=t&&t.values,r=null==r||r===!1?r:r.max,typeof r===u?r.apply(t):r))+"</span>&thinsp;\n                ",r=n["if"].call(t,t&&t.currency,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+="</div></div></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.promoEvent=this.jst_modules.promoEvent||{},this.jst_modules.promoEvent["9may"]=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="promoEvent__close"></div>'+c((o=n.Icon||t&&t.Icon,r={hash:{"class":"promoEvent__iconImage"},data:i},o?o.call(t,"victory_promoEventIcon",r):l.call(t,"Icon","victory_promoEventIcon",r)))+c((o=n.Icon||t&&t.Icon,r={hash:{"class":"promoEvent__title",alt:"День победы"},data:i},o?o.call(t,"victory_tooltipTitle",r):l.call(t,"Icon","victory_tooltipTitle",r)))+'<p class="promoEvent__text">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"на улицах города",r):l.call(t,"_gg","на улицах города",r)))+"</p>"},this.jst_modules=this.jst_modules||{},this.jst_modules.promoEvent=this.jst_modules.promoEvent||{},this.jst_modules.promoEvent.award2015=function(e,t,n,a,i){function o(e,t){var a,i;return m((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Открытия года",i):f.call(e,"_t","Открытия года",i)))}function r(e,t){var a,i,o,r="";return r+='<p class="promoEvent__text">',i=n._gg||e&&e._gg,o={hash:{},data:t},a=i?i.call(e,"Выбирайте лучшие компании<br>совместно с ",o):f.call(e,"_gg","Выбирайте лучшие компании<br>совместно с ",o),(a||0===a)&&(r+=a),r+=" "+m((i=n.Icon||e&&e.Icon,o={hash:{"class":"promoEvent__textImg"},data:t},i?i.call(e,"promoEvent_megafon",o):f.call(e,"Icon","promoEvent_megafon",o)))+"</p>"}function s(e,t){var a,i="";return a=n["if"].call(e,e&&e.clLocal,{hash:{},inverse:g.program(8,c,t),fn:g.program(6,l,t),data:t}),(a||0===a)&&(i+=a),i}function l(e,t){var a,i,o,r="";return r+='<p class="promoEvent__text">',i=n._gg||e&&e._gg,o={hash:{},data:t},a=i?i.call(e,"Elige las mejores<br>Patrocina: ",o):f.call(e,"_gg","Elige las mejores<br>Patrocina: ",o),(a||0===a)&&(r+=a),r+=" "+m((i=n.Icon||e&&e.Icon,o={hash:{"class":"promoEvent__textImg"},data:t},i?i.call(e,"award__uber",o):f.call(e,"Icon","award__uber",o)))+"</p>"}function c(e,t){var a,i,o,r="";return r+='<p class="promoEvent__text">',i=n._t||e&&e._t,o={hash:{},data:t},a=i?i.call(e,"Выбирайте лучшие компании",o):f.call(e,"_t","Выбирайте лучшие компании",o),(a||0===a)&&(r+=a),r+="</p>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d,h,p="",f=n.helperMissing,m=this.escapeExpression,g=this;return p+='<div class="promoEvent__close"></div>'+m((d=n.Icon||t&&t.Icon,h={hash:{"class":"promoEvent__iconImage"},data:i},d?d.call(t,"promoEvent_award",h):f.call(t,"Icon","promoEvent_award",h))),d=n.Link||t&&t.Link,h={hash:{href:"/award2015","class":"promoEvent__link _undashed"},inverse:g.noop,fn:g.program(1,o,i),data:i},u=d?d.call(t,h):f.call(t,"Link",h),(u||0===u)&&(p+=u),u=n["if"].call(t,t&&t.ruLocal,{hash:{},inverse:g.program(5,s,i),fn:g.program(3,r,i),data:i}),(u||0===u)&&(p+=u),p},this.jst_modules=this.jst_modules||{},this.jst_modules.promoEvent=this.jst_modules.promoEvent||{},this.jst_modules.promoEvent.presents2015=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<div class="promoEvent__close"></div>'+u((r=n.Icon||t&&t.Icon,s={hash:{"class":"promoEvent__iconImage"},data:i},r?r.call(t,"promoEvent_present",s):c.call(t,"Icon","promoEvent_present",s)))+u((r=n.Link||t&&t.Link,s={hash:{href:"/presents2015","class":"promoEvent__link _undashed"},data:i},r?r.call(t,"Дарим подарки",s):c.call(t,"Link","Дарим подарки",s)))+'<p class="promoEvent__text">'+u((r=n._gg||t&&t._gg,s={hash:{},data:i},r?r.call(t,"В обмен на желания!",s):c.call(t,"_gg","В обмен на желания!",s)))+'</p><p class="promoEvent__desc">',r=n._gg||t&&t._gg,s={hash:{},data:i},o=r?r.call(t,"«Подарки от 2ГИС». Сроки проведения: 01-30.12.15.<br>Подробности: www.2gis.ru/presents2015",s):c.call(t,"_gg","«Подарки от 2ГИС». Сроки проведения: 01-30.12.15.<br>Подробности: www.2gis.ru/presents2015",s),(o||0===o)&&(l+=o),l+="</p>"},this.jst_modules=this.jst_modules||{},this.jst_modules.promoEvent=this.jst_modules.promoEvent||{},this.jst_modules.promoEvent.summer_kg=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="promoEvent__title">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Лето в городе",r):l.call(t,"_gg","Лето в городе",r)))+'</div><p class="promoEvent__text">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Совместно с «С лёгким паром!»",r):l.call(t,"_gg","Совместно с «С лёгким паром!»",r)))+'</p><div class="promoEvent__desc">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Реклама",r):l.call(t,"_gg","Реклама",r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.promoEvent=this.jst_modules.promoEvent||{},this.jst_modules.promoEvent.summer_kz=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="promoEvent__titleList"><div class="promoEvent__title">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"ЖАРҚЫН ЖАЗ",r):l.call(t,"_gg","ЖАРҚЫН ЖАЗ",r)))+'</div><div class="promoEvent__title">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Яркое Лето",r):l.call(t,"_gg","Яркое Лето",r)))+'</div></div><div class="promoEvent__subtitleList"><div class="promoEvent__subtitle"><span class="promoEvent__subtitleText">2GIS</span><span class="promoEvent__subtitleIcon"></span></div><div class="promoEvent__subtitle"><span class="promoEvent__subtitleText">2ГИС</span> и\n        <span class="promoEvent__subtitleText _forte"> ForteBank</span></div></div><div class="promoEvent__additionalText">Лицензия Национального Банка Республики Казахстан<br> №1.2.29/197/36 от 27.02.2015 выдана АО «ForteBank».</div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.promoEvent=this.jst_modules.promoEvent||{},this.jst_modules.promoEvent.summer_ru=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="promoEvent__title">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Лето в городе",r):l.call(t,"_gg","Лето в городе",r)))+'</div><p class="promoEvent__text">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Совместно с",r):l.call(t,"_gg","Совместно с",r)))+c((o=n.Icon||t&&t.Icon,r={hash:{"class":"promoEvent__iconImage"},data:i},o?o.call(t,"promoEvent_summer_ru",r):l.call(t,"Icon","promoEvent_summer_ru",r)))+"</p>"},this.jst_modules=this.jst_modules||{},this.jst_modules.promoEvent=this.jst_modules.promoEvent||{},this.jst_modules.promoEvent.summer_ua=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="promoEvent__title">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Яркое Лето",r):l.call(t,"_gg","Яркое Лето",r)))+'</div><p class="promoEvent__text">'+c((o=n._gg||t&&t._gg,r={hash:{},data:i},o?o.call(t,"Освежающий проект 2ГИС",r):l.call(t,"_gg","Освежающий проект 2ГИС",r)))+"</p>"},this.jst_modules=this.jst_modules||{},this.jst_modules.providerRequestForm=this.jst_modules.providerRequestForm||{},this.jst_modules.providerRequestForm.accepted=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return i=n._gg||e&&e._gg,o={hash:{},data:t},a=i?i.call(e,"Если у&nbsp;вас появятся какие-то вопросы, вы&nbsp;можете позвонить по&nbsp;номеру %1, сообщить контактные данные и&nbsp;сказать, что оставляли заявку на&nbsp;подключение через 2ГИС.",e&&e.providerPhone,o):u.call(e,"_gg","Если у&nbsp;вас появятся какие-то вопросы, вы&nbsp;можете позвонить по&nbsp;номеру %1, сообщить контактные данные и&nbsp;сказать, что оставляли заявку на&nbsp;подключение через 2ГИС.",e&&e.providerPhone,o),(a||0===a)&&(r+=a),r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h=this;return c+='<div class="providerRequestForm__form providerRequestForm__requestAccepted"><h2 class="providerRequestForm__title">'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Заявка отправлена. Спасибо!",l):u.call(t,"_gg","Заявка отправлена. Спасибо!",l)))+'</h2><div class="providerRequestForm__requestAcceptedWrap"><p class="providerRequestForm__par">',s=n._gg||t&&t._gg,l={hash:{},data:i},r=s?s.call(t,"Оператор свяжется с&nbsp;вами в&nbsp;ближайшее время.",l):u.call(t,"_gg","Оператор свяжется с&nbsp;вами в&nbsp;ближайшее время.",l),(r||0===r)&&(c+=r),r=n["if"].call(t,t&&t.providerPhone,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+='</p><div class="providerRequestForm__backButton providerRequestForm__showTariffs">'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Вернуться к тарифам",l):u.call(t,"_gg","Вернуться к тарифам",l)))+"</div></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.providerRequestForm=this.jst_modules.providerRequestForm||{},this.jst_modules.providerRequestForm.bookletPopup=function(e,t,n,a,i){function o(e,t){var n,a="";return a+='<td class="providerRequestForm__tariffDescriptionValue">'+p((n=e&&e.tariff,n=null==n||n===!1?n:n.channels,typeof n===h?n.apply(e):n))+"</td>"}function r(e,t){var a,i,o,r="";return r+='<td class="providerRequestForm__tariffDescriptionKey">'+p((i=n._ngg||e&&e._ngg,o={hash:{},data:t},i?i.call(e,"канал","канала","каналов",(a=e&&e.tariff,null==a||a===!1?a:a.channels),o):f.call(e,"_ngg","канал","канала","каналов",(a=e&&e.tariff,null==a||a===!1?a:a.channels),o)))+"</td>"}function s(e,t){var n,a="";return a+='<img src="'+p((n=e&&e.provider,n=null==n||n===!1?n:n.logoUrl,typeof n===h?n.apply(e):n))+'" class="providerRequestForm__tariffProviderLogo">'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h="function",p=this.escapeExpression,f=n.helperMissing,m=this;return d+='<h2 class="providerRequestForm__head">'+p((c=n._gg||t&&t._gg,u={hash:{},data:i},c?c.call(t,"Заявка на подключение",u):f.call(t,"_gg","Заявка на подключение",u)))+'<div class="providerRequestForm__close"></div></h2><div class="providerRequestForm__container"><div class="providerRequestForm__baron"><div class="providerRequestForm__intro"><div class="providerRequestForm__tariff"><table class="providerRequestForm__tariffDescription"><tr><td class="providerRequestForm__tariffDescriptionValue"><i class="providerRequestForm__icon providerRequestForm__icon _tariff '+p((l=t&&t.tariff,l=null==l||l===!1?l:l.icon,typeof l===h?l.apply(t):l))+'"></i>'+p((l=t&&t.tariff,l=null==l||l===!1?l:l.speed,typeof l===h?l.apply(t):l))+"</td>",l=n["if"].call(t,(l=t&&t.tariff,null==l||l===!1?l:l.channels),{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+='<td class="providerRequestForm__tariffDescriptionValue _price">'+p((l=t&&t.tariff,l=null==l||l===!1?l:l.price,typeof l===h?l.apply(t):l))+'</td></tr><tr><td class="providerRequestForm__tariffDescriptionKey">'+p((c=n._gg||t&&t._gg,u={hash:{},data:i},c?c.call(t,"Мбит/сек",u):f.call(t,"_gg","Мбит/сек",u)))+"</td>",l=n["if"].call(t,(l=t&&t.tariff,null==l||l===!1?l:l.channels),{hash:{},inverse:m.noop,fn:m.program(3,r,i),data:i}),(l||0===l)&&(d+=l),d+='<td class="providerRequestForm__tariffDescriptionKey">'+p((l=t&&t.currency,l=null==l||l===!1?l:l.symbol,typeof l===h?l.apply(t):l))+p((c=n._gg||t&&t._gg,u={hash:{},data:i},c?c.call(t,"/мес",u):f.call(t,"_gg","/мес",u)))+'</td></tr></table><div class="providerRequestForm__tariffProviderTitle">',l=n["if"].call(t,(l=t&&t.provider,null==l||l===!1?l:l.logoUrl),{hash:{},inverse:m.noop,fn:m.program(5,s,i),data:i}),(l||0===l)&&(d+=l),d+='<span class="boookletPopupForm__tariffProviderName">'+p((l=t&&t.provider,l=null==l||l===!1?l:l.name,typeof l===h?l.apply(t):l))+'</span></div><h2 class="providerRequestForm__title providerRequestForm__providerTitle">'+p((l=t&&t.tariff,l=null==l||l===!1?l:l.name,typeof l===h?l.apply(t):l))+'</h2></div></div><div class="providerRequestForm__formContainer">'+p((c=n.p||t&&t.p,u={hash:{},data:i},c?c.call(t,"form",u):f.call(t,"p","form",u)))+"</div>",(c=n.Track)?l=c.call(t,{hash:{},data:i}):(c=t&&t.Track,l=typeof c===h?c.call(t,{hash:{},data:i}):c),d+=p(l)+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.providerRequestForm=this.jst_modules.providerRequestForm||{},this.jst_modules.providerRequestForm.declined=function(e,t,n,a,i){function o(e,t){return" _hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=this,d=n.helperMissing,h=this.escapeExpression,p="function";return c+='<div class="providerRequestForm__cantConnect',r=n.unless.call(t,t&&t.notConnected,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+='"><h2 class="providerRequestForm__title">'+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Подключение невозможно",l):d.call(t,"_gg","Подключение невозможно",l)))+'</h2><div class="providerRequestForm__cantConnectWrap"><p class="providerRequestForm__par">'+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"К сожалению,",l):d.call(t,"_gg","К сожалению,",l)))+"&nbsp;"+h((r=t&&t.provider,r=null==r||r===!1?r:r.name,typeof r===p?r.apply(t):r))+"&nbsp;"+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"не подключает по вашему адресу.",l):d.call(t,"_gg","не подключает по вашему адресу.",l)))+"<br>",s=n._hgg||t&&t._hgg,l={hash:{link__class:"providerRequestForm__link providerRequestForm__showAllProviders"},data:i},r=s?s.call(t,"Рекомендуем %{Link посмотреть других провайдеров}.",l):d.call(t,"_hgg","Рекомендуем %{Link посмотреть других провайдеров}.",l),(r||0===r)&&(c+=r),c+='</p><div class="providerRequestForm__backButton providerRequestForm__showAllProviders">'+h((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Выбрать другого провайдера",l):d.call(t,"_gg","Выбрать другого провайдера",l)))+"</div></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.providerRequestForm=this.jst_modules.providerRequestForm||{},this.jst_modules.providerRequestForm.form=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<h2 class="providerRequestForm__title">',(i=n.formTitle)?a=i.call(e,{hash:{},data:t}):(i=e&&e.formTitle,a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)+"</h2>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u="function",d=this.escapeExpression,h=this,p=n.helperMissing;return c+='<form action="#" class="providerRequestForm__form">',r=n["if"].call(t,t&&t.formTitle,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(r||0===r)&&(c+=r),c+=d((s=n.module||t&&t.module,l={hash:{},data:i},s?s.call(t,"checkConnectionWidget",l):p.call(t,"module","checkConnectionWidget",l)))+'<div class="providerRequestForm__input _bottom"><input type="text" class="providerRequestForm__inputText" name="name" placeholder="'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Имя",l):p.call(t,"_gg","Имя",l)))+'" maxlength="100" autocomplete="off"></div><div class="providerRequestForm__input _bottom _phone"><input type="text" class="providerRequestForm__inputText" name="phone" placeholder="'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Мобильный телефон",l):p.call(t,"_gg","Мобильный телефон",l)))+'" maxlength="10" autocomplete="off"><div class="providerRequestForm__phoneError">'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Номер мобильного телефона должен состоять из 10 цифр",l):p.call(t,"_gg","Номер мобильного телефона должен состоять из 10 цифр",l)))+'</div></div><div class="providerRequestForm__input _bottom"><input type="submit" class="providerRequestForm__inputSubmit" value="'+d((s=n._gg||t&&t._gg,l={hash:{},data:i},s?s.call(t,"Отправить заявку",l):p.call(t,"_gg","Отправить заявку",l)))+'" disabled><div class="providerRequestForm__preloader"><div class="providerRequestForm__preloaderIn"></div></div></div>'+d((s=n.p||t&&t.p,l={hash:{},data:i},s?s.call(t,"declined",l):p.call(t,"p","declined",l)))+"</form>"},this.jst_modules=this.jst_modules||{},this.jst_modules.providerRequestForm=this.jst_modules.providerRequestForm||{},this.jst_modules.providerRequestForm.mediaCard=function(e,t,n,a,i){function o(e,t){return" _isAction"}function r(e,t){var a,i,o,r="";return r+='<div class="providerRequestForm__cell _speed"><span class="providerRequestForm__cellValue">'+m((a=e&&e.tariff,a=null==a||a===!1?a:a.speed,typeof a===f?a.apply(e):a))+'</span><span class="providerRequestForm__cellText">'+m((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Мбит/сек.",o):g.call(e,"_gg","Мбит/сек.",o)))+"</span></div>"}function s(e,t){var a,i,o,r="";return r+='<div class="providerRequestForm__cell _tv"><span class="providerRequestForm__cellValue">'+m((a=e&&e.tariff,a=null==a||a===!1?a:a.channels,typeof a===f?a.apply(e):a))+'</span><span class="providerRequestForm__cellText',a=n["if"].call(e,(a=e&&e.tariff,null==a||a===!1?a:a.hdChannels),{hash:{},inverse:_.noop,fn:_.program(6,l,t),data:t}),(a||0===a)&&(r+=a),r+='">'+m((i=n._ngg||e&&e._ngg,o={hash:{},data:t},i?i.call(e,"Канал","Канала","Каналов",(a=e&&e.tariff,null==a||a===!1?a:a.channels),o):g.call(e,"_ngg","Канал","Канала","Каналов",(a=e&&e.tariff,null==a||a===!1?a:a.channels),o)))+"</span>",a=n["if"].call(e,(a=e&&e.tariff,null==a||a===!1?a:a.hdChannels),{hash:{},inverse:_.noop,fn:_.program(8,c,t),data:t}),(a||0===a)&&(r+=a),r+="</div>"}function l(e,t){return" _type_hd"}function c(e,t){var n,a="";return a+='<div class="providerRequestForm__cellHd"><span class="providerRequestForm__cellHdValue">'+m((n=e&&e.tariff,n=null==n||n===!1?n:n.hdChannels,typeof n===f?n.apply(e):n))+'</span>&#8208;<span class="providerRequestForm__cellHdText">HD</span></div>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d,h,p="",f="function",m=this.escapeExpression,g=n.helperMissing,_=this;return p+='<h2 class="providerRequestForm__head">'+m((d=n._gg||t&&t._gg,h={hash:{},data:i},d?d.call(t,"Заявка на подключение",h):g.call(t,"_gg","Заявка на подключение",h)))+'</h2><div class="providerRequestForm__wrapper"><div class="providerRequestForm__info"><div class="providerRequestForm__cell _title"><div class="prviderTariffs__cellTitle">'+m((d=n._gg||t&&t._gg,h={hash:{},data:i},d?d.call(t,"Тариф «%1»",(u=t&&t.tariff,
null==u||u===!1?u:u.name),h):g.call(t,"_gg","Тариф «%1»",(u=t&&t.tariff,null==u||u===!1?u:u.name),h)))+'</div><span class="providerRequestForm__cellPrice',u=n["if"].call(t,(u=t&&t.tariff,null==u||u===!1?u:u.isAction),{hash:{},inverse:_.noop,fn:_.program(1,o,i),data:i}),(u||0===u)&&(p+=u),p+='">'+m((u=t&&t.tariff,u=null==u||u===!1?u:u.price,typeof u===f?u.apply(t):u))+'&nbsp;<span class="providerRequestForm__cellPriceCurrency _'+m((u=t&&t.currency,u=null==u||u===!1?u:u.code,typeof u===f?u.apply(t):u))+'">'+m((u=t&&t.currency,u=null==u||u===!1?u:u.symbol,typeof u===f?u.apply(t):u))+'</span><span class="providerRequestForm__cellPricePeriod">'+m((d=n._gg||t&&t._gg,h={hash:{},data:i},d?d.call(t,"/мес",h):g.call(t,"_gg","/мес",h)))+"</span></span></div>",u=n["if"].call(t,(u=t&&t.tariff,null==u||u===!1?u:u.speed),{hash:{},inverse:_.noop,fn:_.program(3,r,i),data:i}),(u||0===u)&&(p+=u),u=n["if"].call(t,(u=t&&t.tariff,null==u||u===!1?u:u.channels),{hash:{},inverse:_.noop,fn:_.program(5,s,i),data:i}),(u||0===u)&&(p+=u),p+='</div><div class="providerRequestForm__formContainer _type_mediaCard">'+m((d=n.p||t&&t.p,h={hash:{},data:i},d?d.call(t,"form",h):g.call(t,"p","form",h)))+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.providerTariffs=this.jst_modules.providerTariffs||{},this.jst_modules.providerTariffs.round=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<span class="providerTariffs__cellRoundArc _right" style="transform: rotate('+p((a=e&&e.arc,a=null==a||a===!1?a:a.right,typeof a===h?a.apply(e):a))+'deg)"></span>',a=n["if"].call(e,(a=e&&e.arc,null==a||a===!1?a:a.left),{hash:{},inverse:f.program(4,s,t),fn:f.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var n,a="";return a+='<span class="providerTariffs__cellRoundArc _left" style="transform: rotate('+p((n=e&&e.arc,n=null==n||n===!1?n:n.left,typeof n===h?n.apply(e):n))+'deg)"></span>'}function s(e,t){return'<span class="providerTariffs__cellRoundCover"></span><span class="providerTariffs__cellRoundArc _gray"></span>'}function l(e,t){var a,i;return(i=n.value)?a=i.call(e,{hash:{},data:t}):(i=e&&e.value,a=typeof i===h?i.call(e,{hash:{},data:t}):i),p(a)}function c(e,t){return"&#8208;"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h="function",p=this.escapeExpression,f=this;return d+='<span class="providerTariffs__cellRound">',u=n["if"].call(t,t&&t.arc,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(u||0===u)&&(d+=u),d+='<span class="providerTariffs__cellRoundValue">',u=n["if"].call(t,t&&t.value,{hash:{},inverse:f.program(8,c,i),fn:f.program(6,l,i),data:i}),(u||0===u)&&(d+=u),d+="</span></span>"},this.jst_modules=this.jst_modules||{},this.jst_modules.push2dial=this.jst_modules.push2dial||{},this.jst_modules.push2dial.cabinetEntryPoint=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=p((a=n._pt||e&&e._pt,i={hash:{},data:t},a?a.call(e,"Аккаунт","Войти в Личный кабинет",i):h.call(e,"_pt","Аккаунт","Войти в Личный кабинет",i)))}function r(e,t){var a,i,o,r="";return r+=p((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Управление данными компании",o):h.call(e,"_t","Управление данными компании",o)))+'<div class="push2dial__cabinetCompany">\n                    “',(i=n.firmName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.firmName,a=typeof i===f?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+="”\n                </div>"}function s(e,t){var a,i,o,r="";return i=n._hnt||e&&e._hnt,o={hash:{},data:t},a=i?i.call(e,"Управление данными вашей %{Wrap %1}&nbsp;компании","Управление данными ваших %{Wrap %1}&nbsp;компаний","Управление данными ваших %{Wrap %1}&nbsp;компаний",e&&e.firmsCount,o):h.call(e,"_hnt","Управление данными вашей %{Wrap %1}&nbsp;компании","Управление данными ваших %{Wrap %1}&nbsp;компаний","Управление данными ваших %{Wrap %1}&nbsp;компаний",e&&e.firmsCount,o),(a||0===a)&&(r+=a),r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h=n.helperMissing,p=this.escapeExpression,f="function",m=this;return d+='<div class="push2dial__cabinet"><div class="push2dial__cabinetIcon">'+p((c=n.Icon||t&&t.Icon,u={hash:{},data:i},c?c.call(t,"lk_entry_point",u):h.call(t,"Icon","lk_entry_point",u)))+'</div><div class="push2dial__cabinetContent">',c=n.Link||t&&t.Link,u={hash:{"class":"_scheme_dark _undashed push2dial__cabinetLink",href:t&&t.lkUrl,target:"_blank"},inverse:m.noop,fn:m.program(1,o,i),data:i},l=c?c.call(t,u):h.call(t,"Link",u),(l||0===l)&&(d+=l),d+='<div class="push2dial__cabinetDescription">',l=n["if"].call(t,t&&t.firmName,{hash:{},inverse:m.program(5,s,i),fn:m.program(3,r,i),data:i}),(l||0===l)&&(d+=l),d+="</div></div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.push2dial=this.jst_modules.push2dial||{},this.jst_modules.push2dial.captcha=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div id="push2dial__formCaptcha" class="push2dial__formCaptcha" style="display: none"><div class="push2dial__formCaptchaWrap"><div id="recaptcha_image" class="push2dial__formCaptchaImg"></div></div><div class="push2dial__formCaptchaField"><input type="text" id="recaptcha_response_field" class="push2dial__formCaptchaFieldInput" name="recaptcha_response_field" placeholder="'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Два слова с картинки выше",r):l.call(t,"_t","Два слова с картинки выше",r)))+'"></div><a href="#" class="push2dial__formCaptchaRefresh"></a></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.push2dial=this.jst_modules.push2dial||{},this.jst_modules.push2dial.form=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="push2dial__products"><ul class="push2dial__productsList _count_'+h((a=e&&e.products,a=null==a||a===!1?a:a.items,a=null==a||a===!1?a:a.length,typeof a===d?a.apply(e):a))+'">',a=n.each.call(e,(a=e&&e.products,null==a||a===!1?a:a.items),{hash:{},inverse:p.noop,fn:p.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</ul></div>"}function r(e,t){var a,i,o="";return o+='<li class="push2dial__productsListItem _',(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'"><a href="',(i=n.href)?a=i.call(e,{hash:{},data:t}):(i=e&&e.href,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+'" target="_blank" class="push2dial__productsListItemLink">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+"</a></li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c,u="",d="function",h=this.escapeExpression,p=this,f=n.helperMissing;return u+='<div class="push2dial__main"><header class="push2dial__header">',(l=n.title)?s=l.call(t,{hash:{},data:i}):(l=t&&t.title,s=typeof l===d?l.call(t,{hash:{},data:i}):l),(s||0===s)&&(u+=s),u+='<div class="push2dial__headerDesc">',(l=n.text)?s=l.call(t,{hash:{},data:i}):(l=t&&t.text,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+'</div></header><article class="push2dial__mainBlock"><div class="push2dial__mainBlockText">'+h((l=n._t||t&&t._t,c={hash:{},data:i},l?l.call(t,"Установите свежую версию мобильного 2ГИС",c):f.call(t,"_t","Установите свежую версию мобильного 2ГИС",c)))+"</div>",s=n["if"].call(t,(s=t&&t.products,null==s||s===!1?s:s.items),{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(s||0===s)&&(u+=s),u+='</article><article class="push2dial__mainBlock"><div class="push2dial__mainBlockText">'+h((l=n._t||t&&t._t,c={hash:{},data:i},l?l.call(t,"Откройте приложение, нажмите на",c):f.call(t,"_t","Откройте приложение, нажмите на",c)))+'<span class="push2dial__mainBlockTextPhone"></span></div><form class="push2dial__form push2dial__formBind"><div class="push2dial__formField push2dial__mainBlockPin"><div class="push2dial__mainBlockPinTip">',l=n._t||t&&t._t,c={hash:{},data:i},s=l?l.call(t,"Введите появившийся пин-&#65279;код.",c):f.call(t,"_t","Введите появившийся пин-&#65279;код.",c),(s||0===s)&&(u+=s),u+='</div><input type="text" class="push2dial__formFieldInput push2dial__mainBlockPinInput" maxlength="1" value="',(l=n.pin0)?s=l.call(t,{hash:{},data:i}):(l=t&&t.pin0,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+'"><input type="text" class="push2dial__formFieldInput push2dial__mainBlockPinInput" maxlength="1" value="',(l=n.pin1)?s=l.call(t,{hash:{},data:i}):(l=t&&t.pin1,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+'"><input type="text" class="push2dial__formFieldInput push2dial__mainBlockPinInput" maxlength="1" value="',(l=n.pin2)?s=l.call(t,{hash:{},data:i}):(l=t&&t.pin2,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+'"><input type="text" class="push2dial__formFieldInput push2dial__mainBlockPinInput" maxlength="1" value="',(l=n.pin3)?s=l.call(t,{hash:{},data:i}):(l=t&&t.pin3,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+'"><input type="text" class="push2dial__formFieldInput push2dial__mainBlockPinInput" maxlength="1" value="',(l=n.pin4)?s=l.call(t,{hash:{},data:i}):(l=t&&t.pin4,s=typeof l===d?l.call(t,{hash:{},data:i}):l),u+=h(s)+'"></div><div class="push2dial__formSubmit"><button class="push2dial__formSubmitBtn push2dial__mainBlockLinkbtn">'+h((l=n._t||t&&t._t,c={hash:{},data:i},l?l.call(t,"Привязать телефон",c):f.call(t,"_t","Привязать телефон",c)))+h((l=n.Preloader||t&&t.Preloader,c={hash:{"class":"push2dial__formSubmitBtn_preloader _scheme_submit _small"},data:i},l?l.call(t,c):f.call(t,"Preloader",c)))+'</button></div></form></article></div><div class="push2dial__close"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.push2dial=this.jst_modules.push2dial||{},this.jst_modules.push2dial.panel=function(e,t,n,a,i){function o(e,t){return"_loyalty"}function r(e,t){var a,i,o="";return o+='<div class="push2dial__sectionTitle">',(i=n.descTitle)?a=i.call(e,{hash:{},data:t}):(i=e&&e.descTitle,a=typeof i===_?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function s(e,t){var a,i,o,r="";return i=n.Link||e&&e.Link,o={hash:{"class":"_scheme_dark _undashed push2dial__formSubmitUnlink"},inverse:y.noop,fn:y.program(6,l,t),data:t},a=i?i.call(e,o):v.call(e,"Link",o),(a||0===a)&&(r+=a),r}function l(e,t){var a,i,o,r="";return i=n._t||e&&e._t,o={hash:{},data:t},a=i?i.call(e,"Отвязать&#8200;телефон",o):v.call(e,"_t","Отвязать&#8200;телефон",o),(a||0===a)&&(r+=a),r}function c(e,t){var a,i,o="";return o+='<button class="push2dial__formSubmitBtn push2dial__formSubmitLinkphone">'+b((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Привязать телефон",i):v.call(e,"_t","Привязать телефон",i)))+b((a=n.Preloader||e&&e.Preloader,i={hash:{"class":"push2dial__formSubmitBtnPreloader _scheme_submit _small"},data:t},a?a.call(e,i):v.call(e,"Preloader",i)))+"</button>"}function u(e,t){var a,i,o,r="";return r+="\n                 ",i=n.Link||e&&e.Link,o={hash:{"class":"_scheme_dark _undashed push2dial__formSubmitLogout"},inverse:y.noop,fn:y.program(11,d,t),data:t},a=i?i.call(e,o):v.call(e,"Link",o),(a||0===a)&&(r+=a),r}function d(e,t){var a,i,o="";return o+=b((a=n._pt||e&&e._pt,i={hash:{},data:t},a?a.call(e,"Аккаунт","Выйти",i):v.call(e,"_pt","Аккаунт","Выйти",i)))}function h(e,t){var a,i,o="";return o+=b((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"settings",i):v.call(e,"p","settings",i)))}function p(e,t){var a,i,o="";return o+=b((a=n.p||e&&e.p,i={hash:{context:e&&e.advertiserData},data:t},a?a.call(e,"cabinetEntryPoint",i):v.call(e,"p","cabinetEntryPoint",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var f,m,g="",_="function",v=n.helperMissing,y=this,b=this.escapeExpression;return g+='<div class="push2dial__close"></div><header class="push2dial__header">',(m=n.title)?f=m.call(t,{hash:{},data:i}):(m=t&&t.title,f=typeof m===_?m.call(t,{hash:{},data:i}):m),(f||0===f)&&(g+=f),g+='</header><div class="push2dial__section ',f=n["if"].call(t,t&&t.loyalty,{hash:{},inverse:y.noop,fn:y.program(1,o,i),data:i}),(f||0===f)&&(g+=f),g+='">',f=n["if"].call(t,t&&t.descTitle,{hash:{},inverse:y.noop,fn:y.program(3,r,i),data:i}),(f||0===f)&&(g+=f),g+='<div class="push2dial__sectionDesc">',(m=n.text)?f=m.call(t,{hash:{},data:i}):(m=t&&t.text,f=typeof m===_?m.call(t,{hash:{},data:i}):m),(f||0===f)&&(g+=f),g+='</div><div class="push2dial__form"><div class="push2dial__formSubmit">',f=n["if"].call(t,t&&t.linked,{hash:{},inverse:y.program(8,c,i),fn:y.program(5,s,i),data:i}),(f||0===f)&&(g+=f),f=n["if"].call(t,t&&t.authorized,{hash:{},inverse:y.noop,fn:y.program(10,u,i),data:i}),(f||0===f)&&(g+=f),g+="</div></div></div>",f=n["if"].call(t,t&&t.email,{hash:{},inverse:y.noop,fn:y.program(13,h,i),data:i}),(f||0===f)&&(g+=f),f=n["if"].call(t,t&&t.advertiserData,{hash:{},inverse:y.noop,fn:y.program(15,p,i),data:i}),(f||0===f)&&(g+=f),g},this.jst_modules=this.jst_modules||{},this.jst_modules.push2dial=this.jst_modules.push2dial||{},this.jst_modules.push2dial.response=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<div class="push2dial__close"></div><div class="push2dial__main"><header class="push2dial__header">',(r=n.title)?o=r.call(t,{hash:{},data:i}):(r=t&&t.title,o=typeof r===c?r.call(t,{hash:{},data:i}):r),(o||0===o)&&(l+=o),l+='</header><div class="push2dial__text">',(r=n.text)?o=r.call(t,{hash:{},data:i}):(r=t&&t.text,o=typeof r===c?r.call(t,{hash:{},data:i}):r),l+=u(o)+'</div><button class="push2dial__formSubmitBtn push2dial__mainHooray">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Ура, можно попробовать!",s):d.call(t,"_t","Ура, можно попробовать!",s)))+u((r=n.Preloader||t&&t.Preloader,s={hash:{"class":"push2dial__formSubmitBtnPreloader _scheme_submit _small"},data:i},r?r.call(t,s):d.call(t,"Preloader",s)))+"</button></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.push2dial=this.jst_modules.push2dial||{},this.jst_modules.push2dial.settings=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=d((a=n._pt||e&&e._pt,i={hash:{},data:t},a?a.call(e,"Аккаунт","Выйти",i):u.call(e,"_pt","Аккаунт","Выйти",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l,c="",u=n.helperMissing,d=this.escapeExpression,h=this;return c+='<div class="push2dial__resetpassword"><form class="push2dial__form push2dial__formChangePassword"><label class="push2dial__formLabel" for="push2dail__oldPass">'+d((s=n._t||t&&t._t,l={hash:{},data:i},s?s.call(t,"Поменять пароль",l):u.call(t,"_t","Поменять пароль",l)))+'</label><div class="push2dial__formField"><input type="password" id="push2dail__oldPass" class="push2dial__formFieldInput push2dial__formFieldOldPass" placeholder="'+d((s=n._t||t&&t._t,l={hash:{},data:i},s?s.call(t,"Старый пароль",l):u.call(t,"_t","Старый пароль",l)))+'"></div><div class="push2dial__formField"><input type="password" class="push2dial__formFieldInput push2dial__formFieldNewPass" placeholder="'+d((s=n._t||t&&t._t,l={hash:{},data:i},s?s.call(t,"Новый пароль",l):u.call(t,"_t","Новый пароль",l)))+'"><input type="text" class="push2dial__formFieldInput push2dial__formFieldClone" placeholder="'+d((s=n._t||t&&t._t,l={hash:{},data:i},s?s.call(t,"Новый пароль",l):u.call(t,"_t","Новый пароль",l)))+'"><input type="checkbox" class="push2dial__formFieldCheckbox push2dial__formFieldShowPass" id="push2dial__formFieldShowPass"><label for="push2dial__formFieldShowPass" class="push2dial__formFieldShow"></label></div>'+d((s=n.p||t&&t.p,l={hash:{},data:i},s?s.call(t,"captcha",l):u.call(t,"p","captcha",l)))+'<div class="push2dial__formSubmit">',s=n.Link||t&&t.Link,l={hash:{"class":"_scheme_dark _undashed push2dial__formSubmitLink push2dial__formSubmitLogout"},inverse:h.noop,fn:h.program(1,o,i),data:i},r=s?s.call(t,l):u.call(t,"Link",l),(r||0===r)&&(c+=r),c+=' <button class="push2dial__formSubmitBtn push2dial__formChangeSubmitBtn _disabled">'+d((s=n._t||t&&t._t,l={hash:{},data:i},s?s.call(t,"Сохранить",l):u.call(t,"_t","Сохранить",l)))+d((s=n.Preloader||t&&t.Preloader,l={hash:{"class":"push2dial__formSubmitBtn_preloader _scheme_submit _small"},data:i},s?s.call(t,l):u.call(t,"Preloader",l)))+"</button></div></form></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.push2dialCaller=this.jst_modules.push2dialCaller||{},this.jst_modules.push2dialCaller.dialing=function(e,t,n,a,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="push2dialCaller__message _type_dialing"><span class="push2dialCaller__dialingPreloader"></span><span class="push2dialCaller__cellphoneIcon"></span></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.push2dialCaller=this.jst_modules.push2dialCaller||{},this.jst_modules.push2dialCaller.error=function(e,t,n,a,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="push2dialCaller__message _type_error"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.recoveryAds=this.jst_modules.recoveryAds||{},this.jst_modules.recoveryAds.firm=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<aside class="recoveryAds__aside"><div class="recoveryAds__asidePreview" style="background-image:url(',(i=n.preview)?a=i.call(e,{hash:{},data:t}):(i=e&&e.preview,a=typeof i===p?i.call(e,{hash:{},data:t}):i),o+=f(a)+');"></div></aside>'}function r(e,t){var a,i,o="";return o+='<div class="recoveryAds__articleMicro">',(i=n.micro)?a=i.call(e,{hash:{},data:t}):(i=e&&e.micro,a=typeof i===p?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),a=n["if"].call(e,e&&e.showAdvWarning,{hash:{},inverse:g.noop,fn:g.program(4,s,t),data:t}),(a||0===a)&&(o+=a),o+="</div>"}function s(e,t){var a,i,o="";return o+='<span class="recoveryAds__articleAdvWarning"> &#151; '+f((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"реклама",i):m.call(e,"_gg","реклама",i)))+"</span>"}function l(e,t){var a,i,o="";return o+='<div class="recoveryAds__articleWarning">',(i=n.warning)?a=i.call(e,{hash:{},data:t}):(i=e&&e.warning,a=typeof i===p?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u,d,h="",p="function",f=this.escapeExpression,m=n.helperMissing,g=this;return c=n["if"].call(t,t&&t.preview,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(c||0===c)&&(h+=c),h+=f((u=n.Link||t&&t.Link,d={hash:{"class":"_undashed recoveryAds__articleTitle",href:t&&t.url},data:i},u?u.call(t,t&&t.title,d):m.call(t,"Link",t&&t.title,d))),c=n["if"].call(t,t&&t.micro,{hash:{},inverse:g.noop,fn:g.program(3,r,i),data:i}),(c||0===c)&&(h+=c),h+='<div class="recoveryAds__articleAddress">',(u=n.address)?c=u.call(t,{hash:{},data:i}):(u=t&&t.address,c=typeof u===p?u.call(t,{hash:{},data:i}):u),h+=f(c)+"</div>",c=n["if"].call(t,t&&t.warning,{hash:{},inverse:g.noop,fn:g.program(6,l,i),data:i}),(c||0===c)&&(h+=c),h},this.jst_modules=this.jst_modules||{},this.jst_modules.reviewsCard=this.jst_modules.reviewsCard||{},this.jst_modules.reviewsCard.message=function(e,t,n,a,i){function o(e,t,a){var i,o="";return i=n["if"].call(e,e&&e.length,{hash:{},inverse:p.noop,fn:p.programWithDepth(2,r,t,a),data:t}),(i||0===i)&&(o+=i),o}function r(e,t,a){var i,o="";return o+='<div class="reviewsCard__reviewMessage _type_'+h((i=null==t||t===!1?t:t.key,typeof i===d?i.apply(e):i)),i=n["if"].call(e,a&&a.cut,{hash:{},inverse:p.noop,fn:p.program(3,s,t),data:t}),(i||0===i)&&(o+=i),o+='">',i=n.each.call(e,e,{hash:{},inverse:p.noop,fn:p.program(5,l,t),data:t}),(i||0===i)&&(o+=i),o+="</div>"}function s(e,t){return" _hide_fullMessage"}function l(e,t){var n,a="";return a+='<div class="reviewsCard__reviewParagraph">',n=typeof e===d?e.apply(e):e,(n||0===n)&&(a+=n),a+="</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u="",d="function",h=this.escapeExpression,p=this;return c=n.each.call(t,t,{hash:{},inverse:p.noop,fn:p.programWithDepth(1,o,i,t),data:i}),(c||0===c)&&(u+=c),u},this.jst_modules=this.jst_modules||{},this.jst_modules.reviewsCard=this.jst_modules.reviewsCard||{},this.jst_modules.reviewsCard.review=function(e,t,n,a,i){function o(e,t){return"<!--googleoff: all--><!--noindex-->"}function r(e,t){return" _with_image"}function s(e,t){return" _hide_fullMessage"}function l(e,t){var a,i,o="";return o+='<span title="'+T((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Рекомендую",i):I.call(e,"_t","Рекомендую",i)))+'">'+T((a=n.Icon||e&&e.Icon,i={hash:{"class":"reviewsCard__reviewRecommend"},data:t},a?a.call(e,"reviewCardRating_recommend",i):I.call(e,"Icon","reviewCardRating_recommend",i)))+"</span>"}function c(e,t){var a,i,o="";return o+=T((a=n.Rating||e&&e.Rating,i={hash:{style:"smallBlue","class":"reviewsCard__reviewRating"},data:t},a?a.call(e,e&&e.rating,i):I.call(e,"Rating",e&&e.rating,i)))+"</br>"}function u(e,t){var n,a="";return a+='<a href="'+T((n=e&&e.photo,n=null==n||n===!1?n:n.href,typeof n===S?n.apply(e):n))+'" class="reviewsCard__reviewImageLink" data-url="'+T((n=e&&e.photo,n=null==n||n===!1?n:n.src,typeof n===S?n.apply(e):n))+'" data-comment="'+T((n=e&&e.photo,n=null==n||n===!1?n:n.comment,typeof n===S?n.apply(e):n))+'"><img src="'+T((n=e&&e.photo,n=null==n||n===!1?n:n.preview,typeof n===S?n.apply(e):n))+'" class="reviewsCard__reviewImage"></a>'}function d(e,t){var n,a="";return a+=' style="background-image: url('+T((n=e&&e.user,n=null==n||n===!1?n:n.avatar,typeof n===S?n.apply(e):n))+');"'}function h(e,t){return"_noReviewsCount"}function p(e,t){var a,i,o,r="";return r+='<div class="reviewsCard__reviewUserReviewsCount">',i=n._hnt||e&&e._hnt,o={hash:{},data:t},a=i?i.call(e,"%{Wrap %1} отзыв","%{Wrap %1} отзыва","%{Wrap %1} отзывов",(a=e&&e.user,null==a||a===!1?a:a.reviewsCount),o):I.call(e,"_hnt","%{Wrap %1} отзыв","%{Wrap %1} отзыва","%{Wrap %1} отзывов",(a=e&&e.user,null==a||a===!1?a:a.reviewsCount),o),(a||0===a)&&(r+=a),r+="</div>"}function f(e,t){var a,i,o="";return o+='<div class="reviewsCard__reviewFilialAddress">'+T((a=n.Link||e&&e.Link,i={hash:{"class":"_undashed reviewsCard__reviewFilialAddressLink","data-id":e&&e.id},data:t},a?a.call(e,e&&e.address,i):I.call(e,"Link",e&&e.address,i)))+"</div>"}function m(e,t){var a,i,o,r="";return r+='<div class="reviewsCard__reviewOfficialAnswer"><div class="reviewsCard__reviewOfficialAnswerAvatar">',a=n["if"].call(e,(a=e&&e.officialAnswer,null==a||a===!1?a:a.avatar),{hash:{},inverse:E.noop,fn:E.program(22,g,t),data:t}),(a||0===a)&&(r+=a),r+='</div><div class="reviewsCard__reviewOfficialAnswerName">'+T((a=e&&e.officialAnswer,a=null==a||a===!1?a:a.name,typeof a===S?a.apply(e):a))+"</div>"+T((i=n.p||e&&e.p,o={hash:{context:(a=e&&e.officialAnswer,null==a||a===!1?a:a.message)},data:t},i?i.call(e,"message",o):I.call(e,"p","message",o)))+"</div>"}function g(e,t){var n,a="";return a+='<img src="'+T((n=e&&e.officialAnswer,n=null==n||n===!1?n:n.avatar,typeof n===S?n.apply(e):n))+'" class="reviewsCard__reviewOfficialAnswerAvatarImage">'}function _(e,t){var a,i,o,r="";return i=n.Link||e&&e.Link,o={hash:{"class":"_undashed reviewsCard__reviewShowFullMessage"},inverse:E.noop,fn:E.program(25,v,t),data:t},a=i?i.call(e,o):I.call(e,"Link",o),(a||0===a)&&(r+=a),r}function v(e,t){var a,i,o="";return o+=T((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Читать полностью",i):I.call(e,"_t","Читать полностью",i)))}function y(e,t){var a,i,o,r="";return r+='<span class="reviewsCard__reviewLinkDate">',(i=n.date)?a=i.call(e,{hash:{},data:t}):(i=e&&e.date,a=typeof i===S?i.call(e,{hash:{},data:t}):i),r+=T(a)+'</span><span class="reviewsCard__reviewLinkSourceUrl">'+T((a=e&&e.source,a=null==a||a===!1?a:a.url,typeof a===S?a.apply(e):a))+"</span>"+T((i=n.Icon||e&&e.Icon,o={hash:{"class":"reviewsCard__reviewLinkSourceLogo"},data:t},i?i.call(e,(a=e&&e.source,null==a||a===!1?a:a.logo),o):I.call(e,"Icon",(a=e&&e.source,null==a||a===!1?a:a.logo),o)))}function b(e,t){return"<!--/noindex--><!--googleon: all-->"}function k(e,t){var a,i,o="";return o+=T((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e&&e.jsonldModule,i):I.call(e,"module",e&&e.jsonldModule,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var w,x,C,L="",I=n.helperMissing,T=this.escapeExpression,S="function",E=this;return w=n["if"].call(t,t&&t.noIndex,{hash:{},inverse:E.noop,fn:E.program(1,o,i),data:i}),(w||0===w)&&(L+=w),L+='<div class="reviewsCard__review _source_'+T((w=t&&t.source,w=null==w||w===!1?w:w.key,typeof w===S?w.apply(t):w)),w=n["if"].call(t,t&&t.photo,{hash:{},inverse:E.noop,fn:E.program(3,r,i),data:i}),(w||0===w)&&(L+=w),w=n["if"].call(t,t&&t.showReadMoreLink,{hash:{},inverse:E.noop,fn:E.program(5,s,i),data:i}),(w||0===w)&&(L+=w),L+='"><div class="reviewsCard__reviewAside"><div class="reviewsCard__reviewInfo">',w=n["if"].call(t,t&&t.isRecommended,{hash:{},inverse:E.noop,fn:E.program(7,l,i),data:i}),(w||0===w)&&(L+=w),w=n["if"].call(t,t&&t.rating,{hash:{},inverse:E.noop,fn:E.program(9,c,i),data:i}),(w||0===w)&&(L+=w),L+="</div>",w=n["if"].call(t,t&&t.photo,{hash:{},inverse:E.noop,fn:E.program(11,u,i),data:i}),(w||0===w)&&(L+=w),L+='</div><div class="reviewsCard__reviewUser"><div class="reviewsCard__reviewUserAvatar"',w=n["if"].call(t,(w=t&&t.user,null==w||w===!1?w:w.avatar),{hash:{},inverse:E.noop,fn:E.program(13,d,i),data:i}),(w||0===w)&&(L+=w),L+='></div><div class="reviewsCard__reviewUserName ',w=n.unless.call(t,(w=t&&t.user,null==w||w===!1?w:w.reviewsCount),{hash:{},inverse:E.noop,fn:E.program(15,h,i),data:i}),(w||0===w)&&(L+=w),L+='">'+T((w=t&&t.user,w=null==w||w===!1?w:w.name,typeof w===S?w.apply(t):w))+"</div>",w=n["if"].call(t,(w=t&&t.user,null==w||w===!1?w:w.reviewsCount),{hash:{},inverse:E.noop,fn:E.program(17,p,i),data:i}),(w||0===w)&&(L+=w),L+="</div>",w=n["if"].call(t,t&&t.address,{hash:{},inverse:E.noop,fn:E.program(19,f,i),data:i}),(w||0===w)&&(L+=w),L+=T((x=n.p||t&&t.p,C={hash:{context:t&&t.message},data:i},x?x.call(t,"message",C):I.call(t,"p","message",C))),w=n["if"].call(t,t&&t.officialAnswer,{hash:{},inverse:E.noop,fn:E.program(21,m,i),data:i}),(w||0===w)&&(L+=w),w=n["if"].call(t,t&&t.showReadMoreLink,{hash:{},inverse:E.noop,fn:E.program(24,_,i),data:i}),(w||0===w)&&(L+=w),L+='<div class="reviewsCard__reviewFooter"><div class="reviewsCard__reviewLikes">'+T((x=n.Icon||t&&t.Icon,C={hash:{"class":"reviewsCard__reviewLikeIcon"},data:i},x?x.call(t,"rating_like",C):I.call(t,"Icon","rating_like",C))),(x=n.likes)?w=x.call(t,{hash:{},data:i}):(x=t&&t.likes,w=typeof x===S?x.call(t,{hash:{},data:i}):x),L+=T(w)+"</div>",x=n.Link||t&&t.Link,C={hash:{href:t&&t.href,"class":"_undashed reviewsCard__reviewLink",target:"_blank"},inverse:E.noop,fn:E.program(27,y,i),data:i},w=x?x.call(t,C):I.call(t,"Link",C),(w||0===w)&&(L+=w),L+="</div></div>",w=n["if"].call(t,t&&t.noIndex,{hash:{},inverse:E.noop,fn:E.program(29,b,i),data:i}),(w||0===w)&&(L+=w),w=n["if"].call(t,t&&t.jsonldModule,{hash:{},inverse:E.noop,fn:E.program(31,k,i),data:i}),(w||0===w)&&(L+=w),L},this.jst_modules=this.jst_modules||{},this.jst_modules.reviewsCard=this.jst_modules.reviewsCard||{},this.jst_modules.reviewsCard.reviewsToggle=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="reviewsCard__reviewsFor',a=n["if"].call(e,e&&e.active,{hash:{},inverse:c.noop,fn:c.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+='" data-for="',(i=n["for"])?a=i.call(e,{hash:{},data:t}):(i=e&&e["for"],a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)+'">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)+"</div>"}function r(e,t){return" _active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l="",c=this,u="function",d=this.escapeExpression;return l+='<div class="reviewsCard__reviewsToggle">',s=n.each.call(t,(s=t&&t.reviewsToggle,null==s||s===!1?s:s.items),{hash:{},inverse:c.noop,fn:c.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.routeCard=this.jst_modules.routeCard||{},this.jst_modules.routeCard.print=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='\n         <span class="routeCard__headerNote">',(i=n.note)?a=i.call(e,{hash:{},data:t}):(i=e&&e.note,a=typeof i===u?i.call(e,{hash:{},data:t}):i),o+=d(a)+"</span>"}function r(e,t){var a,i,o="";return o+=d((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):h.call(e,"module",e,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,l,c="",u="function",d=this.escapeExpression,h=n.helperMissing,p=this;return c+='<div class="routeCard__header" data-print="static"><h1 class="routeCard__headerTitle">',(l=n.name)?s=l.call(t,{hash:{},data:i}):(l=t&&t.name,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+"</h1>",s=n["if"].call(t,t&&t.note,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(s||0===s)&&(c+=s),c+='<div class="routeCard__type">',(l=n.typeName)?s=l.call(t,{hash:{},data:i}):(l=t&&t.typeName,s=typeof l===u?l.call(t,{hash:{},data:i}):l),c+=d(s)+'</div></div><div data-print="dynamic">',s=n.each.call(t,t&&t.routesList,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(s||0===s)&&(c+=s),c+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.routeResults=this.jst_modules.routeResults||{},this.jst_modules.routeResults.metro=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div class="routeResults__hintCoach" ',a=n["if"].call(e,e&&e.color,{hash:{},inverse:m.noop,fn:m.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+=">",a=n.unless.call(e,null==t||t===!1?t:t.index,{hash:{},inverse:m.program(6,l,t),fn:m.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function r(e,t){var a,i,o="";return o+='style="color: ',(i=n.color)?a=i.call(e,{hash:{},data:t}):(i=e&&e.color,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+'"'}function s(e,t){var a,i,o="";return o+=p((a=n.Icon||e&&e.Icon,i={hash:{},data:t},a?a.call(e,"metro-coach_first",i):f.call(e,"Icon","metro-coach_first",i)))}function l(e,t){var a,i,o="";return o+=p((a=n.Icon||e&&e.Icon,i={hash:{},data:t},a?a.call(e,"metro-coach",i):f.call(e,"Icon","metro-coach",i)))}function c(e,t){var a,i,o="";return o+='<div class="routeResults__hintText">',(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h="function",p=this.escapeExpression,f=n.helperMissing,m=this;return d+='<div class="routeResults__hint _type_metro">',u=n.each.call(t,t&&t.coaches,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(u||0===u)&&(d+=u),u=n["if"].call(t,t&&t.text,{hash:{},inverse:m.noop,fn:m.program(8,c,i),data:i}),(u||0===u)&&(d+=u),d+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.routeResults=this.jst_modules.routeResults||{},this.jst_modules.routeResults.print=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=u((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"routeStepsItem",i):c.call(e,"p","routeStepsItem",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c=n.helperMissing,u=this.escapeExpression,d="function",h=this;return l+='<div class="routeResults" data-print="static"><header class="routeResults__header">',(s=n.title)?r=s.call(t,{hash:{},data:i}):(s=t&&t.title,r=typeof s===d?s.call(t,{hash:{},data:i}):s),l+=u(r)+", ",(s=n.time)?r=s.call(t,{hash:{},data:i}):(s=t&&t.time,r=typeof s===d?s.call(t,{hash:{},data:i}):s),l+=u(r)+':\n    </header></div><ul class="routeResults _city_',(s=n.city)?r=s.call(t,{hash:{},data:i}):(s=t&&t.city,r=typeof s===d?s.call(t,{hash:{},data:i}):s),l+=u(r)+' routeResults__steps" data-print="dynamic">',r=n.each.call(t,t&&t.points,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(r||0===r)&&(l+=r),l+="</ul>"},this.jst_modules=this.jst_modules||{},this.jst_modules.routeResults=this.jst_modules.routeResults||{},this.jst_modules.routeResults.route=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<ul class="routeResults__transport">',a=n.each.call(e,e&&e.transport,{hash:{},inverse:m.noop,fn:m.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function r(e,t){
var n="";return n+='<li class="routeResults__transportItem _type_'+f(typeof e===p?e.apply(e):e)+'"></li>'}function s(e,t){var a,i="";return i+='<ul class="routeResults__branches">',a=n.each.call(e,e&&e.branches,{hash:{},inverse:m.noop,fn:m.program(5,l,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function l(e,t){var n="";return n+='<li class="routeResults__branchesItem" style="background: '+f(typeof e===p?e.apply(e):e)+'"></li>'}function c(e,t){var a,i,o="";return o+=f((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"routeStepsItem",i):g.call(e,"p","routeStepsItem",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d,h="",p="function",f=this.escapeExpression,m=this,g=n.helperMissing;return h+='<section class="routeResults__route"><header class="routeResults__routeHeader" data-route-id="',(d=n.routeId)?u=d.call(t,{hash:{},data:i}):(d=t&&t.routeId,u=typeof d===p?d.call(t,{hash:{},data:i}):d),h+=f(u)+'"><div class="routeResults__routeHeaderWrap"><span class="routeResults__time">',(d=n.time)?u=d.call(t,{hash:{},data:i}):(d=t&&t.time,u=typeof d===p?d.call(t,{hash:{},data:i}):d),h+=f(u)+'</span><span class="routeResults__transfers">',(d=n.transfers)?u=d.call(t,{hash:{},data:i}):(d=t&&t.transfers,u=typeof d===p?d.call(t,{hash:{},data:i}):d),h+=f(u)+"</span></div>",u=n["if"].call(t,t&&t.transport,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(u||0===u)&&(h+=u),u=n["if"].call(t,t&&t.branches,{hash:{},inverse:m.noop,fn:m.program(4,s,i),data:i}),(u||0===u)&&(h+=u),h+='</header><div class="routeResults__clipper"><div class="routeResults__scroller"><ul class="routeResults__steps">',u=n.each.call(t,t&&t.points,{hash:{},inverse:m.noop,fn:m.program(7,c,i),data:i}),(u||0===u)&&(h+=u),h+="</ul>",(d=n.Track)?u=d.call(t,{hash:{},data:i}):(d=t&&t.Track,u=typeof d===p?d.call(t,{hash:{},data:i}):d),h+=f(u)+"</div></div></section>"},this.jst_modules=this.jst_modules||{},this.jst_modules.routeResults=this.jst_modules.routeResults||{},this.jst_modules.routeResults.routeStepsItem=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="routeResults__stepsItemName" data-point-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===v?i.call(e,{hash:{},data:t}):i),o+=y(a)+'">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===v?i.call(e,{hash:{},data:t}):i),o+=y(a)+"</div> "}function r(e,t){var a,i,o="";return o+='<div class="routeResults__stepsItemLabel">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===v?i.call(e,{hash:{},data:t}):i),o+=y(a)+"</div>"}function s(e,t){var a,i,o="";return o+='<div class="routeResults__transports"><div class="routeResults__transportsName">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===v?i.call(e,{hash:{},data:t}):i),o+=y(a),a=n["if"].call(e,e&&e.numbers,{hash:{},inverse:b.noop,fn:b.program(6,l,t),data:t}),(a||0===a)&&(o+=a),o+="</div>",a=n.each.call(e,e&&e.numbers,{hash:{},inverse:b.noop,fn:b.program(8,c,t),data:t}),(a||0===a)&&(o+=a),o+="</div>"}function l(e,t){return": "}function c(e,t){var a,i="";return a=n["if"].call(e,null==t||t===!1?t:t.index,{hash:{},inverse:b.noop,fn:b.program(9,u,t),data:t}),(a||0===a)&&(i+=a),i+='<div class="routeResults__transportsItem">'+y(typeof e===v?e.apply(e):e)+"</div>"}function u(e,t){return", "}function d(e,t){var a,i="";return i+='<ul class="routeResults__hints">',a=n.each.call(e,e&&e.hints,{hash:{},inverse:b.noop,fn:b.program(12,h,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function h(e,t){var a,i="";return i+='<li class="routeResults__hintsItem">',a=n["if"].call(e,e&&e.type,{hash:{},inverse:b.program(15,f,t),fn:b.program(13,p,t),data:t}),(a||0===a)&&(i+=a),i+="</li>"}function p(e,t){var a,i,o="";return o+=y((a=n.p||e&&e.p,i={hash:{context:e},data:t},a?a.call(e,e&&e.type,i):k.call(e,"p",e&&e.type,i)))}function f(e,t){var a,i,o="";return o+=y((a=n.p||e&&e.p,i={hash:{context:e},data:t},a?a.call(e,"textHint",i):k.call(e,"p","textHint",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var m,g,_="",v="function",y=this.escapeExpression,b=this,k=n.helperMissing;return _+='<li class="routeResults__stepsItem _type_',(g=n.type)?m=g.call(t,{hash:{},data:i}):(g=t&&t.type,m=typeof g===v?g.call(t,{hash:{},data:i}):g),_+=y(m)+'" data-segment-id="',(g=n.segmentId)?m=g.call(t,{hash:{},data:i}):(g=t&&t.segmentId,m=typeof g===v?g.call(t,{hash:{},data:i}):g),_+=y(m)+'" data-route-id="',(g=n.routeId)?m=g.call(t,{hash:{},data:i}):(g=t&&t.routeId,m=typeof g===v?g.call(t,{hash:{},data:i}):g),_+=y(m)+'" style="color: ',(g=n.color)?m=g.call(t,{hash:{},data:i}):(g=t&&t.color,m=typeof g===v?g.call(t,{hash:{},data:i}):g),_+=y(m)+';"><div class="routeResults__stepsItemIcon"></div>',m=n["if"].call(t,t&&t.name,{hash:{},inverse:b.noop,fn:b.program(1,o,i),data:i}),(m||0===m)&&(_+=m),m=n["if"].call(t,t&&t.label,{hash:{},inverse:b.noop,fn:b.program(3,r,i),data:i}),(m||0===m)&&(_+=m),m=n.each.call(t,t&&t.transports,{hash:{},inverse:b.noop,fn:b.program(5,s,i),data:i}),(m||0===m)&&(_+=m),m=n["if"].call(t,t&&t.hints,{hash:{},inverse:b.noop,fn:b.program(11,d,i),data:i}),(m||0===m)&&(_+=m),_+="</li>"},this.jst_modules=this.jst_modules||{},this.jst_modules.routeResults=this.jst_modules.routeResults||{},this.jst_modules.routeResults.textHint=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="routeResults__hintText">',(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===l?i.call(e,{hash:{},data:t}):i),o+=c(a)+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l="function",c=this.escapeExpression,u=this;return s+='<div class="routeResults__hint">',r=n["if"].call(t,t&&t.text,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.schedule=this.jst_modules.schedule||{},this.jst_modules.schedule.print=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+=p((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"table",i):h.call(e,"p","table",i)))}function r(e,t){var a,i="";return a=n["if"].call(e,e&&e.today,{hash:{},inverse:m.program(6,l,t),fn:m.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i}function s(e,t){var a,i,o="";return(i=n.today)?a=i.call(e,{hash:{},data:t}):(i=e&&e.today,a=typeof i===f?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o}function l(e,t){var a,i,o="";return o+=p((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Информация отсутствует",i):h.call(e,"_t","Информация отсутствует",i)))}function c(e,t){var a,i,o="";return o+='<div class="schedule__comment">',(i=n.comment)?a=i.call(e,{hash:{},data:t}):(i=e&&e.comment,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h=n.helperMissing,p=this.escapeExpression,f="function",m=this;return u=n["if"].call(t,t&&t.week,{hash:{},inverse:m.program(3,r,i),fn:m.program(1,o,i),data:i}),(u||0===u)&&(d+=u),u=n["if"].call(t,t&&t.comment,{hash:{},inverse:m.noop,fn:m.program(8,c,i),data:i}),(u||0===u)&&(d+=u),d},this.jst_modules=this.jst_modules||{},this.jst_modules.schedule=this.jst_modules.schedule||{},this.jst_modules.schedule.table=function(e,t,n,a,i){function o(e,t){return" _12h"}function r(e,t){var a,i,o="";return o+='<th class="schedule__th',a=n["if"].call(e,e&&e.today,{hash:{},inverse:_.noop,fn:_.program(4,s,t),data:t}),(a||0===a)&&(o+=a),a=n["if"].call(e,e&&e.dayoff,{hash:{},inverse:_.noop,fn:_.program(6,l,t),data:t}),(a||0===a)&&(o+=a),o+='">',(i=n.key)?a=i.call(e,{hash:{},data:t}):(i=e&&e.key,a=typeof i===v?i.call(e,{hash:{},data:t}):i),o+=y(a)+"</th>"}function s(e,t){return" _active"}function l(e,t){return" _dayoff"}function c(e,t){var a,i="";return i+='<td class="schedule__td',a=n["if"].call(e,e&&e.today,{hash:{},inverse:_.noop,fn:_.program(4,s,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.dayoff,{hash:{},inverse:_.noop,fn:_.program(6,l,t),data:t}),(a||0===a)&&(i+=a),i+='">',a=n["if"].call(e,(a=e&&e.parts,null==a||a===!1?a:a.first),{hash:{},inverse:_.program(11,d,t),fn:_.program(9,u,t),data:t}),(a||0===a)&&(i+=a),i+="</td>"}function u(e,t){var n,a="";return a+='<time class="schedule__tableTime">'+y((n=e&&e.parts,n=null==n||n===!1?n:n.first,n=null==n||n===!1?n:n.from,typeof n===v?n.apply(e):n))+'</time><time class="schedule__tableTime">'+y((n=e&&e.parts,n=null==n||n===!1?n:n.first,n=null==n||n===!1?n:n.to,typeof n===v?n.apply(e):n))+"</time>"}function d(e,t){return'<span class="schedule__dayoff"></span>'}function h(e,t){var a,i="";return i+='<tr class="schedule__tr _lunch">',a=n.each.call(e,e&&e.week,{hash:{},inverse:_.noop,fn:_.program(14,p,t),data:t}),(a||0===a)&&(i+=a),i+="</tr>"}function p(e,t){var a,i,o,r="";return r+='<td class="schedule__td',a=n["if"].call(e,e&&e.today,{hash:{},inverse:_.noop,fn:_.program(4,s,t),data:t}),(a||0===a)&&(r+=a),a=n["if"].call(e,e&&e.dayoff,{hash:{},inverse:_.noop,fn:_.program(6,l,t),data:t}),(a||0===a)&&(r+=a),r+='" data-label="'+y((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"обед",o):b.call(e,"_t","обед",o)))+'">',a=n["if"].call(e,(a=e&&e.parts,null==a||a===!1?a:a.second),{hash:{},inverse:_.program(11,d,t),fn:_.program(15,f,t),data:t}),(a||0===a)&&(r+=a),r+="</td>"}function f(e,t){var n,a="";return a+='<time class="schedule__tableTime">'+y((n=e&&e.parts,n=null==n||n===!1?n:n.second,n=null==n||n===!1?n:n.from,typeof n===v?n.apply(e):n))+'</time><time class="schedule__tableTime">'+y((n=e&&e.parts,n=null==n||n===!1?n:n.second,n=null==n||n===!1?n:n.to,typeof n===v?n.apply(e):n))+"</time>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var m,g="",_=this,v="function",y=this.escapeExpression,b=n.helperMissing;return g+='<table class="schedule__table',m=n["if"].call(t,t&&t.is12h,{hash:{},inverse:_.noop,fn:_.program(1,o,i),data:i}),(m||0===m)&&(g+=m),g+='"><tr class="schedule__tr _keys">',m=n.each.call(t,t&&t.week,{hash:{},inverse:_.noop,fn:_.program(3,r,i),data:i}),(m||0===m)&&(g+=m),g+='</tr><tr class="schedule__tr _work">',m=n.each.call(t,t&&t.week,{hash:{},inverse:_.noop,fn:_.program(8,c,i),data:i}),(m||0===m)&&(g+=m),g+="</tr>",m=n["if"].call(t,t&&t.hasSecondRow,{hash:{},inverse:_.noop,fn:_.program(13,h,i),data:i}),(m||0===m)&&(g+=m),g+="</table>"},this.jst_modules=this.jst_modules||{},this.jst_modules.searchBar=this.jst_modules.searchBar||{},this.jst_modules.searchBar.media=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<span class="searchBar__mediaLogo">'+c((o=n.Icon||t&&t.Icon,r={hash:{"class":"searchBar__mediaLogoIcon"},data:i},o?o.call(t,"searchBar_mediaLogo",r):l.call(t,"Icon","searchBar_mediaLogo",r)))+'</span><span class="searchBar__mediaBack">'+c((o=n.Icon||t&&t.Icon,r={hash:{"class":"searchBar__mediaBackIcon"},data:i},o?o.call(t,"mediaBack",r):l.call(t,"Icon","mediaBack",r)))+'</span><span class="searchBar__resultsPlaceholder"></span><div class="searchBar__mediaButtons"><span class="searchBar__mediaButton searchBar__mediaMinimize">'+c((o=n.Icon||t&&t.Icon,r={hash:{"class":"searchBar__mediaMinimizeIcon"},data:i},o?o.call(t,"searchBar_mediaMinimize",r):l.call(t,"Icon","searchBar_mediaMinimize",r)))+'</span><span class="searchBar__mediaButton searchBar__mediaMaximize">'+c((o=n.Icon||t&&t.Icon,r={hash:{"class":"searchBar__mediaMaximizeIcon"},data:i},o?o.call(t,"mediaMaximize",r):l.call(t,"Icon","mediaMaximize",r)))+'</span><span class="searchBar__mediaButton searchBar__mediaClose">'+c((o=n.Icon||t&&t.Icon,r={hash:{"class":"searchBar__mediaCloseIcon"},data:i},o?o.call(t,"searchBar_mediaClose",r):l.call(t,"Icon","searchBar_mediaClose",r)))+'</span></div><div class="searchBar__mediaTabs"></div>'},this.jst_modules=this.jst_modules||{},this.jst_modules.searchBar=this.jst_modules.searchBar||{},this.jst_modules.searchBar.mediaTabs=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="searchBar__mediaTab',a=n["if"].call(e,e&&e.active,{hash:{},inverse:g.noop,fn:g.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+=" _type_",(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=m(a)+" ",a=n["if"].call(e,e&&e.hidden,{hash:{},inverse:g.noop,fn:g.program(4,s,t),data:t}),(a||0===a)&&(o+=a),o+='" data-name="',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=m(a)+'" title="',(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=m(a)+'">',a=n["if"].call(e,e&&e.icon,{hash:{},inverse:g.noop,fn:g.program(6,l,t),data:t}),(a||0===a)&&(o+=a),o+='<span class="searchBar__mediaTabText">',a=n["if"].call(e,e&&e.showNumber,{hash:{},inverse:g.noop,fn:g.program(8,c,t),data:t}),(a||0===a)&&(o+=a),a=n["if"].call(e,e&&e.text,{hash:{},inverse:g.noop,fn:g.program(11,d,t),data:t}),(a||0===a)&&(o+=a),o+="</span></div>"}function r(e,t){return" _active"}function s(e,t){return"_hidden"}function l(e,t){var a,i,o="";return o+=m((a=n.Icon||e&&e.Icon,i={hash:{"class":"searchBar__mediaTabIcon"},data:t},a?a.call(e,e&&e.icon,i):f.call(e,"Icon",e&&e.icon,i)))}function c(e,t){var a,i,o="";return o+='<span class="searchBar__mediaTabTextValue',a=n["if"].call(e,e&&e.allTab,{hash:{},inverse:g.noop,fn:g.program(9,u,t),data:t}),(a||0===a)&&(o+=a),o+='">',(i=n.number)?a=i.call(e,{hash:{},data:t}):(i=e&&e.number,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=m(a)+"</span>"}function u(e,t){return" searchBar__mediaTabTotal"}function d(e,t){var a,i,o="";return o+='<span class="searchBar__mediaTabTextDescription">',(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===_?i.call(e,{hash:{},data:t}):i),o+=m(a)+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var h,p="",f=n.helperMissing,m=this.escapeExpression,g=this,_="function";return h=n.each.call(t,t&&t.menuItems,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(h||0===h)&&(p+=h),p},this.jst_modules=this.jst_modules||{},this.jst_modules.searchBar=this.jst_modules.searchBar||{},this.jst_modules.searchBar.transportTypes=function(e,t,n,a,i){function o(e,t){var n="";return n+='<div class="searchBar__transportButton searchBar__transport'+c(typeof e===l?e.apply(e):e)+'"></div>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l="function",c=this.escapeExpression,u=this;return r=n.each.call(t,t&&t.buttons,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},this.jst_modules=this.jst_modules||{},this.jst_modules.searchResults=this.jst_modules.searchResults||{},this.jst_modules.searchResults.additional=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="searchResults__additionalCute" ',a=n["if"].call(e,e&&e.showAdvWarning,{hash:{},inverse:f.noop,fn:f.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+=">",(i=n.ads)?a=i.call(e,{hash:{},data:t}):(i=e&&e.ads,a=typeof i===m?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function r(e,t){var a,i,o="";return o+='data-adv="'+p((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"реклама",i):h.call(e,"_gg","реклама",i)))+'"'}function s(e,t){var a,i,o="";return o+='<div class="searchResults__additionalComment">',(i=n.comment)?a=i.call(e,{hash:{},data:t}):(i=e&&e.comment,a=typeof i===m?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h=n.helperMissing,p=this.escapeExpression,f=this,m="function";return d+='<div class="searchResults__additional">',l=n["if"].call(t,t&&t.ads,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(l||0===l)&&(d+=l),l=n["if"].call(t,t&&t.comment,{hash:{},inverse:f.noop,fn:f.program(4,s,i),data:i}),(l||0===l)&&(d+=l),d+='<div class="searchResults__additionalFilials">'+p((c=n._nt||t&&t._nt,u={hash:{wrap__class:"cardHeader__bodyFilialsValue"},data:i},c?c.call(t,"%1 филиал","%1 филиала","%1 филиалов",t&&t.filialsNumber,u):h.call(t,"_nt","%1 филиал","%1 филиала","%1 филиалов",t&&t.filialsNumber,u)))+"</div></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.searchResults=this.jst_modules.searchResults||{},this.jst_modules.searchResults.error=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<div class="searchResults__nothingFound"><header class="searchResults__nothingFoundHeader">'+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Что-то пошло не так",s):c.call(t,"_t","Что-то пошло не так",s)))+'</header><p class="searchResults__nothingFoundDescription">',r=n._t||t&&t._t,s={hash:{},data:i},o=r?r.call(t,"Поиск не&nbsp;сработал. Мы&nbsp;обязательно найдем причину и&nbsp;исправим&nbsp;её.",s):c.call(t,"_t","Поиск не&nbsp;сработал. Мы&nbsp;обязательно найдем причину и&nbsp;исправим&nbsp;её.",s),(o||0===o)&&(l+=o),l+=" "+u((r=n._t||t&&t._t,s={hash:{},data:i},r?r.call(t,"Пожалуйста, повторите попытку через пару минут.",s):c.call(t,"_t","Пожалуйста, повторите попытку через пару минут.",s)))+"</p></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.searchResults=this.jst_modules.searchResults||{},this.jst_modules.searchResults.header=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<span class="searchResults__listHeaderCount searchResults__listTotalCount">',(i=n.count)?a=i.call(e,{hash:{},data:t}):(i=e&&e.count,a=typeof i===c?i.call(e,{hash:{},data:t}):i),o+=u(a)+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s,l="",c="function",u=this.escapeExpression,d=this;return l+='<h1 class="searchResults__headerName">',(s=n.title)?r=s.call(t,{hash:{},data:i}):(s=t&&t.title,r=typeof s===c?s.call(t,{hash:{},data:i}):s),l+=u(r)+"</h1>",r=n["if"].call(t,t&&t.simple,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(r||0===r)&&(l+=r),l},this.jst_modules=this.jst_modules||{},this.jst_modules.searchResults=this.jst_modules.searchResults||{},this.jst_modules.searchResults.i404=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="searchResults__nothingFound"><header class="searchResults__nothingFoundHeader">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Нет подходящих организаций",r):l.call(t,"_t","Нет подходящих организаций",r)))+'</header><p class="searchResults__nothingFoundDescription">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Попробуйте менее строгие критерии поиска.",r):l.call(t,"_t","Попробуйте менее строгие критерии поиска.",r)))+"</p></div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.searchResults=this.jst_modules.searchResults||{},this.jst_modules.searchResults.listHeader=function(e,t,n,a,i){function o(e,t){return" _without_separator"}function r(e,t){var a,i,o,r="";return i=n.Link||e&&e.Link,o={hash:{href:e&&e.providersInBuildingSeoLink,"class":"searchResults__providerAggregatorButton"},inverse:p.noop,fn:p.program(4,s,t),data:t},a=i?i.call(e,o):d.call(e,"Link",o),(a||0===a)&&(r+=a),r}function s(e,t){var a,i,o="";return o+=h((a=n._gg||e&&e._gg,i={hash:{},data:t},a?a.call(e,"Сравнить тарифы в этом доме",i):d.call(e,"_gg","Сравнить тарифы в этом доме",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u="",d=n.helperMissing,h=this.escapeExpression,p=this,f="function";return u+='<div class="searchResults__listHeaderWrapper"><div class="searchResults__listHeader',l=n["if"].call(t,t&&t.providerButton,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(l||0===l)&&(u+=l),u+=' searchResults__fade"><div class="searchResults__listHeaderContent"><h1 class="searchResults__listHeaderContentHeading">',(c=n.title)?l=c.call(t,{hash:{},data:i}):(c=t&&t.title,l=typeof c===f?c.call(t,{hash:{},data:i}):c),u+=h(l)+'</h1><span class="searchResults__listHeaderCount searchResults__listSubCount">',(c=n.count)?l=c.call(t,{hash:{},data:i}):(c=t&&t.count,l=typeof c===f?c.call(t,{hash:{},data:i}):c),u+=h(l)+"</span></div></div></div>",l=n["if"].call(t,t&&t.providerButton,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(l||0===l)&&(u+=l),u},this.jst_modules=this.jst_modules||{},this.jst_modules.searchResults=this.jst_modules.searchResults||{},this.jst_modules.searchResults.print=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<div class="printCard__filters">'+p((i=n._t||e&&e._t,o={hash:{},data:t},i?i.call(e,"Фильтры",o):h.call(e,"_t","Фильтры",o)))+': <span class="printCard__filtersList">',(i=n.filters)?a=i.call(e,{hash:{},data:t}):(i=e&&e.filters,a=typeof i===f?i.call(e,{hash:{},data:t}):i),r+=p(a)+"</span></div>"}function r(e,t){var a,i="";return a=n.unless.call(e,e&&e.header,{hash:{},inverse:m.noop,fn:m.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i}function s(e,t){var a,i,o="";return o+='<div class="printList__miniCard"><div class="printList__miniCardTitle">',(i=n.title)?a=i.call(e,{hash:{},data:t}):(i=e&&e.title,a=typeof i===f?i.call(e,{hash:{},data:t}):i),o+=p(a)+'</div><ul class="printList__miniCardDetails">',a=n.each.call(e,e&&e.details,{hash:{},inverse:m.noop,fn:m.program(5,l,t),data:t}),(a||0===a)&&(o+=a),o+="</ul></div>"}function l(e,t){var n="";return n+='<li class="printList__miniCardDetailsItem">'+p(typeof e===f?e.apply(e):e)+"</li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u,d="",h=n.helperMissing,p=this.escapeExpression,f="function",m=this;return d+='<div class="printCard _module_searchResults" data-print="static"><div class="printCard__header"><h1 class="printCard__headerTitle">',(u=n.title)?c=u.call(t,{hash:{},data:i}):(u=t&&t.title,c=typeof u===f?u.call(t,{hash:{},data:i}):u),d+=p(c)+"</h1>",c=n["if"].call(t,t&&t.filters,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(c||0===c)&&(d+=c),d+='</div></div><div class="printList _module_searchResults" data-print="dynamic">',c=n.each.call(t,t&&t.results,{hash:{},inverse:m.noop,fn:m.program(3,r,i),data:i}),(c||0===c)&&(d+=c),d+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.searchResults=this.jst_modules.searchResults||{},this.jst_modules.searchResults.recoveryAdsHeader=function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o,r,s="",l=n.helperMissing,c=this.escapeExpression;return s+='<div class="searchResults__listRecovery">'+c((o=n._t||t&&t._t,r={hash:{},data:i},o?o.call(t,"Предложения других организаций",r):l.call(t,"_t","Предложения других организаций",r)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.searchResults=this.jst_modules.searchResults||{},this.jst_modules.searchResults.results=function(e,t,n,a,i){function o(e,t){var a,i="";return a=n["if"].call(e,e&&e.header,{hash:{},inverse:f.program(4,s,t),fn:f.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i}function r(e,t){var a,i,o="";return o+=p((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,e&&e.type,"listHeader",i):h.call(e,"p",e&&e.type,"listHeader",i)))}function s(e,t){var a,i,o="";return o+=p((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):h.call(e,"module",e,i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u,d="",h=n.helperMissing,p=this.escapeExpression,f=this;return d+='<div class="searchResults__list">',l=n.each.call(t,t&&t.items,{hash:{},inverse:f.noop,fn:f.program(1,o,i),data:i}),(l||0===l)&&(d+=l),d+="</div>"+p((c=n.module||t&&t.module,u={hash:{},data:i},c?c.call(t,"pagination",u):h.call(t,"module","pagination",u)))+'<div class="searchResults__loader _bottom">'+p((c=n.Preloader||t&&t.Preloader,u={hash:{"class":"_scheme_lighten searchResults__loaderPre"},data:i},c?c.call(t,u):h.call(t,"Preloader",u)))+"</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.selectBox=this.jst_modules.selectBox||{},this.jst_modules.selectBox.dropdownItem=function(e,t,n,a,i){function o(e,t){return" _selected"}function r(e,t){var a,i="";return i+='\n        style="\n            ',a=n.each.call(e,e&&e.style,{hash:{},inverse:p.noop,fn:p.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+='"\n    '}function s(e,t){var n,a="";return a+="\n                "+h((n=null==t||t===!1?t:t.key,typeof n===d?n.apply(e):n))+": "+h(typeof e===d?e.apply(e):e)+";\n            "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u="",d="function",h=this.escapeExpression,p=this;return u+='<div class="selectBox__dropdownItem\n    ',l=n["if"].call(t,t&&t.selected,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(l||0===l)&&(u+=l),u+='"\n    ',l=n["if"].call(t,t&&t.style,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(l||0===l)&&(u+=l),u+='\n    data-value="',(c=n.value)?l=c.call(t,{hash:{},data:i}):(c=t&&t.value,l=typeof c===d?c.call(t,{hash:{},data:i}):c),u+=h(l)+'"\n    data-index="',(c=n.index)?l=c.call(t,{hash:{},data:i}):(c=t&&t.index,l=typeof c===d?c.call(t,{hash:{},data:i}):c),u+=h(l)+'">',(c=n.label)?l=c.call(t,{hash:{},data:i}):(c=t&&t.label,l=typeof c===d?c.call(t,{hash:{},data:i}):c),(l||0===l)&&(u+=l),u+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.selectBox=this.jst_modules.selectBox||{},this.jst_modules.selectBox.dropdownItems=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div\n        class="selectBox__dropdownItem _default\n        ',a=n["if"].call(e,(a=e&&e.defaults,null==a||a===!1?a:a.selected),{hash:{},inverse:h.noop,fn:h.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+='"\n        data-index="0"\n        data-value="'+f((a=e&&e.defaults,a=null==a||a===!1?a:a.value,typeof a===p?a.apply(e):a))+'">'+f((a=e&&e.defaults,a=null==a||a===!1?a:a.label,typeof a===p?a.apply(e):a))+"</div>"}function r(e,t){return" _selected"}function s(e,t){var a,i="";return a=n["if"].call(e,e&&e.items,{hash:{},inverse:h.program(6,c,t),fn:h.program(5,l,t),data:t}),(a||0===a)&&(i+=a),i}function l(e,t){var a,i,o="";return o+='<div class="selectBox__dropdownGroup"><div class="selectBox__dropdownGroupLabel">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===p?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>",a=n.each.call(e,e&&e.items,{hash:{},inverse:h.noop,fn:h.program(6,c,t),data:t}),(a||0===a)&&(o+=a),o+="</div>"}function c(e,t){var a,i,o="";return o+=f((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"dropdownItem",i):m.call(e,"p","dropdownItem",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h=this,p="function",f=this.escapeExpression,m=n.helperMissing;return u=n.unless.call(t,t&&t.notShowDefaultValueInDropdown,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(u||0===u)&&(d+=u),u=n.each.call(t,t&&t.items,{hash:{},inverse:h.noop,fn:h.program(4,s,i),data:i}),(u||0===u)&&(d+=u),d},this.jst_modules=this.jst_modules||{},this.jst_modules.selectBox2=this.jst_modules.selectBox2||{},this.jst_modules.selectBox2.dropdownItem=function(e,t,n,a,i){function o(e,t){return" _selected"}function r(e,t){var a,i="";return i+='\n        style="\n            ',a=n.each.call(e,e&&e.style,{hash:{},inverse:p.noop,fn:p.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+='"\n    '}function s(e,t){var n,a="";return a+="\n                "+h((n=null==t||t===!1?t:t.key,typeof n===d?n.apply(e):n))+": "+h(typeof e===d?e.apply(e):e)+";\n            "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u="",d="function",h=this.escapeExpression,p=this;return u+='<div class="selectBox2__dropdownItem\n    ',l=n["if"].call(t,t&&t.selected,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(l||0===l)&&(u+=l),u+='"\n    ',l=n["if"].call(t,t&&t.style,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(l||0===l)&&(u+=l),u+='\n    data-value="',(c=n.value)?l=c.call(t,{hash:{},data:i}):(c=t&&t.value,l=typeof c===d?c.call(t,{hash:{},data:i}):c),u+=h(l)+'"\n    data-index="',(c=n.index)?l=c.call(t,{hash:{},data:i}):(c=t&&t.index,l=typeof c===d?c.call(t,{hash:{},data:i}):c),u+=h(l)+'">',(c=n.label)?l=c.call(t,{hash:{},data:i}):(c=t&&t.label,l=typeof c===d?c.call(t,{hash:{},data:i}):c),(l||0===l)&&(u+=l),u+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.selectBox2=this.jst_modules.selectBox2||{},this.jst_modules.selectBox2.dropdownItems=function(e,t,n,a,i){function o(e,t){var a,i="";return i+='<div\n        class="selectBox2__dropdownItem _default\n        ',a=n["if"].call(e,(a=e&&e.defaults,null==a||a===!1?a:a.selected),{hash:{},inverse:h.noop,fn:h.program(2,r,t),data:t}),(a||0===a)&&(i+=a),i+='"\n        data-index="0"\n        data-value="'+f((a=e&&e.defaults,a=null==a||a===!1?a:a.value,typeof a===p?a.apply(e):a))+'">'+f((a=e&&e.defaults,a=null==a||a===!1?a:a.label,typeof a===p?a.apply(e):a))+"</div>"}function r(e,t){return" _selected"}function s(e,t){var a,i="";return a=n["if"].call(e,e&&e.items,{hash:{},inverse:h.program(6,c,t),fn:h.program(5,l,t),data:t}),(a||0===a)&&(i+=a),i}function l(e,t){var a,i,o="";return o+='<div class="selectBox2__dropdownGroup"><div class="selectBox2__dropdownGroupLabel">',(i=n.label)?a=i.call(e,{hash:{},data:t}):(i=e&&e.label,a=typeof i===p?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>",a=n.each.call(e,e&&e.items,{hash:{},inverse:h.noop,fn:h.program(6,c,t),data:t}),(a||0===a)&&(o+=a),o+="</div>"}function c(e,t){var a,i,o="";return o+=f((a=n.p||e&&e.p,i={hash:{},data:t},a?a.call(e,"dropdownItem",i):m.call(e,"p","dropdownItem",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var u,d="",h=this,p="function",f=this.escapeExpression,m=n.helperMissing;return u=n.unless.call(t,t&&t.notShowDefaultValueInDropdown,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(u||0===u)&&(d+=u),u=n.each.call(t,t&&t.items,{hash:{},inverse:h.noop,fn:h.program(4,s,i),data:i}),(u||0===u)&&(d+=u),d},this.jst_modules=this.jst_modules||{},this.jst_modules.stopCard=this.jst_modules.stopCard||{},this.jst_modules.stopCard.print=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="stopCard__drilldown">',(i=n.drilldown)?a=i.call(e,{hash:{},data:t}):(i=e&&e.drilldown,a=typeof i===h?i.call(e,{hash:{},data:t}):i),o+=p(a)+"</div>"}function r(e,t){var a,i="";return a=n.each.call(e,e&&e.routesModules,{hash:{},inverse:m.noop,fn:m.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i}function s(e,t){var a,i,o="";return o+=p((a=n.module||e&&e.module,i={hash:{},data:t},a?a.call(e,e,i):f.call(e,"module",e,i)))}function l(e,t){var a,i,o="";return o+=p((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Мы пока не узнали, какие маршруты проходят через эту остановку, но скоро обязательно это исправим.",i):f.call(e,"_t","Мы пока не узнали, какие маршруты проходят через эту остановку, но скоро обязательно это исправим.",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var c,u,d="",h="function",p=this.escapeExpression,f=n.helperMissing,m=this;return d+='<div class="stopCard" data-print="static"><header class="stopCard__header"><h1 class="stopCard__headerTitle">',(u=n.name)?c=u.call(t,{hash:{},data:i}):(u=t&&t.name,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+'</h1></header><div class="cardToPrint__printDetails"><div class="stopCard__type _type_',(u=n.type)?c=u.call(t,{hash:{},data:i}):(u=t&&t.type,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+" _",(u=n.city)?c=u.call(t,{hash:{},data:i}):(u=t&&t.city,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c)+'">',(u=n.typeName)?c=u.call(t,{hash:{},data:i}):(u=t&&t.typeName,c=typeof u===h?u.call(t,{hash:{},data:i}):u),d+=p(c),c=n["if"].call(t,t&&t.drilldown,{hash:{},inverse:m.noop,fn:m.program(1,o,i),data:i}),(c||0===c)&&(d+=c),d+='</div></div></div><div data-print="dynamic">',c=n["if"].call(t,t&&t.routesModules,{hash:{},inverse:m.program(6,l,i),fn:m.program(3,r,i),data:i}),(c||0===c)&&(d+=c),d+="</div>"},this.jst_modules=this.jst_modules||{},this.jst_modules.suggest=this.jst_modules.suggest||{},this.jst_modules.suggest.line=function(e,t,n,a,i){function o(e,t){return" _used"}function r(e,t){var a,i,o="";return o+='<span class="suggest__tokenTypeText">',(i=n.tokenType)?a=i.call(e,{hash:{},data:t}):(i=e&&e.tokenType,a=typeof i===d?i.call(e,{
hash:{},data:t}):i),o+=h(a)+"</span>"}function s(e,t){var a,i,o="";return o+='<div class="suggest__lineDescription">',(i=n.address)?a=i.call(e,{hash:{},data:t}):(i=e&&e.address,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u="",d="function",h=this.escapeExpression,p=this;return u+='<div class="suggest__lineWrapper',l=n["if"].call(t,t&&t.address,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(l||0===l)&&(u+=l),u+='"><div class="suggest__tokenWrap">',l=n["if"].call(t,t&&t.tokenType,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(l||0===l)&&(u+=l),(c=n.text)?l=c.call(t,{hash:{},data:i}):(c=t&&t.text,l=typeof c===d?c.call(t,{hash:{},data:i}):c),(l||0===l)&&(u+=l),u+='<span class="suggest__tokenTailWrap"><span class="suggest__tokenTail" data-tail="…',(c=n.tail)?l=c.call(t,{hash:{},data:i}):(c=t&&t.tail,l=typeof c===d?c.call(t,{hash:{},data:i}):c),u+=h(l)+'">',l=n["if"].call(t,t&&t.tokenType,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(l||0===l)&&(u+=l),u+="</span></span></div></div>",l=n["if"].call(t,t&&t.address,{hash:{},inverse:p.noop,fn:p.program(5,s,i),data:i}),(l||0===l)&&(u+=l),u},this.jst_modules=this.jst_modules||{},this.jst_modules.suggestRs=this.jst_modules.suggestRs||{},this.jst_modules.suggestRs.line=function(e,t,n,a,i){function o(e,t){return" _used"}function r(e,t){var a,i,o="";return o+='<span class="suggest__tokenTypeText">',(i=n.tokenType)?a=i.call(e,{hash:{},data:t}):(i=e&&e.tokenType,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+"</span>"}function s(e,t){var a,i,o="";return o+='<div class="suggest__lineDescription">',(i=n.address)?a=i.call(e,{hash:{},data:t}):(i=e&&e.address,a=typeof i===d?i.call(e,{hash:{},data:t}):i),o+=h(a)+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c,u="",d="function",h=this.escapeExpression,p=this;return u+='<div class="suggest__lineWrapper',l=n["if"].call(t,t&&t.address,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(l||0===l)&&(u+=l),u+='"><div class="suggest__tokenWrap">',l=n["if"].call(t,t&&t.tokenType,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(l||0===l)&&(u+=l),(c=n.text)?l=c.call(t,{hash:{},data:i}):(c=t&&t.text,l=typeof c===d?c.call(t,{hash:{},data:i}):c),(l||0===l)&&(u+=l),u+='<span class="suggest__tokenTailWrap"><span class="suggest__tokenTail" data-tail="…',(c=n.tail)?l=c.call(t,{hash:{},data:i}):(c=t&&t.tail,l=typeof c===d?c.call(t,{hash:{},data:i}):c),u+=h(l)+'">',l=n["if"].call(t,t&&t.tokenType,{hash:{},inverse:p.noop,fn:p.program(3,r,i),data:i}),(l||0===l)&&(u+=l),u+="</span></span></div></div>",l=n["if"].call(t,t&&t.address,{hash:{},inverse:p.noop,fn:p.program(5,s,i),data:i}),(l||0===l)&&(u+=l),u},this.jst_modules=this.jst_modules||{},this.jst_modules.summer=this.jst_modules.summer||{},this.jst_modules.summer.header=function(e,t,n,a,i){function o(e,t){var a,i,o="";return o+='<div class="summer__headerNote">',(i=n.note)?a=i.call(e,{hash:{},data:t}):(i=e&&e.note,a=typeof i===k?i.call(e,{hash:{},data:t}):i),o+=w(a)+"</div>"}function r(e,t){var a,i="";return i+='<div class="summer__headerLanguageSelect">',a=n.each.call(e,e&&e.nationalLang,{hash:{},inverse:x.noop,fn:x.program(4,s,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function s(e,t){var a,i,o="";return o+='<div class="summer__headerLanguageSelectItem',a=n["if"].call(e,e&&e.active,{hash:{},inverse:x.noop,fn:x.program(5,l,t),data:t}),(a||0===a)&&(o+=a),o+=" ",a=n["if"].call(e,e&&e.common,{hash:{},inverse:x.noop,fn:x.program(7,c,t),data:t}),(a||0===a)&&(o+=a),o+='">',(i=n.lang)?a=i.call(e,{hash:{},data:t}):(i=e&&e.lang,a=typeof i===k?i.call(e,{hash:{},data:t}):i),o+=w(a)+"</div>"}function l(e,t){return" _active"}function c(e,t){return" _common"}function u(e,t){var a,i,o="";return(i=n.nationalHeading)?a=i.call(e,{hash:{},data:t}):(i=e&&e.nationalHeading,a=typeof i===k?i.call(e,{hash:{},data:t}):i),o+=w(a)}function d(e,t){var a,i,o,r="";return r+=w((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Лето",o):C.call(e,"_gg","Лето",o)))+" ",(i=n.inRegion)?a=i.call(e,{hash:{},data:t}):(i=e&&e.inRegion,a=typeof i===k?i.call(e,{hash:{},data:t}):i),r+=w(a)}function h(e,t){return'<div class="summer__headerLogo"></div>'}function p(e,t){var a,i="";return i+='<div class="summer__headerLinks">',a=n.each.call(e,e&&e.links,{hash:{},inverse:x.noop,fn:x.program(16,f,t),data:t}),(a||0===a)&&(i+=a),a=n["if"].call(e,e&&e.additional,{hash:{},inverse:x.noop,fn:x.program(21,_,t),data:t}),(a||0===a)&&(i+=a),i+="</div>"}function f(e,t){var a,i,o,r="";return r+='<a href="',(i=n.link)?a=i.call(e,{hash:{},data:t}):(i=e&&e.link,a=typeof i===k?i.call(e,{hash:{},data:t}):i),r+=w(a)+'" target="_blank" class="summer__headerLink',a=n["if"].call(e,e&&e.type,{hash:{},inverse:x.noop,fn:x.program(17,m,t),data:t}),(a||0===a)&&(r+=a),r+='">'+w((i=n.Icon||e&&e.Icon,o={hash:{"class":"summer__headerLinkIcon"},data:t},i?i.call(e,e&&e.icon,o):C.call(e,"Icon",e&&e.icon,o)))+'<div class="summer__headerLinkWrap"><div class="summer__headerLinkText">',(i=n.text)?a=i.call(e,{hash:{},data:t}):(i=e&&e.text,a=typeof i===k?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(r+=a),r+="</div>",a=n["if"].call(e,e&&e.desc,{hash:{},inverse:x.noop,fn:x.program(19,g,t),data:t}),(a||0===a)&&(r+=a),r+="</div></a>"}function m(e,t){var a,i,o="";return o+=" _type_",(i=n.type)?a=i.call(e,{hash:{},data:t}):(i=e&&e.type,a=typeof i===k?i.call(e,{hash:{},data:t}):i),o+=w(a)}function g(e,t){var a,i,o="";return o+='<div class="summer__headerLinkDesc">',(i=n.desc)?a=i.call(e,{hash:{},data:t}):(i=e&&e.desc,a=typeof i===k?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</div>"}function _(e,t){var a,i,o="";return o+='<p class="summer__additional">',(i=n.additional)?a=i.call(e,{hash:{},data:t}):(i=e&&e.additional,a=typeof i===k?i.call(e,{hash:{},data:t}):i),(a||0===a)&&(o+=a),o+="</p>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var v,y,b="",k="function",w=this.escapeExpression,x=this,C=n.helperMissing;return b+='<header class="summer__header _location_',(y=n.location)?v=y.call(t,{hash:{},data:i}):(y=t&&t.location,v=typeof y===k?y.call(t,{hash:{},data:i}):y),b+=w(v)+'"><div class="summer__headerContent">',v=n["if"].call(t,t&&t.note,{hash:{},inverse:x.noop,fn:x.program(1,o,i),data:i}),(v||0===v)&&(b+=v),v=n["if"].call(t,t&&t.nationalLang,{hash:{},inverse:x.noop,fn:x.program(3,r,i),data:i}),(v||0===v)&&(b+=v),b+='<h1 class="summer__headerHeading">',v=n["if"].call(t,t&&t.nationalHeading,{hash:{},inverse:x.program(11,d,i),fn:x.program(9,u,i),data:i}),(v||0===v)&&(b+=v),b+='</h1><p class="summer__headerDescription">',(y=n.text)?v=y.call(t,{hash:{},data:i}):(y=t&&t.text,v=typeof y===k?y.call(t,{hash:{},data:i}):y),(v||0===v)&&(b+=v),b+="</p>",v=n["if"].call(t,t&&t.sponsorLogo,{hash:{},inverse:x.noop,fn:x.program(13,h,i),data:i}),(v||0===v)&&(b+=v),b+="</div>",v=n["if"].call(t,t&&t.links,{hash:{},inverse:x.noop,fn:x.program(15,p,i),data:i}),(v||0===v)&&(b+=v),b+="</header>"},this.jst_modules=this.jst_modules||{},this.jst_modules.whatsNew=this.jst_modules.whatsNew||{},this.jst_modules.whatsNew.newsItem=function(e,t,n,a,i){function o(e,t){var n,a="";return a+='<div class="whatsNew__itemAuthorPosition">'+g((n=e&&e.author,n=null==n||n===!1?n:n.position,typeof n===m?n.apply(e):n))+"</div>"}function r(e,t){var a,i,o="";return o+='<a href="'+g((a=e&&e.link,a=null==a||a===!1?a:a.href,typeof a===m?a.apply(e):a))+'" class="link _undashed whatsNew__itemEntryPoint" data-type="'+g((a=e&&e.link,a=null==a||a===!1?a:a.type,typeof a===m?a.apply(e):a))+'" target="_blank" data-news-item-id=',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===m?i.call(e,{hash:{},data:t}):i),o+=g(a)+">",a=e&&e.link,a=null==a||a===!1?a:a.title,a=typeof a===m?a.apply(e):a,(a||0===a)&&(o+=a),o+="</a>"}function s(e,t){var a,i,o="";return o+=g((a=n._t||e&&e._t,i={hash:{},data:t},a?a.call(e,"Сегодня",i):_.call(e,"_t","Сегодня",i)))}function l(e,t){var n,a="";return a+=g((n=e&&e.date,n=null==n||n===!1?n:n.formatted,n=null==n||n===!1?n:n.value,typeof n===m?n.apply(e):n))}function c(e,t){var a,i,o,r="";return r+='<div class="whatsNew__itemSocialLikes',a=n["if"].call(e,e&&e.active,{hash:{},inverse:v.noop,fn:v.program(10,u,t),data:t}),(a||0===a)&&(r+=a),r+='">'+g((i=n.Icon||e&&e.Icon,o={hash:{"class":"whatsNew__itemSocialLikesIcon"},data:t},i?i.call(e,"whatsNew_like",o):_.call(e,"Icon","whatsNew_like",o)))+'<span class="whatsNew__itemSocialLikesCount">'+g((a=e&&e.likes,a=null==a||a===!1?a:a.count,typeof a===m?a.apply(e):a))+"</span></div>"}function u(e,t){return" _active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var d,h,p,f="",m="function",g=this.escapeExpression,_=n.helperMissing,v=this;return f+='<article class="whatsNew__item" data-id=',(h=n.id)?d=h.call(t,{hash:{},data:i}):(h=t&&t.id,d=typeof h===m?h.call(t,{hash:{},data:i}):h),f+=g(d)+'><div class="whatsNew__itemAuthor"><div class="whatsNew__itemAuthorAvatar"><div class="whatsNew__itemAuthorAvatarImg" style="background-image: url('+g((d=t&&t.author,d=null==d||d===!1?d:d.avatar,typeof d===m?d.apply(t):d))+')"></div></div><div class="whatsNew__itemAuthorInfo"><div class="whatsNew__itemAuthorName">'+g((d=t&&t.author,d=null==d||d===!1?d:d.name,typeof d===m?d.apply(t):d))+"</div>",d=n["if"].call(t,(d=t&&t.author,null==d||d===!1?d:d.position),{hash:{},inverse:v.noop,fn:v.program(1,o,i),data:i}),(d||0===d)&&(f+=d),f+='</div></div><div class="whatsNew__itemContent">',(h=n.content)?d=h.call(t,{hash:{},data:i}):(h=t&&t.content,d=typeof h===m?h.call(t,{hash:{},data:i}):h),(d||0===d)&&(f+=d),f+="</div>",d=n["if"].call(t,t&&t.link,{hash:{},inverse:v.noop,fn:v.program(3,r,i),data:i}),(d||0===d)&&(f+=d),f+='<div class="whatsNew__itemFooter"><time class="whatsNew__itemDate" datetime="'+g((d=t&&t.date,d=null==d||d===!1?d:d.raw,typeof d===m?d.apply(t):d))+'">',d=n["if"].call(t,(d=t&&t.date,d=null==d||d===!1?d:d.formatted,null==d||d===!1?d:d.isTodayNews),{hash:{},inverse:v.program(7,l,i),fn:v.program(5,s,i),data:i}),(d||0===d)&&(f+=d),f+='</time><div class="whatsNew__itemSocial">',d=n["if"].call(t,t&&t.likes,{hash:{},inverse:v.noop,fn:v.program(9,c,i),data:i}),(d||0===d)&&(f+=d),f+='<div class="whatsNew__itemSocialSharing">'+g((h=n.Icon||t&&t.Icon,p={hash:{"class":"whatsNew__itemSocialSharingIcon"},data:i},h?h.call(t,"whatsNew_share",p):_.call(t,"Icon","whatsNew_share",p)))+"</div></div></div></article>"},this.jst_modules=this.jst_modules||{},this.jst_modules.world=this.jst_modules.world||{},this.jst_modules.world.cities=function(e,t,n,a,i){function o(e,t){var a,i,o,s="";return s+='<li class="world__listItem" data-id="',(i=n.id)?a=i.call(e,{hash:{},data:t}):(i=e&&e.id,a=typeof i===u?i.call(e,{hash:{},data:t}):i),s+=h(a)+'">'+h((i=n.Icon||e&&e.Icon,o={hash:{fallback:"logo_s_default","class":"world__listItemLogo"},data:t},i?i.call(e,e&&e.logo,o):p.call(e,"Icon",e&&e.logo,o)))+'<h2 class="world__listItemName">',i=n.Link||e&&e.Link,o={hash:{href:e&&e.url,"class":"_undashed world__listItemNameLink"},data:t},a=i?i.call(e,e&&e.name,o):p.call(e,"Link",e&&e.name,o),(a||0===a)&&(s+=a),s+="</h2>",a=n["if"].call(e,e&&e.settlements,{hash:{},inverse:d.noop,fn:d.program(2,r,t),data:t}),(a||0===a)&&(s+=a),s+="</li>"}function r(e,t){var a,i="";return i+='<ul class="world__settlements">',a=n.each.call(e,e&&e.settlements,{hash:{},inverse:d.noop,fn:d.program(3,s,t),data:t}),(a||0===a)&&(i+=a),i+="</ul>"}function s(e,t){var n,a="";return a+='<li class="world__settlementsItem">',n=typeof e===u?e.apply(e):e,(n||0===n)&&(a+=n),a+="</li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,c="",u="function",d=this,h=this.escapeExpression,p=n.helperMissing;return c+='<ul class="world__list">',l=n.each.call(t,t&&t.regions,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(l||0===l)&&(c+=l),c+="</ul>"},this.jst_modules=this.jst_modules||{},this.jst_modules.world=this.jst_modules.world||{},this.jst_modules.world.list=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<section class="world__section _collapsed" data-code="',(i=n.code)?a=i.call(e,{hash:{},data:t}):(i=e&&e.code,a=typeof i===l?i.call(e,{hash:{},data:t}):i),r+=c(a)+'"><header class="world__sectionHeader"><div class="world__sectionHeaderIn">',(i=n.name)?a=i.call(e,{hash:{},data:t}):(i=e&&e.name,a=typeof i===l?i.call(e,{hash:{},data:t}):i),r+=c(a)+'<span class="world__sectionCount">',(i=n.citiesCount)?a=i.call(e,{hash:{},data:t}):(i=e&&e.citiesCount,a=typeof i===l?i.call(e,{hash:{},data:t}):i),r+=c(a)+"</span></div></header>"+c((i=n.p||e&&e.p,o={hash:{},data:t},i?i.call(e,"cities",o):u.call(e,"p","cities",o)))+"</section>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l="function",c=this.escapeExpression,u=n.helperMissing,d=this;return r=n.each.call(t,t&&t.items,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},this.jst_modules=this.jst_modules||{},this.jst_modules.world=this.jst_modules.world||{},this.jst_modules.world.location=function(e,t,n,a,i){function o(e,t){var a,i,o,r="";return r+='<div class="world__location" data-id="'+c((a=e&&e.location,a=null==a||a===!1?a:a.id,typeof a===l?a.apply(e):a))+'">'+c((i=n.Icon||e&&e.Icon,o={hash:{"class":"world__locationLogo"},data:t},i?i.call(e,(a=e&&e.location,null==a||a===!1?a:a.logo),o):u.call(e,"Icon",(a=e&&e.location,null==a||a===!1?a:a.logo),o)))+'<div class="world__locationName">'+c((a=e&&e.location,a=null==a||a===!1?a:a.name,typeof a===l?a.apply(e):a))+'</div><div class="world__locationText">'+c((i=n._gg||e&&e._gg,o={hash:{},data:t},i?i.call(e,"Мы определили вас здесь. Перейти?",o):u.call(e,"_gg","Мы определили вас здесь. Перейти?",o)))+"</div></div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,s="",l="function",c=this.escapeExpression,u=n.helperMissing,d=this;return r=n["if"].call(t,t&&t.location,{hash:{},inverse:d.noop,fn:d.program(1,o,i),data:i}),(r||0===r)&&(s+=r),s},require("/apps/online/clientBootstrap.js").run();